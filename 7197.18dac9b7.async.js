!(function(){var IS=Object.defineProperty,OS=Object.defineProperties;var DS=Object.getOwnPropertyDescriptors;var Mh=Object.getOwnPropertySymbols;var R0=Object.prototype.hasOwnProperty,k0=Object.prototype.propertyIsEnumerable;var Av=Math.pow,N0=(Ve,z,C)=>z in Ve?IS(Ve,z,{enumerable:!0,configurable:!0,writable:!0,value:C}):Ve[z]=C,Pa=(Ve,z)=>{for(var C in z||(z={}))R0.call(z,C)&&N0(Ve,C,z[C]);if(Mh)for(var C of Mh(z))k0.call(z,C)&&N0(Ve,C,z[C]);return Ve},So=(Ve,z)=>OS(Ve,DS(z));var _h=(Ve,z)=>{var C={};for(var b in Ve)R0.call(Ve,b)&&z.indexOf(b)<0&&(C[b]=Ve[b]);if(Ve!=null&&Mh)for(var b of Mh(Ve))z.indexOf(b)<0&&k0.call(Ve,b)&&(C[b]=Ve[b]);return C};var B0=(Ve,z,C)=>new Promise((b,k)=>{var w=P=>{try{L(C.next(P))}catch(p){k(p)}},T=P=>{try{L(C.throw(P))}catch(p){k(p)}},L=P=>P.done?b(P.value):Promise.resolve(P.value).then(w,T);L((C=C.apply(Ve,z)).next())});(self.webpackChunkantd=self.webpackChunkantd||[]).push([[7197],{62238:function(Ve,z){"use strict";Object.defineProperty(z,"__esModule",{value:!0}),z.default=void 0;var C=function(w,T){var L=w.nodes,P=w.edges,p=[],m={};if(!L)throw new Error("invalid nodes data!");return L&&L.forEach(function(S,x){m[S.id]=x;var g=[];p.push(g)}),P&&P.forEach(function(S){var x=S.source,g=S.target,A=m[x],E=m[g];!A&&A!==0||!E&&E!==0||(p[A][E]=1,T||(p[E][A]=1))}),p},b=C;z.default=b},810369:function(Ve,z,C){"use strict";Object.defineProperty(z,"__esModule",{value:!0}),Object.defineProperty(z,"GADDIAsync",{enumerable:!0,get:function(){return b.GADDIAsync}}),Object.defineProperty(z,"connectedComponentAsync",{enumerable:!0,get:function(){return b.connectedComponentAsync}}),z.default=void 0,Object.defineProperty(z,"detectAllCyclesAsync",{enumerable:!0,get:function(){return b.detectAllCyclesAsync}}),Object.defineProperty(z,"detectAllDirectedCycleAsync",{enumerable:!0,get:function(){return b.detectAllDirectedCycleAsync}}),Object.defineProperty(z,"detectAllUndirectedCycleAsync",{enumerable:!0,get:function(){return b.detectAllUndirectedCycleAsync}}),Object.defineProperty(z,"detectCycleAsync",{enumerable:!0,get:function(){return b.detectCycleAsync}}),z.detectDirectedCycleAsync=void 0,Object.defineProperty(z,"dijkstraAsync",{enumerable:!0,get:function(){return b.dijkstraAsync}}),Object.defineProperty(z,"findAllPathAsync",{enumerable:!0,get:function(){return b.findAllPathAsync}}),Object.defineProperty(z,"findShortestPathAsync",{enumerable:!0,get:function(){return b.findShortestPathAsync}}),Object.defineProperty(z,"floydWarshallAsync",{enumerable:!0,get:function(){return b.floydWarshallAsync}}),Object.defineProperty(z,"getAdjMatrixAsync",{enumerable:!0,get:function(){return b.getAdjMatrixAsync}}),Object.defineProperty(z,"getDegreeAsync",{enumerable:!0,get:function(){return b.getDegreeAsync}}),Object.defineProperty(z,"getInDegreeAsync",{enumerable:!0,get:function(){return b.getInDegreeAsync}}),Object.defineProperty(z,"getNeighborsAsync",{enumerable:!0,get:function(){return b.getNeighborsAsync}}),Object.defineProperty(z,"getOutDegreeAsync",{enumerable:!0,get:function(){return b.getOutDegreeAsync}}),Object.defineProperty(z,"labelPropagationAsync",{enumerable:!0,get:function(){return b.labelPropagationAsync}}),Object.defineProperty(z,"louvainAsync",{enumerable:!0,get:function(){return b.louvainAsync}}),Object.defineProperty(z,"minimumSpanningTreeAsync",{enumerable:!0,get:function(){return b.minimumSpanningTreeAsync}}),Object.defineProperty(z,"pageRankAsync",{enumerable:!0,get:function(){return b.pageRankAsync}});var b=C(430485),k=b.detectCycleAsync;z.detectDirectedCycleAsync=k;var w={getAdjMatrixAsync:b.getAdjMatrixAsync,connectedComponentAsync:b.connectedComponentAsync,getDegreeAsync:b.getDegreeAsync,getInDegreeAsync:b.getInDegreeAsync,getOutDegreeAsync:b.getOutDegreeAsync,detectCycleAsync:b.detectCycleAsync,detectDirectedCycleAsync:k,detectAllCyclesAsync:b.detectAllCyclesAsync,detectAllDirectedCycleAsync:b.detectAllDirectedCycleAsync,detectAllUndirectedCycleAsync:b.detectAllUndirectedCycleAsync,dijkstraAsync:b.dijkstraAsync,findAllPathAsync:b.findAllPathAsync,findShortestPathAsync:b.findShortestPathAsync,floydWarshallAsync:b.floydWarshallAsync,labelPropagationAsync:b.labelPropagationAsync,louvainAsync:b.louvainAsync,minimumSpanningTreeAsync:b.minimumSpanningTreeAsync,pageRankAsync:b.pageRankAsync,getNeighborsAsync:b.getNeighborsAsync,GADDIAsync:b.GADDIAsync};z.default=w},683764:function(Ve,z,C){"use strict";Object.defineProperty(z,"__esModule",{value:!0}),z.default=void 0;var b=w(C(893026)),k=C(770643);function w(p){return p&&p.__esModule?p:{default:p}}function T(p){p===void 0&&(p={});var m=p,S=function(){},x=function(){var g={};return function(A){var E=A.next,D=E;return g[D]?!1:(g[D]=!0,!0)}}();return m.allowTraversal=p.allowTraversal||x,m.enter=p.enter||S,m.leave=p.leave||S,m}var L=function(m,S,x,g){g===void 0&&(g=!0);var A=T(x),E=new b.default,D=m.edges,F=D===void 0?[]:D;E.enqueue(S);for(var y="",h=function(){var $=E.dequeue();A.enter({current:$,previous:y}),(0,k.getNeighbors)($,F,g?"target":void 0).forEach(function(U){A.allowTraversal({previous:y,current:$,next:U})&&E.enqueue(U)}),A.leave({current:$,previous:y}),y=$};!E.isEmpty();)h()},P=L;z.default=P},759527:function(Ve,z,C){"use strict";Object.defineProperty(z,"__esModule",{value:!0}),z.default=T,z.detectStrongConnectComponents=z.detectConnectedComponents=void 0;var b=C(770643),k=function(P){for(var p=P.nodes,m=p===void 0?[]:p,S=P.edges,x=S===void 0?[]:S,g=[],A={},E=[],D=function Y($){E.push($),A[$.id]=!0;for(var U=(0,b.getNeighbors)($.id,x),W=function(Q){var tt=U[Q];if(!A[tt]){var rt=m.filter(function(ct){return ct.id===tt});rt.length>0&&Y(rt[0])}},V=0;V<U.length;++V)W(V)},F=0;F<m.length;F++){var y=m[F];if(!A[y.id]){D(y);for(var h=[];E.length>0;)h.push(E.pop());g.push(h)}}return g};z.detectConnectedComponents=k;var w=function(P){for(var p=P.nodes,m=p===void 0?[]:p,S=P.edges,x=S===void 0?[]:S,g=[],A={},E={},D={},F=[],y=0,h=function W(V){E[V.id]=y,D[V.id]=y,y+=1,g.push(V),A[V.id]=!0;for(var H=(0,b.getNeighbors)(V.id,x,"target").filter(function(ot){return m.map(function(xt){return xt.id}).indexOf(ot)>-1}),Q=function(xt){var pt=H[xt];if(!E[pt]&&E[pt]!==0){var Xt=m.filter(function(Ct){return Ct.id===pt});Xt.length>0&&W(Xt[0]),D[V.id]=Math.min(D[V.id],D[pt])}else A[pt]&&(D[V.id]=Math.min(D[V.id],E[pt]))},tt=0;tt<H.length;tt++)Q(tt);if(D[V.id]===E[V.id]){for(var rt=[];g.length>0;){var ct=g.pop();if(A[ct.id]=!1,rt.push(ct),ct===V)break}rt.length>0&&F.push(rt)}},Y=0,$=m;Y<$.length;Y++){var U=$[Y];!E[U.id]&&E[U.id]!==0&&h(U)}return F};z.detectStrongConnectComponents=w;function T(L,P){return P?w(L):k(L)}},592935:function(Ve,z){"use strict";Object.defineProperty(z,"__esModule",{value:!0}),z.secondReg=z.dateReg=void 0;var C=/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2})$/;z.secondReg=C;var b=/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})$/;z.dateReg=b},182556:function(Ve,z){"use strict";Object.defineProperty(z,"__esModule",{value:!0}),z.getOutDegree=z.getInDegree=z.default=void 0;var C=function(L){var P={},p=L.nodes,m=p===void 0?[]:p,S=L.edges,x=S===void 0?[]:S;return m.forEach(function(g){P[g.id]={degree:0,inDegree:0,outDegree:0}}),x.forEach(function(g){P[g.source].degree++,P[g.source].outDegree++,P[g.target].degree++,P[g.target].inDegree++}),P},b=C;z.default=b;var k=function(L,P){var p=C(L);return p[P]?C(L)[P].inDegree:0};z.getInDegree=k;var w=function(L,P){var p=C(L);return p[P]?C(L)[P].outDegree:0};z.getOutDegree=w},994282:function(Ve,z,C){"use strict";function b(E){"@babel/helpers - typeof";return b=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(D){return typeof D}:function(D){return D&&typeof Symbol=="function"&&D.constructor===Symbol&&D!==Symbol.prototype?"symbol":typeof D},b(E)}Object.defineProperty(z,"__esModule",{value:!0}),z.detectAllUndirectedCycle=z.detectAllDirectedCycle=z.detectAllCycles=z.default=void 0;var k=p(C(45891)),w=P(C(759527)),T=C(770643);function L(E){if(typeof WeakMap!="function")return null;var D=new WeakMap,F=new WeakMap;return(L=function(h){return h?F:D})(E)}function P(E,D){if(!D&&E&&E.__esModule)return E;if(E===null||b(E)!=="object"&&typeof E!="function")return{default:E};var F=L(D);if(F&&F.has(E))return F.get(E);var y={},h=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Y in E)if(Y!=="default"&&Object.prototype.hasOwnProperty.call(E,Y)){var $=h?Object.getOwnPropertyDescriptor(E,Y):null;$&&($.get||$.set)?Object.defineProperty(y,Y,$):y[Y]=E[Y]}return y.default=E,F&&F.set(E,y),y}function p(E){return E&&E.__esModule?E:{default:E}}var m=function(D){var F=null,y=D.nodes,h=y===void 0?[]:y,Y={},$={},U={},W={};h.forEach(function(Q){$[Q.id]=Q});for(var V={enter:function(tt){var rt=tt.current,ct=tt.previous;if(U[rt]){F={};for(var ot=rt,xt=ct;xt!==rt;)F[ot]=xt,ot=xt,xt=Y[xt];F[ot]=xt}else U[rt]=rt,delete $[rt],Y[rt]=ct},leave:function(tt){var rt=tt.current;W[rt]=rt,delete U[rt]},allowTraversal:function(tt){var rt=tt.next;return F?!1:!W[rt]}};Object.keys($).length;){var H=Object.keys($)[0];(0,k.default)(D,H,V)}return F},S=function(D,F,y){var h,Y;y===void 0&&(y=!0);for(var $=[],U=(0,w.default)(D,!1),W=0,V=U;W<V.length;W++){var H=V[W];if(H.length)for(var Q=H[0],tt=Q.id,rt=[Q],ct=(h={},h[tt]=Q,h),ot=(Y={},Y[tt]=new Set,Y);rt.length>0;)for(var xt=rt.pop(),pt=xt.id,Xt=(0,T.getNeighbors)(pt,D.edges),Ct=function(q){var bt,_t=Xt[q],nt=D.nodes.find(function($t){return $t.id===_t});if(_t===pt)$.push((bt={},bt[_t]=xt,bt));else if(!(_t in ot))ct[_t]=xt,rt.push(nt),ot[_t]=new Set([xt]);else if(!ot[pt].has(nt)){for(var vt=!0,It=[nt,xt],Pt=ct[pt];ot[_t].size&&!ot[_t].has(Pt)&&(It.push(Pt),Pt!==ct[Pt.id]);)Pt=ct[Pt.id];if(It.push(Pt),F&&y?(vt=!1,It.findIndex(function($t){return F.indexOf($t.id)>-1})>-1&&(vt=!0)):F&&!y&&It.findIndex(function($t){return F.indexOf($t.id)>-1})>-1&&(vt=!1),vt){for(var Et={},Nt=1;Nt<It.length;Nt+=1)Et[It[Nt-1].id]=It[Nt];It.length&&(Et[It[It.length-1].id]=It[0]),$.push(Et)}ot[_t].add(xt)}},At=0;At<Xt.length;At+=1)Ct(At)}return $};z.detectAllUndirectedCycle=S;var x=function(D,F,y){y===void 0&&(y=!0);for(var h=[],Y=new Set,$=[],U=[],W={},V={},H=function(Pt){for(var Et=[Pt];Et.length>0;){var Nt=Et.pop();Y.has(Nt)&&(Y.delete(Nt),$[Nt.id].forEach(function($t){Et.push($t)}),$[Nt.id].clear())}},Q=function It(Pt,Et,Nt){var $t=!1;if(F&&y===!1&&F.indexOf(Pt.id)>-1)return $t;h.push(Pt),Y.add(Pt);for(var ue=Nt[Pt.id],ie=0;ie<ue.length;ie+=1){var Dt=W[ue[ie]];if(Dt===Et){for(var ne={},pe=1;pe<h.length;pe+=1)ne[h[pe-1].id]=h[pe];h.length&&(ne[h[h.length-1].id]=h[0]),U.push(ne),$t=!0}else Y.has(Dt)||It(Dt,Et,Nt)&&($t=!0)}if($t)H(Pt);else for(var ie=0;ie<ue.length;ie+=1){var Dt=W[ue[ie]];$[Dt.id].has(Pt)||$[Dt.id].add(Pt)}return h.pop(),$t},tt=D.nodes,rt=tt===void 0?[]:tt,ct=0;ct<rt.length;ct+=1){var ot=rt[ct],xt=ot.id;V[xt]=ct,W[ct]=ot}if(F&&y)for(var pt=function(Pt){var Et=F[Pt];V[rt[Pt].id]=V[Et],V[Et]=0,W[0]=rt.find(function(Nt){return Nt.id===Et}),W[V[rt[Pt].id]]=rt[Pt]},ct=0;ct<F.length;ct++)pt(ct);for(var Xt=function(Pt){for(var Et,Nt,$t=1/0,ue=0;ue<Pt.length;ue+=1)for(var ie=Pt[ue],Dt=0;Dt<ie.length;Dt++){var ne=V[ie[Dt].id];ne<$t&&($t=ne,Nt=ue)}for(var pe=Pt[Nt],Wt=[],ue=0;ue<pe.length;ue+=1){var ae=pe[ue];Wt[ae.id]=[];for(var Se=0,be=(0,T.getNeighbors)(ae.id,D.edges,"target").filter(function(Tt){return pe.map(function(Le){return Le.id}).indexOf(Tt)>-1});Se<be.length;Se++){var Qt=be[Se];Qt===ae.id&&!(y===!1&&F.indexOf(ae.id)>-1)?U.push((Et={},Et[ae.id]=ae,Et)):Wt[ae.id].push(V[Qt])}}return{component:pe,adjList:Wt,minIdx:$t}},Ct=0;Ct<rt.length;){var At=rt.filter(function(It){return V[It.id]>=Ct}),Z=(0,w.detectStrongConnectComponents)({nodes:At,edges:D.edges}).filter(function(It){return It.length>1});if(Z.length===0)break;var q=Xt(Z),bt=q.minIdx,_t=q.adjList,nt=q.component;if(nt.length>1){nt.forEach(function(It){$[It.id]=new Set});var vt=W[bt];if(F&&y&&F.indexOf(vt.id)===-1)return U;Q(vt,vt,_t),Ct=bt+1}else break}return U};z.detectAllDirectedCycle=x;var g=function(D,F,y,h){return h===void 0&&(h=!0),F?x(D,y,h):S(D,y,h)};z.detectAllCycles=g;var A=m;z.default=A},45891:function(Ve,z,C){"use strict";Object.defineProperty(z,"__esModule",{value:!0}),z.default=T;var b=C(770643);function k(L){L===void 0&&(L={});var P=L,p=function(){},m=function(){var S={};return function(x){var g=x.next;return S[g]?!1:(S[g]=!0,!0)}}();return P.allowTraversal=L.allowTraversal||m,P.enter=L.enter||p,P.leave=L.leave||p,P}function w(L,P,p,m){m.enter({current:P,previous:p});var S=L.edges,x=S===void 0?[]:S;(0,b.getNeighbors)(P,x,"target").forEach(function(g){m.allowTraversal({previous:p,current:P,next:g})&&w(L,g,P,m)}),m.leave({current:P,previous:p})}function T(L,P,p){w(L,P,"",k(p))}},878089:function(Ve,z,C){"use strict";Object.defineProperty(z,"__esModule",{value:!0}),z.default=void 0;var b=C(197582),k=C(413810),w=C(770643),T=function(S,x,g){for(var A=1/0,E,D=0;D<x.length;D++){var F=x[D].id;!g[F]&&S[F]<=A&&(A=S[F],E=x[D])}return E},L=function(S,x,g,A){var E=S.nodes,D=E===void 0?[]:E,F=S.edges,y=F===void 0?[]:F,h=[],Y={},$={},U={};D.forEach(function(ct,ot){var xt=ct.id;h.push(xt),$[xt]=1/0,xt===x&&($[xt]=0)});for(var W=D.length,V=function(ot){var xt=T($,D,Y),pt=xt.id;if(Y[pt]=!0,$[pt]===1/0)return"continue";var Xt=[];g?Xt=(0,w.getOutEdgesNodeId)(pt,y):Xt=(0,w.getEdgesByNodeId)(pt,y),Xt.forEach(function(Ct){var At=Ct.target,Z=Ct.source,q=At===pt?Z:At,bt=A&&Ct[A]?Ct[A]:1;$[q]>$[xt.id]+bt?($[q]=$[xt.id]+bt,U[q]=[xt.id]):$[q]===$[xt.id]+bt&&U[q].push(xt.id)})},H=0;H<W;H++)V(H);U[x]=[x];var Q={};for(var tt in $)$[tt]!==1/0&&p(x,tt,U,Q);var rt={};for(var tt in Q)rt[tt]=Q[tt][0];return{length:$,path:rt,allPath:Q}},P=L;z.default=P;function p(m,S,x,g){if(m===S)return[m];if(g[S])return g[S];for(var A=[],E=0,D=x[S];E<D.length;E++){var F=D[E],y=p(m,F,x,g);if(!y)return;for(var h=0,Y=y;h<Y.length;h++){var $=Y[h];(0,k.isArray)($)?A.push((0,b.__spreadArray)((0,b.__spreadArray)([],$,!0),[S],!1)):A.push([$,S])}}return g[S]=A,g[S]}},241727:function(Ve,z,C){"use strict";Object.defineProperty(z,"__esModule",{value:!0}),z.findShortestPath=z.findAllPath=void 0;var b=w(C(878089)),k=C(770643);function w(P){return P&&P.__esModule?P:{default:P}}var T=function(p,m,S,x,g){var A=(0,b.default)(p,m,x,g),E=A.length,D=A.path,F=A.allPath;return{length:E[S],path:D[S],allPath:F[S]}};z.findShortestPath=T;var L=function(p,m,S,x){var g;if(m===S)return[[m]];var A=p.edges,E=A===void 0?[]:A,D=[m],F=(g={},g[m]=!0,g),y=[],h=[],Y=x?(0,k.getNeighbors)(m,E,"target"):(0,k.getNeighbors)(m,E);for(y.push(Y);D.length>0&&y.length>0;){var $=y[y.length-1];if($.length){var U=$.shift();U&&(D.push(U),F[U]=!0,Y=x?(0,k.getNeighbors)(U,E,"target"):(0,k.getNeighbors)(U,E),y.push(Y.filter(function(H){return!F[H]})))}else{var W=D.pop();F[W]=!1,y.pop();continue}if(D[D.length-1]===S){var V=D.map(function(Q){return Q});h.push(V);var W=D.pop();F[W]=!1,y.pop()}}return h};z.findAllPath=L},975033:function(Ve,z,C){"use strict";Object.defineProperty(z,"__esModule",{value:!0}),z.default=void 0;var b=k(C(62238));function k(L){return L&&L.__esModule?L:{default:L}}var w=function(P,p){for(var m=(0,b.default)(P,p),S=[],x=m.length,g=0;g<x;g+=1){S[g]=[];for(var A=0;A<x;A+=1)g===A?S[g][A]=0:m[g][A]===0||!m[g][A]?S[g][A]=1/0:S[g][A]=m[g][A]}for(var E=0;E<x;E+=1)for(var g=0;g<x;g+=1)for(var A=0;A<x;A+=1)S[g][A]>S[g][E]+S[E][A]&&(S[g][A]=S[g][E]+S[E][A]);return S},T=w;z.default=T},821146:function(Ve,z,C){"use strict";Object.defineProperty(z,"__esModule",{value:!0}),z.default=void 0;var b=C(413810),k=C(368575),w=function(){function A(E,D,F,y,h){this.fromNode=E,this.toNode=D,this.nodeEdgeNodeLabel={nodeLabel1:F||k.VACANT_NODE_LABEL,edgeLabel:y||k.VACANT_EDGE_LABEL,nodeLabel2:h||k.VACANT_NODE_LABEL}}return A.prototype.equalTo=function(E){return this.fromNode===E.formNode&&this.toNode===E.toNode&&this.nodeEdgeNodeLabel===E.nodeEdgeNodeLabel},A.prototype.notEqualTo=function(E){return!this.equalTo(E)},A}(),T=function(){function A(){this.rmpath=[],this.dfsEdgeList=[]}return A.prototype.equalTo=function(E){var D=this.dfsEdgeList.length,F=E.length;if(D!==F)return!1;for(var y=0;y<D;y++)if(this.dfsEdgeList[y]!==E[y])return!1;return!0},A.prototype.notEqualTo=function(E){return!this.equalTo(E)},A.prototype.pushBack=function(E,D,F,y,h){return this.dfsEdgeList.push(new w(E,D,F,y,h)),this.dfsEdgeList},A.prototype.toGraph=function(E,D){E===void 0&&(E=k.VACANT_GRAPH_ID),D===void 0&&(D=!1);var F=new k.Graph(E,!0,D);return this.dfsEdgeList.forEach(function(y){var h=y.fromNode,Y=y.toNode,$=y.nodeEdgeNodeLabel,U=$.nodeLabel1,W=$.edgeLabel,V=$.nodeLabel2;U!==k.VACANT_NODE_LABEL&&F.addNode(h,U),V!==k.VACANT_NODE_LABEL&&F.addNode(Y,V),U!==k.VACANT_NODE_LABEL&&V!==U&&F.addEdge(void 0,h,Y,W)}),F},A.prototype.buildRmpath=function(){this.rmpath=[];for(var E=void 0,D=this.dfsEdgeList.length,F=D-1;F>=0;F--){var y=this.dfsEdgeList[F],h=y.fromNode,Y=y.toNode;h<Y&&(E===void 0||Y===E)&&(this.rmpath.push(F),E=h)}return this.rmpath},A.prototype.getNodeNum=function(){var E={};return this.dfsEdgeList.forEach(function(D){E[D.fromNode]||(E[D.fromNode]=!0),E[D.toNode]||(E[D.toNode]=!0)}),Object.keys(E).length},A}(),L=function(){function A(E){if(this.his={},this.nodesUsed={},this.edgesUsed={},this.edges=[],!!E){for(;E;){var D=E.edge;this.edges.push(D),this.nodesUsed[D.from]=1,this.nodesUsed[D.to]=1,this.edgesUsed[D.id]=1,E=E.preNode}this.edges=this.edges.reverse()}}return A.prototype.hasNode=function(E){return this.nodesUsed[E.id]===1},A.prototype.hasEdge=function(E){return this.edgesUsed[E.id]===1},A}(),P=function(){function A(E){var D=E.graphs,F=E.minSupport,y=F===void 0?2:F,h=E.minNodeNum,Y=h===void 0?1:h,$=E.maxNodeNum,U=$===void 0?4:$,W=E.top,V=W===void 0?10:W,H=E.directed,Q=H===void 0?!1:H,tt=E.verbose,rt=tt===void 0?!1:tt;this.graphs=D,this.dfsCode=new T,this.support=0,this.frequentSize1Subgraphs=[],this.frequentSubgraphs=[],this.minSupport=y,this.top=V,this.directed=Q,this.counter=0,this.maxNodeNum=U,this.minNodeNum=Y,this.verbose=rt,this.maxNodeNum<this.minNodeNum&&(this.maxNodeNum=this.minNodeNum),this.reportDF=[]}return A.prototype.findForwardRootEdges=function(E,D){var F=this,y=[],h=E.nodeMap;return D.edges.forEach(function(Y){(F.directed||D.label<=h[Y.to].label)&&y.push(Y)}),y},A.prototype.findBackwardEdge=function(E,D,F,y){if(!this.directed&&D===F)return null;for(var h=E.nodeMap,Y=h[F.to],$=Y.edges,U=$.length,W=0;W<U;W++){var V=$[W];if(!(y.hasEdge(V)||V.to!==D.from)){if(this.directed){if(h[D.from].label<h[F.to].label||h[D.from].label===h[F.to].label&&D.label<=V.label)return V}else if(D.label<V.label||D.label===V.label&&h[D.to].label<=h[F.to].label)return V}}return null},A.prototype.findForwardPureEdges=function(E,D,F,y){for(var h=[],Y=D.to,$=E.nodeMap[Y].edges,U=$.length,W=0;W<U;W++){var V=$[W],H=E.nodeMap[V.to];F<=H.label&&!y.hasNode(H)&&h.push(V)}return h},A.prototype.findForwardRmpathEdges=function(E,D,F,y){for(var h=[],Y=E.nodeMap,$=Y[D.to].label,U=Y[D.from],W=U.edges,V=W.length,H=0;H<V;H++){var Q=W[H],tt=Y[Q.to].label;D.to===Q.to||F>tt||y.hasNode(Y[Q.to])||(D.label<Q.label||D.label===Q.label&&$<=tt)&&h.push(Q)}return h},A.prototype.getSupport=function(E){var D={};return E.forEach(function(F){D[F.graphId]||(D[F.graphId]=!0)}),Object.keys(D).length},A.prototype.findMinLabel=function(E){var D=void 0;return Object.keys(E).forEach(function(F){var y=E[F],h=y.nodeLabel1,Y=y.edgeLabel,$=y.nodeLabel2;if(!D){D={nodeLabel1:h,edgeLabel:Y,nodeLabel2:$};return}(h<D.nodeLabel1||h===D.nodeLabel1&&Y<D.edgeLabel||h===D.nodeLabel1&&Y===D.edgeLabel&&$<D.nodeLabel2)&&(D={nodeLabel1:h,edgeLabel:Y,nodeLabel2:$})}),D},A.prototype.isMin=function(){var E=this,D=this.dfsCode;if(this.verbose&&console.log("isMin checking",D),D.dfsEdgeList.length===1)return!0;var F=this.directed,y=D.toGraph(k.VACANT_GRAPH_ID,F),h=y.nodeMap,Y=new T,$={};y.nodes.forEach(function(H){var Q=E.findForwardRootEdges(y,H);Q.forEach(function(tt){var rt=h[tt.to],ct="".concat(H.label,"-").concat(tt.label,"-").concat(rt.label);$[ct]||($[ct]={projected:[],nodeLabel1:H.label,edgeLabel:tt.label,nodeLabel2:rt.label});var ot={graphId:y.id,edge:tt,preNode:null};$[ct].projected.push(ot)})});var U=this.findMinLabel($);if(U){Y.dfsEdgeList.push(new w(0,1,U.nodeLabel1,U.edgeLabel,U.nodeLabel2));var W=function H(Q){for(var tt=Y.buildRmpath(),rt=Y.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,ct=Y.dfsEdgeList[tt[0]].toNode,ot={},xt=!1,pt=0,Xt=F?-1:0,Ct=function(ue){if(xt)return"break";Q.forEach(function(ie){var Dt=new L(ie),ne=E.findBackwardEdge(y,Dt.edges[tt[ue]],Dt.edges[tt[0]],Dt);ne&&(ot[ne.label]||(ot[ne.label]={projected:[],edgeLabel:ne.label}),ot[ne.label].projected.push({graphId:y.id,edge:ot,preNode:ie}),pt=Y.dfsEdgeList[tt[ue]].fromNode,xt=!0)})},At=tt.length-1;At>Xt;At--){var Z=Ct(At);if(Z==="break")break}if(xt){var q=E.findMinLabel(ot);Y.dfsEdgeList.push(new w(ct,pt,k.VACANT_NODE_LABEL,q.edgeLabel,k.VACANT_NODE_LABEL));var bt=Y.dfsEdgeList.length-1;return E.dfsCode.dfsEdgeList[bt]!==Y.dfsEdgeList[bt]?!1:H(ot[q.edgeLabel].projected)}var _t={};xt=!1;var nt=0;Q.forEach(function($t){var ue=new L($t),ie=E.findForwardPureEdges(y,ue.edges[tt[0]],rt,ue);ie.length>0&&(xt=!0,nt=ct,ie.forEach(function(Dt){var ne="".concat(Dt.label,"-").concat(h[Dt.to].label);_t[ne]||(_t[ne]={projected:[],edgeLabel:Dt.label,nodeLabel2:h[Dt.to].label}),_t[ne].projected.push({graphId:y.id,edge:Dt,preNode:$t})}))});for(var vt=tt.length,It=function(ue){if(xt)return"break";var ie=tt[ue];Q.forEach(function(Dt){var ne=new L(Dt),pe=E.findForwardRmpathEdges(y,ne.edges[ie],rt,ne);pe.length>0&&(xt=!0,nt=Y.dfsEdgeList[ie].fromNode,pe.forEach(function(Wt){var ae="".concat(Wt.label,"-").concat(h[Wt.to].label);_t[ae]||(_t[ae]={projected:[],edgeLabel:Wt.label,nodeLabel2:h[Wt.to].label}),_t[ae].projected.push({graphId:y.id,edge:Wt,preNode:Dt})}))})},At=0;At<vt;At++){var Pt=It(At);if(Pt==="break")break}if(!xt)return!0;var Et=E.findMinLabel(_t);Y.dfsEdgeList.push(new w(nt,ct+1,k.VACANT_NODE_LABEL,Et.edgeLabel,Et.nodeLabel2));var Nt=Y.dfsEdgeList.length-1;return D.dfsEdgeList[Nt]!==Y.dfsEdgeList[Nt]?!1:H(_t["".concat(Et.edgeLabel,"-").concat(Et.nodeLabel2)].projected)},V="".concat(U.nodeLabel1,"-").concat(U.edgeLabel,"-").concat(U.nodeLabel2);return W($[V].projected)}},A.prototype.report=function(){if(!(this.dfsCode.getNodeNum()<this.minNodeNum)){this.counter++;var E=this.dfsCode.toGraph(this.counter,this.directed);this.frequentSubgraphs.push((0,b.clone)(E))}},A.prototype.subGraphMining=function(E){var D=this,F=this.getSupport(E);if(!(F<this.minSupport)&&this.isMin()){this.report();var y=this.dfsCode.getNodeNum(),h=this.dfsCode.buildRmpath(),Y=this.dfsCode.dfsEdgeList[h[0]].toNode,$=this.dfsCode.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,U={},W={};E.forEach(function(V){for(var H=D.graphs[V.graphId],Q=H.nodeMap,tt=new L(V),rt=h.length-1;rt>=0;rt--){var ct=D.findBackwardEdge(H,tt.edges[h[rt]],tt.edges[h[0]],tt);if(ct){var ot="".concat(D.dfsCode.dfsEdgeList[h[rt]].fromNode,"-").concat(ct.label);W[ot]||(W[ot]={projected:[],toNodeId:D.dfsCode.dfsEdgeList[h[rt]].fromNode,edgeLabel:ct.label}),W[ot].projected.push({graphId:V.graphId,edge:ct,preNode:V})}}if(!(y>=D.maxNodeNum)){var xt=D.findForwardPureEdges(H,tt.edges[h[0]],$,tt);xt.forEach(function(Xt){var Ct="".concat(Y,"-").concat(Xt.label,"-").concat(Q[Xt.to].label);U[Ct]||(U[Ct]={projected:[],fromNodeId:Y,edgeLabel:Xt.label,nodeLabel2:Q[Xt.to].label}),U[Ct].projected.push({graphId:V.graphId,edge:Xt,preNode:V})});for(var pt=function(Ct){var At=D.findForwardRmpathEdges(H,tt.edges[h[Ct]],$,tt);At.forEach(function(Z){var q="".concat(D.dfsCode.dfsEdgeList[h[Ct]].fromNode,"-").concat(Z.label,"-").concat(Q[Z.to].label);U[q]||(U[q]={projected:[],fromNodeId:D.dfsCode.dfsEdgeList[h[Ct]].fromNode,edgeLabel:Z.label,nodeLabel2:Q[Z.to].label}),U[q].projected.push({graphId:V.graphId,edge:Z,preNode:V})})},rt=0;rt<h.length;rt++)pt(rt)}}),Object.keys(W).forEach(function(V){var H=W[V],Q=H.toNodeId,tt=H.edgeLabel;D.dfsCode.dfsEdgeList.push(new w(Y,Q,"-1",tt,"-1")),D.subGraphMining(W[V].projected),D.dfsCode.dfsEdgeList.pop()}),Object.keys(U).forEach(function(V){var H=U[V],Q=H.fromNodeId,tt=H.edgeLabel,rt=H.nodeLabel2;D.dfsCode.dfsEdgeList.push(new w(Q,Y+1,k.VACANT_NODE_LABEL,tt,rt)),D.subGraphMining(U[V].projected),D.dfsCode.dfsEdgeList.pop()})}},A.prototype.generate1EdgeFrequentSubGraphs=function(){var E=this.graphs,D=this.directed,F=this.minSupport,y=this.frequentSize1Subgraphs,h={},Y={},$={},U={};return Object.keys(E).forEach(function(W){var V=E[W],H=V.nodeMap;V.nodes.forEach(function(Q,tt){var rt=Q.label,ct="".concat(W,"-").concat(rt);if(!$[ct]){var ot=h[rt]||0;ot++,h[rt]=ot}$[ct]={graphKey:W,label:rt},Q.edges.forEach(function(xt){var pt=rt,Xt=H[xt.to].label;if(!D&&pt>Xt){var Ct=Xt;Xt=pt,pt=Ct}var At=xt.label,Z="".concat(W,"-").concat(pt,"-").concat(At,"-").concat(Xt),q="".concat(pt,"-").concat(At,"-").concat(Xt);if(!Y[q]){var bt=Y[q]||0;bt++,Y[q]=bt}U[Z]={graphId:W,nodeLabel1:pt,edgeLabel:At,nodeLabel2:Xt}})})}),Object.keys(h).forEach(function(W){var V=h[W];if(!(V<F)){var H={nodes:[],edges:[]};H.nodes.push({id:"0",label:W}),y.push(H)}}),y},A.prototype.run=function(){var E=this;if(this.frequentSize1Subgraphs=this.generate1EdgeFrequentSubGraphs(),!(this.maxNodeNum<2)){var D=this.graphs,F=this.directed,y={};Object.keys(D).forEach(function(h){var Y=D[h],$=Y.nodeMap;Y.nodes.forEach(function(U){var W=E.findForwardRootEdges(Y,U);W.forEach(function(V){var H=$[V.to],Q="".concat(U.label,"-").concat(V.label,"-").concat(H.label);y[Q]||(y[Q]={projected:[],nodeLabel1:U.label,edgeLabel:V.label,nodeLabel2:H.label});var tt={graphId:h,edge:V,preNode:null};y[Q].projected.push(tt)})})}),Object.keys(y).forEach(function(h){var Y=y[h],$=Y.projected,U=Y.nodeLabel1,W=Y.edgeLabel,V=Y.nodeLabel2;E.dfsCode.dfsEdgeList.push(new w(0,1,U,W,V)),E.subGraphMining($),E.dfsCode.dfsEdgeList.pop()})}},A}(),p=function(E,D,F,y){var h={};return Object.keys(E).forEach(function(Y,$){var U=E[Y],W=new k.Graph($,!0,D),V={};U.nodes.forEach(function(H,Q){W.addNode(Q,H[F]),V[H.id]=Q}),U.edges.forEach(function(H,Q){var tt=V[H.source],rt=V[H.target];W.addEdge(-1,tt,rt,H[y])}),W&&W.getNodeNum()&&(h[W.id]=W)}),h},m=function(E,D,F){var y=[];return E.forEach(function(h){var Y={nodes:[],edges:[]};h.nodes.forEach(function($){var U;Y.nodes.push((U={id:"".concat($.id)},U[D]=$.label,U))}),h.edges.forEach(function($){var U;Y.edges.push((U={source:"".concat($.from),target:"".concat($.to)},U[F]=$.label,U))}),y.push(Y)}),y},S="cluster",x=function(E){var D=E.graphs,F=E.directed,y=F===void 0?!1:F,h=E.nodeLabelProp,Y=h===void 0?S:h,$=E.edgeLabelProp,U=$===void 0?S:$,W=p(D,y,Y,U),V=E.minSupport,H=E.maxNodeNum,Q=E.minNodeNum,tt=E.verbose,rt=E.top,ct={graphs:W,minSupport:V,maxNodeNum:H,minNodeNum:Q,top:rt,verbose:tt,directed:y},ot=new P(ct);ot.run();var xt=m(ot.frequentSubgraphs,Y,U);return xt},g=x;z.default=g},368575:function(Ve,z){"use strict";Object.defineProperty(z,"__esModule",{value:!0}),z.VACANT_NODE_LABEL=z.VACANT_NODE_ID=z.VACANT_GRAPH_ID=z.VACANT_EDGE_LABEL=z.VACANT_EDGE_ID=z.Node=z.Graph=z.Edge=z.AUTO_EDGE_ID=void 0;var C=-1;z.VACANT_EDGE_ID=C;var b=-1;z.VACANT_NODE_ID=b;var k="-1";z.VACANT_EDGE_LABEL=k;var w="-1";z.VACANT_NODE_LABEL=w;var T=-1;z.VACANT_GRAPH_ID=T;var L="-1";z.AUTO_EDGE_ID=L;var P=function(){function S(x,g,A,E){x===void 0&&(x=C),g===void 0&&(g=b),A===void 0&&(A=b),E===void 0&&(E=k),this.id=x,this.from=g,this.to=A,this.label=E}return S}();z.Edge=P;var p=function(){function S(x,g){x===void 0&&(x=b),g===void 0&&(g=w),this.id=x,this.label=g,this.edges=[],this.edgeMap={}}return S.prototype.addEdge=function(x){this.edges.push(x),this.edgeMap[x.id]=x},S}();z.Node=p;var m=function(){function S(x,g,A){x===void 0&&(x=b),g===void 0&&(g=!0),A===void 0&&(A=!1),this.id=x,this.edgeIdAutoIncrease=g,this.edges=[],this.nodes=[],this.nodeMap={},this.edgeMap={},this.nodeLabelMap={},this.edgeLabelMap={},this.counter=0,this.directed=A}return S.prototype.getNodeNum=function(){return this.nodes.length},S.prototype.addNode=function(x,g){if(!this.nodeMap[x]){var A=new p(x,g);this.nodes.push(A),this.nodeMap[x]=A,this.nodeLabelMap[g]||(this.nodeLabelMap[g]=[]),this.nodeLabelMap[g].push(x)}},S.prototype.addEdge=function(x,g,A,E){if((this.edgeIdAutoIncrease||x===void 0)&&(x=this.counter++),!(this.nodeMap[g]&&this.nodeMap[A]&&this.nodeMap[A].edgeMap[x])){var D=new P(x,g,A,E);if(this.edges.push(D),this.edgeMap[x]=D,this.nodeMap[g].addEdge(D),this.edgeLabelMap[E]||(this.edgeLabelMap[E]=[]),this.edgeLabelMap[E].push(D),!this.directed){var F=new P(x,A,g,E);this.nodeMap[A].addEdge(F),this.edgeLabelMap[E].push(F)}}},S}();z.Graph=m},882812:function(Ve,z,C){"use strict";Object.defineProperty(z,"__esModule",{value:!0}),z.default=void 0;var b=C(197582),k=P(C(975033)),w=P(C(821146)),T=P(C(878089)),L=C(770643);function P(U){return U&&U.__esModule?U:{default:U}}var p=function(W,V,H,Q){H===void 0&&(H="cluster"),Q===void 0&&(Q=2);var tt=[],rt=W.nodes;return V.forEach(function(ct,ot){tt.push(m(rt,ct,ot,H,Q))}),tt},m=function(W,V,H,Q,tt){var rt=[H],ct=[],ot={};return V.forEach(function(xt,pt){if(xt<=tt&&H!==pt){rt.push(pt),ct.push(W[pt]);var Xt=W[pt][Q];ot[Xt]?(ot[Xt].count++,ot[Xt].dists.push(xt)):ot[Xt]={count:1,dists:[xt]}}}),Object.keys(ot).forEach(function(xt){ot[xt].dists=ot[xt].dists.sort(function(pt,Xt){return pt-Xt})}),{nodeIdx:H,nodeId:W[H].id,nodeIdxs:rt,neighbors:ct,neighborNum:rt.length-1,nodeLabelCountMap:ot}},S=function(W,V,H,Q,tt){var rt=Math.ceil(H/V),ct={},ot=0;return Q.forEach(function(xt,pt){for(var Xt=0,Ct=0,At=xt.nodeIdxs,Z=xt.neighborNum-1;Xt<rt;){for(var q=At[1+Math.floor(Math.random()*Z)],bt=0;(ct["".concat(pt,"-").concat(q)]||ct["".concat(q,"-").concat(pt)])&&(q=Math.floor(Math.random()*V),bt++,!(bt>2*V)););if(bt<2*V&&(ct["".concat(pt,"-").concat(q)]={start:pt,end:q,distance:tt[pt][q]},Xt++,ot++,ot>=H))return ct;if(Ct++,Ct>2*V)break}if(Xt<rt){var _t=rt-Xt;rt=(rt+_t)/(V-pt-1)}}),ct},x=function(W,V,H,Q){var tt=H.nodes;return Q||(Q={}),Object.keys(W).forEach(function(rt){var ct,ot;if(!(Q&&Q[rt])){Q[rt]={nodes:[],edges:[]};var xt=W[rt],pt=(ct=V[xt.start])===null||ct===void 0?void 0:ct.nodeIdxs,Xt=(ot=V[xt.end])===null||ot===void 0?void 0:ot.nodeIdxs;if(!(!pt||!Xt)){var Ct=new Set(Xt),At=pt.filter(function(nt){return Ct.has(nt)});if(!(!At||!At.length)){for(var Z={},q=At.length,bt=0;bt<q;bt++){var _t=tt[At[bt]];Q[rt].nodes.push(_t),Z[_t.id]=!0}H.edges.forEach(function(nt){Z[nt.source]&&Z[nt.target]&&Q[rt].edges.push(nt)})}}}}),Q},g=function(W,V,H,Q){var tt,rt,ct={};W.nodes.forEach(function(xt){ct[xt.id]=xt});var ot=0;return!(!((tt=V==null?void 0:V.edges)===null||tt===void 0)&&tt.length)||((rt=V==null?void 0:V.nodes)===null||rt===void 0?void 0:rt.length)<2?0:(W.edges.forEach(function(xt){var pt=ct[xt.source][H],Xt=ct[xt.target][H],Ct=V==null?void 0:V.nodes[0][H],At=V==null?void 0:V.nodes[1][H],Z=V==null?void 0:V.edges[0][Q];xt[Q]===Z&&(pt===Ct&&Xt===At||pt===At&&Xt===Ct)&&ot++}),ot)},A=function(W,V,H){for(var Q=1/0,tt=0,rt=function(xt){var pt=W[xt],Xt=Object.keys(pt).sort(function(nt,vt){return pt[nt]-pt[vt]}),Ct=10,At=[];Xt.forEach(function(nt,vt){At[vt%Ct]||(At[vt%Ct]={graphs:[],totalCount:0,aveCount:0}),At[vt%Ct].graphs.push(nt),At[vt%Ct].totalCount+=pt[nt]});var Z=0,q=[];At.forEach(function(nt){var vt=nt.totalCount/nt.graphs.length;nt.aveCount=vt,q.push(vt);var It=0,Pt=nt.length;nt.graphs.forEach(function(Et,Nt){var $t=pt[Et];nt.graphs.forEach(function(ue,ie){Nt!==ie&&(It+=Math.abs($t-pt[ue]))})}),It/=Pt*(Pt-1)/2,Z+=It}),Z/=At.length;var bt=0;q.forEach(function(nt,vt){q.forEach(function(It,Pt){vt!==Pt&&(bt+=Math.abs(nt-It))}),bt/=q.length*(q.length-1)/2});var _t=bt-Z;Q<_t&&(Q=_t,tt=xt)},ct=0;ct<V;ct++)rt(ct);return{structure:H[tt],structureCountMap:W[tt]}},E=function(W,V){var H={},Q={};return W.forEach(function(tt,rt){H[tt.id]={idx:rt,node:tt,degree:0,inDegree:0,outDegree:0};var ct=tt[V];Q[ct]||(Q[ct]=[]),Q[ct].push(tt)}),{nodeMap:H,nodeLabelMap:Q}},D=function(W,V,H){var Q={},tt={};return W.forEach(function(rt,ct){Q["".concat(L.uniqueId)]={idx:ct,edge:rt};var ot=rt[V];tt[ot]||(tt[ot]=[]),tt[ot].push(rt);var xt=H[rt.source];xt&&(xt.degree++,xt.outDegree++);var pt=H[rt.target];pt&&(pt.degree++,pt.inDegree++)}),{edgeMap:Q,edgeLabelMap:tt}},F=function(W,V,H){var Q=V.length,tt={};return V.forEach(function(rt,ct){for(var ot=H?0:ct+1,xt=W[ct].id,pt=ot;pt<Q;pt++)if(ct!==pt){var Xt=W[pt].id,Ct=rt[pt];tt["".concat(xt,"-").concat(Xt)]=Ct,H||(tt["".concat(Xt,"-").concat(xt)]=Ct)}}),tt},y=function(W,V,H,Q,tt,rt,ct,ot,xt,pt,Xt){var Ct,At="".concat(V.id,"-").concat(H.id);if(pt&&pt[At])return pt[At];var Z=Xt?Xt[At]:void 0;if(!Z){var q=(Ct={},Ct[At]={start:Q[V.id].idx,end:Q[H.id].idx,distance:tt},Ct);Xt=x(q,rt,W,Xt),Z=Xt[At]}return g(Z,ct,ot,xt)},h=function(W,V,H,Q){var tt,rt,ct,ot=(tt=W[V])===null||tt===void 0?void 0:tt.degree,xt=(rt=W[V])===null||rt===void 0?void 0:rt.inDegree,pt=(ct=W[V])===null||ct===void 0?void 0:ct.outDegree;return W[V]===void 0&&(ot=1/0,xt=1/0,pt=1/0,Q[V].forEach(function(Xt){var Ct=H[Xt.id].degree;ot>Ct&&(ot=Ct);var At=H[Xt.id].inDegree;xt>At&&(xt=At);var Z=H[Xt.id].outDegree;pt>Z&&(pt=Z)}),W[V]={degree:ot,inDegree:xt,outDegree:pt}),{minPatternNodeLabelDegree:ot,minPatternNodeLabelInDegree:xt,minPatternNodeLabelOutDegree:pt}},Y=function(W,V,H,Q,tt,rt,ct){var ot;if(H===void 0&&(H=!1),rt===void 0&&(rt="cluster"),ct===void 0&&(ct="cluster"),!(!W||!W.nodes)){var xt=W.nodes.length;if(xt){var pt=(0,k.default)(W,H),Xt=(0,k.default)(V,H),Ct=F(W.nodes,pt,H),At=F(V.nodes,Xt,H),Z=E(W.nodes,rt),q=Z.nodeMap,bt=Z.nodeLabelMap,_t=E(V.nodes,rt),nt=_t.nodeMap,vt=_t.nodeLabelMap;D(W.edges,ct,q);var It=D(V.edges,ct,nt).edgeLabelMap,Pt=[];Xt==null||Xt.forEach(function(on){Pt=Pt.concat(on)}),tt||(tt=Math.max.apply(Math,(0,b.__spreadArray)((0,b.__spreadArray)([],Pt,!1),[2],!1))),Q||(Q=tt);var Et=p(W,pt,rt,Q),Nt=p(V,Xt,rt,Q),$t=Math.min(100,xt*(xt-1)/2),ue=S(Q,xt,$t,Et,pt),ie=x(ue,Et,W),Dt=10,ne=1,pe=1,Wt=4,ae={graphs:ie,nodeLabelProp:rt,edgeLabelProp:ct,minSupport:ne,minNodeNum:pe,maxNodeNum:Wt,directed:H},Se=(0,w.default)(ae).slice(0,Dt),be=Se.length,Qt=[];Se.forEach(function(on,Wn){Qt[Wn]={},Object.keys(ie).forEach(function(Cn){var On=ie[Cn],jn=g(On,on,rt,ct);Qt[Wn][Cn]=jn})});var we=A(Qt,be,Se),Tt=we.structure,Le=we.structureCountMap,Mr=V.nodes[0],Ar=[],Ir=(ot=V.nodes[0])===null||ot===void 0?void 0:ot[rt],Br=-1/0;V.nodes.forEach(function(on){var Wn=on[rt],Cn=bt[Wn];(Cn==null?void 0:Cn.length)>Br&&(Br=Cn.length,Ar=Cn,Ir=Wn,Mr=on)});var dn={},an={},Ln={},Un={},Yn={},xr={};Object.keys(vt).forEach(function(on,Wn){Yn[on]=[],H&&(xr[on]=[]);var Cn=-1/0,On=vt[on],jn={};On.forEach(function(St){var Ce=At["".concat(Mr.id,"-").concat(St.id)];if(Ce&&Yn[on].push(Ce),Cn<Ce&&(Cn=Ce),jn["".concat(Mr.id,"-").concat(St.id)]={start:0,end:nt[St.id].idx,distance:Ce},H){var kt=At["".concat(St.id,"-").concat(Mr.id)];kt&&xr[on].push(kt)}}),Yn[on]=Yn[on].sort(function(St,Ce){return St-Ce}),H&&(xr[on]=xr[on].sort(function(St,Ce){return St-Ce})),an=x(jn,Nt,V,an);var at=[];if(Object.keys(jn).forEach(function(St){if(Ln[St]){at.push(Ln[St]);return}var Ce=an[St];Ln[St]=g(Ce,Tt,rt,ct),at.push(Ln[St])}),at=at.sort(function(St,Ce){return Ce-St}),Un["".concat(Mr.id,"-").concat(on)]=at,on!==Ir)for(var Ze=(Ar==null?void 0:Ar.length)||0,qt=function(Ce){var kt=Ar[Ce],Kt=Et[q[kt.id].idx],dt=Kt.nodeLabelCountMap[on],Ut=vt[on].length;if(!dt||dt.count<Ut)return Ar.splice(Ce,1),"continue";for(var J=!1,it=0;it<Ut;it++)if(dt.dists[it]>Yn[on][it]){J=!0;break}if(J)return Ar.splice(Ce,1),"continue";var R={};Kt.neighbors.forEach(function(X){var mt=Ct["".concat(kt.id,"-").concat(X.id)];R["".concat(kt.id,"-").concat(X.id)]={start:q[kt.id].idx,end:q[X.id].idx,distance:mt}}),ie=x(R,Et,W,ie);var M=[];Object.keys(R).forEach(function(X){if(Le[X]){M.push(Le[X]);return}var mt=ie[X];Le[X]=g(mt,Tt,rt,ct),M.push(Le[X])}),M=M.sort(function(X,mt){return mt-X});for(var O=!1,it=0;it<Ut;it++)if(M[it]<at[it]){O=!0;break}if(O)return Ar.splice(Ce,1),"continue"},Jt=Ze-1;Jt>=0;Jt--)qt(Jt)});var qe=[];Ar==null||Ar.forEach(function(on){for(var Wn=q[on.id].idx,Cn=m(W.nodes,pt[Wn],Wn,rt,tt),On=Cn.neighbors,jn=On.length,at=!1,Ze=jn-1;Ze>=0;Ze--){if(On.length+1<V.nodes.length){at=!0;return}var qt=On[Ze],Jt=qt[rt];if(!vt[Jt]||!vt[Jt].length){On.splice(Ze,1);continue}if(!Yn[Jt]||!Yn[Jt].length){On.splice(Ze,1);continue}var St="".concat(on.id,"-").concat(qt.id),Ce=Ct[St],kt=Yn[Jt].length-1,Kt=Yn[Jt][kt];if(Ce>Kt){On.splice(Ze,1);continue}if(H){var dt="".concat(qt.id,"-").concat(on.id),Ut=Ct[dt];kt=xr[Jt].length-1;var J=xr[Jt][kt];if(Ut>J){On.splice(Ze,1);continue}}var it=Le[St]?Le[St]:y(W,on,qt,q,Ce,Et,Tt,rt,ct,Le,ie),R="".concat(Mr.id,"-").concat(Jt),M=Un[R][Un[R].length-1];if(it<M){On.splice(Ze,1);continue}var O=h(dn,Jt,nt,vt),X=O.minPatternNodeLabelDegree,mt=O.minPatternNodeLabelInDegree,Ft=O.minPatternNodeLabelOutDegree;if(q[qt.id].degree<X){On.splice(Ze,1);continue}}at||qe.push({nodes:[on].concat(On)})});var Cr=(0,T.default)(V,Mr.id,!1).length,tn={};H?(Object.keys(Cr).forEach(function(on){var Wn=nt[on].node[rt];tn[Wn]?tn[Wn].push(Cr[on]):tn[Wn]=[Cr[on]]}),Object.keys(tn).forEach(function(on){tn[on].sort(function(Wn,Cn){return Wn-Cn})})):tn=Yn;for(var vn=qe.length,_n=function(Wn){var Cn=qe[Wn],On=Cn.nodes[0],jn={},at={};Cn.nodes.forEach(function(Dr,fe){at[Dr.id]={idx:fe,node:Dr,degree:0,inDegree:0,outDegree:0};var jt=Dr[rt];jn[jt]?jn[jt]++:jn[jt]=1});var Ze=[],qt={};W.edges.forEach(function(Dr){at[Dr.source]&&at[Dr.target]&&(Ze.push(Dr),qt[Dr[ct]]?qt[Dr[ct]]++:qt[Dr[ct]]=1,at[Dr.source].degree++,at[Dr.target].degree++,at[Dr.source].outDegree++,at[Dr.target].inDegree++)});for(var Jt=Object.keys(It).length,St=!1,Ce=0;Ce<Jt;Ce++){var kt=Object.keys(It)[Ce];if(!qt[kt]||qt[kt]<It[kt].length){St=!0;break}}if(St)return qe.splice(Wn,1),"continue";var Kt=Ze.length;if(Kt<V.edges.length)return qe.splice(Wn,1),"break";for(var dt=!1,Ut=function(fe){var jt=Ze[fe],ve=jt[ct],Ie=It[ve];if(!Ie||!Ie.length)return qt[ve]--,Ie&&qt[ve]<Ie.length?(dt=!0,"break"):(Ze.splice(fe,1),at[jt.source].degree--,at[jt.target].degree--,at[jt.source].outDegree--,at[jt.target].inDegree--,"continue");var ye=at[jt.source].node[rt],ze=at[jt.target].node[rt],sr=!1;if(Ie.forEach(function(pr){var en=nt[pr.source].node,Fn=nt[pr.target].node;en[rt]===ye&&Fn[rt]===ze&&(sr=!0),!H&&en[rt]===ze&&Fn[rt]===ye&&(sr=!0)}),!sr)return qt[ve]--,Ie&&qt[ve]<Ie.length?(dt=!0,"break"):(Ze.splice(fe,1),at[jt.source].degree--,at[jt.target].degree--,at[jt.source].outDegree--,at[jt.target].inDegree--,"continue")},Ce=Kt-1;Ce>=0;Ce--){var J=Ut(Ce);if(J==="break")break}if(dt)return qe.splice(Wn,1),"continue";Cn.edges=Ze;var it=(0,T.default)(Cn,Cn.nodes[0].id,!1).length;if(Object.keys(it).reverse().forEach(function(Dr){if(!(Dr===Cn.nodes[0].id||dt)){if(it[Dr]===1/0){var fe=at[Dr].node[rt];if(jn[fe]--,jn[fe]<vt[fe].length){dt=!0;return}var jt=Cn.nodes.indexOf(at[Dr].node);Cn.nodes.splice(jt,1),at[Dr]=void 0;return}var ve=q[Dr].node[rt];if(!tn[ve]||!tn[ve].length||it[Dr]>tn[ve][tn[ve].length-1]){var fe=at[Dr].node[rt];if(jn[fe]--,jn[fe]<vt[fe].length){dt=!0;return}var jt=Cn.nodes.indexOf(at[Dr].node);Cn.nodes.splice(jt,1),at[Dr]=void 0}}}),dt)return qe.splice(Wn,1),"continue";for(var R=!0,M=0;R&&!dt;){R=!1;var O=H?at[On.id].degree<nt[Mr.id].degree||at[On.id].inDegree<nt[Mr.id].inDegree||at[On.id].outDegree<nt[Mr.id].outDegree:at[On.id].degree<nt[Mr.id].degree;if(O){dt=!0;break}if(jn[On[rt]]<vt[On[rt]].length){dt=!0;break}for(var X=Cn.nodes.length,mt=X-1;mt>=0;mt--){var Ft=Cn.nodes[mt],Bt=at[Ft.id].degree,re=at[Ft.id].inDegree,De=at[Ft.id].outDegree,me=Ft[rt],Xe=h(dn,me,nt,vt),hr=Xe.minPatternNodeLabelDegree,Ke=Xe.minPatternNodeLabelInDegree,Lr=Xe.minPatternNodeLabelOutDegree,cn=H?Bt<hr||re<Ke||De<Lr:Bt<hr;if(cn){if(jn[Ft[rt]]--,jn[Ft[rt]]<vt[Ft[rt]].length){dt=!0;break}Cn.nodes.splice(mt,1),at[Ft.id]=void 0,R=!0}}if(dt||!R&&M!==0)break;Kt=Ze.length;for(var $e=Kt-1;$e>=0;$e--){var lr=Ze[$e];if(!at[lr.source]||!at[lr.target]){Ze.splice($e,1);var Pr=lr[ct];if(qt[Pr]--,at[lr.source]&&(at[lr.source].degree--,at[lr.source].outDegree--),at[lr.target]&&(at[lr.target].degree--,at[lr.target].inDegree--),It[Pr]&&qt[Pr]<It[Pr].length){dt=!0;break}R=!0}}M++}if(dt||dt||Cn.nodes.length<V.nodes.length||Ze.length<V.edges.length)return qe.splice(Wn,1),"continue"},Pn=vn-1;Pn>=0;Pn--){var _r=_n(Pn);if(_r==="break")break}for(var un=qe.length,An=function(Wn){var Cn=qe[Wn],On={};Cn.edges.forEach(function(Ze){var qt="".concat(Ze.source,"-").concat(Ze.target,"-").concat(Ze.label);On[qt]?On[qt]++:On[qt]=1});for(var jn=function(qt){var Jt=qe[qt],St={};Jt.edges.forEach(function(kt){var Kt="".concat(kt.source,"-").concat(kt.target,"-").concat(kt.label);St[Kt]?St[Kt]++:St[Kt]=1});var Ce=!0;Object.keys(St).length!==Object.keys(On).length?Ce=!1:Object.keys(On).forEach(function(kt){St[kt]!==On[kt]&&(Ce=!1)}),Ce&&qe.splice(qt,1)},at=un-1;at>Wn;at--)jn(at);un=qe.length},Pn=0;Pn<=un-1;Pn++)An(Pn);return qe}}},$=Y;z.default=$},505170:function(Ve,z,C){"use strict";Object.defineProperty(z,"__esModule",{value:!0}),z.default=void 0;var b=w(C(62238)),k=C(770643);function w(P){return P&&P.__esModule?P:{default:P}}var T=function(p,m,S,x){m===void 0&&(m=!1),S===void 0&&(S="weight"),x===void 0&&(x=1e3);var g=p.nodes,A=g===void 0?[]:g,E=p.edges,D=E===void 0?[]:E,F={},y={};A.forEach(function(rt,ct){var ot=(0,k.uniqueId)();rt.clusterId=ot,F[ot]={id:ot,nodes:[rt]},y[rt.id]={node:rt,idx:ct}});var h=(0,b.default)(p,m),Y=[],$={};h.forEach(function(rt,ct){var ot=0,xt=A[ct].id;$[xt]={},rt.forEach(function(pt,Xt){if(pt){ot+=pt;var Ct=A[Xt].id;$[xt][Ct]=pt}}),Y.push(ot)});for(var U=0,W=function(){var ct=!1;if(A.forEach(function(ot){var xt={};Object.keys($[ot.id]).forEach(function(_t){var nt=$[ot.id][_t],vt=y[_t].node,It=vt.clusterId;xt[It]||(xt[It]=0),xt[It]+=nt});var pt=-1/0,Xt=[];if(Object.keys(xt).forEach(function(_t){pt<xt[_t]?(pt=xt[_t],Xt=[_t]):pt===xt[_t]&&Xt.push(_t)}),!(Xt.length===1&&Xt[0]===ot.clusterId)){var Ct=Xt.indexOf(ot.clusterId);if(Ct>=0&&Xt.splice(Ct,1),Xt&&Xt.length){ct=!0;var At=F[ot.clusterId],Z=At.nodes.indexOf(ot);At.nodes.splice(Z,1);var q=Math.floor(Math.random()*Xt.length),bt=F[Xt[q]];bt.nodes.push(ot),ot.clusterId=bt.id}}}),!ct)return"break";U++};U<x;){var V=W();if(V==="break")break}Object.keys(F).forEach(function(rt){var ct=F[rt];(!ct.nodes||!ct.nodes.length)&&delete F[rt]});var H=[],Q={};D.forEach(function(rt){var ct=rt.source,ot=rt.target,xt=rt[S]||1,pt=y[ct].node.clusterId,Xt=y[ot].node.clusterId,Ct="".concat(pt,"---").concat(Xt);if(Q[Ct])Q[Ct].weight+=xt,Q[Ct].count++;else{var At={source:pt,target:Xt,weight:xt,count:1};Q[Ct]=At,H.push(At)}});var tt=[];return Object.keys(F).forEach(function(rt){tt.push(F[rt])}),{clusters:tt,clusterEdges:H}},L=T;z.default=L},135179:function(Ve,z,C){"use strict";Object.defineProperty(z,"__esModule",{value:!0}),z.default=void 0;var b=C(413810),k=P(C(62238)),w=P(C(29741)),T=C(103665),L=C(526838);function P(g){return g&&g.__esModule?g:{default:g}}var p=function(A,E,D,F){for(var y=E.length,h=2*F,Y=0,$=0;$<y;$++)for(var U=A[$].clusterId,W=0;W<y;W++){var V=A[W].clusterId;if(U===V){var H=E[$][W]||0,Q=D[$]||0,tt=D[W]||0;Y+=H-Q*tt/h}}return Y*=1/h,Y},m=function(A,E){A===void 0&&(A=[]);for(var D=A.length,F=new w.default([]),y=0;y<D;y++)F=F.add(new w.default(E[y]));var h=F.avg(D);h.normalize();for(var Y=0,y=0;y<D;y++){var $=new w.default(E[y]),U=$.squareEuclideanDistance(h);Y+=U}var W=[];A.forEach(function(){W.push([])});for(var y=0;y<D;y++){var $=new w.default(E[y]);A[y].clusterInertial=0;for(var V=0;V<D;V++){if(y===V){W[y][V]=0;continue}var H=new w.default(E[V]);W[y][V]=$.squareEuclideanDistance(H),A[y].clusterInertial+=W[y][V]}}for(var Q=0,tt=2*D*Y,y=0;y<D;y++)for(var rt=A[y].clusterId,V=0;V<D;V++){var ct=A[V].clusterId;if(!(y===V||rt!==ct)){var ot=A[y].clusterInertial*A[V].clusterInertial/Math.pow(tt,2)-W[y][V]/tt;Q+=ot}}return Number(Q.toFixed(4))},S=function(A,E,D,F,y,h,Y,$,U){E===void 0&&(E=!1),D===void 0&&(D="weight"),F===void 0&&(F=1e-4),y===void 0&&(y=!1),h===void 0&&(h=void 0),Y===void 0&&(Y=[]),$===void 0&&($=["id"]),U===void 0&&(U=1);var W=A.nodes,V=W===void 0?[]:W,H=A.edges,Q=H===void 0?[]:H,tt=[];if(y){V.forEach(function(ie,Dt){ie.properties=ie.properties||{},ie.originIndex=Dt});var rt=[];V.every(function(ie){return ie.hasOwnProperty("nodeType")})&&(rt=Array.from(new Set(V.map(function(ie){return ie.nodeType}))),V.forEach(function(ie){ie.properties.nodeType=rt.findIndex(function(Dt){return Dt===ie.nodeType})}));var ct=(0,T.getAllProperties)(V,h);tt=(0,L.oneHot)(ct,Y,$)}var ot=1,xt={},pt={};V.forEach(function(ie,Dt){var ne=String(ot++);ie.clusterId=ne,xt[ne]={id:ne,nodes:[ie]},pt[ie.id]={node:ie,idx:Dt}});var Xt=(0,k.default)(A,E),Ct=[],At={},Z=0;Xt.forEach(function(ie,Dt){var ne=0,pe=V[Dt].id;At[pe]={},ie.forEach(function(Wt,ae){if(Wt){ne+=Wt;var Se=V[ae].id;At[pe][Se]=Wt,Z+=Wt}}),Ct.push(ne)}),Z/=2;for(var q=1/0,bt=1/0,_t=0,nt=[],vt={};;){y&&V.every(function(ie){return ie.hasOwnProperty("properties")})?q=p(V,Xt,Ct,Z)+m(V,tt)*U:q=p(V,Xt,Ct,Z),_t===0&&(bt=q,nt=V,vt=xt);var It=q>0&&q>bt&&q-bt<F;if(q>bt&&(nt=V.map(function(ie){return{node:ie,clusterId:ie.clusterId}}),vt=(0,b.clone)(xt),bt=q),It||_t>100)break;_t++,Object.keys(xt).forEach(function(ie){var Dt=0;Q.forEach(function(ne){var pe=ne.source,Wt=ne.target,ae=pt[pe].node.clusterId,Se=pt[Wt].node.clusterId;(ae===ie&&Se!==ie||Se===ie&&ae!==ie)&&(Dt=Dt+(ne[D]||1))}),xt[ie].sumTot=Dt}),V.forEach(function(ie,Dt){var ne=xt[ie.clusterId],pe=0,Wt,ae=Ct[Dt]/(2*Z),Se=0,be=ne.nodes;be.forEach(function(an){var Ln=pt[an.id].idx;Se+=Xt[Dt][Ln]||0});var Qt=Se-ne.sumTot*ae,we=be.filter(function(an){return an.id!==ie.id}),Tt=[];we.forEach(function(an,Ln){Tt[Ln]=tt[an.originIndex]});var Le=m(we,tt)*U,Mr=At[ie.id];if(Object.keys(Mr).forEach(function(an){var Ln=pt[an].node,Un=Ln.clusterId;if(Un!==ie.clusterId){var Yn=xt[Un],xr=Yn.nodes;if(!(!xr||!xr.length)){var qe=0;xr.forEach(function(_r){var un=pt[_r.id].idx;qe+=Xt[Dt][un]||0});var Cr=qe-Yn.sumTot*ae,tn=xr.concat([ie]),vn=[];tn.forEach(function(_r,un){vn[un]=tt[_r.originIndex]});var _n=m(tn,tt)*U,Pn=Cr-Qt;y&&(Pn=Cr+_n-(Qt+Le)),Pn>pe&&(pe=Pn,Wt=Yn)}}}),pe>0){Wt.nodes.push(ie);var Ar=ie.clusterId;ie.clusterId=Wt.id;var Ir=ne.nodes.indexOf(ie);ne.nodes.splice(Ir,1);var Br=0,dn=0;Q.forEach(function(an){var Ln=an.source,Un=an.target,Yn=pt[Ln].node.clusterId,xr=pt[Un].node.clusterId;(Yn===Wt.id&&xr!==Wt.id||xr===Wt.id&&Yn!==Wt.id)&&(Br=Br+(an[D]||1)),(Yn===Ar&&xr!==Ar||xr===Ar&&Yn!==Ar)&&(dn=dn+(an[D]||1))}),Wt.sumTot=Br,ne.sumTot=dn}})}var Pt={},Et=0;Object.keys(vt).forEach(function(ie){var Dt=vt[ie];if(!Dt.nodes||!Dt.nodes.length){delete vt[ie];return}var ne=String(Et+1);ne!==ie&&(Dt.id=ne,Dt.nodes=Dt.nodes.map(function(pe){return{id:pe.id,clusterId:ne}}),vt[ne]=Dt,Pt[ie]=ne,delete vt[ie],Et++)}),nt.forEach(function(ie){var Dt=ie.node,ne=ie.clusterId;Dt&&(Dt.clusterId=ne,Dt.clusterId&&Pt[Dt.clusterId]&&(Dt.clusterId=Pt[Dt.clusterId]))});var Nt=[],$t={};Q.forEach(function(ie){var Dt=ie.source,ne=ie.target,pe=ie[D]||1,Wt=pt[Dt].node.clusterId,ae=pt[ne].node.clusterId;if(!(!Wt||!ae)){var Se="".concat(Wt,"---").concat(ae);if($t[Se])$t[Se].weight+=pe,$t[Se].count++;else{var be={source:Wt,target:ae,weight:pe,count:1};$t[Se]=be,Nt.push(be)}}});var ue=[];return Object.keys(vt).forEach(function(ie){ue.push(vt[ie])}),{clusters:ue,clusterEdges:Nt}},x=S;z.default=x},689454:function(Ve,z,C){"use strict";Object.defineProperty(z,"__esModule",{value:!0}),z.default=void 0;var b=T(C(838823)),k=T(C(257085)),w=C(770643);function T(S){return S&&S.__esModule?S:{default:S}}var L=function(x,g){var A=[],E=x.nodes,D=E===void 0?[]:E,F=x.edges,y=F===void 0?[]:F;if(D.length===0)return A;var h=D[0],Y=new Set;Y.add(h);var $=function(tt,rt){return g?tt.weight-rt.weight:0},U=new k.default($);for((0,w.getEdgesByNodeId)(h.id,y).forEach(function(Q){U.insert(Q)});!U.isEmpty();){var W=U.delMin(),V=W.source,H=W.target;Y.has(V)&&Y.has(H)||(A.push(W),Y.has(V)||(Y.add(V),(0,w.getEdgesByNodeId)(V,y).forEach(function(Q){U.insert(Q)})),Y.has(H)||(Y.add(H),(0,w.getEdgesByNodeId)(H,y).forEach(function(Q){U.insert(Q)})))}return A},P=function(x,g){var A=[],E=x.nodes,D=E===void 0?[]:E,F=x.edges,y=F===void 0?[]:F;if(D.length===0)return A;var h=y.map(function(V){return V});g&&h.sort(function(V,H){return V.weight-H.weight});for(var Y=new b.default(D.map(function(V){return V.id}));h.length>0;){var $=h.shift(),U=$.source,W=$.target;Y.connected(U,W)||(A.push($),Y.union(U,W))}return A},p=function(x,g,A){var E={prim:L,kruskal:P};return A?E[A](x,g):P(x,g)},m=p;z.default=m},274926:function(Ve,z,C){"use strict";Object.defineProperty(z,"__esModule",{value:!0}),z.default=void 0;var b=w(C(182556)),k=C(770643);function w(P){return P&&P.__esModule?P:{default:P}}var T=function(p,m,S){typeof m!="number"&&(m=1e-6),typeof S!="number"&&(S=.85);for(var x=1,g=0,A=1e3,E=p.nodes,D=E===void 0?[]:E,F=p.edges,y=F===void 0?[]:F,h=D.length,Y,$={},U={},W=0;W<h;++W){var V=D[W],H=V.id;$[H]=1/h,U[H]=1/h}for(var Q=(0,b.default)(p);A>0&&x>m;){g=0;for(var W=0;W<h;++W){var V=D[W],H=V.id;if(Y=0,Q[V.id].inDegree===0)$[H]=0;else{for(var tt=(0,k.getNeighbors)(H,y,"source"),rt=0;rt<tt.length;++rt){var ct=tt[rt],ot=Q[ct].outDegree;ot>0&&(Y+=U[ct]/ot)}$[H]=S*Y,g+=$[H]}}g=(1-g)/h,x=0;for(var W=0;W<h;++W){var V=D[W],H=V.id;Y=$[H]+g,x+=Math.abs(Y-U[H]),U[H]=Y}A-=1}return U},L=T;z.default=L},257085:function(Ve,z){"use strict";Object.defineProperty(z,"__esModule",{value:!0}),z.default=void 0;var C=function(T,L){return T-L},b=function(){function w(T){T===void 0&&(T=C),this.compareFn=T,this.list=[]}return w.prototype.getLeft=function(T){return 2*T+1},w.prototype.getRight=function(T){return 2*T+2},w.prototype.getParent=function(T){return T===0?null:Math.floor((T-1)/2)},w.prototype.isEmpty=function(){return this.list.length<=0},w.prototype.top=function(){return this.isEmpty()?void 0:this.list[0]},w.prototype.delMin=function(){var T=this.top(),L=this.list.pop();return this.list.length>0&&(this.list[0]=L,this.moveDown(0)),T},w.prototype.insert=function(T){if(T!==null){this.list.push(T);var L=this.list.length-1;return this.moveUp(L),!0}return!1},w.prototype.moveUp=function(T){for(var L=this.getParent(T);T&&T>0&&this.compareFn(this.list[L],this.list[T])>0;){var P=this.list[L];this.list[L]=this.list[T],this.list[T]=P,T=L,L=this.getParent(T)}},w.prototype.moveDown=function(T){var L,P=T,p=this.getLeft(T),m=this.getRight(T),S=this.list.length;p!==null&&p<S&&this.compareFn(this.list[P],this.list[p])>0?P=p:m!==null&&m<S&&this.compareFn(this.list[P],this.list[m])>0&&(P=m),T!==P&&(L=[this.list[P],this.list[T]],this.list[T]=L[0],this.list[P]=L[1],this.moveDown(P))},w}(),k=b;z.default=k},488481:function(Ve,z){"use strict";Object.defineProperty(z,"__esModule",{value:!0}),z.default=z.LinkedListNode=void 0;var C=function(L,P){return L===P},b=function(){function T(L,P){P===void 0&&(P=null),this.value=L,this.next=P}return T.prototype.toString=function(L){return L?L(this.value):"".concat(this.value)},T}();z.LinkedListNode=b;var k=function(){function T(L){L===void 0&&(L=C),this.head=null,this.tail=null,this.compare=L}return T.prototype.prepend=function(L){var P=new b(L,this.head);return this.head=P,this.tail||(this.tail=P),this},T.prototype.append=function(L){var P=new b(L);return this.head?(this.tail.next=P,this.tail=P,this):(this.head=P,this.tail=P,this)},T.prototype.delete=function(L){if(!this.head)return null;for(var P=null;this.head&&this.compare(this.head.value,L);)P=this.head,this.head=this.head.next;var p=this.head;if(p!==null)for(;p.next;)this.compare(p.next.value,L)?(P=p.next,p.next=p.next.next):p=p.next;return this.compare(this.tail.value,L)&&(this.tail=p),P},T.prototype.find=function(L){var P=L.value,p=P===void 0?void 0:P,m=L.callback,S=m===void 0?void 0:m;if(!this.head)return null;for(var x=this.head;x;){if(S&&S(x.value)||p!==void 0&&this.compare(x.value,p))return x;x=x.next}return null},T.prototype.deleteTail=function(){var L=this.tail;if(this.head===this.tail)return this.head=null,this.tail=null,L;for(var P=this.head;P.next;)P.next.next?P=P.next:P.next=null;return this.tail=P,L},T.prototype.deleteHead=function(){if(!this.head)return null;var L=this.head;return this.head.next?this.head=this.head.next:(this.head=null,this.tail=null),L},T.prototype.fromArray=function(L){var P=this;return L.forEach(function(p){return P.append(p)}),this},T.prototype.toArray=function(){for(var L=[],P=this.head;P;)L.push(P),P=P.next;return L},T.prototype.reverse=function(){for(var L=this.head,P=null,p=null;L;)p=L.next,L.next=P,P=L,L=p;this.tail=this.head,this.head=P},T.prototype.toString=function(L){return L===void 0&&(L=void 0),this.toArray().map(function(P){return P.toString(L)}).toString()},T}(),w=k;z.default=w},893026:function(Ve,z,C){"use strict";Object.defineProperty(z,"__esModule",{value:!0}),z.default=void 0;var b=k(C(488481));function k(L){return L&&L.__esModule?L:{default:L}}var w=function(){function L(){this.linkedList=new b.default}return L.prototype.isEmpty=function(){return!this.linkedList.head},L.prototype.peek=function(){return this.linkedList.head?this.linkedList.head.value:null},L.prototype.enqueue=function(P){this.linkedList.append(P)},L.prototype.dequeue=function(){var P=this.linkedList.deleteHead();return P?P.value:null},L.prototype.toString=function(P){return this.linkedList.toString(P)},L}(),T=w;z.default=T},838823:function(Ve,z){"use strict";Object.defineProperty(z,"__esModule",{value:!0}),z.default=void 0;var C=function(){function k(w){this.count=w.length,this.parent={};for(var T=0,L=w;T<L.length;T++){var P=L[T];this.parent[P]=P}}return k.prototype.find=function(w){for(;this.parent[w]!==w;)w=this.parent[w];return w},k.prototype.union=function(w,T){var L=this.find(w),P=this.find(T);L!==P&&(L<P?(this.parent[T]!==T&&this.union(this.parent[T],w),this.parent[T]=this.parent[w]):(this.parent[w]!==w&&this.union(this.parent[w],T),this.parent[w]=this.parent[T]))},k.prototype.connected=function(w,T){return this.find(w)===this.find(T)},k}(),b=C;z.default=b},317892:function(Ve,z){"use strict";Object.defineProperty(z,"__esModule",{value:!0}),z.DistanceType=void 0;var C;z.DistanceType=C,function(b){b.EuclideanDistance="euclideanDistance"}(C||(z.DistanceType=C={}))},770643:function(Ve,z){"use strict";Object.defineProperty(z,"__esModule",{value:!0}),z.uniqueId=z.getOutEdgesNodeId=z.getNeighbors=z.getEdgesByNodeId=void 0;var C=function(L,P,p){P===void 0&&(P=[]);var m=P.filter(function(A){return A.source===L||A.target===L});if(p==="target"){var S=function(E){return E.source===L};return m.filter(S).map(function(A){return A.target})}if(p==="source"){var x=function(E){return E.target===L};return m.filter(x).map(function(A){return A.source})}var g=function(E){return E.source===L?E.target:E.source};return m.map(g)};z.getNeighbors=C;var b=function(L,P){return P.filter(function(p){return p.source===L})};z.getOutEdgesNodeId=b;var k=function(L,P){return P.filter(function(p){return p.source===L||p.target===L})};z.getEdgesByNodeId=k;var w=function(L){L===void 0&&(L=0);var P="".concat(Math.random()).split(".")[1].substr(0,5),p="".concat(Math.random()).split(".")[1].substr(0,5);return"".concat(L,"-").concat(P).concat(p)};z.uniqueId=w},526838:function(Ve,z,C){"use strict";Object.defineProperty(z,"__esModule",{value:!0}),z.oneHot=z.getDistance=z.getAllKeyValueMap=z.default=void 0;var b=C(413810),k=C(317892),w=T(C(29741));function T(S){return S&&S.__esModule?S:{default:S}}var L=function(x,g,A){var E=[];g!=null&&g.length?E=g:(x.forEach(function(F){E=E.concat(Object.keys(F))}),E=(0,b.uniq)(E));var D={};return E.forEach(function(F){var y=[];x.forEach(function(h){h[F]!==void 0&&h[F]!==""&&y.push(h[F])}),y.length&&!(A!=null&&A.includes(F))&&(D[F]=(0,b.uniq)(y))}),D};z.getAllKeyValueMap=L;var P=function(x,g,A){var E=L(x,g,A),D=[];if(!Object.keys(E).length)return D;var F=Object.values(E),y=F.every(function(h){return h.every(function(Y){return typeof Y=="number"})});return x.forEach(function(h,Y){var $=[];Object.keys(E).forEach(function(U){var W=h[U],V=E[U],H=V.findIndex(function(rt){return W===rt}),Q=[];if(y)Q.push(W);else for(var tt=0;tt<V.length;tt++)tt===H?Q.push(1):Q.push(0);$=$.concat(Q)}),D[Y]=$}),D};z.oneHot=P;var p=function(x,g,A,E){A===void 0&&(A=k.DistanceType.EuclideanDistance);var D=0;switch(A){case k.DistanceType.EuclideanDistance:D=new w.default(x).euclideanDistance(new w.default(g));break;default:break}return D};z.getDistance=p;var m={getAllKeyValueMap:L,oneHot:P,getDistance:p};z.default=m},103665:function(Ve,z,C){"use strict";Object.defineProperty(z,"__esModule",{value:!0}),z.getPropertyWeight=z.getAllSortProperties=z.getAllProperties=z.default=void 0;var b=C(592935),k=function(m,S){m===void 0&&(m=[]),S===void 0&&(S=100);var x={};m.forEach(function(A){A.properties&&Object.keys(A.properties).forEach(function(E){if(E==="id"||!"".concat(A.properties[E]).match(b.secondReg)&&!"".concat(A.properties[E]).match(b.dateReg)&&isNaN(Number(A.properties[E]))){x.hasOwnProperty(E)&&delete x[E];return}x.hasOwnProperty(E)?x[E]+=1:x[E]=1})});var g=Object.keys(x).sort(function(A,E){return x[E]-x[A]});return g.length<S?g:g.slice(0,S)};z.getAllSortProperties=k;var w=function(m,S){return S.map(function(x){return m.hasOwnProperty(x)?m[x]:0})},T=function(m){for(var S=k(m),x=[],g=0;g<m.length;g++)x[g]=w(m[g].properties,S);return x};z.getPropertyWeight=T;var L=function(m,S){S===void 0&&(S=void 0);var x=[];return m.forEach(function(g){S===void 0&&x.push(g),g[S]!==void 0&&x.push(g[S])}),x};z.getAllProperties=L;var P={getAllSortProperties:k,getPropertyWeight:T,getAllProperties:L};z.default=P},29741:function(Ve,z,C){"use strict";Object.defineProperty(z,"__esModule",{value:!0}),z.default=void 0;var b=C(413810),k=function(){function T(L){this.arr=L}return T.prototype.getArr=function(){return this.arr||[]},T.prototype.add=function(L){var P,p=L.arr;if(!(!((P=this.arr)===null||P===void 0)&&P.length))return new T(p);if(!(p!=null&&p.length))return new T(this.arr);if(this.arr.length===p.length){var m=[];for(var S in this.arr)m[S]=this.arr[S]+p[S];return new T(m)}},T.prototype.subtract=function(L){var P,p=L.arr;if(!(!((P=this.arr)===null||P===void 0)&&P.length))return new T(p);if(!(p!=null&&p.length))return new T(this.arr);if(this.arr.length===p.length){var m=[];for(var S in this.arr)m[S]=this.arr[S]-p[S];return new T(m)}},T.prototype.avg=function(L){var P=[];if(L!==0)for(var p in this.arr)P[p]=this.arr[p]/L;return new T(P)},T.prototype.negate=function(){var L=[];for(var P in this.arr)L[P]=-this.arr[P];return new T(L)},T.prototype.squareEuclideanDistance=function(L){var P,p=L.arr;if(!(!((P=this.arr)===null||P===void 0)&&P.length)||!(p!=null&&p.length))return 0;if(this.arr.length===p.length){var m=0;for(var S in this.arr)m+=Math.pow(this.arr[S]-L.arr[S],2);return m}},T.prototype.euclideanDistance=function(L){var P,p=L.arr;if(!(!((P=this.arr)===null||P===void 0)&&P.length)||!(p!=null&&p.length))return 0;if(this.arr.length===p.length){var m=0;for(var S in this.arr)m+=Math.pow(this.arr[S]-L.arr[S],2);return Math.sqrt(m)}else console.error("The two vectors are unequal in length.")},T.prototype.normalize=function(){var L=[],P=(0,b.clone)(this.arr);P.sort(function(x,g){return x-g});var p=P[P.length-1],m=P[0];for(var S in this.arr)L[S]=(this.arr[S]-m)/(p-m);return new T(L)},T.prototype.norm2=function(){var L;if(!(!((L=this.arr)===null||L===void 0)&&L.length))return 0;var P=0;for(var p in this.arr)P+=Math.pow(this.arr[p],2);return Math.sqrt(P)},T.prototype.dot=function(L){var P,p=L.arr;if(!(!((P=this.arr)===null||P===void 0)&&P.length)||!(p!=null&&p.length))return 0;if(this.arr.length===p.length){var m=0;for(var S in this.arr)m+=this.arr[S]*L.arr[S];return m}else console.error("The two vectors are unequal in length.")},T.prototype.equal=function(L){var P,p=L.arr;if(((P=this.arr)===null||P===void 0?void 0:P.length)!==(p==null?void 0:p.length))return!1;for(var m in this.arr)if(this.arr[m]!==p[m])return!1;return!0},T}(),w=k;z.default=w},831656:function(Ve,z,C){"use strict";function b(U){"@babel/helpers - typeof";return b=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(W){return typeof W}:function(W){return W&&typeof Symbol=="function"&&W.constructor===Symbol&&W!==Symbol.prototype?"symbol":typeof W},b(U)}Object.defineProperty(z,"__esModule",{value:!0}),Object.defineProperty(z,"GADDI",{enumerable:!0,get:function(){return F.default}}),Object.defineProperty(z,"breadthFirstSearch",{enumerable:!0,get:function(){return w.default}}),Object.defineProperty(z,"connectedComponent",{enumerable:!0,get:function(){return T.default}}),Object.defineProperty(z,"depthFirstSearch",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(z,"detectCycle",{enumerable:!0,get:function(){return P.default}}),Object.defineProperty(z,"dijkstra",{enumerable:!0,get:function(){return m.default}}),Object.defineProperty(z,"findAllPath",{enumerable:!0,get:function(){return S.findAllPath}}),Object.defineProperty(z,"findShortestPath",{enumerable:!0,get:function(){return S.findShortestPath}}),Object.defineProperty(z,"floydWarshall",{enumerable:!0,get:function(){return x.default}}),Object.defineProperty(z,"getAdjMatrix",{enumerable:!0,get:function(){return k.default}}),Object.defineProperty(z,"getDegree",{enumerable:!0,get:function(){return L.default}}),Object.defineProperty(z,"getInDegree",{enumerable:!0,get:function(){return L.getInDegree}}),Object.defineProperty(z,"getNeighbors",{enumerable:!0,get:function(){return y.getNeighbors}}),Object.defineProperty(z,"getOutDegree",{enumerable:!0,get:function(){return L.getOutDegree}}),Object.defineProperty(z,"labelPropagation",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(z,"louvain",{enumerable:!0,get:function(){return A.default}}),Object.defineProperty(z,"minimumSpanningTree",{enumerable:!0,get:function(){return E.default}}),Object.defineProperty(z,"pageRank",{enumerable:!0,get:function(){return D.default}});var k=$(C(62238)),w=$(C(683764)),T=$(C(759527)),L=Y(C(182556)),P=$(C(994282)),p=$(C(45891)),m=$(C(878089)),S=C(241727),x=$(C(975033)),g=$(C(505170)),A=$(C(135179)),E=$(C(689454)),D=$(C(274926)),F=$(C(882812)),y=C(770643);function h(U){if(typeof WeakMap!="function")return null;var W=new WeakMap,V=new WeakMap;return(h=function(Q){return Q?V:W})(U)}function Y(U,W){if(!W&&U&&U.__esModule)return U;if(U===null||b(U)!=="object"&&typeof U!="function")return{default:U};var V=h(W);if(V&&V.has(U))return V.get(U);var H={},Q=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var tt in U)if(tt!=="default"&&Object.prototype.hasOwnProperty.call(U,tt)){var rt=Q?Object.getOwnPropertyDescriptor(U,tt):null;rt&&(rt.get||rt.set)?Object.defineProperty(H,tt,rt):H[tt]=U[tt]}return H.default=U,V&&V.set(U,H),H}function $(U){return U&&U.__esModule?U:{default:U}}},66044:function(Ve,z){"use strict";Object.defineProperty(z,"__esModule",{value:!0}),z.MESSAGE=z.ALGORITHM=void 0;var C={pageRank:"pageRank",breadthFirstSearch:"breadthFirstSearch",connectedComponent:"connectedComponent",depthFirstSearch:"depthFirstSearch",detectCycle:"detectCycle",detectDirectedCycle:"detectDirectedCycle",detectAllCycles:"detectAllCycles",detectAllDirectedCycle:"detectAllDirectedCycle",detectAllUndirectedCycle:"detectAllUndirectedCycle",dijkstra:"dijkstra",findAllPath:"findAllPath",findShortestPath:"findShortestPath",floydWarshall:"floydWarshall",getAdjMatrix:"getAdjMatrix",getDegree:"getDegree",getInDegree:"getInDegree",getNeighbors:"getNeighbors",getOutDegree:"getOutDegree",labelPropagation:"labelPropagation",louvain:"louvain",GADDI:"GADDI",minimumSpanningTree:"minimumSpanningTree",SUCCESS:"SUCCESS",FAILURE:"FAILURE"};z.ALGORITHM=C;var b={SUCCESS:"SUCCESS",FAILURE:"FAILURE"};z.MESSAGE=b},70585:function(Ve,z,C){"use strict";Object.defineProperty(z,"__esModule",{value:!0}),z.default=void 0;var b=C(66044),k=w(C(612067));function w(P){return P&&P.__esModule?P:{default:P}}var T=function(p){return function(){for(var m=[],S=0;S<arguments.length;S++)m[S]=arguments[S];return new Promise(function(x,g){var A=new k.default;A.postMessage({_algorithmType:p,data:m}),A.onmessage=function(E){var D=E.data,F=D.data,y=D._algorithmType;b.MESSAGE.SUCCESS===y?x(F):g(),A.terminate()}})}},L=T;z.default=L},430485:function(Ve,z,C){"use strict";Object.defineProperty(z,"__esModule",{value:!0}),z.pageRankAsync=z.minimumSpanningTreeAsync=z.louvainAsync=z.labelPropagationAsync=z.getOutDegreeAsync=z.getNeighborsAsync=z.getInDegreeAsync=z.getDegreeAsync=z.getAdjMatrixAsync=z.floydWarshallAsync=z.findShortestPathAsync=z.findAllPathAsync=z.dijkstraAsync=z.detectCycleAsync=z.detectAllUndirectedCycleAsync=z.detectAllDirectedCycleAsync=z.detectAllCyclesAsync=z.connectedComponentAsync=z.GADDIAsync=void 0;var b=w(C(70585)),k=C(66044);function w(H){return H&&H.__esModule?H:{default:H}}var T=function(Q,tt){return(0,b.default)(k.ALGORITHM.getAdjMatrix).apply(void 0,[Q,tt])};z.getAdjMatrixAsync=T;var L=function(Q,tt){return(0,b.default)(k.ALGORITHM.connectedComponent).apply(void 0,[Q,tt])};z.connectedComponentAsync=L;var P=function(Q){return(0,b.default)(k.ALGORITHM.getDegree)(Q)};z.getDegreeAsync=P;var p=function(Q,tt){return(0,b.default)(k.ALGORITHM.getInDegree)(Q,tt)};z.getInDegreeAsync=p;var m=function(Q,tt){return(0,b.default)(k.ALGORITHM.getOutDegree)(Q,tt)};z.getOutDegreeAsync=m;var S=function(Q){return(0,b.default)(k.ALGORITHM.detectCycle)(Q)};z.detectCycleAsync=S;var x=function(Q){return(0,b.default)(k.ALGORITHM.detectAllCycles)(Q)};z.detectAllCyclesAsync=x;var g=function(Q){return(0,b.default)(k.ALGORITHM.detectAllDirectedCycle)(Q)};z.detectAllDirectedCycleAsync=g;var A=function(Q){return(0,b.default)(k.ALGORITHM.detectAllUndirectedCycle)(Q)};z.detectAllUndirectedCycleAsync=A;var E=function(Q,tt,rt,ct){return(0,b.default)(k.ALGORITHM.dijkstra).apply(void 0,[Q,tt,rt,ct])};z.dijkstraAsync=E;var D=function(Q,tt,rt,ct){return(0,b.default)(k.ALGORITHM.findAllPath).apply(void 0,[Q,tt,rt,ct])};z.findAllPathAsync=D;var F=function(Q,tt,rt,ct,ot){return(0,b.default)(k.ALGORITHM.findShortestPath).apply(void 0,[Q,tt,rt,ct,ot])};z.findShortestPathAsync=F;var y=function(Q,tt){return(0,b.default)(k.ALGORITHM.floydWarshall).apply(void 0,[Q,tt])};z.floydWarshallAsync=y;var h=function(Q,tt,rt,ct){return ct===void 0&&(ct=1e3),(0,b.default)(k.ALGORITHM.labelPropagation)(Q,tt,rt,ct)};z.labelPropagationAsync=h;var Y=function(Q,tt,rt,ct){return(0,b.default)(k.ALGORITHM.louvain)(Q,tt,rt,ct)};z.louvainAsync=Y;var $=function(Q,tt,rt){return(0,b.default)(k.ALGORITHM.minimumSpanningTree).apply(void 0,[Q,tt,rt])};z.minimumSpanningTreeAsync=$;var U=function(Q,tt,rt){return(0,b.default)(k.ALGORITHM.pageRank).apply(void 0,[Q,tt,rt])};z.pageRankAsync=U;var W=function(Q,tt,rt){return(0,b.default)(k.ALGORITHM.getNeighbors).apply(void 0,[Q,tt,rt])};z.getNeighborsAsync=W;var V=function(Q,tt,rt,ct,ot,xt,pt){return rt===void 0&&(rt=!1),xt===void 0&&(xt="cluster"),pt===void 0&&(pt="cluster"),(0,b.default)(k.ALGORITHM.GADDI).apply(void 0,[Q,tt,rt,ct,ot,xt,pt])};z.GADDIAsync=V},612067:function(Ve,z,C){"use strict";function b(m){"@babel/helpers - typeof";return b=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(S){return typeof S}:function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S},b(m)}Object.defineProperty(z,"__esModule",{value:!0}),z.default=void 0;var k=L(C(831656)),w=C(66044);function T(m){if(typeof WeakMap!="function")return null;var S=new WeakMap,x=new WeakMap;return(T=function(A){return A?x:S})(m)}function L(m,S){if(!S&&m&&m.__esModule)return m;if(m===null||b(m)!=="object"&&typeof m!="function")return{default:m};var x=T(S);if(x&&x.has(m))return x.get(m);var g={},A=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var E in m)if(E!=="default"&&Object.prototype.hasOwnProperty.call(m,E)){var D=A?Object.getOwnPropertyDescriptor(m,E):null;D&&(D.get||D.set)?Object.defineProperty(g,E,D):g[E]=m[E]}return g.default=m,x&&x.set(m,g),g}var P=typeof self!="undefined"?self:{};P.onmessage=function(m){var S=m.data,x=S._algorithmType,g=S.data;if(x){if(typeof k[x]=="function"){var A=k[x].apply(k,g);P.postMessage({_algorithmType:w.MESSAGE.SUCCESS,data:A});return}P.postMessage({_algorithmType:w.MESSAGE.FAILURE})}};var p=null;z.default=p},901029:function(Ve,z,C){"use strict";C.r(z),C.d(z,{Kernel:function(){return xt},World:function(){return jn}});var b=C(115861),k=C(204942),w=C(215671),T=C(143144),L=C(936719),P=C.n(L),p=C(281763),m=C.n(p),S=C(701469),x=C.n(S),g=C(364687),A=C.n(g),E=null,D=1;function F(){return D++}var y=null,h=null,Y;(function(at){at[at.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",at[at.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",at[at.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT",at[at.POINTS=0]="POINTS",at[at.LINES=1]="LINES",at[at.LINE_LOOP=2]="LINE_LOOP",at[at.LINE_STRIP=3]="LINE_STRIP",at[at.TRIANGLES=4]="TRIANGLES",at[at.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",at[at.TRIANGLE_FAN=6]="TRIANGLE_FAN",at[at.ZERO=0]="ZERO",at[at.ONE=1]="ONE",at[at.SRC_COLOR=768]="SRC_COLOR",at[at.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",at[at.SRC_ALPHA=770]="SRC_ALPHA",at[at.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",at[at.DST_ALPHA=772]="DST_ALPHA",at[at.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",at[at.DST_COLOR=774]="DST_COLOR",at[at.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",at[at.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",at[at.FUNC_ADD=32774]="FUNC_ADD",at[at.BLEND_EQUATION=32777]="BLEND_EQUATION",at[at.BLEND_EQUATION_RGB=32777]="BLEND_EQUATION_RGB",at[at.BLEND_EQUATION_ALPHA=34877]="BLEND_EQUATION_ALPHA",at[at.FUNC_SUBTRACT=32778]="FUNC_SUBTRACT",at[at.FUNC_REVERSE_SUBTRACT=32779]="FUNC_REVERSE_SUBTRACT",at[at.MAX_EXT=32776]="MAX_EXT",at[at.MIN_EXT=32775]="MIN_EXT",at[at.BLEND_DST_RGB=32968]="BLEND_DST_RGB",at[at.BLEND_SRC_RGB=32969]="BLEND_SRC_RGB",at[at.BLEND_DST_ALPHA=32970]="BLEND_DST_ALPHA",at[at.BLEND_SRC_ALPHA=32971]="BLEND_SRC_ALPHA",at[at.CONSTANT_COLOR=32769]="CONSTANT_COLOR",at[at.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",at[at.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",at[at.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA",at[at.BLEND_COLOR=32773]="BLEND_COLOR",at[at.ARRAY_BUFFER=34962]="ARRAY_BUFFER",at[at.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",at[at.ARRAY_BUFFER_BINDING=34964]="ARRAY_BUFFER_BINDING",at[at.ELEMENT_ARRAY_BUFFER_BINDING=34965]="ELEMENT_ARRAY_BUFFER_BINDING",at[at.STREAM_DRAW=35040]="STREAM_DRAW",at[at.STATIC_DRAW=35044]="STATIC_DRAW",at[at.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",at[at.BUFFER_SIZE=34660]="BUFFER_SIZE",at[at.BUFFER_USAGE=34661]="BUFFER_USAGE",at[at.CURRENT_VERTEX_ATTRIB=34342]="CURRENT_VERTEX_ATTRIB",at[at.FRONT=1028]="FRONT",at[at.BACK=1029]="BACK",at[at.FRONT_AND_BACK=1032]="FRONT_AND_BACK",at[at.CULL_FACE=2884]="CULL_FACE",at[at.BLEND=3042]="BLEND",at[at.DITHER=3024]="DITHER",at[at.STENCIL_TEST=2960]="STENCIL_TEST",at[at.DEPTH_TEST=2929]="DEPTH_TEST",at[at.SCISSOR_TEST=3089]="SCISSOR_TEST",at[at.POLYGON_OFFSET_FILL=32823]="POLYGON_OFFSET_FILL",at[at.SAMPLE_ALPHA_TO_COVERAGE=32926]="SAMPLE_ALPHA_TO_COVERAGE",at[at.SAMPLE_COVERAGE=32928]="SAMPLE_COVERAGE",at[at.NO_ERROR=0]="NO_ERROR",at[at.INVALID_ENUM=1280]="INVALID_ENUM",at[at.INVALID_VALUE=1281]="INVALID_VALUE",at[at.INVALID_OPERATION=1282]="INVALID_OPERATION",at[at.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",at[at.CW=2304]="CW",at[at.CCW=2305]="CCW",at[at.LINE_WIDTH=2849]="LINE_WIDTH",at[at.ALIASED_POINT_SIZE_RANGE=33901]="ALIASED_POINT_SIZE_RANGE",at[at.ALIASED_LINE_WIDTH_RANGE=33902]="ALIASED_LINE_WIDTH_RANGE",at[at.CULL_FACE_MODE=2885]="CULL_FACE_MODE",at[at.FRONT_FACE=2886]="FRONT_FACE",at[at.DEPTH_RANGE=2928]="DEPTH_RANGE",at[at.DEPTH_WRITEMASK=2930]="DEPTH_WRITEMASK",at[at.DEPTH_CLEAR_VALUE=2931]="DEPTH_CLEAR_VALUE",at[at.DEPTH_FUNC=2932]="DEPTH_FUNC",at[at.STENCIL_CLEAR_VALUE=2961]="STENCIL_CLEAR_VALUE",at[at.STENCIL_FUNC=2962]="STENCIL_FUNC",at[at.STENCIL_FAIL=2964]="STENCIL_FAIL",at[at.STENCIL_PASS_DEPTH_FAIL=2965]="STENCIL_PASS_DEPTH_FAIL",at[at.STENCIL_PASS_DEPTH_PASS=2966]="STENCIL_PASS_DEPTH_PASS",at[at.STENCIL_REF=2967]="STENCIL_REF",at[at.STENCIL_VALUE_MASK=2963]="STENCIL_VALUE_MASK",at[at.STENCIL_WRITEMASK=2968]="STENCIL_WRITEMASK",at[at.STENCIL_BACK_FUNC=34816]="STENCIL_BACK_FUNC",at[at.STENCIL_BACK_FAIL=34817]="STENCIL_BACK_FAIL",at[at.STENCIL_BACK_PASS_DEPTH_FAIL=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",at[at.STENCIL_BACK_PASS_DEPTH_PASS=34819]="STENCIL_BACK_PASS_DEPTH_PASS",at[at.STENCIL_BACK_REF=36003]="STENCIL_BACK_REF",at[at.STENCIL_BACK_VALUE_MASK=36004]="STENCIL_BACK_VALUE_MASK",at[at.STENCIL_BACK_WRITEMASK=36005]="STENCIL_BACK_WRITEMASK",at[at.VIEWPORT=2978]="VIEWPORT",at[at.SCISSOR_BOX=3088]="SCISSOR_BOX",at[at.COLOR_CLEAR_VALUE=3106]="COLOR_CLEAR_VALUE",at[at.COLOR_WRITEMASK=3107]="COLOR_WRITEMASK",at[at.UNPACK_ALIGNMENT=3317]="UNPACK_ALIGNMENT",at[at.PACK_ALIGNMENT=3333]="PACK_ALIGNMENT",at[at.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE",at[at.MAX_VIEWPORT_DIMS=3386]="MAX_VIEWPORT_DIMS",at[at.SUBPIXEL_BITS=3408]="SUBPIXEL_BITS",at[at.RED_BITS=3410]="RED_BITS",at[at.GREEN_BITS=3411]="GREEN_BITS",at[at.BLUE_BITS=3412]="BLUE_BITS",at[at.ALPHA_BITS=3413]="ALPHA_BITS",at[at.DEPTH_BITS=3414]="DEPTH_BITS",at[at.STENCIL_BITS=3415]="STENCIL_BITS",at[at.POLYGON_OFFSET_UNITS=10752]="POLYGON_OFFSET_UNITS",at[at.POLYGON_OFFSET_FACTOR=32824]="POLYGON_OFFSET_FACTOR",at[at.TEXTURE_BINDING_2D=32873]="TEXTURE_BINDING_2D",at[at.SAMPLE_BUFFERS=32936]="SAMPLE_BUFFERS",at[at.SAMPLES=32937]="SAMPLES",at[at.SAMPLE_COVERAGE_VALUE=32938]="SAMPLE_COVERAGE_VALUE",at[at.SAMPLE_COVERAGE_INVERT=32939]="SAMPLE_COVERAGE_INVERT",at[at.COMPRESSED_TEXTURE_FORMATS=34467]="COMPRESSED_TEXTURE_FORMATS",at[at.DONT_CARE=4352]="DONT_CARE",at[at.FASTEST=4353]="FASTEST",at[at.NICEST=4354]="NICEST",at[at.GENERATE_MIPMAP_HINT=33170]="GENERATE_MIPMAP_HINT",at[at.BYTE=5120]="BYTE",at[at.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",at[at.SHORT=5122]="SHORT",at[at.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",at[at.INT=5124]="INT",at[at.UNSIGNED_INT=5125]="UNSIGNED_INT",at[at.FLOAT=5126]="FLOAT",at[at.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",at[at.ALPHA=6406]="ALPHA",at[at.RGB=6407]="RGB",at[at.RGBA=6408]="RGBA",at[at.LUMINANCE=6409]="LUMINANCE",at[at.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",at[at.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",at[at.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",at[at.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",at[at.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",at[at.VERTEX_SHADER=35633]="VERTEX_SHADER",at[at.MAX_VERTEX_ATTRIBS=34921]="MAX_VERTEX_ATTRIBS",at[at.MAX_VERTEX_UNIFORM_VECTORS=36347]="MAX_VERTEX_UNIFORM_VECTORS",at[at.MAX_VARYING_VECTORS=36348]="MAX_VARYING_VECTORS",at[at.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",at[at.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",at[at.MAX_TEXTURE_IMAGE_UNITS=34930]="MAX_TEXTURE_IMAGE_UNITS",at[at.MAX_FRAGMENT_UNIFORM_VECTORS=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",at[at.SHADER_TYPE=35663]="SHADER_TYPE",at[at.DELETE_STATUS=35712]="DELETE_STATUS",at[at.LINK_STATUS=35714]="LINK_STATUS",at[at.VALIDATE_STATUS=35715]="VALIDATE_STATUS",at[at.ATTACHED_SHADERS=35717]="ATTACHED_SHADERS",at[at.ACTIVE_UNIFORMS=35718]="ACTIVE_UNIFORMS",at[at.ACTIVE_ATTRIBUTES=35721]="ACTIVE_ATTRIBUTES",at[at.SHADING_LANGUAGE_VERSION=35724]="SHADING_LANGUAGE_VERSION",at[at.CURRENT_PROGRAM=35725]="CURRENT_PROGRAM",at[at.NEVER=512]="NEVER",at[at.LESS=513]="LESS",at[at.EQUAL=514]="EQUAL",at[at.LEQUAL=515]="LEQUAL",at[at.GREATER=516]="GREATER",at[at.NOTEQUAL=517]="NOTEQUAL",at[at.GEQUAL=518]="GEQUAL",at[at.ALWAYS=519]="ALWAYS",at[at.KEEP=7680]="KEEP",at[at.REPLACE=7681]="REPLACE",at[at.INCR=7682]="INCR",at[at.DECR=7683]="DECR",at[at.INVERT=5386]="INVERT",at[at.INCR_WRAP=34055]="INCR_WRAP",at[at.DECR_WRAP=34056]="DECR_WRAP",at[at.VENDOR=7936]="VENDOR",at[at.RENDERER=7937]="RENDERER",at[at.VERSION=7938]="VERSION",at[at.NEAREST=9728]="NEAREST",at[at.LINEAR=9729]="LINEAR",at[at.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",at[at.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",at[at.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",at[at.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR",at[at.TEXTURE_MAG_FILTER=10240]="TEXTURE_MAG_FILTER",at[at.TEXTURE_MIN_FILTER=10241]="TEXTURE_MIN_FILTER",at[at.TEXTURE_WRAP_S=10242]="TEXTURE_WRAP_S",at[at.TEXTURE_WRAP_T=10243]="TEXTURE_WRAP_T",at[at.TEXTURE_2D=3553]="TEXTURE_2D",at[at.TEXTURE=5890]="TEXTURE",at[at.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",at[at.TEXTURE_BINDING_CUBE_MAP=34068]="TEXTURE_BINDING_CUBE_MAP",at[at.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",at[at.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",at[at.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",at[at.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",at[at.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",at[at.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",at[at.MAX_CUBE_MAP_TEXTURE_SIZE=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",at[at.TEXTURE0=33984]="TEXTURE0",at[at.TEXTURE1=33985]="TEXTURE1",at[at.TEXTURE2=33986]="TEXTURE2",at[at.TEXTURE3=33987]="TEXTURE3",at[at.TEXTURE4=33988]="TEXTURE4",at[at.TEXTURE5=33989]="TEXTURE5",at[at.TEXTURE6=33990]="TEXTURE6",at[at.TEXTURE7=33991]="TEXTURE7",at[at.TEXTURE8=33992]="TEXTURE8",at[at.TEXTURE9=33993]="TEXTURE9",at[at.TEXTURE10=33994]="TEXTURE10",at[at.TEXTURE11=33995]="TEXTURE11",at[at.TEXTURE12=33996]="TEXTURE12",at[at.TEXTURE13=33997]="TEXTURE13",at[at.TEXTURE14=33998]="TEXTURE14",at[at.TEXTURE15=33999]="TEXTURE15",at[at.TEXTURE16=34e3]="TEXTURE16",at[at.TEXTURE17=34001]="TEXTURE17",at[at.TEXTURE18=34002]="TEXTURE18",at[at.TEXTURE19=34003]="TEXTURE19",at[at.TEXTURE20=34004]="TEXTURE20",at[at.TEXTURE21=34005]="TEXTURE21",at[at.TEXTURE22=34006]="TEXTURE22",at[at.TEXTURE23=34007]="TEXTURE23",at[at.TEXTURE24=34008]="TEXTURE24",at[at.TEXTURE25=34009]="TEXTURE25",at[at.TEXTURE26=34010]="TEXTURE26",at[at.TEXTURE27=34011]="TEXTURE27",at[at.TEXTURE28=34012]="TEXTURE28",at[at.TEXTURE29=34013]="TEXTURE29",at[at.TEXTURE30=34014]="TEXTURE30",at[at.TEXTURE31=34015]="TEXTURE31",at[at.ACTIVE_TEXTURE=34016]="ACTIVE_TEXTURE",at[at.REPEAT=10497]="REPEAT",at[at.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",at[at.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",at[at.FLOAT_VEC2=35664]="FLOAT_VEC2",at[at.FLOAT_VEC3=35665]="FLOAT_VEC3",at[at.FLOAT_VEC4=35666]="FLOAT_VEC4",at[at.INT_VEC2=35667]="INT_VEC2",at[at.INT_VEC3=35668]="INT_VEC3",at[at.INT_VEC4=35669]="INT_VEC4",at[at.BOOL=35670]="BOOL",at[at.BOOL_VEC2=35671]="BOOL_VEC2",at[at.BOOL_VEC3=35672]="BOOL_VEC3",at[at.BOOL_VEC4=35673]="BOOL_VEC4",at[at.FLOAT_MAT2=35674]="FLOAT_MAT2",at[at.FLOAT_MAT3=35675]="FLOAT_MAT3",at[at.FLOAT_MAT4=35676]="FLOAT_MAT4",at[at.SAMPLER_2D=35678]="SAMPLER_2D",at[at.SAMPLER_CUBE=35680]="SAMPLER_CUBE",at[at.VERTEX_ATTRIB_ARRAY_ENABLED=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",at[at.VERTEX_ATTRIB_ARRAY_SIZE=34339]="VERTEX_ATTRIB_ARRAY_SIZE",at[at.VERTEX_ATTRIB_ARRAY_STRIDE=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",at[at.VERTEX_ATTRIB_ARRAY_TYPE=34341]="VERTEX_ATTRIB_ARRAY_TYPE",at[at.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",at[at.VERTEX_ATTRIB_ARRAY_POINTER=34373]="VERTEX_ATTRIB_ARRAY_POINTER",at[at.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",at[at.COMPILE_STATUS=35713]="COMPILE_STATUS",at[at.LOW_FLOAT=36336]="LOW_FLOAT",at[at.MEDIUM_FLOAT=36337]="MEDIUM_FLOAT",at[at.HIGH_FLOAT=36338]="HIGH_FLOAT",at[at.LOW_INT=36339]="LOW_INT",at[at.MEDIUM_INT=36340]="MEDIUM_INT",at[at.HIGH_INT=36341]="HIGH_INT",at[at.FRAMEBUFFER=36160]="FRAMEBUFFER",at[at.RENDERBUFFER=36161]="RENDERBUFFER",at[at.RGBA4=32854]="RGBA4",at[at.RGB5_A1=32855]="RGB5_A1",at[at.RGB565=36194]="RGB565",at[at.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",at[at.STENCIL_INDEX=6401]="STENCIL_INDEX",at[at.STENCIL_INDEX8=36168]="STENCIL_INDEX8",at[at.DEPTH_STENCIL=34041]="DEPTH_STENCIL",at[at.RENDERBUFFER_WIDTH=36162]="RENDERBUFFER_WIDTH",at[at.RENDERBUFFER_HEIGHT=36163]="RENDERBUFFER_HEIGHT",at[at.RENDERBUFFER_INTERNAL_FORMAT=36164]="RENDERBUFFER_INTERNAL_FORMAT",at[at.RENDERBUFFER_RED_SIZE=36176]="RENDERBUFFER_RED_SIZE",at[at.RENDERBUFFER_GREEN_SIZE=36177]="RENDERBUFFER_GREEN_SIZE",at[at.RENDERBUFFER_BLUE_SIZE=36178]="RENDERBUFFER_BLUE_SIZE",at[at.RENDERBUFFER_ALPHA_SIZE=36179]="RENDERBUFFER_ALPHA_SIZE",at[at.RENDERBUFFER_DEPTH_SIZE=36180]="RENDERBUFFER_DEPTH_SIZE",at[at.RENDERBUFFER_STENCIL_SIZE=36181]="RENDERBUFFER_STENCIL_SIZE",at[at.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",at[at.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",at[at.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",at[at.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",at[at.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",at[at.DEPTH_ATTACHMENT=36096]="DEPTH_ATTACHMENT",at[at.STENCIL_ATTACHMENT=36128]="STENCIL_ATTACHMENT",at[at.DEPTH_STENCIL_ATTACHMENT=33306]="DEPTH_STENCIL_ATTACHMENT",at[at.NONE=0]="NONE",at[at.FRAMEBUFFER_COMPLETE=36053]="FRAMEBUFFER_COMPLETE",at[at.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",at[at.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",at[at.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",at[at.FRAMEBUFFER_UNSUPPORTED=36061]="FRAMEBUFFER_UNSUPPORTED",at[at.FRAMEBUFFER_BINDING=36006]="FRAMEBUFFER_BINDING",at[at.RENDERBUFFER_BINDING=36007]="RENDERBUFFER_BINDING",at[at.MAX_RENDERBUFFER_SIZE=34024]="MAX_RENDERBUFFER_SIZE",at[at.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",at[at.UNPACK_FLIP_Y_WEBGL=37440]="UNPACK_FLIP_Y_WEBGL",at[at.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",at[at.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL",at[at.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",at[at.BROWSER_DEFAULT_WEBGL=37444]="BROWSER_DEFAULT_WEBGL",at[at.COPY_SRC=1]="COPY_SRC",at[at.COPY_DST=2]="COPY_DST",at[at.SAMPLED=4]="SAMPLED",at[at.STORAGE=8]="STORAGE",at[at.RENDER_ATTACHMENT=16]="RENDER_ATTACHMENT"})(Y||(Y={}));var $=function(){function at(){(0,w.Z)(this,at),this.config=void 0}return(0,T.Z)(at,[{key:"get",value:function(){return this.config}},{key:"set",value:function(qt){this.config=qt}}]),at}(),U=typeof navigator!="undefined"&&/Version\/[\d\.]+.*Safari/.test(navigator.userAgent),W;(function(at){at.Void="Void",at.Boolean="Boolean",at.Float="Float",at.Uint32="Uint32",at.Int32="Int32",at.Vector="Vector",at.Vector2Float="vec2<f32>",at.Vector3Float="vec3<f32>",at.Vector4Float="vec4<f32>",at.Vector2Boolean="vec2<bool>",at.Vector3Boolean="vec3<bool>",at.Vector4Boolean="vec4<bool>",at.Vector2Uint="vec2<u32>",at.Vector3Uint="vec3<u32>",at.Vector4Uint="vec4<u32>",at.Vector2Int="vec2<i32>",at.Vector3Int="vec3<i32>",at.Vector4Int="vec4<i32>",at.Matrix="Matrix",at.Matrix3x3Float="mat3x3<f32>",at.Matrix4x4Float="mat4x4<i32>",at.Struct="Struct",at.FloatArray="Float[]",at.Vector4FloatArray="vec4<f32>[]"})(W||(W={}));var V;(function(at){at.Program="Program",at.Identifier="Identifier",at.VariableDeclaration="VariableDeclaration",at.BlockStatement="BlockStatement",at.ReturnStatement="ReturnStatement",at.FunctionDeclaration="FunctionDeclaration",at.VariableDeclarator="VariableDeclarator",at.AssignmentExpression="AssignmentExpression",at.LogicalExpression="LogicalExpression",at.BinaryExpression="BinaryExpression",at.ArrayExpression="ArrayExpression",at.UnaryExpression="UnaryExpression",at.UpdateExpression="UpdateExpression",at.FunctionExpression="FunctionExpression",at.MemberExpression="MemberExpression",at.ConditionalExpression="ConditionalExpression",at.ExpressionStatement="ExpressionStatement",at.CallExpression="CallExpression",at.NumThreadStatement="NumThreadStatement",at.StorageStatement="StorageStatement",at.DoWhileStatement="DoWhileStatement",at.WhileStatement="WhileStatement",at.ForStatement="ForStatement",at.BreakStatement="BreakStatement",at.ContinueStatement="ContinueStatement",at.IfStatement="IfStatement",at.ImportedFunctionStatement="ImportedFunctionStatement"})(V||(V={}));var H;(function(at){at.Input="Input",at.Output="Output",at.Uniform="Uniform",at.Workgroup="Workgroup",at.UniformConstant="UniformConstant",at.Image="Image",at.StorageBuffer="StorageBuffer",at.Private="Private",at.Function="Function"})(H||(H={}));var Q;(function(at){at.GLSL100="GLSL100",at.GLSL450="GLSL450",at.WGSL="WGSL"})(Q||(Q={}));var tt="__DefineValuePlaceholder__";function rt(){if(typeof document!="undefined")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}function ct(at,Ze){var qt=Object.keys(at);if(Object.getOwnPropertySymbols){var Jt=Object.getOwnPropertySymbols(at);Ze&&(Jt=Jt.filter(function(St){return Object.getOwnPropertyDescriptor(at,St).enumerable})),qt.push.apply(qt,Jt)}return qt}function ot(at){for(var Ze=1;Ze<arguments.length;Ze++){var qt=arguments[Ze]!=null?arguments[Ze]:{};Ze%2?ct(Object(qt),!0).forEach(function(Jt){(0,k.Z)(at,Jt,qt[Jt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(at,Object.getOwnPropertyDescriptors(qt)):ct(Object(qt)).forEach(function(Jt){Object.defineProperty(at,Jt,Object.getOwnPropertyDescriptor(qt,Jt))})}return at}var xt=function(){function at(Ze,qt){(0,w.Z)(this,at),this.engine=Ze,this.configService=qt,this.model=void 0,this.dirty=!0,this.compiledBundle=void 0,this.initPromise=void 0}return(0,T.Z)(at,[{key:"init",value:function(){var qt=this.configService.get(),Jt=qt.canvas,St=qt.engineOptions;this.initPromise=this.engine.init(ot({canvas:Jt||rt(),antialiasing:!1},St))}},{key:"setBundle",value:function(qt){this.compiledBundle=JSON.parse(JSON.stringify(qt))}},{key:"setDispatch",value:function(qt){return this.compiledBundle.context&&(this.compiledBundle.context.dispatch=qt),this}},{key:"setMaxIteration",value:function(qt){return this.compiledBundle.context&&(this.compiledBundle.context.maxIteration=qt),this}},{key:"setBinding",value:function(qt,Jt){var St=this;if(typeof qt=="string"){var Ce=m()(Jt)||P()(Jt)||x()(Jt);if(this.compiledBundle&&this.compiledBundle.context){var kt=this.compiledBundle.context.defines.find(function(dt){return dt.name===qt});if(kt)return kt.value=Jt,this;var Kt=this.compiledBundle.context.uniforms.find(function(dt){return dt.name===qt});Kt&&(Ce?(Kt.data=Jt,Kt.isReferer=!1,Kt.storageClass===H.Uniform?this.model&&this.model.updateUniform(qt,Jt):this.model&&this.model.updateBuffer(qt,Jt)):(Kt.isReferer=!0,Kt.data=Jt))}}else Object.keys(qt).forEach(function(dt){St.setBinding(dt,qt[dt])});return this}},{key:"execute",value:function(){var Ze=(0,b.Z)(A().mark(function Jt(){var St=this,Ce,kt,Kt=arguments;return A().wrap(function(Ut){for(;;)switch(Ut.prev=Ut.next){case 0:if(Ce=Kt.length>0&&Kt[0]!==void 0?Kt[0]:1,!this.dirty){Ut.next=6;break}return this.compiledBundle.context&&(Ce>1?this.compiledBundle.context.maxIteration=Ce:this.compiledBundle.context.maxIteration++),Ut.next=5,this.compile();case 5:this.dirty=!1;case 6:for(this.engine.beginFrame(),this.engine.clear({}),this.compiledBundle.context&&this.compiledBundle.context.uniforms.filter(function(J){var it=J.isReferer;return it}).forEach(function(J){var it=J.data,R=J.name;St.model.confirmInput(it.model,R)}),kt=0;kt<Ce;kt++)this.model.run();return this.engine.endFrame(),Ut.abrupt("return",this);case 12:case"end":return Ut.stop()}},Jt,this)}));function qt(){return Ze.apply(this,arguments)}return qt}()},{key:"getOutput",value:function(){var Ze=(0,b.Z)(A().mark(function Jt(){return A().wrap(function(Ce){for(;;)switch(Ce.prev=Ce.next){case 0:return Ce.abrupt("return",this.model.readData());case 1:case"end":return Ce.stop()}},Jt,this)}));function qt(){return Ze.apply(this,arguments)}return qt}()},{key:"compile",value:function(){var Ze=(0,b.Z)(A().mark(function Jt(){var St,Ce,kt;return A().wrap(function(dt){for(;;)switch(dt.prev=dt.next){case 0:return dt.next=2,this.initPromise;case 2:return St=ot({},this.compiledBundle.context),Ce=this.engine.supportWebGPU?this.engine.useWGSL?Q.WGSL:Q.GLSL450:Q.GLSL100,kt=this.compiledBundle.shaders[Ce],St.defines.filter(function(Ut){return Ut.runtime}).forEach(function(Ut){var J="".concat(tt).concat(Ut.name);kt=kt.replace(J,"".concat(Ut.value))}),St.shader=kt,St.uniforms.forEach(function(Ut){if(!Ut.data&&Ut.storageClass===H.StorageBuffer){var J=1;Ut.type===W.FloatArray?J=1:Ut.type===W.Vector4FloatArray&&(J=4),Ut.data=new Float32Array(St.output.length*J).fill(0)}}),this.compiledBundle.context=St,dt.next=11,this.engine.createComputeModel(this.compiledBundle.context);case 11:this.model=dt.sent;case 12:case"end":return dt.stop()}},Jt,this)}));function qt(){return Ze.apply(this,arguments)}return qt}()}]),at}(),pt=C(481550),Xt=C.n(pt),Ct=function(){function at(Ze,qt){(0,w.Z)(this,at),this.attribute=void 0,this.buffer=void 0;var Jt=qt.buffer,St=qt.offset,Ce=qt.stride,kt=qt.normalized,Kt=qt.size,dt=qt.divisor;this.buffer=Jt,this.attribute={buffer:Jt.get(),offset:St||0,stride:Ce||0,normalized:kt||!1,divisor:dt||0},Kt&&(this.attribute.size=Kt)}return(0,T.Z)(at,[{key:"get",value:function(){return this.attribute}},{key:"updateBuffer",value:function(qt){this.buffer.subData(qt)}},{key:"destroy",value:function(){this.buffer.destroy()}}]),at}(),At,Z,q,bt,_t,nt,vt,It,Pt,Et,Nt,$t,ue,ie,Dt=(At={},(0,k.Z)(At,Y.POINTS,"points"),(0,k.Z)(At,Y.LINES,"lines"),(0,k.Z)(At,Y.LINE_LOOP,"line loop"),(0,k.Z)(At,Y.LINE_STRIP,"line strip"),(0,k.Z)(At,Y.TRIANGLES,"triangles"),(0,k.Z)(At,Y.TRIANGLE_FAN,"triangle fan"),(0,k.Z)(At,Y.TRIANGLE_STRIP,"triangle strip"),At),ne=(Z={},(0,k.Z)(Z,Y.STATIC_DRAW,"static"),(0,k.Z)(Z,Y.DYNAMIC_DRAW,"dynamic"),(0,k.Z)(Z,Y.STREAM_DRAW,"stream"),Z),pe=(q={},(0,k.Z)(q,Y.BYTE,"int8"),(0,k.Z)(q,Y.UNSIGNED_INT,"int16"),(0,k.Z)(q,Y.INT,"int32"),(0,k.Z)(q,Y.UNSIGNED_BYTE,"uint8"),(0,k.Z)(q,Y.UNSIGNED_SHORT,"uint16"),(0,k.Z)(q,Y.UNSIGNED_INT,"uint32"),(0,k.Z)(q,Y.FLOAT,"float"),q),Wt=(bt={},(0,k.Z)(bt,Y.ALPHA,"alpha"),(0,k.Z)(bt,Y.LUMINANCE,"luminance"),(0,k.Z)(bt,Y.LUMINANCE_ALPHA,"luminance alpha"),(0,k.Z)(bt,Y.RGB,"rgb"),(0,k.Z)(bt,Y.RGBA,"rgba"),(0,k.Z)(bt,Y.RGBA4,"rgba4"),(0,k.Z)(bt,Y.RGB5_A1,"rgb5 a1"),(0,k.Z)(bt,Y.RGB565,"rgb565"),(0,k.Z)(bt,Y.DEPTH_COMPONENT,"depth"),(0,k.Z)(bt,Y.DEPTH_STENCIL,"depth stencil"),bt),ae=(_t={},(0,k.Z)(_t,Y.DONT_CARE,"dont care"),(0,k.Z)(_t,Y.NICEST,"nice"),(0,k.Z)(_t,Y.FASTEST,"fast"),_t),Se=(nt={},(0,k.Z)(nt,Y.NEAREST,"nearest"),(0,k.Z)(nt,Y.LINEAR,"linear"),(0,k.Z)(nt,Y.LINEAR_MIPMAP_LINEAR,"mipmap"),(0,k.Z)(nt,Y.NEAREST_MIPMAP_LINEAR,"nearest mipmap linear"),(0,k.Z)(nt,Y.LINEAR_MIPMAP_NEAREST,"linear mipmap nearest"),(0,k.Z)(nt,Y.NEAREST_MIPMAP_NEAREST,"nearest mipmap nearest"),nt),be=(vt={},(0,k.Z)(vt,Y.REPEAT,"repeat"),(0,k.Z)(vt,Y.CLAMP_TO_EDGE,"clamp"),(0,k.Z)(vt,Y.MIRRORED_REPEAT,"mirror"),vt),Qt=(It={},(0,k.Z)(It,Y.NONE,"none"),(0,k.Z)(It,Y.BROWSER_DEFAULT_WEBGL,"browser"),It),we=(Pt={},(0,k.Z)(Pt,Y.NEVER,"never"),(0,k.Z)(Pt,Y.ALWAYS,"always"),(0,k.Z)(Pt,Y.LESS,"less"),(0,k.Z)(Pt,Y.LEQUAL,"lequal"),(0,k.Z)(Pt,Y.GREATER,"greater"),(0,k.Z)(Pt,Y.GEQUAL,"gequal"),(0,k.Z)(Pt,Y.EQUAL,"equal"),(0,k.Z)(Pt,Y.NOTEQUAL,"notequal"),Pt),Tt=(Et={},(0,k.Z)(Et,Y.FUNC_ADD,"add"),(0,k.Z)(Et,Y.MIN_EXT,"min"),(0,k.Z)(Et,Y.MAX_EXT,"max"),(0,k.Z)(Et,Y.FUNC_SUBTRACT,"subtract"),(0,k.Z)(Et,Y.FUNC_REVERSE_SUBTRACT,"reverse subtract"),Et),Le=(Nt={},(0,k.Z)(Nt,Y.ZERO,"zero"),(0,k.Z)(Nt,Y.ONE,"one"),(0,k.Z)(Nt,Y.SRC_COLOR,"src color"),(0,k.Z)(Nt,Y.ONE_MINUS_SRC_COLOR,"one minus src color"),(0,k.Z)(Nt,Y.SRC_ALPHA,"src alpha"),(0,k.Z)(Nt,Y.ONE_MINUS_SRC_ALPHA,"one minus src alpha"),(0,k.Z)(Nt,Y.DST_COLOR,"dst color"),(0,k.Z)(Nt,Y.ONE_MINUS_DST_COLOR,"one minus dst color"),(0,k.Z)(Nt,Y.DST_ALPHA,"dst alpha"),(0,k.Z)(Nt,Y.ONE_MINUS_DST_ALPHA,"one minus dst alpha"),(0,k.Z)(Nt,Y.CONSTANT_COLOR,"constant color"),(0,k.Z)(Nt,Y.ONE_MINUS_CONSTANT_COLOR,"one minus constant color"),(0,k.Z)(Nt,Y.CONSTANT_ALPHA,"constant alpha"),(0,k.Z)(Nt,Y.ONE_MINUS_CONSTANT_ALPHA,"one minus constant alpha"),(0,k.Z)(Nt,Y.SRC_ALPHA_SATURATE,"src alpha saturate"),Nt),Mr=($t={},(0,k.Z)($t,Y.NEVER,"never"),(0,k.Z)($t,Y.ALWAYS,"always"),(0,k.Z)($t,Y.LESS,"less"),(0,k.Z)($t,Y.LEQUAL,"lequal"),(0,k.Z)($t,Y.GREATER,"greater"),(0,k.Z)($t,Y.GEQUAL,"gequal"),(0,k.Z)($t,Y.EQUAL,"equal"),(0,k.Z)($t,Y.NOTEQUAL,"notequal"),$t),Ar=(ue={},(0,k.Z)(ue,Y.ZERO,"zero"),(0,k.Z)(ue,Y.KEEP,"keep"),(0,k.Z)(ue,Y.REPLACE,"replace"),(0,k.Z)(ue,Y.INVERT,"invert"),(0,k.Z)(ue,Y.INCR,"increment"),(0,k.Z)(ue,Y.DECR,"decrement"),(0,k.Z)(ue,Y.INCR_WRAP,"increment wrap"),(0,k.Z)(ue,Y.DECR_WRAP,"decrement wrap"),ue),Ir=(ie={},(0,k.Z)(ie,Y.FRONT,"front"),(0,k.Z)(ie,Y.BACK,"back"),ie),Br=function(){function at(Ze,qt){(0,w.Z)(this,at),this.buffer=void 0;var Jt=qt.data,St=qt.usage,Ce=qt.type;this.buffer=Ze.buffer({data:Jt,usage:ne[St||Y.STATIC_DRAW],type:pe[Ce||Y.UNSIGNED_BYTE]})}return(0,T.Z)(at,[{key:"get",value:function(){return this.buffer}},{key:"destroy",value:function(){}},{key:"subData",value:function(qt){var Jt=qt.data,St=qt.offset;this.buffer.subdata(Jt,St)}}]),at}(),dn=C(974902);function an(at,Ze){var qt=Object.keys(at);if(Object.getOwnPropertySymbols){var Jt=Object.getOwnPropertySymbols(at);Ze&&(Jt=Jt.filter(function(St){return Object.getOwnPropertyDescriptor(at,St).enumerable})),qt.push.apply(qt,Jt)}return qt}function Ln(at){for(var Ze=1;Ze<arguments.length;Ze++){var qt=arguments[Ze]!=null?arguments[Ze]:{};Ze%2?an(Object(qt),!0).forEach(function(Jt){(0,k.Z)(at,Jt,qt[Jt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(at,Object.getOwnPropertyDescriptors(qt)):an(Object(qt)).forEach(function(Jt){Object.defineProperty(at,Jt,Object.getOwnPropertyDescriptor(qt,Jt))})}return at}var Un=`attribute vec3 a_Position;
attribute vec2 a_TexCoord;

varying vec2 v_TexCoord;

void main() {
  gl_Position = vec4(a_Position, 1.0);
  v_TexCoord = a_TexCoord;
}`,Yn=0,xr=!1,qe=function(){function at(Ze,qt){var Jt=this;(0,w.Z)(this,at),this.reGl=Ze,this.context=qt,this.entity=F(),this.texFBO=void 0,this.computeCommand=void 0,this.textureCache={},this.outputTextureName=void 0,this.swapOutputTextureName=void 0,this.compiledPingpong=void 0,this.dynamicPingpong=void 0;var St={};this.context.uniforms.forEach(function(Ut){var J=Ut.name,it=Ut.type,R=Ut.data,M=Ut.isReferer,O=Ut.storageClass;if(O===H.StorageBuffer){if(M)Jt.textureCache[J]={data:void 0},St["".concat(J,"Size")]=function(){return R.compiledBundle.context.output.textureSize};else{Jt.textureCache[J]=Jt.calcDataTexture(J,it,R);var X=Jt.textureCache[J],mt=X.textureWidth,Ft=X.isOutput;St["".concat(J,"Size")]=[mt,mt],Ft&&(Jt.outputTextureName=J,Jt.context.needPingpong&&(Jt.outputTextureName="".concat(J,"Output"),Jt.textureCache[Jt.outputTextureName]=Jt.calcDataTexture(J,it,R)))}St[J]=function(){return xr&&console.log("[".concat(Jt.entity,"]: ").concat(J," ").concat(Jt.textureCache[J].id)),Jt.textureCache[J].texture}}else if(O===H.Uniform){if(R&&(Array.isArray(R)||P()(R))&&R.length>16)throw new Error("invalid data type ".concat(it));St[J]=function(){return Ut.data}}});var Ce=this.getOuputDataTexture(),kt=Ce.textureWidth,Kt=Ce.texelCount;St.u_OutputTextureSize=[kt,kt],St.u_OutputTexelCount=Kt,this.context.output.textureSize=[kt,kt];var dt={attributes:{a_Position:[[-1,1,0],[-1,-1,0],[1,1,0],[1,-1,0]],a_TexCoord:[[0,1],[0,0],[1,1],[1,0]]},frag:`#ifdef GL_FRAGMENT_PRECISION_HIGH
  precision highp float;
#else
  precision mediump float;
#endif
`.concat(this.context.shader),uniforms:St,vert:Un,primitive:"triangle strip",count:4};this.computeCommand=this.reGl(dt)}return(0,T.Z)(at,[{key:"run",value:function(){var qt=this;this.context.maxIteration>1&&this.context.needPingpong&&(this.compiledPingpong=!0),(this.compiledPingpong||this.dynamicPingpong)&&this.swap(),this.texFBO=this.reGl.framebuffer({color:this.getOuputDataTexture().texture}),this.texFBO.use(function(){qt.computeCommand()}),xr&&console.log("[".concat(this.entity,"]: output ").concat(this.getOuputDataTexture().id))}},{key:"readData",value:function(){var Ze=(0,b.Z)(A().mark(function Jt(){var St=this,Ce,kt,Kt,dt,Ut,J,it,R;return A().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:if(this.reGl({framebuffer:this.texFBO})(function(){Ce=St.reGl.read()}),!Ce){O.next=6;break}if(kt=this.getOuputDataTexture(),Kt=kt.originalDataLength,dt=kt.elementsPerTexel,Ut=kt.typedArrayConstructor,J=Ut===void 0?Float32Array:Ut,it=[],dt!==4)for(R=0;R<Ce.length;R+=4)dt===1?it.push(Ce[R]):dt===2?it.push(Ce[R],Ce[R+1]):it.push(Ce[R],Ce[R+1],Ce[R+2]);else it=Ce;return O.abrupt("return",new J(it.slice(0,Kt)));case 6:return O.abrupt("return",new Float32Array);case 7:case"end":return O.stop()}},Jt,this)}));function qt(){return Ze.apply(this,arguments)}return qt}()},{key:"confirmInput",value:function(qt,Jt){var St;this.entity===qt.entity?(this.dynamicPingpong=!0,St=this):St=qt,this.textureCache[Jt].id=St.getOuputDataTexture().id,this.textureCache[Jt].texture=St.getOuputDataTexture().texture,xr&&console.log("[".concat(this.entity,"]: confirm input ").concat(Jt," from model ").concat(St.entity,", ").concat(St.getOuputDataTexture().id))}},{key:"updateUniform",value:function(){}},{key:"updateBuffer",value:function(qt,Jt){var St=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,Ce=this.context.uniforms.find(function(Ut){var J=Ut.name;return J===qt});if(Ce){var kt=this.calcDataTexture(qt,Ce.type,Jt),Kt=kt.texture,dt=kt.data;this.textureCache[qt].data=dt,this.textureCache[qt].texture=Kt}}},{key:"destroy",value:function(){}},{key:"swap",value:function(){if(this.swapOutputTextureName||this.createSwapOutputDataTexture(),this.compiledPingpong){var qt=this.context.output.name;this.textureCache[qt].id=this.getOuputDataTexture().id,this.textureCache[qt].texture=this.getOuputDataTexture().texture}var Jt=this.outputTextureName;this.outputTextureName=this.swapOutputTextureName,this.swapOutputTextureName=Jt,xr&&console.log("[".concat(this.entity,"]: after swap, output ").concat(this.getOuputDataTexture().id))}},{key:"getOuputDataTexture",value:function(){return this.textureCache[this.outputTextureName]}},{key:"createSwapOutputDataTexture",value:function(){var qt=this.cloneDataTexture(this.getOuputDataTexture());this.swapOutputTextureName="".concat(this.entity,"-swap"),this.textureCache[this.swapOutputTextureName]=qt}},{key:"cloneDataTexture",value:function(qt){var Jt=qt.data,St=qt.textureWidth;return Ln(Ln({},qt),{},{id:Yn++,texture:this.reGl.texture({width:St,height:St,data:Jt,type:"float"})})}},{key:"calcDataTexture",value:function(qt,Jt,St){var Ce=1;Jt===W.Vector4FloatArray&&(Ce=4);for(var kt=[],Kt=0;Kt<St.length;Kt+=Ce)Ce===1?kt.push(St[Kt],0,0,0):Ce===2?kt.push(St[Kt],St[Kt+1],0,0):Ce===3?kt.push(St[Kt],St[Kt+1],St[Kt+2],0):Ce===4&&kt.push(St[Kt],St[Kt+1],St[Kt+2],St[Kt+3]);var dt=St.length,Ut=Math.ceil(dt/Ce),J=Math.ceil(Math.sqrt(Ut)),it=J*J;Ut<it&&kt.push.apply(kt,(0,dn.Z)(new Array((it-Ut)*4).fill(0)));var R=this.reGl.texture({width:J,height:J,data:kt,type:"float"});return{id:Yn++,data:kt,originalDataLength:dt,typedArrayConstructor:P()(St)?St.constructor:void 0,textureWidth:J,texture:R,texelCount:Ut,elementsPerTexel:Ce,isOutput:qt===this.context.output.name}}}]),at}(),Cr=function(){function at(Ze,qt){(0,w.Z)(this,at),this.elements=void 0;var Jt=qt.data,St=qt.usage,Ce=qt.type,kt=qt.count;this.elements=Ze.elements({data:Jt,usage:ne[St||Y.STATIC_DRAW],type:pe[Ce||Y.UNSIGNED_BYTE],count:kt})}return(0,T.Z)(at,[{key:"get",value:function(){return this.elements}},{key:"subData",value:function(qt){var Jt=qt.data;this.elements.subdata(Jt)}},{key:"destroy",value:function(){this.elements.destroy()}}]),at}(),tn=function(){function at(Ze,qt){(0,w.Z)(this,at),this.framebuffer=void 0;var Jt=qt.width,St=qt.height,Ce=qt.color,kt=qt.colors,Kt=qt.depth,dt=qt.stencil,Ut={width:Jt,height:St};Array.isArray(kt)&&(Ut.colors=kt.map(function(J){return J.get()})),Ce&&typeof Ce!="boolean"&&(Ut.color=Ce.get()),this.framebuffer=Ze.framebuffer(Ut)}return(0,T.Z)(at,[{key:"get",value:function(){return this.framebuffer}},{key:"destroy",value:function(){this.framebuffer.destroy()}},{key:"resize",value:function(qt){var Jt=qt.width,St=qt.height;this.framebuffer.resize(Jt,St)}}]),at}(),vn=C(671002),_n=C(968630),Pn=C.n(_n);function _r(at){var Ze={};return Object.keys(at).forEach(function(qt){un(qt,at[qt],Ze,"")}),Ze}function un(at,Ze,qt,Jt){if(Ze===null||typeof Ze=="number"||typeof Ze=="boolean"||Array.isArray(Ze)&&typeof Ze[0]=="number"||P()(Ze)||Ze===""||Ze.resize!==void 0){qt["".concat(Jt&&Jt+".").concat(at)]=Ze;return}Pn()(Ze)&&Object.keys(Ze).forEach(function(St){un(St,Ze[St],qt,"".concat(Jt&&Jt+".").concat(at))}),Array.isArray(Ze)&&Ze.forEach(function(St,Ce){Object.keys(St).forEach(function(kt){un(kt,St[kt],qt,"".concat(Jt&&Jt+".").concat(at,"[").concat(Ce,"]"))})})}function An(at,Ze){var qt=Object.keys(at);if(Object.getOwnPropertySymbols){var Jt=Object.getOwnPropertySymbols(at);Ze&&(Jt=Jt.filter(function(St){return Object.getOwnPropertyDescriptor(at,St).enumerable})),qt.push.apply(qt,Jt)}return qt}function on(at){for(var Ze=1;Ze<arguments.length;Ze++){var qt=arguments[Ze]!=null?arguments[Ze]:{};Ze%2?An(Object(qt),!0).forEach(function(Jt){(0,k.Z)(at,Jt,qt[Jt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(at,Object.getOwnPropertyDescriptors(qt)):An(Object(qt)).forEach(function(Jt){Object.defineProperty(at,Jt,Object.getOwnPropertyDescriptor(qt,Jt))})}return at}var Wn=function(){function at(Ze,qt){(0,w.Z)(this,at),this.reGl=void 0,this.drawCommand=void 0,this.uniforms={},this.reGl=Ze;var Jt=qt.vs,St=qt.fs,Ce=qt.defines,kt=qt.attributes,Kt=qt.uniforms,dt=qt.primitive,Ut=qt.count,J=qt.elements,it=qt.depth,R=qt.blend,M=qt.stencil,O=qt.cull,X=qt.instances,mt=qt.scissor,Ft=qt.viewport,Bt={};Kt&&(this.uniforms=_r(Kt),Object.keys(Kt).forEach(function(Xe){Bt[Xe]=Ze.prop(Xe)}));var re={};Object.keys(kt).forEach(function(Xe){re[Xe]=kt[Xe].get()});var De=Ce&&this.generateDefines(Ce)||"",me={attributes:re,frag:`#ifdef GL_FRAGMENT_PRECISION_HIGH
  precision highp float;
#else
  precision mediump float;
#endif
`.concat(De,`
`).concat(St),uniforms:Bt,vert:`
`.concat(De,`
`).concat(Jt),primitive:Dt[dt===void 0?Y.TRIANGLES:dt]};X&&(me.instances=X),Ut&&(me.count=Ut),J&&(me.elements=J.get()),mt&&(me.scissor=mt),Ft&&(me.viewport=Ft),this.initDepthDrawParams({depth:it},me),this.initBlendDrawParams({blend:R},me),this.initStencilDrawParams({stencil:M},me),this.initCullDrawParams({cull:O},me),this.drawCommand=Ze(me)}return(0,T.Z)(at,[{key:"addUniforms",value:function(qt){this.uniforms=on(on({},this.uniforms),_r(qt))}},{key:"draw",value:function(qt){var Jt=on(on({},this.uniforms),_r(qt.uniforms||{})),St={};Object.keys(Jt).forEach(function(Ce){var kt=(0,vn.Z)(Jt[Ce]);kt==="boolean"||kt==="number"||Array.isArray(Jt[Ce])||Jt[Ce].BYTES_PER_ELEMENT?St[Ce]=Jt[Ce]:kt==="string"||(St[Ce]=Jt[Ce].get())}),this.drawCommand(St)}},{key:"destroy",value:function(){}},{key:"initDepthDrawParams",value:function(qt,Jt){var St=qt.depth;St&&(Jt.depth={enable:St.enable===void 0?!0:!!St.enable,mask:St.mask===void 0?!0:!!St.mask,func:we[St.func||Y.LESS],range:St.range||[0,1]})}},{key:"initBlendDrawParams",value:function(qt,Jt){var St=qt.blend;if(St){var Ce=St.enable,kt=St.func,Kt=St.equation,dt=St.color,Ut=dt===void 0?[0,0,0,0]:dt;Jt.blend={enable:!!Ce,func:{srcRGB:Le[kt&&kt.srcRGB||Y.SRC_ALPHA],srcAlpha:Le[kt&&kt.srcAlpha||Y.SRC_ALPHA],dstRGB:Le[kt&&kt.dstRGB||Y.ONE_MINUS_SRC_ALPHA],dstAlpha:Le[kt&&kt.dstAlpha||Y.ONE_MINUS_SRC_ALPHA]},equation:{rgb:Tt[Kt&&Kt.rgb||Y.FUNC_ADD],alpha:Tt[Kt&&Kt.alpha||Y.FUNC_ADD]},color:Ut}}}},{key:"initStencilDrawParams",value:function(qt,Jt){var St=qt.stencil;if(St){var Ce=St.enable,kt=St.mask,Kt=kt===void 0?-1:kt,dt=St.func,Ut=dt===void 0?{cmp:Y.ALWAYS,ref:0,mask:-1}:dt,J=St.opFront,it=J===void 0?{fail:Y.KEEP,zfail:Y.KEEP,zpass:Y.KEEP}:J,R=St.opBack,M=R===void 0?{fail:Y.KEEP,zfail:Y.KEEP,zpass:Y.KEEP}:R;Jt.stencil={enable:!!Ce,mask:Kt,func:on(on({},Ut),{},{cmp:Mr[Ut.cmp]}),opFront:{fail:Ar[it.fail],zfail:Ar[it.zfail],zpass:Ar[it.zpass]},opBack:{fail:Ar[M.fail],zfail:Ar[M.zfail],zpass:Ar[M.zpass]}}}}},{key:"initCullDrawParams",value:function(qt,Jt){var St=qt.cull;if(St){var Ce=St.enable,kt=St.face,Kt=kt===void 0?Y.BACK:kt;Jt.cull={enable:!!Ce,face:Ir[Kt]}}}},{key:"generateDefines",value:function(qt){return Object.keys(qt).map(function(Jt){return"#define ".concat(Jt," ").concat(Number(qt[Jt]))}).join(`
`)}}]),at}(),Cn=function(){function at(Ze,qt){(0,w.Z)(this,at),this.texture=void 0,this.width=void 0,this.height=void 0;var Jt=qt.data,St=qt.type,Ce=St===void 0?Y.UNSIGNED_BYTE:St,kt=qt.width,Kt=qt.height,dt=qt.flipY,Ut=dt===void 0?!1:dt,J=qt.format,it=J===void 0?Y.RGBA:J,R=qt.mipmap,M=R===void 0?!1:R,O=qt.wrapS,X=O===void 0?Y.CLAMP_TO_EDGE:O,mt=qt.wrapT,Ft=mt===void 0?Y.CLAMP_TO_EDGE:mt,Bt=qt.aniso,re=Bt===void 0?0:Bt,De=qt.alignment,me=De===void 0?1:De,Xe=qt.premultiplyAlpha,hr=Xe===void 0?!1:Xe,Ke=qt.mag,Lr=Ke===void 0?Y.NEAREST:Ke,cn=qt.min,$e=cn===void 0?Y.NEAREST:cn,lr=qt.colorSpace,Pr=lr===void 0?Y.BROWSER_DEFAULT_WEBGL:lr;this.width=kt,this.height=Kt;var Dr={width:kt,height:Kt,type:pe[Ce],format:Wt[it],wrapS:be[X],wrapT:be[Ft],mag:Se[Lr],min:Se[$e],alignment:me,flipY:Ut,colorSpace:Qt[Pr],premultiplyAlpha:hr,aniso:re};Jt&&(Dr.data=Jt),typeof M=="number"?Dr.mipmap=ae[M]:typeof M=="boolean"&&(Dr.mipmap=M),this.texture=Ze.texture(Dr)}return(0,T.Z)(at,[{key:"get",value:function(){return this.texture}},{key:"update",value:function(){this.texture._texture.bind()}},{key:"resize",value:function(qt){var Jt=qt.width,St=qt.height;this.texture.resize(Jt,St),this.width=Jt,this.height=St}},{key:"destroy",value:function(){this.texture.destroy()}}]),at}(),On=function(){function at(){var Ze=this;(0,w.Z)(this,at),this.supportWebGPU=!1,this.useWGSL=!1,this.$canvas=void 0,this.gl=void 0,this.inited=void 0,this.createModel=function(){var qt=(0,b.Z)(A().mark(function Jt(St){return A().wrap(function(kt){for(;;)switch(kt.prev=kt.next){case 0:if(!St.uniforms){kt.next=3;break}return kt.next=3,Promise.all(Object.keys(St.uniforms).map(function(){var Kt=(0,b.Z)(A().mark(function dt(Ut){var J;return A().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:if(!(St.uniforms[Ut]&&St.uniforms[Ut].load!==void 0)){R.next=5;break}return R.next=3,St.uniforms[Ut].load();case 3:J=R.sent,St.uniforms[Ut]=J;case 5:case"end":return R.stop()}},dt)}));return function(dt){return Kt.apply(this,arguments)}}()));case 3:return kt.abrupt("return",new Wn(Ze.gl,St));case 4:case"end":return kt.stop()}},Jt)}));return function(Jt){return qt.apply(this,arguments)}}(),this.createAttribute=function(qt){return new Ct(Ze.gl,qt)},this.createBuffer=function(qt){return new Br(Ze.gl,qt)},this.createElements=function(qt){return new Cr(Ze.gl,qt)},this.createTexture2D=function(qt){return new Cn(Ze.gl,qt)},this.createFramebuffer=function(qt){return new tn(Ze.gl,qt)},this.useFramebuffer=function(qt,Jt){Ze.gl({framebuffer:qt?qt.get():null})(Jt)},this.createComputeModel=function(){var qt=(0,b.Z)(A().mark(function Jt(St){return A().wrap(function(kt){for(;;)switch(kt.prev=kt.next){case 0:return kt.abrupt("return",new qe(Ze.gl,St));case 1:case"end":return kt.stop()}},Jt)}));return function(Jt){return qt.apply(this,arguments)}}(),this.clear=function(qt){var Jt=qt.color,St=qt.depth,Ce=qt.stencil,kt=qt.framebuffer,Kt=kt===void 0?null:kt,dt={color:Jt,depth:St,stencil:Ce};dt.framebuffer=Kt===null?Kt:Kt.get(),Ze.gl.clear(dt)},this.setScissor=function(qt){Ze.gl&&Ze.gl._gl&&(qt.enable&&qt.box?(Ze.gl._gl.enable(Y.SCISSOR_TEST),Ze.gl._gl.scissor(qt.box.x,qt.box.y,qt.box.width,qt.box.height)):Ze.gl._gl.disable(Y.SCISSOR_TEST),Ze.gl._refresh())},this.viewport=function(qt){var Jt=qt.x,St=qt.y,Ce=qt.width,kt=qt.height;Ze.gl&&Ze.gl._gl&&(Ze.gl._gl.viewport(Jt,St,Ce,kt),Ze.gl._refresh())},this.readPixels=function(qt){var Jt=qt.framebuffer,St=qt.x,Ce=qt.y,kt=qt.width,Kt=qt.height,dt={x:St,y:Ce,width:kt,height:Kt};return Jt&&(dt.framebuffer=Jt.get()),Ze.gl.read(dt)},this.getCanvas=function(){return Ze.$canvas},this.getGLContext=function(){return Ze.gl._gl},this.destroy=function(){Ze.gl&&(Ze.gl.destroy(),Ze.inited=!1)}}return(0,T.Z)(at,[{key:"init",value:function(){var Ze=(0,b.Z)(A().mark(function Jt(St){return A().wrap(function(kt){for(;;)switch(kt.prev=kt.next){case 0:if(!this.inited){kt.next=2;break}return kt.abrupt("return");case 2:return this.$canvas=St.canvas,kt.next=5,new Promise(function(Kt,dt){Xt()({canvas:St.canvas,attributes:{alpha:!0,antialias:St.antialias,premultipliedAlpha:!0},pixelRatio:1,extensions:["OES_element_index_uint","OES_texture_float","OES_standard_derivatives","angle_instanced_arrays"],optionalExtensions:["EXT_texture_filter_anisotropic","EXT_blend_minmax","WEBGL_depth_texture"],profile:!0,onDone:function(J,it){(J||!it)&&dt(J),Kt(it)}})});case 5:this.gl=kt.sent,this.inited=!0;case 7:case"end":return kt.stop()}},Jt,this)}));function qt(Jt){return Ze.apply(this,arguments)}return qt}()},{key:"isFloatSupported",value:function(){return this.gl.limits.readFloat}},{key:"beginFrame",value:function(){}},{key:"endFrame",value:function(){}}]),at}(),jn=function(){function at(){(0,w.Z)(this,at),this.engine=void 0,this.configService=new $}return(0,T.Z)(at,[{key:"setConfig",value:function(qt){this.configService.set(qt)}},{key:"setEngine",value:function(qt){this.engine=qt}},{key:"createEntity",value:function(){return F()}},{key:"createKernel",value:function(qt){var Jt=new xt(this.engine,this.configService);return typeof qt=="string"?Jt.setBundle(JSON.parse(qt)):Jt.setBundle(qt),Jt.init(),Jt}},{key:"destroy",value:function(){this.engine.destroy()}}],[{key:"create",value:function(){var qt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Jt=new at;return Jt.setConfig(qt),Jt.setEngine(new On),Jt}}]),at}()},909676:function(Ve,z,C){"use strict";C.d(z,{ZP:function(){return wS}});var b={};C.r(b),C.d(b,{GADDI:function(){return ro},Stack:function(){return Oo},breadthFirstSearch:function(){return ne},connectedComponent:function(){return ae},cosineSimilarity:function(){return Bt},default:function(){return Ai},depthFirstSearch:function(){return Mr},detectAllCycles:function(){return dn},detectAllDirectedCycle:function(){return Br},detectAllUndirectedCycle:function(){return Ir},detectCycle:function(){return an},detectDirectedCycle:function(){return Yo},dijkstra:function(){return Yn},findAllPath:function(){return Cr},findShortestPath:function(){return qe},floydWarshall:function(){return vn},getAdjMatrix:function(){return q},getDegree:function(){return be},getInDegree:function(){return Qt},getNeighbors:function(){return Et},getOutDegree:function(){return we},iLouvain:function(){return it},kCore:function(){return M},kMeans:function(){return mt},labelPropagation:function(){return Pn},louvain:function(){return Ut},minimumSpanningTree:function(){return Pr},nodesCosineSimilarity:function(){return De},pageRank:function(){return fe}});var k={};C.r(k),C.d(k,{Line:function(){return Oa},applyMatrix:function(){return qr},compare:function(){return de},distance:function(){return sa},floydWarshall:function(){return ga},fractionToLine:function(){return co},getAdjMatrix:function(){return ya},getBBoxBoundLine:function(){return Ni},getCircleCenterByPoints:function(){return Dn},getCircleIntersectByPoint:function(){return Nr},getDegree:function(){return ei},getEllipseIntersectByPoint:function(){return Sr},getLineIntersect:function(){return or},getPointsCenter:function(){return qi},getRectIntersectByPoint:function(){return Rr},intersectBBox:function(){return yi},invertMatrix:function(){return hn},isPointInPolygon:function(){return Di},isPointsOverlap:function(){return es},isPolygonsIntersect:function(){return ja},itemIntersectByLine:function(){return Ri},lerp:function(){return Fi},lerpArray:function(){return fo},move:function(){return Ma},pointLineDistance:function(){return ni},pointLineSquareDist:function(){return ts},pointRectSquareDist:function(){return no},rotate:function(){return ci},scale:function(){return ua},scaleMatrix:function(){return qn},squareDist:function(){return mo},translate:function(){return di}});var w={};C.r(w),C.d(w,{cloneBesidesImg:function(){return gs},getAnimateCfgWithCallback:function(){return Ls},getBBox:function(){return qa},getComboBBox:function(){return Hs},getLabelPosition:function(){return Do},getLetterWidth:function(){return ds},getLoopCfgs:function(){return ki},getTextSize:function(){return Bs},plainCombosToTrees:function(){return Vs},reconstructTree:function(){return qs},shouldRefreshEdge:function(){return fu},traverseTree:function(){return Qi},traverseTreeUp:function(){return Lo},truncateLabelByLength:function(){return ps}});var T={};C.r(T),C.d(T,{catmullRomToBezier:function(){return G},fillPath:function(){return _o},fillPathByDiff:function(){return fi},formatPath:function(){return zs},intersection:function(){return Na},parsePathArray:function(){return He},parsePathString:function(){return d},pathToAbsolute:function(){return Gt},pathToCurve:function(){return Oe},rectPath:function(){return Bn}});var L={};C.r(L),C.d(L,{easeBack:function(){return Jc},easeBackIn:function(){return Gf},easeBackInOut:function(){return Jc},easeBackOut:function(){return Uf},easeBounce:function(){return mc},easeBounceIn:function(){return jl},easeBounceInOut:function(){return ml},easeBounceOut:function(){return mc},easeCircle:function(){return gl},easeCircleIn:function(){return zl},easeCircleInOut:function(){return gl},easeCircleOut:function(){return Ju},easeCubic:function(){return Lu},easeCubicIn:function(){return vc},easeCubicInOut:function(){return Lu},easeCubicOut:function(){return Qu},easeElastic:function(){return Wf},easeElasticIn:function(){return tf},easeElasticInOut:function(){return Yf},easeElasticOut:function(){return Wf},easeExp:function(){return Ff},easeExpIn:function(){return Bf},easeExpInOut:function(){return Ff},easeExpOut:function(){return pl},easeLinear:function(){return ou},easePoly:function(){return pc},easePolyIn:function(){return Lf},easePolyInOut:function(){return pc},easePolyOut:function(){return Pf},easeQuad:function(){return pu},easeQuadIn:function(){return hc},easeQuadInOut:function(){return pu},easeQuadOut:function(){return qu},easeSin:function(){return kf},easeSinIn:function(){return gc},easeSinInOut:function(){return kf},easeSinOut:function(){return Ks}});var P={};C.r(P),C.d(P,{calculationItemsBBox:function(){return Iv},cloneEvent:function(){return F0},formatPadding:function(){return Th},isNaN:function(){return Cc},isViewportChanged:function(){return z0},processParallelEdges:function(){return G0},uniqueId:function(){return nd}});var p={};C.r(p),C.d(p,{getClosedSpline:function(){return kh},getControlPoint:function(){return Vd},getSpline:function(){return Vv},getStarPath:function(){return om},paddedHull:function(){return $v},pathToPoints:function(){return Rh},pointsToPolygon:function(){return im},roundedHull:function(){return Bh}});var m={};C.r(m),C.d(m,{defaultSubjectColors:function(){return Tm}});var S={};C.r(S),C.d(S,{isForce:function(){return sp}});var x={};C.r(x),C.d(x,{Base:function(){return nc},Circle:function(){return Qm},Ellipse:function(){return ty},Image:function(){return ry},Line:function(){return ay},Marker:function(){return sy},Path:function(){return $h},Polygon:function(){return gy},Polyline:function(){return yy},Rect:function(){return wy},Text:function(){return My}});var g={};C.r(g),C.d(g,{Base:function(){return Fu},Circle:function(){return Ly},Dom:function(){return Ny},Ellipse:function(){return ky},Image:function(){return Fy},Line:function(){return Gy},Marker:function(){return Wy},Path:function(){return Xy},Polygon:function(){return Vy},Polyline:function(){return Zy},Rect:function(){return Jy},Text:function(){return a1}});var A={};C.r(A),C.d(A,{getColorSetsBySubjectColors:function(){return L1},getColorsWithSubjectColor:function(){return tv},mixColor:function(){return Is}});var E={};C.r(E),C.d(E,{arrayToTextureData:function(){return j1},attributesToTextureData:function(){return X1},buildTextureData:function(){return U1},buildTextureDataWithOneEdgeAttr:function(){return W1},buildTextureDataWithTwoEdgeAttr:function(){return Y1},proccessToFunc:function(){return G1},radialLayout:function(){return V1}});var D={};C.r(D),C.d(D,{gpuDetector:function(){return $p}});var F={};C.r(F),C.d(F,{assign:function(){return nl},default:function(){return Lg},defaultI18n:function(){return lv},format:function(){return Og},parse:function(){return Dg},setGlobalDateI18n:function(){return wg},setGlobalDateMasks:function(){return Ig}});var y=C(197582),h=C(413810),Y={getDefaultCfg:function(){return{}},getEvents:function(){return{}},updateCfg:function(e){return Object.assign(this,e),!0},shouldBegin:function(){return!0},shouldUpdate:function(){return!0},shouldEnd:function(){return!0},bind:function(e){var t=this,r=this.events;this.graph=e,(this.type==="drag-canvas"||this.type==="brush-select"||this.type==="lasso-select")&&e.get("canvas").set("draggable",!0),(0,h.each)(r,function(n,a){e.on(a,n)}),document.addEventListener("visibilitychange",function(){t.keydown=!1})},unbind:function(e){var t=this.events,r=e.get("canvas").get("draggable");(this.type==="drag-canvas"||this.type==="brush-select"||this.type==="lasso-select")&&e.get("canvas").set("draggable",!1),(0,h.each)(t,function(n,a){e.off(a,n)}),e.get("canvas").set("draggable",r)},get:function(e){return this[e]},set:function(e,t){return this[e]=t,this}},$=function(){function i(){}return i.registerBehavior=function(e,t){if(!t)throw new Error("please specify handler for this behavior: ".concat(e));var r=(0,h.clone)(Y);Object.assign(r,t);var n=function(o){var s=this;Object.assign(this,this.getDefaultCfg(),o);var u=this.getEvents();this.events=null;var c={};u&&((0,h.each)(u,function(f,l){c[l]=(0,h.wrapBehavior)(s,f)}),this.events=c)};n.prototype=r,i.types[e]=n},i.hasBehavior=function(e){return!!i.types[e]},i.getBehavior=function(e){return i.types[e]},i.types={},i}(),U=$,W=U,V="*",H=function(){function i(){this._events={}}return i.prototype.on=function(e,t,r){return this._events[e]||(this._events[e]=[]),this._events[e].push({callback:t,once:!!r}),this},i.prototype.once=function(e,t){return this.on(e,t,!0)},i.prototype.emit=function(e){for(var t=this,r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var a=this._events[e]||[],o=this._events[V]||[],s=function(u){for(var c=u.length,f=0;f<c;f++)if(u[f]){var l=u[f],_=l.callback,I=l.once;I&&(u.splice(f,1),u.length===0&&delete t._events[e],c--,f--),_.apply(t,r)}};s(a),s(o)},i.prototype.off=function(e,t){if(!e)this._events={};else if(!t)delete this._events[e];else{for(var r=this._events[e]||[],n=r.length,a=0;a<n;a++)r[a].callback===t&&(r.splice(a,1),n--,a--);r.length===0&&delete this._events[e]}return this},i.prototype.getEvents=function(){return this._events},i}(),Q=H,tt=C(935600);function rt(i,e,t){var r=[0,0,0,0,0,0,0,0,0];return tt.fromTranslation(r,t),tt.multiply(i,r,e)}function ct(i,e,t){var r=[0,0,0,0,0,0,0,0,0];return tt.fromRotation(r,t),tt.multiply(i,r,e)}function ot(i,e,t){var r=[0,0,0,0,0,0,0,0,0];return tt.fromScaling(r,t),tt.multiply(i,r,e)}function xt(i,e,t){return tt.multiply(i,t,e)}function pt(i,e){for(var t=i?[].concat(i):[1,0,0,0,1,0,0,0,1],r=0,n=e.length;r<n;r++){var a=e[r];switch(a[0]){case"t":rt(t,t,[a[1],a[2]]);break;case"s":ot(t,t,[a[1],a[2]]);break;case"r":ct(t,t,a[1]);break;case"m":xt(t,t,a[1]);break;default:break}}return t}function Xt(i,e){return i[0]*e[1]-e[0]*i[1]}function Ct(i,e,t){var r=vec2.angle(i,e),n=Xt(i,e)>=0;return t?n?Math.PI*2-r:r:n?r:Math.PI*2-r}function At(i,e,t){return t?(i[0]=e[1],i[1]=-1*e[0]):(i[0]=-1*e[1],i[1]=e[0]),i}var Z=function(e,t){var r=e.nodes,n=e.edges,a=[],o={};if(!r)throw new Error("invalid nodes data!");return r&&r.forEach(function(s,u){o[s.id]=u;var c=[];a.push(c)}),n&&n.forEach(function(s){var u=s.source,c=s.target,f=o[u],l=o[c];!f&&f!==0||!l&&l!==0||(a[f][l]=1,t||(a[l][f]=1))}),a},q=Z,bt=function(e,t){return e===t},_t=function(){function i(e,t){t===void 0&&(t=null),this.value=e,this.next=t}return i.prototype.toString=function(e){return e?e(this.value):"".concat(this.value)},i}(),nt=function(){function i(e){e===void 0&&(e=bt),this.head=null,this.tail=null,this.compare=e}return i.prototype.prepend=function(e){var t=new _t(e,this.head);return this.head=t,this.tail||(this.tail=t),this},i.prototype.append=function(e){var t=new _t(e);return this.head?(this.tail.next=t,this.tail=t,this):(this.head=t,this.tail=t,this)},i.prototype.delete=function(e){if(!this.head)return null;for(var t=null;this.head&&this.compare(this.head.value,e);)t=this.head,this.head=this.head.next;var r=this.head;if(r!==null)for(;r.next;)this.compare(r.next.value,e)?(t=r.next,r.next=r.next.next):r=r.next;return this.compare(this.tail.value,e)&&(this.tail=r),t},i.prototype.find=function(e){var t=e.value,r=t===void 0?void 0:t,n=e.callback,a=n===void 0?void 0:n;if(!this.head)return null;for(var o=this.head;o;){if(a&&a(o.value)||r!==void 0&&this.compare(o.value,r))return o;o=o.next}return null},i.prototype.deleteTail=function(){var e=this.tail;if(this.head===this.tail)return this.head=null,this.tail=null,e;for(var t=this.head;t.next;)t.next.next?t=t.next:t.next=null;return this.tail=t,e},i.prototype.deleteHead=function(){if(!this.head)return null;var e=this.head;return this.head.next?this.head=this.head.next:(this.head=null,this.tail=null),e},i.prototype.fromArray=function(e){var t=this;return e.forEach(function(r){return t.append(r)}),this},i.prototype.toArray=function(){for(var e=[],t=this.head;t;)e.push(t),t=t.next;return e},i.prototype.reverse=function(){for(var e=this.head,t=null,r=null;e;)r=e.next,e.next=t,t=e,e=r;this.tail=this.head,this.head=t},i.prototype.toString=function(e){return e===void 0&&(e=void 0),this.toArray().map(function(t){return t.toString(e)}).toString()},i}(),vt=nt,It=function(){function i(){this.linkedList=new vt}return i.prototype.isEmpty=function(){return!this.linkedList.head},i.prototype.peek=function(){return this.linkedList.head?this.linkedList.head.value:null},i.prototype.enqueue=function(e){this.linkedList.append(e)},i.prototype.dequeue=function(){var e=this.linkedList.deleteHead();return e?e.value:null},i.prototype.toString=function(e){return this.linkedList.toString(e)},i}(),Pt=It,Et=function(e,t,r){t===void 0&&(t=[]);var n=t.filter(function(u){return u.source===e||u.target===e});if(r==="target"){var a=function(c){return c.source===e};return n.filter(a).map(function(u){return u.target})}if(r==="source"){var o=function(c){return c.target===e};return n.filter(o).map(function(u){return u.source})}var s=function(c){return c.source===e?c.target:c.source};return n.map(s)},Nt=function(e,t){return t.filter(function(r){return r.source===e})},$t=function(e,t){return t.filter(function(r){return r.source===e||r.target===e})},ue=function(e){e===void 0&&(e=0);var t="".concat(Math.random()).split(".")[1].substr(0,5),r="".concat(Math.random()).split(".")[1].substr(0,5);return"".concat(e,"-").concat(t).concat(r)};function ie(i){i===void 0&&(i={});var e=i,t=function(){},r=function(){var n={};return function(a){var o=a.next,s=o;return n[s]?!1:(n[s]=!0,!0)}}();return e.allowTraversal=i.allowTraversal||r,e.enter=i.enter||t,e.leave=i.leave||t,e}var Dt=function(e,t,r,n){n===void 0&&(n=!0);var a=ie(r),o=new Pt,s=e.edges,u=s===void 0?[]:s;o.enqueue(t);for(var c="",f=function(){var _=o.dequeue();a.enter({current:_,previous:c}),Et(_,u,n?"target":void 0).forEach(function(I){a.allowTraversal({previous:c,current:_,next:I})&&o.enqueue(I)}),a.leave({current:_,previous:c}),c=_};!o.isEmpty();)f()},ne=Dt,pe=function(e){for(var t=e.nodes,r=t===void 0?[]:t,n=e.edges,a=n===void 0?[]:n,o=[],s={},u=[],c=function I(B){u.push(B),s[B.id]=!0;for(var j=Et(B.id,a),et=function(gt){var Mt=j[gt];if(!s[Mt]){var Ht=r.filter(function(se){return se.id===Mt});Ht.length>0&&I(Ht[0])}},ut=0;ut<j.length;++ut)et(ut)},f=0;f<r.length;f++){var l=r[f];if(!s[l.id]){c(l);for(var _=[];u.length>0;)_.push(u.pop());o.push(_)}}return o},Wt=function(e){for(var t=e.nodes,r=t===void 0?[]:t,n=e.edges,a=n===void 0?[]:n,o=[],s={},u={},c={},f=[],l=0,_=function et(ut){u[ut.id]=l,c[ut.id]=l,l+=1,o.push(ut),s[ut.id]=!0;for(var ft=Et(ut.id,a,"target").filter(function(oe){return r.map(function(_e){return _e.id}).indexOf(oe)>-1}),gt=function(_e){var Ue=ft[_e];if(!u[Ue]&&u[Ue]!==0){var Ne=r.filter(function(Qe){return Qe.id===Ue});Ne.length>0&&et(Ne[0]),c[ut.id]=Math.min(c[ut.id],c[Ue])}else s[Ue]&&(c[ut.id]=Math.min(c[ut.id],u[Ue]))},Mt=0;Mt<ft.length;Mt++)gt(Mt);if(c[ut.id]===u[ut.id]){for(var Ht=[];o.length>0;){var se=o.pop();if(s[se.id]=!1,Ht.push(se),se===ut)break}Ht.length>0&&f.push(Ht)}},I=0,B=r;I<B.length;I++){var j=B[I];!u[j.id]&&u[j.id]!==0&&_(j)}return f};function ae(i,e){return e?Wt(i):pe(i)}var Se=function(e){var t={},r=e.nodes,n=r===void 0?[]:r,a=e.edges,o=a===void 0?[]:a;return n.forEach(function(s){t[s.id]={degree:0,inDegree:0,outDegree:0}}),o.forEach(function(s){t[s.source].degree++,t[s.source].outDegree++,t[s.target].degree++,t[s.target].inDegree++}),t},be=Se,Qt=function(e,t){var r=Se(e);return r[t]?Se(e)[t].inDegree:0},we=function(e,t){var r=Se(e);return r[t]?Se(e)[t].outDegree:0};function Tt(i){i===void 0&&(i={});var e=i,t=function(){},r=function(){var n={};return function(a){var o=a.next;return n[o]?!1:(n[o]=!0,!0)}}();return e.allowTraversal=i.allowTraversal||r,e.enter=i.enter||t,e.leave=i.leave||t,e}function Le(i,e,t,r){r.enter({current:e,previous:t});var n=i.edges,a=n===void 0?[]:n;Et(e,a,"target").forEach(function(o){r.allowTraversal({previous:t,current:e,next:o})&&Le(i,o,e,r)}),r.leave({current:e,previous:t})}function Mr(i,e,t){Le(i,e,"",Tt(t))}var Ar=function(e){var t=null,r=e.nodes,n=r===void 0?[]:r,a={},o={},s={},u={};n.forEach(function(l){o[l.id]=l});for(var c={enter:function(_){var I=_.current,B=_.previous;if(s[I]){t={};for(var j=I,et=B;et!==I;)t[j]=et,j=et,et=a[et];t[j]=et}else s[I]=I,delete o[I],a[I]=B},leave:function(_){var I=_.current;u[I]=I,delete s[I]},allowTraversal:function(_){var I=_.next;return t?!1:!u[I]}};Object.keys(o).length;){var f=Object.keys(o)[0];Mr(e,f,c)}return t},Ir=function(e,t,r){var n,a;r===void 0&&(r=!0);for(var o=[],s=ae(e,!1),u=0,c=s;u<c.length;u++){var f=c[u];if(f.length)for(var l=f[0],_=l.id,I=[l],B=(n={},n[_]=l,n),j=(a={},a[_]=new Set,a);I.length>0;)for(var et=I.pop(),ut=et.id,ft=Et(ut,e.edges),gt=function(se){var oe,_e=ft[se],Ue=e.nodes.find(function(En){return En.id===_e});if(_e===ut)o.push((oe={},oe[_e]=et,oe));else if(!(_e in j))B[_e]=et,I.push(Ue),j[_e]=new Set([et]);else if(!j[ut].has(Ue)){for(var Ne=!0,Qe=[Ue,et],dr=B[ut];j[_e].size&&!j[_e].has(dr)&&(Qe.push(dr),dr!==B[dr.id]);)dr=B[dr.id];if(Qe.push(dr),t&&r?(Ne=!1,Qe.findIndex(function(En){return t.indexOf(En.id)>-1})>-1&&(Ne=!0)):t&&!r&&Qe.findIndex(function(En){return t.indexOf(En.id)>-1})>-1&&(Ne=!1),Ne){for(var nn={},kn=1;kn<Qe.length;kn+=1)nn[Qe[kn-1].id]=Qe[kn];Qe.length&&(nn[Qe[Qe.length-1].id]=Qe[0]),o.push(nn)}j[_e].add(et)}},Mt=0;Mt<ft.length;Mt+=1)gt(Mt)}return o},Br=function(e,t,r){r===void 0&&(r=!0);for(var n=[],a=new Set,o=[],s=[],u={},c={},f=function(dr){for(var nn=[dr];nn.length>0;){var kn=nn.pop();a.has(kn)&&(a.delete(kn),o[kn.id].forEach(function(En){nn.push(En)}),o[kn.id].clear())}},l=function Qe(dr,nn,kn){var En=!1;if(t&&r===!1&&t.indexOf(dr.id)>-1)return En;n.push(dr),a.add(dr);for(var Kr=kn[dr.id],Jn=0;Jn<Kr.length;Jn+=1){var Kn=u[Kr[Jn]];if(Kn===nn){for(var $r={},xn=1;xn<n.length;xn+=1)$r[n[xn-1].id]=n[xn];n.length&&($r[n[n.length-1].id]=n[0]),s.push($r),En=!0}else a.has(Kn)||Qe(Kn,nn,kn)&&(En=!0)}if(En)f(dr);else for(var Jn=0;Jn<Kr.length;Jn+=1){var Kn=u[Kr[Jn]];o[Kn.id].has(dr)||o[Kn.id].add(dr)}return n.pop(),En},_=e.nodes,I=_===void 0?[]:_,B=0;B<I.length;B+=1){var j=I[B],et=j.id;c[et]=B,u[B]=j}if(t&&r)for(var ut=function(dr){var nn=t[dr];c[I[dr].id]=c[nn],c[nn]=0,u[0]=I.find(function(kn){return kn.id===nn}),u[c[I[dr].id]]=I[dr]},B=0;B<t.length;B++)ut(B);for(var ft=function(dr){for(var nn,kn,En=1/0,Kr=0;Kr<dr.length;Kr+=1)for(var Jn=dr[Kr],Kn=0;Kn<Jn.length;Kn++){var $r=c[Jn[Kn].id];$r<En&&(En=$r,kn=Kr)}for(var xn=dr[kn],zn=[],Kr=0;Kr<xn.length;Kr+=1){var Gn=xn[Kr];zn[Gn.id]=[];for(var ia=0,ha=Et(Gn.id,e.edges,"target").filter(function(to){return xn.map(function(Pi){return Pi.id}).indexOf(to)>-1});ia<ha.length;ia++){var Xa=ha[ia];Xa===Gn.id&&!(r===!1&&t.indexOf(Gn.id)>-1)?s.push((nn={},nn[Gn.id]=Gn,nn)):zn[Gn.id].push(c[Xa])}}return{component:xn,adjList:zn,minIdx:En}},gt=0;gt<I.length;){var Mt=I.filter(function(Qe){return c[Qe.id]>=gt}),Ht=Wt({nodes:Mt,edges:e.edges}).filter(function(Qe){return Qe.length>1});if(Ht.length===0)break;var se=ft(Ht),oe=se.minIdx,_e=se.adjList,Ue=se.component;if(Ue.length>1){Ue.forEach(function(Qe){o[Qe.id]=new Set});var Ne=u[oe];if(t&&r&&t.indexOf(Ne.id)===-1)return s;l(Ne,Ne,_e),gt=oe+1}else break}return s},dn=function(e,t,r,n){return n===void 0&&(n=!0),t?Br(e,r,n):Ir(e,r,n)},an=Ar,Ln=function(e,t,r){for(var n=1/0,a,o=0;o<t.length;o++){var s=t[o].id;!r[s]&&e[s]<=n&&(n=e[s],a=t[o])}return a},Un=function(e,t,r,n){var a=e.nodes,o=a===void 0?[]:a,s=e.edges,u=s===void 0?[]:s,c=[],f={},l={},_={};o.forEach(function(gt,Mt){var Ht=gt.id;c.push(Ht),l[Ht]=1/0,Ht===t&&(l[Ht]=0)});for(var I=o.length,B=function(Mt){var Ht=Ln(l,o,f),se=Ht.id;if(f[se]=!0,l[se]===1/0)return"continue";var oe=[];r?oe=Nt(se,u):oe=$t(se,u),oe.forEach(function(_e){var Ue=_e.target,Ne=_e.source,Qe=Ue===se?Ne:Ue,dr=n&&_e[n]?_e[n]:1;l[Qe]>l[Ht.id]+dr?(l[Qe]=l[Ht.id]+dr,_[Qe]=[Ht.id]):l[Qe]===l[Ht.id]+dr&&_[Qe].push(Ht.id)})},j=0;j<I;j++)B(j);_[t]=[t];var et={};for(var ut in l)l[ut]!==1/0&&xr(t,ut,_,et);var ft={};for(var ut in et)ft[ut]=et[ut][0];return{length:l,path:ft,allPath:et}},Yn=Un;function xr(i,e,t,r){if(i===e)return[i];if(r[e])return r[e];for(var n=[],a=0,o=t[e];a<o.length;a++){var s=o[a],u=xr(i,s,t,r);if(!u)return;for(var c=0,f=u;c<f.length;c++){var l=f[c];(0,h.isArray)(l)?n.push((0,y.__spreadArray)((0,y.__spreadArray)([],l,!0),[e],!1)):n.push([l,e])}}return r[e]=n,r[e]}var qe=function(e,t,r,n,a){var o=Yn(e,t,n,a),s=o.length,u=o.path,c=o.allPath;return{length:s[r],path:u[r],allPath:c[r]}},Cr=function(e,t,r,n){var a;if(t===r)return[[t]];var o=e.edges,s=o===void 0?[]:o,u=[t],c=(a={},a[t]=!0,a),f=[],l=[],_=n?Et(t,s,"target"):Et(t,s);for(f.push(_);u.length>0&&f.length>0;){var I=f[f.length-1];if(I.length){var B=I.shift();B&&(u.push(B),c[B]=!0,_=n?Et(B,s,"target"):Et(B,s),f.push(_.filter(function(ut){return!c[ut]})))}else{var j=u.pop();c[j]=!1,f.pop();continue}if(u[u.length-1]===r){var et=u.map(function(ft){return ft});l.push(et);var j=u.pop();c[j]=!1,f.pop()}}return l},tn=function(e,t){for(var r=q(e,t),n=[],a=r.length,o=0;o<a;o+=1){n[o]=[];for(var s=0;s<a;s+=1)o===s?n[o][s]=0:r[o][s]===0||!r[o][s]?n[o][s]=1/0:n[o][s]=r[o][s]}for(var u=0;u<a;u+=1)for(var o=0;o<a;o+=1)for(var s=0;s<a;s+=1)n[o][s]>n[o][u]+n[u][s]&&(n[o][s]=n[o][u]+n[u][s]);return n},vn=tn,_n=function(e,t,r,n){t===void 0&&(t=!1),r===void 0&&(r="weight"),n===void 0&&(n=1e3);var a=e.nodes,o=a===void 0?[]:a,s=e.edges,u=s===void 0?[]:s,c={},f={};o.forEach(function(Mt,Ht){var se=ue();Mt.clusterId=se,c[se]={id:se,nodes:[Mt]},f[Mt.id]={node:Mt,idx:Ht}});var l=q(e,t),_=[],I={};l.forEach(function(Mt,Ht){var se=0,oe=o[Ht].id;I[oe]={},Mt.forEach(function(_e,Ue){if(_e){se+=_e;var Ne=o[Ue].id;I[oe][Ne]=_e}}),_.push(se)});for(var B=0,j=function(){var Ht=!1;if(o.forEach(function(se){var oe={};Object.keys(I[se.id]).forEach(function(En){var Kr=I[se.id][En],Jn=f[En].node,Kn=Jn.clusterId;oe[Kn]||(oe[Kn]=0),oe[Kn]+=Kr});var _e=-1/0,Ue=[];if(Object.keys(oe).forEach(function(En){_e<oe[En]?(_e=oe[En],Ue=[En]):_e===oe[En]&&Ue.push(En)}),!(Ue.length===1&&Ue[0]===se.clusterId)){var Ne=Ue.indexOf(se.clusterId);if(Ne>=0&&Ue.splice(Ne,1),Ue&&Ue.length){Ht=!0;var Qe=c[se.clusterId],dr=Qe.nodes.indexOf(se);Qe.nodes.splice(dr,1);var nn=Math.floor(Math.random()*Ue.length),kn=c[Ue[nn]];kn.nodes.push(se),se.clusterId=kn.id}}}),!Ht)return"break";B++};B<n;){var et=j();if(et==="break")break}Object.keys(c).forEach(function(Mt){var Ht=c[Mt];(!Ht.nodes||!Ht.nodes.length)&&delete c[Mt]});var ut=[],ft={};u.forEach(function(Mt){var Ht=Mt.source,se=Mt.target,oe=Mt[r]||1,_e=f[Ht].node.clusterId,Ue=f[se].node.clusterId,Ne="".concat(_e,"---").concat(Ue);if(ft[Ne])ft[Ne].weight+=oe,ft[Ne].count++;else{var Qe={source:_e,target:Ue,weight:oe,count:1};ft[Ne]=Qe,ut.push(Qe)}});var gt=[];return Object.keys(c).forEach(function(Mt){gt.push(c[Mt])}),{clusters:gt,clusterEdges:ut}},Pn=_n,_r=function(){function i(e){this.arr=e}return i.prototype.getArr=function(){return this.arr||[]},i.prototype.add=function(e){var t,r=e.arr;if(!(!((t=this.arr)===null||t===void 0)&&t.length))return new i(r);if(!(r!=null&&r.length))return new i(this.arr);if(this.arr.length===r.length){var n=[];for(var a in this.arr)n[a]=this.arr[a]+r[a];return new i(n)}},i.prototype.subtract=function(e){var t,r=e.arr;if(!(!((t=this.arr)===null||t===void 0)&&t.length))return new i(r);if(!(r!=null&&r.length))return new i(this.arr);if(this.arr.length===r.length){var n=[];for(var a in this.arr)n[a]=this.arr[a]-r[a];return new i(n)}},i.prototype.avg=function(e){var t=[];if(e!==0)for(var r in this.arr)t[r]=this.arr[r]/e;return new i(t)},i.prototype.negate=function(){var e=[];for(var t in this.arr)e[t]=-this.arr[t];return new i(e)},i.prototype.squareEuclideanDistance=function(e){var t,r=e.arr;if(!(!((t=this.arr)===null||t===void 0)&&t.length)||!(r!=null&&r.length))return 0;if(this.arr.length===r.length){var n=0;for(var a in this.arr)n+=Math.pow(this.arr[a]-e.arr[a],2);return n}},i.prototype.euclideanDistance=function(e){var t,r=e.arr;if(!(!((t=this.arr)===null||t===void 0)&&t.length)||!(r!=null&&r.length))return 0;if(this.arr.length===r.length){var n=0;for(var a in this.arr)n+=Math.pow(this.arr[a]-e.arr[a],2);return Math.sqrt(n)}else console.error("The two vectors are unequal in length.")},i.prototype.normalize=function(){var e=[],t=(0,h.clone)(this.arr);t.sort(function(o,s){return o-s});var r=t[t.length-1],n=t[0];for(var a in this.arr)e[a]=(this.arr[a]-n)/(r-n);return new i(e)},i.prototype.norm2=function(){var e;if(!(!((e=this.arr)===null||e===void 0)&&e.length))return 0;var t=0;for(var r in this.arr)t+=Math.pow(this.arr[r],2);return Math.sqrt(t)},i.prototype.dot=function(e){var t,r=e.arr;if(!(!((t=this.arr)===null||t===void 0)&&t.length)||!(r!=null&&r.length))return 0;if(this.arr.length===r.length){var n=0;for(var a in this.arr)n+=this.arr[a]*e.arr[a];return n}else console.error("The two vectors are unequal in length.")},i.prototype.equal=function(e){var t,r=e.arr;if(((t=this.arr)===null||t===void 0?void 0:t.length)!==(r==null?void 0:r.length))return!1;for(var n in this.arr)if(this.arr[n]!==r[n])return!1;return!0},i}(),un=_r,An=/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2})$/,on=/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})$/,Wn=function(e,t){e===void 0&&(e=[]),t===void 0&&(t=100);var r={};e.forEach(function(a){a.properties&&Object.keys(a.properties).forEach(function(o){if(o==="id"||!"".concat(a.properties[o]).match(An)&&!"".concat(a.properties[o]).match(on)&&isNaN(Number(a.properties[o]))){r.hasOwnProperty(o)&&delete r[o];return}r.hasOwnProperty(o)?r[o]+=1:r[o]=1})});var n=Object.keys(r).sort(function(a,o){return r[o]-r[a]});return n.length<t?n:n.slice(0,t)},Cn=function(e,t){return t.map(function(r){return e.hasOwnProperty(r)?e[r]:0})},On=function(e){for(var t=Wn(e),r=[],n=0;n<e.length;n++)r[n]=Cn(e[n].properties,t);return r},jn=function(e,t){t===void 0&&(t=void 0);var r=[];return e.forEach(function(n){t===void 0&&r.push(n),n[t]!==void 0&&r.push(n[t])}),r},at={getAllSortProperties:Wn,getPropertyWeight:On,getAllProperties:jn},Ze;(function(i){i.EuclideanDistance="euclideanDistance"})(Ze||(Ze={}));var qt=function(e,t,r){var n=[];t!=null&&t.length?n=t:(e.forEach(function(o){n=n.concat(Object.keys(o))}),n=(0,h.uniq)(n));var a={};return n.forEach(function(o){var s=[];e.forEach(function(u){u[o]!==void 0&&u[o]!==""&&s.push(u[o])}),s.length&&!(r!=null&&r.includes(o))&&(a[o]=(0,h.uniq)(s))}),a},Jt=function(e,t,r){var n=qt(e,t,r),a=[];if(!Object.keys(n).length)return a;var o=Object.values(n),s=o.every(function(u){return u.every(function(c){return typeof c=="number"})});return e.forEach(function(u,c){var f=[];Object.keys(n).forEach(function(l){var _=u[l],I=n[l],B=I.findIndex(function(ut){return _===ut}),j=[];if(s)j.push(_);else for(var et=0;et<I.length;et++)et===B?j.push(1):j.push(0);f=f.concat(j)}),a[c]=f}),a},St=function(e,t,r,n){r===void 0&&(r=Ze.EuclideanDistance);var a=0;switch(r){case Ze.EuclideanDistance:a=new un(e).euclideanDistance(new un(t));break;default:break}return a},Ce={getAllKeyValueMap:qt,oneHot:Jt,getDistance:St},kt=function(e,t,r,n){for(var a=t.length,o=2*n,s=0,u=0;u<a;u++)for(var c=e[u].clusterId,f=0;f<a;f++){var l=e[f].clusterId;if(c===l){var _=t[u][f]||0,I=r[u]||0,B=r[f]||0;s+=_-I*B/o}}return s*=1/o,s},Kt=function(e,t){e===void 0&&(e=[]);for(var r=e.length,n=new un([]),a=0;a<r;a++)n=n.add(new un(t[a]));var o=n.avg(r);o.normalize();for(var s=0,a=0;a<r;a++){var u=new un(t[a]),c=u.squareEuclideanDistance(o);s+=c}var f=[];e.forEach(function(){f.push([])});for(var a=0;a<r;a++){var u=new un(t[a]);e[a].clusterInertial=0;for(var l=0;l<r;l++){if(a===l){f[a][l]=0;continue}var _=new un(t[l]);f[a][l]=u.squareEuclideanDistance(_),e[a].clusterInertial+=f[a][l]}}for(var I=0,B=2*r*s,a=0;a<r;a++)for(var j=e[a].clusterId,l=0;l<r;l++){var et=e[l].clusterId;if(!(a===l||j!==et)){var ut=e[a].clusterInertial*e[l].clusterInertial/Math.pow(B,2)-f[a][l]/B;I+=ut}}return Number(I.toFixed(4))},dt=function(e,t,r,n,a,o,s,u,c){t===void 0&&(t=!1),r===void 0&&(r="weight"),n===void 0&&(n=1e-4),a===void 0&&(a=!1),o===void 0&&(o=void 0),s===void 0&&(s=[]),u===void 0&&(u=["id"]),c===void 0&&(c=1);var f=e.nodes,l=f===void 0?[]:f,_=e.edges,I=_===void 0?[]:_,B=[];if(a){l.forEach(function($r,xn){$r.properties=$r.properties||{},$r.originIndex=xn});var j=[];l.every(function($r){return $r.hasOwnProperty("nodeType")})&&(j=Array.from(new Set(l.map(function($r){return $r.nodeType}))),l.forEach(function($r){$r.properties.nodeType=j.findIndex(function(xn){return xn===$r.nodeType})}));var et=jn(l,o);B=Jt(et,s,u)}var ut=1,ft={},gt={};l.forEach(function($r,xn){var zn=String(ut++);$r.clusterId=zn,ft[zn]={id:zn,nodes:[$r]},gt[$r.id]={node:$r,idx:xn}});var Mt=q(e,t),Ht=[],se={},oe=0;Mt.forEach(function($r,xn){var zn=0,Gn=l[xn].id;se[Gn]={},$r.forEach(function(ia,ha){if(ia){zn+=ia;var Xa=l[ha].id;se[Gn][Xa]=ia,oe+=ia}}),Ht.push(zn)}),oe/=2;for(var _e=1/0,Ue=1/0,Ne=0,Qe=[],dr={};;){a&&l.every(function($r){return $r.hasOwnProperty("properties")})?_e=kt(l,Mt,Ht,oe)+Kt(l,B)*c:_e=kt(l,Mt,Ht,oe),Ne===0&&(Ue=_e,Qe=l,dr=ft);var nn=_e>0&&_e>Ue&&_e-Ue<n;if(_e>Ue&&(Qe=l.map(function($r){return{node:$r,clusterId:$r.clusterId}}),dr=(0,h.clone)(ft),Ue=_e),nn||Ne>100)break;Ne++,Object.keys(ft).forEach(function($r){var xn=0;I.forEach(function(zn){var Gn=zn.source,ia=zn.target,ha=gt[Gn].node.clusterId,Xa=gt[ia].node.clusterId;(ha===$r&&Xa!==$r||Xa===$r&&ha!==$r)&&(xn=xn+(zn[r]||1))}),ft[$r].sumTot=xn}),l.forEach(function($r,xn){var zn=ft[$r.clusterId],Gn=0,ia,ha=Ht[xn]/(2*oe),Xa=0,si=zn.nodes;si.forEach(function(Ms){var _s=gt[Ms.id].idx;Xa+=Mt[xn][_s]||0});var to=Xa-zn.sumTot*ha,Pi=si.filter(function(Ms){return Ms.id!==$r.id}),eo=[];Pi.forEach(function(Ms,_s){eo[_s]=B[Ms.originIndex]});var po=Kt(Pi,B)*c,Vo=se[$r.id];if(Object.keys(Vo).forEach(function(Ms){var _s=gt[Ms].node,wu=_s.clusterId;if(wu!==$r.clusterId){var js=ft[wu],eu=js.nodes;if(!(!eu||!eu.length)){var mi=0;eu.forEach(function(wi){var Ti=gt[wi.id].idx;mi+=Mt[xn][Ti]||0});var Zi=mi-js.sumTot*ha,pi=eu.concat([$r]),Ki=[];pi.forEach(function(wi,Ti){Ki[Ti]=B[wi.originIndex]});var To=Kt(pi,B)*c,Ia=Zi-to;a&&(Ia=Zi+To-(to+po)),Ia>Gn&&(Gn=Ia,ia=js)}}}),Gn>0){ia.nodes.push($r);var Ro=$r.clusterId;$r.clusterId=ia.id;var Uu=zn.nodes.indexOf($r);zn.nodes.splice(Uu,1);var Ss=0,Wu=0;I.forEach(function(Ms){var _s=Ms.source,wu=Ms.target,js=gt[_s].node.clusterId,eu=gt[wu].node.clusterId;(js===ia.id&&eu!==ia.id||eu===ia.id&&js!==ia.id)&&(Ss=Ss+(Ms[r]||1)),(js===Ro&&eu!==Ro||eu===Ro&&js!==Ro)&&(Wu=Wu+(Ms[r]||1))}),ia.sumTot=Ss,zn.sumTot=Wu}})}var kn={},En=0;Object.keys(dr).forEach(function($r){var xn=dr[$r];if(!xn.nodes||!xn.nodes.length){delete dr[$r];return}var zn=String(En+1);zn!==$r&&(xn.id=zn,xn.nodes=xn.nodes.map(function(Gn){return{id:Gn.id,clusterId:zn}}),dr[zn]=xn,kn[$r]=zn,delete dr[$r],En++)}),Qe.forEach(function($r){var xn=$r.node,zn=$r.clusterId;xn&&(xn.clusterId=zn,xn.clusterId&&kn[xn.clusterId]&&(xn.clusterId=kn[xn.clusterId]))});var Kr=[],Jn={};I.forEach(function($r){var xn=$r.source,zn=$r.target,Gn=$r[r]||1,ia=gt[xn].node.clusterId,ha=gt[zn].node.clusterId;if(!(!ia||!ha)){var Xa="".concat(ia,"---").concat(ha);if(Jn[Xa])Jn[Xa].weight+=Gn,Jn[Xa].count++;else{var si={source:ia,target:ha,weight:Gn,count:1};Jn[Xa]=si,Kr.push(si)}}});var Kn=[];return Object.keys(dr).forEach(function($r){Kn.push(dr[$r])}),{clusters:Kn,clusterEdges:Kr}},Ut=dt,J=function(e,t,r,n,a,o,s,u){return t===void 0&&(t=!1),r===void 0&&(r="weight"),n===void 0&&(n=1e-4),a===void 0&&(a=void 0),o===void 0&&(o=[]),s===void 0&&(s=["id"]),u===void 0&&(u=1),Ut(e,t,r,n,!0,a,o,s,u)},it=J,R=function(e,t){var r;t===void 0&&(t=1);for(var n=(0,h.clone)(e),a=n.nodes,o=a===void 0?[]:a,s=n.edges,u=s===void 0?[]:s,c=function(){var _=be({nodes:o,edges:u}),I=Object.keys(_);I.sort(function(et,ut){var ft,gt;return((ft=_[et])===null||ft===void 0?void 0:ft.degree)-((gt=_[ut])===null||gt===void 0?void 0:gt.degree)});var B=I[0];if(!o.length||((r=_[B])===null||r===void 0?void 0:r.degree)>=t)return"break";var j=o.findIndex(function(et){return et.id===B});o.splice(j,1),u=u.filter(function(et){return!(et.source===B||et.target===B)})};;){var f=c();if(f==="break")break}return{nodes:o,edges:u}},M=R,O=function(e,t,r){var n=[];switch(e){case Ze.EuclideanDistance:n=t[r];break;default:n=[];break}return n},X=function(e,t,r,n,a,o){t===void 0&&(t=3),r===void 0&&(r=void 0),n===void 0&&(n=[]),a===void 0&&(a=["id"]),o===void 0&&(o=Ze.EuclideanDistance);var s=e.nodes,u=s===void 0?[]:s,c=e.edges,f=c===void 0?[]:c,l={clusters:[{id:"0",nodes:u}],clusterEdges:[]};if(o===Ze.EuclideanDistance&&!u.every(function(zn){return zn.hasOwnProperty(r)}))return l;var _=[],I=[];if(o===Ze.EuclideanDistance&&(_=jn(u,r),I=Jt(_,n,a)),!I.length)return l;for(var B=(0,h.uniq)(I.map(function(zn){return zn.join("")})),j=Math.min(t,u.length,B.length),et=0;et<u.length;et++)u[et].originIndex=et;for(var ut=[],ft=[],gt=[],et=0;et<j;et++)if(et===0){var Mt=Math.floor(Math.random()*u.length);switch(o){case Ze.EuclideanDistance:ut[et]=I[Mt];break;default:ut[et]=[];break}ft.push(Mt),gt[et]=[u[Mt]],u[Mt].clusterId=String(et)}else{for(var Ht=-1/0,se=0,oe=function(ia){if(!ft.includes(ia)){for(var ha=0,Xa=0;Xa<ut.length;Xa++){var si=0;switch(o){case Ze.EuclideanDistance:si=St(I[u[ia].originIndex],ut[Xa],o);break;default:break}ha+=si}var to=ha/ut.length;to>Ht&&!ut.find(function(Pi){return(0,h.isEqual)(Pi,O(o,I,u[ia].originIndex))})&&(Ht=to,se=ia)}},_e=0;_e<u.length;_e++)oe(_e);ut[et]=O(o,I,se),ft.push(se),gt[et]=[u[se]],u[se].clusterId=String(et)}for(var Ue=0;;){for(var et=0;et<u.length;et++){var Ne=0,Qe=1/0;if(!(Ue===0&&ft.includes(et))){for(var dr=0;dr<ut.length;dr++){var nn=0;switch(o){case Ze.EuclideanDistance:nn=St(I[et],ut[dr],o);break;default:break}nn<Qe&&(Qe=nn,Ne=dr)}if(u[et].clusterId!==void 0)for(var kn=gt[Number(u[et].clusterId)].length-1;kn>=0;kn--)gt[Number(u[et].clusterId)][kn].id===u[et].id&&gt[Number(u[et].clusterId)].splice(kn,1);u[et].clusterId=String(Ne),gt[Ne].push(u[et])}}for(var En=!1,et=0;et<gt.length;et++){for(var Kr=gt[et],Jn=new un([]),dr=0;dr<Kr.length;dr++)Jn=Jn.add(new un(I[Kr[dr].originIndex]));var Kn=Jn.avg(Kr.length);Kn.equal(new un(ut[et]))||(En=!0,ut[et]=Kn.getArr())}if(Ue++,u.every(function(zn){return zn.clusterId!==void 0})&&En||Ue>=1e3)break}var $r=[],xn={};return f.forEach(function(zn){var Gn,ia,ha=zn.source,Xa=zn.target,si=(Gn=u.find(function(po){return po.id===ha}))===null||Gn===void 0?void 0:Gn.clusterId,to=(ia=u.find(function(po){return po.id===Xa}))===null||ia===void 0?void 0:ia.clusterId,Pi="".concat(si,"---").concat(to);if(xn[Pi])xn[Pi].count++;else{var eo={source:si,target:to,count:1};xn[Pi]=eo,$r.push(eo)}}),{clusters:gt,clusterEdges:$r}},mt=X,Ft=function(e,t){var r=new un(t),n=r.norm2(),a=new un(e),o=a.norm2(),s=r.dot(a),u=n*o,c=u?s/u:0;return c},Bt=Ft,re=function(e,t,r,n,a){e===void 0&&(e=[]),r===void 0&&(r=void 0),n===void 0&&(n=[]),a===void 0&&(a=[]);var o=(0,h.clone)(e.filter(function(_){return _.id!==t.id})),s=e.findIndex(function(_){return _.id===t.id}),u=jn(e,r),c=Jt(u,n,a),f=c[s],l=[];return o.forEach(function(_,I){if(_.id!==t.id){var B=c[I],j=Bt(B,f);l.push(j),_.cosineSimilarity=j}}),o.sort(function(_,I){return I.cosineSimilarity-_.cosineSimilarity}),{allCosineSimilarity:l,similarNodes:o}},De=re,me=function(){function i(e){this.count=e.length,this.parent={};for(var t=0,r=e;t<r.length;t++){var n=r[t];this.parent[n]=n}}return i.prototype.find=function(e){for(;this.parent[e]!==e;)e=this.parent[e];return e},i.prototype.union=function(e,t){var r=this.find(e),n=this.find(t);r!==n&&(r<n?(this.parent[t]!==t&&this.union(this.parent[t],e),this.parent[t]=this.parent[e]):(this.parent[e]!==e&&this.union(this.parent[e],t),this.parent[e]=this.parent[t]))},i.prototype.connected=function(e,t){return this.find(e)===this.find(t)},i}(),Xe=me,hr=function(e,t){return e-t},Ke=function(){function i(e){e===void 0&&(e=hr),this.compareFn=e,this.list=[]}return i.prototype.getLeft=function(e){return 2*e+1},i.prototype.getRight=function(e){return 2*e+2},i.prototype.getParent=function(e){return e===0?null:Math.floor((e-1)/2)},i.prototype.isEmpty=function(){return this.list.length<=0},i.prototype.top=function(){return this.isEmpty()?void 0:this.list[0]},i.prototype.delMin=function(){var e=this.top(),t=this.list.pop();return this.list.length>0&&(this.list[0]=t,this.moveDown(0)),e},i.prototype.insert=function(e){if(e!==null){this.list.push(e);var t=this.list.length-1;return this.moveUp(t),!0}return!1},i.prototype.moveUp=function(e){for(var t=this.getParent(e);e&&e>0&&this.compareFn(this.list[t],this.list[e])>0;){var r=this.list[t];this.list[t]=this.list[e],this.list[e]=r,e=t,t=this.getParent(e)}},i.prototype.moveDown=function(e){var t,r=e,n=this.getLeft(e),a=this.getRight(e),o=this.list.length;n!==null&&n<o&&this.compareFn(this.list[r],this.list[n])>0?r=n:a!==null&&a<o&&this.compareFn(this.list[r],this.list[a])>0&&(r=a),e!==r&&(t=[this.list[r],this.list[e]],this.list[e]=t[0],this.list[r]=t[1],this.moveDown(r))},i}(),Lr=Ke,cn=function(e,t){var r=[],n=e.nodes,a=n===void 0?[]:n,o=e.edges,s=o===void 0?[]:o;if(a.length===0)return r;var u=a[0],c=new Set;c.add(u);var f=function(et,ut){return t?et.weight-ut.weight:0},l=new Lr(f);for($t(u.id,s).forEach(function(j){l.insert(j)});!l.isEmpty();){var _=l.delMin(),I=_.source,B=_.target;c.has(I)&&c.has(B)||(r.push(_),c.has(I)||(c.add(I),$t(I,s).forEach(function(j){l.insert(j)})),c.has(B)||(c.add(B),$t(B,s).forEach(function(j){l.insert(j)})))}return r},$e=function(e,t){var r=[],n=e.nodes,a=n===void 0?[]:n,o=e.edges,s=o===void 0?[]:o;if(a.length===0)return r;var u=s.map(function(I){return I});t&&u.sort(function(I,B){return I.weight-B.weight});for(var c=new Xe(a.map(function(I){return I.id}));u.length>0;){var f=u.shift(),l=f.source,_=f.target;c.connected(l,_)||(r.push(f),c.union(l,_))}return r},lr=function(e,t,r){var n={prim:cn,kruskal:$e};return r?n[r](e,t):$e(e,t)},Pr=lr,Dr=function(e,t,r){typeof t!="number"&&(t=1e-6),typeof r!="number"&&(r=.85);for(var n=1,a=0,o=1e3,s=e.nodes,u=s===void 0?[]:s,c=e.edges,f=c===void 0?[]:c,l=u.length,_,I={},B={},j=0;j<l;++j){var et=u[j],ut=et.id;I[ut]=1/l,B[ut]=1/l}for(var ft=be(e);o>0&&n>t;){a=0;for(var j=0;j<l;++j){var et=u[j],ut=et.id;if(_=0,ft[et.id].inDegree===0)I[ut]=0;else{for(var gt=Et(ut,f,"source"),Mt=0;Mt<gt.length;++Mt){var Ht=gt[Mt],se=ft[Ht].outDegree;se>0&&(_+=B[Ht]/se)}I[ut]=r*_,a+=I[ut]}}a=(1-a)/l,n=0;for(var j=0;j<l;++j){var et=u[j],ut=et.id;_=I[ut]+a,n+=Math.abs(_-B[ut]),B[ut]=_}o-=1}return B},fe=Dr,jt=-1,ve=-1,Ie="-1",ye="-1",ze=-1,sr="-1",pr=function(){function i(e,t,r,n){e===void 0&&(e=jt),t===void 0&&(t=ve),r===void 0&&(r=ve),n===void 0&&(n=Ie),this.id=e,this.from=t,this.to=r,this.label=n}return i}(),en=function(){function i(e,t){e===void 0&&(e=ve),t===void 0&&(t=ye),this.id=e,this.label=t,this.edges=[],this.edgeMap={}}return i.prototype.addEdge=function(e){this.edges.push(e),this.edgeMap[e.id]=e},i}(),Fn=function(){function i(e,t,r){e===void 0&&(e=ve),t===void 0&&(t=!0),r===void 0&&(r=!1),this.id=e,this.edgeIdAutoIncrease=t,this.edges=[],this.nodes=[],this.nodeMap={},this.edgeMap={},this.nodeLabelMap={},this.edgeLabelMap={},this.counter=0,this.directed=r}return i.prototype.getNodeNum=function(){return this.nodes.length},i.prototype.addNode=function(e,t){if(!this.nodeMap[e]){var r=new en(e,t);this.nodes.push(r),this.nodeMap[e]=r,this.nodeLabelMap[t]||(this.nodeLabelMap[t]=[]),this.nodeLabelMap[t].push(e)}},i.prototype.addEdge=function(e,t,r,n){if((this.edgeIdAutoIncrease||e===void 0)&&(e=this.counter++),!(this.nodeMap[t]&&this.nodeMap[r]&&this.nodeMap[r].edgeMap[e])){var a=new pr(e,t,r,n);if(this.edges.push(a),this.edgeMap[e]=a,this.nodeMap[t].addEdge(a),this.edgeLabelMap[n]||(this.edgeLabelMap[n]=[]),this.edgeLabelMap[n].push(a),!this.directed){var o=new pr(e,r,t,n);this.nodeMap[r].addEdge(o),this.edgeLabelMap[n].push(o)}}},i}(),ln=function(){function i(e,t,r,n,a){this.fromNode=e,this.toNode=t,this.nodeEdgeNodeLabel={nodeLabel1:r||ye,edgeLabel:n||Ie,nodeLabel2:a||ye}}return i.prototype.equalTo=function(e){return this.fromNode===e.formNode&&this.toNode===e.toNode&&this.nodeEdgeNodeLabel===e.nodeEdgeNodeLabel},i.prototype.notEqualTo=function(e){return!this.equalTo(e)},i}(),ea=function(){function i(){this.rmpath=[],this.dfsEdgeList=[]}return i.prototype.equalTo=function(e){var t=this.dfsEdgeList.length,r=e.length;if(t!==r)return!1;for(var n=0;n<t;n++)if(this.dfsEdgeList[n]!==e[n])return!1;return!0},i.prototype.notEqualTo=function(e){return!this.equalTo(e)},i.prototype.pushBack=function(e,t,r,n,a){return this.dfsEdgeList.push(new ln(e,t,r,n,a)),this.dfsEdgeList},i.prototype.toGraph=function(e,t){e===void 0&&(e=ze),t===void 0&&(t=!1);var r=new Fn(e,!0,t);return this.dfsEdgeList.forEach(function(n){var a=n.fromNode,o=n.toNode,s=n.nodeEdgeNodeLabel,u=s.nodeLabel1,c=s.edgeLabel,f=s.nodeLabel2;u!==ye&&r.addNode(a,u),f!==ye&&r.addNode(o,f),u!==ye&&f!==u&&r.addEdge(void 0,a,o,c)}),r},i.prototype.buildRmpath=function(){this.rmpath=[];for(var e=void 0,t=this.dfsEdgeList.length,r=t-1;r>=0;r--){var n=this.dfsEdgeList[r],a=n.fromNode,o=n.toNode;a<o&&(e===void 0||o===e)&&(this.rmpath.push(r),e=a)}return this.rmpath},i.prototype.getNodeNum=function(){var e={};return this.dfsEdgeList.forEach(function(t){e[t.fromNode]||(e[t.fromNode]=!0),e[t.toNode]||(e[t.toNode]=!0)}),Object.keys(e).length},i}(),fn=function(){function i(e){if(this.his={},this.nodesUsed={},this.edgesUsed={},this.edges=[],!!e){for(;e;){var t=e.edge;this.edges.push(t),this.nodesUsed[t.from]=1,this.nodesUsed[t.to]=1,this.edgesUsed[t.id]=1,e=e.preNode}this.edges=this.edges.reverse()}}return i.prototype.hasNode=function(e){return this.nodesUsed[e.id]===1},i.prototype.hasEdge=function(e){return this.edgesUsed[e.id]===1},i}(),Hn=function(){function i(e){var t=e.graphs,r=e.minSupport,n=r===void 0?2:r,a=e.minNodeNum,o=a===void 0?1:a,s=e.maxNodeNum,u=s===void 0?4:s,c=e.top,f=c===void 0?10:c,l=e.directed,_=l===void 0?!1:l,I=e.verbose,B=I===void 0?!1:I;this.graphs=t,this.dfsCode=new ea,this.support=0,this.frequentSize1Subgraphs=[],this.frequentSubgraphs=[],this.minSupport=n,this.top=f,this.directed=_,this.counter=0,this.maxNodeNum=u,this.minNodeNum=o,this.verbose=B,this.maxNodeNum<this.minNodeNum&&(this.maxNodeNum=this.minNodeNum),this.reportDF=[]}return i.prototype.findForwardRootEdges=function(e,t){var r=this,n=[],a=e.nodeMap;return t.edges.forEach(function(o){(r.directed||t.label<=a[o.to].label)&&n.push(o)}),n},i.prototype.findBackwardEdge=function(e,t,r,n){if(!this.directed&&t===r)return null;for(var a=e.nodeMap,o=a[r.to],s=o.edges,u=s.length,c=0;c<u;c++){var f=s[c];if(!(n.hasEdge(f)||f.to!==t.from)){if(this.directed){if(a[t.from].label<a[r.to].label||a[t.from].label===a[r.to].label&&t.label<=f.label)return f}else if(t.label<f.label||t.label===f.label&&a[t.to].label<=a[r.to].label)return f}}return null},i.prototype.findForwardPureEdges=function(e,t,r,n){for(var a=[],o=t.to,s=e.nodeMap[o].edges,u=s.length,c=0;c<u;c++){var f=s[c],l=e.nodeMap[f.to];r<=l.label&&!n.hasNode(l)&&a.push(f)}return a},i.prototype.findForwardRmpathEdges=function(e,t,r,n){for(var a=[],o=e.nodeMap,s=o[t.to].label,u=o[t.from],c=u.edges,f=c.length,l=0;l<f;l++){var _=c[l],I=o[_.to].label;t.to===_.to||r>I||n.hasNode(o[_.to])||(t.label<_.label||t.label===_.label&&s<=I)&&a.push(_)}return a},i.prototype.getSupport=function(e){var t={};return e.forEach(function(r){t[r.graphId]||(t[r.graphId]=!0)}),Object.keys(t).length},i.prototype.findMinLabel=function(e){var t=void 0;return Object.keys(e).forEach(function(r){var n=e[r],a=n.nodeLabel1,o=n.edgeLabel,s=n.nodeLabel2;if(!t){t={nodeLabel1:a,edgeLabel:o,nodeLabel2:s};return}(a<t.nodeLabel1||a===t.nodeLabel1&&o<t.edgeLabel||a===t.nodeLabel1&&o===t.edgeLabel&&s<t.nodeLabel2)&&(t={nodeLabel1:a,edgeLabel:o,nodeLabel2:s})}),t},i.prototype.isMin=function(){var e=this,t=this.dfsCode;if(this.verbose&&console.log("isMin checking",t),t.dfsEdgeList.length===1)return!0;var r=this.directed,n=t.toGraph(ze,r),a=n.nodeMap,o=new ea,s={};n.nodes.forEach(function(l){var _=e.findForwardRootEdges(n,l);_.forEach(function(I){var B=a[I.to],j="".concat(l.label,"-").concat(I.label,"-").concat(B.label);s[j]||(s[j]={projected:[],nodeLabel1:l.label,edgeLabel:I.label,nodeLabel2:B.label});var et={graphId:n.id,edge:I,preNode:null};s[j].projected.push(et)})});var u=this.findMinLabel(s);if(u){o.dfsEdgeList.push(new ln(0,1,u.nodeLabel1,u.edgeLabel,u.nodeLabel2));var c=function l(_){for(var I=o.buildRmpath(),B=o.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,j=o.dfsEdgeList[I[0]].toNode,et={},ut=!1,ft=0,gt=r?-1:0,Mt=function(Jn){if(ut)return"break";_.forEach(function(Kn){var $r=new fn(Kn),xn=e.findBackwardEdge(n,$r.edges[I[Jn]],$r.edges[I[0]],$r);xn&&(et[xn.label]||(et[xn.label]={projected:[],edgeLabel:xn.label}),et[xn.label].projected.push({graphId:n.id,edge:et,preNode:Kn}),ft=o.dfsEdgeList[I[Jn]].fromNode,ut=!0)})},Ht=I.length-1;Ht>gt;Ht--){var se=Mt(Ht);if(se==="break")break}if(ut){var oe=e.findMinLabel(et);o.dfsEdgeList.push(new ln(j,ft,ye,oe.edgeLabel,ye));var _e=o.dfsEdgeList.length-1;return e.dfsCode.dfsEdgeList[_e]!==o.dfsEdgeList[_e]?!1:l(et[oe.edgeLabel].projected)}var Ue={};ut=!1;var Ne=0;_.forEach(function(Kr){var Jn=new fn(Kr),Kn=e.findForwardPureEdges(n,Jn.edges[I[0]],B,Jn);Kn.length>0&&(ut=!0,Ne=j,Kn.forEach(function($r){var xn="".concat($r.label,"-").concat(a[$r.to].label);Ue[xn]||(Ue[xn]={projected:[],edgeLabel:$r.label,nodeLabel2:a[$r.to].label}),Ue[xn].projected.push({graphId:n.id,edge:$r,preNode:Kr})}))});for(var Qe=I.length,dr=function(Jn){if(ut)return"break";var Kn=I[Jn];_.forEach(function($r){var xn=new fn($r),zn=e.findForwardRmpathEdges(n,xn.edges[Kn],B,xn);zn.length>0&&(ut=!0,Ne=o.dfsEdgeList[Kn].fromNode,zn.forEach(function(Gn){var ia="".concat(Gn.label,"-").concat(a[Gn.to].label);Ue[ia]||(Ue[ia]={projected:[],edgeLabel:Gn.label,nodeLabel2:a[Gn.to].label}),Ue[ia].projected.push({graphId:n.id,edge:Gn,preNode:$r})}))})},Ht=0;Ht<Qe;Ht++){var nn=dr(Ht);if(nn==="break")break}if(!ut)return!0;var kn=e.findMinLabel(Ue);o.dfsEdgeList.push(new ln(Ne,j+1,ye,kn.edgeLabel,kn.nodeLabel2));var En=o.dfsEdgeList.length-1;return t.dfsEdgeList[En]!==o.dfsEdgeList[En]?!1:l(Ue["".concat(kn.edgeLabel,"-").concat(kn.nodeLabel2)].projected)},f="".concat(u.nodeLabel1,"-").concat(u.edgeLabel,"-").concat(u.nodeLabel2);return c(s[f].projected)}},i.prototype.report=function(){if(!(this.dfsCode.getNodeNum()<this.minNodeNum)){this.counter++;var e=this.dfsCode.toGraph(this.counter,this.directed);this.frequentSubgraphs.push((0,h.clone)(e))}},i.prototype.subGraphMining=function(e){var t=this,r=this.getSupport(e);if(!(r<this.minSupport)&&this.isMin()){this.report();var n=this.dfsCode.getNodeNum(),a=this.dfsCode.buildRmpath(),o=this.dfsCode.dfsEdgeList[a[0]].toNode,s=this.dfsCode.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,u={},c={};e.forEach(function(f){for(var l=t.graphs[f.graphId],_=l.nodeMap,I=new fn(f),B=a.length-1;B>=0;B--){var j=t.findBackwardEdge(l,I.edges[a[B]],I.edges[a[0]],I);if(j){var et="".concat(t.dfsCode.dfsEdgeList[a[B]].fromNode,"-").concat(j.label);c[et]||(c[et]={projected:[],toNodeId:t.dfsCode.dfsEdgeList[a[B]].fromNode,edgeLabel:j.label}),c[et].projected.push({graphId:f.graphId,edge:j,preNode:f})}}if(!(n>=t.maxNodeNum)){var ut=t.findForwardPureEdges(l,I.edges[a[0]],s,I);ut.forEach(function(gt){var Mt="".concat(o,"-").concat(gt.label,"-").concat(_[gt.to].label);u[Mt]||(u[Mt]={projected:[],fromNodeId:o,edgeLabel:gt.label,nodeLabel2:_[gt.to].label}),u[Mt].projected.push({graphId:f.graphId,edge:gt,preNode:f})});for(var ft=function(Mt){var Ht=t.findForwardRmpathEdges(l,I.edges[a[Mt]],s,I);Ht.forEach(function(se){var oe="".concat(t.dfsCode.dfsEdgeList[a[Mt]].fromNode,"-").concat(se.label,"-").concat(_[se.to].label);u[oe]||(u[oe]={projected:[],fromNodeId:t.dfsCode.dfsEdgeList[a[Mt]].fromNode,edgeLabel:se.label,nodeLabel2:_[se.to].label}),u[oe].projected.push({graphId:f.graphId,edge:se,preNode:f})})},B=0;B<a.length;B++)ft(B)}}),Object.keys(c).forEach(function(f){var l=c[f],_=l.toNodeId,I=l.edgeLabel;t.dfsCode.dfsEdgeList.push(new ln(o,_,"-1",I,"-1")),t.subGraphMining(c[f].projected),t.dfsCode.dfsEdgeList.pop()}),Object.keys(u).forEach(function(f){var l=u[f],_=l.fromNodeId,I=l.edgeLabel,B=l.nodeLabel2;t.dfsCode.dfsEdgeList.push(new ln(_,o+1,ye,I,B)),t.subGraphMining(u[f].projected),t.dfsCode.dfsEdgeList.pop()})}},i.prototype.generate1EdgeFrequentSubGraphs=function(){var e=this.graphs,t=this.directed,r=this.minSupport,n=this.frequentSize1Subgraphs,a={},o={},s={},u={};return Object.keys(e).forEach(function(c){var f=e[c],l=f.nodeMap;f.nodes.forEach(function(_,I){var B=_.label,j="".concat(c,"-").concat(B);if(!s[j]){var et=a[B]||0;et++,a[B]=et}s[j]={graphKey:c,label:B},_.edges.forEach(function(ut){var ft=B,gt=l[ut.to].label;if(!t&&ft>gt){var Mt=gt;gt=ft,ft=Mt}var Ht=ut.label,se="".concat(c,"-").concat(ft,"-").concat(Ht,"-").concat(gt),oe="".concat(ft,"-").concat(Ht,"-").concat(gt);if(!o[oe]){var _e=o[oe]||0;_e++,o[oe]=_e}u[se]={graphId:c,nodeLabel1:ft,edgeLabel:Ht,nodeLabel2:gt}})})}),Object.keys(a).forEach(function(c){var f=a[c];if(!(f<r)){var l={nodes:[],edges:[]};l.nodes.push({id:"0",label:c}),n.push(l)}}),n},i.prototype.run=function(){var e=this;if(this.frequentSize1Subgraphs=this.generate1EdgeFrequentSubGraphs(),!(this.maxNodeNum<2)){var t=this.graphs,r=this.directed,n={};Object.keys(t).forEach(function(a){var o=t[a],s=o.nodeMap;o.nodes.forEach(function(u){var c=e.findForwardRootEdges(o,u);c.forEach(function(f){var l=s[f.to],_="".concat(u.label,"-").concat(f.label,"-").concat(l.label);n[_]||(n[_]={projected:[],nodeLabel1:u.label,edgeLabel:f.label,nodeLabel2:l.label});var I={graphId:a,edge:f,preNode:null};n[_].projected.push(I)})})}),Object.keys(n).forEach(function(a){var o=n[a],s=o.projected,u=o.nodeLabel1,c=o.edgeLabel,f=o.nodeLabel2;e.dfsCode.dfsEdgeList.push(new ln(0,1,u,c,f)),e.subGraphMining(s),e.dfsCode.dfsEdgeList.pop()})}},i}(),la=function(e,t,r,n){var a={};return Object.keys(e).forEach(function(o,s){var u=e[o],c=new Fn(s,!0,t),f={};u.nodes.forEach(function(l,_){c.addNode(_,l[r]),f[l.id]=_}),u.edges.forEach(function(l,_){var I=f[l.source],B=f[l.target];c.addEdge(-1,I,B,l[n])}),c&&c.getNodeNum()&&(a[c.id]=c)}),a},xa=function(e,t,r){var n=[];return e.forEach(function(a){var o={nodes:[],edges:[]};a.nodes.forEach(function(s){var u;o.nodes.push((u={id:"".concat(s.id)},u[t]=s.label,u))}),a.edges.forEach(function(s){var u;o.edges.push((u={source:"".concat(s.from),target:"".concat(s.to)},u[r]=s.label,u))}),n.push(o)}),n},ba="cluster",Wi=function(e){var t=e.graphs,r=e.directed,n=r===void 0?!1:r,a=e.nodeLabelProp,o=a===void 0?ba:a,s=e.edgeLabelProp,u=s===void 0?ba:s,c=la(t,n,o,u),f=e.minSupport,l=e.maxNodeNum,_=e.minNodeNum,I=e.verbose,B=e.top,j={graphs:c,minSupport:f,maxNodeNum:l,minNodeNum:_,top:B,verbose:I,directed:n},et=new Hn(j);et.run();var ut=xa(et.frequentSubgraphs,o,u);return ut},ri=Wi,ti=function(e,t,r,n){r===void 0&&(r="cluster"),n===void 0&&(n=2);var a=[],o=e.nodes;return t.forEach(function(s,u){a.push(Si(o,s,u,r,n))}),a},Si=function(e,t,r,n,a){var o=[r],s=[],u={};return t.forEach(function(c,f){if(c<=a&&r!==f){o.push(f),s.push(e[f]);var l=e[f][n];u[l]?(u[l].count++,u[l].dists.push(c)):u[l]={count:1,dists:[c]}}}),Object.keys(u).forEach(function(c){u[c].dists=u[c].dists.sort(function(f,l){return f-l})}),{nodeIdx:r,nodeId:e[r].id,nodeIdxs:o,neighbors:s,neighborNum:o.length-1,nodeLabelCountMap:u}},Xi=function(e,t,r,n,a){var o=Math.ceil(r/t),s={},u=0;return n.forEach(function(c,f){for(var l=0,_=0,I=c.nodeIdxs,B=c.neighborNum-1;l<o;){for(var j=I[1+Math.floor(Math.random()*B)],et=0;(s["".concat(f,"-").concat(j)]||s["".concat(j,"-").concat(f)])&&(j=Math.floor(Math.random()*t),et++,!(et>2*t)););if(et<2*t&&(s["".concat(f,"-").concat(j)]={start:f,end:j,distance:a[f][j]},l++,u++,u>=r))return s;if(_++,_>2*t)break}if(l<o){var ut=o-l;o=(o+ut)/(t-f-1)}}),s},io=function(e,t,r,n){var a=r.nodes;return n||(n={}),Object.keys(e).forEach(function(o){var s,u;if(!(n&&n[o])){n[o]={nodes:[],edges:[]};var c=e[o],f=(s=t[c.start])===null||s===void 0?void 0:s.nodeIdxs,l=(u=t[c.end])===null||u===void 0?void 0:u.nodeIdxs;if(!(!f||!l)){var _=new Set(l),I=f.filter(function(ft){return _.has(ft)});if(!(!I||!I.length)){for(var B={},j=I.length,et=0;et<j;et++){var ut=a[I[et]];n[o].nodes.push(ut),B[ut.id]=!0}r.edges.forEach(function(ft){B[ft.source]&&B[ft.target]&&n[o].edges.push(ft)})}}}}),n},oo=function(e,t,r,n){var a,o,s={};e.nodes.forEach(function(c){s[c.id]=c});var u=0;return!(!((a=t==null?void 0:t.edges)===null||a===void 0)&&a.length)||((o=t==null?void 0:t.nodes)===null||o===void 0?void 0:o.length)<2?0:(e.edges.forEach(function(c){var f=s[c.source][r],l=s[c.target][r],_=t==null?void 0:t.nodes[0][r],I=t==null?void 0:t.nodes[1][r],B=t==null?void 0:t.edges[0][n];c[n]===B&&(f===_&&l===I||f===I&&l===_)&&u++}),u)},Ea=function(e,t,r){for(var n=1/0,a=0,o=function(c){var f=e[c],l=Object.keys(f).sort(function(ft,gt){return f[ft]-f[gt]}),_=10,I=[];l.forEach(function(ft,gt){I[gt%_]||(I[gt%_]={graphs:[],totalCount:0,aveCount:0}),I[gt%_].graphs.push(ft),I[gt%_].totalCount+=f[ft]});var B=0,j=[];I.forEach(function(ft){var gt=ft.totalCount/ft.graphs.length;ft.aveCount=gt,j.push(gt);var Mt=0,Ht=ft.length;ft.graphs.forEach(function(se,oe){var _e=f[se];ft.graphs.forEach(function(Ue,Ne){oe!==Ne&&(Mt+=Math.abs(_e-f[Ue]))})}),Mt/=Ht*(Ht-1)/2,B+=Mt}),B/=I.length;var et=0;j.forEach(function(ft,gt){j.forEach(function(Mt,Ht){gt!==Ht&&(et+=Math.abs(ft-Mt))}),et/=j.length*(j.length-1)/2});var ut=et-B;n<ut&&(n=ut,a=c)},s=0;s<t;s++)o(s);return{structure:r[a],structureCountMap:e[a]}},so=function(e,t){var r={},n={};return e.forEach(function(a,o){r[a.id]={idx:o,node:a,degree:0,inDegree:0,outDegree:0};var s=a[t];n[s]||(n[s]=[]),n[s].push(a)}),{nodeMap:r,nodeLabelMap:n}},Io=function(e,t,r){var n={},a={};return e.forEach(function(o,s){n["".concat(ue)]={idx:s,edge:o};var u=o[t];a[u]||(a[u]=[]),a[u].push(o);var c=r[o.source];c&&(c.degree++,c.outDegree++);var f=r[o.target];f&&(f.degree++,f.inDegree++)}),{edgeMap:n,edgeLabelMap:a}},ii=function(e,t,r){var n=t.length,a={};return t.forEach(function(o,s){for(var u=r?0:s+1,c=e[s].id,f=u;f<n;f++)if(s!==f){var l=e[f].id,_=o[f];a["".concat(c,"-").concat(l)]=_,r||(a["".concat(l,"-").concat(c)]=_)}}),a},Yi=function(e,t,r,n,a,o,s,u,c,f,l){var _,I="".concat(t.id,"-").concat(r.id);if(f&&f[I])return f[I];var B=l?l[I]:void 0;if(!B){var j=(_={},_[I]={start:n[t.id].idx,end:n[r.id].idx,distance:a},_);l=io(j,o,e,l),B=l[I]}return oo(B,s,u,c)},uo=function(e,t,r,n){var a,o,s,u=(a=e[t])===null||a===void 0?void 0:a.degree,c=(o=e[t])===null||o===void 0?void 0:o.inDegree,f=(s=e[t])===null||s===void 0?void 0:s.outDegree;return e[t]===void 0&&(u=1/0,c=1/0,f=1/0,n[t].forEach(function(l){var _=r[l.id].degree;u>_&&(u=_);var I=r[l.id].inDegree;c>I&&(c=I);var B=r[l.id].outDegree;f>B&&(f=B)}),e[t]={degree:u,inDegree:c,outDegree:f}),{minPatternNodeLabelDegree:u,minPatternNodeLabelInDegree:c,minPatternNodeLabelOutDegree:f}},Wo=function(e,t,r,n,a,o,s){var u;if(r===void 0&&(r=!1),o===void 0&&(o="cluster"),s===void 0&&(s="cluster"),!(!e||!e.nodes)){var c=e.nodes.length;if(c){var f=vn(e,r),l=vn(t,r),_=ii(e.nodes,f,r),I=ii(t.nodes,l,r),B=so(e.nodes,o),j=B.nodeMap,et=B.nodeLabelMap,ut=so(t.nodes,o),ft=ut.nodeMap,gt=ut.nodeLabelMap;Io(e.edges,s,j);var Mt=Io(t.edges,s,ft).edgeLabelMap,Ht=[];l==null||l.forEach(function(mi){Ht=Ht.concat(mi)}),a||(a=Math.max.apply(Math,(0,y.__spreadArray)((0,y.__spreadArray)([],Ht,!1),[2],!1))),n||(n=a);var se=ti(e,f,o,n),oe=ti(t,l,o,n),_e=Math.min(100,c*(c-1)/2),Ue=Xi(n,c,_e,se,f),Ne=io(Ue,se,e),Qe=10,dr=1,nn=1,kn=4,En={graphs:Ne,nodeLabelProp:o,edgeLabelProp:s,minSupport:dr,minNodeNum:nn,maxNodeNum:kn,directed:r},Kr=ri(En).slice(0,Qe),Jn=Kr.length,Kn=[];Kr.forEach(function(mi,Zi){Kn[Zi]={},Object.keys(Ne).forEach(function(pi){var Ki=Ne[pi],To=oo(Ki,mi,o,s);Kn[Zi][pi]=To})});var $r=Ea(Kn,Jn,Kr),xn=$r.structure,zn=$r.structureCountMap,Gn=t.nodes[0],ia=[],ha=(u=t.nodes[0])===null||u===void 0?void 0:u[o],Xa=-1/0;t.nodes.forEach(function(mi){var Zi=mi[o],pi=et[Zi];(pi==null?void 0:pi.length)>Xa&&(Xa=pi.length,ia=pi,ha=Zi,Gn=mi)});var si={},to={},Pi={},eo={},po={},Vo={};Object.keys(gt).forEach(function(mi,Zi){po[mi]=[],r&&(Vo[mi]=[]);var pi=-1/0,Ki=gt[mi],To={};Ki.forEach(function(Oi){var Ui=I["".concat(Gn.id,"-").concat(Oi.id)];if(Ui&&po[mi].push(Ui),pi<Ui&&(pi=Ui),To["".concat(Gn.id,"-").concat(Oi.id)]={start:0,end:ft[Oi.id].idx,distance:Ui},r){var Jo=I["".concat(Oi.id,"-").concat(Gn.id)];Jo&&Vo[mi].push(Jo)}}),po[mi]=po[mi].sort(function(Oi,Ui){return Oi-Ui}),r&&(Vo[mi]=Vo[mi].sort(function(Oi,Ui){return Oi-Ui})),to=io(To,oe,t,to);var Ia=[];if(Object.keys(To).forEach(function(Oi){if(Pi[Oi]){Ia.push(Pi[Oi]);return}var Ui=to[Oi];Pi[Oi]=oo(Ui,xn,o,s),Ia.push(Pi[Oi])}),Ia=Ia.sort(function(Oi,Ui){return Ui-Oi}),eo["".concat(Gn.id,"-").concat(mi)]=Ia,mi!==ha)for(var wi=(ia==null?void 0:ia.length)||0,Ti=function(Ui){var Jo=ia[Ui],Su=se[j[Jo.id].idx],bs=Su.nodeLabelCountMap[mi],Dl=gt[mi].length;if(!bs||bs.count<Dl)return ia.splice(Ui,1),"continue";for(var cd=!1,ru=0;ru<Dl;ru++)if(bs.dists[ru]>po[mi][ru]){cd=!0;break}if(cd)return ia.splice(Ui,1),"continue";var Yu={};Su.neighbors.forEach(function(nu){var ic=_["".concat(Jo.id,"-").concat(nu.id)];Yu["".concat(Jo.id,"-").concat(nu.id)]={start:j[Jo.id].idx,end:j[nu.id].idx,distance:ic}}),Ne=io(Yu,se,e,Ne);var Pc=[];Object.keys(Yu).forEach(function(nu){if(zn[nu]){Pc.push(zn[nu]);return}var ic=Ne[nu];zn[nu]=oo(ic,xn,o,s),Pc.push(zn[nu])}),Pc=Pc.sort(function(nu,ic){return ic-nu});for(var il=!1,ru=0;ru<Dl;ru++)if(Pc[ru]<Ia[ru]){il=!0;break}if(il)return ia.splice(Ui,1),"continue"},Ao=wi-1;Ao>=0;Ao--)Ti(Ao)});var Ro=[];ia==null||ia.forEach(function(mi){for(var Zi=j[mi.id].idx,pi=Si(e.nodes,f[Zi],Zi,o,a),Ki=pi.neighbors,To=Ki.length,Ia=!1,wi=To-1;wi>=0;wi--){if(Ki.length+1<t.nodes.length){Ia=!0;return}var Ti=Ki[wi],Ao=Ti[o];if(!gt[Ao]||!gt[Ao].length){Ki.splice(wi,1);continue}if(!po[Ao]||!po[Ao].length){Ki.splice(wi,1);continue}var Oi="".concat(mi.id,"-").concat(Ti.id),Ui=_[Oi],Jo=po[Ao].length-1,Su=po[Ao][Jo];if(Ui>Su){Ki.splice(wi,1);continue}if(r){var bs="".concat(Ti.id,"-").concat(mi.id),Dl=_[bs];Jo=Vo[Ao].length-1;var cd=Vo[Ao][Jo];if(Dl>cd){Ki.splice(wi,1);continue}}var ru=zn[Oi]?zn[Oi]:Yi(e,mi,Ti,j,Ui,se,xn,o,s,zn,Ne),Yu="".concat(Gn.id,"-").concat(Ao),Pc=eo[Yu][eo[Yu].length-1];if(ru<Pc){Ki.splice(wi,1);continue}var il=uo(si,Ao,ft,gt),nu=il.minPatternNodeLabelDegree,ic=il.minPatternNodeLabelInDegree,pf=il.minPatternNodeLabelOutDegree;if(j[Ti.id].degree<nu){Ki.splice(wi,1);continue}}Ia||Ro.push({nodes:[mi].concat(Ki)})});var Uu=Yn(t,Gn.id,!1).length,Ss={};r?(Object.keys(Uu).forEach(function(mi){var Zi=ft[mi].node[o];Ss[Zi]?Ss[Zi].push(Uu[mi]):Ss[Zi]=[Uu[mi]]}),Object.keys(Ss).forEach(function(mi){Ss[mi].sort(function(Zi,pi){return Zi-pi})})):Ss=po;for(var Wu=Ro.length,Ms=function(Zi){var pi=Ro[Zi],Ki=pi.nodes[0],To={},Ia={};pi.nodes.forEach(function($o,Mu){Ia[$o.id]={idx:Mu,node:$o,degree:0,inDegree:0,outDegree:0};var Os=$o[o];To[Os]?To[Os]++:To[Os]=1});var wi=[],Ti={};e.edges.forEach(function($o){Ia[$o.source]&&Ia[$o.target]&&(wi.push($o),Ti[$o[s]]?Ti[$o[s]]++:Ti[$o[s]]=1,Ia[$o.source].degree++,Ia[$o.target].degree++,Ia[$o.source].outDegree++,Ia[$o.target].inDegree++)});for(var Ao=Object.keys(Mt).length,Oi=!1,Ui=0;Ui<Ao;Ui++){var Jo=Object.keys(Mt)[Ui];if(!Ti[Jo]||Ti[Jo]<Mt[Jo].length){Oi=!0;break}}if(Oi)return Ro.splice(Zi,1),"continue";var Su=wi.length;if(Su<t.edges.length)return Ro.splice(Zi,1),"break";for(var bs=!1,Dl=function(Mu){var Os=wi[Mu],Nc=Os[s],Ll=Mt[Nc];if(!Ll||!Ll.length)return Ti[Nc]--,Ll&&Ti[Nc]<Ll.length?(bs=!0,"break"):(wi.splice(Mu,1),Ia[Os.source].degree--,Ia[Os.target].degree--,Ia[Os.source].outDegree--,Ia[Os.target].inDegree--,"continue");var I0=Ia[Os.source].node[o],O0=Ia[Os.target].node[o],Tv=!1;if(Ll.forEach(function(D0){var L0=ft[D0.source].node,P0=ft[D0.target].node;L0[o]===I0&&P0[o]===O0&&(Tv=!0),!r&&L0[o]===O0&&P0[o]===I0&&(Tv=!0)}),!Tv)return Ti[Nc]--,Ll&&Ti[Nc]<Ll.length?(bs=!0,"break"):(wi.splice(Mu,1),Ia[Os.source].degree--,Ia[Os.target].degree--,Ia[Os.source].outDegree--,Ia[Os.target].inDegree--,"continue")},Ui=Su-1;Ui>=0;Ui--){var cd=Dl(Ui);if(cd==="break")break}if(bs)return Ro.splice(Zi,1),"continue";pi.edges=wi;var ru=Yn(pi,pi.nodes[0].id,!1).length;if(Object.keys(ru).reverse().forEach(function($o){if(!($o===pi.nodes[0].id||bs)){if(ru[$o]===1/0){var Mu=Ia[$o].node[o];if(To[Mu]--,To[Mu]<gt[Mu].length){bs=!0;return}var Os=pi.nodes.indexOf(Ia[$o].node);pi.nodes.splice(Os,1),Ia[$o]=void 0;return}var Nc=j[$o].node[o];if(!Ss[Nc]||!Ss[Nc].length||ru[$o]>Ss[Nc][Ss[Nc].length-1]){var Mu=Ia[$o].node[o];if(To[Mu]--,To[Mu]<gt[Mu].length){bs=!0;return}var Os=pi.nodes.indexOf(Ia[$o].node);pi.nodes.splice(Os,1),Ia[$o]=void 0}}}),bs)return Ro.splice(Zi,1),"continue";for(var Yu=!0,Pc=0;Yu&&!bs;){Yu=!1;var il=r?Ia[Ki.id].degree<ft[Gn.id].degree||Ia[Ki.id].inDegree<ft[Gn.id].inDegree||Ia[Ki.id].outDegree<ft[Gn.id].outDegree:Ia[Ki.id].degree<ft[Gn.id].degree;if(il){bs=!0;break}if(To[Ki[o]]<gt[Ki[o]].length){bs=!0;break}for(var nu=pi.nodes.length,ic=nu-1;ic>=0;ic--){var pf=pi.nodes[ic],T0=Ia[pf.id].degree,SS=Ia[pf.id].inDegree,MS=Ia[pf.id].outDegree,_S=pf[o],Cv=uo(si,_S,ft,gt),A0=Cv.minPatternNodeLabelDegree,CS=Cv.minPatternNodeLabelInDegree,TS=Cv.minPatternNodeLabelOutDegree,AS=r?T0<A0||SS<CS||MS<TS:T0<A0;if(AS){if(To[pf[o]]--,To[pf[o]]<gt[pf[o]].length){bs=!0;break}pi.nodes.splice(ic,1),Ia[pf.id]=void 0,Yu=!0}}if(bs||!Yu&&Pc!==0)break;Su=wi.length;for(var wh=Su-1;wh>=0;wh--){var gf=wi[wh];if(!Ia[gf.source]||!Ia[gf.target]){wi.splice(wh,1);var Sh=gf[s];if(Ti[Sh]--,Ia[gf.source]&&(Ia[gf.source].degree--,Ia[gf.source].outDegree--),Ia[gf.target]&&(Ia[gf.target].degree--,Ia[gf.target].inDegree--),Mt[Sh]&&Ti[Sh]<Mt[Sh].length){bs=!0;break}Yu=!0}}Pc++}if(bs||bs||pi.nodes.length<t.nodes.length||wi.length<t.edges.length)return Ro.splice(Zi,1),"continue"},_s=Wu-1;_s>=0;_s--){var wu=Ms(_s);if(wu==="break")break}for(var js=Ro.length,eu=function(Zi){var pi=Ro[Zi],Ki={};pi.edges.forEach(function(wi){var Ti="".concat(wi.source,"-").concat(wi.target,"-").concat(wi.label);Ki[Ti]?Ki[Ti]++:Ki[Ti]=1});for(var To=function(Ti){var Ao=Ro[Ti],Oi={};Ao.edges.forEach(function(Jo){var Su="".concat(Jo.source,"-").concat(Jo.target,"-").concat(Jo.label);Oi[Su]?Oi[Su]++:Oi[Su]=1});var Ui=!0;Object.keys(Oi).length!==Object.keys(Ki).length?Ui=!1:Object.keys(Ki).forEach(function(Jo){Oi[Jo]!==Ki[Jo]&&(Ui=!1)}),Ui&&Ro.splice(Ti,1)},Ia=js-1;Ia>Zi;Ia--)To(Ia);js=Ro.length},_s=0;_s<=js-1;_s++)eu(_s);return Ro}}},ro=Wo,go=function(){function i(e){e===void 0&&(e=10),this.linkedList=new vt,this.maxStep=e}return Object.defineProperty(i.prototype,"length",{get:function(){return this.linkedList.toArray().length},enumerable:!1,configurable:!0}),i.prototype.isEmpty=function(){return!this.linkedList.head},i.prototype.isMaxStack=function(){return this.toArray().length>=this.maxStep},i.prototype.peek=function(){return this.isEmpty()?null:this.linkedList.head.value},i.prototype.push=function(e){this.linkedList.prepend(e),this.length>this.maxStep&&this.linkedList.deleteTail()},i.prototype.pop=function(){var e=this.linkedList.deleteHead();return e?e.value:null},i.prototype.toArray=function(){return this.linkedList.toArray().map(function(e){return e.value})},i.prototype.clear=function(){for(;!this.isEmpty();)this.pop()},i}(),Oo=go,Yo=an,Ai={getAdjMatrix:q,breadthFirstSearch:ne,connectedComponent:ae,getDegree:be,getInDegree:Qt,getOutDegree:we,detectCycle:an,detectDirectedCycle:Yo,detectAllCycles:dn,detectAllDirectedCycle:Br,detectAllUndirectedCycle:Ir,depthFirstSearch:Mr,dijkstra:Yn,findAllPath:Cr,findShortestPath:qe,floydWarshall:vn,labelPropagation:Pn,louvain:Ut,iLouvain:it,kCore:M,kMeans:mt,cosineSimilarity:Bt,nodesCosineSimilarity:De,minimumSpanningTree:Pr,pageRank:fe,getNeighbors:Et,Stack:Oo,GADDI:ro},$i=C(277160),oa=C(631437),ee=pt,de=function(e){return function(t,r){return t[e]-r[e]}},Be=function(e,t,r){return e>=t&&e<=r},or=function(e,t,r,n){var a=1e-4,o={x:r.x-e.x,y:r.y-e.y},s={x:t.x-e.x,y:t.y-e.y},u={x:n.x-r.x,y:n.y-r.y},c=s.x*u.y-s.y*u.x,f=c*c,l=1/c,_=s.x*s.x+s.y*s.y,I=u.x*u.x+u.y*u.y;if(f>a*_*I){var B=(o.x*u.y-o.y*u.x)*l,j=(o.x*s.y-o.y*s.x)*l;return!Be(B,0,1)||!Be(j,0,1)?null:{x:e.x+B*s.x,y:e.y+B*s.y}}return null},Rr=function(e,t){var r=e.x,n=e.y,a=e.width,o=e.height,s=r+a/2,u=n+o/2,c=[],f={x:s,y:u};c.push({x:r,y:n}),c.push({x:r+a,y:n}),c.push({x:r+a,y:n+o}),c.push({x:r,y:n+o}),c.push({x:r,y:n});for(var l=null,_=1;_<c.length&&(l=or(c[_-1],c[_],f,t),!l);_++);return l},Nr=function(e,t){var r=e.x,n=e.y,a=e.r,o=t.x,s=t.y,u=o-r,c=s-n;if(u*u+c*c<a*a)return null;var f=Math.atan(c/u);return{x:r+Math.abs(a*Math.cos(f))*Math.sign(u),y:n+Math.abs(a*Math.sin(f))*Math.sign(c)}},Sr=function(e,t){var r=e.rx,n=e.ry,a=e.x,o=e.y,s=t.x-a,u=t.y-o,c=Math.atan2(u/n,s/r);return c<0&&(c+=2*Math.PI),{x:a+r*Math.cos(c),y:o+n*Math.sin(c)}},qr=function(e,t,r){r===void 0&&(r=1);var n=[e.x,e.y,r];return(!t||isNaN(t[0]))&&(t=[1,0,0,0,1,0,0,0,1]),$i.transformMat3(n,n,t),{x:n[0],y:n[1]}},hn=function(e,t,r){r===void 0&&(r=1),(!t||isNaN(t[0]))&&(t=[1,0,0,0,1,0,0,0,1]);var n=tt.invert([1,0,0,0,1,0,0,0,1],t);n||(n=[1,0,0,0,1,0,0,0,1]);var a=[e.x,e.y,r];return $i.transformMat3(a,a,n),{x:a[0],y:a[1]}},Dn=function(e,t,r){var n=e.x-t.x,a=e.y-t.y,o=e.x-r.x,s=e.y-r.y,u=(e.x*e.x-t.x*t.x-t.y*t.y+e.y*e.y)/2,c=(e.x*e.x-r.x*r.x-r.y*r.y+e.y*e.y)/2,f=a*o-n*s;return{x:-(s*u-a*c)/f,y:-(n*c-o*u)/f}},sa=function(e,t){var r=e.x-t.x,n=e.y-t.y;return Math.sqrt(r*r+n*n)},qn=function(e,t){var r=[];return e.forEach(function(n){var a=[];n.forEach(function(o){a.push(o*t)}),r.push(a)}),r},ga=function(e){for(var t=[],r=e.length,n=0;n<r;n+=1){t[n]=[];for(var a=0;a<r;a+=1)n===a?t[n][a]=0:e[n][a]===0||!e[n][a]?t[n][a]=1/0:t[n][a]=e[n][a]}for(var o=0;o<r;o+=1)for(var n=0;n<r;n+=1)for(var a=0;a<r;a+=1)t[n][a]>t[n][o]+t[o][a]&&(t[n][a]=t[n][o]+t[o][a]);return t},ya=function(e,t){var r=e.nodes,n=e.edges,a=[],o={};if(!r)throw new Error("invalid nodes data!");return r&&r.forEach(function(s,u){o[s.id]=u;var c=[];a.push(c)}),n&&n.forEach(function(s){var u=s.source,c=s.target,f=o[u],l=o[c];a[f][l]=1,t||(a[l][f]=1)}),a},di=function(e,t){e.translate(t.x,t.y)},Ma=function(e,t,r,n){n===void 0&&(n={duration:500});var a=e.getMatrix();a||(a=[1,0,0,0,1,0,0,0,1]);var o=e.getCanvasBBox(),s=t.x-o.minX,u=t.y-o.minY;if(r){var c=s*a[0],f=u*a[4],l=0,_=0,I=0,B=0;e.animate(function(et){return I=c*et,B=f*et,a=ee(a,[["t",I-l,B-_]]),l=I,_=B,{matrix:a}},n)}else{var j=ee(a,[["t",s,u]]);e.setMatrix(j)}},ua=function(e,t){var r=e.getMatrix();r||(r=[1,0,0,0,1,0,0,0,1]);var n=t;(0,h.isArray)(t)||(n=[t,t]),(0,h.isArray)(t)&&t.length===1&&(n=[t[0],t[0]]),r=ee(r,[["s",n[0],n[1]]]),e.setMatrix(r)},ci=function(e,t){var r=e.getMatrix();r||(r=[1,0,0,0,1,0,0,0,1]),r=ee(r,[["r",t]]),e.setMatrix(r)},ei=function(e,t,r){for(var n=[],a=0;a<e;a++)n[a]=0;return r.forEach(function(o){o.source&&(n[t[o.source]]+=1),o.target&&(n[t[o.target]]+=1)}),n};function Fa(i,e,t){return(t[0]-i[0])*(e[1]-i[1])===(e[0]-i[0])*(t[1]-i[1])&&Math.min(i[0],e[0])<=t[0]&&t[0]<=Math.max(i[0],e[0])&&Math.min(i[1],e[1])<=t[1]&&t[1]<=Math.max(i[1],e[1])}var Di=function(e,t,r){var n=!1,a=e.length,o=1e-6;function s(l){return Math.abs(l)<o?0:l<0?-1:1}if(a<=2)return!1;for(var u=0;u<a;u++){var c=e[u],f=e[(u+1)%a];if(Fa(c,f,[t,r]))return!0;s(c[1]-r)>0!=s(f[1]-r)>0&&s(t-(r-c[1])*(c[0]-f[0])/(c[1]-f[1])-c[0])<0&&(n=!n)}return n},yi=function(e,t){return!(t.minX>e.maxX||t.maxX<e.minX||t.minY>e.maxY||t.maxY<e.minY)},ka=function(e,t){var r=!1;return(0,h.each)(e,function(n){if(or(n.from,n.to,t.from,t.to))return r=!0,!1}),r},ja=function(e,t){var r=function(_){var I=_.map(function(j){return j[0]}),B=_.map(function(j){return j[1]});return{minX:Math.min.apply(null,I),maxX:Math.max.apply(null,I),minY:Math.min.apply(null,B),maxY:Math.max.apply(null,B)}},n=function(_){for(var I=[],B=_.length,j=0;j<B-1;j++){var et=_[j],ut=_[j+1];I.push({from:{x:et[0],y:et[1]},to:{x:ut[0],y:ut[1]}})}if(I.length>1){var ft=_[0],gt=_[B-1];I.push({from:{x:gt[0],y:gt[1]},to:{x:ft[0],y:ft[1]}})}return I};if(e.length<2||t.length<2)return!1;var a=r(e),o=r(t);if(!yi(a,o))return!1;var s=!1;if((0,h.each)(t,function(l){if(Di(e,l[0],l[1]))return s=!0,!1}),s||((0,h.each)(e,function(l){if(Di(t,l[0],l[1]))return s=!0,!1}),s))return!0;var u=n(e),c=n(t),f=!1;return(0,h.each)(c,function(l){if(ka(u,l))return f=!0,!1}),f},Oa=function(){function i(e,t,r,n){this.x1=e,this.y1=t,this.x2=r,this.y2=n}return i.prototype.getBBox=function(){var e=Math.min(this.x1,this.x2),t=Math.min(this.y1,this.y2),r=Math.max(this.x1,this.x2),n=Math.max(this.y1,this.y2),a={x:e,y:t,minX:e,minY:t,maxX:r,maxY:n,width:r-e,height:n-t};return a},i}(),Ni=function(e,t){var r={top:[e.minX,e.minY,e.maxX,e.minY],left:[e.minX,e.minY,e.minX,e.maxY],bottom:[e.minX,e.maxY,e.maxX,e.maxY],right:[e.maxX,e.minY,e.maxX,e.maxY]};return r[t]},Mi=function(e,t){var r=(t.x2-t.x1)*(e.y1-t.y1)-(t.y2-t.y1)*(e.x1-t.x1),n=(e.x2-e.x1)*(e.y1-t.y1)-(e.y2-e.y1)*(e.x1-t.x1),a=(t.y2-t.y1)*(e.x2-e.x1)-(t.x2-t.x1)*(e.y2-e.y1);if(a){var o=r/a,s=n/a;if(o>=0&&o<=1&&s>=0&&s<=1)return o}return Number.POSITIVE_INFINITY},Ri=function(e,t){for(var r=["top","left","bottom","right"],n=e.getBBox(),a=0,o=[],s=0;s<4;s++){var u=Ni(n,r[s]),c=u[0],f=u[1],l=u[2],_=u[3];o[s]=or({x:t.x1,y:t.y1},{x:t.x2,y:t.y2},{x:c,y:f},{x:l,y:_}),o[s]&&(a+=1)}return[o,a]},co=function(e,t){for(var r=["top","left","bottom","right"],n=e.getBBox(),a=Number.POSITIVE_INFINITY,o=0,s=0;s<4;s++){var u=Ni(n,r[s]),c=u[0],f=u[1],l=u[2],_=u[3],I=Mi(t,new Oa(c,f,l,_));I=Math.abs(I-.5),I>=0&&I<=1&&(o+=1,a=I<a?I:a)}return o===0?-1:a},qi=function(e){var t=0,r=0;if(e.length>0){for(var n=0,a=e;n<a.length;n++){var o=a[n];t+=o.x,r+=o.y}t/=e.length,r/=e.length}return{x:t,y:r}},mo=function(e,t){return Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)},ts=function(e,t){var r=t.x1,n=t.y1,a=t.x2-r,o=t.y2-n,s=e.x-r,u=e.y-n,c=s*a+u*o,f;c<=0?f=0:(s=a-s,u=o-u,c=s*a+u*o,c<=0?f=0:f=c*c/(a*a+o*o));var l=s*s+u*u-f;return l<0&&(l=0),l},es=function(e,t,r){return r===void 0&&(r=.001),Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)<Math.pow(r,2)},no=function(e,t){var r=e.x<t.x,n=e.x>t.x+t.width,a=e.y>t.y+t.height,o=e.y<t.y,s=r||n||a||o;if(!s)return 0;if(a&&!r&&!n)return Math.pow(t.y+t.height-e.y,2);if(o&&!r&&!n)return Math.pow(e.y-t.y,2);if(r&&!a&&!o)return Math.pow(t.x-e.x,2);if(n&&!a&&!o)return Math.pow(t.x+t.width-e.x,2);var u=Math.min(Math.abs(t.x-e.x),Math.abs(t.x+t.width-e.x)),c=Math.min(Math.abs(t.y-e.y),Math.abs(t.y+t.height-e.y));return u*u+c*c},ni=function(e,t){var r=e[0],n=e[1],a=e[2],o=e[3],s=t.x,u=t.y,c=[a-r,o-n];if(oa.exactEquals(c,[0,0]))return NaN;var f=[-c[1],c[0]];oa.normalize(f,f);var l=[s-r,u-n];return Math.abs(oa.dot(l,f))},Fi=function(e,t,r){return e+(t-e)*r},fo=function(e,t,r){for(var n=Math.min(e.length,t.length),a=new Array(n),o=0;o<n;o++)a[o]=Fi(e[o],t[o],r);return a},Ya="rgb(95, 149, 255)",yo="rgb(255, 255, 255)",ko="rgb(0, 0, 0)",ji="rgb(247, 250, 255)",is="rgb(239, 244, 255)",zi="rgb(253, 253, 253)",Bo="rgb(250, 250, 250)",cs="rgb(224, 224, 224)",Cs="rgb(234, 234, 234)",xo="rgb(245, 245, 245)",fs="rgb(191, 213, 255)",ls="#4572d9",Ds="rgb(223, 234, 255)",Aa={mainStroke:Ya,mainFill:is,activeStroke:Ya,activeFill:ji,inactiveStroke:fs,inactiveFill:ji,selectedStroke:Ya,selectedFill:yo,highlightStroke:ls,highlightFill:Ds,disableStroke:cs,disableFill:Bo,edgeMainStroke:cs,edgeActiveStroke:Ya,edgeInactiveStroke:Cs,edgeSelectedStroke:Ya,edgeHighlightStroke:Ya,edgeDisableStroke:xo,comboMainStroke:cs,comboMainFill:zi,comboActiveStroke:Ya,comboActiveFill:ji,comboInactiveStroke:cs,comboInactiveFill:zi,comboSelectedStroke:Ya,comboSelectedFill:zi,comboHighlightStroke:ls,comboHighlightFill:zi,comboDisableStroke:Cs,comboDisableFill:Bo},Yt={version:"0.8.15",rootContainerClassName:"root-container",nodeContainerClassName:"node-container",edgeContainerClassName:"edge-container",comboContainerClassName:"combo-container",delegateContainerClassName:"delegate-container",defaultLoopPosition:"top",nodeLabel:{style:{fill:"#000",fontSize:12,textAlign:"center",textBaseline:"middle"},offset:4},defaultNode:{type:"circle",style:{lineWidth:1,stroke:Aa.mainStroke,fill:is},size:20,color:Aa.mainStroke,linkPoints:{size:8,lineWidth:1,fill:Aa.activeFill,stroke:Aa.activeStroke}},nodeStateStyles:{active:{fill:Aa.activeFill,stroke:Aa.activeStroke,lineWidth:2,shadowColor:Aa.mainStroke,shadowBlur:10},selected:{fill:Aa.selectedFill,stroke:Aa.selectedStroke,lineWidth:4,shadowColor:Aa.selectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{fill:Aa.highlightFill,stroke:Aa.highlightStroke,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{fill:Aa.inactiveFill,stroke:Aa.inactiveStroke,lineWidth:1},disable:{fill:Aa.disableFill,stroke:Aa.disableStroke,lineWidth:1}},edgeLabel:{style:{fill:ko,textAlign:"center",textBaseline:"middle",fontSize:12}},defaultEdge:{type:"line",size:1,style:{stroke:Aa.edgeMainStroke,lineAppendWidth:2},color:Aa.edgeMainStroke},edgeStateStyles:{active:{stroke:Aa.edgeActiveStroke,lineWidth:1},selected:{stroke:Aa.edgeSelectedStroke,lineWidth:2,shadowColor:Aa.edgeSelectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:Aa.edgeHighlightStroke,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{stroke:Aa.edgeInactiveStroke,lineWidth:1},disable:{stroke:Aa.edgeDisableStroke,lineWidth:1}},comboLabel:{style:{fill:ko,textBaseline:"middle",fontSize:12},refY:10,refX:10},defaultCombo:{type:"circle",style:{fill:Aa.comboMainFill,lineWidth:1,stroke:Aa.comboMainStroke,r:5,width:20,height:10},size:[20,5],color:Aa.comboMainStroke,padding:[25,20,15,20]},comboStateStyles:{active:{stroke:Aa.comboActiveStroke,lineWidth:1,fill:Aa.comboActiveFill},selected:{stroke:Aa.comboSelectedStroke,lineWidth:2,fill:Aa.comboSelectedFill,shadowColor:Aa.comboSelectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:Aa.comboHighlightStroke,lineWidth:2,fill:Aa.comboHighlightFill,"text-shape":{fontWeight:500}},inactive:{stroke:Aa.comboInactiveStroke,fill:Aa.comboInactiveFill,lineWidth:1},disable:{stroke:Aa.comboDisableStroke,fill:Aa.comboDisableFill,lineWidth:1}},delegateStyle:{fill:"#F3F9FF",fillOpacity:.5,stroke:"#1890FF",strokeOpacity:.9,lineDash:[5,5]},windowFontFamily:typeof window!="undefined"&&window.getComputedStyle&&document.body&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif"},Ge={" ":.3329986572265625,a:.5589996337890625,A:.6569992065429687,b:.58599853515625,B:.6769989013671875,c:.5469985961914062,C:.7279998779296875,d:.58599853515625,D:.705999755859375,e:.554998779296875,E:.63699951171875,f:.37299957275390627,F:.5769989013671875,g:.5909988403320312,G:.7479995727539063,h:.555999755859375,H:.7199996948242188,i:.255999755859375,I:.23699951171875,j:.26699981689453123,J:.5169998168945312,k:.5289993286132812,K:.6899993896484375,l:.23499908447265624,L:.5879989624023437,m:.854998779296875,M:.8819992065429687,n:.5589996337890625,N:.7189987182617188,o:.58599853515625,O:.7669998168945312,p:.58599853515625,P:.6419998168945312,q:.58599853515625,Q:.7669998168945312,r:.3649993896484375,R:.6759994506835938,s:.504998779296875,S:.6319992065429687,t:.354998779296875,T:.6189987182617187,u:.5599990844726562,U:.7139999389648437,v:.48199920654296874,V:.6389999389648438,w:.754998779296875,W:.929998779296875,x:.5089996337890625,X:.63699951171875,y:.4959991455078125,Y:.66199951171875,z:.48699951171875,Z:.6239990234375,0:.6,1:.40099945068359377,2:.6,3:.6,4:.6,5:.6,6:.6,7:.5469985961914062,8:.6,9:.6,"[":.3329986572265625,"]":.3329986572265625,",":.26399993896484375,".":.26399993896484375,";":.26399993896484375,":":.26399993896484375,"{":.3329986572265625,"}":.3329986572265625,"\\":.5,"|":.19499969482421875,"=":.604998779296875,"+":.604998779296875,"-":.604998779296875,_:.5,"`":.3329986572265625," ~":.8329986572265625,"!":.3329986572265625,"@":.8579986572265625,"#":.6,$:.6,"%":.9699996948242188,"^":.517999267578125,"&":.7259994506835937,"*":.505999755859375,"(":.3329986572265625,")":.3329986572265625,"<":.604998779296875,">":.604998779296875,"/":.5,"?":.53699951171875},nr=Math.PI,gr=Math.sin,Zr=Math.cos,pn=gr(nr/8),$n=Zr(nr/8),qa=function(e,t){var r=e.getBBox(),n={x:r.minX,y:r.minY},a={x:r.maxX,y:r.maxY};if(t){var o=t.getMatrix();o||(o=[1,0,0,0,1,0,0,0,1]),n=qr(n,o),a=qr(a,o)}var s=n.x,u=n.y,c=a.x,f=a.y;return{x:s,y:u,minX:s,minY:u,maxX:c,maxY:f,width:c-s,height:f-u}},ki=function(e){var t=e.sourceNode||e.targetNode,r=t.get("group"),n=r.getMatrix();n||(n=[1,0,0,0,1,0,0,0,1]);var a=t.getKeyShape(),o=a.getBBox(),s=e.loopCfg||{},u=s.dist||Math.max(o.width,o.height)*2,c=s.position||Yt.defaultLoopPosition,f=[(o.minX+o.maxX)/2+n[6],(o.minY+o.maxY)/2+n[7]],l=[e.startPoint.x,e.startPoint.y],_=[e.endPoint.x,e.endPoint.y],I=o.height/2,B=o.width/2,j=I,et=I,ut=j*pn,ft=j*$n,gt=et*pn,Mt=et*$n,Ht=a.get("type"),se=Math.min(I/2,B/2),oe=Math.min(I,B),_e=s!=null&&s.pointPadding?Math.min(oe,s==null?void 0:s.pointPadding):se;if(l[0]===_[0]&&l[1]===_[1]){switch(c){case"top":Ht==="circle"?(l=[f[0]-ut,f[1]-ft],_=[f[0]+gt,f[1]-Mt]):(l=[f[0]-_e,f[1]-I],_=[f[0]+_e,f[1]-I]);break;case"top-right":j=I,et=B,Ht==="circle"?(ut=j*pn,ft=j*$n,gt=et*pn,Mt=et*$n,l=[f[0]+ut,f[1]-ft],_=[f[0]+Mt,f[1]-gt]):(l=[f[0]+B-_e,f[1]-I],_=[f[0]+B,f[1]-I+_e]);break;case"right":j=B,et=B,Ht==="circle"?(ut=j*pn,ft=j*$n,gt=et*pn,Mt=et*$n,l=[f[0]+ft,f[1]-ut],_=[f[0]+Mt,f[1]+gt]):(l=[f[0]+B,f[1]-_e],_=[f[0]+B,f[1]+_e]);break;case"bottom-right":j=B,et=I,Ht==="circle"?(ut=j*pn,ft=j*$n,gt=et*pn,Mt=et*$n,l=[f[0]+ft,f[1]+ut],_=[f[0]+gt,f[1]+Mt]):(l=[f[0]+B,f[1]+I-_e],_=[f[0]+B-_e,f[1]+I]);break;case"bottom":j=I,et=I,Ht==="circle"?(ut=j*pn,ft=j*$n,gt=et*pn,Mt=et*$n,l=[f[0]+ut,f[1]+ft],_=[f[0]-gt,f[1]+Mt]):(l=[f[0]-_e,f[1]+I],_=[f[0]+_e,f[1]+I]);break;case"bottom-left":j=I,et=B,Ht==="circle"?(ut=j*pn,ft=j*$n,gt=et*pn,Mt=et*$n,l=[f[0]-ut,f[1]+ft],_=[f[0]-Mt,f[1]+gt]):(l=[f[0]-B,f[1]+I-_e],_=[f[0]-B+_e,f[1]+I]);break;case"left":j=B,et=B,Ht==="circle"?(ut=j*pn,ft=j*$n,gt=et*pn,Mt=et*$n,l=[f[0]-ft,f[1]+ut],_=[f[0]-Mt,f[1]-gt]):(l=[f[0]-B,f[1]-_e],_=[f[0]-B,f[1]+_e]);break;case"top-left":j=B,et=I,Ht==="circle"?(ut=j*pn,ft=j*$n,gt=et*pn,Mt=et*$n,l=[f[0]-ft,f[1]-ut],_=[f[0]-gt,f[1]-Mt]):(l=[f[0]-B+_e,f[1]-I],_=[f[0]-B,f[1]-I+_e]);break;default:j=B,et=B,ut=j*pn,ft=j*$n,gt=et*pn,Mt=et*$n,l=[f[0]-ut,f[1]-ft],_=[f[0]+gt,f[1]-Mt]}if(s.clockwise===!1){var Ue=[l[0],l[1]];l=[_[0],_[1]],_=[Ue[0],Ue[1]]}}var Ne=[l[0]-f[0],l[1]-f[1]],Qe=(j+u)/j,dr=(et+u)/et;s.clockwise===!1&&(Qe=(et+u)/et,dr=(j+u)/j);var nn=oa.scale([0,0],Ne,Qe),kn=[f[0]+nn[0],f[1]+nn[1]],En=[_[0]-f[0],_[1]-f[1]],Kr=oa.scale([0,0],En,dr),Jn=[f[0]+Kr[0],f[1]+Kr[1]];return e.startPoint={x:l[0],y:l[1]},e.endPoint={x:_[0],y:_[1]},e.controlPoints=[{x:kn[0],y:kn[1]},{x:Jn[0],y:Jn[1]}],e},Do=function(e,t,r,n,a){var o=1e-4,s=[],u=e==null?void 0:e.getPoint(t);if(!u)return{x:0,y:0,angle:0};if(t<o)s=e.getStartTangent().reverse();else if(t>1-o)s=e.getEndTangent();else{var c=e==null?void 0:e.getPoint(t+o);s.push([u.x,u.y]),s.push([c.x,c.y])}var f=Math.atan2(s[1][1]-s[0][1],s[1][0]-s[0][0]);if(f<0&&(f+=nr*2),r&&(u.x+=Zr(f)*r,u.y+=gr(f)*r),n){var l=f-nr/2;f>1/2*nr&&f<3*1/2*nr&&(l-=nr),u.x+=Zr(l)*n,u.y+=gr(l)*n}var _={x:u.x,y:u.y,angle:f};return a?(f>.5*nr&&f<1.5*nr&&(f-=nr),(0,y.__assign)({rotate:f},_)):_},Ho=function i(e,t,r,n){if(n(e,t,r)===!1)return!1;if(e&&e.children){for(var a=e.children.length-1;a>=0;a--)if(!i(e.children[a],e,a,n))return!1}return!0},ks=function i(e,t,r,n){if(e&&e.children){for(var a=e.children.length-1;a>=0;a--)if(!i(e.children[a],e,a,n))return}return n(e,t,r)!==!1},Qi=function(e,t){typeof t=="function"&&Ho(e,null,-1,t)},Lo=function(e,t){typeof t=="function"&&ks(e,null,-1,t)},ds=function(e,t){return t*(Ge[e]||1)},Bs=function(e,t){var r=0,n=new RegExp("[\u4E00-\u9FA5]+");return e.split("").forEach(function(a){n.test(a)?r+=t:r+=ds(a,t)}),[r,t]},ps=function(e,t){return typeof t!="number"||t<=0||t>=e.length?e:e.substring(0,t)+"..."},Vs=function(e,t){var r=[],n={},a={};e.forEach(function(u){a[u.id]=u}),e.forEach(function(u,c){var f=(0,h.clone)(u);f.itemType="combo",f.children=void 0,f.parentId===f.id?(console.warn("The parentId for combo ".concat(f.id," can not be the same as the combo's id")),delete f.parentId):f.parentId&&!a[f.parentId]&&(console.warn("The parent combo for combo ".concat(f.id," does not exist!")),delete f.parentId);var l=n[f.id];if(l){if(f.children=l.children,n[f.id]=f,l=f,!l.parentId){r.push(l);return}var _=n[l.parentId];if(_)_.children?_.children.push(f):_.children=[f];else{var I={id:l.parentId,children:[l]};n[l.parentId]=I,n[f.id]=f}return}if((0,h.isString)(u.parentId)){var B=n[u.parentId];if(B)B.children?B.children.push(f):B.children=[f],n[f.id]=f;else{var j={id:u.parentId,children:[f]};n[j.id]=j,n[f.id]=f}}else r.push(f),n[f.id]=f});var o={};(t||[]).forEach(function(u){o[u.id]=u;var c=n[u.comboId];if(c){var f={id:u.id,comboId:u.comboId};c.children?c.children.push(f):c.children=[f],f.itemType="node",n[u.id]=f}});var s=0;return r.forEach(function(u){u.depth=s+10,Qi(u,function(c){var f,l=n[c.id].itemType;l==="node"?f=n[c.comboId]:f=n[c.parentId],f&&l==="node"?c.depth=s+1:c.depth=s+10,s<c.depth&&(s=c.depth);var _=o[c.id];return _&&(_.depth=c.depth),!0})}),r},qs=function(e,t,r){var n,a=e,o,s={root:{children:e}},u=!1,c="root";(e||[]).forEach(function(B){if(!u){if(B.id===t){o=B,B.itemType==="combo"?o.parentId=r:o.comboId=r,u=!0;return}Qi(B,function(j){var et;return s[j.id]={children:(j==null?void 0:j.children)||[]},a=(et=s[j.parentId||j.comboId||"root"])===null||et===void 0?void 0:et.children,j&&(j.removed||t===j.id)&&a?(c=j.parentId||j.comboId||"root",o=j,j.itemType==="combo"?o.parentId=r:o.comboId=r,u=!0,!1):!0})}}),a=(n=s[c])===null||n===void 0?void 0:n.children;var f=a?a.indexOf(o):-1;if(f>-1&&a.splice(f,1),u||(o={id:t,itemType:"node",comboId:r},s[t]={children:void 0}),t){var l=!1;if(r){var _=0;(e||[]).forEach(function(B){l||Qi(B,function(j){return r===j.id?(l=!0,j.children?j.children.push(o):j.children=[o],_=j.depth,o.itemType==="node"?o.depth=_+2:o.depth=_+1,!1):!0})})}else(!r||!l)&&o.itemType!=="node"&&e.push(o);var I=o.depth;Qi(o,function(B){return B.itemType==="node"?I+=2:I+=1,B.depth=I,!0})}return e},Hs=function(e,t,r){var n={minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0,x:void 0,y:void 0,width:void 0,height:void 0,centerX:void 0,centerY:void 0};if(!e||e.length===0){var a=r==null?void 0:r.getModel(),o=a||{},s=o.x,u=o.y,c=o.fixSize,f=o.collapsed,l=o.fixCollapseSize,_=f?l:c,I=(0,h.isArray)(_)?_:[_,_],B=I[0],j=I[1],et=[B/2,j/2];return{minX:s-et[0],minY:u-et[1],maxX:s+et[0],maxY:u+et[1],x:s,y:u,width:B,height:j}}return e.forEach(function(ut){var ft=t.findById(ut.id);if(!(!ft||!ft.isVisible())){ft.set("bboxCanvasCache",void 0);var gt=ft.getCanvasBBox();gt.x&&n.minX>gt.minX&&(n.minX=gt.minX),gt.y&&n.minY>gt.minY&&(n.minY=gt.minY),gt.x&&n.maxX<gt.maxX&&(n.maxX=gt.maxX),gt.y&&n.maxY<gt.maxY&&(n.maxY=gt.maxY)}}),n.x=(n.minX+n.maxX)/2,n.y=(n.minY+n.maxY)/2,n.width=n.maxX-n.minX,n.height=n.maxY-n.minY,n.centerX=(n.minX+n.maxX)/2,n.centerY=(n.minY+n.maxY)/2,(r==null?void 0:r.getKeyShape().get("type"))==="circle"&&(n.width=Math.hypot(n.height,n.width),n.height=n.width),Object.keys(n).forEach(function(ut){(n[ut]===1/0||n[ut]===-1/0)&&(n[ut]=void 0)}),n},fu=function(e){var t=(0,h.isNumber)(e.x)||(0,h.isNumber)(e.y)||e.type||e.anchorPoints||e.size;return e.style&&(t=t||(0,h.isNumber)(e.style.r)||(0,h.isNumber)(e.style.width)||(0,h.isNumber)(e.style.height)||(0,h.isNumber)(e.style.rx)||(0,h.isNumber)(e.style.ry)),t},gs=function(e){var t={};return Object.keys(e).forEach(function(r){var n=e[r];if((0,h.isObject)(n)&&!(0,h.isArray)(n)){var a={};Object.keys(n).forEach(function(o){var s=n[o];o==="img"&&!(0,h.isString)(s)||(a[o]=(0,h.clone)(s))}),t[r]=a}else t[r]=(0,h.clone)(n)}),t},Ls=function(e){var t=e.animateCfg,r=e.callback,n;if(!t)n={duration:500,callback:r};else if(n=(0,h.clone)(t),t.callback){var a=t.callback;n.callback=function(){r(),a()}}else n.callback=r;return n},Fs=function(e){if(!e)return console.error("G6 Error Tips: the data must be defined"),!1;var t=e.nodes,r=e.edges,n=e.combos,a=n===void 0?[]:n;if(!t&&!r){var o=!0;return Qi(e,function(_){return(0,h.isString)(_.id)?!0:(o=!1,!1)}),o}var s=(t||[]).find(function(_){return!(0,h.isString)(_.id)});if(s)return console.warn("G6 Warning Tips: missing 'id' property, or %c".concat(s.id,"%c is not a string."),"font-size: 20px; color: red;",""),!1;var u=(t||[]).map(function(_){return _.id}),c=a==null?void 0:a.map(function(_){return _.id}),f=(0,y.__spreadArray)((0,y.__spreadArray)([],u,!0),c,!0),l=(r||[]).find(function(_){return!f.includes(_.source)||!f.includes(_.target)});return l?(console.warn("G6 Warning Tips: The source %c".concat(l.source,"%c or the target %c").concat(l.target,"%c of the edge do not exist in the nodes or combos."),"font-size: 20px; color: red;","","font-size: 20px; color: red;",""),!1):!0},os=function(e,t){if(e==="node"||e==="combo"){if(t.id&&!(0,h.isString)(t.id))return console.warn("G6 Warning Tips: missing 'id' property, or the 'id' %c".concat(t.id,"%c is not a string."),"font-size: 20px; color: red;",""),!1}else if(e==="edge"&&(!t.source||!t.target))return console.warn("G6 Warning Tips: missing 'source' or 'target' for the edge."),!1;return!0},_u=function(){function i(e){this.graph=e,this.destroyed=!1,this.modes=e.get("modes")||{default:[]},this.formatModes(),this.mode=e.get("defaultMode")||"default",this.currentBehaves=[],this.setMode(this.mode)}return i.prototype.formatModes=function(){var e=this.modes;(0,h.each)(e,function(t){(0,h.each)(t,function(r,n){(0,h.isString)(r)&&(t[n]={type:r})})})},i.prototype.setBehaviors=function(e){var t=this.graph,r=this.modes[e],n=[],a;(0,h.each)(r||[],function(o){var s=U.getBehavior(o.type||o);s&&(a=new s(o),a&&(a.bind(t),n.push(a)))}),this.currentBehaves=n},i.mergeBehaviors=function(e,t){return(0,h.each)(t,function(r){e.indexOf(r)<0&&((0,h.isString)(r)&&(r={type:r}),e.push(r))}),e},i.filterBehaviors=function(e,t){var r=[];return e.forEach(function(n){var a="";(0,h.isString)(n)?a=n:a=n.type,t.indexOf(a)<0&&r.push(n)}),r},i.prototype.setMode=function(e){var t=this,r=t.modes,n=t.graph,a=e,o=r[a];o&&(n.emit("beforemodechange",{mode:e}),(0,h.each)(this.currentBehaves,function(s){s.delegate&&s.delegate.remove(),s.unbind(n)}),this.setBehaviors(a),n.emit("aftermodechange",{mode:e}),this.mode=e)},i.prototype.getMode=function(){return this.mode},i.prototype.manipulateBehaviors=function(e,t,r){var n=this,a;if((0,h.isArray)(e)?a=e:a=[e],(0,h.isArray)(t))return(0,h.each)(t,function(s){n.modes[s]?r?n.modes[s]=i.mergeBehaviors(n.modes[s]||[],a):n.modes[s]=i.filterBehaviors(n.modes[s]||[],a):r&&(n.modes[s]=a)}),this;var o=t;return t||(o=this.mode),this.modes[o]||r&&(this.modes[o]=a),r?this.modes[o]=i.mergeBehaviors(this.modes[o]||[],a):this.modes[o]=i.filterBehaviors(this.modes[o]||[],a),this.formatModes(),this.setMode(this.mode),this},i.prototype.updateBehavior=function(e,t,r){(0,h.isString)(e)&&(e={type:e});var n=[];if(!r||r===this.mode||r==="default"){if(n=this.currentBehaves,!n||!n.length)return console.warn("Update behavior failed! There is no behaviors in this mode on the graph."),this;for(var a=n.length,o=0;o<a;o++){var s=n[o];if(s.type===e.type)return s.updateCfg(t),this;o===a-1&&console.warn("Update behavior failed! There is no such behavior in the mode")}}else{if(n=this.modes[r],!n||!n.length)return console.warn("Update behavior failed! There is no behaviors in this mode on the graph."),this;for(var u=n.length,o=0;o<u;o++){var s=n[o];if(s.type===e.type||s===e.type)return s===e.type&&(s={type:s}),Object.assign(s,t),n[o]=s,this;o===u-1&&console.warn("Update behavior failed! There is no such behavior in the mode")}}return this},i.prototype.destroy=function(){this.graph=null,this.modes=null,this.currentBehaves=null,this.destroyed=!0},i}(),Cu=_u,bo=`	
\v\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029`,Zo=new RegExp("([a-z])["+bo+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+bo+"]*,?["+bo+"]*)+)","ig"),ss=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+bo+"]*,?["+bo+"]*","ig"),d=function(i){if(!i)return null;if((0,h.isArray)(i))return i;var e={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},t=[];return String(i).replace(Zo,function(r,n,a){var o=[],s=n.toLowerCase();if(a.replace(ss,function(u,c){c&&o.push(+c)}),s==="m"&&o.length>2&&(t.push([n].concat(o.splice(0,2))),s="l",n=n==="m"?"l":"L"),s==="o"&&o.length===1&&t.push([n,o[0]]),s==="r")t.push([n].concat(o));else for(;o.length>=e[s]&&(t.push([n].concat(o.splice(0,e[s]))),!!e[s]););return i}),t},G=function(i,e){for(var t=[],r=0,n=i.length;n-2*!e>r;r+=2){var a=[{x:+i[r-2],y:+i[r-1]},{x:+i[r],y:+i[r+1]},{x:+i[r+2],y:+i[r+3]},{x:+i[r+4],y:+i[r+5]}];e?r?n-4===r?a[3]={x:+i[0],y:+i[1]}:n-2===r&&(a[2]={x:+i[0],y:+i[1]},a[3]={x:+i[2],y:+i[3]}):a[0]={x:+i[n-2],y:+i[n-1]}:n-4===r?a[3]=a[2]:r||(a[0]={x:+i[r],y:+i[r+1]}),t.push(["C",(-a[0].x+6*a[1].x+a[2].x)/6,(-a[0].y+6*a[1].y+a[2].y)/6,(a[1].x+6*a[2].x-a[3].x)/6,(a[1].y+6*a[2].y-a[3].y)/6,a[2].x,a[2].y])}return t},wt=function(i,e,t,r,n){var a=[];if(n===null&&r===null&&(r=t),i=+i,e=+e,t=+t,r=+r,n!==null){var o=Math.PI/180,s=i+t*Math.cos(-r*o),u=i+t*Math.cos(-n*o),c=e+t*Math.sin(-r*o),f=e+t*Math.sin(-n*o);a=[["M",s,c],["A",t,t,0,+(n-r>180),0,u,f]]}else a=[["M",i,e],["m",0,-r],["a",t,r,0,1,1,0,2*r],["a",t,r,0,1,1,0,-2*r],["z"]];return a},Gt=function(i){if(i=d(i),!i||!i.length)return[["M",0,0]];var e=[],t=0,r=0,n=0,a=0,o=0,s,u;i[0][0]==="M"&&(t=+i[0][1],r=+i[0][2],n=t,a=r,o++,e[0]=["M",t,r]);for(var c=i.length===3&&i[0][0]==="M"&&i[1][0].toUpperCase()==="R"&&i[2][0].toUpperCase()==="Z",f=void 0,l=void 0,_=o,I=i.length;_<I;_++){if(e.push(f=[]),l=i[_],s=l[0],s!==s.toUpperCase())switch(f[0]=s.toUpperCase(),f[0]){case"A":f[1]=l[1],f[2]=l[2],f[3]=l[3],f[4]=l[4],f[5]=l[5],f[6]=+l[6]+t,f[7]=+l[7]+r;break;case"V":f[1]=+l[1]+r;break;case"H":f[1]=+l[1]+t;break;case"R":u=[t,r].concat(l.slice(1));for(var B=2,j=u.length;B<j;B++)u[B]=+u[B]+t,u[++B]=+u[B]+r;e.pop(),e=e.concat(G(u,c));break;case"O":e.pop(),u=wt(t,r,l[1],l[2]),u.push(u[0]),e=e.concat(u);break;case"U":e.pop(),e=e.concat(wt(t,r,l[1],l[2],l[3])),f=["U"].concat(e[e.length-1].slice(-2));break;case"M":n=+l[1]+t,a=+l[2]+r;break;default:for(var B=1,j=l.length;B<j;B++)f[B]=+l[B]+(B%2?t:r)}else if(s==="R")u=[t,r].concat(l.slice(1)),e.pop(),e=e.concat(G(u,c)),f=["R"].concat(l.slice(-2));else if(s==="O")e.pop(),u=wt(t,r,l[1],l[2]),u.push(u[0]),e=e.concat(u);else if(s==="U")e.pop(),e=e.concat(wt(t,r,l[1],l[2],l[3])),f=["U"].concat(e[e.length-1].slice(-2));else for(var et=0,ut=l.length;et<ut;et++)f[et]=l[et];if(s=s.toUpperCase(),s!=="O")switch(f[0]){case"Z":t=+n,r=+a;break;case"H":t=f[1];break;case"V":r=f[1];break;case"M":n=f[f.length-2],a=f[f.length-1];break;default:t=f[f.length-2],r=f[f.length-1]}}return e},te=function(i,e,t,r){return[i,e,t,r,t,r]},he=function(i,e,t,r,n,a){var o=.3333333333333333,s=2/3;return[o*i+s*t,o*e+s*r,o*n+s*t,o*a+s*r,n,a]},ge=function(i,e,t,r,n,a,o,s,u,c){t===r&&(t+=1);var f=Math.PI*120/180,l=Math.PI/180*(+n||0),_=[],I,B,j,et,ut,ft=function(to,Pi,eo){var po=to*Math.cos(eo)-Pi*Math.sin(eo),Vo=to*Math.sin(eo)+Pi*Math.cos(eo);return{x:po,y:Vo}};if(c)B=c[0],j=c[1],et=c[2],ut=c[3];else{I=ft(i,e,-l),i=I.x,e=I.y,I=ft(s,u,-l),s=I.x,u=I.y,i===s&&e===u&&(s+=1,u+=1);var gt=(i-s)/2,Mt=(e-u)/2,Ht=gt*gt/(t*t)+Mt*Mt/(r*r);Ht>1&&(Ht=Math.sqrt(Ht),t=Ht*t,r=Ht*r);var se=t*t,oe=r*r,_e=(a===o?-1:1)*Math.sqrt(Math.abs((se*oe-se*Mt*Mt-oe*gt*gt)/(se*Mt*Mt+oe*gt*gt)));et=_e*t*Mt/r+(i+s)/2,ut=_e*-r*gt/t+(e+u)/2,B=Math.asin(((e-ut)/r).toFixed(9)),j=Math.asin(((u-ut)/r).toFixed(9)),B=i<et?Math.PI-B:B,j=s<et?Math.PI-j:j,B<0&&(B=Math.PI*2+B),j<0&&(j=Math.PI*2+j),o&&B>j&&(B=B-Math.PI*2),!o&&j>B&&(j=j-Math.PI*2)}var Ue=j-B;if(Math.abs(Ue)>f){var Ne=j,Qe=s,dr=u;j=B+f*(o&&j>B?1:-1),s=et+t*Math.cos(j),u=ut+r*Math.sin(j),_=ge(s,u,t,r,n,0,o,Qe,dr,[j,Ne,et,ut])}Ue=j-B;var nn=Math.cos(B),kn=Math.sin(B),En=Math.cos(j),Kr=Math.sin(j),Jn=Math.tan(Ue/4),Kn=4/3*t*Jn,$r=4/3*r*Jn,xn=[i,e],zn=[i+Kn*kn,e-$r*nn],Gn=[s+Kn*Kr,u-$r*En],ia=[s,u];if(zn[0]=2*xn[0]-zn[0],zn[1]=2*xn[1]-zn[1],c)return[zn,Gn,ia].concat(_);_=[zn,Gn,ia].concat(_).join().split(",");for(var ha=[],Xa=0,si=_.length;Xa<si;Xa++)ha[Xa]=Xa%2?ft(_[Xa-1],_[Xa],l).y:ft(_[Xa],_[Xa+1],l).x;return ha},Oe=function(i,e){var t=Gt(i),r=e&&Gt(e),n={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},a={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},o=[],s=[],u="",c="",f,l=function(gt,Mt,Ht){var se,oe;if(!gt)return["C",Mt.x,Mt.y,Mt.x,Mt.y,Mt.x,Mt.y];switch(!(gt[0]in{T:1,Q:1})&&(Mt.qx=Mt.qy=null),gt[0]){case"M":Mt.X=gt[1],Mt.Y=gt[2];break;case"A":gt=["C"].concat(ge.apply(0,[Mt.x,Mt.y].concat(gt.slice(1))));break;case"S":Ht==="C"||Ht==="S"?(se=Mt.x*2-Mt.bx,oe=Mt.y*2-Mt.by):(se=Mt.x,oe=Mt.y),gt=["C",se,oe].concat(gt.slice(1));break;case"T":Ht==="Q"||Ht==="T"?(Mt.qx=Mt.x*2-Mt.qx,Mt.qy=Mt.y*2-Mt.qy):(Mt.qx=Mt.x,Mt.qy=Mt.y),gt=["C"].concat(he(Mt.x,Mt.y,Mt.qx,Mt.qy,gt[1],gt[2]));break;case"Q":Mt.qx=gt[1],Mt.qy=gt[2],gt=["C"].concat(he(Mt.x,Mt.y,gt[1],gt[2],gt[3],gt[4]));break;case"L":gt=["C"].concat(te(Mt.x,Mt.y,gt[1],gt[2]));break;case"H":gt=["C"].concat(te(Mt.x,Mt.y,gt[1],Mt.y));break;case"V":gt=["C"].concat(te(Mt.x,Mt.y,Mt.x,gt[1]));break;case"Z":gt=["C"].concat(te(Mt.x,Mt.y,Mt.X,Mt.Y));break;default:break}return gt},_=function(gt,Mt){if(gt[Mt].length>7){gt[Mt].shift();for(var Ht=gt[Mt];Ht.length;)o[Mt]="A",r&&(s[Mt]="A"),gt.splice(Mt++,0,["C"].concat(Ht.splice(0,6)));gt.splice(Mt,1),f=Math.max(t.length,r&&r.length||0)}},I=function(gt,Mt,Ht,se,oe){gt&&Mt&&gt[oe][0]==="M"&&Mt[oe][0]!=="M"&&(Mt.splice(oe,0,["M",se.x,se.y]),Ht.bx=0,Ht.by=0,Ht.x=gt[oe][1],Ht.y=gt[oe][2],f=Math.max(t.length,r&&r.length||0))};f=Math.max(t.length,r&&r.length||0);for(var B=0;B<f;B++){t[B]&&(u=t[B][0]),u!=="C"&&(o[B]=u,B&&(c=o[B-1])),t[B]=l(t[B],n,c),o[B]!=="A"&&u==="C"&&(o[B]="C"),_(t,B),r&&(r[B]&&(u=r[B][0]),u!=="C"&&(s[B]=u,B&&(c=s[B-1])),r[B]=l(r[B],a,c),s[B]!=="A"&&u==="C"&&(s[B]="C"),_(r,B)),I(t,r,n,a,B),I(r,t,a,n,B);var j=t[B],et=r&&r[B],ut=j.length,ft=r&&et.length;n.x=j[ut-2],n.y=j[ut-1],n.bx=parseFloat(j[ut-4])||n.x,n.by=parseFloat(j[ut-3])||n.y,a.bx=r&&(parseFloat(et[ft-4])||a.x),a.by=r&&(parseFloat(et[ft-3])||a.y),a.x=r&&et[ft-2],a.y=r&&et[ft-1]}return r?[t,r]:t},Fe=/,?([a-z]),?/gi,He=function(i){return i.join(",").replace(Fe,"$1")},ur=function(i,e,t,r,n){var a=-3*e+9*t-9*r+3*n,o=i*a+6*e-12*t+6*r;return i*o-3*e+3*t},Ur=function(i,e,t,r,n,a,o,s,u){u===null&&(u=1),u=u>1?1:u<0?0:u;for(var c=u/2,f=12,l=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],_=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],I=0,B=0;B<f;B++){var j=c*l[B]+c,et=ur(j,i,t,n,o),ut=ur(j,e,r,a,s),ft=et*et+ut*ut;I+=_[B]*Math.sqrt(ft)}return c*I},jr=function(i,e,t,r,n,a,o,s){for(var u=[],c=[[],[]],f,l,_,I,B=0;B<2;++B){if(B===0?(l=6*i-12*t+6*n,f=-3*i+9*t-9*n+3*o,_=3*t-3*i):(l=6*e-12*r+6*a,f=-3*e+9*r-9*a+3*s,_=3*r-3*e),Math.abs(f)<1e-12){if(Math.abs(l)<1e-12)continue;I=-_/l,I>0&&I<1&&u.push(I);continue}var j=l*l-4*_*f,et=Math.sqrt(j);if(!(j<0)){var ut=(-l+et)/(2*f);ut>0&&ut<1&&u.push(ut);var ft=(-l-et)/(2*f);ft>0&&ft<1&&u.push(ft)}}for(var gt=u.length,Mt=gt,Ht;gt--;)I=u[gt],Ht=1-I,c[0][gt]=Ht*Ht*Ht*i+3*Ht*Ht*I*t+3*Ht*I*I*n+I*I*I*o,c[1][gt]=Ht*Ht*Ht*e+3*Ht*Ht*I*r+3*Ht*I*I*a+I*I*I*s;return c[0][Mt]=i,c[1][Mt]=e,c[0][Mt+1]=o,c[1][Mt+1]=s,c[0].length=c[1].length=Mt+2,{min:{x:Math.min.apply(0,c[0]),y:Math.min.apply(0,c[1])},max:{x:Math.max.apply(0,c[0]),y:Math.max.apply(0,c[1])}}},Wr=function(i,e,t,r,n,a,o,s){if(!(Math.max(i,t)<Math.min(n,o)||Math.min(i,t)>Math.max(n,o)||Math.max(e,r)<Math.min(a,s)||Math.min(e,r)>Math.max(a,s))){var u=(i*r-e*t)*(n-o)-(i-t)*(n*s-a*o),c=(i*r-e*t)*(a-s)-(e-r)*(n*s-a*o),f=(i-t)*(a-s)-(e-r)*(n-o);if(f){var l=u/f,_=c/f,I=+l.toFixed(2),B=+_.toFixed(2);if(!(I<+Math.min(i,t).toFixed(2)||I>+Math.max(i,t).toFixed(2)||I<+Math.min(n,o).toFixed(2)||I>+Math.max(n,o).toFixed(2)||B<+Math.min(e,r).toFixed(2)||B>+Math.max(e,r).toFixed(2)||B<+Math.min(a,s).toFixed(2)||B>+Math.max(a,s).toFixed(2)))return{x:l,y:_}}}},mn=function(i,e,t){return e>=i.x&&e<=i.x+i.width&&t>=i.y&&t<=i.y+i.height},Bn=function(i,e,t,r,n){if(n)return[["M",+i+ +n,e],["l",t-n*2,0],["a",n,n,0,0,1,n,n],["l",0,r-n*2],["a",n,n,0,0,1,-n,n],["l",n*2-t,0],["a",n,n,0,0,1,-n,-n],["l",0,n*2-r],["a",n,n,0,0,1,n,-n],["z"]];var a=[["M",i,e],["l",t,0],["l",0,r],["l",-t,0],["z"]];return a.parsePathArray=He,a},Qr=function(i,e,t,r){return i===null&&(i=e=t=r=0),e===null&&(e=i.y,t=i.width,r=i.height,i=i.x),{x:i,y:e,width:t,w:t,height:r,h:r,x2:i+t,y2:e+r,cx:i+t/2,cy:e+r/2,r1:Math.min(t,r)/2,r2:Math.max(t,r)/2,r0:Math.sqrt(t*t+r*r)/2,path:Bn(i,e,t,r),vb:[i,e,t,r].join(" ")}},na=function(i,e){return i=Qr(i),e=Qr(e),mn(e,i.x,i.y)||mn(e,i.x2,i.y)||mn(e,i.x,i.y2)||mn(e,i.x2,i.y2)||mn(i,e.x,e.y)||mn(i,e.x2,e.y)||mn(i,e.x,e.y2)||mn(i,e.x2,e.y2)||(i.x<e.x2&&i.x>e.x||e.x<i.x2&&e.x>i.x)&&(i.y<e.y2&&i.y>e.y||e.y<i.y2&&e.y>i.y)},Va=function(i,e,t,r,n,a,o,s){(0,h.isArray)(i)||(i=[i,e,t,r,n,a,o,s]);var u=jr.apply(null,i);return Qr(u.min.x,u.min.y,u.max.x-u.min.x,u.max.y-u.min.y)},Ha=function(i,e,t,r,n,a,o,s,u){var c=1-u,f=Math.pow(c,3),l=Math.pow(c,2),_=u*u,I=_*u,B=f*i+l*3*u*t+c*3*u*u*n+I*o,j=f*e+l*3*u*r+c*3*u*u*a+I*s,et=i+2*u*(t-i)+_*(n-2*t+i),ut=e+2*u*(r-e)+_*(a-2*r+e),ft=t+2*u*(n-t)+_*(o-2*n+t),gt=r+2*u*(a-r)+_*(s-2*a+r),Mt=c*i+u*t,Ht=c*e+u*r,se=c*n+u*o,oe=c*a+u*s,_e=90-Math.atan2(et-ft,ut-gt)*180/Math.PI;return{x:B,y:j,m:{x:et,y:ut},n:{x:ft,y:gt},start:{x:Mt,y:Ht},end:{x:se,y:oe},alpha:_e}},za=function(i,e,t){var r=Va(i),n=Va(e);if(!na(r,n))return t?0:[];for(var a=Ur.apply(0,i),o=Ur.apply(0,e),s=~~(a/8),u=~~(o/8),c=[],f=[],l={},_=t?0:[],I=0;I<s+1;I++){var B=Ha.apply(0,i.concat(I/s));c.push({x:B.x,y:B.y,t:I/s})}for(var I=0;I<u+1;I++){var B=Ha.apply(0,e.concat(I/u));f.push({x:B.x,y:B.y,t:I/u})}for(var I=0;I<s;I++)for(var j=0;j<u;j++){var et=c[I],ut=c[I+1],ft=f[j],gt=f[j+1],Mt=Math.abs(ut.x-et.x)<.001?"y":"x",Ht=Math.abs(gt.x-ft.x)<.001?"y":"x",se=Wr(et.x,et.y,ut.x,ut.y,ft.x,ft.y,gt.x,gt.y);if(se){if(l[se.x.toFixed(4)]===se.y.toFixed(4))continue;l[se.x.toFixed(4)]=se.y.toFixed(4);var oe=et.t+Math.abs((se[Mt]-et[Mt])/(ut[Mt]-et[Mt]))*(ut.t-et.t),_e=ft.t+Math.abs((se[Ht]-ft[Ht])/(gt[Ht]-ft[Ht]))*(gt.t-ft.t);oe>=0&&oe<=1&&_e>=0&&_e<=1&&(t?_+=1:_.push({x:se.x,y:se.y,t1:oe,t2:_e}))}}return _},_a=function(i,e,t){i=Oe(i),e=Oe(e);for(var r,n,a,o,s,u,c,f,l,_,I=t?0:[],B=0,j=i.length;B<j;B++){var et=i[B];if(et[0]==="M")r=s=et[1],n=u=et[2];else{et[0]==="C"?(l=[r,n].concat(et.slice(1)),r=l[6],n=l[7]):(l=[r,n,r,n,s,u,s,u],r=s,n=u);for(var ut=0,ft=e.length;ut<ft;ut++){var gt=e[ut];if(gt[0]==="M")a=c=gt[1],o=f=gt[2];else{gt[0]==="C"?(_=[a,o].concat(gt.slice(1)),a=_[6],o=_[7]):(_=[a,o,a,o,c,f,c,f],a=c,o=f);var Mt=za(l,_,t);if(t)I+=Mt;else{for(var Ht=0,se=Mt.length;Ht<se;Ht++)Mt[Ht].segment1=B,Mt[Ht].segment2=ut,Mt[Ht].bez1=l,Mt[Ht].bez2=_;I=I.concat(Mt)}}}}}return I},Na=function(i,e){return _a(i,e)};function Po(i,e){var t=[],r=[];function n(a,o){if(a.length===1)t.push(a[0]),r.push(a[0]);else{for(var s=[],u=0;u<a.length-1;u++)u===0&&t.push(a[0]),u===a.length-2&&r.push(a[u+1]),s[u]=[(1-o)*a[u][0]+o*a[u+1][0],(1-o)*a[u][1]+o*a[u+1][1]];n(s,o)}}return i.length&&n(i,e),{left:t,right:r.reverse()}}function Mo(i,e,t){var r=[[i[1],i[2]]];t=t||2;var n=[];e[0]==="A"?(r.push(e[6]),r.push(e[7])):e[0]==="C"?(r.push([e[1],e[2]]),r.push([e[3],e[4]]),r.push([e[5],e[6]])):e[0]==="S"||e[0]==="Q"?(r.push([e[1],e[2]]),r.push([e[3],e[4]])):r.push([e[1],e[2]]);for(var a=r,o=1/t,s=0;s<t-1;s++){var u=o/(1-o*s),c=Po(a,u);n.push(c.left),a=c.right}n.push(a);var f=n.map(function(l){var _=[];return l.length===4&&(_.push("C"),_=_.concat(l[2])),l.length>=3&&(l.length===3&&_.push("Q"),_=_.concat(l[1])),l.length===2&&_.push("L"),_=_.concat(l[l.length-1]),_});return f}var Eo=function(i,e,t){if(t===1)return[[].concat(i)];var r=[];if(e[0]==="L"||e[0]==="C"||e[0]==="Q")r=r.concat(Mo(i,e,t));else{var n=[].concat(i);n[0]==="M"&&(n[0]="L");for(var a=0;a<=t-1;a++)r.push(n)}return r},_o=function(i,e){if(i.length===1)return i;var t=i.length-1,r=e.length-1,n=t/r,a=[];if(i.length===1&&i[0][0]==="M"){for(var o=0;o<r-t;o++)i.push(i[0]);return i}for(var o=0;o<r;o++){var s=Math.floor(n*o);a[s]=(a[s]||0)+1}var u=a.reduce(function(c,f,l){return l===t?c.concat(i[t]):c.concat(Eo(i[l],i[l+1],f))},[]);return u.unshift(i[0]),(e[r]==="Z"||e[r]==="z")&&u.push("Z"),u},Co=function(i,e){if(i.length!==e.length)return!1;var t=!0;return(0,h.each)(i,function(r,n){if(r!==e[n])return t=!1,!1}),t};function Fo(i,e,t){var r=null,n=t;return e<n&&(n=e,r="add"),i<n&&(n=i,r="del"),{type:r,min:n}}var zo=function(i,e){var t=i.length,r=e.length,n,a,o=0;if(t===0||r===0)return null;for(var s=[],u=0;u<=t;u++)s[u]=[],s[u][0]={min:u};for(var c=0;c<=r;c++)s[0][c]={min:c};for(var u=1;u<=t;u++){n=i[u-1];for(var c=1;c<=r;c++){a=e[c-1],Co(n,a)?o=0:o=1;var f=s[u-1][c].min+1,l=s[u][c-1].min+1,_=s[u-1][c-1].min+o;s[u][c]=Fo(f,l,_)}}return s},fi=function(i,e){var t=zo(i,e),r=i.length,n=e.length,a=[],o=1,s=1;if(t[r][n].min!==r){for(var u=1;u<=r;u++){var c=t[u][u].min;s=u;for(var f=o;f<=n;f++)t[u][f].min<c&&(c=t[u][f].min,s=f);o=s,t[u][o].type&&a.push({index:u-1,type:t[u][o].type})}for(var u=a.length-1;u>=0;u--)o=a[u].index,a[u].type==="add"?i.splice(o,0,[].concat(i[o])):i.splice(o,1)}r=i.length;var l=n-r;if(r<n)for(var u=0;u<l;u++)i[r-1][0]==="z"||i[r-1][0]==="Z"?i.splice(r-2,0,i[r-2]):i.push(i[r-1]),r+=1;return i};function Bi(i,e,t){for(var r=[].concat(i),n,a=1/(t+1),o=Qs(e)[0],s=1;s<=t;s++)a*=s,n=Math.floor(i.length*a),n===0?r.unshift([o[0]*a+i[n][0]*(1-a),o[1]*a+i[n][1]*(1-a)]):r.splice(n,0,[o[0]*a+i[n][0]*(1-a),o[1]*a+i[n][1]*(1-a)]);return r}function Qs(i){var e=[];switch(i[0]){case"M":e.push([i[1],i[2]]);break;case"L":e.push([i[1],i[2]]);break;case"A":e.push([i[6],i[7]]);break;case"Q":e.push([i[3],i[4]]),e.push([i[1],i[2]]);break;case"T":e.push([i[1],i[2]]);break;case"C":e.push([i[5],i[6]]),e.push([i[1],i[2]]),e.push([i[3],i[4]]);break;case"S":e.push([i[3],i[4]]),e.push([i[1],i[2]]);break;case"H":e.push([i[1],i[1]]);break;case"V":e.push([i[1],i[1]]);break;default:}return e}var zs=function(i,e){if(i.length<=1)return i;for(var t,r=0;r<e.length;r++)if(i[r][0]!==e[r][0])switch(t=Qs(i[r]),e[r][0]){case"M":i[r]=["M"].concat(t[0]);break;case"L":i[r]=["L"].concat(t[0]);break;case"A":i[r]=[].concat(e[r]),i[r][6]=t[0][0],i[r][7]=t[0][1];break;case"Q":if(t.length<2)if(r>0)t=Bi(t,i[r-1],1);else{i[r]=e[r];break}i[r]=["Q"].concat(t.reduce(function(n,a){return n.concat(a)},[]));break;case"T":i[r]=["T"].concat(t[0]);break;case"C":if(t.length<3)if(r>0)t=Bi(t,i[r-1],2);else{i[r]=e[r];break}i[r]=["C"].concat(t.reduce(function(n,a){return n.concat(a)},[]));break;case"S":if(t.length<2)if(r>0)t=Bi(t,i[r-1],1);else{i[r]=e[r];break}i[r]=["S"].concat(t.reduce(function(n,a){return n.concat(a)},[]));break;default:i[r]=e[r]}return i},Ts=function(){function i(e,t){this.bubbles=!0,this.target=null,this.currentTarget=null,this.delegateTarget=null,this.delegateObject=null,this.defaultPrevented=!1,this.propagationStopped=!1,this.shape=null,this.fromShape=null,this.toShape=null,this.propagationPath=[],this.type=e,this.name=e,this.originalEvent=t,this.timeStamp=t.timeStamp}return i.prototype.preventDefault=function(){this.defaultPrevented=!0,this.originalEvent.preventDefault&&this.originalEvent.preventDefault()},i.prototype.stopPropagation=function(){this.propagationStopped=!0},i.prototype.toString=function(){var e=this.type;return"[Event (type="+e+")]"},i.prototype.save=function(){},i.prototype.restore=function(){},i}(),lu=Ts;function Rc(i,e){var t=i.indexOf(e);t!==-1&&i.splice(t,1)}var mf=typeof window!="undefined"&&typeof window.document!="undefined";function yf(i,e){if(i.isCanvas())return!0;for(var t=e.getParent(),r=!1;t;){if(t===i){r=!0;break}t=t.getParent()}return r}function kc(i){return i.cfg.visible&&i.cfg.capture}var ol=function(i){(0,y.__extends)(e,i);function e(t){var r=i.call(this)||this;r.destroyed=!1;var n=r.getDefaultCfg();return r.cfg=(0,h.mix)(n,t),r}return e.prototype.getDefaultCfg=function(){return{}},e.prototype.get=function(t){return this.cfg[t]},e.prototype.set=function(t,r){this.cfg[t]=r},e.prototype.destroy=function(){this.cfg={destroyed:!0},this.off(),this.destroyed=!0},e}(Q),Bc=ol,Xu=C(734155),ju=function(i,e,t){if(t||arguments.length===2)for(var r=0,n=e.length,a;r<n;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return i.concat(a||Array.prototype.slice.call(e))},Fc=function(){function i(e,t,r){this.name=e,this.version=t,this.os=r,this.type="browser"}return i}(),xf=function(){function i(e){this.version=e,this.type="node",this.name="node",this.os=Xu.platform}return i}(),sl=function(){function i(e,t,r,n){this.name=e,this.version=t,this.os=r,this.bot=n,this.type="bot-device"}return i}(),du=function(){function i(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return i}(),bf=function(){function i(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return i}(),ta=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,Tu=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,ui=3,zc=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",ta]],Au=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function au(i){return i?sc(i):typeof document=="undefined"&&typeof navigator!="undefined"&&navigator.product==="ReactNative"?new bf:typeof navigator!="undefined"?sc(navigator.userAgent):Ef()}function Gc(i){return i!==""&&zc.reduce(function(e,t){var r=t[0],n=t[1];if(e)return e;var a=n.exec(i);return!!a&&[r,a]},!1)}function oc(i){var e=Gc(i);return e?e[0]:null}function sc(i){var e=Gc(i);if(!e)return null;var t=e[0],r=e[1];if(t==="searchbot")return new du;var n=r[1]&&r[1].split(".").join("_").split("_").slice(0,3);n?n.length<ui&&(n=ju(ju([],n,!0),Gs(ui-n.length),!0)):n=[];var a=n.join("."),o=Uc(i),s=Tu.exec(i);return s&&s[1]?new sl(t,a,o,s[1]):new Fc(t,a,o)}function Uc(i){for(var e=0,t=Au.length;e<t;e++){var r=Au[e],n=r[0],a=r[1],o=a.exec(i);if(o)return n}return null}function Ef(){var i=typeof Xu!="undefined"&&Xu.version;return i?new xf(Xu.version.slice(1)):null}function Gs(i){for(var e=[],t=0;t<i;t++)e.push("0");return e}function lt(i,e){var t=[],r=i[0],n=i[1],a=i[2],o=i[3],s=i[4],u=i[5],c=i[6],f=i[7],l=i[8],_=e[0],I=e[1],B=e[2],j=e[3],et=e[4],ut=e[5],ft=e[6],gt=e[7],Mt=e[8];return t[0]=_*r+I*o+B*c,t[1]=_*n+I*s+B*f,t[2]=_*a+I*u+B*l,t[3]=j*r+et*o+ut*c,t[4]=j*n+et*s+ut*f,t[5]=j*a+et*u+ut*l,t[6]=ft*r+gt*o+Mt*c,t[7]=ft*n+gt*s+Mt*f,t[8]=ft*a+gt*u+Mt*l,t}function Lt(i,e){var t=[],r=e[0],n=e[1];return t[0]=i[0]*r+i[3]*n+i[6],t[1]=i[1]*r+i[4]*n+i[7],t}function Vt(i){var e=[],t=i[0],r=i[1],n=i[2],a=i[3],o=i[4],s=i[5],u=i[6],c=i[7],f=i[8],l=f*o-s*c,_=-f*a+s*u,I=c*a-o*u,B=t*l+r*_+n*I;return B?(B=1/B,e[0]=l*B,e[1]=(-f*r+n*c)*B,e[2]=(s*r-n*o)*B,e[3]=_*B,e[4]=(f*t-n*u)*B,e[5]=(-s*t+n*a)*B,e[6]=I*B,e[7]=(-c*t+r*u)*B,e[8]=(o*t-r*a)*B,e):null}var le=pt,Ae="matrix",ir=["zIndex","capture","visible","type"],cr=["repeat"],Gr=":",gn="*";function yn(i){for(var e=[],t=0;t<i.length;t++)(0,h.isArray)(i[t])?e.push([].concat(i[t])):e.push(i[t]);return e}function Vn(i,e){var t={},r=e.attrs;for(var n in i)t[n]=r[n];return t}function aa(i,e){var t={},r=e.attr();return(0,h.each)(i,function(n,a){cr.indexOf(a)===-1&&!(0,h.isEqual)(r[a],n)&&(t[a]=n)}),t}function Zn(i,e){if(e.onFrame)return i;var t=e.startTime,r=e.delay,n=e.duration,a=Object.prototype.hasOwnProperty;return(0,h.each)(i,function(o){t+r<o.startTime+o.delay+o.duration&&n>o.delay&&(0,h.each)(e.toAttrs,function(s,u){a.call(o.toAttrs,u)&&(delete o.toAttrs[u],delete o.fromAttrs[u])})}),i}var La=function(i){(0,y.__extends)(e,i);function e(t){var r=i.call(this,t)||this;r.attrs={};var n=r.getDefaultAttrs();return(0,h.mix)(n,t.attrs),r.attrs=n,r.initAttrs(n),r.initAnimate(),r}return e.prototype.getDefaultCfg=function(){return{visible:!0,capture:!0,zIndex:0}},e.prototype.getDefaultAttrs=function(){return{matrix:this.getDefaultMatrix(),opacity:1}},e.prototype.onCanvasChange=function(t){},e.prototype.initAttrs=function(t){},e.prototype.initAnimate=function(){this.set("animable",!0),this.set("animating",!1)},e.prototype.isGroup=function(){return!1},e.prototype.getParent=function(){return this.get("parent")},e.prototype.getCanvas=function(){return this.get("canvas")},e.prototype.attr=function(){for(var t,r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var a=r[0],o=r[1];if(!a)return this.attrs;if((0,h.isObject)(a)){for(var s in a)this.setAttr(s,a[s]);return this.afterAttrsChange(a),this}return r.length===2?(this.setAttr(a,o),this.afterAttrsChange((t={},t[a]=o,t)),this):this.attrs[a]},e.prototype.isClipped=function(t,r){var n=this.getClip();return n&&!n.isHit(t,r)},e.prototype.setAttr=function(t,r){var n=this.attrs[t];n!==r&&(this.attrs[t]=r,this.onAttrChange(t,r,n))},e.prototype.onAttrChange=function(t,r,n){t==="matrix"&&this.set("totalMatrix",null)},e.prototype.afterAttrsChange=function(t){if(this.cfg.isClipShape){var r=this.cfg.applyTo;r&&r.onCanvasChange("clip")}else this.onCanvasChange("attr")},e.prototype.show=function(){return this.set("visible",!0),this.onCanvasChange("show"),this},e.prototype.hide=function(){return this.set("visible",!1),this.onCanvasChange("hide"),this},e.prototype.setZIndex=function(t){this.set("zIndex",t);var r=this.getParent();return r&&r.sort(),this},e.prototype.toFront=function(){var t=this.getParent();if(t){var r=t.getChildren(),n=this.get("el"),a=r.indexOf(this);r.splice(a,1),r.push(this),this.onCanvasChange("zIndex")}},e.prototype.toBack=function(){var t=this.getParent();if(t){var r=t.getChildren(),n=this.get("el"),a=r.indexOf(this);r.splice(a,1),r.unshift(this),this.onCanvasChange("zIndex")}},e.prototype.remove=function(t){t===void 0&&(t=!0);var r=this.getParent();r?(Rc(r.getChildren(),this),r.get("clearing")||this.onCanvasChange("remove")):this.onCanvasChange("remove"),t&&this.destroy()},e.prototype.resetMatrix=function(){this.attr(Ae,this.getDefaultMatrix()),this.onCanvasChange("matrix")},e.prototype.getMatrix=function(){return this.attr(Ae)},e.prototype.setMatrix=function(t){this.attr(Ae,t),this.onCanvasChange("matrix")},e.prototype.getTotalMatrix=function(){var t=this.cfg.totalMatrix;if(!t){var r=this.attr("matrix"),n=this.cfg.parentMatrix;n&&r?t=lt(n,r):t=r||n,this.set("totalMatrix",t)}return t},e.prototype.applyMatrix=function(t){var r=this.attr("matrix"),n=null;t&&r?n=lt(t,r):n=r||t,this.set("totalMatrix",n),this.set("parentMatrix",t)},e.prototype.getDefaultMatrix=function(){return null},e.prototype.applyToMatrix=function(t){var r=this.attr("matrix");return r?Lt(r,t):t},e.prototype.invertFromMatrix=function(t){var r=this.attr("matrix");if(r){var n=Vt(r);if(n)return Lt(n,t)}return t},e.prototype.setClip=function(t){var r=this.getCanvas(),n=null;if(t){var a=this.getShapeBase(),o=(0,h.upperFirst)(t.type),s=a[o];s&&(n=new s({type:t.type,isClipShape:!0,applyTo:this,attrs:t.attrs,canvas:r}))}return this.set("clipShape",n),this.onCanvasChange("clip"),n},e.prototype.getClip=function(){var t=this.cfg.clipShape;return t||null},e.prototype.clone=function(){var t=this,r=this.attrs,n={};(0,h.each)(r,function(s,u){(0,h.isArray)(r[u])?n[u]=yn(r[u]):n[u]=r[u]});var a=this.constructor,o=new a({attrs:n});return(0,h.each)(ir,function(s){o.set(s,t.get(s))}),o},e.prototype.destroy=function(){var t=this.destroyed;t||(this.attrs={},i.prototype.destroy.call(this))},e.prototype.isAnimatePaused=function(){return this.get("_pause").isPaused},e.prototype.animate=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];if(!(!this.get("timeline")&&!this.get("canvas"))){this.set("animating",!0);var n=this.get("timeline");n||(n=this.get("canvas").get("timeline"),this.set("timeline",n));var a=this.get("animations")||[];n.timer||n.initTimer();var o=t[0],s=t[1],u=t[2],c=u===void 0?"easeLinear":u,f=t[3],l=f===void 0?h.noop:f,_=t[4],I=_===void 0?0:_,B,j,et,ut,ft;(0,h.isFunction)(o)?(B=o,o={}):(0,h.isObject)(o)&&o.onFrame&&(B=o.onFrame,j=o.repeat),(0,h.isObject)(s)?(ft=s,s=ft.duration,c=ft.easing||"easeLinear",I=ft.delay||0,j=ft.repeat||j||!1,l=ft.callback||h.noop,et=ft.pauseCallback||h.noop,ut=ft.resumeCallback||h.noop):((0,h.isNumber)(l)&&(I=l,l=null),(0,h.isFunction)(c)?(l=c,c="easeLinear"):c=c||"easeLinear");var gt=aa(o,this),Mt={fromAttrs:Vn(gt,this),toAttrs:gt,duration:s,easing:c,repeat:j,callback:l,pauseCallback:et,resumeCallback:ut,delay:I,startTime:n.getTime(),id:(0,h.uniqueId)(),onFrame:B,pathFormatted:!1};a.length>0?a=Zn(a,Mt):n.addAnimator(this),a.push(Mt),this.set("animations",a),this.set("_pause",{isPaused:!1})}},e.prototype.stopAnimate=function(t){var r=this;t===void 0&&(t=!0);var n=this.get("animations");(0,h.each)(n,function(a){t&&(a.onFrame?r.attr(a.onFrame(1)):r.attr(a.toAttrs)),a.callback&&a.callback()}),this.set("animating",!1),this.set("animations",[])},e.prototype.pauseAnimate=function(){var t=this.get("timeline"),r=this.get("animations"),n=t.getTime();return(0,h.each)(r,function(a){a._paused=!0,a._pauseTime=n,a.pauseCallback&&a.pauseCallback()}),this.set("_pause",{isPaused:!0,pauseTime:n}),this},e.prototype.resumeAnimate=function(){var t=this.get("timeline"),r=t.getTime(),n=this.get("animations"),a=this.get("_pause").pauseTime;return(0,h.each)(n,function(o){o.startTime=o.startTime+(r-a),o._paused=!1,o._pauseTime=null,o.resumeCallback&&o.resumeCallback()}),this.set("_pause",{isPaused:!1}),this.set("animations",n),this},e.prototype.emitDelegation=function(t,r){var n=this,a=r.propagationPath,o=this.getEvents(),s;t==="mouseenter"?s=r.fromShape:t==="mouseleave"&&(s=r.toShape);for(var u=function(_){var I=a[_],B=I.get("name");if(B){if((I.isGroup()||I.isCanvas&&I.isCanvas())&&s&&yf(I,s))return"break";(0,h.isArray)(B)?(0,h.each)(B,function(j){n.emitDelegateEvent(I,j,r)}):c.emitDelegateEvent(I,B,r)}},c=this,f=0;f<a.length;f++){var l=u(f);if(l==="break")break}},e.prototype.emitDelegateEvent=function(t,r,n){var a=this.getEvents(),o=r+Gr+n.type;(a[o]||a[gn])&&(n.name=o,n.currentTarget=t,n.delegateTarget=this,n.delegateObject=t.get("delegateObject"),this.emit(o,n))},e.prototype.translate=function(t,r){t===void 0&&(t=0),r===void 0&&(r=0);var n=this.getMatrix(),a=le(n,[["t",t,r]]);return this.setMatrix(a),this},e.prototype.move=function(t,r){var n=this.attr("x")||0,a=this.attr("y")||0;return this.translate(t-n,r-a),this},e.prototype.moveTo=function(t,r){return this.move(t,r)},e.prototype.scale=function(t,r){var n=this.getMatrix(),a=le(n,[["s",t,r||t]]);return this.setMatrix(a),this},e.prototype.rotate=function(t){var r=this.getMatrix(),n=le(r,[["r",t]]);return this.setMatrix(n),this},e.prototype.rotateAtStart=function(t){var r=this.attr(),n=r.x,a=r.y,o=this.getMatrix(),s=le(o,[["t",-n,-a],["r",t],["t",n,a]]);return this.setMatrix(s),this},e.prototype.rotateAtPoint=function(t,r,n){var a=this.getMatrix(),o=le(a,[["t",-t,-r],["r",n],["t",t,r]]);return this.setMatrix(o),this},e}(Bc),Qa=La,Ra={},Ca="_INDEX";function Ga(i,e){if(i.set("canvas",e),i.isGroup()){var t=i.get("children");t.length&&t.forEach(function(r){Ga(r,e)})}}function va(i,e){if(i.set("timeline",e),i.isGroup()){var t=i.get("children");t.length&&t.forEach(function(r){va(r,e)})}}function Ka(i,e){var t=i.getChildren();return t.indexOf(e)>=0}function Ua(i,e,t){t===void 0&&(t=!0),t?e.destroy():(e.set("parent",null),e.set("canvas",null)),Rc(i.getChildren(),e)}function ma(i){return function(e,t){var r=i(e,t);return r===0?e[Ca]-t[Ca]:r}}var ai=function(i){(0,y.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.isCanvas=function(){return!1},e.prototype.getBBox=function(){var t=1/0,r=-1/0,n=1/0,a=-1/0,o=this.getChildren().filter(function(u){return u.get("visible")&&(!u.isGroup()||u.isGroup()&&u.getChildren().length>0)});o.length>0?(0,h.each)(o,function(u){var c=u.getBBox(),f=c.minX,l=c.maxX,_=c.minY,I=c.maxY;f<t&&(t=f),l>r&&(r=l),_<n&&(n=_),I>a&&(a=I)}):(t=0,r=0,n=0,a=0);var s={x:t,y:n,minX:t,minY:n,maxX:r,maxY:a,width:r-t,height:a-n};return s},e.prototype.getCanvasBBox=function(){var t=1/0,r=-1/0,n=1/0,a=-1/0,o=this.getChildren().filter(function(u){return u.get("visible")&&(!u.isGroup()||u.isGroup()&&u.getChildren().length>0)});o.length>0?(0,h.each)(o,function(u){var c=u.getCanvasBBox(),f=c.minX,l=c.maxX,_=c.minY,I=c.maxY;f<t&&(t=f),l>r&&(r=l),_<n&&(n=_),I>a&&(a=I)}):(t=0,r=0,n=0,a=0);var s={x:t,y:n,minX:t,minY:n,maxX:r,maxY:a,width:r-t,height:a-n};return s},e.prototype.getDefaultCfg=function(){var t=i.prototype.getDefaultCfg.call(this);return t.children=[],t},e.prototype.onAttrChange=function(t,r,n){if(i.prototype.onAttrChange.call(this,t,r,n),t==="matrix"){var a=this.getTotalMatrix();this._applyChildrenMarix(a)}},e.prototype.applyMatrix=function(t){var r=this.getTotalMatrix();i.prototype.applyMatrix.call(this,t);var n=this.getTotalMatrix();n!==r&&this._applyChildrenMarix(n)},e.prototype._applyChildrenMarix=function(t){var r=this.getChildren();(0,h.each)(r,function(n){n.applyMatrix(t)})},e.prototype.addShape=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var n=t[0],a=t[1];(0,h.isObject)(n)?a=n:a.type=n;var o=Ra[a.type];o||(o=(0,h.upperFirst)(a.type),Ra[a.type]=o);var s=this.getShapeBase(),u=new s[o](a);return this.add(u),u},e.prototype.addGroup=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var n=t[0],a=t[1],o;if((0,h.isFunction)(n))a?o=new n(a):o=new n({parent:this});else{var s=n||{},u=this.getGroupBase();o=new u(s)}return this.add(o),o},e.prototype.getCanvas=function(){var t;return this.isCanvas()?t=this:t=this.get("canvas"),t},e.prototype.getShape=function(t,r,n){if(!kc(this))return null;var a=this.getChildren(),o;if(this.isCanvas())o=this._findShape(a,t,r,n);else{var s=[t,r,1];s=this.invertFromMatrix(s),this.isClipped(s[0],s[1])||(o=this._findShape(a,s[0],s[1],n))}return o},e.prototype._findShape=function(t,r,n,a){for(var o=null,s=t.length-1;s>=0;s--){var u=t[s];if(kc(u)&&(u.isGroup()?o=u.getShape(r,n,a):u.isHit(r,n)&&(o=u)),o)break}return o},e.prototype.add=function(t){var r=this.getCanvas(),n=this.getChildren(),a=this.get("timeline"),o=t.getParent();o&&Ua(o,t,!1),t.set("parent",this),r&&Ga(t,r),a&&va(t,a),n.push(t),t.onCanvasChange("add"),this._applyElementMatrix(t)},e.prototype._applyElementMatrix=function(t){var r=this.getTotalMatrix();r&&t.applyMatrix(r)},e.prototype.getChildren=function(){return this.get("children")},e.prototype.sort=function(){var t=this.getChildren();(0,h.each)(t,function(r,n){return r[Ca]=n,r}),t.sort(ma(function(r,n){return r.get("zIndex")-n.get("zIndex")})),this.onCanvasChange("sort")},e.prototype.clear=function(){if(this.set("clearing",!0),!this.destroyed){for(var t=this.getChildren(),r=t.length-1;r>=0;r--)t[r].destroy();this.set("children",[]),this.onCanvasChange("clear"),this.set("clearing",!1)}},e.prototype.destroy=function(){this.get("destroyed")||(this.clear(),i.prototype.destroy.call(this))},e.prototype.getFirst=function(){return this.getChildByIndex(0)},e.prototype.getLast=function(){var t=this.getChildren();return this.getChildByIndex(t.length-1)},e.prototype.getChildByIndex=function(t){var r=this.getChildren();return r[t]},e.prototype.getCount=function(){var t=this.getChildren();return t.length},e.prototype.contain=function(t){var r=this.getChildren();return r.indexOf(t)>-1},e.prototype.removeChild=function(t,r){r===void 0&&(r=!0),this.contain(t)&&t.remove(r)},e.prototype.findAll=function(t){var r=[],n=this.getChildren();return(0,h.each)(n,function(a){t(a)&&r.push(a),a.isGroup()&&(r=r.concat(a.findAll(t)))}),r},e.prototype.find=function(t){var r=null,n=this.getChildren();return(0,h.each)(n,function(a){if(t(a)?r=a:a.isGroup()&&(r=a.find(t)),r)return!1}),r},e.prototype.findById=function(t){return this.find(function(r){return r.get("id")===t})},e.prototype.findByClassName=function(t){return this.find(function(r){return r.get("className")===t})},e.prototype.findAllByName=function(t){return this.findAll(function(r){return r.get("name")===t})},e}(Qa),xi=ai,Ji=C(235374),_i=C(952677);function hi(i,e,t){i.prototype=e.prototype=t,t.constructor=i}function lo(i,e){var t=Object.create(i.prototype);for(var r in e)t[r]=e[r];return t}function wo(){}var ho=.7,Us=1/ho,iu="\\s*([+-]?\\d+)\\s*",Ps="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",As="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Vu=/^#([0-9a-f]{3,8})$/,Js=new RegExp("^rgb\\(".concat(iu,",").concat(iu,",").concat(iu,"\\)$")),Wc=new RegExp("^rgb\\(".concat(As,",").concat(As,",").concat(As,"\\)$")),ul=new RegExp("^rgba\\(".concat(iu,",").concat(iu,",").concat(iu,",").concat(Ps,"\\)$")),Hu=new RegExp("^rgba\\(".concat(As,",").concat(As,",").concat(As,",").concat(Ps,"\\)$")),uc=new RegExp("^hsl\\(".concat(Ps,",").concat(As,",").concat(As,"\\)$")),wf=new RegExp("^hsla\\(".concat(Ps,",").concat(As,",").concat(As,",").concat(Ps,"\\)$")),Iu={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};hi(wo,Ns,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:hu,formatHex:hu,formatHex8:Sf,formatHsl:Yc,formatRgb:Xc,toString:Xc});function hu(){return this.rgb().formatHex()}function Sf(){return this.rgb().formatHex8()}function Yc(){return Tf(this).formatHsl()}function Xc(){return this.rgb().formatRgb()}function Ns(i){var e,t;return i=(i+"").trim().toLowerCase(),(e=Vu.exec(i))?(t=e[1].length,e=parseInt(e[1],16),t===6?Ou(e):t===3?new us(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):t===8?cc(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):t===4?cc(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Js.exec(i))?new us(e[1],e[2],e[3],1):(e=Wc.exec(i))?new us(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=ul.exec(i))?cc(e[1],e[2],e[3],e[4]):(e=Hu.exec(i))?cc(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=uc.exec(i))?Cf(e[1],e[2]/100,e[3]/100,1):(e=wf.exec(i))?Cf(e[1],e[2]/100,e[3]/100,e[4]):Iu.hasOwnProperty(i)?Ou(Iu[i]):i==="transparent"?new us(NaN,NaN,NaN,0):null}function Ou(i){return new us(i>>16&255,i>>8&255,i&255,1)}function cc(i,e,t,r){return r<=0&&(i=e=t=NaN),new us(i,e,t,r)}function Mf(i){return i instanceof wo||(i=Ns(i)),i?(i=i.rgb(),new us(i.r,i.g,i.b,i.opacity)):new us}function _f(i,e,t,r){return arguments.length===1?Mf(i):new us(i,e,t,r==null?1:r)}function us(i,e,t,r){this.r=+i,this.g=+e,this.b=+t,this.opacity=+r}hi(us,_f,lo(wo,{brighter:function(e){return e=e==null?Us:Math.pow(Us,e),new us(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=e==null?ho:Math.pow(ho,e),new us(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},clamp:function(){return new us(Zs(this.r),Zs(this.g),Zs(this.b),jc(this.opacity))},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Zu,formatHex:Zu,formatHex8:Pl,formatRgb:Ku,toString:Ku}));function Zu(){return"#".concat(vu(this.r)).concat(vu(this.g)).concat(vu(this.b))}function Pl(){return"#".concat(vu(this.r)).concat(vu(this.g)).concat(vu(this.b)).concat(vu((isNaN(this.opacity)?1:this.opacity)*255))}function Ku(){var i=jc(this.opacity);return"".concat(i===1?"rgb(":"rgba(").concat(Zs(this.r),", ").concat(Zs(this.g),", ").concat(Zs(this.b)).concat(i===1?")":", ".concat(i,")"))}function jc(i){return isNaN(i)?1:Math.max(0,Math.min(1,i))}function Zs(i){return Math.max(0,Math.min(255,Math.round(i)||0))}function vu(i){return i=Zs(i),(i<16?"0":"")+i.toString(16)}function Cf(i,e,t,r){return r<=0?i=e=t=NaN:t<=0||t>=1?i=e=NaN:e<=0&&(i=NaN),new Ws(i,e,t,r)}function Tf(i){if(i instanceof Ws)return new Ws(i.h,i.s,i.l,i.opacity);if(i instanceof wo||(i=Ns(i)),!i)return new Ws;if(i instanceof Ws)return i;i=i.rgb();var e=i.r/255,t=i.g/255,r=i.b/255,n=Math.min(e,t,r),a=Math.max(e,t,r),o=NaN,s=a-n,u=(a+n)/2;return s?(e===a?o=(t-r)/s+(t<r)*6:t===a?o=(r-e)/s+2:o=(e-t)/s+4,s/=u<.5?a+n:2-a-n,o*=60):s=u>0&&u<1?0:o,new Ws(o,s,u,i.opacity)}function cl(i,e,t,r){return arguments.length===1?Tf(i):new Ws(i,e,t,r==null?1:r)}function Ws(i,e,t,r){this.h=+i,this.s=+e,this.l=+t,this.opacity=+r}hi(Ws,cl,lo(wo,{brighter:function(e){return e=e==null?Us:Math.pow(Us,e),new Ws(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=e==null?ho:Math.pow(ho,e),new Ws(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,a=2*r-n;return new us(Af(e>=240?e-240:e+120,a,n),Af(e,a,n),Af(e<120?e+240:e-120,a,n),this.opacity)},clamp:function(){return new Ws(Vc(this.h),Hc(this.s),Hc(this.l),jc(this.opacity))},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=jc(this.opacity);return"".concat(e===1?"hsl(":"hsla(").concat(Vc(this.h),", ").concat(Hc(this.s)*100,"%, ").concat(Hc(this.l)*100,"%").concat(e===1?")":", ".concat(e,")"))}}));function Vc(i){return i=(i||0)%360,i<0?i+360:i}function Hc(i){return Math.max(0,Math.min(1,i||0))}function Af(i,e,t){return(i<60?e+(t-e)*i/60:i<180?t:i<240?e+(t-e)*(240-i)/60:e)*255}function fl(i,e,t,r,n){var a=i*i,o=a*i;return((1-3*i+3*a-o)*e+(4-6*a+3*o)*t+(1+3*i+3*a-3*o)*r+o*n)/6}function Nl(i){var e=i.length-1;return function(t){var r=t<=0?t=0:t>=1?(t=1,e-1):Math.floor(t*e),n=i[r],a=i[r+1],o=r>0?i[r-1]:2*n-a,s=r<e-1?i[r+2]:2*a-n;return fl((t-r/e)*e,o,n,a,s)}}function Rl(i){var e=i.length;return function(t){var r=Math.floor(((t%=1)<0?++t:t)*e),n=i[(r+e-1)%e],a=i[r%e],o=i[(r+1)%e],s=i[(r+2)%e];return fl((t-r/e)*e,n,a,o,s)}}var Zc=function(i){return function(){return i}};function If(i,e){return function(t){return i+t*e}}function kl(i,e,t){return i=Math.pow(i,t),e=Math.pow(e,t)-i,t=1/t,function(r){return Math.pow(i+r*e,t)}}function fd(i,e){var t=e-i;return t?If(i,t>180||t<-180?t-360*Math.round(t/360):t):constant(isNaN(i)?e:i)}function Bl(i){return(i=+i)==1?fc:function(e,t){return t-e?kl(e,t,i):Zc(isNaN(e)?t:e)}}function fc(i,e){var t=e-i;return t?If(i,t):Zc(isNaN(i)?e:i)}var Of=function i(e){var t=Bl(e);function r(n,a){var o=t((n=_f(n)).r,(a=_f(a)).r),s=t(n.g,a.g),u=t(n.b,a.b),c=fc(n.opacity,a.opacity);return function(f){return n.r=o(f),n.g=s(f),n.b=u(f),n.opacity=c(f),n+""}}return r.gamma=i,r}(1);function er(i){return function(e){var t=e.length,r=new Array(t),n=new Array(t),a=new Array(t),o,s;for(o=0;o<t;++o)s=_f(e[o]),r[o]=s.r||0,n[o]=s.g||0,a[o]=s.b||0;return r=i(r),n=i(n),a=i(a),s.opacity=1,function(u){return s.r=r(u),s.g=n(u),s.b=a(u),s+""}}}var ld=er(Nl),Kc=er(Rl);function $c(i,e){e||(e=[]);var t=i?Math.min(e.length,i.length):0,r=e.slice(),n;return function(a){for(n=0;n<t;++n)r[n]=i[n]*(1-a)+e[n]*a;return r}}function ll(i){return ArrayBuffer.isView(i)&&!(i instanceof DataView)}function dl(i,e){return(ll(e)?$c:hl)(i,e)}function hl(i,e){var t=e?e.length:0,r=i?Math.min(t,i.length):0,n=new Array(r),a=new Array(t),o;for(o=0;o<r;++o)n[o]=Du(i[o],e[o]);for(;o<t;++o)a[o]=e[o];return function(s){for(o=0;o<r;++o)a[o]=n[o](s);return a}}function Fl(i,e){var t=new Date;return i=+i,e=+e,function(r){return t.setTime(i*(1-r)+e*r),t}}function $u(i,e){return i=+i,e=+e,function(t){return i*(1-t)+e*t}}function Df(i,e){var t={},r={},n;(i===null||_i(i)!=="object")&&(i={}),(e===null||_i(e)!=="object")&&(e={});for(n in e)n in i?t[n]=Du(i[n],e[n]):r[n]=e[n];return function(a){for(n in t)r[n]=t[n](a);return r}}var qc=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,lc=new RegExp(qc.source,"g");function rs(i){return function(){return i}}function dc(i){return function(e){return i(e)+""}}function vl(i,e){var t=qc.lastIndex=lc.lastIndex=0,r,n,a,o=-1,s=[],u=[];for(i=i+"",e=e+"";(r=qc.exec(i))&&(n=lc.exec(e));)(a=n.index)>t&&(a=e.slice(t,a),s[o]?s[o]+=a:s[++o]=a),(r=r[0])===(n=n[0])?s[o]?s[o]+=n:s[++o]=n:(s[++o]=null,u.push({i:o,x:$u(r,n)})),t=lc.lastIndex;return t<e.length&&(a=e.slice(t),s[o]?s[o]+=a:s[++o]=a),s.length<2?u[0]?dc(u[0].x):rs(e):(e=u.length,function(c){for(var f=0,l;f<e;++f)s[(l=u[f]).i]=l.x(c);return s.join("")})}function Du(i,e){var t=_i(e),r;return e==null||t==="boolean"?Zc(e):(t==="number"?$u:t==="string"?(r=Ns(e))?(e=r,Of):vl:e instanceof Ns?Of:e instanceof Date?Fl:ll(e)?$c:Array.isArray(e)?hl:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?Df:$u)(i,e)}function ou(i){return+i}function hc(i){return i*i}function qu(i){return i*(2-i)}function pu(i){return((i*=2)<=1?i*i:--i*(2-i)+1)/2}function vc(i){return i*i*i}function Qu(i){return--i*i*i+1}function Lu(i){return((i*=2)<=1?i*i*i:(i-=2)*i*i+2)/2}var gu=3,Lf=function i(e){e=+e;function t(r){return Math.pow(r,e)}return t.exponent=i,t}(gu),Pf=function i(e){e=+e;function t(r){return 1-Math.pow(1-r,e)}return t.exponent=i,t}(gu),pc=function i(e){e=+e;function t(r){return((r*=2)<=1?Math.pow(r,e):2-Math.pow(2-r,e))/2}return t.exponent=i,t}(gu),Nf=Math.PI,Rf=Nf/2;function gc(i){return+i==1?1:1-Math.cos(i*Rf)}function Ks(i){return Math.sin(i*Rf)}function kf(i){return(1-Math.cos(Nf*i))/2}function mu(i){return(Math.pow(2,-10*i)-.0009765625)*1.0009775171065494}function Bf(i){return mu(1-+i)}function pl(i){return 1-mu(i)}function Ff(i){return((i*=2)<=1?mu(1-i):2-mu(i-1))/2}function zl(i){return 1-Math.sqrt(1-i*i)}function Ju(i){return Math.sqrt(1- --i*i)}function gl(i){return((i*=2)<=1?1-Math.sqrt(1-i*i):Math.sqrt(1-(i-=2)*i)+1)/2}var zf=4/11,dd=6/11,Gl=8/11,Ul=3/4,hd=9/11,Wl=10/11,Yl=15/16,vd=21/22,Xl=63/64,Qc=1/zf/zf;function jl(i){return 1-mc(1-i)}function mc(i){return(i=+i)<zf?Qc*i*i:i<Gl?Qc*(i-=dd)*i+Ul:i<Wl?Qc*(i-=hd)*i+Yl:Qc*(i-=vd)*i+Xl}function ml(i){return((i*=2)<=1?1-mc(1-i):mc(i-1)+1)/2}var tc=1.70158,Gf=function i(e){e=+e;function t(r){return(r=+r)*r*(e*(r-1)+r)}return t.overshoot=i,t}(tc),Uf=function i(e){e=+e;function t(r){return--r*r*((r+1)*e+r)+1}return t.overshoot=i,t}(tc),Jc=function i(e){e=+e;function t(r){return((r*=2)<1?r*r*((e+1)*r-e):(r-=2)*r*((e+1)*r+e)+2)/2}return t.overshoot=i,t}(tc),Pu=2*Math.PI,yc=1,xc=.3,tf=function i(e,t){var r=Math.asin(1/(e=Math.max(1,e)))*(t/=Pu);function n(a){return e*mu(- --a)*Math.sin((r-a)/t)}return n.amplitude=function(a){return i(a,t*Pu)},n.period=function(a){return i(e,a)},n}(yc,xc),Wf=function i(e,t){var r=Math.asin(1/(e=Math.max(1,e)))*(t/=Pu);function n(a){return 1-e*mu(a=+a)*Math.sin((a+r)/t)}return n.amplitude=function(a){return i(a,t*Pu)},n.period=function(a){return i(e,a)},n}(yc,xc),Yf=function i(e,t){var r=Math.asin(1/(e=Math.max(1,e)))*(t/=Pu);function n(a){return((a=a*2-1)<0?e*mu(-a)*Math.sin((r-a)/t):2-e*mu(a)*Math.sin((r+a)/t))/2}return n.amplitude=function(a){return i(a,t*Pu)},n.period=function(a){return i(e,a)},n}(yc,xc),ef={};function Xf(i){return ef[i.toLowerCase()]||L[i]}function jf(i,e){ef[i.toLowerCase()]=e}var rf=function(i){return["fill","stroke","fillStyle","strokeStyle"].includes(i)},bc=function(i){return/^[r,R,L,l]{1}[\s]*\(/.test(i)},Ec=[1,0,0,0,1,0,0,0,1];function wc(i,e,t){var r={},n=e.fromAttrs,a=e.toAttrs;if(!i.destroyed){var o;for(var s in a)if(!(0,h.isEqual)(n[s],a[s]))if(s==="path"){var u=a[s],c=n[s];u.length>c.length?(u=d(a[s]),c=d(n[s]),c=fi(c,u),c=zs(c,u),e.fromAttrs.path=c,e.toAttrs.path=u):e.pathFormatted||(u=d(a[s]),c=d(n[s]),c=zs(c,u),e.fromAttrs.path=c,e.toAttrs.path=u,e.pathFormatted=!0),r[s]=[];for(var f=0;f<u.length;f++){for(var l=u[f],_=c[f],I=[],B=0;B<l.length;B++)(0,h.isNumber)(l[B])&&_&&(0,h.isNumber)(_[B])?(o=Du(_[B],l[B]),I.push(o(t))):I.push(l[B]);r[s].push(I)}}else if(s==="matrix"){var j=dl(n[s]||Ec,a[s]||Ec),et=j(t);r[s]=et}else rf(s)&&bc(a[s])?r[s]=a[s]:(0,h.isFunction)(a[s])||(o=Du(n[s],a[s]),r[s]=o(t));i.attr(r)}}function Vl(i,e,t){var r=e.startTime,n=e.delay;if(t<r+n||e._paused)return!1;var a,o=e.duration,s=e.easing,u=Xf(s);if(t=t-r-e.delay,e.repeat)a=t%o/o,a=u(a);else if(a=t/o,a<1)a=u(a);else return e.onFrame?i.attr(e.onFrame(1)):i.attr(e.toAttrs),!0;if(e.onFrame){var c=e.onFrame(a);i.attr(c)}else wc(i,e,a);return!1}var nf=function(){function i(e){this.animators=[],this.current=0,this.timer=null,this.canvas=e}return i.prototype.initTimer=function(){var e=this,t=!1,r,n,a;this.timer=Ji.HT(function(o){if(e.current=o,e.animators.length>0){for(var s=e.animators.length-1;s>=0;s--){if(r=e.animators[s],r.destroyed){e.removeAnimator(s);continue}if(!r.isAnimatePaused()){n=r.get("animations");for(var u=n.length-1;u>=0;u--)a=n[u],t=Vl(r,a,o),t&&(n.splice(u,1),t=!1,a.callback&&a.callback())}n.length===0&&e.removeAnimator(s)}var c=e.canvas.get("autoDraw");c||e.canvas.draw()}})},i.prototype.addAnimator=function(e){this.animators.push(e)},i.prototype.removeAnimator=function(e){this.animators.splice(e,1)},i.prototype.isAnimating=function(){return!!this.animators.length},i.prototype.stop=function(){this.timer&&this.timer.stop()},i.prototype.stopAllAnimations=function(e){e===void 0&&(e=!0),this.animators.forEach(function(t){t.stopAnimate(e)}),this.animators=[],this.canvas.draw()},i.prototype.getTime=function(){return this.current},i}(),ec=nf,Hl=40,af=0,pd=":",Zl=["mousedown","mouseup","dblclick","mouseout","mouseover","mousemove","mouseleave","mouseenter","touchstart","touchmove","touchend","dragenter","dragover","dragleave","drop","contextmenu","mousewheel"];function Ud(i,e){for(var t in i)if(i.hasOwnProperty(t)&&t.indexOf(pd+e)>=0)return!0;return!1}function yu(i,e,t){t.name=e,t.target=i,t.currentTarget=i,t.delegateTarget=i,i.emit(e,t)}function Kl(i,e,t){if(t.bubbles){var r=void 0,n=!1;if(e==="mouseenter"?(r=t.fromShape,n=!0):e==="mouseleave"&&(n=!0,r=t.toShape),i.isCanvas()&&n)return;if(r&&yf(i,r)){t.bubbles=!1;return}t.name=e,t.currentTarget=i,t.delegateTarget=i,i.emit(e,t)}}var $l=function(){function i(e){var t=this;this.draggingShape=null,this.dragging=!1,this.currentShape=null,this.mousedownShape=null,this.mousedownPoint=null,this._eventCallback=function(r){var n=r.type;t._triggerEvent(n,r)},this._onDocumentMove=function(r){var n=t.canvas,a=n.get("el");if(a!==r.target&&(t.dragging||t.currentShape)){var o=t._getPointInfo(r);t.dragging&&t._emitEvent("drag",r,o,t.draggingShape)}},this._onDocumentMouseUp=function(r){var n=t.canvas,a=n.get("el");if(a!==r.target&&t.dragging){var o=t._getPointInfo(r);t.draggingShape&&t._emitEvent("drop",r,o,null),t._emitEvent("dragend",r,o,t.draggingShape),t._afterDrag(t.draggingShape,o,r)}},this.canvas=e.canvas}return i.prototype.init=function(){this._bindEvents()},i.prototype._bindEvents=function(){var e=this,t=this.canvas.get("el");(0,h.each)(Zl,function(r){t.addEventListener(r,e._eventCallback)}),document&&(document.addEventListener("mousemove",this._onDocumentMove),document.addEventListener("mouseup",this._onDocumentMouseUp))},i.prototype._clearEvents=function(){var e=this,t=this.canvas.get("el");(0,h.each)(Zl,function(r){t.removeEventListener(r,e._eventCallback)}),document&&(document.removeEventListener("mousemove",this._onDocumentMove),document.removeEventListener("mouseup",this._onDocumentMouseUp))},i.prototype._getEventObj=function(e,t,r,n,a,o){var s=new lu(e,t);return s.fromShape=a,s.toShape=o,s.x=r.x,s.y=r.y,s.clientX=r.clientX,s.clientY=r.clientY,s.propagationPath.push(n),s},i.prototype._getShape=function(e,t){return this.canvas.getShape(e.x,e.y,t)},i.prototype._getPointInfo=function(e){var t=this.canvas,r=t.getClientByEvent(e),n=t.getPointByEvent(e);return{x:n.x,y:n.y,clientX:r.x,clientY:r.y}},i.prototype._triggerEvent=function(e,t){var r=this._getPointInfo(t),n=this._getShape(r,t),a=this["_on"+e],o=!1;if(a)a.call(this,r,n,t);else{var s=this.currentShape;e==="mouseenter"||e==="dragenter"||e==="mouseover"?(this._emitEvent(e,t,r,null,null,n),n&&this._emitEvent(e,t,r,n,null,n),e==="mouseenter"&&this.draggingShape&&this._emitEvent("dragenter",t,r,null)):e==="mouseleave"||e==="dragleave"||e==="mouseout"?(o=!0,s&&this._emitEvent(e,t,r,s,s,null),this._emitEvent(e,t,r,null,s,null),e==="mouseleave"&&this.draggingShape&&this._emitEvent("dragleave",t,r,null)):this._emitEvent(e,t,r,n,null,null)}if(o||(this.currentShape=n),n&&!n.get("destroyed")){var u=this.canvas,c=u.get("el");c.style.cursor=n.attr("cursor")||u.get("cursor")}},i.prototype._onmousedown=function(e,t,r){r.button===af&&(this.mousedownShape=t,this.mousedownPoint=e,this.mousedownTimeStamp=r.timeStamp),this._emitEvent("mousedown",r,e,t,null,null)},i.prototype._emitMouseoverEvents=function(e,t,r,n){var a=this.canvas.get("el");r!==n&&(r&&(this._emitEvent("mouseout",e,t,r,r,n),this._emitEvent("mouseleave",e,t,r,r,n),(!n||n.get("destroyed"))&&(a.style.cursor=this.canvas.get("cursor"))),n&&(this._emitEvent("mouseover",e,t,n,r,n),this._emitEvent("mouseenter",e,t,n,r,n)))},i.prototype._emitDragoverEvents=function(e,t,r,n,a){n?(n!==r&&(r&&this._emitEvent("dragleave",e,t,r,r,n),this._emitEvent("dragenter",e,t,n,r,n)),a||this._emitEvent("dragover",e,t,n)):r&&this._emitEvent("dragleave",e,t,r,r,n),a&&this._emitEvent("dragover",e,t,n)},i.prototype._afterDrag=function(e,t,r){e&&(e.set("capture",!0),this.draggingShape=null),this.dragging=!1;var n=this._getShape(t,r);n!==e&&this._emitMouseoverEvents(r,t,e,n),this.currentShape=n},i.prototype._onmouseup=function(e,t,r){if(r.button===af){var n=this.draggingShape;this.dragging?(n&&this._emitEvent("drop",r,e,t),this._emitEvent("dragend",r,e,n),this._afterDrag(n,e,r)):(this._emitEvent("mouseup",r,e,t),t===this.mousedownShape&&this._emitEvent("click",r,e,t),this.mousedownShape=null,this.mousedownPoint=null)}},i.prototype._ondragover=function(e,t,r){r.preventDefault();var n=this.currentShape;this._emitDragoverEvents(r,e,n,t,!0)},i.prototype._onmousemove=function(e,t,r){var n=this.canvas,a=this.currentShape,o=this.draggingShape;if(this.dragging)o&&this._emitDragoverEvents(r,e,a,t,!1),this._emitEvent("drag",r,e,o);else{var s=this.mousedownPoint;if(s){var u=this.mousedownShape,c=r.timeStamp,f=c-this.mousedownTimeStamp,l=s.clientX-e.clientX,_=s.clientY-e.clientY,I=l*l+_*_;f>120||I>Hl?u&&u.get("draggable")?(o=this.mousedownShape,o.set("capture",!1),this.draggingShape=o,this.dragging=!0,this._emitEvent("dragstart",r,e,o),this.mousedownShape=null,this.mousedownPoint=null):!u&&n.get("draggable")?(this.dragging=!0,this._emitEvent("dragstart",r,e,null),this.mousedownShape=null,this.mousedownPoint=null):(this._emitMouseoverEvents(r,e,a,t),this._emitEvent("mousemove",r,e,t)):(this._emitMouseoverEvents(r,e,a,t),this._emitEvent("mousemove",r,e,t))}else this._emitMouseoverEvents(r,e,a,t),this._emitEvent("mousemove",r,e,t)}},i.prototype._emitEvent=function(e,t,r,n,a,o){var s=this._getEventObj(e,t,r,n,a,o);if(n){s.shape=n,yu(n,e,s);for(var u=n.getParent();u;)u.emitDelegation(e,s),s.propagationStopped||Kl(u,e,s),s.propagationPath.push(u),u=u.getParent()}else{var c=this.canvas;yu(c,e,s)}},i.prototype.destroy=function(){this._clearEvents(),this.canvas=null,this.currentShape=null,this.draggingShape=null,this.mousedownPoint=null,this.mousedownShape=null,this.mousedownTimeStamp=null},i}(),ql=$l,Ql="px",yl=au(),gd=yl&&yl.name==="firefox",ms=function(i){(0,y.__extends)(e,i);function e(t){var r=i.call(this,t)||this;return r.initContainer(),r.initDom(),r.initEvents(),r.initTimeline(),r}return e.prototype.getDefaultCfg=function(){var t=i.prototype.getDefaultCfg.call(this);return t.cursor="default",t.supportCSSTransform=!1,t},e.prototype.initContainer=function(){var t=this.get("container");(0,h.isString)(t)&&(t=document.getElementById(t),this.set("container",t))},e.prototype.initDom=function(){var t=this.createDom();this.set("el",t);var r=this.get("container");r.appendChild(t),this.setDOMSize(this.get("width"),this.get("height"))},e.prototype.initEvents=function(){var t=new ql({canvas:this});t.init(),this.set("eventController",t)},e.prototype.initTimeline=function(){var t=new ec(this);this.set("timeline",t)},e.prototype.setDOMSize=function(t,r){var n=this.get("el");mf&&(n.style.width=t+Ql,n.style.height=r+Ql)},e.prototype.changeSize=function(t,r){this.setDOMSize(t,r),this.set("width",t),this.set("height",r),this.onCanvasChange("changeSize")},e.prototype.getRenderer=function(){return this.get("renderer")},e.prototype.getCursor=function(){return this.get("cursor")},e.prototype.setCursor=function(t){this.set("cursor",t);var r=this.get("el");mf&&r&&(r.style.cursor=t)},e.prototype.getPointByEvent=function(t){var r=this.get("supportCSSTransform");if(r){if(gd&&!(0,h.isNil)(t.layerX)&&t.layerX!==t.offsetX)return{x:t.layerX,y:t.layerY};if(!(0,h.isNil)(t.offsetX))return{x:t.offsetX,y:t.offsetY}}var n=this.getClientByEvent(t),a=n.x,o=n.y;return this.getPointByClient(a,o)},e.prototype.getClientByEvent=function(t){var r=t;return t.touches&&(t.type==="touchend"?r=t.changedTouches[0]:r=t.touches[0]),{x:r.clientX,y:r.clientY}},e.prototype.getPointByClient=function(t,r){var n=this.get("el"),a=n.getBoundingClientRect();return{x:t-a.left,y:r-a.top}},e.prototype.getClientByPoint=function(t,r){var n=this.get("el"),a=n.getBoundingClientRect();return{x:t+a.left,y:r+a.top}},e.prototype.draw=function(){},e.prototype.removeDom=function(){var t=this.get("el");t.parentNode.removeChild(t)},e.prototype.clearEvents=function(){var t=this.get("eventController");t.destroy()},e.prototype.isCanvas=function(){return!0},e.prototype.getParent=function(){return null},e.prototype.destroy=function(){var t=this.get("timeline");this.get("destroyed")||(this.clear(),t&&t.stop(),this.clearEvents(),this.removeDom(),i.prototype.destroy.call(this))},e}(xi),xl=ms,Sc=function(i){(0,y.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.isGroup=function(){return!0},e.prototype.isEntityGroup=function(){return!1},e.prototype.clone=function(){for(var t=i.prototype.clone.call(this),r=this.getChildren(),n=0;n<r.length;n++){var a=r[n];t.add(a.clone())}return t},e}(xi),xu=Sc,Jl=function(i){(0,y.__extends)(e,i);function e(t){return i.call(this,t)||this}return e.prototype._isInBBox=function(t,r){var n=this.getBBox();return n.minX<=t&&n.maxX>=t&&n.minY<=r&&n.maxY>=r},e.prototype.afterAttrsChange=function(t){i.prototype.afterAttrsChange.call(this,t),this.clearCacheBBox()},e.prototype.getBBox=function(){var t=this.cfg.bbox;return t||(t=this.calculateBBox(),this.set("bbox",t)),t},e.prototype.getCanvasBBox=function(){var t=this.cfg.canvasBBox;return t||(t=this.calculateCanvasBBox(),this.set("canvasBBox",t)),t},e.prototype.applyMatrix=function(t){i.prototype.applyMatrix.call(this,t),this.set("canvasBBox",null)},e.prototype.calculateCanvasBBox=function(){var t=this.getBBox(),r=this.getTotalMatrix(),n=t.minX,a=t.minY,o=t.maxX,s=t.maxY;if(r){var u=Lt(r,[t.minX,t.minY]),c=Lt(r,[t.maxX,t.minY]),f=Lt(r,[t.minX,t.maxY]),l=Lt(r,[t.maxX,t.maxY]);n=Math.min(u[0],c[0],f[0],l[0]),o=Math.max(u[0],c[0],f[0],l[0]),a=Math.min(u[1],c[1],f[1],l[1]),s=Math.max(u[1],c[1],f[1],l[1])}var _=this.attrs;if(_.shadowColor){var I=_.shadowBlur,B=I===void 0?0:I,j=_.shadowOffsetX,et=j===void 0?0:j,ut=_.shadowOffsetY,ft=ut===void 0?0:ut,gt=n-B+et,Mt=o+B+et,Ht=a-B+ft,se=s+B+ft;n=Math.min(n,gt),o=Math.max(o,Mt),a=Math.min(a,Ht),s=Math.max(s,se)}return{x:n,y:a,minX:n,minY:a,maxX:o,maxY:s,width:o-n,height:s-a}},e.prototype.clearCacheBBox=function(){this.set("bbox",null),this.set("canvasBBox",null)},e.prototype.isClipShape=function(){return this.get("isClipShape")},e.prototype.isInShape=function(t,r){return!1},e.prototype.isOnlyHitBox=function(){return!1},e.prototype.isHit=function(t,r){var n=this.get("startArrowShape"),a=this.get("endArrowShape"),o=[t,r,1];o=this.invertFromMatrix(o);var s=o[0],u=o[1],c=this._isInBBox(s,u);return this.isOnlyHitBox()?c:!!(c&&!this.isClipped(s,u)&&(this.isInShape(s,u)||n&&n.isHit(s,u)||a&&a.isHit(s,u)))},e}(Qa),Vf=Jl,of=new Map;function tu(i,e){of.set(i,e)}function Es(i){return of.get(i)}function bu(i){var e=i.attr(),t=e.x,r=e.y,n=e.width,a=e.height;return{x:t,y:r,width:n,height:a}}function Xo(i){var e=i.attr(),t=e.x,r=e.y,n=e.r;return{x:t-n,y:r-n,width:n*2,height:n*2}}function Vi(i,e,t,r){var n=i-t,a=e-r;return Math.sqrt(n*n+a*a)}function rc(i,e){return Math.abs(i-e)<.001}function Mc(i,e){var t=(0,h.min)(i),r=(0,h.min)(e),n=(0,h.max)(i),a=(0,h.max)(e);return{x:t,y:r,width:n-t,height:a-r}}function md(i,e,t,r){return{minX:(0,h.min)([i,t]),maxX:(0,h.max)([i,t]),minY:(0,h.min)([e,r]),maxY:(0,h.max)([e,r])}}function Hf(i){return(i+Math.PI*2)%(Math.PI*2)}var hs={box:function(i,e,t,r){return Mc([i,t],[e,r])},length:function(i,e,t,r){return Vi(i,e,t,r)},pointAt:function(i,e,t,r,n){return{x:(1-n)*i+n*t,y:(1-n)*e+n*r}},pointDistance:function(i,e,t,r,n,a){var o=(t-i)*(n-i)+(r-e)*(a-e);if(o<0)return Vi(i,e,n,a);var s=(t-i)*(t-i)+(r-e)*(r-e);return o>s?Vi(t,r,n,a):this.pointToLine(i,e,t,r,n,a)},pointToLine:function(i,e,t,r,n,a){var o=[t-i,r-e];if(oa.exactEquals(o,[0,0]))return Math.sqrt((n-i)*(n-i)+(a-e)*(a-e));var s=[-o[1],o[0]];oa.normalize(s,s);var u=[n-i,a-e];return Math.abs(oa.dot(u,s))},tangentAngle:function(i,e,t,r){return Math.atan2(r-e,t-i)}},td=1e-4;function ed(i,e,t,r,n,a){var o,s=1/0,u=[t,r],c=20;a&&a>200&&(c=a/10);for(var f=1/c,l=f/10,_=0;_<=c;_++){var I=_*f,B=[n.apply(null,i.concat([I])),n.apply(null,e.concat([I]))],j=Vi(u[0],u[1],B[0],B[1]);j<s&&(o=I,s=j)}if(o===0)return{x:i[0],y:e[0]};if(o===1){var et=i.length;return{x:i[et-1],y:e[et-1]}}s=1/0;for(var _=0;_<32&&!(l<td);_++){var ut=o-l,ft=o+l,B=[n.apply(null,i.concat([ut])),n.apply(null,e.concat([ut]))],j=Vi(u[0],u[1],B[0],B[1]);if(ut>=0&&j<s)o=ut,s=j;else{var gt=[n.apply(null,i.concat([ft])),n.apply(null,e.concat([ft]))],Mt=Vi(u[0],u[1],gt[0],gt[1]);ft<=1&&Mt<s?(o=ft,s=Mt):l*=.5}}return{x:n.apply(null,i.concat([o])),y:n.apply(null,e.concat([o]))}}function yd(i,e){for(var t=0,r=i.length,n=0;n<r;n++){var a=i[n],o=e[n],s=i[(n+1)%r],u=e[(n+1)%r];t+=Vi(a,o,s,u)}return t/2}function Nu(i,e,t,r){var n=1-r;return n*n*i+2*r*n*e+r*r*t}function rd(i,e,t){var r=i+t-2*e;if(rc(r,0))return[.5];var n=(i-e)/r;return n<=1&&n>=0?[n]:[]}function bl(i,e,t,r){return 2*(1-r)*(e-i)+2*r*(t-e)}function Zf(i,e,t,r,n,a,o){var s=Nu(i,t,n,o),u=Nu(e,r,a,o),c=hs.pointAt(i,e,t,r,o),f=hs.pointAt(t,r,n,a,o);return[[i,e,c.x,c.y,s,u],[s,u,f.x,f.y,n,a]]}function _c(i,e,t,r,n,a,o){if(o===0)return(Vi(i,e,t,r)+Vi(t,r,n,a)+Vi(i,e,n,a))/2;var s=Zf(i,e,t,r,n,a,.5),u=s[0],c=s[1];return u.push(o-1),c.push(o-1),_c.apply(null,u)+_c.apply(null,c)}var El={box:function(i,e,t,r,n,a){var o=rd(i,t,n)[0],s=rd(e,r,a)[0],u=[i,n],c=[e,a];return o!==void 0&&u.push(Nu(i,t,n,o)),s!==void 0&&c.push(Nu(e,r,a,s)),Mc(u,c)},length:function(i,e,t,r,n,a){return _c(i,e,t,r,n,a,3)},nearestPoint:function(i,e,t,r,n,a,o,s){return ed([i,t,n],[e,r,a],o,s,Nu)},pointDistance:function(i,e,t,r,n,a,o,s){var u=this.nearestPoint(i,e,t,r,n,a,o,s);return Vi(u.x,u.y,o,s)},interpolationAt:Nu,pointAt:function(i,e,t,r,n,a,o){return{x:Nu(i,t,n,o),y:Nu(e,r,a,o)}},divide:function(i,e,t,r,n,a,o){return Zf(i,e,t,r,n,a,o)},tangentAngle:function(i,e,t,r,n,a,o){var s=bl(i,t,n,o),u=bl(e,r,a,o),c=Math.atan2(u,s);return Hf(c)}};function Ru(i,e,t,r,n){var a=1-n;return a*a*a*i+3*e*n*a*a+3*t*n*n*a+r*n*n*n}function wl(i,e,t,r,n){var a=1-n;return 3*(a*a*(e-i)+2*a*n*(t-e)+n*n*(r-t))}function Kf(i,e,t,r){var n=-3*i+9*e-9*t+3*r,a=6*i-12*e+6*t,o=3*e-3*i,s=[],u,c,f;if(rc(n,0))rc(a,0)||(u=-o/a,u>=0&&u<=1&&s.push(u));else{var l=a*a-4*n*o;rc(l,0)?s.push(-a/(2*n)):l>0&&(f=Math.sqrt(l),u=(-a+f)/(2*n),c=(-a-f)/(2*n),u>=0&&u<=1&&s.push(u),c>=0&&c<=1&&s.push(c))}return s}function sf(i,e,t,r,n,a,o,s,u){var c=Ru(i,t,n,o,u),f=Ru(e,r,a,s,u),l=hs.pointAt(i,e,t,r,u),_=hs.pointAt(t,r,n,a,u),I=hs.pointAt(n,a,o,s,u),B=hs.pointAt(l.x,l.y,_.x,_.y,u),j=hs.pointAt(_.x,_.y,I.x,I.y,u);return[[i,e,l.x,l.y,B.x,B.y,c,f],[c,f,j.x,j.y,I.x,I.y,o,s]]}function Rt(i,e,t,r,n,a,o,s,u){if(u===0)return yd([i,t,n,o],[e,r,a,s]);var c=sf(i,e,t,r,n,a,o,s,.5),f=c[0],l=c[1];return f.push(u-1),l.push(u-1),Rt.apply(null,f)+Rt.apply(null,l)}var Te={extrema:Kf,box:function(i,e,t,r,n,a,o,s){for(var u=[i,o],c=[e,s],f=Kf(i,t,n,o),l=Kf(e,r,a,s),_=0;_<f.length;_++)u.push(Ru(i,t,n,o,f[_]));for(var _=0;_<l.length;_++)c.push(Ru(e,r,a,s,l[_]));return Mc(u,c)},length:function(i,e,t,r,n,a,o,s){return Rt(i,e,t,r,n,a,o,s,3)},nearestPoint:function(i,e,t,r,n,a,o,s,u,c,f){return ed([i,t,n,o],[e,r,a,s],u,c,Ru,f)},pointDistance:function(i,e,t,r,n,a,o,s,u,c,f){var l=this.nearestPoint(i,e,t,r,n,a,o,s,u,c,f);return Vi(l.x,l.y,u,c)},interpolationAt:Ru,pointAt:function(i,e,t,r,n,a,o,s,u){return{x:Ru(i,t,n,o,u),y:Ru(e,r,a,s,u)}},divide:function(i,e,t,r,n,a,o,s,u){return sf(i,e,t,r,n,a,o,s,u)},tangentAngle:function(i,e,t,r,n,a,o,s,u){var c=wl(i,t,n,o,u),f=wl(e,r,a,s,u);return Hf(Math.atan2(f,c))}};function je(i,e){var t=Math.abs(i);return e>0?t:t*-1}var zr={box:function(i,e,t,r){return{x:i-t,y:e-r,width:t*2,height:r*2}},length:function(i,e,t,r){return Math.PI*(3*(t+r)-Math.sqrt((3*t+r)*(t+3*r)))},nearestPoint:function(i,e,t,r,n,a){var o=t,s=r;if(o===0||s===0)return{x:i,y:e};for(var u=n-i,c=a-e,f=Math.abs(u),l=Math.abs(c),_=o*o,I=s*s,B=Math.PI/4,j,et,ut=0;ut<4;ut++){j=o*Math.cos(B),et=s*Math.sin(B);var ft=(_-I)*Math.pow(Math.cos(B),3)/o,gt=(I-_)*Math.pow(Math.sin(B),3)/s,Mt=j-ft,Ht=et-gt,se=f-ft,oe=l-gt,_e=Math.hypot(Ht,Mt),Ue=Math.hypot(oe,se),Ne=_e*Math.asin((Mt*oe-Ht*se)/(_e*Ue)),Qe=Ne/Math.sqrt(_+I-j*j-et*et);B+=Qe,B=Math.min(Math.PI/2,Math.max(0,B))}return{x:i+je(j,u),y:e+je(et,c)}},pointDistance:function(i,e,t,r,n,a){var o=this.nearestPoint(i,e,t,r,n,a);return Vi(o.x,o.y,n,a)},pointAt:function(i,e,t,r,n){var a=2*Math.PI*n;return{x:i+t*Math.cos(a),y:e+r*Math.sin(a)}},tangentAngle:function(i,e,t,r,n){var a=2*Math.PI*n,o=Math.atan2(r*Math.cos(a),-t*Math.sin(a));return Hf(o)}};function rn(i,e,t,r,n,a,o,s){return-1*t*Math.cos(n)*Math.sin(s)-r*Math.sin(n)*Math.cos(s)}function Fr(i,e,t,r,n,a,o,s){return-1*t*Math.sin(n)*Math.sin(s)+r*Math.cos(n)*Math.cos(s)}function Xr(i,e,t){return Math.atan(-e/i*Math.tan(t))}function bn(i,e,t){return Math.atan(e/(i*Math.tan(t)))}function wn(i,e,t,r,n,a){return t*Math.cos(n)*Math.cos(a)-r*Math.sin(n)*Math.sin(a)+i}function Tn(i,e,t,r,n,a){return t*Math.sin(n)*Math.cos(a)+r*Math.cos(n)*Math.sin(a)+e}function Sn(i,e,t,r){var n=Math.atan2(r*i,t*e);return(n+Math.PI*2)%(Math.PI*2)}function Nn(i,e,t){return{x:i*Math.cos(t),y:e*Math.sin(t)}}function v(i,e,t){var r=Math.cos(t),n=Math.sin(t);return[i*r-e*n,i*n+e*r]}var N={box:function(i,e,t,r,n,a,o){for(var s=Xr(t,r,n),u=1/0,c=-1/0,f=[a,o],l=-Math.PI*2;l<=Math.PI*2;l+=Math.PI){var _=s+l;a<o?a<_&&_<o&&f.push(_):o<_&&_<a&&f.push(_)}for(var l=0;l<f.length;l++){var I=wn(i,e,t,r,n,f[l]);I<u&&(u=I),I>c&&(c=I)}for(var B=bn(t,r,n),j=1/0,et=-1/0,ut=[a,o],l=-Math.PI*2;l<=Math.PI*2;l+=Math.PI){var ft=B+l;a<o?a<ft&&ft<o&&ut.push(ft):o<ft&&ft<a&&ut.push(ft)}for(var l=0;l<ut.length;l++){var gt=Tn(i,e,t,r,n,ut[l]);gt<j&&(j=gt),gt>et&&(et=gt)}return{x:u,y:j,width:c-u,height:et-j}},length:function(i,e,t,r,n,a,o){},nearestPoint:function(i,e,t,r,n,a,o,s,u){var c=v(s-i,u-e,-n),f=c[0],l=c[1],_=zr.nearestPoint(0,0,t,r,f,l),I=Sn(t,r,_.x,_.y);I<a?_=Nn(t,r,a):I>o&&(_=Nn(t,r,o));var B=v(_.x,_.y,n);return{x:B[0]+i,y:B[1]+e}},pointDistance:function(i,e,t,r,n,a,o,s,u){var c=this.nearestPoint(i,e,t,r,s,u);return Vi(c.x,c.y,s,u)},pointAt:function(i,e,t,r,n,a,o,s){var u=(o-a)*s+a;return{x:wn(i,e,t,r,n,u),y:Tn(i,e,t,r,n,u)}},tangentAngle:function(i,e,t,r,n,a,o,s){var u=(o-a)*s+a,c=rn(i,e,t,r,n,a,o,u),f=Fr(i,e,t,r,n,a,o,u);return Hf(Math.atan2(f,c))}};function K(i){for(var e=0,t=[],r=0;r<i.length-1;r++){var n=i[r],a=i[r+1],o=Vi(n[0],n[1],a[0],a[1]),s={from:n,to:a,length:o};t.push(s),e+=o}return{segments:t,totalLength:e}}function st(i){if(i.length<2)return 0;for(var e=0,t=0;t<i.length-1;t++){var r=i[t],n=i[t+1];e+=Vi(r[0],r[1],n[0],n[1])}return e}function ht(i,e){if(e>1||e<0||i.length<2)return null;var t=K(i),r=t.segments,n=t.totalLength;if(n===0)return{x:i[0][0],y:i[0][1]};for(var a=0,o=null,s=0;s<r.length;s++){var u=r[s],c=u.from,f=u.to,l=u.length/n;if(e>=a&&e<=a+l){var _=(e-a)/l;o=hs.pointAt(c[0],c[1],f[0],f[1],_);break}a+=l}return o}function yt(i,e){if(e>1||e<0||i.length<2)return 0;for(var t=K(i),r=t.segments,n=t.totalLength,a=0,o=0,s=0;s<r.length;s++){var u=r[s],c=u.from,f=u.to,l=u.length/n;if(e>=a&&e<=a+l){o=Math.atan2(f[1]-c[1],f[0]-c[0]);break}a+=l}return o}function Ot(i,e,t){for(var r=1/0,n=0;n<i.length-1;n++){var a=i[n],o=i[n+1],s=hs.pointDistance(a[0],a[1],o[0],o[1],e,t);s<r&&(r=s)}return r}var zt={box:function(i){for(var e=[],t=[],r=0;r<i.length;r++){var n=i[r];e.push(n[0]),t.push(n[1])}return Mc(e,t)},length:function(i){return st(i)},pointAt:function(i,e){return ht(i,e)},pointDistance:function(i,e,t){return Ot(i,e,t)},tangentAngle:function(i,e){return yt(i,e)}};function Zt(i){var e=i.slice(0);return i.length&&e.push(i[0]),e}var ce={box:function(i){return zt.box(i)},length:function(i){return st(Zt(i))},pointAt:function(i,e){return ht(Zt(i),e)},pointDistance:function(i,e,t){return Ot(Zt(i),e,t)},tangentAngle:function(i,e){return yt(Zt(i),e)}};function Me(i,e){return!i||!e?i||e:{minX:Math.min(i.minX,e.minX),minY:Math.min(i.minY,e.minY),maxX:Math.max(i.maxX,e.maxX),maxY:Math.max(i.maxY,e.maxY)}}function xe(i,e){var t=i.get("startArrowShape"),r=i.get("endArrowShape"),n=null,a=null;return t&&(n=t.getCanvasBBox(),e=Me(e,n)),r&&(a=r.getCanvasBBox(),e=Me(e,a)),e}function Ye(i){for(var e=i.attr(),t=e.points,r=[],n=[],a=0;a<t.length;a++){var o=t[a];r.push(o[0]),n.push(o[1])}var s=Mc(r,n),u=s.x,c=s.y,f=s.width,l=s.height,_={minX:u,minY:c,maxX:u+f,maxY:c+l};return _=xe(i,_),{x:_.minX,y:_.minY,width:_.maxX-_.minX,height:_.maxY-_.minY}}function fr(i){for(var e=i.attr(),t=e.points,r=[],n=[],a=0;a<t.length;a++){var o=t[a];r.push(o[0]),n.push(o[1])}return Mc(r,n)}var Vr=null;function mr(){if(!Vr){var i=document.createElement("canvas");i.width=1,i.height=1,Vr=i.getContext("2d")}return Vr}function br(i,e,t){var r=1;if((0,h.isString)(i)&&(r=i.split(`
`).length),r>1){var n=Er(e,t);return e*r+n*(r-1)}return e}function Er(i,e){return e?e-i:i*.14}function Mn(i,e){var t=mr(),r=0;if((0,h.isNil)(i)||i==="")return r;if(t.save(),t.font=e,(0,h.isString)(i)&&i.includes(`
`)){var n=i.split(`
`);(0,h.each)(n,function(a){var o=t.measureText(a).width;r<o&&(r=o)})}else r=t.measureText(i).width;return t.restore(),r}function Xn(i){var e=i.fontSize,t=i.fontFamily,r=i.fontWeight,n=i.fontStyle,a=i.fontVariant;return[n,a,r,e+"px",t].join(" ").trim()}function Rn(i){var e=i.attr(),t=e.x,r=e.y,n=e.text,a=e.fontSize,o=e.lineHeight,s=e.font;s||(s=Xn(e));var u=Mn(n,s),c;if(!u)c={x:t,y:r,width:0,height:0};else{var f=e.textAlign,l=e.textBaseline,_=br(n,a,o),I={x:t,y:r-_};f&&(f==="end"||f==="right"?I.x-=u:f==="center"&&(I.x-=u/2)),l&&(l==="top"?I.y+=_:l==="middle"&&(I.y+=_/2)),c={x:I.x,y:I.y,width:u,height:_}}return c}var da=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/ig,fa=/[^\s\,]+/ig;function wa(i){var e=i||[];if((0,h.isArray)(e))return e;if((0,h.isString)(e))return e=e.match(da),(0,h.each)(e,function(t,r){if(t=t.match(fa),t[0].length>1){var n=t[0].charAt(0);t.splice(1,0,t[0].substr(1)),t[0]=n}(0,h.each)(t,function(a,o){isNaN(a)||(t[o]=+a)}),e[r]=t}),e}var Ba=wa;function Da(i,e,t,r){var n=[],a=!!r,o,s,u,c,f,l,_;if(a){u=r[0],c=r[1];for(var I=0,B=i.length;I<B;I+=1){var j=i[I];u=oa.min([0,0],u,j),c=oa.max([0,0],c,j)}}for(var I=0,et=i.length;I<et;I+=1){var j=i[I];if(I===0&&!t)_=j;else if(I===et-1&&!t)l=j,n.push(_),n.push(l);else{var ut=[I?I-1:et-1,I-1][t?0:1];o=i[ut],s=i[t?(I+1)%et:I+1];var ft=[0,0];ft=oa.sub(ft,s,o),ft=oa.scale(ft,ft,e);var gt=oa.distance(j,o),Mt=oa.distance(j,s),Ht=gt+Mt;Ht!==0&&(gt/=Ht,Mt/=Ht);var se=oa.scale([0,0],ft,-gt),oe=oa.scale([0,0],ft,Mt);l=oa.add([0,0],j,se),f=oa.add([0,0],j,oe),f=oa.min([0,0],f,oa.max([0,0],s,j)),f=oa.max([0,0],f,oa.min([0,0],s,j)),se=oa.sub([0,0],f,j),se=oa.scale([0,0],se,-gt/Mt),l=oa.add([0,0],j,se),l=oa.min([0,0],l,oa.max([0,0],o,j)),l=oa.max([0,0],l,oa.min([0,0],o,j)),oe=oa.sub([0,0],j,l),oe=oa.scale([0,0],oe,Mt/gt),f=oa.add([0,0],j,oe),a&&(l=oa.max([0,0],l,u),l=oa.min([0,0],l,c),f=oa.max([0,0],f,u),f=oa.min([0,0],f,c)),n.push(_),n.push(l),_=f}}return t&&n.push(n.shift()),n}function vo(i,e,t){e===void 0&&(e=!1),t===void 0&&(t=[[0,0],[1,1]]);for(var r=!!e,n=[],a=0,o=i.length;a<o;a+=2)n.push([i[a],i[a+1]]);for(var s=Da(n,.4,r,t),u=n.length,c=[],f,l,_,a=0;a<u-1;a+=1)f=s[a*2],l=s[a*2+1],_=n[a+1],c.push(["C",f[0],f[1],l[0],l[1],_[0],_[1]]);return r&&(f=s[u],l=s[u+1],_=n[0],c.push(["C",f[0],f[1],l[0],l[1],_[0],_[1]])),c}var Wa=vo;function Go(i,e,t){var r=null,n=t;return e<n&&(n=e,r="add"),i<n&&(n=i,r="del"),{type:r,min:n}}var Hi=function(i,e){var t=i.length,r=e.length,n,a,o=0;if(t===0||r===0)return null;for(var s=[],u=0;u<=t;u++)s[u]=[],s[u][0]={min:u};for(var c=0;c<=r;c++)s[0][c]={min:c};for(var u=1;u<=t;u++){n=i[u-1];for(var c=1;c<=r;c++){a=e[c-1],isEqual(n,a)?o=0:o=1;var f=s[u-1][c].min+1,l=s[u][c-1].min+1,_=s[u-1][c-1].min+o;s[u][c]=Go(f,l,_)}}return s};function vi(i,e){var t=Hi(i,e),r=i.length,n=e.length,a=[],o=1,s=1;if(t[r][n]!==r){for(var u=1;u<=r;u++){var c=t[u][u].min;s=u;for(var f=o;f<=n;f++)t[u][f].min<c&&(c=t[u][f].min,s=f);o=s,t[u][o].type&&a.push({index:u-1,type:t[u][o].type})}for(var u=a.length-1;u>=0;u--)o=a[u].index,a[u].type==="add"?i.splice(o,0,[].concat(i[o])):i.splice(o,1)}if(r=i.length,r<n)for(var u=0;u<n-r;u++)i[r-1][0]==="z"||i[r-1][0]==="Z"?i.splice(r-2,0,i[r-2]):i.push(i[r-1]);return i}var ao=`	
\v\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029`,Uo=new RegExp("([a-z])["+ao+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+ao+"]*,?["+ao+"]*)+)","ig"),ns=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+ao+"]*,?["+ao+"]*","ig");function vs(i){if(!i)return null;if((0,h.isArray)(i))return i;var e={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},t=[];return String(i).replace(Uo,function(r,n,a){var o=[],s=n.toLowerCase();if(a.replace(ns,function(u,c){c&&o.push(+c)}),s==="m"&&o.length>2&&(t.push([n].concat(o.splice(0,2))),s="l",n=n==="m"?"l":"L"),s==="o"&&o.length===1&&t.push([n,o[0]]),s==="r")t.push([n].concat(o));else for(;o.length>=e[s]&&(t.push([n].concat(o.splice(0,e[s]))),!!e[s]););return""}),t}var qo=/[a-z]/;function $a(i,e){return[e[0]+(e[0]-i[0]),e[1]+(e[1]-i[1])]}function ys(i){var e=vs(i);if(!e||!e.length)return[["M",0,0]];for(var t=!1,r=0;r<e.length;r++){var n=e[r][0];if(qo.test(n)||["V","H","T","S"].indexOf(n)>=0){t=!0;break}}if(!t)return e;var a=[],o=0,s=0,u=0,c=0,f=0,l,_,I=e[0];(I[0]==="M"||I[0]==="m")&&(o=+I[1],s=+I[2],u=o,c=s,f++,a[0]=["M",o,s]);for(var r=f,B=e.length;r<B;r++){var j=e[r],et=a[r-1],ut=[],n=j[0],ft=n.toUpperCase();if(n!==ft)switch(ut[0]=ft,ft){case"A":ut[1]=j[1],ut[2]=j[2],ut[3]=j[3],ut[4]=j[4],ut[5]=j[5],ut[6]=+j[6]+o,ut[7]=+j[7]+s;break;case"V":ut[1]=+j[1]+s;break;case"H":ut[1]=+j[1]+o;break;case"M":u=+j[1]+o,c=+j[2]+s,ut[1]=u,ut[2]=c;break;default:for(var gt=1,Mt=j.length;gt<Mt;gt++)ut[gt]=+j[gt]+(gt%2?o:s)}else ut=e[r];switch(ft){case"Z":o=+u,s=+c;break;case"H":o=ut[1],ut=["L",o,s];break;case"V":s=ut[1],ut=["L",o,s];break;case"T":o=ut[1],s=ut[2];var Ht=$a([et[1],et[2]],[et[3],et[4]]);ut=["Q",Ht[0],Ht[1],o,s];break;case"S":o=ut[ut.length-2],s=ut[ut.length-1];var se=et.length,oe=$a([et[se-4],et[se-3]],[et[se-2],et[se-1]]);ut=["C",oe[0],oe[1],ut[1],ut[2],o,s];break;case"M":u=ut[ut.length-2],c=ut[ut.length-1];break;default:o=ut[ut.length-2],s=ut[ut.length-1]}a.push(ut)}return a}var Ei=Math.PI*2,Sa=function(i,e,t,r,n,a,o){var s=i.x,u=i.y;s*=e,u*=t;var c=r*s-n*u,f=n*s+r*u;return{x:c+a,y:f+o}},li=function(i,e){var t=e===1.5707963267948966?.551915024494:e===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(e/4),r=Math.cos(i),n=Math.sin(i),a=Math.cos(i+e),o=Math.sin(i+e);return[{x:r-n*t,y:n+r*t},{x:a+o*t,y:o-a*t},{x:a,y:o}]},bi=function(i,e,t,r){var n=i*r-e*t<0?-1:1,a=i*t+e*r;return a>1&&(a=1),a<-1&&(a=-1),n*Math.acos(a)},Qo=function(i,e,t,r,n,a,o,s,u,c,f,l){var _=Math.pow(n,2),I=Math.pow(a,2),B=Math.pow(f,2),j=Math.pow(l,2),et=_*I-_*j-I*B;et<0&&(et=0),et/=_*j+I*B,et=Math.sqrt(et)*(o===s?-1:1);var ut=et*n/a*l,ft=et*-a/n*f,gt=c*ut-u*ft+(i+t)/2,Mt=u*ut+c*ft+(e+r)/2,Ht=(f-ut)/n,se=(l-ft)/a,oe=(-f-ut)/n,_e=(-l-ft)/a,Ue=bi(1,0,Ht,se),Ne=bi(Ht,se,oe,_e);return s===0&&Ne>0&&(Ne-=Ei),s===1&&Ne<0&&(Ne+=Ei),[gt,Mt,Ue,Ne]},ku=function(i){var e=i.px,t=i.py,r=i.cx,n=i.cy,a=i.rx,o=i.ry,s=i.xAxisRotation,u=s===void 0?0:s,c=i.largeArcFlag,f=c===void 0?0:c,l=i.sweepFlag,_=l===void 0?0:l,I=[];if(a===0||o===0)return[{x1:0,y1:0,x2:0,y2:0,x:r,y:n}];var B=Math.sin(u*Ei/360),j=Math.cos(u*Ei/360),et=j*(e-r)/2+B*(t-n)/2,ut=-B*(e-r)/2+j*(t-n)/2;if(et===0&&ut===0)return[{x1:0,y1:0,x2:0,y2:0,x:r,y:n}];a=Math.abs(a),o=Math.abs(o);var ft=Math.pow(et,2)/Math.pow(a,2)+Math.pow(ut,2)/Math.pow(o,2);ft>1&&(a*=Math.sqrt(ft),o*=Math.sqrt(ft));var gt=Qo(e,t,r,n,a,o,f,_,B,j,et,ut),Mt=gt[0],Ht=gt[1],se=gt[2],oe=gt[3],_e=Math.abs(oe)/(Ei/4);Math.abs(1-_e)<1e-7&&(_e=1);var Ue=Math.max(Math.ceil(_e),1);oe/=Ue;for(var Ne=0;Ne<Ue;Ne++)I.push(li(se,oe)),se+=oe;return I.map(function(Qe){var dr=Sa(Qe[0],a,o,j,B,Mt,Ht),nn=dr.x,kn=dr.y,En=Sa(Qe[1],a,o,j,B,Mt,Ht),Kr=En.x,Jn=En.y,Kn=Sa(Qe[2],a,o,j,B,Mt,Ht),$r=Kn.x,xn=Kn.y;return{x1:nn,y1:kn,x2:Kr,y2:Jn,x:$r,y:xn}})};function $f(i,e,t,r,n,a,o,s,u){var c=ku({px:i,py:e,cx:s,cy:u,rx:t,ry:r,xAxisRotation:n,largeArcFlag:a,sweepFlag:o});return c.reduce(function(f,l){var _=l.x1,I=l.y1,B=l.x2,j=l.y2,et=l.x,ut=l.y;return f.push(_,I,B,j,et,ut),f},[])}function We(i,e){"TQ".indexOf(i[0])<0&&(e.qx=null,e.qy=null);var t=i.slice(1),r=t[0],n=t[1];switch(i[0]){case"M":return e.x=r,e.y=n,i;case"A":return["C"].concat(arcToCubic.apply(0,[e.x1,e.y1].concat(i.slice(1))));case"Q":return e.qx=r,e.qy=n,["C"].concat(quadToCubic.apply(0,[e.x1,e.y1].concat(i.slice(1))));case"L":return["C"].concat(lineToCubic(e.x1,e.y1,i[1],i[2]));case"H":return["C"].concat(lineToCubic(e.x1,e.y1,i[1],e.y1));case"V":return["C"].concat(lineToCubic(e.x1,e.y1,e.x1,i[1]));case"Z":return["C"].concat(lineToCubic(e.x1,e.y1,e.x,e.y));default:}return i}function Yr(i,e){e===void 0&&(e=!1);for(var t=path2Absolute(i),r={x1:0,y1:0,x2:0,y2:0,x:0,y:0,qx:null,qy:null},n=[],a="",o=t.length,s,u,c=[],f=0;f<o;f+=1)t[f]&&(a=t[f][0]),n[f]=a,t[f]=segmentToCubic(t[f],r),kr(t,n,f),o=t.length,a==="Z"&&c.push(f),s=t[f],u=s.length,r.x1=+s[u-2],r.y1=+s[u-1],r.x2=+s[u-4]||r.x1,r.y2=+s[u-3]||r.y1;return e?[t,c]:t}function kr(i,e,t){if(i[t].length>7){i[t].shift();for(var r=i[t],n=t;r.length;)e[t]="A",i.splice(n+=1,0,["C"].concat(r.splice(0,6)));i.splice(t,1)}}var ra=function(i,e,t,r,n){var a=-3*e+9*t-9*r+3*n,o=i*a+6*e-12*t+6*r;return i*o-3*e+3*t},oi=function(i,e,t,r,n,a,o,s,u){u===null&&(u=1),u=u>1?1:u<0?0:u;for(var c=u/2,f=12,l=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],_=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],I=0,B=0;B<f;B++){var j=c*l[B]+c,et=ra(j,i,t,n,o),ut=ra(j,e,r,a,s),ft=et*et+ut*ut;I+=_[B]*Math.sqrt(ft)}return c*I},Re=function(i,e,t,r,n,a,o,s){for(var u=[],c=[[],[]],f,l,_,I,B=0;B<2;++B){if(B===0?(l=6*i-12*t+6*n,f=-3*i+9*t-9*n+3*o,_=3*t-3*i):(l=6*e-12*r+6*a,f=-3*e+9*r-9*a+3*s,_=3*r-3*e),Math.abs(f)<1e-12){if(Math.abs(l)<1e-12)continue;I=-_/l,I>0&&I<1&&u.push(I);continue}var j=l*l-4*_*f,et=Math.sqrt(j);if(!(j<0)){var ut=(-l+et)/(2*f);ut>0&&ut<1&&u.push(ut);var ft=(-l-et)/(2*f);ft>0&&ft<1&&u.push(ft)}}for(var gt=u.length,Mt=gt,Ht;gt--;)I=u[gt],Ht=1-I,c[0][gt]=Ht*Ht*Ht*i+3*Ht*Ht*I*t+3*Ht*I*I*n+I*I*I*o,c[1][gt]=Ht*Ht*Ht*e+3*Ht*Ht*I*r+3*Ht*I*I*a+I*I*I*s;return c[0][Mt]=i,c[1][Mt]=e,c[0][Mt+1]=o,c[1][Mt+1]=s,c[0].length=c[1].length=Mt+2,{min:{x:Math.min.apply(0,c[0]),y:Math.min.apply(0,c[1])},max:{x:Math.max.apply(0,c[0]),y:Math.max.apply(0,c[1])}}},Ee=function(i,e,t,r,n,a,o,s){if(!(Math.max(i,t)<Math.min(n,o)||Math.min(i,t)>Math.max(n,o)||Math.max(e,r)<Math.min(a,s)||Math.min(e,r)>Math.max(a,s))){var u=(i*r-e*t)*(n-o)-(i-t)*(n*s-a*o),c=(i*r-e*t)*(a-s)-(e-r)*(n*s-a*o),f=(i-t)*(a-s)-(e-r)*(n-o);if(f){var l=u/f,_=c/f,I=+l.toFixed(2),B=+_.toFixed(2);if(!(I<+Math.min(i,t).toFixed(2)||I>+Math.max(i,t).toFixed(2)||I<+Math.min(n,o).toFixed(2)||I>+Math.max(n,o).toFixed(2)||B<+Math.min(e,r).toFixed(2)||B>+Math.max(e,r).toFixed(2)||B<+Math.min(a,s).toFixed(2)||B>+Math.max(a,s).toFixed(2)))return{x:l,y:_}}}},Je=function(i,e,t){return e>=i.x&&e<=i.x+i.width&&t>=i.y&&t<=i.y+i.height},wr=function(i,e,t,r){return i===null&&(i=e=t=r=0),e===null&&(e=i.y,t=i.width,r=i.height,i=i.x),{x:i,y:e,width:t,w:t,height:r,h:r,x2:i+t,y2:e+r,cx:i+t/2,cy:e+r/2,r1:Math.min(t,r)/2,r2:Math.max(t,r)/2,r0:Math.sqrt(t*t+r*r)/2,path:rectPath(i,e,t,r),vb:[i,e,t,r].join(" ")}},Tr=function(i,e){return i=wr(i),e=wr(e),Je(e,i.x,i.y)||Je(e,i.x2,i.y)||Je(e,i.x,i.y2)||Je(e,i.x2,i.y2)||Je(i,e.x,e.y)||Je(i,e.x2,e.y)||Je(i,e.x,e.y2)||Je(i,e.x2,e.y2)||(i.x<e.x2&&i.x>e.x||e.x<i.x2&&e.x>i.x)&&(i.y<e.y2&&i.y>e.y||e.y<i.y2&&e.y>i.y)},ar=function(i,e,t,r,n,a,o,s){isArray(i)||(i=[i,e,t,r,n,a,o,s]);var u=Re.apply(null,i);return wr(u.min.x,u.min.y,u.max.x-u.min.x,u.max.y-u.min.y)},rr=function(i,e,t,r,n,a,o,s,u){var c=1-u,f=Math.pow(c,3),l=Math.pow(c,2),_=u*u,I=_*u,B=f*i+l*3*u*t+c*3*u*u*n+I*o,j=f*e+l*3*u*r+c*3*u*u*a+I*s,et=i+2*u*(t-i)+_*(n-2*t+i),ut=e+2*u*(r-e)+_*(a-2*r+e),ft=t+2*u*(n-t)+_*(o-2*n+t),gt=r+2*u*(a-r)+_*(s-2*a+r),Mt=c*i+u*t,Ht=c*e+u*r,se=c*n+u*o,oe=c*a+u*s,_e=90-Math.atan2(et-ft,ut-gt)*180/Math.PI;return{x:B,y:j,m:{x:et,y:ut},n:{x:ft,y:gt},start:{x:Mt,y:Ht},end:{x:se,y:oe},alpha:_e}},vr=function(i,e,t){var r=ar(i),n=ar(e);if(!Tr(r,n))return t?0:[];for(var a=oi.apply(0,i),o=oi.apply(0,e),s=~~(a/8),u=~~(o/8),c=[],f=[],l={},_=t?0:[],I=0;I<s+1;I++){var B=rr.apply(0,i.concat(I/s));c.push({x:B.x,y:B.y,t:I/s})}for(var I=0;I<u+1;I++){var B=rr.apply(0,e.concat(I/u));f.push({x:B.x,y:B.y,t:I/u})}for(var I=0;I<s;I++)for(var j=0;j<u;j++){var et=c[I],ut=c[I+1],ft=f[j],gt=f[j+1],Mt=Math.abs(ut.x-et.x)<.001?"y":"x",Ht=Math.abs(gt.x-ft.x)<.001?"y":"x",se=Ee(et.x,et.y,ut.x,ut.y,ft.x,ft.y,gt.x,gt.y);if(se){if(l[se.x.toFixed(4)]===se.y.toFixed(4))continue;l[se.x.toFixed(4)]=se.y.toFixed(4);var oe=et.t+Math.abs((se[Mt]-et[Mt])/(ut[Mt]-et[Mt]))*(ut.t-et.t),_e=ft.t+Math.abs((se[Ht]-ft[Ht])/(gt[Ht]-ft[Ht]))*(gt.t-ft.t);oe>=0&&oe<=1&&_e>=0&&_e<=1&&(t?_++:_.push({x:se.x,y:se.y,t1:oe,t2:_e}))}}return _},ke=function(i,e,t){i=path2Curve(i),e=path2Curve(e);for(var r,n,a,o,s,u,c,f,l,_,I=t?0:[],B=0,j=i.length;B<j;B++){var et=i[B];if(et[0]==="M")r=s=et[1],n=u=et[2];else{et[0]==="C"?(l=[r,n].concat(et.slice(1)),r=l[6],n=l[7]):(l=[r,n,r,n,s,u,s,u],r=s,n=u);for(var ut=0,ft=e.length;ut<ft;ut++){var gt=e[ut];if(gt[0]==="M")a=c=gt[1],o=f=gt[2];else{gt[0]==="C"?(_=[a,o].concat(gt.slice(1)),a=_[6],o=_[7]):(_=[a,o,a,o,c,f,c,f],a=c,o=f);var Mt=vr(l,_,t);if(t)I+=Mt;else{for(var Ht=0,se=Mt.length;Ht<se;Ht++)Mt[Ht].segment1=B,Mt[Ht].segment2=ut,Mt[Ht].bez1=l,Mt[Ht].bez2=_;I=I.concat(Mt)}}}}}return I};function tr(i,e){return ke(i,e)}function Pe(i){return Math.sqrt(i[0]*i[0]+i[1]*i[1])}function yr(i,e){return Pe(i)*Pe(e)?(i[0]*e[0]+i[1]*e[1])/(Pe(i)*Pe(e)):1}function Or(i,e){return(i[0]*e[1]<i[1]*e[0]?-1:1)*Math.acos(yr(i,e))}function Jr(i,e){return i[0]===e[0]&&i[1]===e[1]}function sn(i,e){var t=e[1],r=e[2],n=(0,h.mod)((0,h.toRadian)(e[3]),Math.PI*2),a=e[4],o=e[5],s=i[0],u=i[1],c=e[6],f=e[7],l=Math.cos(n)*(s-c)/2+Math.sin(n)*(u-f)/2,_=-1*Math.sin(n)*(s-c)/2+Math.cos(n)*(u-f)/2,I=l*l/(t*t)+_*_/(r*r);I>1&&(t*=Math.sqrt(I),r*=Math.sqrt(I));var B=t*t*(_*_)+r*r*(l*l),j=B?Math.sqrt((t*t*(r*r)-B)/B):1;a===o&&(j*=-1),isNaN(j)&&(j=0);var et=r?j*t*_/r:0,ut=t?j*-r*l/t:0,ft=(s+c)/2+Math.cos(n)*et-Math.sin(n)*ut,gt=(u+f)/2+Math.sin(n)*et+Math.cos(n)*ut,Mt=[(l-et)/t,(_-ut)/r],Ht=[(-1*l-et)/t,(-1*_-ut)/r],se=Or([1,0],Mt),oe=Or(Mt,Ht);return yr(Mt,Ht)<=-1&&(oe=Math.PI),yr(Mt,Ht)>=1&&(oe=0),o===0&&oe>0&&(oe=oe-2*Math.PI),o===1&&oe<0&&(oe=oe+2*Math.PI),{cx:ft,cy:gt,rx:Jr(i,[c,f])?0:t,ry:Jr(i,[c,f])?0:r,startAngle:se,endAngle:se+oe,xRotation:n,arcFlag:a,sweepFlag:o}}function Hr(i,e){return[e[0]+(e[0]-i[0]),e[1]+(e[1]-i[1])]}function In(i){i=Ba(i);for(var e=[],t=null,r=null,n=null,a=0,o=i.length,s=0;s<o;s++){var u=i[s];r=i[s+1];var c=u[0],f={command:c,prePoint:t,params:u,startTangent:null,endTangent:null};switch(c){case"M":n=[u[1],u[2]],a=s;break;case"A":var l=sn(t,u);f.arcParams=l;break;default:break}if(c==="Z")t=n,r=i[a+1];else{var _=u.length;t=[u[_-2],u[_-1]]}r&&r[0]==="Z"&&(r=i[a],e[a]&&(e[a].prePoint=t)),f.currentPoint=t,e[a]&&Jr(t,e[a].currentPoint)&&(e[a].prePoint=f.prePoint);var I=r?[r[r.length-2],r[r.length-1]]:null;f.nextPoint=I;var B=f.prePoint;if(["L","H","V"].includes(c))f.startTangent=[B[0]-t[0],B[1]-t[1]],f.endTangent=[t[0]-B[0],t[1]-B[1]];else if(c==="Q"){var j=[u[1],u[2]];f.startTangent=[B[0]-j[0],B[1]-j[1]],f.endTangent=[t[0]-j[0],t[1]-j[1]]}else if(c==="T"){var et=e[s-1],j=Hr(et.currentPoint,B);et.command==="Q"?(f.command="Q",f.startTangent=[B[0]-j[0],B[1]-j[1]],f.endTangent=[t[0]-j[0],t[1]-j[1]]):(f.command="TL",f.startTangent=[B[0]-t[0],B[1]-t[1]],f.endTangent=[t[0]-B[0],t[1]-B[1]])}else if(c==="C"){var ut=[u[1],u[2]],ft=[u[3],u[4]];f.startTangent=[B[0]-ut[0],B[1]-ut[1]],f.endTangent=[t[0]-ft[0],t[1]-ft[1]],f.startTangent[0]===0&&f.startTangent[1]===0&&(f.startTangent=[ut[0]-ft[0],ut[1]-ft[1]]),f.endTangent[0]===0&&f.endTangent[1]===0&&(f.endTangent=[ft[0]-ut[0],ft[1]-ut[1]])}else if(c==="S"){var et=e[s-1],ut=Hr(et.currentPoint,B),ft=[u[1],u[2]];et.command==="C"?(f.command="C",f.startTangent=[B[0]-ut[0],B[1]-ut[1]],f.endTangent=[t[0]-ft[0],t[1]-ft[1]]):(f.command="SQ",f.startTangent=[B[0]-ft[0],B[1]-ft[1]],f.endTangent=[t[0]-ft[0],t[1]-ft[1]])}else if(c==="A"){var gt=.001,Mt=f.arcParams||{},Ht=Mt.cx,se=Ht===void 0?0:Ht,oe=Mt.cy,_e=oe===void 0?0:oe,Ue=Mt.rx,Ne=Ue===void 0?0:Ue,Qe=Mt.ry,dr=Qe===void 0?0:Qe,nn=Mt.sweepFlag,kn=nn===void 0?0:nn,En=Mt.startAngle,Kr=En===void 0?0:En,Jn=Mt.endAngle,Kn=Jn===void 0?0:Jn;kn===0&&(gt*=-1);var $r=Ne*Math.cos(Kr-gt)+se,xn=dr*Math.sin(Kr-gt)+_e;f.startTangent=[$r-n[0],xn-n[1]];var zn=Ne*Math.cos(Kr+Kn+gt)+se,Gn=dr*Math.sin(Kr+Kn-gt)+_e;f.endTangent=[B[0]-zn,B[1]-Gn]}e.push(f)}return e}function pa(i){for(var e=[],t=i.length,r=0;r<t-1;r++){var n=i[r],a=i[r+1];e.push({from:{x:n[0],y:n[1]},to:{x:a[0],y:a[1]}})}if(e.length>1){var o=i[0],s=i[t-1];e.push({from:{x:s[0],y:s[1]},to:{x:o[0],y:o[1]}})}return e}function Ja(i,e){var t=!1;return each(i,function(r){if(getLineIntersect(r.from,r.to,e.from,e.to))return t=!0,!1}),t}function ca(i){var e=i.map(function(r){return r[0]}),t=i.map(function(r){return r[1]});return{minX:Math.min.apply(null,e),maxX:Math.max.apply(null,e),minY:Math.min.apply(null,t),maxY:Math.max.apply(null,t)}}function Ta(i,e){return!(e.minX>i.maxX||e.maxX<i.minX||e.minY>i.maxY||e.maxY<i.minY)}function Za(i,e){if(i.length<2||e.length<2)return!1;var t=ca(i),r=ca(e);if(!Ta(t,r))return!1;var n=!1;if(each(e,function(u){if(isPointInPolygon(i,u[0],u[1]))return n=!0,!1}),n||(each(i,function(u){if(isPointInPolygon(e,u[0],u[1]))return n=!0,!1}),n))return!0;var a=pa(i),o=pa(e),s=!1;return each(o,function(u){if(Ja(a,u))return s=!0,!1}),s}function Ii(i,e){for(var t=[],r=[],n=[],a=0;a<i.length;a++){var o=i[a],s=o.currentPoint,u=o.params,c=o.prePoint,f=void 0;switch(o.command){case"Q":f=El.box(c[0],c[1],u[1],u[2],u[3],u[4]);break;case"C":f=Te.box(c[0],c[1],u[1],u[2],u[3],u[4],u[5],u[6]);break;case"A":var l=o.arcParams;f=N.box(l.cx,l.cy,l.rx,l.ry,l.xRotation,l.startAngle,l.endAngle);break;default:t.push(s[0]),r.push(s[1]);break}f&&(o.box=f,t.push(f.x,f.x+f.width),r.push(f.y,f.y+f.height)),e&&(o.command==="L"||o.command==="M")&&o.prePoint&&o.nextPoint&&n.push(o)}t=t.filter(function(ut){return!Number.isNaN(ut)&&ut!==1/0&&ut!==-1/0}),r=r.filter(function(ut){return!Number.isNaN(ut)&&ut!==1/0&&ut!==-1/0});var _=(0,h.min)(t),I=(0,h.min)(r),B=(0,h.max)(t),j=(0,h.max)(r);if(n.length===0)return{x:_,y:I,width:B-_,height:j-I};for(var a=0;a<n.length;a++){var o=n[a],s=o.currentPoint,et=void 0;s[0]===_?(et=No(o,e),_=_-et.xExtra):s[0]===B&&(et=No(o,e),B=B+et.xExtra),s[1]===I?(et=No(o,e),I=I-et.yExtra):s[1]===j&&(et=No(o,e),j=j+et.yExtra)}return{x:_,y:I,width:B-_,height:j-I}}function No(i,e){var t=i.prePoint,r=i.currentPoint,n=i.nextPoint,a=Math.pow(r[0]-t[0],2)+Math.pow(r[1]-t[1],2),o=Math.pow(r[0]-n[0],2)+Math.pow(r[1]-n[1],2),s=Math.pow(t[0]-n[0],2)+Math.pow(t[1]-n[1],2),u=Math.acos((a+o-s)/(2*Math.sqrt(a)*Math.sqrt(o)));if(!u||Math.sin(u)===0||(0,h.isNumberEqual)(u,0))return{xExtra:0,yExtra:0};var c=Math.abs(Math.atan2(n[1]-r[1],n[0]-r[0])),f=Math.abs(Math.atan2(n[0]-r[0],n[1]-r[1]));c=c>Math.PI/2?Math.PI-c:c,f=f>Math.PI/2?Math.PI-f:f;var l={xExtra:Math.cos(u/2-c)*(e/2*(1/Math.sin(u/2)))-e/2||0,yExtra:Math.cos(f-u/2)*(e/2*(1/Math.sin(u/2)))-e/2||0};return l}function Ys(i){var e=i.attr(),t=e.path,r=e.stroke,n=r?e.lineWidth:0,a=i.get("segments")||In(t),o=Ii(a,n),s=o.x,u=o.y,c=o.width,f=o.height,l={minX:s,minY:u,maxX:s+c,maxY:u+f};return l=xe(i,l),{x:l.minX,y:l.minY,width:l.maxX-l.minX,height:l.maxY-l.minY}}function xd(i){var e=i.attr(),t=e.x1,r=e.y1,n=e.x2,a=e.y2,o=Math.min(t,n),s=Math.max(t,n),u=Math.min(r,a),c=Math.max(r,a),f={minX:o,maxX:s,minY:u,maxY:c};return f=xe(i,f),{x:f.minX,y:f.minY,width:f.maxX-f.minX,height:f.maxY-f.minY}}function su(i){var e=i.attr(),t=e.x,r=e.y,n=e.rx,a=e.ry;return{x:t-n,y:r-a,width:n*2,height:a*2}}tu("rect",bu),tu("image",bu),tu("circle",Xo),tu("marker",Xo),tu("polyline",Ye),tu("polygon",fr),tu("text",Rn),tu("path",Ys),tu("line",xd),tu("ellipse",su);var Ch="0.5.11",Eu=function(i){(0,y.__extends)(e,i);function e(t,r){var n=i.call(this,t,r)||this;return n.item=r.item,n.canvasX=r.canvasX,n.canvasY=r.canvasY,n.wheelDelta=r.wheelDelta,n.detail=r.detail,n}return e}(lu),nd=function(e){return"".concat(e,"-").concat(Math.random()).concat(Date.now())},Th=function(e){if((0,h.isArray)(e))switch(e.length){case 4:return e;case 3:return e.push(e[1]),e;case 2:return e.concat(e);case 1:return[e[0],e[0],e[0],e[0]];default:return[0,0,0,0]}if((0,h.isNumber)(e))return[e,e,e,e];if((0,h.isString)(e)){var t=parseInt(e,10);return[t,t,t,t]}return[0,0,0,0]},F0=function(e){var t=new Eu(e.type,e);return t.clientX=e.clientX,t.clientY=e.clientY,t.x=e.x,t.y=e.y,t.target=e.target,t.currentTarget=e.currentTarget,t.bubbles=!0,t.item=e.item,t},z0=function(e){if(!e)return!1;for(var t=9,r=[1,0,0,0,1,0,0,0,1],n=0;n<t;n++)if(e[n]!==r[n])return!0;return!1},Cc=function(e){return Number.isNaN(Number(e))},Iv=function(e){for(var t=1/0,r=-1/0,n=1/0,a=-1/0,o=0;o<e.length;o++){var s=e[o],u=s.getBBox(),c=u.minX,f=u.minY,l=u.maxX,_=u.maxY;c<t&&(t=c),f<n&&(n=f),l>r&&(r=l),_>a&&(a=_)}var I=Math.floor(t),B=Math.floor(n),j=Math.ceil(r)-Math.floor(t),et=Math.ceil(a)-Math.floor(n);return{x:I,y:B,width:j,height:et,minX:t,minY:n,maxX:r,maxY:a}},G0=function(e,t,r,n,a){t===void 0&&(t=15),r===void 0&&(r="quadratic"),n===void 0&&(n=void 0),a===void 0&&(a=void 0);for(var o=e.length,s=t*2,u=["top","top-right","right","bottom-right","bottom","bottom-left","left","top-left"],c={},f=[],l={},_=0;_<o;_++){var I=e[_],B=I.source,j=I.target,et="".concat(B,"-").concat(j);if(!f[_]){c[et]||(c[et]=[]),f[_]=!0,c[et].push(I);for(var ut=0;ut<o;ut++)if(_!==ut){var ft=e[ut],gt=ft.source,Mt=ft.target;f[ut]||(B===Mt&&j===gt?(c[et].push(ft),f[ut]=!0,l["".concat(gt,"|").concat(Mt,"|").concat(c[et].length-1)]=!0):B===gt&&j===Mt&&(c[et].push(ft),f[ut]=!0))}}}for(var Ht in c)for(var se=c[Ht],oe=se.length,_e=0;_e<oe;_e++){var Ue=se[_e];if(Ue.source===Ue.target){a&&(Ue.type=a),Ue.loopCfg={position:u[_e%8],dist:Math.floor(_e/8)*20+50};continue}if(oe===1&&n&&Ue.source!==Ue.target){Ue.type=n;continue}Ue.type=r;var Ne=(_e%2===0?1:-1)*(l["".concat(Ue.source,"|").concat(Ue.target,"|").concat(_e)]?-1:1);oe%2===1?Ue.curveOffset=Ne*Math.ceil(_e/2)*s:Ue.curveOffset=Ne*(Math.floor(_e/2)*s+t)}return e},Ov=C(731278),U0=function(){function i(e){this.destroyed=!1,this.graph=e,this.destroyed=!1}return i.prototype.getViewCenter=function(){var e=this.getFormatPadding(),t=this.graph,r=this.graph.get("width"),n=t.get("height");return{x:(r-e[1]-e[3])/2+e[3],y:(n-e[0]-e[2])/2+e[0]}},i.prototype.fitCenter=function(e,t){var r=this.graph,n=r.get("group"),a,o=r.getNodes();if(o.length>r.get("optimizeThreshold")){var s=1/0,u=1/0,c=-1/0,f=-1/0;o.forEach(function(Mt){var Ht=Mt.getModel(),se=Ht.x,oe=Ht.y;s>se&&(s=se),u>oe&&(u=oe),c<se&&(c=se),f<oe&&(f=oe)});var l=n.getMatrix()||[1,0,0,0,1,0,0,0,1],_=qr({x:s,y:u},l),I=_.x,B=_.y,j=qr({x:c,y:f},l),et=j.x,ut=j.y;a={minX:I,maxX:et,minY:B,maxY:ut,width:et-I,height:ut-B,x:I,y:B}}else a=n.getCanvasBBox();if(!(a.width===0||a.height===0)){var ft=this.getViewCenter(),gt={x:a.x+a.width/2,y:a.y+a.height/2};r.translate(ft.x-gt.x,ft.y-gt.y,e,t)}},i.prototype.animatedFitView=function(e,t,r,n,a,o,s,u){var c=this.graph;r=r||{duration:500,easing:"easeCubic"};var f=[1,0,0,0,1,0,0,0,1],l=n.x+a.x-o.x-n.minX,_=n.y+a.y-o.y-n.minY;if(!(Cc(l)||Cc(_))){var I=(0,Ov.vs)(f,[["t",l,_]]);if(!u){var B=Ls({animateCfg:r,callback:function(){c.emit("viewportchange",{action:"translate",matrix:I})}});e.animate(function(Mt){return{matrix:fo(t,I,Mt)}},B);return}var j=c.get("minZoom"),et=c.get("maxZoom"),ut=s;j&&s<j?(ut=j,console.warn("fitview failed, ratio out of range, ratio: %f",s,"graph minzoom has been used instead")):et&&s>et&&(ut=et,console.warn("fitview failed, ratio out of range, ratio: %f",s,"graph maxzoom has been used instead"));var ft=(0,Ov.vs)(I,[["t",-a.x,-a.y],["s",ut,ut],["t",a.x,a.y]]),gt=Ls({animateCfg:r,callback:function(){e.setMatrix(ft),c.emit("viewportchange",{action:"translate",matrix:I}),c.emit("viewportchange",{action:"zoom",matrix:ft})}});e.stopAnimate(),e.setMatrix(t),e.animate(function(Mt){return{matrix:fo(t,ft,Mt)}},gt)}},i.prototype.fitView=function(e,t){var r=this.graph,n=this.getFormatPadding(),a=r.get("width"),o=r.get("height"),s=r.get("group"),u=s.getMatrix()||[1,0,0,0,1,0,0,0,1];s.resetMatrix();var c,f=r.getNodes();if(f.length>r.get("optimizeThreshold")){var l=1/0,_=1/0,I=-1/0,B=-1/0;f.forEach(function(se){var oe=se.getModel(),_e=oe.x,Ue=oe.y;l>_e&&(l=_e),_>Ue&&(_=Ue),I<_e&&(I=_e),B<Ue&&(B=Ue)}),c={minX:l,maxX:I,minY:_,maxY:B,width:I-l,height:B-_,x:l,y:_}}else c=s.getCanvasBBox();if(!(c.width===0||c.height===0)){var j=this.getViewCenter(),et={x:c.x+c.width/2,y:c.y+c.height/2},ut=(a-n[1]-n[3])/c.width,ft=(o-n[0]-n[2])/c.height,gt=ut;if(ut>ft&&(gt=ft),e)this.animatedFitView(s,u,t,c,j,et,gt,!0);else{var Mt=j.x-et.x,Ht=j.y-et.y;if(Cc(Mt)||Cc(Ht))return;r.translate(Mt,Ht),r.zoom(gt,j)||console.warn("zoom failed, ratio out of range, ratio: %f",gt)}}},i.prototype.fitViewByRules=function(e,t,r){var n=e.onlyOutOfViewPort,a=n===void 0?!1:n,o=e.direction,s=o===void 0?"both":o,u=e.ratioRule,c=u===void 0?"min":u,f=this.graph,l=this.getFormatPadding(),_=f.get("width"),I=f.get("height"),B=f.get("group"),j=B.getMatrix()||[1,0,0,0,1,0,0,0,1];B.resetMatrix();var et,ut=f.getNodes();if(ut.length>f.get("optimizeThreshold")){var ft=1/0,gt=1/0,Mt=-1/0,Ht=-1/0;ut.forEach(function(kn){var En=kn.getModel(),Kr=En.x,Jn=En.y;ft>Kr&&(ft=Kr),gt>Jn&&(gt=Jn),Mt<Kr&&(Mt=Kr),Ht<Jn&&(Ht=Jn)}),et={minX:ft,maxX:Mt,minY:gt,maxY:Ht,width:Mt-ft,height:Ht-gt,x:ft,y:gt}}else et=B.getCanvasBBox();if(!(et.width===0||et.height===0)){var se=this.getViewCenter(),oe={x:et.x+et.width/2,y:et.y+et.height/2},_e=(_-l[1]-l[3])/et.width,Ue=(I-l[0]-l[2])/et.height,Ne;if(s==="x"?Ne=_e:s==="y"?Ne=Ue:Ne=c==="max"?Math.max(_e,Ue):Math.min(_e,Ue),a&&(Ne=Ne<1?Ne:1),t)this.animatedFitView(B,j,r,et,se,oe,Ne,!0);else{var Qe=f.getZoom(),dr=Qe*Ne,nn=f.get("minZoom");dr<nn&&(dr=nn,console.warn("fitview failed, ratio out of range, ratio: %f",Ne,"graph minzoom has been used instead")),f.translate(se.x-oe.x,se.y-oe.y),f.zoomTo(dr,se)}}},i.prototype.getFormatPadding=function(){var e=this.graph.get("fitViewPadding");return Th(e)},i.prototype.focusPoint=function(e,t,r){var n=this,a=this.getViewCenter(),o=this.getPointByCanvas(a.x,a.y),s=this.graph.get("group").getMatrix();if(s||(s=[1,0,0,0,1,0,0,0,1]),t){var u=(o.x-e.x)*s[0],c=(o.y-e.y)*s[4],f=0,l=0,_=0,I=0;this.graph.get("canvas").animate(function(B){_=u*B,I=c*B,n.graph.translate(_-f,I-l),f=_,l=I},(0,y.__assign)({},r))}else this.graph.translate((o.x-e.x)*s[0],(o.y-e.y)*s[4])},i.prototype.getPointByCanvas=function(e,t){var r=this.graph.get("group").getMatrix();r||(r=[1,0,0,0,1,0,0,0,1]);var n=hn({x:e,y:t},r);return n},i.prototype.getPointByClient=function(e,t){var r=this.graph.get("canvas"),n=r.getPointByClient(e,t);return this.getPointByCanvas(n.x,n.y)},i.prototype.getClientByPoint=function(e,t){var r=this.graph.get("canvas"),n=this.getCanvasByPoint(e,t),a=r.getClientByPoint(n.x,n.y);return{x:a.x,y:a.y}},i.prototype.getCanvasByPoint=function(e,t){var r=this.graph.get("group").getMatrix();return r||(r=[1,0,0,0,1,0,0,0,1]),qr({x:e,y:t},r)},i.prototype.focus=function(e,t,r){if((0,h.isString)(e)&&(e=this.graph.findById(e)),e){var n=0,a=0;if(e.getType&&e.getType()==="edge"){var o=e.getSource().get("group").getMatrix(),s=e.getTarget().get("group").getMatrix();o&&s?(n=(o[6]+s[6])/2,a=(o[7]+s[7])/2):(o||s)&&(n=o?o[6]:s[6],a=o?o[7]:s[7])}else{var u=e.get("group"),c=u.getMatrix();c||(c=[1,0,0,0,1,0,0,0,1]),n=c[6],a=c[7]}this.focusPoint({x:n,y:a},t,r)}},i.prototype.focusItems=function(e,t,r,n){if(e.length){var a=this.graph,o=this.getFormatPadding(),s=a.get("width"),u=a.get("height"),c=a.get("group"),f=c.getMatrix()||[1,0,0,0,1,0,0,0,1];c.resetMatrix();for(var l={x:0,y:0,minX:Number.MAX_SAFE_INTEGER,minY:Number.MAX_SAFE_INTEGER,maxX:Number.MIN_SAFE_INTEGER,maxY:Number.MIN_SAFE_INTEGER,width:0,height:0},_=0,I=e;_<I.length;_++){var B=I[_],j=B.getBBox();j.minX<l.minX&&(l.minX=j.minX),j.minY<l.minY&&(l.minY=j.minY),j.maxX>l.maxX&&(l.maxX=j.maxX),j.maxY>l.maxY&&(l.maxY=j.maxY)}if(l.x=l.minX,l.y=l.minY,l.width=l.maxX-l.minX,l.height=l.maxY-l.minY,!(l.width===0||l.height===0)){var et=this.getViewCenter(),ut={x:l.x+l.width/2,y:l.y+l.height/2},ft=(s-o[1]-o[3])/l.width,gt=(u-o[0]-o[2])/l.height,Mt=ft;ft>gt&&(Mt=gt),r?this.animatedFitView(c,f,n,l,et,ut,Mt,t):(a.translate(et.x-ut.x,et.y-ut.y),t&&!a.zoom(Mt,et)&&console.warn("zoom failed, ratio out of range, ratio: %f",Mt))}}},i.prototype.changeSize=function(e,t){var r=this.graph;if(!(0,h.isNumber)(e)||!(0,h.isNumber)(t))throw Error("invalid canvas width & height, please make sure width & height type is number");r.set({width:e,height:t});var n=r.get("canvas");n.changeSize(e,t);var a=r.get("plugins");a.forEach(function(o){o.get("gridContainer")&&o.positionInit()})},i.prototype.destroy=function(){this.graph=null,this.destroyed=!1},i}(),W0=U0;function Ah(i){"@babel/helpers - typeof";return Ah=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ah(i)}function Dv(i){if(typeof i!="string")return i;var e=function(oe){if(typeof oe!="string")return oe;try{return JSON.parse(oe.trim())}catch(_e){return oe.trim()}},t=e(i);if(typeof t!="string")return t;for(var r=function(oe){return oe[oe.length-1]},n=i.trim(),a=[],o=[],s=function(){for(var oe=[],_e=0;_e<arguments.length;_e++)oe[_e]=arguments[_e];return oe.some(function(Ue){return r(o)===Ue})},u=function(){return r(a)},c=null,f=0,l="";f<n.length;){var _=n[f],I=s('"',"'");if(!I&&!_.trim()){f+=1;continue}var B=n[f-1]==="\\",j=s("}"),et=s("]"),ut=s(","),ft=u();if(I)if(r(o)===_&&!B){o.pop();var gt=e(l);ft.push(gt),c=gt,l=""}else l+=_;else if(et&&_===",")l&&(ft.push(e(l)),l="");else if(j&&_===":")o.push(","),l&&(ft.push(l),l="");else if(ut&&_===",")l&&(ft.push(e(l)),l=""),o.pop();else if(_==="}"&&(j||ut)){l&&(ft.push(e(l)),l=""),ut&&o.pop();for(var Mt={},Ht=1;Ht<ft.length;Ht+=2)Mt[ft[Ht-1]]=ft[Ht];a.pop(),a.length&&r(a).push(Mt),o.pop(),c=Mt}else _==="]"&&et?(l&&(ft.push(e(l)),l=""),a.pop(),a.length&&r(a).push(ft),o.pop(),c=ft):_==="{"?(a.push([]),o.push("}")):_==="["?(a.push([]),o.push("]")):_==='"'?o.push('"'):_==="'"?o.push("'"):l+=_;f+=1}return c||l}var Y0=function(e){return e.split("-").reduce(function(t,r){return t+r.charAt(0).toUpperCase()+r.slice(1)})},X0=function(e){return function(t){for(var r=e.length,n=[],a=0,o="";a<r;)if(e[a]==="{"&&e[a+1]==="{")n.push(o),o="",a+=2;else if(e[a]==="}"&&e[a+1]==="}"){if(n.length){var s=n.pop();o=(0,h.get)(t,o,s.endsWith("=")?'"{'.concat(o,'}"'):o),n.push(s+o)}a+=2,o=""}else o+=e[a],a+=1;return n.push(o),n.map(function(u,c){return n[c-1]&&n[c-1].endsWith("=")?'"{'.concat(u,'}"'):u}).join("")}};function Lv(i,e){var t={},r=i.getAttributeNames&&i.getAttributeNames()||[],n=i.children&&Array.from(i.children).map(function(s){return Lv(s,e)}),a={},o=i.tagName?i.tagName.toLowerCase():"group";return o==="text"&&(t.text=i.innerText),a.type=o,o==="img"&&(a.type="image"),Array.from(r).forEach(function(s){var u=Y0(s),c=i.getAttribute(s);try{if(u==="style"||u==="attrs"){var f=Dv(c);t=(0,y.__assign)((0,y.__assign)({},t),f)}else a[u]=Dv(c)}catch(l){if(u==="style")throw l;a[u]=c}}),a.attrs=t,e&&e.style&&a.name&&Ah(e.style[a.name])==="object"&&(a.attrs=(0,y.__assign)((0,y.__assign)({},a.attrs),e.style[a.name])),e&&e.style&&a.keyshape&&(a.attrs=(0,y.__assign)((0,y.__assign)({},a.attrs),e.style)),n.length&&(a.children=n),a}function j0(i,e,t){var r=i.attrs,n=r===void 0?{}:r,a={x:e.x||0,y:e.y||0,width:t.width||0,height:t.height||0},o,s;switch(i.type){case"maker":case"circle":n.r&&(s=2*n.r,o=2*n.r);break;case"text":n.text&&(s=Bs(n.text,n.fontSize||12)[0],o=16,a.y+=o,a.height=o,a.width=s,i.attrs=(0,y.__assign)({fontSize:12,fill:"#000"},n));break;default:n.width&&(s=n.width),n.height&&(o=n.height)}return o>=0&&(a.height=o),s>=0&&(a.width=s),n.marginTop&&(a.y+=n.marginTop),n.marginLeft&&(a.x+=n.marginLeft),a}function Pv(i,e){var t;e===void 0&&(e={x:0,y:0});var r=(0,y.__assign)({x:0,y:0,width:0,height:0},e);if(!((t=i.children)===null||t===void 0)&&t.length){var n=i.attrs,a=n===void 0?{}:n,o=a.marginTop,s=(0,y.__assign)({},e);o&&(s.y+=o);for(var u=0;u<i.children.length;u++){i.children[u].attrs.key="".concat(a.key||"root"," -").concat(u," ");var c=Pv(i.children[u],s);if(c.bbox){var f=c.bbox;c.attrs.next==="inline"?s.x+=c.bbox.width:s.y+=c.bbox.height,f.width+f.x>r.width&&(r.width=f.width+f.x),f.height+f.y>r.height&&(r.height=f.height+f.y)}}}return i.bbox=j0(i,e,r),i.attrs=(0,y.__assign)((0,y.__assign)({},i.attrs),i.bbox),i}function Nv(i,e){var t,r,n,a,o=(i||{}).type,s=((e==null?void 0:e.attrs)||{}).key;if(s&&i&&(i.attrs.key=s),!i&&e)return{action:"delete",val:e,type:o,key:s};if(i&&!e)return{action:"add",val:i,type:o};if(!i&&!e)return{action:"same",type:o};var u=[];if(((t=i.children)===null||t===void 0?void 0:t.length)>0||((r=e.children)===null||r===void 0?void 0:r.length)>0)for(var c=Math.max((n=i.children)===null||n===void 0?void 0:n.length,(a=e.children)===null||a===void 0?void 0:a.length),f=e.children||[],l=i.children||[],_=0;_<c;_+=1)u.push(Nv(l[_],f[_]));var I=Object.keys(e.attrs),B=Object.keys(i.attrs);return e.type!==i.type?{action:"restructure",nowTarget:i,formerTarget:e,key:s,children:u}:I.filter(function(j){return j!=="children"}).some(function(j){return i.attrs[j]!==e.attrs[j]||!B.includes(j)})?{action:"change",val:i,children:u,type:o,key:s}:{action:"same",children:u,type:o,key:s}}function Rv(i){var e={},t=function(n){var a=typeof i=="function"?i(n):i,o=X0(a)(n),s=document.createElement("div");s.innerHTML=o;var u=s.children[0],c=Pv(Lv(u,n));return s.remove(),c};return{draw:function(n,a){var o=t(n),s=a,u=function c(f){var l=f.attrs,_=l===void 0?{}:l,I=f.bbox,B=f.type,j=f.children,et=(0,y.__rest)(f,["attrs","bbox","type","children"]);if(f.type!=="group"){var ut=a.addShape(f.type,(0,y.__assign)({attrs:_,origin:{bbox:I,type:B,children:j}},et));f.keyshape&&(s=ut)}f.children&&f.children.forEach(function(ft){return c(ft)})};return u(o),e[n.id]=[o],s},update:function(n,a){e[n.id]||(e[n.id]=[]);var o=a.getContainer(),s=o.get("children"),u=t(n),c=e[n.id].pop(),f=Nv(u,c),l=function B(j){var et;j.type!=="group"&&o.addShape(j.type,{attrs:j.attrs}),!((et=j.children)===null||et===void 0)&&et.length&&j.children.map(function(ut){return B(ut)})},_=function B(j){var et,ut=s.find(function(ft){return ft.attrs.key===j.attrs.key});ut&&o.removeChild(ut),!((et=j.children)===null||et===void 0)&&et.length&&j.children.map(function(ft){return B(ft)})},I=function B(j){var et=j.key;if(j.type!=="group"){var ut=s.find(function(gt){return gt.attrs.key===et});switch(j.action){case"change":if(ut){var ft=j.val.keyshape?a.getOriginStyle():{};ut.attr((0,y.__assign)((0,y.__assign)({},ft),j.val.attrs))}break;case"add":l(j.val);break;case"delete":_(j.val);break;case"restructure":_(j.formerTarget),l(j.nowTarget);break;default:break}}j.children&&j.children.forEach(function(gt){return B(gt)})};I(f),e[n.id].push(u)},getAnchorPoints:function(){return[[0,.5],[1,.5],[.5,1],[.5,0]]}}}var Ih={};function kv(i){return Ih[i]||(Ih[i]=(0,h.upperFirst)(i)),Ih[i]}var V0={defaultShapeType:"defaultType",className:null,getShape:function(e){var t=this,r=t[e]||t[t.defaultShapeType]||t["simple-circle"];return r},draw:function(e,t,r){var n=this.getShape(e);r.shapeMap={};var a=n.draw(t,r);return n.afterDraw&&n.afterDraw(t,r,a),a},baseUpdate:function(e,t,r,n){var a,o,s=this.getShape(e);s.update&&(s.mergeStyle=(a=s.getOptions)===null||a===void 0?void 0:a.call(s,t,n),(o=s.update)===null||o===void 0||o.call(s,t,r,n)),s.afterUpdate&&s.afterUpdate(t,r)},setState:function(e,t,r,n){var a=this.getShape(e);a.setState(t,r,n)},shouldUpdate:function(e){var t=this.getShape(e);return!!t.update},getControlPoints:function(e,t){var r=this.getShape(e);return r.getControlPoints(t)},getAnchorPoints:function(e,t){var r=this.getShape(e);return r.getAnchorPoints(t)}},Oh={options:{},draw:function(e,t){return this.drawShape(e,t)},drawShape:function(){},afterDraw:function(){},afterUpdate:function(){},setState:function(){},getControlPoints:function(e){return e.controlPoints},getAnchorPoints:function(e){var t=this.options.anchorPoints,r=e.anchorPoints||t;return r}},Wd=function(){function i(){}return i.registerFactory=function(e,t){var r=kv(e),n=V0,a=(0,y.__assign)((0,y.__assign)({},n),t);return i[r]=a,a.className=r,a},i.getFactory=function(e){var t=kv(e);return i[t]},i.registerNode=function(e,t,r){var n=i.Node,a;if(typeof t=="string"||typeof t=="function"){var o=Rv(t);a=(0,y.__assign)((0,y.__assign)({},n.getShape("single-node")),o)}else if(t.jsx){var s=t.jsx,o=Rv(s);a=(0,y.__assign)((0,y.__assign)((0,y.__assign)({},n.getShape("single-node")),o),t)}else{n.getShape(r);var u=r?n.getShape(r):Oh;a=(0,y.__assign)((0,y.__assign)({},u),t)}return a.type=e,a.itemType="node",n[e]=a,a},i.registerEdge=function(e,t,r){var n=i.Edge,a=r?n.getShape(r):Oh,o=(0,y.__assign)((0,y.__assign)({},a),t);return o.type=e,o.itemType="edge",n[e]=o,o},i.registerCombo=function(e,t,r){var n=i.Combo,a=r?n.getShape(r):Oh,o=(0,y.__assign)((0,y.__assign)({},a),t);return o.type=e,o.itemType="combo",n[e]=o,o},i}(),Rs=Wd;Wd.registerFactory("node",{defaultShapeType:"circle"}),Wd.registerFactory("edge",{defaultShapeType:"line"}),Wd.registerFactory("combo",{defaultShapeType:"circle"});var Dh="bboxCache",Lh="bboxCanvasCache",LS=null,H0=function(){function i(e){this._cfg={},this.destroyed=!1,this.optimize=!1;var t={id:void 0,type:"item",model:{},group:void 0,animate:!1,visible:!0,locked:!1,event:!0,keyShape:void 0,states:[]};this._cfg=Object.assign(t,this.getDefaultCfg(),e);var r=this.get("model"),n=r.id,a=this.get("type");typeof n=="undefined"?n=nd(a):typeof n!="string"&&(n=String(n)),this.get("model").id=n,this.set("id",n);var o=e.group;o&&(o.set("item",this),o.set("id",n)),this.init(),this.draw();var s=r.shape||r.type||(a==="edge"?"line":"circle"),u=this.get("shapeFactory");if(u&&u[s]){var c=u[s].options;if(c&&c.stateStyles){var f=this.get("styles")||r.stateStyles;f=(0,h.deepMix)({},c.stateStyles,f),this.set("styles",f)}}}return i.prototype.calculateBBox=function(){var e=this.get("keyShape"),t=this.get("group"),r=qa(e,t);return r.x=r.minX,r.y=r.minY,r.width=r.maxX-r.minX,r.height=r.maxY-r.minY,r.centerX=(r.minX+r.maxX)/2,r.centerY=(r.minY+r.maxY)/2,r},i.prototype.calculateCanvasBBox=function(){var e=this.get("keyShape"),t=this.get("group"),r=qa(e,t);return r.x=r.minX,r.y=r.minY,r.width=r.maxX-r.minX,r.height=r.maxY-r.minY,r.centerX=(r.minX+r.maxX)/2,r.centerY=(r.minY+r.maxY)/2,r},i.prototype.drawInner=function(){var e=this,t=e.get("shapeFactory"),r=e.get("group"),n=e.get("model");r.clear();var a=n.visible;if(a!==void 0&&!a&&e.changeVisibility(a),!!t){e.updatePosition(n);var o=e.getShapeCfg(n),s=o.type,u=t.draw(s,o,r);u&&(e.set("keyShape",u),u.set("isKeyShape",!0),u.set("draggable",!0)),this.setOriginStyle(),this.set("currentShape",s),this.restoreStates(t,s)}},i.prototype.setOriginStyle=function(){var e=this.get("group"),t=e.get("children"),r=this.getKeyShape(),n=this,a=r.get("name");if(this.get("originStyle")){var I=this.get("originStyle");a&&!I[a]&&(I[a]={});for(var B=this.getCurrentStatesStyle(),j=function(ut){var ft=t[ut],gt=ft.get("name"),Mt=ft.attr();if(gt&&gt!==a){var Ht=B[gt];I[gt]||(I[gt]={}),Ht?Object.keys(Mt).forEach(function(_e){var Ue=Mt[_e];Ue!==Ht[_e]&&(I[gt][_e]=Ue)}):I[gt]=ft.get("type")!=="image"?(0,h.clone)(Mt):n.getShapeStyleByName(gt)}else{var se=ft.attr(),oe={};Object.keys(B).forEach(function(_e){var Ue=B[_e];(_e===a||!(0,h.isPlainObject)(Ue))&&(oe[_e]=Ue)}),Object.keys(se).forEach(function(_e){var Ue=se[_e];oe[_e]!==Ue&&(a?I[a][_e]=Ue:I[_e]=Ue)})}},s=0;s<t.length;s++)j(s);delete I.path,delete I.matrix,delete I.x,delete I.y,I[a]&&(delete I[a].x,delete I[a].y,delete I[a].matrix,delete I[a].path),n.set("originStyle",I)}else{for(var o={},s=0;s<t.length;s++){var u=t[s],c=u.get("type"),f=u.get("name");if(f&&f!==a)o[f]=c!=="image"?(0,h.clone)(u.attr()):n.getShapeStyleByName(f),c==="text"&&o[f]&&(delete o[f].x,delete o[f].y,delete o[f].matrix);else{var l=n.getShapeStyleByName();if(delete l.path,delete l.matrix,!a)Object.assign(o,l);else if(f)o[a]=l;else{var _=nd("shape");u.set("name",_),e.shapeMap[_]=u,o[_]=c!=="image"?(0,h.clone)(u.attr()):n.getShapeStyleByName(f)}}}n.set("originStyle",o)}},i.prototype.restoreStates=function(e,t){var r=this,n=r.get("states");(0,h.each)(n,function(a){e.setState(t,a,!0,r)})},i.prototype.init=function(){var e=Rs.getFactory(this.get("type"));this.set("shapeFactory",e)},i.prototype.get=function(e){return this._cfg[e]},i.prototype.set=function(e,t){(0,h.isPlainObject)(e)?this._cfg=(0,y.__assign)((0,y.__assign)({},this._cfg),e):this._cfg[e]=t},i.prototype.getDefaultCfg=function(){return{}},i.prototype.clearCache=function(){this.set(Dh,null),this.set(Lh,null)},i.prototype.beforeDraw=function(){},i.prototype.afterDraw=function(){},i.prototype.afterUpdate=function(){},i.prototype.draw=function(){this.beforeDraw(),this.drawInner(),this.afterDraw()},i.prototype.getShapeStyleByName=function(e){var t=this.get("group"),r;if(e?r=t.shapeMap[e]:r=this.getKeyShape(),r){var n={};return(0,h.each)(r.attr(),function(a,o){(o!=="img"||(0,h.isString)(a))&&(n[o]=a)}),n}return{}},i.prototype.getShapeCfg=function(e,t){var r=this.get("styles");if(r){var n=e;return n.style=(0,y.__assign)((0,y.__assign)({},r),e.style),n}return e},i.prototype.getStateStyle=function(e){var t=this.get("styles"),r=t&&t[e];return r},i.prototype.getOriginStyle=function(){return this.get("originStyle")},i.prototype.getCurrentStatesStyle=function(){var e=this,t={},r=e.getStates();return!r||!r.length?this.get("originStyle"):((0,h.each)(e.getStates(),function(n){t=Object.assign(t,e.getStateStyle(n))}),t)},i.prototype.setState=function(e,t){var r=this.get("states"),n=this.get("shapeFactory"),a=e,o=e;(0,h.isString)(t)&&(a="".concat(e,":").concat(t),o="".concat(e,":"));var s=r;if((0,h.isBoolean)(t)){var u=r.indexOf(o);if(t){if(u>-1)return;r.push(a)}else u>-1&&r.splice(u,1)}else if((0,h.isString)(t)){var c=r.filter(function(_){return _.includes(o)});c.length>0&&this.clearStates(c),s=s.filter(function(_){return!_.includes(o)}),s.push(a),this.set("states",s)}if(n){var f=this.get("model"),l=f.type;n.setState(l,e,t,this)}},i.prototype.clearStates=function(e){var t=this,r=t.getStates(),n=t.get("shapeFactory"),a=t.get("model"),o=a.type;e||(e=r),(0,h.isString)(e)&&(e=[e]);var s=r.filter(function(u){return e.indexOf(u)===-1});t.set("states",s),e.forEach(function(u){n.setState(o,u,!1,t)})},i.prototype.setOptimize=function(e){this.optimize=e},i.prototype.getContainer=function(){return this.get("group")},i.prototype.getKeyShape=function(){return this.get("keyShape")},i.prototype.getModel=function(){return this.get("model")},i.prototype.getType=function(){return this.get("type")},i.prototype.getID=function(){return this.get("id")},i.prototype.isItem=function(){return!0},i.prototype.getStates=function(){return this.get("states")},i.prototype.hasState=function(e){var t=this.getStates();return t.indexOf(e)>=0},i.prototype.refresh=function(e){var t=this.get("model");this.updatePosition(t),this.updateShape(e),this.afterUpdate(),this.clearCache()},i.prototype.getUpdateType=function(e){},i.prototype.update=function(e,t){t===void 0&&(t=void 0);var r=this.get("model");if(t==="move")this.updatePosition(e);else{var n=r.visible,a=e.visible;n!==a&&a!==void 0&&this.changeVisibility(a);var o={x:r.x,y:r.y};e.x=isNaN(+e.x)?r.x:+e.x,e.y=isNaN(+e.y)?r.y:+e.y;var s=this.get("styles");if(e.stateStyles){var u=e.stateStyles;(0,h.mix)(s,u),delete e.stateStyles}Object.assign(r,e),(o.x!==e.x||o.y!==e.y)&&this.updatePosition(e),this.updateShape(t)}this.afterUpdate(),this.clearCache()},i.prototype.updateShape=function(e){var t=this.get("shapeFactory"),r=this.get("model"),n=r.type;if(t.shouldUpdate(n)&&n===this.get("currentShape")){var a=this.getShapeCfg(r,e);t.baseUpdate(n,a,this,e),e!=="move"&&this.setOriginStyle()}else this.draw();this.restoreStates(t,n)},i.prototype.updatePosition=function(e){var t=this.get("model"),r=isNaN(+e.x)?+t.x:+e.x,n=isNaN(+e.y)?+t.y:+e.y,a=this.get("group");if(isNaN(r)||isNaN(n))return!1;t.x=r,t.y=n;var o=a.getMatrix();return o&&o[6]===r&&o[7]===n?!1:(a.resetMatrix(),di(a,{x:r,y:n}),this.clearCache(),!0)},i.prototype.getBBox=function(){var e=this.get(Dh);return e||(e=this.calculateBBox(),this.set(Dh,e)),e},i.prototype.getCanvasBBox=function(){var e=this.get(Lh);return e||(e=this.calculateCanvasBBox(),this.set(Lh,e)),e},i.prototype.toFront=function(){var e=this.get("group");e.toFront()},i.prototype.toBack=function(){var e=this.get("group");e.toBack()},i.prototype.show=function(){this.changeVisibility(!0)},i.prototype.hide=function(){this.changeVisibility(!1)},i.prototype.changeVisibility=function(e){var t=this.get("group");e?t.show():t.hide(),this.set("visible",e)},i.prototype.isVisible=function(){return this.get("visible")},i.prototype.enableCapture=function(e){var t=this.get("group");t&&t.set("capture",e)},i.prototype.destroy=function(){if(!this.destroyed){var e=this.get("animate"),t=this.get("group");e&&t.stopAnimate(),t.shapeMap={},this.clearCache(),t.remove(),this._cfg=null,this.destroyed=!0}},i}(),Bv=H0,Yd={source:"start",target:"end"},Tc="Node",ad="Point",Z0="Anchor",K0=function(i){(0,y.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getDefaultCfg=function(){return{type:"edge",sourceNode:null,targetNode:null,startPoint:null,endPoint:null,linkCenter:!1}},e.prototype.setEnd=function(t,r){var n=Yd[t]+ad,a=t+Tc,o=this.get(a);o&&!o.destroyed&&o.removeEdge(this),(0,h.isPlainObject)(r)?(this.set(n,r),this.set(a,null)):r&&(r.addEdge(this),this.set(a,r),this.set(n,null))},e.prototype.getLinkPoint=function(t,r,n){var a=Yd[t]+ad,o=t+Tc,s=this.get(a);if(!s){var u=this.get(o),c=t+Z0,f=this.getPrePoint(t,n),l=r[c];(0,h.isNil)(l)||(s=u.getLinkPointByAnchor(l)),s=s||u.getLinkPoint(f),(0,h.isNil)(s.index)||this.set("".concat(t,"AnchorIndex"),s.index)}return s},e.prototype.getPrePoint=function(t,r){if(r&&r.length){var n=t==="source"?0:r.length-1;return r[n]}var a=t==="source"?"target":"source";return this.getEndPoint(a)},e.prototype.getEndPoint=function(t){var r=t+Tc,n=Yd[t]+ad,a=this.get(r);return a&&!a.destroyed?a.get("model"):this.get(n)},e.prototype.getControlPointsByCenter=function(t){var r=this.getEndPoint("source"),n=this.getEndPoint("target"),a=this.get("shapeFactory"),o=t.type;return a.getControlPoints(o,{startPoint:r,endPoint:n})},e.prototype.getEndCenter=function(t){var r=t+Tc,n=Yd[t]+ad,a=this.get(r);if(a){var o=a.getBBox();return{x:o.centerX,y:o.centerY}}return this.get(n)},e.prototype.init=function(){i.prototype.init.call(this),this.setSource(this.get("source")),this.setTarget(this.get("target"))},e.prototype.getShapeCfg=function(t,r){var n=this,a=n.get("linkCenter"),o=r!=null&&r.includes("move")?t:i.prototype.getShapeCfg.call(this,t);if(a)o.startPoint=n.getEndCenter("source"),o.endPoint=n.getEndCenter("target");else{var s=o.controlPoints||n.getControlPointsByCenter(o);o.startPoint=n.getLinkPoint("source",t,s),o.endPoint=n.getLinkPoint("target",t,s)}return o.sourceNode=n.get("sourceNode"),o.targetNode=n.get("targetNode"),o},e.prototype.getModel=function(){var t=this.get("model"),r=this.get("source".concat(Tc)),n=this.get("target".concat(Tc));return r?delete t["source".concat(Tc)]:t.source=this.get("start".concat(ad)),n?delete t["target".concat(Tc)]:t.target=this.get("end".concat(ad)),!(0,h.isString)(t.source)&&!(0,h.isPlainObject)(t.source)&&(t.source=t.source.getID()),!(0,h.isString)(t.target)&&!(0,h.isPlainObject)(t.target)&&(t.target=t.target.getID()),t},e.prototype.setSource=function(t){this.setEnd("source",t),this.set("source",t)},e.prototype.setTarget=function(t){this.setEnd("target",t),this.set("target",t)},e.prototype.getSource=function(){return this.get("source")},e.prototype.getTarget=function(){return this.get("target")},e.prototype.updatePosition=function(){return!1},e.prototype.update=function(t,r){r===void 0&&(r=void 0);var n=this.get("model"),a=n.visible,o=t.visible;a!==o&&o!==void 0&&this.changeVisibility(o);var s=this.get("source"),u=this.get("target");if(!(!s||s.destroyed||!u||u.destroyed)){var c=this.get("styles");if(t.stateStyles){var f=t.stateStyles;(0,h.mix)(c,f),delete t.stateStyles}Object.assign(n,t),this.updateShape(r),this.afterUpdate(),this.clearCache()}},e.prototype.destroy=function(){var t=this.get("source".concat(Tc)),r=this.get("target".concat(Tc));t&&!t.destroyed&&t.removeEdge(this),r&&!r.destroyed&&r.removeEdge(this),i.prototype.destroy.call(this)},e}(Bv),Fv=K0,Ph="anchorPointsCache",$0="bboxCache",q0=function(i){(0,y.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getNearestPoint=function(t,r){for(var n=0,a=t[0],o=sa(t[0],r),s=0;s<t.length;s++){var u=t[s],c=sa(u,r);c<o&&(a=u,o=c,n=s)}return a.anchorIndex=n,a},e.prototype.getDefaultCfg=function(){return{type:"node",edges:[]}},e.prototype.getEdges=function(){return this.get("edges")},e.prototype.getInEdges=function(){var t=this;return this.get("edges").filter(function(r){return r.get("target")===t})},e.prototype.getOutEdges=function(){var t=this;return this.get("edges").filter(function(r){return r.get("source")===t})},e.prototype.getNeighbors=function(t){var r=this,n=this.get("edges");if(t==="target"){var a=function(c){return c.getSource()===r};return n.filter(a).map(function(u){return u.getTarget()})}if(t==="source"){var o=function(c){return c.getTarget()===r};return n.filter(o).map(function(u){return u.getSource()})}var s=function(c){return c.getSource()===r?c.getTarget():c.getSource()};return n.map(s)},e.prototype.getLinkPointByAnchor=function(t){var r=this.getAnchorPoints();return r[t]},e.prototype.getLinkPoint=function(t){var r=this.get("keyShape"),n=r.get("type"),a=this.get("type"),o,s,u=this.getBBox();a==="combo"?(o=u.centerX||(u.maxX+u.minX)/2,s=u.centerY||(u.maxY+u.minY)/2):(o=u.centerX,s=u.centerY);var c=this.getAnchorPoints(),f;switch(n){case"circle":f=Nr({x:o,y:s,r:u.width/2},t);break;case"ellipse":f=Sr({x:o,y:s,rx:u.width/2,ry:u.height/2},t);break;default:f=Rr(u,t)}var l=f;return c.length&&(l||(l=t),l=this.getNearestPoint(c,l)),l||(l={x:o,y:s}),l},e.prototype.getAnchorPoints=function(){var t=this.get(Ph);if(!t){t=[];var r=this.get("shapeFactory"),n=this.getBBox(),a=this.get("model"),o=this.getShapeCfg(a),s=a.type,u=r.getAnchorPoints(s,o)||[];(0,h.each)(u,function(c,f){var l={x:n.minX+c[0]*n.width,y:n.minY+c[1]*n.height,anchorIndex:f};t.push(l)}),this.set(Ph,t)}return t},e.prototype.addEdge=function(t){this.get("edges").push(t)},e.prototype.lock=function(){this.set("locked",!0)},e.prototype.unlock=function(){this.set("locked",!1)},e.prototype.hasLocked=function(){return this.get("locked")},e.prototype.removeEdge=function(t){var r=this.getEdges(),n=r.indexOf(t);n>-1&&r.splice(n,1)},e.prototype.clearCache=function(){this.set($0,null),this.set(Ph,null)},e.prototype.getUpdateType=function(t){var r,n,a,o,s;if(t){var u=!(0,h.isNil)(t.x),c=!(0,h.isNil)(t.y),f=Object.keys(t);if(f.length===1&&(u||c)||f.length===2&&u&&c)return"move";if((0,h.isNumber)(t.x)||(0,h.isNumber)(t.y)||t.type||t.anchorPoints||t.size||t!=null&&t.style&&(!((r=t==null?void 0:t.style)===null||r===void 0)&&r.r||!((n=t==null?void 0:t.style)===null||n===void 0)&&n.width||!((a=t==null?void 0:t.style)===null||a===void 0)&&a.height||!((o=t==null?void 0:t.style)===null||o===void 0)&&o.rx||!((s=t==null?void 0:t.style)===null||s===void 0)&&s.ry))return"bbox|label";var l=f.includes("label")||f.includes("labelCfg");return l?"style|label":"style"}},e.prototype.setState=function(t,r){var n=this;if(this.optimize){i.prototype.setState.call(this,t,r);return}this.runWithBBoxAffected(function(){return i.prototype.setState.call(n,t,r)})},e.prototype.clearStates=function(t){var r=this;if(this.optimize){i.prototype.clearStates.call(this,t);return}this.runWithBBoxAffected(function(){return i.prototype.clearStates.call(r,t)})},e.prototype.runWithBBoxAffected=function(t){var r=["r","width","height","rx","ry","lineWidth"],n=this.getKeyShape().attr(),a={};Object.keys(this.getKeyShape().attr()).forEach(function(c){r.includes(c)&&(a[c]=n[c])}),t();for(var o=this.getKeyShape().attr(),s=0;s<r.length;s++){var u=r[s];if(o[u]!==a[u]){this.clearCache(),this.getEdges().forEach(function(c){return c.refresh()});break}}},e}(Bv),Nh=q0,zv="bboxCache",Gv="bboxCanvasCache",Uv="sizeCache",Wv="anchorPointsCache",Q0=function(i){(0,y.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getDefaultCfg=function(){return{type:"combo",nodes:[],edges:[],combos:[]}},e.prototype.getShapeCfg=function(t){var r=this.get("styles"),n=this.get("bbox");if(r&&n){var a=t,o=(0,h.isNumber)(t.size)?[t.size,t.size]:t.size,s=(0,h.isNumber)(t.fixSize)?[t.fixSize,t.fixSize]:t.fixSize,u=o||s||Yt.defaultCombo.size,c={r:(Math.max(n.width,n.height)||Math.max(u[0],u[1]))/2,width:n.width||u[0],height:n.height||u[1]};a.style=(0,y.__assign)((0,y.__assign)((0,y.__assign)({},r),t.style),c);var f=t.padding||Yt.defaultCombo.padding;return(0,h.isNumber)(f)?(c.r+=f,c.width+=f*2,c.height+=f*2):(c.r=c.r+Math.max.apply(Math,f),c.width+=f[1]+f[3]||f[1]*2,c.height+=f[0]+f[2]||f[0]*2),this.set(Uv,c),a}return t},e.prototype.calculateCanvasBBox=function(){if(!this.destroyed){var t=this.get("keyShape"),r=this.get("group"),n=qa(t,r);n.centerX=(n.minX+n.maxX)/2,n.centerY=(n.minY+n.maxY)/2;var a=this.get(zv)||{},o=a.x,s=a.x;return n.width=n.maxX-n.minX,n.height=n.maxY-n.minY,n.centerX=(n.minX+n.maxX)/2,n.centerY=(n.minY+n.maxY)/2,n.x=n.minX,n.y=n.minY,(n.x!==o||n.y!==s)&&this.set(Wv,null),n}},e.prototype.getChildren=function(){var t=this;return{nodes:t.getNodes(),combos:t.getCombos()}},e.prototype.getNodes=function(){var t=this;return t.get("nodes")},e.prototype.getCombos=function(){var t=this;return t.get("combos")},e.prototype.addChild=function(t){var r=this,n=t.getType();switch(n){case"node":r.addNode(t);break;case"combo":r.addCombo(t);break;default:return console.warn("Only node or combo items are allowed to be added into a combo"),!1}return!0},e.prototype.addCombo=function(t){var r=this;return r.get("combos").push(t),!0},e.prototype.addNode=function(t){var r=this;return r.get("nodes").push(t),!0},e.prototype.removeChild=function(t){var r=this,n=t.getType();switch(n){case"node":r.removeNode(t);break;case"combo":r.removeCombo(t);break;default:return console.warn("Only node or combo items are allowed to be added into a combo"),!1}return!0},e.prototype.removeCombo=function(t){if(t){var r=this.getCombos(),n=r.indexOf(t);return n>-1?(r.splice(n,1),!0):!1}},e.prototype.removeNode=function(t){if(t){var r=this.getNodes(),n=r.indexOf(t);return n>-1?(r.splice(n,1),!0):!1}},e.prototype.getUpdateType=function(t){},e.prototype.getBBox=function(){this.set(Gv,null);var t=this.calculateCanvasBBox();return t},e.prototype.clearCache=function(){this.set(zv,null),this.set(Gv,null),this.set(Wv,null)},e.prototype.destroy=function(){if(!this.destroyed){var t=this.get("animate"),r=this.get("group");t&&r.stopAnimate(),r.shapeMap={},this.clearCache(),this.set(Uv,null),this.set("bbox",null),r.remove(),this._cfg=null,this.destroyed=!0}},e}(Nh),Yv=Q0,Xd="node",jd="edge",Xv="vedge",bd="combo",J0="default",jv="Mapper",uf="stateStyles",tm=function(){function i(e){var t=this;this.edgeToBeUpdateMap={},this.throttleRefresh=(0,h.throttle)(function(r){var n=t.graph;if(!(!n||n.get("destroyed"))){var a=t.edgeToBeUpdateMap;if(a){var o=Object.values(a);o.length&&(o.forEach(function(s){var u=s.edge;if(!(!u||u.destroyed)){var c=u.getSource(),f=u.getTarget();!c||c.destroyed||!f||f.destroyed||u.refresh(s.updateType)}}),t.edgeToBeUpdateMap={})}}},16,{trailing:!0,leading:!0}),this.graph=e,this.destroyed=!1}return i.prototype.addItem=function(e,t){var r=this.graph,n=e===Xv?jd:e,a=r.get("".concat(n,"Group"))||r.get("group"),o=(0,h.upperFirst)(n),s=null,u=r.get(n+(0,h.upperFirst)(uf))||{},c=r.get(J0+o);t[uf]&&(u=t[uf]),c&&(0,h.each)(c,function(se,oe){(0,h.isObject)(se)&&!(0,h.isArray)(se)?t[oe]=(0,h.deepMix)({},se,t[oe]):(0,h.isArray)(se)?t[oe]=t[oe]||(0,h.clone)(c[oe]):t[oe]=t[oe]||c[oe]});var f=r.get(n+jv);if(f){var l=f(t);l[uf]&&(u=l[uf],delete l[uf]),(0,h.each)(l,function(se,oe){(0,h.isObject)(se)&&!(0,h.isArray)(se)?t[oe]=(0,h.deepMix)({},t[oe],se):t[oe]=l[oe]||t[oe]})}if(r.emit("beforeadditem",{type:e,model:t}),e===jd||e===Xv){var _=void 0,I=void 0;if(_=t.source,I=t.target,_&&(0,h.isString)(_)&&(_=r.findById(_)),I&&(0,h.isString)(I)&&(I=r.findById(I)),!_||!I){console.warn("The source or target node of edge ".concat(t.id," does not exist!"));return}_.getType&&_.getType()==="combo"&&(t.isComboEdge=!0),I.getType&&I.getType()==="combo"&&(t.isComboEdge=!0),s=new Fv({model:t,source:_,target:I,styles:u,linkCenter:r.get("linkCenter"),group:a.addGroup()})}else if(e===Xd)s=new Nh({model:t,styles:u,group:a.addGroup()});else if(e===bd){var B=t.children,j=Hs(B,r),et=void 0,ut=void 0;if(isNaN(j.x)?isNaN(t.x)&&(et=Math.random()*100):et=j.x,isNaN(j.y)?isNaN(t.y)&&(ut=Math.random()*100):ut=j.y,isNaN(t.x)||isNaN(t.y))t.x=et,t.y=ut;else{var ft=t.x-et,gt=t.y-ut;this.updateComboSucceeds(t.id,ft,gt,B)}var Mt=a.addGroup();Mt.setZIndex(t.depth),s=new Yv({model:t,styles:u,animate:r.get("animate"),bbox:t.collapsed?Hs([],r):j,group:Mt}),!t.collapsed&&s.getKeyShape().get("type")==="circle"&&(j.width=Math.hypot(j.height,j.width),j.height=j.width,s.set("bbox",j),s.refresh());var Ht=s.getModel();(B||[]).forEach(function(se){var oe=r.findById(se.id);s.addChild(oe),se.depth=Ht.depth+2})}if(s)return s.setOptimize(r.getNodes().length>r.get("optimizeThreshold")),r.get("".concat(e,"s")).push(s),r.get("itemMap")[s.get("id")]=s,r.emit("afteradditem",{item:s,model:t}),s},i.prototype.updateItem=function(e,t){var r=this,n,a,o=this.graph;if((0,h.isString)(e)&&(e=o.findById(e)),!(!e||e.destroyed)){var s="";e.getType&&(s=e.getType());var u=o.get(s+jv),c=e.getModel(),f=c.x,l=c.y,_=e.getUpdateType(t);if(u){var I=(0,h.deepMix)({},c,t),B=u(I),j=(0,h.deepMix)({},c,B,t);B[uf]&&(e.set("styles",j[uf]),delete j[uf]),(0,h.each)(j,function(Ne,Qe){t[Qe]=Ne})}else(0,h.each)(t,function(Ne,Qe){c[Qe]&&(0,h.isObject)(Ne)&&!(0,h.isArray)(Ne)&&(t[Qe]=(0,y.__assign)((0,y.__assign)({},c[Qe]),t[Qe]))});if(o.emit("beforeupdateitem",{item:e,cfg:t}),s===jd){if(t.source){var et=t.source;(0,h.isString)(et)&&(et=o.findById(et)),e.setSource(et)}if(t.target){var ut=t.target;(0,h.isString)(ut)&&(ut=o.findById(ut)),e.setTarget(ut)}e.update(t)}else if(s===Xd){e.update(t,_);var ft=e.getEdges();_==="move"?(0,h.each)(ft,function(Ne){r.edgeToBeUpdateMap[Ne.getID()]={edge:Ne,updateType:_},r.throttleRefresh()}):_!=null&&_.includes("bbox")&&(0,h.each)(ft,function(Ne){Ne.refresh(_)})}else if(s===bd){if(e.update(t,_),!isNaN(t.x)||!isNaN(t.y)){var gt=t.x-f||0,Mt=t.y-l||0;this.updateComboSucceeds(c.id,gt,Mt)}var Ht=e.getEdges(),se=(_==null?void 0:_.includes("bbox"))||_==="move";if(se&&s===bd){var oe=e.get("shapeFactory"),_e=c.type||"circle",Ue=c.animate===void 0||t.animate===void 0?(a=(n=oe[_e])===null||n===void 0?void 0:n.options)===null||a===void 0?void 0:a.animate:c.animate||t.animate;Ue?setTimeout(function(){if(!(!e||e.destroyed)){var Ne=e.getKeyShape();!Ne||Ne.destroyed||(0,h.each)(Ht,function(Qe){Qe&&!Qe.destroyed&&Qe.refresh()})}},201):(0,h.each)(Ht,function(Ne){Ne.refresh()})}}e.setOptimize(o.getNodes().length>o.get("optimizeThreshold")),o.emit("afterupdateitem",{item:e,cfg:t})}},i.prototype.updateCombo=function(e,t,r){var n=this,a,o,s=this.graph;if((0,h.isString)(e)&&(e=s.findById(e)),!(!e||e.destroyed)){var u=e.getModel(),c=Hs(t,s,e),f=c.x,l=c.y;e.set("bbox",c);var _=f,I=l;r?(_=isNaN(u.x)?f:u.x,I=isNaN(u.y)?l:u.y):(_=isNaN(f)?u.x:f,I=isNaN(l)?u.y:l),e.update({x:_,y:I});var B=e.get("shapeFactory"),j=u.type||"circle",et=u.animate===void 0?(o=(a=B[j])===null||a===void 0?void 0:a.options)===null||o===void 0?void 0:o.animate:u.animate;et?setTimeout(function(){if(!(!e||e.destroyed)){var ut=e.getKeyShape();!ut||ut.destroyed||(e.getShapeCfg(u),n.updateComboEdges(e))}},201):this.updateComboEdges(e)}},i.prototype.updateComboEdges=function(e){for(var t,r,n=e.getEdges()||[],a=0;a<n.length;a++){var o=n[a];!(o!=null&&o.destroyed)&&!(!((t=o==null?void 0:o.getSource())===null||t===void 0)&&t.destroyed)&&!(!((r=o==null?void 0:o.getTarget())===null||r===void 0)&&r.destroyed)&&o.refresh()}},i.prototype.collapseCombo=function(e,t){t===void 0&&(t=!0);var r=this.graph;(0,h.isString)(e)&&(e=r.findById(e));var n=e.getChildren();n.nodes.forEach(function(a){r.hideItem(a,t)}),n.combos.forEach(function(a){r.hideItem(a,t)})},i.prototype.updateComboSucceeds=function(e,t,r,n){var a=this;n===void 0&&(n=[]);var o=this.graph;if(!(!t&&!r)){var s=n;if(!(s!=null&&s.length)){var u=o.get("comboTrees");u==null||u.forEach(function(c){Qi(c,function(f){return f.id===e?(s=f.children,!1):!0})})}s==null||s.forEach(function(c){var f=o.findById(c.id);if(f){var l=f.getModel();a.updateItem(c.id,{x:(l.x||0)+t,y:(l.y||0)+r})}})}},i.prototype.expandCombo=function(e,t){t===void 0&&(t=!0);var r=this.graph;(0,h.isString)(e)&&(e=r.findById(e));var n=e.getChildren(),a=new Set;n.nodes.forEach(function(o){r.showItem(o,t),o.getEdges().forEach(function(s){return a.add(s)})}),n.combos.forEach(function(o){o.getModel().collapsed?o.show():r.showItem(o,t),o.getEdges().forEach(function(s){return a.add(s)})}),a.forEach(function(o){return o.refresh()})},i.prototype.removeItem=function(e){var t=this,r=this.graph;if((0,h.isString)(e)&&(e=r.findById(e)),!(!e||e.destroyed)){var n=(0,h.clone)(e.getModel()),a="";e.getType&&(a=e.getType()),r.emit("beforeremoveitem",{item:n,type:a});var o=r.get("".concat(a,"s")),s=o.indexOf(e);if(s>-1&&o.splice(s,1),a===jd){var u=r.get("v".concat(a,"s")),c=u.indexOf(e);c>-1&&u.splice(c,1)}var f=e.get("id"),l=r.get("itemMap");delete l[f];var _=r.get("comboTrees"),I=e.get("id");if(a===Xd){var B=e.getModel().comboId;if(_&&B){var j=_,et=!1;_.forEach(function(se){et||Qi(se,function(oe){if(oe.id===I&&j){var _e=j.indexOf(oe);return j.splice(_e,1),et=!0,!1}return j=oe.children,!0})})}for(var ut=e.getEdges(),ft=ut.length-1;ft>=0;ft--)r.removeItem(ut[ft],!1);B&&r.updateCombo(B)}else if(a===bd){var gt=e.getModel().parentId,Mt,Ht=!1;(_||[]).forEach(function(oe){Ht||Qi(oe,function(_e){return _e.id===I?(Mt=_e,Ht=!0,!1):!0})}),Mt.removed=!0,Mt&&Mt.children&&Mt.children.forEach(function(oe){t.removeItem(oe.id)});for(var ut=e.getEdges(),ft=ut.length;ft>=0;ft--)r.removeItem(ut[ft],!1);gt&&r.updateCombo(gt)}e.destroy(),r.emit("afterremoveitem",{item:n,type:a})}},i.prototype.setItemState=function(e,t,r){var n=this.graph,a=t;(0,h.isString)(r)&&(a="".concat(t,":").concat(r)),!(e.hasState(a)===r&&r||(0,h.isString)(r)&&e.hasState(a))&&(n.emit("beforeitemstatechange",{item:e,state:a,enabled:r}),e.setState(t,r),n.autoPaint(),n.emit("afteritemstatechange",{item:e,state:a,enabled:r}))},i.prototype.priorityState=function(e,t){var r=this.graph,n=e;(0,h.isString)(e)&&(n=r.findById(e)),this.setItemState(n,t,!1),this.setItemState(n,t,!0)},i.prototype.clearItemStates=function(e,t){var r=this.graph;(0,h.isString)(e)&&(e=r.findById(e)),r.emit("beforeitemstatesclear",{item:e,states:t}),e.clearStates(t),r.emit("afteritemstatesclear",{item:e,states:t})},i.prototype.refreshItem=function(e){var t=this.graph;(0,h.isString)(e)&&(e=t.findById(e)),t.emit("beforeitemrefresh",{item:e}),e.refresh(),t.emit("afteritemrefresh",{item:e})},i.prototype.addCombos=function(e,t){var r=this,n=this.graph;(e||[]).forEach(function(o){Lo(o,function(s){var u;return t.forEach(function(c){c.id===s.id&&(c.children=s.children,c.depth=s.depth,u=c)}),u&&r.addItem("combo",u),!0})});var a=n.get("comboGroup");a&&a.sort()},i.prototype.changeItemVisibility=function(e,t){var r=this,n=this.graph;if((0,h.isString)(e)&&(e=n.findById(e)),!e){console.warn("The item to be shown or hidden does not exist!");return}if(n.emit("beforeitemvisibilitychange",{item:e,visible:t}),e.changeVisibility(t),e.getType&&e.getType()===Xd){var a=e.getEdges();(0,h.each)(a,function(f){t&&!(f.get("source").isVisible()&&f.get("target").isVisible())||r.changeItemVisibility(f,t)})}else if(e.getType&&e.getType()===bd){var o=n.get("comboTrees"),s=e.get("id"),u=[],c=!1;(o||[]).forEach(function(l){c||!l.children||l.children.length===0||Qi(l,function(_){return _.id===s?(u=_.children,c=!0,!1):!0})}),u&&(!t||t&&!e.getModel().collapsed)&&u.forEach(function(l){var _=n.findById(l.id);r.changeItemVisibility(_,t)});var a=e.getEdges();(0,h.each)(a,function(l){t&&!(l.get("source").isVisible()&&l.get("target").isVisible())||r.changeItemVisibility(l,t)})}return n.emit("afteritemvisibilitychange",{item:e,visible:t}),e},i.prototype.destroy=function(){this.graph=null,this.destroyed=!0},i}(),em=tm,rm=function(){function i(e){this.graph=e,this.destroyed=!1}return i.prototype.updateState=function(e,t,r){var n=this.graph.get("states"),a=t;(0,h.isString)(r)&&(a="".concat(t,":").concat(r)),n[a]||(n[a]=[]),r?n[a].push(e):n[a]=n[a].filter(function(o){return o!==e}),this.graph.set("states",n),this.graph.emit("graphstatechange",{states:n})},i.prototype.updateStates=function(e,t,r){var n=this.graph.get("states"),a=(0,h.isString)(t)?[t]:t;a.forEach(function(o){var s=o;n[s]||(n[s]=[]),(0,h.isString)(r)&&(s="".concat(o,":").concat(r)),r?n[s].push(e):n[s]=n[s].filter(function(u){return u!==e})}),this.graph.set("states",n),this.graph.emit("graphstatechange",{states:t})},i.prototype.destroy=function(){this.graph=null,this.destroyed=!0},i}(),nm=rm,am=function(e,t){return!e||!t?e:e.replace(/\\?\{([^{}]+)\}/g,function(r,n){if(r.charAt(0)==="\\")return r.slice(1);var a=t[n];return a===0&&(a="0"),a||""})},Vv=function(e){var t=[];if(e.length<2)throw new Error("point length must largn than 2, now it's ".concat(e.length));for(var r=0,n=e;r<n.length;r++){var a=n[r],o=a.x,s=a.y;t.push(o),t.push(s)}var u=Wa(t);return u.unshift(["M",e[0].x,e[0].y]),u},Vd=function(e,t,r,n){r===void 0&&(r=0),n===void 0&&(n=0);var a={x:(1-r)*e.x+r*t.x,y:(1-r)*e.y+r*t.y},o=[0,0];oa.normalize(o,[t.x-e.x,t.y-e.y]),(!o||!o[0]&&!o[1])&&(o=[0,0]);var s=[-o[1]*n,o[0]*n];return a.x+=s[0],a.y+=s[1],a},im=function(e,t){var r=e.length;if(!r)return"";for(var n="",a="",o=0;o<r;o++){var s=e[o];o===0?a="M{x} {y}":a="L{x} {y}",n+=am(a,s)}return t&&(n+="Z"),n},Rh=function(e){var t=[];return e.forEach(function(r){var n=r[0];if(n!=="A")for(var a=1;a<r.length;a=a+2)t.push([r[a],r[a+1]]);else{var o=r.length;t.push([r[o-2],r[o-1]])}}),t},kh=function(e){if(e.length<2)throw new Error("point length must largn than 2, now it's ".concat(e.length));var t=e[0],r=e[1],n=e[e.length-1],a=e[e.length-2];e.unshift(n),e.unshift(a),e.push(t),e.push(r);for(var o=[],s=1;s<e.length-2;s+=1){var u=e[s-1].x,c=e[s-1].y,f=e[s].x,l=e[s].y,_=e[s+1].x,I=e[s+1].y,B=s!==e.length-2?e[s+2].x:_,j=s!==e.length-2?e[s+2].y:I,et=f+(_-u)/6,ut=l+(I-c)/6,ft=_-(B-f)/6,gt=I-(j-l)/6;o.push(["C",et,ut,ft,gt,_,I])}return o.unshift(["M",n.x,n.y]),o},Hv=function(e,t){return oa.scale([0,0],oa.normalize([0,0],e),t)},Zv=function(e,t){var r=[e[1]-t[1],t[0]-e[0]],n=Math.sqrt(r[0]*r[0]+r[1]*r[1]);if(n===0)throw new Error("p0 should not be equal to p1");return[r[0]/n,r[1]/n]},Kv=function(e,t){return[t[0]-e[0],t[1]-e[1]]};function Bh(i,e){var t=function(l){var _=[l[0][0],l[0][1]-e],I=[l[0][0],l[0][1]+e];return"M ".concat(_," A ").concat(e,",").concat(e,",0,0,0,").concat(I," A ").concat(e,",").concat(e,",0,0,0,").concat(_)},r=function(l){var _=oa.scale([0,0],Zv(l[0],l[1]),e),I=oa.scale([0,0],_,-1),B=oa.add([0,0],l[0],_),j=oa.add([0,0],l[1],_),et=oa.add([0,0],l[1],I),ut=oa.add([0,0],l[0],I);return"M ".concat(B," L ").concat(j," A ").concat([e,e,"0,0,0",et].join(",")," L ").concat(ut," A ").concat([e,e,"0,0,0",B].join(","))};if(!i||i.length<1)return"";if(i.length===1)return t(i);if(i.length===2)return r(i);for(var n=new Array(i.length),a=0;a<n.length;++a){var o=a===0?i[i.length-1]:i[a-1],s=i[a],u=oa.scale([0,0],Zv(o,s),e);n[a]=[oa.add([0,0],o,u),oa.add([0,0],s,u)]}var c="A ".concat([e,e,"0,0,0,"].join(","));return n=n.map(function(f,l){var _="";return l===0&&(_="M ".concat(n[n.length-1][1]," ")),_+="".concat(c+f[0]," L ").concat(f[1]),_}),n.join(" ")}function $v(i,e){var t=i.length,r=function(f){var l=[f[0][0],f[0][1]-e],_=[f[0][0],f[0][1]+e];return"M ".concat(l," A ").concat([e,e,"0,0,0",_].join(",")," A ").concat([e,e,"0,0,0",l].join(","))},n=function(f){var l=Kv(f[0],f[1]),_=Hv(l,e),I=oa.add([0,0],f[0],oa.scale([0,0],_,-1)),B=oa.add([0,0],f[1],_),j=1.2*e,et=Hv(oa.normalize([0,0],l),j),ut=oa.scale([0,0],et,-1),ft=oa.add([0,0],I,ut),gt=oa.add([0,0],B,ut),Mt=oa.add([0,0],I,et);return"M ".concat(I," C ").concat([ft,gt,B].join(",")," S ").concat([Mt,I].join(",")," Z")};if(!i||t<1)return"";if(t===1)return r(i);if(t===2)return n(i);for(var a=i.map(function(c,f){var l=i[(f+1)%t];return{p:c,v:oa.normalize([0,0],Kv(c,l))}}),o=0;o<a.length;++o){var s=o>0?o-1:t-1,u=oa.normalize([0,0],oa.add([0,0],a[s].v,oa.scale([0,0],a[o].v,-1)));a[o].p=oa.add([0,0],a[o].p,oa.scale([0,0],u,e))}return a.map(function(c){var f=c.p;return{x:f[0],y:f[1]}})}var om=function(e,t){for(var r=[],n=0;n<5;n++){var a=Math.cos((18+72*n)/180*Math.PI)*e,o=Math.sin((18+72*n)/180*Math.PI)*e,s=Math.cos((54+72*n)/180*Math.PI)*t,u=Math.sin((54+72*n)/180*Math.PI)*t;n===0?r.push(["M",a,-o]):r.push(["L",a,-o]),r.push(["L",s,-u])}return r.push(["Z"]),r},qv=function(e,t,r){return(e.y-r.y)*(t.x-r.x)-(e.x-r.x)*(t.y-r.y)},Qv=function(e){var t=e.map(function(l){return{x:l.getModel().x,y:l.getModel().y}});t.sort(function(l,_){return l.x===_.x?l.y-_.y:l.x-_.x});for(var r={},n=t.length-1;n>=0;n--){var a=t[n],o=a.x,s=a.y;r["".concat(o,"-").concat(s)]&&t.splice(n,1),r["".concat(o,"-").concat(s)]=!0}if(t.length===1)return t;for(var u=[],n=0;n<t.length;n++){for(;u.length>=2&&qv(u[u.length-2],u[u.length-1],t[n])<=0;)u.pop();u.push(t[n])}for(var c=[],n=t.length-1;n>=0;n--){for(;c.length>=2&&qv(c[c.length-2],c[c.length-1],t[n])<=0;)c.pop();c.push(t[n])}c.pop(),u.pop();var f=u.concat(c);return f},sm={maxRoutingIterations:100,maxMarchingIterations:100,pixelGroupSize:2,edgeR0:10,edgeR1:10,nodeR0:5,nodeR1:10,morphBuffer:5,threshold:.001,skip:16,nodeInfluenceFactor:1,edgeInfluenceFactor:1,negativeNodeInfluenceFactor:-.5};function um(i,e,t){var r=!1,n=function(u,c){return e.cells[u+c*e.width]},a=function(u,c){var f=0;return n(u-1,c-1)>=t&&(f+=1),n(u,c-1)>t&&(f+=2),n(u-1,c)>t&&(f+=4),n(u,c)>t&&(f+=8),f},o=function(u,c){for(var f=u,l=c,_,I,B=0;B<e.width*e.height;B++){if(_=f,I=l,i.findIndex(function(et){return et.x===f&&et.y===l})>-1){if(!(i[0].x!==f||i[0].y!==l))return!0}else i.push({x:f,y:l});var j=a(f,l);switch(j){case-1:return console.warn("Marched out of bounds"),!0;case 0:case 3:case 2:case 7:f++;break;case 12:case 14:case 4:f--;break;case 6:_===0&&(I===-1?f-=1:f+=1);break;case 1:case 13:case 5:l--;break;case 9:_===1&&(I===0?l-=1:l+=1);break;case 10:case 8:case 11:l++;break;default:return console.warn("Marching squares invalid state: ".concat(j)),!0}}};this.march=function(){for(var s=0;s<e.width&&!r;s+=1)for(var u=0;u<e.height&&!r;u+=1)n(s,u)>t&&a(s,u)!==15&&(r=o(s,u));return r}}var cm=function(e,t,r){var n=Math.ceil(e/r),a=Math.ceil(t/r),o=new Float32Array(Math.max(0,n*a)).fill(0);return{cells:o,width:n,height:a}},fm=function(e,t,r){var n=null,a=Number.POSITIVE_INFINITY;return t.forEach(function(o){var s={x:e.getModel().x,y:e.getModel().y},u={x:o.getModel().x,y:o.getModel().y},c=mo(s,u),f=new Oa(s.x,s.y,u.x,u.y),l=r.reduce(function(_,I){return co(I,f)>0?_+1:_},0);c*Math.pow(l+1,2)<a&&(n=o,a=c*Math.pow(l+1,2))}),n},Jv=function(e,t){var r=Number.POSITIVE_INFINITY,n=null;return e.forEach(function(a){var o=co(a,t);o>=0&&o<r&&(n=a,r=o)}),n},lm=function(e,t,r,n){var a=[],o=[];o.push(e);for(var s=!0,u=0,c=function(I,B){var j=!1;return B.forEach(function(et){j||(es(I,{x:et.x1,y:et.y1})||es(I,{x:et.x2,y:et.y2}))&&(j=!0)}),j},f=function(I,B){for(var j=0,et=B;j<et.length;j++){var ut=et[j],ft=ut.getBBox(),gt=[[ft.x,ft.y],[ft.x+ft.width,ft.y],[ft.x,ft.y+ft.height],[ft.x+ft.width,ft.y+ft.height]];if(Di(gt,I.x,I.y))return!0}return!1};s&&u<r;){s=!1;for(var l=function(){var I=o.pop(),B=Jv(t,I);if(B){var j=Ri(B,I),et=j[0],ut=j[1];if(ut===2){var ft=function(Mt){for(var Ht=n,se=tp(B,Ht,et,Mt),oe=c(se,o)||c(se,a),_e=f(se,t);!oe&&_e&&Ht>=1;)Ht/=1.5,se=tp(B,Ht,et,Mt),oe=c(se,o)||c(se,a),_e=f(se,t);se&&!oe&&(!Mt||!_e)&&(o.push(new Oa(I.x1,I.y1,se.x,se.y)),o.push(new Oa(se.x,se.y,I.x2,I.y2)),s=!0)};ft(!0),s||ft(!1)}}s||a.push(I),u+=1};!s&&o.length;)l()}for(;o.length;)a.push(o.pop());return a};function dm(i,e,t,r,n){var a=fm(i,t,e);if(a===null)return[];var o=function(l){for(var _=[];l.length>0;){var I=l.pop();if(l.length===0){_.push(I);break}var B=l.pop(),j=new Oa(I.x1,I.y1,B.x2,B.y2),et=Jv(e,j);et?(_.push(I),l.push(B)):l.push(j)}return _},s=new Oa(i.getModel().x,i.getModel().y,a.getModel().x,a.getModel().y),u=lm(s,e,r,n),c=o(u);return c}var hm=function(e,t,r){var n=Object.assign(sm,r),a=qi(e.map(function(ft){return{x:ft.getModel().x,y:ft.getModel().y}}));e=e.sort(function(ft,gt){return mo({x:ft.getModel().x,y:ft.getModel().y},a)-mo({x:gt.getModel().x,y:gt.getModel().y},a)});var o=[],s=[];e.forEach(function(ft){var gt=dm(ft,t,o,n.maxRoutingIterations,n.morphBuffer);gt.forEach(function(Mt){s.push(Mt)}),o.push(ft)});for(var u=vm(e,s,n.nodeR0),c=cm(u.width,u.height,n.pixelGroupSize),f=[],l=[],_=0;_<n.maxMarchingIterations;_++)if(pm(e,t,s,u,c,n),f=[],l=[],!!new um(f,c,n.threshold).march()){var I=f.map(function(ft){return{x:Math.round(ft.x*n.pixelGroupSize+u.minX),y:Math.round(ft.y*n.pixelGroupSize+u.minY)}});if(I){var B=I.length;if(n.skip>1)for(B=Math.floor(I.length/n.skip);B<3&&n.skip>1;)n.skip-=1,B=Math.floor(I.length/n.skip);for(var j=0,et=0;et<B;et+=1,j+=n.skip)l.push({x:I[j].x,y:I[j].y})}var ut=function(){for(var gt=0,Mt=e;gt<Mt.length;gt++){var Ht=Mt[gt],se=l.map(function(oe){return[oe.x,oe.y]});if(!Di(se,Ht.getBBox().centerX,Ht.getBBox().centerY))return!1}return!0};if(l&&ut())return l;if(n.threshold*=.9,_<=n.maxMarchingIterations*.5)n.memberInfluenceFactor*=1.2,n.edgeInfluenceFactor*=1.2;else if(n.nonMemberInfluenceFactor!==0&&t.length>0)n.nonMemberInfluenceFactor*=.8;else break}return l};function vm(i,e,t){var r={minX:Number.POSITIVE_INFINITY,minY:Number.POSITIVE_INFINITY,maxX:Number.NEGATIVE_INFINITY,maxY:Number.NEGATIVE_INFINITY,width:0,height:0,x:0,y:0},n=[];i.forEach(function(u){n.push(u.getBBox())}),e.forEach(function(u){n.push(u.getBBox())});for(var a=0,o=n;a<o.length;a++){var s=o[a];r.minX=(s.minX<r.minX?s.minX:r.minX)-t,r.minY=(s.minY<r.minY?s.minY:r.minY)-t,r.maxX=(s.maxX>r.maxX?s.maxX:r.maxX)+t,r.maxY=(s.maxY>r.maxY?s.maxY:r.maxY)+t}return r.width=r.maxX-r.minX,r.height=r.maxY-r.minY,r.x=r.minX,r.y=r.minY,r}function pm(i,e,t,r,n,a){function o(I,B){var j=Math.floor((I-B)/a.pixelGroupSize);return j<0?0:j}function s(I,B){return I*a.pixelGroupSize+B}var u=(a.nodeR0-a.nodeR1)*(a.nodeR0-a.nodeR1),c=(a.edgeR0-a.edgeR1)*(a.edgeR0-a.edgeR1),f=function(B,j){var et=Math.min(o(B.minX,j+r.minX),n.width),ut=Math.min(o(B.minY,j+r.minY),n.height),ft=Math.min(o(B.maxX,-j+r.minX),n.width),gt=Math.min(o(B.maxY,-j+r.minY),n.height);return[et,ut,ft,gt]},l=function(B,j){for(var et=B.getBBox(),ut=f(et,a.nodeR1),ft=ut[0],gt=ut[1],Mt=ut[2],Ht=ut[3],se=gt;se<Ht;se+=1)for(var oe=ft;oe<Mt;oe+=1)if(!(j<0&&n[oe+se*n.width]<=0)){var _e=s(oe,r.minX),Ue=s(se,r.minY),Ne=no({x:_e,y:Ue},{x:et.minX,y:et.minY,width:et.width,height:et.height});if(Ne<Math.pow(a.nodeR1,2)){var Qe=Math.sqrt(Ne)-a.nodeR1;n.cells[oe+se*n.width]+=j*Qe*Qe}}},_=function(B,j){for(var et=B.getBBox(),ut=f(et,a.edgeR1),ft=ut[0],gt=ut[1],Mt=ut[2],Ht=ut[3],se=gt;se<Ht;se+=1)for(var oe=ft;oe<Mt;oe+=1)if(!(j<0&&n.cells[oe+se*n.width]<=0)){var _e=s(oe,r.minX),Ue=s(se,r.minY),Ne=ts({x:_e,y:Ue},B);if(Ne<Math.pow(a.edgeR1,2)){var Qe=Math.sqrt(Ne)-a.edgeR1;n.cells[oe+se*n.width]+=j*Qe*Qe}}};a.nodeInfluenceFactor&&i.forEach(function(I){l(I,a.nodeInfluenceFactor/u)}),a.edgeInfluenceFactor&&t.forEach(function(I){_(I,a.edgeInfluenceFactor/c)}),a.negativeNodeInfluenceFactor&&e.forEach(function(I){l(I,a.negativeNodeInfluenceFactor/u)})}function tp(i,e,t,r){var n=i.getBBox(),a=t[0],o=t[1],s=t[2],u=t[3],c={topLeft:{x:n.minX-e,y:n.minY-e},topRight:{x:n.maxX+e,y:n.minY-e},bottomLeft:{x:n.minX-e,y:n.maxY+e},bottomRight:{x:n.maxX+e,y:n.maxY+e}},f=n.height*n.width;function l(B,j){return n.width*((B.y-n.minY+(j.y-n.minY))*.5)}if(o){if(a)return r?c.topLeft:c.bottomRight;if(s)return r?c.bottomLeft:c.topRight;var _=l(o,u);return _<f*.5?o.y>u.y?r?c.topLeft:c.bottomRight:r?c.topRight:c.bottomLeft:o.y<u.y?r?c.bottomLeft:c.topRight:r?c.bottomRight:c.topLeft}if(u){if(a)return r?c.topRight:c.bottomLeft;if(s)return r?c.bottomRight:c.topLeft}var I=l(a,s);return I<f*.5?a.x>s.x?r?c.topLeft:c.bottomRight:r?c.bottomLeft:c.topRight:a.x<s.x?r?c.topRight:c.bottomLeft:r?c.bottomRight:c.topLeft}var gm=function(){function i(e,t){this.cfg=(0,h.deepMix)(this.getDefaultCfg(),t),this.graph=e,this.id=this.cfg.id,this.group=this.cfg.group,this.members=this.cfg.members.map(function(r){return(0,h.isString)(r)?e.findById(r):r}),this.nonMembers=this.cfg.nonMembers.map(function(r){return(0,h.isString)(r)?e.findById(r):r}),this.setPadding(),this.setType(),this.path=this.calcPath(this.members,this.nonMembers),this.render()}return i.prototype.getDefaultCfg=function(){return{id:"g6-hull",type:"round-convex",members:[],nonMembers:[],style:{fill:"lightblue",stroke:"blue",opacity:.2},padding:10}},i.prototype.setPadding=function(){var e=this.members.length&&this.members[0].getKeyShape().getCanvasBBox().width/2;this.padding=this.cfg.padding>0?this.cfg.padding+e:10+e,this.cfg.bubbleCfg={nodeR0:this.padding-e,nodeR1:this.padding-e,morphBuffer:this.padding-e}},i.prototype.setType=function(){this.type=this.cfg.type,this.members.length<3&&(this.type="round-convex"),this.type!=="round-convex"&&this.type!=="smooth-convex"&&this.type!=="bubble"&&(console.warn("The hull type should be either round-convex, smooth-convex or bubble, round-convex is used by default."),this.type="round-convex")},i.prototype.calcPath=function(e,t){var r,n,a;switch(this.type){case"round-convex":r=Qv(e),a=Bh(r.map(function(o){return[o.x,o.y]}),this.padding),n=vs(a);break;case"smooth-convex":r=Qv(e),r.length===2?(a=Bh(r.map(function(o){return[o.x,o.y]}),this.padding),n=vs(a)):r.length>2&&(a=$v(r.map(function(o){return[o.x,o.y]}),this.padding),n=kh(a));break;case"bubble":r=hm(e,t,this.cfg.bubbleCfg),n=r.length>=2&&kh(r);break;default:}return n},i.prototype.render=function(){this.group.addShape("path",{attrs:(0,y.__assign)({path:this.path},this.cfg.style),id:this.id,name:this.cfg.id,capture:!1}),this.group.toBack()},i.prototype.addMember=function(e){if(e){(0,h.isString)(e)&&(e=this.graph.findById(e)),this.members.push(e);var t=this.nonMembers.indexOf(e);return t>-1&&this.nonMembers.splice(t,1),this.updateData(this.members,this.nonMembers),!0}},i.prototype.addNonMember=function(e){if(e){(0,h.isString)(e)&&(e=this.graph.findById(e)),this.nonMembers.push(e);var t=this.members.indexOf(e);return t>-1&&this.members.splice(t,1),this.updateData(this.members,this.nonMembers),!0}},i.prototype.removeMember=function(e){if(e){(0,h.isString)(e)&&(e=this.graph.findById(e));var t=this.members.indexOf(e);return t>-1?(this.members.splice(t,1),this.updateData(this.members,this.nonMembers),!0):!1}},i.prototype.removeNonMember=function(e){if(e){(0,h.isString)(e)&&(e=this.graph.findById(e));var t=this.nonMembers.indexOf(e);return t>-1?(this.nonMembers.splice(t,1),this.updateData(this.members,this.nonMembers),!0):!1}},i.prototype.updateData=function(e,t){var r=this;this.group.findById(this.id).remove(),e&&(this.members=e.map(function(n){return(0,h.isString)(n)?r.graph.findById(n):n})),t&&(this.nonMembers=t.map(function(n){return(0,h.isString)(n)?r.graph.findById(n):n})),this.path=this.calcPath(this.members,this.nonMembers),this.render()},i.prototype.updateStyle=function(e){var t=this.group.findById(this.id);t.attr((0,y.__assign)({},e))},i.prototype.updateCfg=function(e){var t=this;this.cfg=(0,h.deepMix)(this.cfg,e),this.id=this.cfg.id,this.group=this.cfg.group,e.members&&(this.members=this.cfg.members.map(function(r){return(0,h.isString)(r)?t.graph.findById(r):r})),e.nonMembers&&(this.nonMembers=this.cfg.nonMembers.map(function(r){return(0,h.isString)(r)?t.graph.findById(r):r})),this.setPadding(),this.setType(),this.path=this.calcPath(this.members,this.nonMembers),this.render()},i.prototype.contain=function(e){var t=this,r;(0,h.isString)(e)?r=this.graph.findById(e):r=e;var n,a=r.getKeyShape();if(r.get("type")==="path")n=Rh(a.attr("path"));else{var o=a.getCanvasBBox();n=[[o.minX,o.minY],[o.maxX,o.minY],[o.maxX,o.maxY],[o.minX,o.maxY]]}return n=n.map(function(s){var u=t.graph.getPointByCanvas(s[0],s[1]);return[u.x,u.y]}),ja(n,Rh(this.path))},i.prototype.destroy=function(){this.group.remove(),this.cfg=null},i}(),ep=gm,Ed=pt,mm="node",ym=function(i){(0,y.__extends)(e,i);function e(t){var r=i.call(this)||this;return r.sortCombos=(0,h.debounce)(function(){var n=r.get("comboSorted");if(!(!r||r.destroyed||n)){r.set("comboSorted",!0);var a=[],o={},s=r.get("comboTrees");(s||[]).forEach(function(c){Qi(c,function(f){return a[f.depth]?a[f.depth].push(f.id):a[f.depth]=[f.id],o[f.id]=f.depth,!0})});var u=r.getEdges().concat(r.get("vedges"));(u||[]).forEach(function(c){var f=c.getModel(),l=o[f.source]||0,_=o[f.target]||0,I=Math.max(l,_);a[I]?a[I].push(f.id):a[I]=[f.id]}),a.forEach(function(c){if(!(!c||!c.length))for(var f=c.length-1;f>=0;f--){var l=r.findById(c[f]);l&&l.toFront()}})}},500,!1),r.cfg=(0,h.deepMix)(r.getDefaultCfg(),t),r.init(),r.animating=!1,r.destroyed=!1,r.cfg.enabledStack&&(r.undoStack=new Oo(r.cfg.maxStep),r.redoStack=new Oo(r.cfg.maxStep)),r}return e.prototype.init=function(){this.initCanvas();var t=new W0(this),r=new Cu(this),n=new em(this),a=new nm(this);this.set({viewController:t,modeController:r,itemController:n,stateController:a}),this.initLayoutController(),this.initEventController(),this.initGroups(),this.initPlugins()},e.prototype.initGroups=function(){var t=this.get("canvas");if(t){var r=t.get("el"),n=(r||{}).id,a=n===void 0?"g6":n,o=t.addGroup({id:"".concat(a,"-root"),className:Yt.rootContainerClassName});if(this.get("groupByTypes")){var s=o.addGroup({id:"".concat(a,"-edge"),className:Yt.edgeContainerClassName}),u=o.addGroup({id:"".concat(a,"-node"),className:Yt.nodeContainerClassName}),c=o.addGroup({id:"".concat(a,"-combo"),className:Yt.comboContainerClassName});c.toBack(),this.set({nodeGroup:u,edgeGroup:s,comboGroup:c})}var f=o.addGroup({id:"".concat(a,"-delegate"),className:Yt.delegateContainerClassName});this.set({delegateGroup:f}),this.set("group",o)}},e.prototype.getDefaultCfg=function(){return{container:void 0,width:void 0,height:void 0,renderer:"canvas",modes:{},plugins:[],data:{},fitViewPadding:10,minZoom:.02,maxZoom:10,event:!0,groupByTypes:!0,directed:!1,autoPaint:!0,nodes:[],edges:[],combos:[],vedges:[],itemMap:{},linkCenter:!1,defaultNode:{},defaultEdge:{},nodeStateStyles:{},edgeStateStyles:{},states:{},animate:!1,animateCfg:{onFrame:void 0,duration:500,easing:"easeLinear"},callback:void 0,enabledStack:!1,maxStep:10,tooltips:[],optimizeThreshold:1e3}},e.prototype.set=function(t,r){return(0,h.isPlainObject)(t)?this.cfg=(0,y.__assign)((0,y.__assign)({},this.cfg),t):this.cfg[t]=r,t==="enabledStack"&&r&&!this.undoStack&&!this.redoStack&&(this.undoStack=new Oo(this.cfg.maxStep),this.redoStack=new Oo(this.cfg.maxStep)),this},e.prototype.get=function(t){var r;return(r=this.cfg)===null||r===void 0?void 0:r[t]},e.prototype.getGroup=function(){return this.get("group")},e.prototype.getContainer=function(){return this.get("container")},e.prototype.getMinZoom=function(){return this.get("minZoom")},e.prototype.setMinZoom=function(t){return this.set("minZoom",t)},e.prototype.getMaxZoom=function(){return this.get("maxZoom")},e.prototype.setMaxZoom=function(t){return this.set("maxZoom",t)},e.prototype.getWidth=function(){return this.get("width")},e.prototype.getHeight=function(){return this.get("height")},e.prototype.clearItemStates=function(t,r){(0,h.isString)(t)&&(t=this.findById(t));var n=this.get("itemController");r||(r=t.get("states")),n.clearItemStates(t,r);var a=this.get("stateController");a.updateStates(t,r,!1)},e.prototype.node=function(t){typeof t=="function"&&this.set("nodeMapper",t)},e.prototype.edge=function(t){typeof t=="function"&&this.set("edgeMapper",t)},e.prototype.combo=function(t){typeof t=="function"&&this.set("comboMapper",t)},e.prototype.findById=function(t){return this.get("itemMap")[t]},e.prototype.find=function(t,r){var n,a=this.get("".concat(t,"s"));return(0,h.each)(a,function(o,s){if(r(o,s))return n=o,n}),n},e.prototype.findAll=function(t,r){var n=[];return(0,h.each)(this.get("".concat(t,"s")),function(a,o){r(a,o)&&n.push(a)}),n},e.prototype.findAllByState=function(t,r,n){return n?this.findAll(t,function(a){return a.hasState(r)&&n(a)}):this.findAll(t,function(a){return a.hasState(r)})},e.prototype.translate=function(t,r,n,a){var o=this,s=this.get("group"),u=(0,h.clone)(s.getMatrix());if(u||(u=[1,0,0,0,1,0,0,0,1]),n){var c=Ls({animateCfg:a,callback:function(){return o.emit("viewportchange",{action:"translate",matrix:s.getMatrix()})}});Ma(s,{x:s.getCanvasBBox().x+t,y:s.getCanvasBBox().y+r},n,c||{duration:500,easing:"easeCubic"})}else u=Ed(u,[["t",t,r]]),s.setMatrix(u),this.emit("viewportchange",{action:"translate",matrix:u}),this.autoPaint()},e.prototype.moveTo=function(t,r,n,a){var o=this.get("group");Ma(o,{x:t,y:r},n,a||{duration:500,easing:"easeCubic"}),this.emit("viewportchange",{action:"move",matrix:o.getMatrix()})},e.prototype.fitView=function(t,r,n,a){t&&this.set("fitViewPadding",t);var o=this.get("viewController");r?o.fitViewByRules(r,n,a):o.fitView(n,a),this.autoPaint()},e.prototype.fitCenter=function(t,r){var n=this.get("viewController");n.fitCenter(t,r),this.autoPaint()},e.prototype.addBehaviors=function(t,r){var n=this.get("modeController");return n.manipulateBehaviors(t,r,!0),this},e.prototype.removeBehaviors=function(t,r){var n=this.get("modeController");return n.manipulateBehaviors(t,r,!1),this},e.prototype.updateBehavior=function(t,r,n){var a=this.get("modeController");return a.updateBehavior(t,r,n),this},e.prototype.zoom=function(t,r,n,a){var o=this,s=this.get("group"),u=(0,h.clone)(s.getMatrix())||[1,0,0,0,1,0,0,0,1],c=this.get("minZoom"),f=this.get("maxZoom"),l=this.getZoom()||1,_=l*t,I=t,B=!1;if(c&&_<c?(I=c/l,B=!0):f&&_>f&&(I=f/l,B=!0),r?u=Ed(u,[["t",-r.x,-r.y],["s",I,I],["t",r.x,r.y]]):u=Ed(u,[["s",I,I]]),n){var j=(0,h.clone)(s.getMatrix());j||(j=[1,0,0,0,1,0,0,0,1]);var et=j[0],ut=et*I,ft=Ls({animateCfg:a,callback:function(){return o.emit("viewportchange",{action:"zoom",matrix:s.getMatrix()})}});s.animate(function(gt){if(gt===1)j=u;else{var Mt=Fi(et,ut,gt)/j[0];r?j=Ed(j,[["t",-r.x,-r.y],["s",Mt,Mt],["t",r.x,r.y]]):j=Ed(j,[["s",Mt,Mt]])}return{matrix:j}},ft)}else s.setMatrix(u),this.emit("viewportchange",{action:"zoom",matrix:u}),this.autoPaint();return!B},e.prototype.zoomTo=function(t,r,n,a){var o=t/this.getZoom();return this.zoom(o,r,n,a)},e.prototype.focusItem=function(t,r,n){var a=this.get("viewController"),o=!1;r?o=!0:r===void 0&&(o=this.get("animate"));var s={};n?s=n:n===void 0&&(s=this.get("animateCfg")),a.focus(t,o,s),this.autoPaint()},e.prototype.focusItems=function(t,r,n,a){var o=this.get("viewController");o.focusItems(t,r,n,a)},e.prototype.autoPaint=function(){this.get("autoPaint")&&this.paint()},e.prototype.paint=function(){this.emit("beforepaint"),this.get("canvas").draw(),this.emit("afterpaint")},e.prototype.getPointByClient=function(t,r){var n=this.get("viewController");return n.getPointByClient(t,r)},e.prototype.getClientByPoint=function(t,r){var n=this.get("viewController");return n.getClientByPoint(t,r)},e.prototype.getPointByCanvas=function(t,r){var n=this.get("viewController");return n.getPointByCanvas(t,r)},e.prototype.getCanvasByPoint=function(t,r){var n=this.get("viewController");return n.getCanvasByPoint(t,r)},e.prototype.getGraphCenterPoint=function(){var t=this.get("group").getCanvasBBox();return{x:(t.minX+t.maxX)/2,y:(t.minY+t.maxY)/2}},e.prototype.getViewPortCenterPoint=function(){return this.getPointByCanvas(this.get("width")/2,this.get("height")/2)},e.prototype.showItem=function(t,r){r===void 0&&(r=!0);var n=this.get("itemController"),a=n.changeItemVisibility(t,!0);if(r&&this.get("enabledStack")){var o=a.getID(),s=a.getType(),u={},c={};switch(s){case"node":u.nodes=[{id:o,visible:!1}],c.nodes=[{id:o,visible:!0}];break;case"edge":u.nodes=[{id:o,visible:!1}],c.edges=[{id:o,visible:!0}];break;case"combo":u.nodes=[{id:o,visible:!1}],c.combos=[{id:o,visible:!0}];break;default:break}this.pushStack("visible",{before:u,after:c})}},e.prototype.hideItem=function(t,r){r===void 0&&(r=!0);var n=this.get("itemController"),a=n.changeItemVisibility(t,!1);if(r&&this.get("enabledStack")){var o=a.getID(),s=a.getType(),u={},c={};switch(s){case"node":u.nodes=[{id:o,visible:!0}],c.nodes=[{id:o,visible:!1}];break;case"edge":u.nodes=[{id:o,visible:!0}],c.edges=[{id:o,visible:!1}];break;case"combo":u.nodes=[{id:o,visible:!0}],c.combos=[{id:o,visible:!1}];break;default:break}this.pushStack("visible",{before:u,after:c})}},e.prototype.refreshItem=function(t){var r=this.get("itemController");r.refreshItem(t)},e.prototype.setAutoPaint=function(t){var r=this;r.set("autoPaint",t);var n=r.get("canvas");n.set("autoDraw",t)},e.prototype.remove=function(t,r){r===void 0&&(r=!0),this.removeItem(t,r)},e.prototype.removeItem=function(t,r){r===void 0&&(r=!0);var n=t;if((0,h.isString)(t)&&(n=this.findById(t)),!n&&(0,h.isString)(t))console.warn("The item ".concat(t," to be removed does not exist!"));else if(n){var a="";if(n.getType&&(a=n.getType()),r&&this.get("enabledStack")){var o=(0,y.__assign)((0,y.__assign)({},n.getModel()),{itemType:a}),s={};switch(a){case"node":{s.nodes=[o],s.edges=[];for(var u=n.getEdges(),c=u.length-1;c>=0;c--)s.edges.push((0,y.__assign)((0,y.__assign)({},u[c].getModel()),{itemType:"edge"}));break}case"edge":s.edges=[o];break;case"combo":s.combos=[o];break;default:break}this.pushStack("delete",{before:s,after:{}})}if(a==="node"){var f=n.getModel();f.comboId&&this.updateComboTree(n,void 0,!1)}var l=this.get("itemController");if(l.removeItem(n),a==="combo"){var _=qs(this.get("comboTrees"));this.set("comboTrees",_)}}},e.prototype.innerAddItem=function(t,r,n){if(!os(t,r))return!1;if(r.id&&this.findById(r.id)){console.warn("This item exists already. Be sure the id %c".concat(r.id,"%c is unique."),"font-size: 20px; color: red;","");return}var a,o=this.get("comboTrees")||[];if(t==="combo"){var s=this.get("itemMap"),u=!1;if(o.forEach(function(B){u||Lo(B,function(j){if(r.parentId===j.id){u=!0;var et=(0,y.__assign)({id:r.id,depth:j.depth+2},r);j.children?j.children.push(et):j.children=[et],r.depth=et.depth,a=n.addItem(t,r)}var ut=s[j.id];return u&&ut&&ut.getType&&ut.getType()==="combo"&&n.updateCombo(ut,j.children),!0})}),!u){var c=(0,y.__assign)({id:r.id,depth:0},r);r.depth=c.depth,o.push(c),a=n.addItem(t,r)}this.set("comboTrees",o),r.collapsed&&(this.collapseCombo(a,!1),this.updateCombo(a))}else if(t==="node"&&(0,h.isString)(r.comboId)&&o){var f=this.findById(r.comboId);f&&f.getType&&f.getType()!=="combo"&&console.warn("'".concat(r.comboId,"' is not a id of a combo in the graph, the node will be added without combo.")),a=n.addItem(t,r);var l=this.get("itemMap"),_=!1,I=!1;o.forEach(function(B){I||_||Lo(B,function(j){if(j.id===r.id)return I=!0,!1;if(r.comboId===j.id&&!I){_=!0;var et=(0,h.clone)(r);et.itemType="node",j.children?j.children.push(et):j.children=[et],et.depth=j.depth+1}return _&&l[j.id].getType&&l[j.id].getType()==="combo"&&n.updateCombo(l[j.id],j.children),!0})})}else a=n.addItem(t,r);if(t==="node"&&r.comboId||t==="combo"&&r.parentId){var f=this.findById(r.comboId||r.parentId);f&&f.getType&&f.getType()==="combo"&&f.addChild(a)}return a},e.prototype.addItem=function(t,r,n,a){n===void 0&&(n=!0),a===void 0&&(a=!0);var o=this.get("comboSorted");this.set("comboSorted",o&&!a);var s=this.get("itemController"),u=this.innerAddItem(t,r,s);if(u===!1||u===!0)return u;var c=this.get("combos");if(c&&c.length>0&&this.sortCombos(),this.autoPaint(),n&&this.get("enabledStack")){var f=(0,y.__assign)((0,y.__assign)({},u.getModel()),{itemType:t}),l={};switch(t){case"node":l.nodes=[f];break;case"edge":l.edges=[f];break;case"combo":l.combos=[f];break;default:break}this.pushStack("add",{before:{},after:l})}return u},e.prototype.addItems=function(t,r,n){t===void 0&&(t=[]),r===void 0&&(r=!0),n===void 0&&(n=!0);var a=this.get("comboSorted");this.set("comboSorted",a&&!n);for(var o=this.get("itemController"),s=[],u=0;u<t.length;u++){var c=t[u];c.type!=="edge"&&c.type!=="vedge"?s.push(this.innerAddItem(c.type,c.model,o)):s.push(void 0)}for(var u=0;u<t.length;u++){var c=t[u];(c.type==="edge"||c.type==="vedge")&&(s[u]=this.innerAddItem(c.type,c.model,o))}if(n){var f=this.get("combos");f&&f.length>0&&this.sortCombos()}if(this.autoPaint(),r&&this.get("enabledStack")){for(var l={nodes:[],edges:[],combos:[]},u=0;u<t.length;u++){var _=t[u].type,I=s[u];if(I&&I!==!0){var B=(0,y.__assign)((0,y.__assign)({},I.getModel()),{itemType:_});switch(_){case"node":l.nodes.push(B);break;case"edge":l.edges.push(B);break;case"combo":l.combos.push(B);break;default:break}}}this.pushStack("addItems",{before:{},after:l})}return s},e.prototype.add=function(t,r,n,a){return n===void 0&&(n=!0),a===void 0&&(a=!0),this.addItem(t,r,n,a)},e.prototype.updateItem=function(t,r,n){var a=this;n===void 0&&(n=!0);var o=this.get("itemController"),s;(0,h.isString)(t)?s=this.findById(t):s=t;var u=n&&this.get("enabledStack"),c;u&&(c=(0,h.clone)(s.getModel()));var f="";s.getType&&(f=s.getType());var l=(0,y.__spreadArray)([],s.getStates(),!0);if(f==="combo"&&(0,h.each)(l,function(j){return a.setItemState(s,j,!1)}),o.updateItem(s,r),f==="combo"&&(0,h.each)(l,function(j){return a.setItemState(s,j,!0)}),u){var _={nodes:[],edges:[],combos:[]},I={nodes:[],edges:[],combos:[]},B=(0,y.__assign)({id:c.id},r);switch(f){case"node":_.nodes.push(c),I.nodes.push(B);break;case"edge":_.edges.push(c),I.edges.push(B);break;case"combo":_.combos.push(c),I.combos.push(B);break;default:break}this.pushStack("update",{before:_,after:I})}},e.prototype.update=function(t,r,n){n===void 0&&(n=!0),this.updateItem(t,r,n)},e.prototype.setItemState=function(t,r,n){(0,h.isString)(t)&&(t=this.findById(t));var a=this.get("itemController");a.setItemState(t,r,n);var o=this.get("stateController");o.updateState(t,r,n)},e.prototype.priorityState=function(t,r){var n=this.get("itemController");n.priorityState(t,r)},e.prototype.data=function(t){Fs(t),this.set("data",t)},e.prototype.render=function(){var t=this;this.set("comboSorted",!1);var r=this.get("data");if(this.get("enabledStack")&&this.clearStack(),!r)throw new Error("data must be defined first");var n=r.nodes,a=n===void 0?[]:n,o=r.edges,s=o===void 0?[]:o,u=r.combos,c=u===void 0?[]:u;if(this.clear(!0),this.emit("beforerender"),t.addItems(a.map(function(et){return{type:"node",model:et}}),!1,!1),(c==null?void 0:c.length)!==0){var f=Vs(c,a);this.set("comboTrees",f),t.addCombos(c)}t.addItems(s.map(function(et){return{type:"edge",model:et}}),!1,!1);var l=t.get("animate");(t.get("fitView")||t.get("fitCenter"))&&t.set("animate",!1);var _=t.get("layoutController");if(_){if(_.layout(I),this.destroyed)return}else I();function I(){(t.get("comboTrees")||[]).forEach(function(et){Lo(et,function(ut){var ft=t.findById(ut.id);return ft.getType()==="combo"&&ut.collapsed&&(t.collapseCombo(ut.id,!1),t.updateCombo(ft)),!0})}),t.get("fitView")?t.fitView():t.get("fitCenter")&&t.fitCenter(),t.autoPaint(),t.emit("afterrender"),(t.get("fitView")||t.get("fitCenter"))&&t.set("animate",l),setTimeout(function(){var et;(et=t.getCombos())===null||et===void 0||et.forEach(function(ut){ut.set("animate",!0)})},0)}if(!this.get("groupByTypes"))if(c&&c.length!==0)this.sortCombos();else if(r.nodes&&r.edges&&r.nodes.length<r.edges.length){var B=this.getNodes();B.forEach(function(et){et.toFront()})}else{var j=this.getEdges();j.forEach(function(et){et.toBack()})}},e.prototype.read=function(t){this.data(t),this.render()},e.prototype.diffItems=function(t,r,n){var a=this,o,s=this.get("itemMap");(0,h.each)(n,function(u){if(o=s[u.id],o){if(a.get("animate")&&t===mm){var c=o.getContainer().getMatrix();c||(c=[1,0,0,0,1,0,0,0,1]),o.set("originAttrs",{x:c[6],y:c[7]})}a.updateItem(o,u,!1)}else o=a.addItem(t,u,!1);o&&r["".concat(t,"s")].push(o)})},e.prototype.changeData=function(t,r){var n=this,a;r===void 0&&(r=!0);var o=this,s=t||o.get("data");if(!Fs(s))return this;this.emit("beforechangedata"),r&&this.get("enabledStack")&&this.pushStack("changedata",{before:o.save(),after:s}),this.set("comboSorted",!1),this.removeHulls(),this.getNodes().map(function(ft){return o.clearItemStates(ft)}),this.getEdges().map(function(ft){return o.clearItemStates(ft)});var u=this.get("canvas"),c=u.get("localRefresh");u.set("localRefresh",!1),o.get("data")||(o.data(s),o.render());var f=this.get("itemMap"),l={nodes:[],edges:[]},_=s.combos;if(_){var I=Vs(_,s.nodes);this.set("comboTrees",I)}else this.set("comboTrees",[]);this.diffItems("node",l,s.nodes),(0,h.each)(f,function(ft,gt){f[gt].getModel().depth=0,!(ft.getType&&ft.getType()==="edge")&&(ft.getType&&ft.getType()==="combo"?(delete f[gt],ft.destroy()):l.nodes.indexOf(ft)<0&&(delete f[gt],o.remove(ft,!1)))});for(var B=this.getCombos(),j=B.length,et=j-1;et>=0;et--)B[et].destroyed&&B.splice(et,1);_&&(o.addCombos(_),this.get("groupByTypes")||this.sortCombos()),this.diffItems("edge",l,s.edges),(0,h.each)(f,function(ft,gt){ft.getType&&(ft.getType()==="node"||ft.getType()==="combo")||l.edges.indexOf(ft)<0&&(delete f[gt],o.remove(ft,!1))}),(this.get("comboTrees")||[]).forEach(function(ft){Lo(ft,function(gt){var Mt=n.findById(gt.id);return Mt.getType()==="combo"&&gt.collapsed&&n.collapseCombo(gt.id,!1),!0})}),this.set({nodes:l.nodes,edges:l.edges});var ut=this.get("layoutController");return ut&&(ut.changeData(function(){setTimeout(function(){var ft;(ft=o.getCombos())===null||ft===void 0||ft.forEach(function(gt){gt.set("animate",!0)})},0)}),o.get("animate")&&!ut.getLayoutType()?(o.positionsAnimate(),(a=o.getCombos())===null||a===void 0||a.forEach(function(ft){return ft.set("animate",!0)})):o.autoPaint()),setTimeout(function(){u.set("localRefresh",c)},16),this.set("data",s),this.emit("afterchangedata"),this},e.prototype.addCombos=function(t){var r=this,n=r.get("comboTrees"),a=this.get("itemController");a.addCombos(n,t)},e.prototype.createCombo=function(t,r,n){var a=this;n===void 0&&(n=!0);var o=this.get("itemController");this.set("comboSorted",!1);var s="",u;if(t){if((0,h.isString)(t))s=t,u={id:t};else{if(s=t.id,!s){console.warn("Create combo failed. Please assign a unique string id for the adding combo.");return}u=t}var c=n&&this.get("enabledStack"),f={nodes:[],combos:[]};c&&r.forEach(function(ut){var ft=a.findById(ut),gt=ft.getType();if(!(gt!=="node"&&gt!=="combo")){var Mt=ft.getModel();f["".concat(gt,"s")].push({id:ut,parentId:gt==="node"?Mt.comboId:Mt.parentId})}});var l=this.get("comboTrees"),_=new Set(r),I=new Map;l&&(l.forEach(function(ut){Lo(ut,function(ft,gt,Mt){if(_.has(ft.id)){if(gt){var Ht=a.findById(gt.id),se=a.findById(ft.id);gt.children.splice(Mt,1),Ht.removeChild(se),o.updateCombo(Ht,gt.children)}ft.itemType==="combo"&&I.set(ft.id,ft)}return!0})}),l=l.filter(function(ut){return!_.has(ut.id)}),this.set("comboTrees",l));var B={nodes:[],combos:[]},j=r.map(function(ut){var ft=a.findById(ut),gt=ft.getModel(),Mt="";ft.getType&&(Mt=ft.getType());var Ht=I.get(ut)||{id:ft.getID(),itemType:Mt};return Mt==="combo"?(Ht.parentId=s,gt.parentId=s):Mt==="node"&&(Ht.comboId=s,gt.comboId=s),c&&B["".concat(Mt,"s")].push({id:gt.id,parentId:s}),Ht});u.children=j,this.addItem("combo",u,!1),this.set("comboSorted",!1),l&&(l.forEach(function(ut){Qi(ut,function(ft){return ft.id===s?(ft.itemType="combo",ft.children=j,!1):!0})}),this.sortCombos()),c&&(B.combos.push(u),this.pushStack("createCombo",{before:f,after:B}));var et=this.findById(s);!et.getModel().parentId&&et.getChildren().combos.length&&this.updateComboTree(et,void 0,!1),setTimeout(function(){et.set("animate",!0)},0)}},e.prototype.uncombo=function(t,r){var n=this,a,o;r===void 0&&(r=!0);var s=this,u=t;if((0,h.isString)(t)&&(u=this.findById(t)),!u||u.getType&&u.getType()!=="combo"){console.warn("The item is not a combo!");return}var c=u.getModel(),f=u.getModel().parentId,l=s.get("comboTrees");l||(l=[]);var _=this.get("itemMap"),I=u.get("id"),B,j=[],et=this.get("combos"),ut=this.findById(f),ft=r&&this.get("enabledStack"),gt={};if(ft&&(gt=(0,h.clone)(c),gt.children=[]),l.forEach(function(oe){B||Lo(oe,function(_e){var Ue;if(_e.id===I){B=_e;var Ne=u.getEdges().map(function(nn){return nn.getID()});Ne.forEach(function(nn){n.removeItem(nn,!1)});var Qe=et.indexOf(u);et.splice(Qe,1),delete _[I];var dr=(0,h.clone)(u.getModel());u.destroy(),n.emit("afterremoveitem",{item:dr,type:"combo"})}if(f&&B&&_e.id===f){ut.removeCombo(u),j=_e.children;var Qe=j.indexOf(B);return Qe!==-1&&j.splice(Qe,1),(Ue=B.children)===null||Ue===void 0||Ue.forEach(function(kn){var En=n.findById(kn.id),Kr=En.getModel();En.getType&&En.getType()==="combo"?(kn.parentId=f,delete kn.comboId,Kr.parentId=f,delete Kr.comboId):En.getType&&En.getType()==="node"&&(kn.comboId=f,Kr.comboId=f),ut.addChild(En),j.push(kn)}),n.updateCombo(ut),!1}return!0})}),!f&&B){var Mt=l.indexOf(B);l.splice(Mt,1),(a=B.children)===null||a===void 0||a.forEach(function(oe){oe.parentId=void 0;var _e=n.findById(oe.id).getModel();delete _e.parentId,delete _e.comboId,oe.itemType!=="node"&&l.push(oe)})}if(ft){var Ht={nodes:[],combos:[]},se={nodes:[],combos:[]};(o=B.children)===null||o===void 0||o.forEach(function(oe){var _e=n.findById(oe.id),Ue=_e.getType();Ue!=="node"&&Ue!=="combo"||(Ht["".concat(Ue,"s")].push({id:oe.id,parentId:I}),se["".concat(Ue,"s")].push({id:oe.id,parentId:f}))}),Ht.combos.push(gt),this.pushStack("uncombo",{before:Ht,after:se})}},e.prototype.updateCombos=function(t){var r=this;t===void 0&&(t=!1);var n=this,a=this.get("comboTrees"),o=n.get("itemController"),s=n.get("itemMap");(a||[]).forEach(function(u){Lo(u,function(c){var f;if(!c)return!0;var l=s[c.id];if(((f=l==null?void 0:l.getType)===null||f===void 0?void 0:f.call(l))==="combo"){var _=(0,y.__spreadArray)([],l.getStates(),!0);(0,h.each)(_,function(I){return r.setItemState(l,I,!1)}),o.updateCombo(l,c.children,t),(0,h.each)(_,function(I){return r.setItemState(l,I,!0)})}return!0})}),n.sortCombos()},e.prototype.updateCombo=function(t){var r=this,n=this,a=t,o;if((0,h.isString)(t)&&(a=this.findById(t)),!a||a.getType&&a.getType()!=="combo"){console.warn("The item to be updated is not a combo!");return}o=a.get("id");var s=this.get("comboTrees"),u=n.get("itemController"),c=n.get("itemMap");(s||[]).forEach(function(f){Lo(f,function(l){if(!l)return!0;var _=c[l.id];if(o===l.id&&_&&_.getType&&_.getType()==="combo"){var I=(0,y.__spreadArray)([],_.getStates(),!0);(0,h.each)(I,function(B){_.getStateStyle(B)&&r.setItemState(_,B,!1)}),u.updateCombo(_,l.children),(0,h.each)(I,function(B){_.getStateStyle(B)&&r.setItemState(_,B,!0)}),o&&(o=l.parentId)}return!0})})},e.prototype.updateComboTree=function(t,r,n){n===void 0&&(n=!0);var a=this;this.set("comboSorted",!1);var o;(0,h.isString)(t)?o=a.findById(t):o=t;var s=o.getModel(),u=s.comboId||s.parentId,c="";if(o.getType&&(c=o.getType()),r&&c==="combo"){var f=this.get("comboTrees"),l=!0,_;if((f||[]).forEach(function(ft){_||Qi(ft,function(gt){if(!_)return gt.id===o.getID()&&(_=gt),!0})}),Qi(_,function(ft){return ft.id===r?(l=!1,!1):!0}),!l){console.warn("Failed to update the combo tree! The parentId points to a descendant of the combo!");return}}if(n&&this.get("enabledStack")){var I={},B={};c==="combo"?(I.combos=[{id:s.id,parentId:s.parentId}],B.combos=[{id:s.id,parentId:r}]):c==="node"&&(I.nodes=[{id:s.id,parentId:s.comboId}],B.nodes=[{id:s.id,parentId:r}]),this.pushStack("updateComboTree",{before:I,after:B})}if(s.parentId||s.comboId){var j=this.findById(s.parentId||s.comboId);j&&j.removeChild(o)}if(c==="combo"?s.parentId=r:c==="node"&&(s.comboId=r),r){var et=this.findById(r);et&&et.addChild(o)}if(u){var et=this.findById(u);et&&et.removeChild(o)}var ut=qs(this.get("comboTrees"),s.id,r);this.set("comboTrees",ut),this.updateCombos()},e.prototype.save=function(){var t=[],r=[],n=[];return(0,h.each)(this.get("nodes"),function(a){t.push(a.getModel())}),(0,h.each)(this.get("edges"),function(a){r.push(a.getModel())}),(0,h.each)(this.get("combos"),function(a){n.push(a.getModel())}),{nodes:t,edges:r,combos:n}},e.prototype.changeSize=function(t,r){var n=this.get("viewController");return n.changeSize(t,r),this},e.prototype.refresh=function(){var t=this;if(t.emit("beforegraphrefresh"),t.get("animate"))t.positionsAnimate();else{var r=t.get("nodes"),n=t.get("edges"),a=t.get("edges");(0,h.each)(r,function(o){o.refresh()}),(0,h.each)(n,function(o){o.refresh()}),(0,h.each)(a,function(o){o.refresh()})}t.emit("aftergraphrefresh"),t.autoPaint()},e.prototype.getNodes=function(){return this.get("nodes")},e.prototype.getEdges=function(){return this.get("edges")},e.prototype.getCombos=function(){return this.get("combos")},e.prototype.getComboChildren=function(t){if((0,h.isString)(t)&&(t=this.findById(t)),!t||t.getType&&t.getType()!=="combo"){console.warn("The combo does not exist!");return}return t.getChildren()},e.prototype.positionsAnimate=function(t){var r=this;r.emit("beforeanimate");var n=r.get("animateCfg"),a=n.onFrame,o=t?r.getNodes().concat(r.getCombos()):r.getNodes(),s=o.map(function(c){var f=c.getModel();return{id:f.id,x:f.x,y:f.y}});r.stopAnimate();var u=r.get("canvas");r.animating=!0,setTimeout(function(){u.animate(function(c){(0,h.each)(s,function(f){var l=r.findById(f.id);if(!(!l||l.destroyed)){var _=l.get("originAttrs"),I=l.get("model"),B=l.getContainer().getMatrix();if(_==null&&(B&&(_={x:B[6],y:B[7]}),l.set("originAttrs",_||0)),a){var j=a(l,c,f,_||{x:0,y:0});l.set("model",Object.assign(I,j))}else _?(I.x=_.x+(f.x-_.x)*c,I.y=_.y+(f.y-_.y)*c):(I.x=f.x,I.y=f.y)}}),r.refreshPositions(t)},{duration:n.duration,easing:n.easing,callback:function(){(0,h.each)(o,function(f){f.set("originAttrs",null)}),n.callback&&n.callback(),r.emit("afteranimate"),r.animating=!1}})},0)},e.prototype.refreshPositions=function(t){var r=this;r.emit("beforegraphrefreshposition");var n=r.get("nodes"),a=r.get("edges"),o=r.get("vedges"),s=r.get("combos"),u,c={},f=function(_){(0,h.each)(_,function(I){u=I.getModel();var B=I.get("originAttrs");if(!(B&&u.x===B.x&&u.y===B.y)){var j=I.updatePosition({x:u.x,y:u.y});c[u.id]=j,u.comboId&&(c[u.comboId]=c[u.comboId]||j),u.parentId&&(c[u.parentId]=c[u.parentId]||j)}})};f(s),f(n),s&&s.length!==0&&(t&&f(s),r.updateCombos()),(0,h.each)(a,function(l){var _=l.getSource().getModel(),I=l.getTarget();if(!(0,h.isPlainObject)(I)){var B=I.getModel();(c[_.id]||c[B.id]||l.getModel().isComboEdge)&&l.refresh()}}),(0,h.each)(o,function(l){l.refresh()}),r.emit("aftergraphrefreshposition"),r.autoPaint()},e.prototype.stopAnimate=function(){var t=this.get("canvas"),r=t.cfg.timeline;r&&r.stopAllAnimations()},e.prototype.isAnimating=function(){return this.animating},e.prototype.getZoom=function(){var t=this.get("group").getMatrix();return t?t[0]:1},e.prototype.getCurrentMode=function(){var t=this.get("modeController");return t.getMode()},e.prototype.setMode=function(t){var r=this.get("modeController");return r.setMode(t),this},e.prototype.clear=function(t){var r;return t===void 0&&(t=!1),(r=this.get("canvas"))===null||r===void 0||r.clear(),this.initGroups(),this.set({itemMap:{},nodes:[],edges:[],vedges:[],groups:[],combos:[],comboTrees:[]}),t||this.emit("afterrender"),this},e.prototype.updateLayout=function(t,r,n,a){var o=this;t===void 0&&(t={}),a===void 0&&(a=!0);var s=this.get("layoutController");if((0,h.isString)(t)&&(t={type:t}),r){var u=n;u||(r==="begin"?u={x:0,y:0}:u={x:this.getWidth()/2,y:this.getHeight()/2}),u=this.getPointByCanvas(u.x,u.y);var c=["force","gForce","fruchterman","force2"];c.includes(t.type)||!t.type&&c.includes(s==null?void 0:s.layoutType)?t.center=[u.x,u.y]:this.once("afterlayout",function(_){var I=o.getGroup().getMatrix()||[1,0,0,0,1,0,0,0,1];u.x=u.x*I[0]+I[6],u.y=u.y*I[0]+I[7];var B=o.getGroup().getCanvasBBox(),j=B.minX,et=B.maxX,ut=B.minY,ft=B.maxY,gt={x:(j+et)/2,y:(ut+ft)/2};r==="begin"&&(gt.x=j,gt.y=ut),o.translate(u.x-gt.x,u.y-gt.y)})}var f=(0,y.__assign)({},this.get("layout")),l={};Object.assign(l,f,t),t.pipes&&!t.type?delete l.type:!t.pipes&&l.type&&delete l.pipes,this.set("layout",l),s&&(s.isLayoutTypeSame(l)&&l.gpuEnabled===f.gpuEnabled?s.updateLayoutCfg(l):s.changeLayout(l),a&&this.get("enabledStack")&&this.pushStack("layout",{before:f,after:l}))},e.prototype.destroyLayout=function(){var t=this.get("layoutController");t==null||t.destroyLayout()},e.prototype.layout=function(){var t,r=this.get("layoutController"),n=this.get("layout");if(!(!n||!r)){if(n.workerEnabled){r.layout();return}!((t=r.layoutMethods)===null||t===void 0)&&t.length?r.relayout(!0):r.layout()}},e.prototype.collapseCombo=function(t,r){var n=this;if(r===void 0&&(r=!0),!this.destroyed){if((0,h.isString)(t)&&(t=this.findById(t)),!t){console.warn("The combo to be collapsed does not exist!");return}this.emit("beforecollapseexpandcombo",{action:"expand",item:t});var a=t.getModel(),o=this.get("itemController");o.collapseCombo(t,r),a.collapsed=!0;var s=this.getEdges().concat(this.get("vedges")),u=[],c=this.get("comboTrees"),f=!1;(c||[]).forEach(function(_){f||Qi(_,function(I){if(f&&I.depth<=a.depth)return!1;if(a.id===I.id&&(f=!0),f){var B=n.findById(I.id);B&&B.getType&&B.getType()==="combo"&&(u=u.concat(B.getNodes()),u=u.concat(B.getCombos()))}return!0})});var l={};s.forEach(function(_){var I=_.getModel(),B=I.isVEdge,j=I.size,et=j===void 0?1:j;if(!(_.isVisible()&&!B)){var ut=_.getSource(),ft=_.getTarget(),gt=null,Mt;if(ut.getModel().id===a.id||u.includes(ut)&&!u.includes(ft)?(gt=ft,Mt=!1):(ft.getModel().id===a.id||!u.includes(ut)&&u.includes(ft))&&(gt=ut,Mt=!0),gt){if(B){n.removeItem(_,!1);return}for(var Ht=gt.getModel();!gt.isVisible();){var se=Ht.parentId,oe=Ht.comboId,_e=se||oe;if(gt=n.findById(_e),!gt||!_e)return;Ht=gt.getModel()}var Ue=Ht.id,Ne=Mt?{source:Ue,target:a.id,size:et,isVEdge:!0}:{source:a.id,target:Ue,size:et,isVEdge:!0},Qe="".concat(Ne.source,"-").concat(Ne.target);if(l[Qe]){l[Qe].size+=et;return}l[Qe]=Ne}}}),this.addItems(Object.values(l).map(function(_){return{type:"vedge",model:_}}),!1),this.emit("aftercollapseexpandcombo",{action:"collapse",item:t})}},e.prototype.expandCombo=function(t,r){var n=this;if(r===void 0&&(r=!0),(0,h.isString)(t)&&(t=this.findById(t)),!t||t.getType&&t.getType()!=="combo"){console.warn("The combo to be collapsed does not exist!");return}this.emit("beforecollapseexpandcombo",{action:"expand",item:t});var a=t.getModel(),o=this.get("itemController");o.expandCombo(t,r),a.collapsed=!1;var s=this.getEdges().concat(this.get("vedges")),u=[],c=this.get("comboTrees"),f=!1;(c||[]).forEach(function(_){f||Qi(_,function(I){if(f&&I.depth<=a.depth)return!1;if(a.id===I.id&&(f=!0),f){var B=n.findById(I.id);B&&B.getType&&B.getType()==="combo"&&(u=u.concat(B.getNodes()),u=u.concat(B.getCombos()))}return!0})});var l={};s.forEach(function(_){if(!(_.isVisible()&&!_.getModel().isVEdge)){var I=_.getSource(),B=_.getTarget(),j=I.get("id"),et=B.get("id"),ut=null,ft;if(j===a.id||u.includes(I)&&!u.includes(B)?(ut=B,ft=!1):et===a.id||!u.includes(I)&&u.includes(B)?(ut=I,ft=!0):u.includes(I)&&u.includes(B)&&I.isVisible()&&B.isVisible()&&_.show(),ut){var gt=_.getModel(),Mt=gt.isVEdge,Ht=gt.size,se=Ht===void 0?1:Ht;if(Mt){n.removeItem(_,!1);return}for(var oe=ut.getModel();!ut.isVisible();){var _e=oe.parentId,Ue=oe.comboId,Ne=_e||Ue;if(ut=n.findById(Ne),!ut||!Ne)return;oe=ut.getModel()}for(var Qe=oe.id,dr=ft?B:I,nn=dr.getModel();!dr.isVisible();){var kn=nn.parentId,En=nn.comboId,Kr=kn||En;if(dr=n.findById(Kr),!dr||!Kr)return;if(nn.comboId===a.id||nn.parentId===a.id)break;nn=dr.getModel()}var Jn=nn.id;if(Qe){var Kn=ft?{source:Qe,target:Jn,isVEdge:!0,size:se}:{source:Jn,target:Qe,isVEdge:!0,size:se},$r="".concat(Kn.source,"-").concat(Kn.target);if(l[$r]){l[$r].size+=se;return}l[$r]=Kn}}}}),this.addItems(Object.values(l).map(function(_){return{type:"vedge",model:_}}),!1),this.emit("aftercollapseexpandcombo",{action:"expand",item:t})},e.prototype.collapseExpandCombo=function(t,r){if(r===void 0&&(r=!0),(0,h.isString)(t)&&(t=this.findById(t)),!(!t||t.getType&&t.getType()!=="combo")){for(var n=t.getModel(),a=this.findById(n.parentId);a;){var o=a.getModel();if(o.collapsed){console.warn("Fail to expand the combo since it's ancestor combo is collapsed."),a=void 0;return}a=this.findById(o.parentId)}var s=n.collapsed;s?this.expandCombo(t,r):this.collapseCombo(t,r),this.updateCombo(t)}},e.prototype.getNeighbors=function(t,r){var n=t;return(0,h.isString)(t)&&(n=this.findById(t)),n.getNeighbors(r)},e.prototype.getNodeDegree=function(t,r,n){r===void 0&&(r=void 0),n===void 0&&(n=!1);var a=t;(0,h.isString)(t)&&(a=this.findById(t));var o=this.get("degrees");(!o||n)&&(o=be(this.save()),this.set("degrees",o));var s=o[a.getID()],u=0;if(!s)return 0;switch(r){case"in":u=s.inDegree;break;case"out":u=s.outDegree;break;case"all":u=s;break;default:u=s.degree;break}return u},e.prototype.getUndoStack=function(){return this.undoStack},e.prototype.getRedoStack=function(){return this.redoStack},e.prototype.getStackData=function(){return this.get("enabledStack")?{undoStack:this.undoStack.toArray(),redoStack:this.redoStack.toArray()}:null},e.prototype.clearStack=function(){this.get("enabledStack")&&(this.undoStack.clear(),this.redoStack.clear(),this.emit("stackchange",{undoStack:this.undoStack,redoStack:this.redoStack}))},e.prototype.pushStack=function(t,r,n){if(t===void 0&&(t="update"),n===void 0&&(n="undo"),!this.get("enabledStack")){console.warn("\u8BF7\u5148\u542F\u7528 undo & redo \u529F\u80FD\uFF0C\u5728\u5B9E\u4F8B\u5316 Graph \u65F6\u5019\u914D\u7F6E enabledStack: true !");return}var a=r?(0,h.clone)(r):{before:{},after:(0,h.clone)(this.save())};n==="redo"?this.redoStack.push({action:t,data:a}):this.undoStack.push({action:t,data:a}),this.emit("stackchange",{action:t,stackType:n,undoStack:this.undoStack,redoStack:this.redoStack})},e.prototype.getAdjMatrix=function(t,r){t===void 0&&(t=!0),r===void 0&&(r=this.get("directed"));var n=this.get("adjMatrix");return(!n||!t)&&(n=q(this.save(),r),this.set("adjMatrix",n)),n},e.prototype.getShortestPathMatrix=function(t,r){t===void 0&&(t=!0),r===void 0&&(r=this.get("directed"));var n=this.get("adjMatrix"),a=this.get("shortestPathMatrix");return(!n||!t)&&(n=q(this.save(),r),this.set("adjMatrix",n)),(!a||!t)&&(a=vn(this.save(),r),this.set("shortestPathMatrix",a)),a},e.prototype.on=function(t,r,n){return i.prototype.on.call(this,t,r,n)},e.prototype.destroy=function(){var t,r,n,a,o;this.clear(),this.clearStack(),(t=this.get("itemController"))===null||t===void 0||t.destroy(),(r=this.get("modeController"))===null||r===void 0||r.destroy(),(n=this.get("viewController"))===null||n===void 0||n.destroy(),(a=this.get("stateController"))===null||a===void 0||a.destroy(),(o=this.get("canvas"))===null||o===void 0||o.destroy(),this.cfg=null,this.destroyed=!0,this.redoStack=null,this.undoStack=null},e.prototype.createHull=function(t){if(!t.members||t.members.length<1){console.warn("Create hull failed! The members is empty.");return}var r=this.get("hullGroup"),n=this.get("hullMap");if(n||(n={},this.set("hullMap",n)),(!r||r.get("destroyed"))&&(r=this.get("group").addGroup({id:"hullGroup"}),r.toBack(),this.set("hullGroup",r)),n[t.id])return console.warn("Existed hull id."),n[t.id];var a=r.addGroup({id:"".concat(t.id,"-container")}),o=new ep(this,(0,y.__assign)((0,y.__assign)({},t),{group:a})),s=o.id;return n[s]=o,o},e.prototype.getHulls=function(){return this.get("hullMap")},e.prototype.getHullById=function(t){return this.get("hullMap")[t]},e.prototype.removeHull=function(t){var r,n;(0,h.isString)(t)?n=this.getHullById(t):n=t,(r=this.get("hullMap"))===null||r===void 0||delete r[n.id],n.destroy()},e.prototype.removeHulls=function(){var t=this.getHulls();!t||!Object.keys(t).length||(Object.keys(t).forEach(function(r){var n=t[r];n.destroy()}),this.set("hullMap",{}))},e}(Q),rp=ym;function Fh(i){"@babel/helpers - typeof";return Fh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fh(i)}var id=pt,np="-shape",zh="-label",Hd=["startArrow","endArrow"],ap={lineWidth:1,stroke:void 0,fill:void 0,lineAppendWidth:1,opacity:void 0,strokeOpacity:void 0,fillOpacity:void 0,x:0,y:0,r:10,width:20,height:20,shadowColor:void 0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0},xm={lineWidth:1,stroke:"#000",lineDash:void 0,startArrow:!1,endArrow:!1,opacity:void 0,strokeOpacity:void 0,fillOpacity:void 0,shadowColor:void 0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0},Zd={edge:xm,node:ap,combo:ap},Gh="-label-bg",Uh={options:{labelCfg:{style:{fontFamily:Yt.windowFontFamily}},descriptionCfg:{style:{fontFamily:Yt.windowFontFamily}}},itemType:"",type:"",getCustomConfig:function(e){return{}},getOptions:function(e,t){return t==="move"||t!=null&&t.includes("bbox")?e:(0,h.deepMix)({},this.options,this.getCustomConfig(e)||{},e)},draw:function(e,t){t.shapeMap={},this.mergeStyle=this.getOptions(e);var r=this.drawShape(e,t);if(r.set("className",this.itemType+np),t.shapeMap[this.itemType+np]=r,e.label){var n=this.drawLabel(e,t);n.set("className",this.itemType+zh),t.shapeMap[this.itemType+zh]=n}return r},afterDraw:function(e,t,r){},drawShape:function(e,t){return null},drawLabel:function(e,t){var r=(this.mergeStyle||this.getOptions(e)||{}).labelCfg,n=r||{},a=this.getLabelStyle(e,n,t),o=a.rotate;delete a.rotate;var s=t.addShape("text",{attrs:a,draggable:!0,className:"text-shape",name:"text-shape",labelRelated:!0});if(t.shapeMap["text-shape"]=s,!isNaN(o)&&o!==""){var u=s.getBBox(),c=[1,0,0,0,1,0,0,0,1];if(a.rotateCenter)switch(a.rotateCenter){case"center":c=id(c,[["t",-u.width/2,-u.height/2],["r",o],["t",u.width/2,u.height/2]]);break;case"lefttop":c=id(c,[["t",-a.x,-a.y],["r",o],["t",a.x,a.y]]);break;case"leftcenter":c=id(c,[["t",-a.x,-a.y-u.height/2],["r",o],["t",a.x,a.y+u.height/2]]);break;default:c=id(c,[["t",-u.width/2,-u.height/2],["r",o],["t",u.width/2,u.height/2]]);break}else c=id(c,[["t",-a.x,-a.y-u.height/2],["r",o],["t",a.x,a.y+u.height/2]]);s.setMatrix(c)}if(a.background){var f=this.drawLabelBg(e,t,s),l=this.itemType+Gh;f.set("classname",l),t.shapeMap[l]=f,s.toFront()}return s},drawLabelBg:function(e,t,r){var n=this.options.labelCfg,a=(0,h.mix)({},n,e.labelCfg),o=this.getLabelBgStyleByPosition(r,a),s=t.addShape("rect",{name:"text-bg-shape",attrs:o,labelRelated:!0});return t.shapeMap["text-bg-shape"]=s,s},getLabelStyleByPosition:function(e,t,r){return{text:e.label}},getLabelBgStyleByPosition:function(e,t){return{}},getLabelStyle:function(e,t,r){var n=this.getLabelStyleByPosition(e,t,r),a="".concat(this.itemType,"Label"),o=Yt[a]?Yt[a].style:null;return(0,y.__assign)((0,y.__assign)((0,y.__assign)({},o),n),t.style)},getShapeStyle:function(e){return e.style},update:function(e,t,r){this.updateShapeStyle(e,t,r),this.updateLabel(e,t,r)},updateShapeStyle:function(e,t,r){var n,a=t.getContainer(),o=t.getKeyShape(),s=(0,h.mix)({},o.attr(),e.style),u=function(l){var _,I=s[l];if((0,h.isPlainObject)(I)){var B=((n=a.shapeMap)===null||n===void 0?void 0:n[l])||a.find(function(j){return j.get("name")===l});B==null||B.attr(I)}else o.attr((_={},_[l]=I,_))};for(var c in s)u(c)},updateLabel:function(e,t,r){var n,a,o=t.getContainer(),s=(this.mergeStyle||this.getOptions({},r)||{}).labelCfg,u=s===void 0?{}:s,c=this.itemType+zh,f=o.shapeMap[c]||o.find(function(Mt){return Mt.get("className")===c}),l=this.itemType+Gh,_=o.shapeMap[l]||o.find(function(Mt){return Mt.get("className")===l});if(f&&e.label===void 0&&(o.removeChild(f),delete o.shapeMap[c],_&&(o.removeChild(_),delete o.shapeMap[l])),e.label||e.label==="")if(f){(!r||r==="bbox|label"||this.itemType==="edge"&&r!=="style")&&(u=(0,h.deepMix)(u,e.labelCfg));var B=this.getLabelStyleByPosition(e,u,o),j=(n=e.labelCfg)===null||n===void 0?void 0:n.style,et=(0,y.__assign)((0,y.__assign)({},B),j),ut=et.rotate;if(delete et.rotate,!isNaN(ut)&&ut!==""){var ft=[1,0,0,0,1,0,0,0,1];ft=id(ft,[["t",-et.x,-et.y],["r",ut],["t",et.x,et.y]]),et.matrix=ft,f.attr(et)}else((a=f.getMatrix())===null||a===void 0?void 0:a[4])!==1&&f.resetMatrix(),f.attr(et);if(!_)et.background&&(_=this.drawLabelBg(e,o,f),_.set("classname",l),o.shapeMap[l]=_,f.toFront());else if(et.background){var gt=this.getLabelBgStyleByPosition(f,u);_.attr(gt)}else o.removeChild(_)}else{var I=this.drawLabel(e,o);I.set("className",c),o.shapeMap[c]=I}},afterUpdate:function(e,t){},setState:function(e,t,r){var n,a,o,s=r.get("keyShape");if(!(!s||s.destroyed)){var u=r.getType(),c=(0,h.isBoolean)(t)?e:"".concat(e,":").concat(t),f=this.getStateStyle(c,r),l=r.getStateStyle(c);if(!(!l&&!f)){var _=(0,h.mix)({},l||f),I=r.getContainer(),B={x:1,y:1,cx:1,cy:1,matrix:1};if(u==="combo"&&(B.r=1,B.width=1,B.height=1),t){var j=function(Kr){var Jn,Kn=_[Kr];if((0,h.isPlainObject)(Kn)&&!Hd.includes(Kr)){var $r=((o=I.shapeMap)===null||o===void 0?void 0:o[Kr])||I.find(function(xn){return xn.get("name")===Kr});$r==null||$r.attr(Kn)}else s.attr((Jn={},Jn[Kr]=Kn,Jn))};for(var et in _)j(et)}else{var ut=gs(r.getCurrentStatesStyle()),ft=r.getModel(),gt=(0,h.mix)({},ft.style,gs(r.getOriginStyle())),Mt=s.get("name"),Ht=s.attr(),se={};Object.keys(Ht).forEach(function(En){if(En!=="img"){var Kr=Ht[En];Kr&&Fh(Kr)==="object"?se[En]=(0,h.clone)(Kr):se[En]=Kr}});var oe={},_e=function(Kr){var Jn=_[Kr];if((0,h.isPlainObject)(Jn)&&!Hd.includes(Kr)){var Kn=I.shapeMap[Kr]||I.find(function(zn){return zn.get("name")===Kr});if(Kn){var $r=gs(Kn.attr());(0,h.each)(Jn,function(zn,Gn){if(Kr===Mt&&se[Gn]&&!B[Gn]){delete se[Gn];var ia=gt[Kr][Gn]||Zd[u][Gn];s.attr(Gn,ia)}else if($r[Gn]||$r[Gn]===0){delete $r[Gn];var ha=gt[Kr][Gn]||Zd[u][Gn];Kn.attr(Gn,ha)}}),oe[Kr]=$r}}else if(se[Kr]&&!B[Kr]){delete se[Kr];var xn=gt[Kr]||(gt[Mt]?gt[Mt][Kr]:void 0)||Zd[u][Kr];s.attr(Kr,xn)}};for(var Ue in _)_e(Ue);Mt?oe[Mt]=se:(0,h.mix)(oe,se);for(var et in ut)if(!B[et]){var Ne=ut[et];(!(0,h.isPlainObject)(Ne)||Hd.includes(et))&&(Mt?((0,h.mix)(gt[Mt],(a={},a[et]=Ne,a)),delete gt[et]):(0,h.mix)(gt,(n={},n[et]=Ne,n)),delete ut[et])}var Qe={};(0,h.deepMix)(Qe,gt,oe,ut);var dr=!1,nn=function(Kr){var Jn,Kn,$r=Qe[Kr];if((0,h.isPlainObject)($r)&&!Hd.includes(Kr)){var xn=I.shapeMap[Kr]||I.find(function(Gn){return Gn.get("name")===Kr});xn&&((xn.get("type")==="text"||xn.get("labelRelated"))&&(delete $r.x,delete $r.y,delete $r.matrix),Kr===Mt&&(u==="combo"&&(delete $r.r,delete $r.width,delete $r.height),dr=!0),xn.attr($r))}else if(!dr){var zn=$r||Zd[u][Kr];u==="combo"?Mt||s.attr((Jn={},Jn[Kr]=zn,Jn)):s.attr((Kn={},Kn[Kr]=zn,Kn))}};for(var kn in Qe)nn(kn)}}}},getStateStyle:function(e,t){var r=t.getModel(),n=t.getType(),a=this.getOptions(r),o=a.stateStyles,s=a.style,u=s===void 0?{}:s,c=r.stateStyles?r.stateStyles[e]:o&&o[e];return n==="combo"?(0,h.clone)(c):(0,h.mix)({},u,c)},getControlPoints:function(e){return e.controlPoints},getAnchorPoints:function(e){var t,r,n=(e==null?void 0:e.anchorPoints)||((t=this.getCustomConfig(e))===null||t===void 0?void 0:t.anchorPoints)||((r=this.options)===null||r===void 0?void 0:r.anchorPoints);return n}},bm={itemType:"node",shapeType:"single-node",labelPosition:"center",offset:Yt.nodeLabel.offset,getSize:function(e){var t,r=((t=this.mergeStyle)===null||t===void 0?void 0:t.size)||e.size||this.getOptions({}).size||Yt.defaultNode.size;return(0,h.isArray)(r)&&r.length===1&&(r=[r[0],r[0]]),(0,h.isArray)(r)||(r=[r,r]),r},getLabelStyleByPosition:function(e,t){var r=t.maxLength,n=e.label;r&&(n=ps(n,r));var a=t.position||this.labelPosition;if(a==="center")return{x:0,y:0,text:n,textBaseline:"middle",textAlign:"center"};var o=t.offset;(0,h.isNil)(o)&&(o=this.offset);var s=this.getSize(e),u;switch(a){case"top":u={x:0,y:-s[1]/2-o,textBaseline:"bottom",textAlign:"center"};break;case"bottom":u={x:0,y:s[1]/2+o,textBaseline:"top",textAlign:"center"};break;case"left":u={x:-s[0]/2-o,y:0,textBaseline:"middle",textAlign:"right"};break;default:u={x:s[0]/2+o,y:0,textBaseline:"middle",textAlign:"left"};break}return u.text=n,u},getLabelBgStyleByPosition:function(e,t){var r;if(!e)return{};var n=(r=t.style)===null||r===void 0?void 0:r.background;if(!n)return{};var a=e.getBBox(),o=Th(n.padding),s=a.width+o[1]+o[3],u=a.height+o[0]+o[2];return(0,y.__assign)((0,y.__assign)({x:a.minX-o[3],y:a.minY-o[0]},n),{width:s,height:u})},drawShape:function(e,t){var r=this.shapeType,n=this.getShapeStyle(e),a=t.addShape(r,{attrs:n,draggable:!0,name:"node-shape"});return t.shapeMap["node-shape"]=a,a},updateLinkPoints:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).linkPoints,n=t.shapeMap["link-point-left"]||t.find(function(Qe){return Qe.get("className")==="link-point-left"}),a=t.shapeMap["link-point-right"]||t.find(function(Qe){return Qe.get("className")==="link-point-right"}),o=t.shapeMap["link-point-top"]||t.find(function(Qe){return Qe.get("className")==="link-point-top"}),s=t.shapeMap["link-point-bottom"]||t.find(function(Qe){return Qe.get("className")==="link-point-bottom"}),u;n&&(u=n.attr()),a&&!u&&(u=a.attr()),o&&!u&&(u=o.attr()),s&&!u&&(u=s.attr()),u||(u=r);var c=(0,h.mix)({},u,e.linkPoints),f=c.fill,l=c.stroke,_=c.lineWidth,I=c.size/2;I||(I=c.r);var B=e.linkPoints?e.linkPoints:{left:void 0,right:void 0,top:void 0,bottom:void 0},j=B.left,et=B.right,ut=B.top,ft=B.bottom,gt=this.getSize(e),Mt=gt[0],Ht=gt[1],se={r:I,fill:f,stroke:l,lineWidth:_};if(n)!j&&j!==void 0?(n.remove(),delete t.shapeMap["link-point-left"]):n.attr((0,y.__assign)((0,y.__assign)({},se),{x:-Mt/2,y:0}));else if(j){var oe="link-point-left";t.shapeMap[oe]=t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},se),{x:-Mt/2,y:0}),className:oe,name:oe,isAnchorPoint:!0})}if(a)!et&&et!==void 0&&(a.remove(),delete t.shapeMap["link-point-right"]),a.attr((0,y.__assign)((0,y.__assign)({},se),{x:Mt/2,y:0}));else if(et){var _e="link-point-right";t.shapeMap[_e]=t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},se),{x:Mt/2,y:0}),className:_e,name:_e,isAnchorPoint:!0})}if(o)!ut&&ut!==void 0&&(o.remove(),delete t.shapeMap["link-point-top"]),o.attr((0,y.__assign)((0,y.__assign)({},se),{x:0,y:-Ht/2}));else if(ut){var Ue="link-point-top";t.shapeMap[Ue]=t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},se),{x:0,y:-Ht/2}),className:Ue,name:Ue,isAnchorPoint:!0})}if(s)!ft&&ft!==void 0?(s.remove(),delete t.shapeMap["link-point-bottom"]):s.attr((0,y.__assign)((0,y.__assign)({},se),{x:0,y:Ht/2}));else if(ft){var Ne="link-point-bottom";t.shapeMap[Ne]=t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},se),{x:0,y:Ht/2}),className:Ne,name:Ne,isAnchorPoint:!0})}},updateShape:function(e,t,r,n,a){var o=t.get("keyShape");o.attr((0,y.__assign)({},r)),this.updateLabel(e,t,a),n&&this.updateIcon(e,t)},updateIcon:function(e,t){var r=this,n=t.getContainer(),a=(this.mergeStyle||this.getOptions(e)).icon,o=e.icon?e.icon:{show:void 0,text:void 0},s=o.show,u=o.text,c=n.shapeMap["".concat(this.type,"-icon")]||n.find(function(ut){return ut.get("name")==="".concat(r.type,"-icon")});if(c)if(s||s===void 0){var f=(0,h.mix)({},c.attr(),a),l=f.width,_=l===void 0?20:l,I=f.height,B=I===void 0?20:I;(f.fontFamily==="iconfont"||f.hasOwnProperty("text"))&&(_=0,B=0),c.attr((0,y.__assign)((0,y.__assign)({},f),{x:-_/2,y:-B/2}))}else c.remove(),delete n.shapeMap["".concat(this.type,"-icon")];else if(s){var j="".concat(this.type,"-icon");if(u)n.shapeMap[j]=n.addShape("text",{attrs:(0,y.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},a),className:j,name:j});else{var _=a.width,B=a.height;n.shapeMap[j]=n.addShape("image",{attrs:(0,y.__assign)((0,y.__assign)({},a),{x:-_/2,y:-B/2}),className:j,name:j})}var et=n.shapeMap["node-label"]||n.find(function(ut){return ut.get("name")==="node-label"});et&&et.toFront()}}},Em=(0,y.__assign)((0,y.__assign)({},Uh),bm);Rs.registerNode("single-node",Em);var Kd="edge-shape";function wm(i){var e=i;return i==="start"?e="end":i==="end"&&(e="start"),e}var Sm={itemType:"edge",labelPosition:"center",refX:0,refY:0,labelAutoRotate:!1,options:{size:Yt.defaultEdge.size,style:{x:0,y:0,stroke:Yt.defaultEdge.style.stroke,lineAppendWidth:Yt.defaultEdge.style.lineAppendWidth},labelCfg:{style:{fill:Yt.edgeLabel.style.fill,fontSize:Yt.edgeLabel.style.fontSize,fontFamily:Yt.windowFontFamily}},stateStyles:(0,y.__assign)({},Yt.edgeStateStyles)},getPath:function(e){var t=[];return(0,h.each)(e,function(r,n){n===0?t.push(["M",r.x,r.y]):t.push(["L",r.x,r.y])}),t},getShapeStyle:function(e){var t=this.options.style,r={stroke:e.color},n=(0,h.mix)({},t,r,e.style),a=e.size||Yt.defaultEdge.size;e=this.getPathPoints(e);var o=e.startPoint,s=e.endPoint,u=this.getControlPoints(e),c=[o];u&&(c=c.concat(u)),c.push(s);var f=this.getPath(c),l=(0,h.mix)({},Yt.defaultEdge.style,{stroke:Yt.defaultEdge.color,lineWidth:a,path:f},n);return l},updateShapeStyle:function(e,t,r){var n,a=t.getContainer(),o=((n=t.getKeyShape)===null||n===void 0?void 0:n.call(t))||a.shapeMap["edge-shape"],s=e.size;e=this.getPathPoints(e);var u=e.startPoint,c=e.endPoint,f=this.getControlPoints(e),l=[u];f&&(l=l.concat(f)),l.push(c);var _=o.attr(),I=e.style||{};I.stroke===void 0&&(I.stroke=e.color);var B=e.sourceNode,j=e.targetNode,et={radius:I.radius};f||(et={source:B,target:j,offset:I.offset,radius:I.radius});var ut=this.getPath(l,et),ft={};r==="move"?ft={path:ut}:(_.endArrow&&I.endArrow===!1&&(e.style.endArrow={path:""}),_.startArrow&&I.startArrow===!1&&(e.style.startArrow={path:""}),ft=(0,y.__assign)({},e.style),ft.lineWidth===void 0&&(ft.lineWdith=((0,h.isNumber)(s)?s:s==null?void 0:s[0])||_.lineWidth),ft.path===void 0&&(ft.path=ut),ft.stroke===void 0&&(ft.stroke=_.stroke||e.color)),o&&o.attr(ft)},getLabelStyleByPosition:function(e,t,r){var n=t.position||this.labelPosition,a={},o=r==null?void 0:r.shapeMap[Kd],s;n==="start"?s=0:n==="end"?s=1:s=.5;var u=t.refX||this.refX,c=t.refY||this.refY;if(e.startPoint.x===e.endPoint.x&&e.startPoint.y===e.endPoint.y)return a.x=e.startPoint.x+u,a.y=e.startPoint.y+c,a.text=e.label,a;var f;(0,h.isNil)(t.autoRotate)?f=this.labelAutoRotate:f=t.autoRotate;var l=Do(o,s,u,c,f);return a.x=l.x,a.y=l.y,a.rotate=l.rotate,a.textAlign=this._getTextAlign(n,l.angle),a.text=e.label,a},getLabelBgStyleByPosition:function(e,t){if(!e)return{};var r=e.getBBox(),n=t.style&&t.style.background;if(!n)return{};var a=n.padding,o=r.width+a[1]+a[3],s=r.height+a[0]+a[2],u=(0,y.__assign)((0,y.__assign)({},n),{width:o,height:s,x:r.minX-a[3],y:r.minY-a[0],matrix:[1,0,0,0,1,0,0,0,1]}),c;return(0,h.isNil)(t.autoRotate)?c=this.labelAutoRotate:c=t.autoRotate,c&&(u.matrix=e.attr("matrix")||[1,0,0,0,1,0,0,0,1]),u},_getTextAlign:function(e,t){var r="center";return t?(t=t%(Math.PI*2),e!=="center"&&(t>=0&&t<=Math.PI/2||t>=3/2*Math.PI&&t<2*Math.PI?r=e:r=wm(e)),r):e},getControlPoints:function(e){return e.controlPoints},getPathPoints:function(e){return e},drawShape:function(e,t){var r=this.getShapeStyle(e),n=t.addShape("path",{className:Kd,name:Kd,attrs:r});return t.shapeMap[Kd]=n,n},drawLabel:function(e,t){var r=this.options.labelCfg,n=(0,h.deepMix)({},r,e.labelCfg),a=this.getLabelStyle(e,n,t),o=a.rotate;delete a.rotate;var s=t.addShape("text",{attrs:a,name:"text-shape",labelRelated:!0});if(t.shapeMap["text-shape"]=s,!isNaN(o)&&o!==""&&s.rotateAtStart(o),a.background){var u=this.drawLabelBg(e,t,s,a,o),c=this.itemType+Gh;u.set("classname",c),t.shapeMap[c]=u,s.toFront()}return s},drawLabelBg:function(e,t,r,n,a){var o=this.options.labelCfg,s=(0,h.deepMix)({},o,e.labelCfg),u=this.getLabelBgStyleByPosition(r,s),c=t.addShape("rect",{name:"text-bg-shape",attrs:u,labelRelated:!0});return t.shapeMap["text-bg-shape"]=c,c}},Mm=(0,y.__assign)((0,y.__assign)({},Uh),Sm);Rs.registerEdge("single-edge",Mm),Rs.registerEdge("line",{getControlPoints:function(){}},"single-edge"),Rs.registerEdge("spline",{getPath:function(e){var t=Vv(e);return t}},"single-edge"),Rs.registerEdge("arc",{curveOffset:20,clockwise:1,getControlPoints:function(e){var t=e.startPoint,r=e.endPoint,n={x:(t.x+r.x)/2,y:(t.y+r.y)/2},a,o;if(e.controlPoints!==void 0){if(o=e.controlPoints[0],a=Dn(t,o,r),t.x<=r.x&&t.y>r.y?this.clockwise=a.x>o.x?0:1:t.x<=r.x&&t.y<r.y?this.clockwise=a.x>o.x?1:0:t.x>r.x&&t.y<=r.y?this.clockwise=a.y<o.y?0:1:this.clockwise=a.y<o.y?1:0,(o.x-t.x)/(o.y-t.y)===(r.x-t.x)/(r.y-t.y))return[]}else{e.curveOffset===void 0&&(e.curveOffset=this.curveOffset),(0,h.isArray)(e.curveOffset)&&(e.curveOffset=e.curveOffset[0]),e.curveOffset<0?this.clockwise=0:this.clockwise=1;var s={x:r.x-t.x,y:r.y-t.y},u=Math.atan2(s.y,s.x);o={x:e.curveOffset*Math.cos(-Math.PI/2+u)+n.x,y:e.curveOffset*Math.sin(-Math.PI/2+u)+n.y},a=Dn(t,o,r)}var c=sa(t,a),f=[{x:c,y:c}];return f},getPath:function(e){var t=[];return t.push(["M",e[0].x,e[0].y]),e.length===2?t.push(["L",e[1].x,e[1].y]):t.push(["A",e[1].x,e[1].y,0,0,this.clockwise,e[2].x,e[2].y]),t}},"single-edge"),Rs.registerEdge("quadratic",{curvePosition:.5,curveOffset:-20,getControlPoints:function(e){var t=e.controlPoints;if(!t||!t.length){var r=e.startPoint,n=e.endPoint;e.curveOffset===void 0&&(e.curveOffset=this.curveOffset),e.curvePosition===void 0&&(e.curvePosition=this.curvePosition),(0,h.isArray)(e.curveOffset)&&(e.curveOffset=e.curveOffset[0]),(0,h.isArray)(e.curvePosition)&&(e.curvePosition=e.curveOffset[0]);var a=Vd(r,n,e.curvePosition,e.curveOffset);t=[a]}return t},getPath:function(e){var t=[];return t.push(["M",e[0].x,e[0].y]),t.push(["Q",e[1].x,e[1].y,e[2].x,e[2].y]),t}},"single-edge"),Rs.registerEdge("cubic",{curvePosition:[1/2,1/2],curveOffset:[-20,20],getControlPoints:function(e){var t=e.controlPoints;if(e.curveOffset===void 0&&(e.curveOffset=this.curveOffset),e.curvePosition===void 0&&(e.curvePosition=this.curvePosition),(0,h.isNumber)(e.curveOffset)&&(e.curveOffset=[e.curveOffset,-e.curveOffset]),(0,h.isNumber)(e.curvePosition)&&(e.curvePosition=[e.curvePosition,1-e.curvePosition]),!t||!t.length||t.length<2){var r=e.startPoint,n=e.endPoint,a=Vd(r,n,e.curvePosition[0],e.curveOffset[0]),o=Vd(r,n,e.curvePosition[1],e.curveOffset[1]);t=[a,o]}return t},getPath:function(e){var t=[];return t.push(["M",e[0].x,e[0].y]),t.push(["C",e[1].x,e[1].y,e[2].x,e[2].y,e[3].x,e[3].y]),t}},"single-edge"),Rs.registerEdge("cubic-vertical",{curvePosition:[1/2,1/2],minCurveOffset:[0,0],curveOffset:void 0,getControlPoints:function(e){var t=e.startPoint,r=e.endPoint;e.curvePosition===void 0&&(e.curvePosition=this.curvePosition),e.curveOffset===void 0&&(e.curveOffset=this.curveOffset),e.minCurveOffset===void 0&&(e.minCurveOffset=this.minCurveOffset),(0,h.isNumber)(e.curveOffset)&&(e.curveOffset=[e.curveOffset,-e.curveOffset]),(0,h.isNumber)(e.minCurveOffset)&&(e.minCurveOffset=[e.minCurveOffset,-e.minCurveOffset]),(0,h.isNumber)(e.curvePosition)&&(e.curvePosition=[e.curvePosition,1-e.curvePosition]);var n=r.y-t.y,a=[0,0];e.curveOffset?a=e.curveOffset:Math.abs(n)<Math.abs(e.minCurveOffset[0])&&(a=e.minCurveOffset);var o={x:t.x,y:t.y+n*this.curvePosition[0]+a[0]},s={x:r.x,y:r.y-n*this.curvePosition[1]+a[1]};return[o,s]}},"cubic"),Rs.registerEdge("cubic-horizontal",{curvePosition:[1/2,1/2],minCurveOffset:[0,0],curveOffset:void 0,getControlPoints:function(e){var t=e.startPoint,r=e.endPoint;e.curvePosition===void 0&&(e.curvePosition=this.curvePosition),e.curveOffset===void 0&&(e.curveOffset=this.curveOffset),e.minCurveOffset===void 0&&(e.minCurveOffset=this.minCurveOffset),(0,h.isNumber)(e.curveOffset)&&(e.curveOffset=[e.curveOffset,-e.curveOffset]),(0,h.isNumber)(e.minCurveOffset)&&(e.minCurveOffset=[e.minCurveOffset,-e.minCurveOffset]),(0,h.isNumber)(e.curvePosition)&&(e.curvePosition=[e.curvePosition,1-e.curvePosition]);var n=r.x-t.x,a=[0,0];e.curveOffset?a=e.curveOffset:Math.abs(n)<Math.abs(e.minCurveOffset[0])&&(a=e.minCurveOffset);var o={x:t.x+n*this.curvePosition[0]+a[0],y:t.y},s={x:r.x-n*this.curvePosition[1]+a[1],y:r.y},u=[o,s];return u}},"cubic"),Rs.registerEdge("loop",{getPathPoints:function(e){return ki(e)},getControlPoints:function(e){return e.controlPoints},afterDraw:function(e){e.controlPoints=void 0},afterUpdate:function(e){e.controlPoints=void 0}},"cubic");var _m={itemType:"combo",shapeType:"single-combo",labelPosition:"top",refX:Yt.comboLabel.refX,refY:Yt.comboLabel.refY,options:{style:{stroke:Yt.defaultCombo.style.stroke,fill:Yt.defaultCombo.style.fill,lineWidth:Yt.defaultCombo.style.lineWidth},labelCfg:{style:{fill:Yt.comboLabel.style.fill,fontSize:Yt.comboLabel.style.fontSize,fontFamily:Yt.windowFontFamily}},stateStyles:(0,y.__assign)({},Yt.comboStateStyles),collapsedSubstituteIcon:{show:!1,img:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*RsnHRqLfJn4AAAAAAAAAAAAAARQnAQ"}},getSize:function(e){var t=(0,h.clone)(e.size||this.options.size||Yt.defaultCombo.size);return(0,h.isArray)(t)&&t.length===1&&(t=[t[0],t[0]]),(0,h.isArray)(t)||(t=[t,t]),t},getLabelStyleByPosition:function(e,t){var r=t.position||this.labelPosition,n=e.style,a=e.padding||this.options.padding;(0,h.isArray)(a)&&(a=Math.max.apply(Math,a));var o=t.refX,s=t.refY;(0,h.isNil)(o)&&(o=this.refX),(0,h.isNil)(s)&&(s=this.refY);var u=this.getSize(e),c=Math.max(n.r,u[0]/2)||u[0]/2,f=c+a,l;switch(r){case"top":l={x:0,y:-f-s,textBaseline:"bottom",textAlign:"center"};break;case"bottom":l={x:0,y:f+s,textBaseline:"bottom",textAlign:"center"};break;case"left":l={x:-f+o,y:0,textAlign:"left"};break;case"center":l={x:0,y:0,text:e.label,textAlign:"center"};break;default:l={x:f+o,y:0,textAlign:"right"};break}return l.text=e.label,l},drawShape:function(e,t){var r=this.shapeType,n=this.getShapeStyle(e),a=t.addShape(r,{attrs:n,draggable:!0,name:"combo-shape"});return a},updateCollapsedIcon:function(e,t,r){var n=e.collapsed,a=e.collapsedSubstituteIcon,o=a===void 0?{}:a,s=Object.assign({},this.options.collapsedSubstituteIcon,o),u=s.show,c=s.img,f=s.width,l=s.height,_=t.getContainer(),I=_.find(function(ut){return ut.get("name")==="combo-collapsed-substitute-icon"}),B=I&&!I.destroyed,j=t.get("keyShape");if(n&&u){if(B)I.show();else{var et={width:f||r.r*2||r.width,height:l||r.r*2||r.height};I=_.addShape("image",{attrs:(0,y.__assign)({img:c,x:-et.width/2,y:-et.height/2},et),name:"combo-collapsed-substitute-icon",draggable:!0})}j.hide()}else B&&(I.hide(),j.show())},updateShape:function(e,t,r){var n=this,a=t.get("keyShape"),o=t.get("animate"),s=o&&(e.animate===void 0?this.options.animate:e.animate);s&&a.animate?(e.collapsed||this.updateCollapsedIcon(e,t,r),a.animate(r,{duration:200,easing:"easeLinear",callback:function(){e.collapsed&&n.updateCollapsedIcon(e,t,r)}})):(a.attr((0,y.__assign)({},r)),this.updateCollapsedIcon(e,t,r)),this.updateLabel(e,t)}},Cm=(0,y.__assign)((0,y.__assign)({},Uh),_m);Rs.registerCombo("single-combo",Cm),Rs.registerCombo("circle",{options:{size:[Yt.defaultCombo.size[0],Yt.defaultCombo.size[0]],padding:Math.max.apply(Math,Yt.defaultCombo.padding),animate:!0,style:{stroke:Yt.defaultCombo.style.stroke,fill:Yt.defaultCombo.style.fill,lineWidth:Yt.defaultCombo.style.lineWidth},labelCfg:{style:{fill:Yt.comboLabel.style.fill,fontSize:Yt.comboLabel.style.fontSize},refX:0,refY:0},stateStyles:(0,y.__assign)({},Yt.comboStateStyles),collapsedSubstituteIcon:{show:!1,img:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*RsnHRqLfJn4AAAAAAAAAAAAAARQnAQ"}},shapeType:"circle",labelPosition:"top",drawShape:function(e,t){var r=this.getShapeStyle(e);delete r.height,delete r.width;var n=t.addShape("circle",{attrs:r,className:"circle-combo",name:"circle-combo",draggable:!0});return n},getShapeStyle:function(e){var t=this.options.style,r=e.padding||this.options.padding;(0,h.isArray)(r)&&(r=Math.max.apply(Math,r));var n={stroke:e.color},a=(0,h.mix)({},t,n,e.style),o=e.collapsed&&e.fixCollapseSize?e.fixCollapseSize:e.fixSize,s;if(o)s=(0,h.isNumber)(o)?o/2:o[0]/2;else{var u=this.getSize(e);!(0,h.isNumber)(a.r)||isNaN(a.r)?s=u[0]/2||Yt.defaultCombo.style.r:s=Math.max(a.r,u[0]/2)||u[0]/2}a.r=s+r;var c=(0,y.__assign)({x:0,y:0},a);return e.style?e.style.r=s:e.style={r:s},c},update:function(e,t){var r=this.getSize(e),n=e.padding||this.options.padding;(0,h.isArray)(n)&&(n=Math.max.apply(Math,n));var a=(0,h.clone)(e.style),o=e.collapsed&&e.fixCollapseSize?e.fixCollapseSize:e.fixSize,s;o?s=(0,h.isNumber)(o)?o/2:o[0]/2:s=Math.max(a.r,r[0]/2)||r[0]/2,a.r=s+n;var u=t.get("sizeCache");u&&(u.r=a.r);var c={stroke:e.color},f=t.get("keyShape"),l=(0,h.mix)({},f.attr(),c,a);e.style?e.style.r=s:e.style={r:s},this.updateShape(e,t,l,!0)}},"single-combo"),Rs.registerCombo("rect",{options:{size:[40,5],padding:[25,20,15,20],animate:!0,style:{radius:0,stroke:Yt.defaultCombo.style.stroke,fill:Yt.defaultCombo.style.fill,lineWidth:Yt.defaultCombo.style.lineWidth},labelCfg:{style:{fill:Yt.comboLabel.style.fill,fontSize:Yt.comboLabel.style.fontSize,fontFamily:Yt.windowFontFamily}},anchorPoints:[[0,.5],[1,.5]],stateStyles:(0,y.__assign)({},Yt.comboStateStyles),collapsedSubstituteIcon:{show:!1,img:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*RsnHRqLfJn4AAAAAAAAAAAAAARQnAQ"}},shapeType:"rect",labelPosition:"top",drawShape:function(e,t){var r=this.getShapeStyle(e),n=t.addShape("rect",{attrs:r,className:"rect-combo",name:"rect-combo",draggable:!0});return n},getLabelStyleByPosition:function(e,t){var r=t.position||this.labelPosition,n=e.style,a=e.padding||this.options.padding;(0,h.isNumber)(a)&&(a=[a,a,a,a]);var o=t.refX,s=t.refY;(0,h.isNil)(o)&&(o=this.refX),(0,h.isNil)(s)&&(s=this.refY);var u=-n.width/2-a[3],c=n.width/2+a[1],f=-n.height/2-a[0],l=n.height/2+a[2],_;switch(r){case"top":_={x:u+o,y:f+s,textBaseline:"top",textAlign:"left"};break;case"bottom":_={x:0,y:l+s,textBaseline:"top",textAlign:"center"};break;case"left":_={x:u+s,y:0,textAlign:"left"};break;case"center":_={x:0,y:0,text:e.label,textAlign:"center"};break;case"top-center":_={x:0,y:f+s,textBaseline:"top",textAlign:"center"};break;default:_={x:c+o,y:0,textAlign:"right"};break}return _.text=e.label,_},getShapeStyle:function(e){var t=this.options.style,r=e.padding||this.options.padding;(0,h.isNumber)(r)&&(r=[r,r,r,r]);var n={stroke:e.color},a=(0,h.mix)({},t,n,e.style),o=this.getSize(e),s,u,c=e.collapsed&&e.fixCollapseSize?e.fixCollapseSize:e.fixSize;c?(0,h.isNumber)(c)?(s=c,u=c):(s=c[0],u=c[1]):(!(0,h.isNumber)(a.width)||isNaN(a.width)?s=o[0]||Yt.defaultCombo.style.width:s=Math.max(a.width,o[0])||o[0],!(0,h.isNumber)(a.height)||isNaN(a.height)?u=o[1]||Yt.defaultCombo.style.height:u=Math.max(a.height,o[1])||o[1]);var f=-s/2-r[3],l=-u/2-r[0];a.width=s+r[1]+r[3],a.height=u+r[0]+r[2];var _=(0,y.__assign)({x:f,y:l},a);return e.style?(e.style.width=s,e.style.height=u):e.style={width:s,height:u},_},update:function(e,t){var r=this.getSize(e),n=e.padding||this.options.padding;(0,h.isNumber)(n)&&(n=[n,n,n,n]);var a=(0,h.clone)(e.style),o,s,u=e.collapsed&&e.fixCollapseSize?e.fixCollapseSize:e.fixSize;u?(0,h.isNumber)(u)?(o=u,s=u):(o=u[0],s=u[1]):(o=Math.max(a.width,r[0])||r[0],s=Math.max(a.height,r[1])||r[1]),a.width=o+n[1]+n[3],a.height=s+n[0]+n[2];var c=t.get("sizeCache");c&&(c.width=a.width,c.height=a.height),a.x=-o/2-n[3],a.y=-s/2-n[0];var f={stroke:e.color},l=t.get("keyShape"),_=(0,h.mix)({},l.attr(),f,a);e.style?(e.style.width=o,e.style.height=s):e.style={width:o,height:s},this.updateShape(e,t,_,!1)}},"single-combo"),Rs.registerNode("simple-circle",{options:{size:Yt.defaultNode.size,style:{x:0,y:0,stroke:Yt.defaultNode.style.stroke,fill:Yt.defaultNode.style.fill,lineWidth:Yt.defaultNode.style.lineWidth},labelCfg:{style:{fill:Yt.nodeLabel.style.fill,fontSize:Yt.nodeLabel.style.fontSize,fontFamily:Yt.windowFontFamily}},stateStyles:(0,y.__assign)({},Yt.nodeStateStyles)},shapeType:"simple-circle",labelPosition:"center",shapeMap:{},drawShape:function(e,t){var r=this.getShapeStyle(e),n="".concat(this.type,"-keyShape"),a=t.addShape("circle",{attrs:r,className:"".concat(this.type,"-keyShape"),name:n,draggable:!0});return t.shapeMap[n]=a,a},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,r={stroke:e.color},n=(0,h.deepMix)({},t,r),a=this.getSize(e),o=a[0]/2,s=(0,y.__assign)({x:0,y:0,r:o},n);return s},update:function(e,t,r){var n=this.getSize(e),a={stroke:e.color,r:n[0]/2},o=t.get("keyShape"),s=(0,h.deepMix)({},o.attr(),a,e.style);this.updateShape(e,t,s,!0,r)}},"single-node"),Rs.registerNode("simple-rect",{options:{size:[100,30],style:{radius:0,stroke:Yt.defaultNode.style.stroke,fill:Yt.defaultNode.style.fill,lineWidth:Yt.defaultNode.style.lineWidth},labelCfg:{style:{fill:Yt.nodeLabel.style.fill,fontSize:Yt.nodeLabel.style.fontSize,fontFamily:Yt.windowFontFamily}},anchorPoints:[[0,.5],[1,.5]],stateStyles:(0,y.__assign)({},Yt.nodeStateStyles)},shapeType:"simple-rect",labelPosition:"center",drawShape:function(e,t){var r=this.getShapeStyle(e),n=t.addShape("rect",{attrs:r,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});return n},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,r={stroke:e.color},n=(0,h.mix)({},t,r),a=this.getSize(e),o=n.width||a[0],s=n.height||a[1],u=(0,y.__assign)({x:-o/2,y:-s/2,width:o,height:s},n);return u},update:function(e,t,r){var n=t.getContainer(),a=(this.mergeStyle||this.getOptions(e)).style,o=this.getSize(e),s=t.get("keyShape");e.size||(o[0]=s.attr("width")||a.width,o[1]=s.attr("height")||a.height);var u={stroke:e.color,x:-o[0]/2,y:-o[1]/2,width:o[0],height:o[1]},c=(0,h.mix)({},a,s.attr(),u);c=(0,h.mix)(c,e.style),this.updateShape(e,t,c,!1,r)}},"single-node"),Rs.registerNode("image",{options:{img:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*eD7nT6tmYgAAAAAAAAAAAABkARQnAQ",size:200,labelCfg:{style:{fontFamily:Yt.windowFontFamily}},clipCfg:{show:!1,type:"circle",r:50,rx:50,ry:35,width:50,height:35,points:[[30,12],[12,30],[30,48],[48,30]],path:[["M",25,25],["L",50,25],["A",12.5,12.5,0,1,1,50,50],["A",12.5,12.5,0,1,0,50,50],["L",25,75],["Z"]],x:0,y:0}},shapeType:"image",labelPosition:"bottom",drawShape:function(e,t){var r=this.shapeType,n=this.getShapeStyle(e);delete n.fill;var a=t.addShape(r,{attrs:n,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});return this.drawClip(e,a),a},drawClip:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).clipCfg;if(r.show){var n=r.type,a=r.x,o=r.y,s=r.style;if(n==="circle"){var u=r.r;t.setClip({type:"circle",attrs:(0,y.__assign)({r:u,x:a,y:o},s)})}else if(n==="rect"){var c=r.width,f=r.height,l=a-c/2,_=o-f/2;t.setClip({type:"rect",attrs:(0,y.__assign)({x:l,y:_,width:c,height:f},s)})}else if(n==="ellipse"){var I=r.rx,B=r.ry;t.setClip({type:"ellipse",attrs:(0,y.__assign)({x:a,y:o,rx:I,ry:B},s)})}else if(n==="polygon"){var j=r.points;t.setClip({type:"polygon",attrs:(0,y.__assign)({points:j},s)})}else if(n==="path"){var et=r.path;t.setClip({type:"path",attrs:(0,y.__assign)({path:et},s)})}}},getShapeStyle:function(e){var t=this.mergeStyle||this.getOptions(e),r=t.style,n=t.img,a=this.getSize(e),o=a[0],s=a[1];r&&(o=r.width||a[0],s=r.height||a[1]);var u=(0,y.__assign)({x:-o/2,y:-s/2,width:o,height:s,img:n},r);return u},updateShapeStyle:function(e,t){var r=t.getContainer(),n="".concat(this.itemType,"-shape"),a=r.shapeMap[n]||r.find(function(s){return s.get("className")===n})||t.getKeyShape(),o=this.getShapeStyle(e);a&&!a.destroyed&&a.attr(o)}},"single-node");var ip={triangle:function(e,t,r){e===void 0&&(e=10),t===void 0&&(t=15),r===void 0&&(r=0);var n=r*2,a="M ".concat(n,",0 L ").concat(n+t,",-").concat(e/2," L ").concat(n+t,",").concat(e/2," Z");return a},vee:function(e,t,r){e===void 0&&(e=15),t===void 0&&(t=20),r===void 0&&(r=0);var n=r*2,a="M ".concat(n,",0 L ").concat(n+t,",-").concat(e/2,`
        L `).concat(n+2*t/3,",0 L ").concat(n+t,",").concat(e/2," Z");return a},circle:function(e,t){e===void 0&&(e=5),t===void 0&&(t=0);var r=t*2,n="M ".concat(r,`, 0
            a `).concat(e,",").concat(e," 0 1,0 ").concat(e*2,`,0
            a `).concat(e,",").concat(e," 0 1,0 ").concat(-e*2,",0");return n},rect:function(e,t,r){e===void 0&&(e=10),t===void 0&&(t=10),r===void 0&&(r=0);var n=r*2,a="M ".concat(n,",").concat(-e/2,` 
        L `).concat(n+t,",").concat(-e/2,` 
        L `).concat(n+t,",").concat(e/2,` 
        L `).concat(n,",").concat(e/2," Z");return a},diamond:function(e,t,r){e===void 0&&(e=15),t===void 0&&(t=15),r===void 0&&(r=0);var n=r*2,a="M ".concat(n,`,0 
        L `).concat(n+t/2,",").concat(-e/2,` 
        L `).concat(n+t,`,0 
        L `).concat(n+t/2,",").concat(e/2," Z");return a},triangleRect:function(e,t,r,n,a,o){e===void 0&&(e=15),t===void 0&&(t=15),r===void 0&&(r=15),n===void 0&&(n=3),a===void 0&&(a=5),o===void 0&&(o=0);var s=o*2,u=s+t+a,c="M ".concat(s,",0 L ").concat(s+t,",-").concat(e/2," L ").concat(s+t,",").concat(e/2,` Z
            M `).concat(u,", -").concat(r/2,`
            L `).concat(u+n," -").concat(r/2,`
            L `).concat(u+n," ").concat(r/2,`
            L `).concat(u," ").concat(r/2,`
            Z`);return c}},op={collapse:function(e,t,r){return[["M",e-r,t],["a",r,r,0,1,0,r*2,0],["a",r,r,0,1,0,-r*2,0],["M",e-r+4,t],["L",e+r-4,t]]},expand:function(e,t,r){return[["M",e-r,t],["a",r,r,0,1,0,r*2,0],["a",r,r,0,1,0,-r*2,0],["M",e-r+4,t],["L",e-r+2*r-4,t],["M",e-r+r,t-r+4],["L",e,t+r-4]]},upTriangle:function(e,t,r){var n=r*Math.cos(Math.PI/6),a=r*Math.sin(Math.PI/6);return[["M",e-n,t+a],["L",e+n,t+a],["L",e,t-r],["Z"]]},downTriangle:function(e,t,r){var n=r*Math.cos(Math.PI/6),a=r*Math.sin(Math.PI/6);return[["M",e-n,t-a],["L",e+n,t-a],["L",e,t+r],["Z"]]}},qf=Rs,Tm=["#5F95FF","#61DDAA","#65789B","#F6BD16","#7262FD","#78D3F8","#9661BC","#F6903D","#008685","#F08BB4"],sp=function(e){return e==="force"||e==="g6force"||e==="gForce"||e==="force2"},Am=pt,Im=(0,y.__assign)((0,y.__assign)((0,y.__assign)((0,y.__assign)((0,y.__assign)((0,y.__assign)((0,y.__assign)({},P),w),p),k),m),S),{transform:Am,mat3:tt}),Xs=Im,Om=function(){function i(e){this.graph=e,this.layoutCfg=e.get("layout")||{},this.layoutType=this.getLayoutType(),this.layoutMethods=[],this.initLayout()}return i.prototype.initLayout=function(){},i.prototype.getLayoutType=function(){return this.getLayoutCfgType(this.layoutCfg)},i.prototype.getLayoutCfgType=function(e){var t=e.type;if(t)return t;var r=e.pipes;return Array.isArray(r)?r.map(function(n){return(n==null?void 0:n.type)||""}):null},i.prototype.isLayoutTypeSame=function(e){var t=this.getLayoutCfgType(e),r=Array.isArray(this.layoutType),n=Array.isArray(t);return r&&n?this.layoutType.every(function(a,o){return a===t[o]}):Array.isArray(t)||Array.isArray(this.layoutType)?!1:(e==null?void 0:e.type)===this.layoutType},i.prototype.refreshLayout=function(){var e=this,t=e.graph,r=e.layoutType,n=e.layoutCfg,a=n===void 0?{}:n;if(t){var o=a.animate,s=o===void 0&&(r==="force"||r==="force2"),u=sp(r)&&(o||s);t.get("animate")&&!u?t.positionsAnimate(r==="comboCombined"):t.refreshPositions(r==="comboCombined")}},i.prototype.changeLayout=function(e){var t=e.disableTriggerLayout,r=(0,y.__rest)(e,["disableTriggerLayout"]);this.layoutCfg=r,this.layoutType=r.type||this.layoutType,!t&&this.layout()},i.prototype.changeData=function(e){this.layout(e)},i.prototype.destoryLayoutMethods=function(){var e=this.layoutMethods,t=[];return e==null||e.forEach(function(r){var n,a=(n=r.getType)===null||n===void 0?void 0:n.call(r);a&&t.push(a),r.destroy()}),this.layoutMethods=[],t},i.prototype.destroyLayout=function(){this.destoryLayoutMethods();var e=this.graph;e&&!e.get("destroyed")&&e.set("layout",void 0),this.layoutCfg=void 0,this.layoutType=void 0,this.layoutMethods=void 0},i.prototype.setDataFromGraph=function(){for(var e,t=[],r=[],n=[],a=[],o=[],s=[],u=[],c=this.graph.getNodes(),f=this.graph.getEdges(),l=this.graph.getCombos(),_=c.length,I=0;I<_;I++){var B=c[I];if(!(!B||B.destroyed)){var j=B.getModel();if(!B.isVisible()){r.push(j);continue}t.push(j)}}for(var et=f.length,I=0;I<et;I++){var ut=f[I];if(!(!ut||ut.destroyed)){var j=ut.getModel();if(!ut.isVisible()){a.push(j);continue}j.isComboEdge?o.push(j):n.push(j)}}for(var ft=l.length,I=0;I<ft;I++){var gt=l[I];if(!gt.destroyed){var j=gt.getModel();if(!gt.isVisible()){u.push(j);continue}s.push(j)}}return{nodes:t,hiddenNodes:r,edges:n,hiddenEdges:a,combos:s,hiddenCombos:u,comboEdges:o,vedges:(e=this.graph.get("vedges"))===null||e===void 0?void 0:e.map(function(Mt){return Mt.getModel()})}},i.prototype.relayout=function(e){var t=this,r=this,n=r.graph,a=r.layoutMethods,o=r.layoutCfg;if(!(!n||n.get("destroyed"))){var s=Promise.resolve();if(e){this.data=this.setDataFromGraph();var u=this.data.nodes;if(!u)return!1;s=this.initPositions(o.center,u)}n.emit("beforelayout"),a==null||a.forEach(function(c,f){var l=o[f]||o;s=s.then(function(){var _,I=t.execLayoutMethod(l,f);return f===a.length-1&&((_=o.onAllLayoutEnd)===null||_===void 0||_.call(o)),I})})}},i.prototype.filterLayoutData=function(e,t){var r=e.nodes,n=e.edges,a=(0,y.__rest)(e,["nodes","edges"]);if(!r)return e;var o,s;(0,h.isFunction)(t==null?void 0:t.nodesFilter)?o=t.nodesFilter:o=function(){return!0};var u=r.filter(o);if((0,h.isFunction)(t==null?void 0:t.edgesFilter))s=t.edgesFilter;else{var c=u.reduce(function(f,l){return f[l.id]=!0,f},{});s=function(l){return c[l.source]&&c[l.target]}}return(0,y.__assign)({nodes:u,edges:n.filter(s)},a)},i.prototype.getLayoutBBox=function(e){var t=this.graph,r=(0,h.groupBy)(t.getNodes(),function(o){return o.getModel().layoutOrder}),n=Object.values(r).map(function(o){var s=Iv(o);return s.size=[s.width,s.height],s}),a=Object.values((0,h.groupBy)(e,"layoutOrder"));return{groupNodes:a,layoutNodes:n}},i.prototype.layoutAnimate=function(){},i.prototype.moveToZero=function(){var e=this.graph,t=e.get("data"),r=t.nodes;if(!(r[0].x===void 0||r[0].x===null||Cc(r[0].x))){for(var n=[0,0],a=r.length,o=0;o<a;o++){var s=r[o];n[0]+=s.x,n[1]+=s.y}n[0]/=r.length,n[1]/=r.length;for(var o=0;o<a;o++){var s=r[o];s.x-=n[0],s.y-=n[1]}}},i.prototype.initPositions=function(e,t){var r;return(0,y.__awaiter)(this,void 0,void 0,function(){var n,a,o;return(0,y.__generator)(this,function(s){return n=this.graph,t!=null&&t.length?(a=t.filter(function(u){return Cc(u.x)||Cc(u.y)}),o=a?a.length:0,o?[2,(r=this.initWithPreset)===null||r===void 0?void 0:r.call(this,function(){},function(){var u=n.get("width")*.85,c=n.get("height")*.85,f=Math.ceil(Math.sqrt(o)*(u/c)),l=Math.ceil(o/f),_=u/(f-1),I=c/(l-1);(!isFinite(_)||!_)&&(_=0),(!isFinite(I)||!_)&&(I=0);for(var B=e[0]-u/2,j=e[1]-c/2,et=!0,ut=0;ut<o;ut++){var ft=a[ut];Cc(+ft.x)&&(et=!1,ft.x=ut%f*_+B),Cc(+ft.y)&&(et=!1,ft.y=Math.floor(ut/f)*I+j)}})]:[2]):[2,Promise.resolve()]})})},i.prototype.destroy=function(){this.graph=null,this.destoryLayoutMethods(),this.destroyed=!0},i}(),up=Om,Dm=function(){function i(e){this.graph=e,this.destroyed=!1,this.initEvents()}return i}(),cp=Dm,cf=qf.registerNode,fp=qf.registerEdge,Lm=qf.registerCombo,lp=W.registerBehavior,Qn=Yt,PS={version:Yt.version,AbstractGraph:rp,BaseGlobal:Qn,Util:Xs,Shape:qf,Node:Nh,Edge:Fv,Combo:Yv,Hull:ep,registerNode:qf.registerNode,registerEdge:qf.registerEdge,registerCombo:qf.registerCombo,registerBehavior:W.registerBehavior,Arrow:ip,Marker:op,AbstractLayout:up,AbstractEvent:cp},Pm=C(810369);function Nm(){return window?window.devicePixelRatio:1}function dp(i,e,t,r){var n=i-t,a=e-r;return Math.sqrt(n*n+a*a)}function Sl(i,e,t,r,n,a){return n>=i&&n<=i+t&&a>=e&&a<=e+r}function wd(i,e){return!(e.minX>i.maxX||e.maxX<i.minX||e.minY>i.maxY||e.maxY<i.minY)}function Rm(i,e){return!i||!e?i||e:{minX:Math.min(i.minX,e.minX),minY:Math.min(i.minY,e.minY),maxX:Math.max(i.maxX,e.maxX),maxY:Math.max(i.maxY,e.maxY)}}function hp(i,e){return i[0]===e[0]&&i[1]===e[1]}var km=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,Bm=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,Fm=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,vp=/[\d.]+:(#[^\s]+|[^\)]+\))/gi;function pp(i,e){var t=i.match(vp);(0,h.each)(t,function(r){var n=r.split(":");e.addColorStop(n[0],n[1])})}function zm(i,e,t){var r=km.exec(t),n=parseFloat(r[1])%360*(Math.PI/180),a=r[2],o=e.getBBox(),s,u;n>=0&&n<1/2*Math.PI?(s={x:o.minX,y:o.minY},u={x:o.maxX,y:o.maxY}):1/2*Math.PI<=n&&n<Math.PI?(s={x:o.maxX,y:o.minY},u={x:o.minX,y:o.maxY}):Math.PI<=n&&n<3/2*Math.PI?(s={x:o.maxX,y:o.maxY},u={x:o.minX,y:o.minY}):(s={x:o.minX,y:o.maxY},u={x:o.maxX,y:o.minY});var c=Math.tan(n),f=c*c,l=(u.x-s.x+c*(u.y-s.y))/(f+1)+s.x,_=c*(u.x-s.x+c*(u.y-s.y))/(f+1)+s.y,I=i.createLinearGradient(s.x,s.y,l,_);return pp(a,I),I}function Gm(i,e,t){var r=Bm.exec(t),n=parseFloat(r[1]),a=parseFloat(r[2]),o=parseFloat(r[3]),s=r[4];if(o===0){var u=s.match(vp);return u[u.length-1].split(":")[1]}var c=e.getBBox(),f=c.maxX-c.minX,l=c.maxY-c.minY,_=Math.sqrt(f*f+l*l)/2,I=i.createRadialGradient(c.minX+f*n,c.minY+l*a,0,c.minX+f/2,c.minY+l/2,o*_);return pp(s,I),I}function Um(i,e,t){if(e.get("patternSource")&&e.get("patternSource")===t)return e.get("pattern");var r,n,a=Fm.exec(t),o=a[1],s=a[2];function u(){r=i.createPattern(n,o),e.set("pattern",r),e.set("patternSource",t)}switch(o){case"a":o="repeat";break;case"x":o="repeat-x";break;case"y":o="repeat-y";break;case"n":o="no-repeat";break;default:o="no-repeat"}return n=new Image,s.match(/^data:/i)||(n.crossOrigin="Anonymous"),n.src=s,n.complete?u():(n.onload=u,n.src=n.src),r}function Wm(i,e,t){var r=e.getBBox();if(isNaN(r.x)||isNaN(r.y)||isNaN(r.width)||isNaN(r.height))return t;if((0,h.isString)(t)){if(t[1]==="("||t[2]==="("){if(t[0]==="l")return zm(i,e,t);if(t[0]==="r")return Gm(i,e,t);if(t[0]==="p")return Um(i,e,t)}return t}if(t instanceof CanvasPattern)return t}function Ym(i){var e=0,t=0,r=0,n=0;return(0,h.isArray)(i)?i.length===1?e=t=r=n=i[0]:i.length===2?(e=r=i[0],t=n=i[1]):i.length===3?(e=i[0],t=n=i[1],r=i[2]):(e=i[0],t=i[1],r=i[2],n=i[3]):e=t=r=n=i,[e,t,r,n]}function $d(i){return Math.sqrt(i[0]*i[0]+i[1]*i[1])}function Wh(i,e){return $d(i)*$d(e)?(i[0]*e[0]+i[1]*e[1])/($d(i)*$d(e)):1}function gp(i,e){return(i[0]*e[1]<i[1]*e[0]?-1:1)*Math.acos(Wh(i,e))}function mp(i,e){var t=e[1],r=e[2],n=(0,h.mod)((0,h.toRadian)(e[3]),Math.PI*2),a=e[4],o=e[5],s=i[0],u=i[1],c=e[6],f=e[7],l=Math.cos(n)*(s-c)/2+Math.sin(n)*(u-f)/2,_=-1*Math.sin(n)*(s-c)/2+Math.cos(n)*(u-f)/2,I=l*l/(t*t)+_*_/(r*r);I>1&&(t*=Math.sqrt(I),r*=Math.sqrt(I));var B=t*t*(_*_)+r*r*(l*l),j=B?Math.sqrt((t*t*(r*r)-B)/B):1;a===o&&(j*=-1),isNaN(j)&&(j=0);var et=r?j*t*_/r:0,ut=t?j*-r*l/t:0,ft=(s+c)/2+Math.cos(n)*et-Math.sin(n)*ut,gt=(u+f)/2+Math.sin(n)*et+Math.cos(n)*ut,Mt=[(l-et)/t,(_-ut)/r],Ht=[(-1*l-et)/t,(-1*_-ut)/r],se=gp([1,0],Mt),oe=gp(Mt,Ht);return Wh(Mt,Ht)<=-1&&(oe=Math.PI),Wh(Mt,Ht)>=1&&(oe=0),o===0&&oe>0&&(oe=oe-2*Math.PI),o===1&&oe<0&&(oe=oe+2*Math.PI),{cx:ft,cy:gt,rx:hp(i,[c,f])?0:t,ry:hp(i,[c,f])?0:r,startAngle:se,endAngle:se+oe,xRotation:n,arcFlag:a,sweepFlag:o}}var qd=Math.sin,Qd=Math.cos,Yh=Math.atan2,Jd=Math.PI;function yp(i,e,t,r,n,a,o){var s=e.stroke,u=e.lineWidth,c=t-n,f=r-a,l=Yh(f,c),_=new $h({type:"path",canvas:i.get("canvas"),isArrowShape:!0,attrs:{path:"M"+10*Qd(Jd/6)+","+10*qd(Jd/6)+" L0,0 L"+10*Qd(Jd/6)+",-"+10*qd(Jd/6),stroke:s,lineWidth:u}});_.translate(n,a),_.rotateAtPoint(n,a,l),i.set(o?"startArrowShape":"endArrowShape",_)}function xp(i,e,t,r,n,a,o){var s=e.startArrow,u=e.endArrow,c=e.stroke,f=e.lineWidth,l=o?s:u,_=l.d,I=l.fill,B=l.stroke,j=l.lineWidth,et=(0,y.__rest)(l,["d","fill","stroke","lineWidth"]),ut=t-n,ft=r-a,gt=Yh(ft,ut);_&&(n=n-Qd(gt)*_,a=a-qd(gt)*_);var Mt=new $h({type:"path",canvas:i.get("canvas"),isArrowShape:!0,attrs:(0,y.__assign)((0,y.__assign)({},et),{stroke:B||c,lineWidth:j||f,fill:I})});Mt.translate(n,a),Mt.rotateAtPoint(n,a,gt),i.set(o?"startArrowShape":"endArrowShape",Mt)}function Ml(i,e,t,r,n){var a=Yh(r-e,t-i);return{dx:Qd(a)*n,dy:qd(a)*n}}function Xh(i,e,t,r,n,a){typeof e.startArrow=="object"?xp(i,e,t,r,n,a,!0):e.startArrow?yp(i,e,t,r,n,a,!0):i.set("startArrowShape",null)}function jh(i,e,t,r,n,a){typeof e.endArrow=="object"?xp(i,e,t,r,n,a,!1):e.endArrow?yp(i,e,t,r,n,a,!1):i.set("startArrowShape",null)}var bp={fill:"fillStyle",stroke:"strokeStyle",opacity:"globalAlpha"};function od(i,e){var t=e.attr();for(var r in t){var n=t[r],a=bp[r]?bp[r]:r;a==="matrix"&&n?i.transform(n[0],n[1],n[3],n[4],n[6],n[7]):a==="lineDash"&&i.setLineDash?(0,h.isArray)(n)&&i.setLineDash(n):(a==="strokeStyle"||a==="fillStyle"?n=Wm(i,e,n):a==="globalAlpha"&&(n=n*i.globalAlpha),i[a]=n)}}function Vh(i,e,t){for(var r=0;r<e.length;r++){var n=e[r];n.cfg.visible?n.draw(i,t):n.skipDraw()}}function Xm(i,e,t){var r=i.get("refreshElements");(0,h.each)(r,function(n){if(n!==i)for(var a=n.cfg.parent;a&&a!==i&&!a.cfg.refresh;)a.cfg.refresh=!0,a=a.cfg.parent}),r[0]===i?Zh(e,t):Hh(e,t)}function Hh(i,e){for(var t=0;t<i.length;t++){var r=i[t];if(r.cfg.visible)if(r.cfg.hasChanged)r.cfg.refresh=!0,r.isGroup()&&Zh(r.cfg.children,e);else if(r.cfg.refresh)r.isGroup()&&Hh(r.cfg.children,e);else{var n=jm(r,e);r.cfg.refresh=n,n&&r.isGroup()&&Hh(r.cfg.children,e)}}}function Ep(i){for(var e=0;e<i.length;e++){var t=i[e];t.cfg.hasChanged=!1,t.isGroup()&&!t.destroyed&&Ep(t.cfg.children)}}function Zh(i,e){for(var t=0;t<i.length;t++){var r=i[t];r.cfg.visible&&(r.cfg.refresh=!0,r.isGroup()&&Zh(r.get("children"),e))}}function jm(i,e){var t=i.cfg.cacheCanvasBBox,r=i.cfg.isInView&&t&&wd(t,e);return r}function wp(i,e,t,r){var n=t.path,a=t.startArrow,o=t.endArrow;if(n){var s=[0,0],u=[0,0],c={dx:0,dy:0};e.beginPath();for(var f=0;f<n.length;f++){var l=n[f],_=l[0];if(f===0&&a&&a.d){var I=i.getStartTangent();c=Ml(I[0][0],I[0][1],I[1][0],I[1][1],a.d)}else if(f===n.length-2&&n[f+1][0]==="Z"&&o&&o.d){var B=n[f+1];if(B[0]==="Z"){var I=i.getEndTangent();c=Ml(I[0][0],I[0][1],I[1][0],I[1][1],o.d)}}else if(f===n.length-1&&o&&o.d&&n[0]!=="Z"){var I=i.getEndTangent();c=Ml(I[0][0],I[0][1],I[1][0],I[1][1],o.d)}var j=c.dx,et=c.dy;switch(_){case"M":e.moveTo(l[1]-j,l[2]-et),u=[l[1],l[2]];break;case"L":e.lineTo(l[1]-j,l[2]-et);break;case"Q":e.quadraticCurveTo(l[1],l[2],l[3]-j,l[4]-et);break;case"C":e.bezierCurveTo(l[1],l[2],l[3],l[4],l[5]-j,l[6]-et);break;case"A":{var ut=void 0;r?(ut=r[f],ut||(ut=mp(s,l),r[f]=ut)):ut=mp(s,l);var ft=ut.cx,gt=ut.cy,Mt=ut.rx,Ht=ut.ry,se=ut.startAngle,oe=ut.endAngle,_e=ut.xRotation,Ue=ut.sweepFlag;if(e.ellipse)e.ellipse(ft,gt,Mt,Ht,_e,se,oe,1-Ue);else{var Ne=Mt>Ht?Mt:Ht,Qe=Mt>Ht?1:Mt/Ht,dr=Mt>Ht?Ht/Mt:1;e.translate(ft,gt),e.rotate(_e),e.scale(Qe,dr),e.arc(0,0,Ne,se,oe,1-Ue),e.scale(1/Qe,1/dr),e.rotate(-_e),e.translate(-ft,-gt)}break}case"Z":e.closePath();break;default:break}if(_==="Z")s=u;else{var nn=l.length;s=[l[nn-2],l[nn-1]]}}}}function Sp(i,e){var t=i.get("canvas");t&&(e==="remove"&&(i._cacheCanvasBBox=i.get("cacheCanvasBBox")),i.get("hasChanged")||(i.set("hasChanged",!0),i.cfg.parent&&i.cfg.parent.get("hasChanged")||(t.refreshElement(i,e,t),t.get("autoDraw")&&t.draw())))}function Vm(i){var e;if(i.destroyed)e=i._cacheCanvasBBox;else{var t=i.get("cacheCanvasBBox"),r=t&&!!(t.width&&t.height),n=i.getCanvasBBox(),a=n&&!!(n.width&&n.height);r&&a?e=Rm(t,n):r?e=t:a&&(e=n)}return e}function Hm(i){if(!i.length)return null;var e=[],t=[],r=[],n=[];return(0,h.each)(i,function(a){var o=Vm(a);o&&(e.push(o.minX),t.push(o.minY),r.push(o.maxX),n.push(o.maxY))}),{minX:(0,h.min)(e),minY:(0,h.min)(t),maxX:(0,h.max)(r),maxY:(0,h.max)(n)}}function Zm(i,e){return!i||!e||!wd(i,e)?null:{minX:Math.max(i.minX,e.minX),minY:Math.max(i.minY,e.minY),maxX:Math.min(i.maxX,e.maxX),maxY:Math.min(i.maxY,e.maxY)}}var Km=function(i){(0,y.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.onCanvasChange=function(t){Sp(this,t)},e.prototype.getShapeBase=function(){return x},e.prototype.getGroupBase=function(){return e},e.prototype._applyClip=function(t,r){r&&(t.save(),od(t,r),r.createPath(t),t.restore(),t.clip(),r._afterDraw())},e.prototype.cacheCanvasBBox=function(){var t=this.cfg.children,r=[],n=[];(0,h.each)(t,function(_){var I=_.cfg.cacheCanvasBBox;I&&_.cfg.isInView&&(r.push(I.minX,I.maxX),n.push(I.minY,I.maxY))});var a=null;if(r.length){var o=(0,h.min)(r),s=(0,h.max)(r),u=(0,h.min)(n),c=(0,h.max)(n);a={minX:o,minY:u,x:o,y:u,maxX:s,maxY:c,width:s-o,height:c-u};var f=this.cfg.canvas;if(f){var l=f.getViewRange();this.set("isInView",wd(a,l))}}else this.set("isInView",!1);this.set("cacheCanvasBBox",a)},e.prototype.draw=function(t,r){var n=this.cfg.children,a=r?this.cfg.refresh:!0;n.length&&a&&(t.save(),od(t,this),this._applyClip(t,this.getClip()),Vh(t,n,r),t.restore(),this.cacheCanvasBBox()),this.cfg.refresh=null,this.set("hasChanged",!1)},e.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("hasChanged",!1)},e}(xu),Mp=Km,$m=function(i){(0,y.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,y.__assign)((0,y.__assign)({},t),{lineWidth:1,lineAppendWidth:0,strokeOpacity:1,fillOpacity:1})},e.prototype.getShapeBase=function(){return x},e.prototype.getGroupBase=function(){return Mp},e.prototype.onCanvasChange=function(t){Sp(this,t)},e.prototype.calculateBBox=function(){var t=this.get("type"),r=this.getHitLineWidth(),n=Es(t),a=n(this),o=r/2,s=a.x-o,u=a.y-o,c=a.x+a.width+o,f=a.y+a.height+o;return{x:s,minX:s,y:u,minY:u,width:a.width+r,height:a.height+r,maxX:c,maxY:f}},e.prototype.isFill=function(){return!!this.attrs.fill||this.isClipShape()},e.prototype.isStroke=function(){return!!this.attrs.stroke},e.prototype._applyClip=function(t,r){r&&(t.save(),od(t,r),r.createPath(t),t.restore(),t.clip(),r._afterDraw())},e.prototype.draw=function(t,r){var n=this.cfg.clipShape;if(r){if(this.cfg.refresh===!1){this.set("hasChanged",!1);return}var a=this.getCanvasBBox();if(!wd(r,a)){this.set("hasChanged",!1),this.cfg.isInView&&this._afterDraw();return}}t.save(),od(t,this),this._applyClip(t,n),this.drawPath(t),t.restore(),this._afterDraw()},e.prototype.getCanvasViewBox=function(){var t=this.cfg.canvas;return t?t.getViewRange():null},e.prototype.cacheCanvasBBox=function(){var t=this.getCanvasViewBox();if(t){var r=this.getCanvasBBox(),n=wd(r,t);this.set("isInView",n),n?this.set("cacheCanvasBBox",r):this.set("cacheCanvasBBox",null)}},e.prototype._afterDraw=function(){this.cacheCanvasBBox(),this.set("hasChanged",!1),this.set("refresh",null)},e.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("isInView",null),this.set("hasChanged",!1)},e.prototype.drawPath=function(t){this.createPath(t),this.strokeAndFill(t),this.afterDrawPath(t)},e.prototype.fill=function(t){t.fill()},e.prototype.stroke=function(t){t.stroke()},e.prototype.strokeAndFill=function(t){var r=this.attrs,n=r.lineWidth,a=r.opacity,o=r.strokeOpacity,s=r.fillOpacity;this.isFill()&&(!(0,h.isNil)(s)&&s!==1?(t.globalAlpha=s,this.fill(t),t.globalAlpha=a):this.fill(t)),this.isStroke()&&n>0&&(!(0,h.isNil)(o)&&o!==1&&(t.globalAlpha=o),this.stroke(t)),this.afterDrawPath(t)},e.prototype.createPath=function(t){},e.prototype.afterDrawPath=function(t){},e.prototype.isInShape=function(t,r){var n=this.isStroke(),a=this.isFill(),o=this.getHitLineWidth();return this.isInStrokeOrPath(t,r,n,a,o)},e.prototype.isInStrokeOrPath=function(t,r,n,a,o){return!1},e.prototype.getHitLineWidth=function(){if(!this.isStroke())return 0;var t=this.attrs;return t.lineWidth+t.lineAppendWidth},e}(Vf),nc=$m,qm=function(i){(0,y.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,y.__assign)((0,y.__assign)({},t),{x:0,y:0,r:0})},e.prototype.isInStrokeOrPath=function(t,r,n,a,o){var s=this.attr(),u=s.x,c=s.y,f=s.r,l=o/2,_=dp(u,c,t,r);return a&&n?_<=f+l:a?_<=f:n?_>=f-l&&_<=f+l:!1},e.prototype.createPath=function(t){var r=this.attr(),n=r.x,a=r.y,o=r.r;t.beginPath(),t.arc(n,a,o,0,Math.PI*2,!1),t.closePath()},e}(nc),Qm=qm;function th(i,e,t,r){return i/(t*t)+e/(r*r)}var Jm=function(i){(0,y.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,y.__assign)((0,y.__assign)({},t),{x:0,y:0,rx:0,ry:0})},e.prototype.isInStrokeOrPath=function(t,r,n,a,o){var s=this.attr(),u=o/2,c=s.x,f=s.y,l=s.rx,_=s.ry,I=(t-c)*(t-c),B=(r-f)*(r-f);return a&&n?th(I,B,l+u,_+u)<=1:a?th(I,B,l,_)<=1:n?th(I,B,l-u,_-u)>=1&&th(I,B,l+u,_+u)<=1:!1},e.prototype.createPath=function(t){var r=this.attr(),n=r.x,a=r.y,o=r.rx,s=r.ry;if(t.beginPath(),t.ellipse)t.ellipse(n,a,o,s,0,0,Math.PI*2,!1);else{var u=o>s?o:s,c=o>s?1:o/s,f=o>s?s/o:1;t.save(),t.translate(n,a),t.scale(c,f),t.arc(0,0,u,0,Math.PI*2),t.restore(),t.closePath()}},e}(nc),ty=Jm;function _p(i){return i instanceof HTMLElement&&(0,h.isString)(i.nodeName)&&i.nodeName.toUpperCase()==="CANVAS"}var ey=function(i){(0,y.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,y.__assign)((0,y.__assign)({},t),{x:0,y:0,width:0,height:0})},e.prototype.initAttrs=function(t){this._setImage(t.img)},e.prototype.isStroke=function(){return!1},e.prototype.isOnlyHitBox=function(){return!0},e.prototype._afterLoading=function(){if(this.get("toDraw")===!0){var t=this.get("canvas");t?t.draw():this.createPath(this.get("context"))}},e.prototype._setImage=function(t){var r=this,n=this.attrs;if((0,h.isString)(t)){var a=new Image;a.onload=function(){if(r.destroyed)return!1;r.attr("img",a),r.set("loading",!1),r._afterLoading();var o=r.get("callback");o&&o.call(r)},a.crossOrigin="Anonymous",a.src=t,this.set("loading",!0)}else t instanceof Image?(n.width||(n.width=t.width),n.height||(n.height=t.height)):_p(t)&&(n.width||(n.width=Number(t.getAttribute("width"))),n.height||(n.height,Number(t.getAttribute("height"))))},e.prototype.onAttrChange=function(t,r,n){i.prototype.onAttrChange.call(this,t,r,n),t==="img"&&this._setImage(r)},e.prototype.createPath=function(t){if(this.get("loading")){this.set("toDraw",!0),this.set("context",t);return}var r=this.attr(),n=r.x,a=r.y,o=r.width,s=r.height,u=r.sx,c=r.sy,f=r.swidth,l=r.sheight,_=r.img;(_ instanceof Image||_p(_))&&(!(0,h.isNil)(u)&&!(0,h.isNil)(c)&&!(0,h.isNil)(f)&&!(0,h.isNil)(l)?t.drawImage(_,u,c,f,l,n,a,o,s):t.drawImage(_,n,a,o,s))},e}(nc),ry=ey;function Qf(i,e,t,r,n,a,o){var s=Math.min(i,t),u=Math.max(i,t),c=Math.min(e,r),f=Math.max(e,r),l=n/2;return a>=s-l&&a<=u+l&&o>=c-l&&o<=f+l?hs.pointToLine(i,e,t,r,a,o)<=n/2:!1}var ny=function(i){(0,y.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,y.__assign)((0,y.__assign)({},t),{x1:0,y1:0,x2:0,y2:0,startArrow:!1,endArrow:!1})},e.prototype.initAttrs=function(t){this.setArrow()},e.prototype.onAttrChange=function(t,r,n){i.prototype.onAttrChange.call(this,t,r,n),this.setArrow()},e.prototype.setArrow=function(){var t=this.attr(),r=t.x1,n=t.y1,a=t.x2,o=t.y2,s=t.startArrow,u=t.endArrow;s&&Xh(this,t,a,o,r,n),u&&jh(this,t,r,n,a,o)},e.prototype.isInStrokeOrPath=function(t,r,n,a,o){if(!n||!o)return!1;var s=this.attr(),u=s.x1,c=s.y1,f=s.x2,l=s.y2;return Qf(u,c,f,l,o,t,r)},e.prototype.createPath=function(t){var r=this.attr(),n=r.x1,a=r.y1,o=r.x2,s=r.y2,u=r.startArrow,c=r.endArrow,f={dx:0,dy:0},l={dx:0,dy:0};u&&u.d&&(f=Ml(n,a,o,s,r.startArrow.d)),c&&c.d&&(l=Ml(n,a,o,s,r.endArrow.d)),t.beginPath(),t.moveTo(n+f.dx,a+f.dy),t.lineTo(o-l.dx,s-l.dy)},e.prototype.afterDrawPath=function(t){var r=this.get("startArrowShape"),n=this.get("endArrowShape");r&&r.draw(t),n&&n.draw(t)},e.prototype.getTotalLength=function(){var t=this.attr(),r=t.x1,n=t.y1,a=t.x2,o=t.y2;return hs.length(r,n,a,o)},e.prototype.getPoint=function(t){var r=this.attr(),n=r.x1,a=r.y1,o=r.x2,s=r.y2;return hs.pointAt(n,a,o,s,t)},e}(nc),ay=ny,iy={circle:function(i,e,t){return[["M",i-t,e],["A",t,t,0,1,0,i+t,e],["A",t,t,0,1,0,i-t,e]]},square:function(i,e,t){return[["M",i-t,e-t],["L",i+t,e-t],["L",i+t,e+t],["L",i-t,e+t],["Z"]]},diamond:function(i,e,t){return[["M",i-t,e],["L",i,e-t],["L",i+t,e],["L",i,e+t],["Z"]]},triangle:function(i,e,t){var r=t*Math.sin(.3333333333333333*Math.PI);return[["M",i-t,e+r],["L",i,e-r],["L",i+t,e+r],["Z"]]},"triangle-down":function(i,e,t){var r=t*Math.sin(.3333333333333333*Math.PI);return[["M",i-t,e-r],["L",i+t,e-r],["L",i,e+r],["Z"]]}},oy=function(i){(0,y.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.initAttrs=function(t){this._resetParamsCache()},e.prototype._resetParamsCache=function(){this.set("paramsCache",{})},e.prototype.onAttrChange=function(t,r,n){i.prototype.onAttrChange.call(this,t,r,n),["symbol","x","y","r","radius"].indexOf(t)!==-1&&this._resetParamsCache()},e.prototype.isOnlyHitBox=function(){return!0},e.prototype._getR=function(t){return(0,h.isNil)(t.r)?t.radius:t.r},e.prototype._getPath=function(){var t=this.attr(),r=t.x,n=t.y,a=t.symbol||"circle",o=this._getR(t),s,u;if((0,h.isFunction)(a))s=a,u=s(r,n,o),u=ys(u);else{if(s=e.Symbols[a],!s)return console.warn(a+" marker is not supported."),null;u=s(r,n,o)}return u},e.prototype.createPath=function(t){var r=this._getPath(),n=this.get("paramsCache");wp(this,t,{path:r},n)},e.Symbols=iy,e}(nc),sy=oy;function Cp(i,e,t){var r=mr();return i.createPath(r),r.isPointInPath(e,t)}var uy=1e-6;function Kh(i){return Math.abs(i)<uy?0:i<0?-1:1}function cy(i,e,t){return(t[0]-i[0])*(e[1]-i[1])===(e[0]-i[0])*(t[1]-i[1])&&Math.min(i[0],e[0])<=t[0]&&t[0]<=Math.max(i[0],e[0])&&Math.min(i[1],e[1])<=t[1]&&t[1]<=Math.max(i[1],e[1])}function Tp(i,e,t){var r=!1,n=i.length;if(n<=2)return!1;for(var a=0;a<n;a++){var o=i[a],s=i[(a+1)%n];if(cy(o,s,[e,t]))return!0;Kh(o[1]-t)>0!=Kh(s[1]-t)>0&&Kh(e-(t-o[1])*(o[0]-s[0])/(o[1]-s[1])-o[0])<0&&(r=!r)}return r}function Sd(i,e,t,r,n,a,o,s){var u=(Math.atan2(s-e,o-i)+Math.PI*2)%(Math.PI*2);if(u<r||u>n)return!1;var c={x:i+t*Math.cos(u),y:e+t*Math.sin(u)};return dp(c.x,c.y,o,s)<=a/2}var fy=pt;function ly(i){for(var e=!1,t=i.length,r=0;r<t;r++){var n=i[r],a=n[0];if(a==="C"||a==="A"||a==="Q"){e=!0;break}}return e}function dy(i,e,t,r,n){for(var a=!1,o=e/2,s=0;s<i.length;s++){var u=i[s],c=u.currentPoint,f=u.params,l=u.prePoint,_=u.box;if(!(_&&!Sl(_.x-o,_.y-o,_.width+e,_.height+e,t,r))){switch(u.command){case"L":case"Z":a=Qf(l[0],l[1],c[0],c[1],e,t,r);break;case"Q":var I=El.pointDistance(l[0],l[1],f[1],f[2],f[3],f[4],t,r);a=I<=e/2;break;case"C":var B=Te.pointDistance(l[0],l[1],f[1],f[2],f[3],f[4],f[5],f[6],t,r,n);a=B<=e/2;break;case"A":var j=u.arcParams,et=j.cx,ut=j.cy,ft=j.rx,gt=j.ry,Mt=j.startAngle,Ht=j.endAngle,se=j.xRotation,oe=[t,r,1],_e=ft>gt?ft:gt,Ue=ft>gt?1:ft/gt,Ne=ft>gt?gt/ft:1,Qe=fy(null,[["t",-et,-ut],["r",-se],["s",1/Ue,1/Ne]]);$i.transformMat3(oe,oe,Qe),a=Sd(0,0,_e,Mt,Ht,e,oe[0],oe[1]);break;default:break}if(a)break}}return a}function hy(i){for(var e=i.length,t=[],r=[],n=[],a=0;a<e;a++){var o=i[a],s=o[0];s==="M"?(n.length&&(r.push(n),n=[]),n.push([o[1],o[2]])):s==="Z"?n.length&&(t.push(n),n=[]):n.push([o[1],o[2]])}return n.length>0&&r.push(n),{polygons:t,polylines:r}}var eh=(0,y.__assign)({hasArc:ly,extractPolygons:hy,isPointInStroke:dy},T);function Ap(i,e,t){for(var r=!1,n=0;n<i.length;n++){var a=i[n];if(r=Tp(a,e,t),r)break}return r}var vy=function(i){(0,y.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,y.__assign)((0,y.__assign)({},t),{startArrow:!1,endArrow:!1})},e.prototype.initAttrs=function(t){this._setPathArr(t.path),this.setArrow()},e.prototype.onAttrChange=function(t,r,n){i.prototype.onAttrChange.call(this,t,r,n),t==="path"&&this._setPathArr(r),this.setArrow()},e.prototype._setPathArr=function(t){this.attrs.path=ys(t);var r=eh.hasArc(t);this.set("hasArc",r),this.set("paramsCache",{}),this.set("segments",null),this.set("curve",null),this.set("tCache",null),this.set("totalLength",null)},e.prototype.getSegments=function(){var t=this.get("segements");return t||(t=In(this.attr("path")),this.set("segments",t)),t},e.prototype.setArrow=function(){var t=this.attr(),r=t.startArrow,n=t.endArrow;if(r){var a=this.getStartTangent();Xh(this,t,a[0][0],a[0][1],a[1][0],a[1][1])}if(n){var a=this.getEndTangent();jh(this,t,a[0][0],a[0][1],a[1][0],a[1][1])}},e.prototype.isInStrokeOrPath=function(t,r,n,a,o){var s=this.getSegments(),u=this.get("hasArc"),c=!1;if(n){var f=this.getTotalLength();c=eh.isPointInStroke(s,o,t,r,f)}if(!c&&a)if(u)c=Cp(this,t,r);else{var l=this.attr("path"),_=eh.extractPolygons(l);c=Ap(_.polygons,t,r)||Ap(_.polylines,t,r)}return c},e.prototype.createPath=function(t){var r=this.attr(),n=this.get("paramsCache");wp(this,t,r,n)},e.prototype.afterDrawPath=function(t){var r=this.get("startArrowShape"),n=this.get("endArrowShape");r&&r.draw(t),n&&n.draw(t)},e.prototype.getTotalLength=function(){var t=this.get("totalLength");return(0,h.isNil)(t)?(this._calculateCurve(),this._setTcache(),this.get("totalLength")):t},e.prototype.getPoint=function(t){var r=this.get("tCache");r||(this._calculateCurve(),this._setTcache(),r=this.get("tCache"));var n,a,o=this.get("curve");if(!r||r.length===0)return o?{x:o[0][1],y:o[0][2]}:null;(0,h.each)(r,function(f,l){t>=f[0]&&t<=f[1]&&(n=(t-f[0])/(f[1]-f[0]),a=l)});var s=o[a];if((0,h.isNil)(s)||(0,h.isNil)(a))return null;var u=s.length,c=o[a+1];return Te.pointAt(s[u-2],s[u-1],c[1],c[2],c[3],c[4],c[5],c[6],n)},e.prototype._calculateCurve=function(){var t=this.attr().path;this.set("curve",eh.pathToCurve(t))},e.prototype._setTcache=function(){var t=0,r=0,n=[],a,o,s,u,c=this.get("curve");if(c){if((0,h.each)(c,function(f,l){s=c[l+1],u=f.length,s&&(t+=Te.length(f[u-2],f[u-1],s[1],s[2],s[3],s[4],s[5],s[6])||0)}),this.set("totalLength",t),t===0){this.set("tCache",[]);return}(0,h.each)(c,function(f,l){s=c[l+1],u=f.length,s&&(a=[],a[0]=r/t,o=Te.length(f[u-2],f[u-1],s[1],s[2],s[3],s[4],s[5],s[6]),r+=o||0,a[1]=r/t,n.push(a))}),this.set("tCache",n)}},e.prototype.getStartTangent=function(){var t=this.getSegments(),r;if(t.length>1){var n=t[0].currentPoint,a=t[1].currentPoint,o=t[1].startTangent;r=[],o?(r.push([n[0]-o[0],n[1]-o[1]]),r.push([n[0],n[1]])):(r.push([a[0],a[1]]),r.push([n[0],n[1]]))}return r},e.prototype.getEndTangent=function(){var t=this.getSegments(),r=t.length,n;if(r>1){var a=t[r-2].currentPoint,o=t[r-1].currentPoint,s=t[r-1].endTangent;n=[],s?(n.push([o[0]-s[0],o[1]-s[1]]),n.push([o[0],o[1]])):(n.push([a[0],a[1]]),n.push([o[0],o[1]]))}return n},e}(nc),$h=vy;function Ip(i,e,t,r,n){var a=i.length;if(a<2)return!1;for(var o=0;o<a-1;o++){var s=i[o][0],u=i[o][1],c=i[o+1][0],f=i[o+1][1];if(Qf(s,u,c,f,e,t,r))return!0}if(n){var l=i[0],_=i[a-1];if(Qf(l[0],l[1],_[0],_[1],e,t,r))return!0}return!1}var py=function(i){(0,y.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.isInStrokeOrPath=function(t,r,n,a,o){var s=this.attr().points,u=!1;return n&&(u=Ip(s,o,t,r,!0)),!u&&a&&(u=Tp(s,t,r)),u},e.prototype.createPath=function(t){var r=this.attr(),n=r.points;if(!(n.length<2)){t.beginPath();for(var a=0;a<n.length;a++){var o=n[a];a===0?t.moveTo(o[0],o[1]):t.lineTo(o[0],o[1])}t.closePath()}},e}(nc),gy=py,my=function(i){(0,y.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,y.__assign)((0,y.__assign)({},t),{startArrow:!1,endArrow:!1})},e.prototype.initAttrs=function(t){this.setArrow()},e.prototype.onAttrChange=function(t,r,n){i.prototype.onAttrChange.call(this,t,r,n),this.setArrow(),["points"].indexOf(t)!==-1&&this._resetCache()},e.prototype._resetCache=function(){this.set("totalLength",null),this.set("tCache",null)},e.prototype.setArrow=function(){var t=this.attr(),r=this.attrs,n=r.points,a=r.startArrow,o=r.endArrow,s=n.length,u=n[0][0],c=n[0][1],f=n[s-1][0],l=n[s-1][1];a&&Xh(this,t,n[1][0],n[1][1],u,c),o&&jh(this,t,n[s-2][0],n[s-2][1],f,l)},e.prototype.isFill=function(){return!1},e.prototype.isInStrokeOrPath=function(t,r,n,a,o){if(!n||!o)return!1;var s=this.attr().points;return Ip(s,o,t,r,!1)},e.prototype.isStroke=function(){return!0},e.prototype.createPath=function(t){var r=this.attr(),n=r.points,a=r.startArrow,o=r.endArrow,s=n.length;if(!(n.length<2)){var u=n[0][0],c=n[0][1],f=n[s-1][0],l=n[s-1][1];if(a&&a.d){var _=Ml(u,c,n[1][0],n[1][1],a.d);u+=_.dx,c+=_.dy}if(o&&o.d){var _=Ml(n[s-2][0],n[s-2][1],f,l,o.d);f-=_.dx,l-=_.dy}t.beginPath(),t.moveTo(u,c);for(var I=0;I<s-1;I++){var B=n[I];t.lineTo(B[0],B[1])}t.lineTo(f,l)}},e.prototype.afterDrawPath=function(t){var r=this.get("startArrowShape"),n=this.get("endArrowShape");r&&r.draw(t),n&&n.draw(t)},e.prototype.getTotalLength=function(){var t=this.attr().points,r=this.get("totalLength");return(0,h.isNil)(r)?(this.set("totalLength",zt.length(t)),this.get("totalLength")):r},e.prototype.getPoint=function(t){var r=this.attr().points,n=this.get("tCache");n||(this._setTcache(),n=this.get("tCache"));var a,o;return(0,h.each)(n,function(s,u){t>=s[0]&&t<=s[1]&&(a=(t-s[0])/(s[1]-s[0]),o=u)}),hs.pointAt(r[o][0],r[o][1],r[o+1][0],r[o+1][1],a)},e.prototype._setTcache=function(){var t=this.attr().points;if(!(!t||t.length===0)){var r=this.getTotalLength();if(!(r<=0)){var n=0,a=[],o,s;(0,h.each)(t,function(u,c){t[c+1]&&(o=[],o[0]=n/r,s=hs.length(u[0],u[1],t[c+1][0],t[c+1][1]),n+=s,o[1]=n/r,a.push(o))}),this.set("tCache",a)}}},e.prototype.getStartTangent=function(){var t=this.attr().points,r=[];return r.push([t[1][0],t[1][1]]),r.push([t[0][0],t[0][1]]),r},e.prototype.getEndTangent=function(){var t=this.attr().points,r=t.length-1,n=[];return n.push([t[r-1][0],t[r-1][1]]),n.push([t[r][0],t[r][1]]),n},e}(nc),yy=my;function xy(i,e,t,r,n,a,o){var s=n/2;return Sl(i-s,e-s,t,n,a,o)||Sl(i+t-s,e-s,n,r,a,o)||Sl(i+s,e+r-s,t,n,a,o)||Sl(i-s,e+s,n,r,a,o)}function by(i,e,t,r,n,a,o,s){var u=a/2;return Qf(i+n,e,i+t-n,e,a,o,s)||Qf(i+t,e+n,i+t,e+r-n,a,o,s)||Qf(i+t-n,e+r,i+n,e+r,a,o,s)||Qf(i,e+r-n,i,e+n,a,o,s)||Sd(i+t-n,e+n,n,1.5*Math.PI,2*Math.PI,a,o,s)||Sd(i+t-n,e+r-n,n,0,.5*Math.PI,a,o,s)||Sd(i+n,e+r-n,n,.5*Math.PI,Math.PI,a,o,s)||Sd(i+n,e+n,n,Math.PI,1.5*Math.PI,a,o,s)}var Ey=function(i){(0,y.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,y.__assign)((0,y.__assign)({},t),{x:0,y:0,width:0,height:0,radius:0})},e.prototype.isInStrokeOrPath=function(t,r,n,a,o){var s=this.attr(),u=s.x,c=s.y,f=s.width,l=s.height,_=s.radius;if(_){var B=!1;return n&&(B=by(u,c,f,l,_,o,t,r)),!B&&a&&(B=Cp(this,t,r)),B}else{var I=o/2;if(a&&n)return Sl(u-I,c-I,f+I,l+I,t,r);if(a)return Sl(u,c,f,l,t,r);if(n)return xy(u,c,f,l,o,t,r)}},e.prototype.createPath=function(t){var r=this.attr(),n=r.x,a=r.y,o=r.width,s=r.height,u=r.radius;if(t.beginPath(),u===0)t.rect(n,a,o,s);else{var c=Ym(u),f=c[0],l=c[1],_=c[2],I=c[3];t.moveTo(n+f,a),t.lineTo(n+o-l,a),l!==0&&t.arc(n+o-l,a+l,l,-Math.PI/2,0),t.lineTo(n+o,a+s-_),_!==0&&t.arc(n+o-_,a+s-_,_,0,Math.PI/2),t.lineTo(n+I,a+s),I!==0&&t.arc(n+I,a+s-I,I,Math.PI/2,Math.PI),t.lineTo(n,a+f),f!==0&&t.arc(n+f,a+f,f,Math.PI,Math.PI*1.5),t.closePath()}},e}(nc),wy=Ey,Sy=function(i){(0,y.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,y.__assign)((0,y.__assign)({},t),{x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"})},e.prototype.isOnlyHitBox=function(){return!0},e.prototype.initAttrs=function(t){this._assembleFont(),t.text&&this._setText(t.text)},e.prototype._assembleFont=function(){var t=this.attrs;t.font=Xn(t)},e.prototype._setText=function(t){var r=null;(0,h.isString)(t)&&t.indexOf(`
`)!==-1&&(r=t.split(`
`)),this.set("textArr",r)},e.prototype.onAttrChange=function(t,r,n){i.prototype.onAttrChange.call(this,t,r,n),t.startsWith("font")&&this._assembleFont(),t==="text"&&this._setText(r)},e.prototype._getSpaceingY=function(){var t=this.attrs,r=t.lineHeight,n=t.fontSize*1;return r?r-n:n*.14},e.prototype._drawTextArr=function(t,r,n){var a=this.attrs,o=a.textBaseline,s=a.x,u=a.y,c=a.fontSize*1,f=this._getSpaceingY(),l=br(a.text,a.fontSize,a.lineHeight),_;(0,h.each)(r,function(I,B){_=u+B*(f+c)-l+c,o==="middle"&&(_+=l-c-(l-c)/2),o==="top"&&(_+=l-c),(0,h.isNil)(I)||(n?t.fillText(I,s,_):t.strokeText(I,s,_))})},e.prototype._drawText=function(t,r){var n=this.attr(),a=n.x,o=n.y,s=this.get("textArr");if(s)this._drawTextArr(t,s,r);else{var u=n.text;(0,h.isNil)(u)||(r?t.fillText(u,a,o):t.strokeText(u,a,o))}},e.prototype.strokeAndFill=function(t){var r=this.attrs,n=r.lineWidth,a=r.opacity,o=r.strokeOpacity,s=r.fillOpacity;this.isStroke()&&n>0&&(!(0,h.isNil)(o)&&o!==1&&(t.globalAlpha=a),this.stroke(t)),this.isFill()&&(!(0,h.isNil)(s)&&s!==1?(t.globalAlpha=s,this.fill(t),t.globalAlpha=a):this.fill(t)),this.afterDrawPath(t)},e.prototype.fill=function(t){this._drawText(t,!0)},e.prototype.stroke=function(t){this._drawText(t,!1)},e}(nc),My=Sy;function _y(i,e){if(e){var t=Vt(e);return Lt(t,i)}return i}function Op(i,e,t){var r=i.getTotalMatrix();if(r){var n=_y([e,t,1],r),a=n[0],o=n[1];return[a,o]}return[e,t]}function Dp(i,e,t){if(i.isCanvas&&i.isCanvas())return!0;if(!kc(i)||i.cfg.isInView===!1)return!1;if(i.cfg.clipShape){var r=Op(i,e,t),n=r[0],a=r[1];if(i.isClipped(n,a))return!1}var o=i.cfg.cacheCanvasBBox||i.getCanvasBBox();return e>=o.minX&&e<=o.maxX&&t>=o.minY&&t<=o.maxY}function Lp(i,e,t){if(!Dp(i,e,t))return null;for(var r=null,n=i.getChildren(),a=n.length,o=a-1;o>=0;o--){var s=n[o];if(s.isGroup())r=Lp(s,e,t);else if(Dp(s,e,t)){var u=s,c=Op(s,e,t),f=c[0],l=c[1];u.isInShape(f,l)&&(r=s)}if(r)break}return r}var Cy=function(i){(0,y.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getDefaultCfg=function(){var t=i.prototype.getDefaultCfg.call(this);return t.renderer="canvas",t.autoDraw=!0,t.localRefresh=!0,t.refreshElements=[],t.clipView=!0,t.quickHit=!1,t},e.prototype.onCanvasChange=function(t){(t==="attr"||t==="sort"||t==="changeSize")&&(this.set("refreshElements",[this]),this.draw())},e.prototype.getShapeBase=function(){return x},e.prototype.getGroupBase=function(){return Mp},e.prototype.getPixelRatio=function(){var t=this.get("pixelRatio")||Nm();return t>=1?Math.ceil(t):1},e.prototype.getViewRange=function(){return{minX:0,minY:0,maxX:this.cfg.width,maxY:this.cfg.height}},e.prototype.createDom=function(){var t=document.createElement("canvas"),r=t.getContext("2d");return this.set("context",r),t},e.prototype.setDOMSize=function(t,r){i.prototype.setDOMSize.call(this,t,r);var n=this.get("context"),a=this.get("el"),o=this.getPixelRatio();a.width=o*t,a.height=o*r,o>1&&n.scale(o,o)},e.prototype.clear=function(){i.prototype.clear.call(this),this._clearFrame();var t=this.get("context"),r=this.get("el");t.clearRect(0,0,r.width,r.height)},e.prototype.getShape=function(t,r){var n;return this.get("quickHit")?n=Lp(this,t,r):n=i.prototype.getShape.call(this,t,r,null),n},e.prototype._getRefreshRegion=function(){var t=this.get("refreshElements"),r=this.getViewRange(),n;if(t.length&&t[0]===this)n=r;else if(n=Hm(t),n){n.minX=Math.floor(n.minX),n.minY=Math.floor(n.minY),n.maxX=Math.ceil(n.maxX),n.maxY=Math.ceil(n.maxY),n.maxY+=1;var a=this.get("clipView");a&&(n=Zm(n,r))}return n},e.prototype.refreshElement=function(t){var r=this.get("refreshElements");r.push(t)},e.prototype._clearFrame=function(){var t=this.get("drawFrame");t&&((0,h.clearAnimationFrame)(t),this.set("drawFrame",null),this.set("refreshElements",[]))},e.prototype.draw=function(){var t=this.get("drawFrame");this.get("autoDraw")&&t||this._startDraw()},e.prototype._drawAll=function(){var t=this.get("context"),r=this.get("el"),n=this.getChildren();t.clearRect(0,0,r.width,r.height),od(t,this),Vh(t,n),this.set("refreshElements",[])},e.prototype._drawRegion=function(){var t=this.get("context"),r=this.get("refreshElements"),n=this.getChildren(),a=this._getRefreshRegion();a?(t.clearRect(a.minX,a.minY,a.maxX-a.minX,a.maxY-a.minY),t.save(),t.beginPath(),t.rect(a.minX,a.minY,a.maxX-a.minX,a.maxY-a.minY),t.clip(),od(t,this),Xm(this,n,a),Vh(t,n,a),t.restore()):r.length&&Ep(r),(0,h.each)(r,function(o){o.get("hasChanged")&&o.set("hasChanged",!1)}),this.set("refreshElements",[])},e.prototype._startDraw=function(){var t=this,r=this.get("drawFrame");r||(r=(0,h.requestAnimationFrame)(function(){t.get("localRefresh")?t._drawRegion():t._drawAll(),t.set("drawFrame",null)}),this.set("drawFrame",r))},e.prototype.skipDraw=function(){},e.prototype.removeDom=function(){var t=this.get("el");t.width=0,t.height=0,t.parentNode.removeChild(t)},e}(xl),ff=Cy,NS="0.5.12",qh={rect:"path",circle:"circle",line:"line",path:"path",marker:"path",text:"text",polyline:"polyline",polygon:"polygon",image:"image",ellipse:"ellipse",dom:"foreignObject"},Gi={opacity:"opacity",fillStyle:"fill",fill:"fill",fillOpacity:"fill-opacity",strokeStyle:"stroke",strokeOpacity:"stroke-opacity",stroke:"stroke",x:"x",y:"y",r:"r",rx:"rx",ry:"ry",width:"width",height:"height",x1:"x1",x2:"x2",y1:"y1",y2:"y2",lineCap:"stroke-linecap",lineJoin:"stroke-linejoin",lineWidth:"stroke-width",lineDash:"stroke-dasharray",lineDashOffset:"stroke-dashoffset",miterLimit:"stroke-miterlimit",font:"font",fontSize:"font-size",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",fontFamily:"font-family",startArrow:"marker-start",endArrow:"marker-end",path:"d",class:"class",id:"id",style:"style",preserveAspectRatio:"preserveAspectRatio"},RS=null;function Bu(i){return document.createElementNS("http://www.w3.org/2000/svg",i)}function Pp(i){var e=qh[i.type],t=i.getParent();if(!e)throw new Error("the type "+i.type+" is not supported by svg");var r=Bu(e);if(i.get("id")&&(r.id=i.get("id")),i.set("el",r),i.set("attrs",{}),t){var n=t.get("el");n||(n=t.createDom(),t.set("el",n)),n.appendChild(r)}return r}function Np(i,e){var t=i.get("el"),r=(0,h.toArray)(t.children).sort(e),n=document.createDocumentFragment();r.forEach(function(a){n.appendChild(a)}),t.appendChild(n)}function Ty(i,e){var t=i.parentNode,r=Array.from(t.childNodes).filter(function(s){return s.nodeType===1&&s.nodeName.toLowerCase()!=="defs"}),n=r[e],a=r.indexOf(i);if(n){if(a>e)t.insertBefore(i,n);else if(a<e){var o=r[e+1];o?t.insertBefore(i,o):t.appendChild(i)}}else t.appendChild(i)}function Ay(i,e){var t=i.cfg.el,r=i.attr(),n={dx:r.shadowOffsetX,dy:r.shadowOffsetY,blur:r.shadowBlur,color:r.shadowColor};if(!n.dx&&!n.dy&&!n.blur&&!n.color)t.removeAttribute("filter");else{var a=e.find("filter",n);a||(a=e.addShadow(n)),t.setAttribute("filter","url(#"+a+")")}}function Md(i){var e=i.attr().matrix;if(e){for(var t=i.cfg.el,r=[],n=0;n<9;n+=3)r.push(e[n]+","+e[n+1]);r=r.join(","),r.indexOf("NaN")===-1?t.setAttribute("transform","matrix("+r+")"):console.warn("invalid matrix:",e)}}function _d(i,e){var t=i.getClip(),r=i.get("el");if(!t)r.removeAttribute("clip-path");else if(t&&!r.hasAttribute("clip-path")){Pp(t),t.createPath(e);var n=e.addClip(t);r.setAttribute("clip-path","url(#"+n+")")}}function Rp(i,e){e.forEach(function(t){t.draw(i)})}function kp(i,e){var t=i.get("canvas");if(t&&t.get("autoDraw")){var r=t.get("context"),n=i.getParent(),a=n?n.getChildren():[t],o=i.get("el");if(e==="remove"){var s=i.get("isClipShape");if(s){var u=o&&o.parentNode,c=u&&u.parentNode;u&&c&&c.removeChild(u)}else o&&o.parentNode&&o.parentNode.removeChild(o)}else if(e==="show")o.setAttribute("visibility","visible");else if(e==="hide")o.setAttribute("visibility","hidden");else if(e==="zIndex")Ty(o,a.indexOf(i));else if(e==="sort"){var f=i.get("children");f&&f.length&&Np(i,function(l,_){return f.indexOf(l)-f.indexOf(_)?1:0})}else e==="clear"?o&&(o.innerHTML=""):e==="matrix"?Md(i):e==="clip"?_d(i,r):e==="attr"||e==="add"&&i.draw(r)}}var Iy=function(i){(0,y.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.isEntityGroup=function(){return!0},e.prototype.createDom=function(){var t=Bu("g");this.set("el",t);var r=this.getParent();if(r){var n=r.get("el");n||(n=r.createDom(),r.set("el",n)),n.appendChild(t)}return t},e.prototype.afterAttrsChange=function(t){i.prototype.afterAttrsChange.call(this,t);var r=this.get("canvas");if(r&&r.get("autoDraw")){var n=r.get("context");this.createPath(n,t)}},e.prototype.onCanvasChange=function(t){kp(this,t)},e.prototype.getShapeBase=function(){return g},e.prototype.getGroupBase=function(){return e},e.prototype.draw=function(t){var r=this.getChildren(),n=this.get("el");this.get("destroyed")?n&&n.parentNode.removeChild(n):(n||this.createDom(),_d(this,t),this.createPath(t),r.length&&Rp(t,r))},e.prototype.createPath=function(t,r){var n=this.attr(),a=this.get("el");(0,h.each)(r||n,function(o,s){Gi[s]&&a.setAttribute(Gi[s],o)}),Md(this)},e}(xu),Bp=Iy,Oy=function(i){(0,y.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="svg",t.canFill=!1,t.canStroke=!1,t}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,y.__assign)((0,y.__assign)({},t),{lineWidth:1,lineAppendWidth:0,strokeOpacity:1,fillOpacity:1})},e.prototype.afterAttrsChange=function(t){i.prototype.afterAttrsChange.call(this,t);var r=this.get("canvas");if(r&&r.get("autoDraw")){var n=r.get("context");this.draw(n,t)}},e.prototype.getShapeBase=function(){return g},e.prototype.getGroupBase=function(){return Bp},e.prototype.onCanvasChange=function(t){kp(this,t)},e.prototype.calculateBBox=function(){var t=this.get("el"),r=null;if(t)r=t.getBBox();else{var n=Es(this.get("type"));n&&(r=n(this))}if(r){var a=r.x,o=r.y,s=r.width,u=r.height,c=this.getHitLineWidth(),f=c/2,l=a-f,_=o-f,I=a+s+f,B=o+u+f;return{x:l,y:_,minX:l,minY:_,maxX:I,maxY:B,width:s+c,height:u+c}}return{x:0,y:0,minX:0,minY:0,maxX:0,maxY:0,width:0,height:0}},e.prototype.isFill=function(){var t=this.attr(),r=t.fill,n=t.fillStyle;return(r||n||this.isClipShape())&&this.canFill},e.prototype.isStroke=function(){var t=this.attr(),r=t.stroke,n=t.strokeStyle;return(r||n)&&this.canStroke},e.prototype.draw=function(t,r){var n=this.get("el");this.get("destroyed")?n&&n.parentNode.removeChild(n):(n||Pp(this),_d(this,t),this.createPath(t,r),this.shadow(t,r),this.strokeAndFill(t,r),this.transform(r))},e.prototype.createPath=function(t,r){},e.prototype.strokeAndFill=function(t,r){var n=r||this.attr(),a=n.fill,o=n.fillStyle,s=n.stroke,u=n.strokeStyle,c=n.fillOpacity,f=n.strokeOpacity,l=n.lineWidth,_=this.get("el");this.canFill&&(r?"fill"in n?this._setColor(t,"fill",a):"fillStyle"in n&&this._setColor(t,"fill",o):this._setColor(t,"fill",a||o),c&&_.setAttribute(Gi.fillOpacity,c)),this.canStroke&&l>0&&(r?"stroke"in n?this._setColor(t,"stroke",s):"strokeStyle"in n&&this._setColor(t,"stroke",u):this._setColor(t,"stroke",s||u),f&&_.setAttribute(Gi.strokeOpacity,f),l&&_.setAttribute(Gi.lineWidth,l))},e.prototype._setColor=function(t,r,n){var a=this.get("el");if(!n){a.setAttribute(Gi[r],"none");return}if(n=n.trim(),/^[r,R,L,l]{1}[\s]*\(/.test(n)){var o=t.find("gradient",n);o||(o=t.addGradient(n)),a.setAttribute(Gi[r],"url(#"+o+")")}else if(/^[p,P]{1}[\s]*\(/.test(n)){var o=t.find("pattern",n);o||(o=t.addPattern(n)),a.setAttribute(Gi[r],"url(#"+o+")")}else a.setAttribute(Gi[r],n)},e.prototype.shadow=function(t,r){var n=this.attr(),a=r||n,o=a.shadowOffsetX,s=a.shadowOffsetY,u=a.shadowBlur,c=a.shadowColor;(o||s||u||c)&&Ay(this,t)},e.prototype.transform=function(t){var r=this.attr(),n=(t||r).matrix;n&&Md(this)},e.prototype.isInShape=function(t,r){return this.isPointInPath(t,r)},e.prototype.isPointInPath=function(t,r){var n=this.get("el"),a=this.get("canvas"),o=a.get("el").getBoundingClientRect(),s=t+o.left,u=r+o.top,c=document.elementFromPoint(s,u);return!!(c&&c.isEqualNode(n))},e.prototype.getHitLineWidth=function(){var t=this.attrs,r=t.lineWidth,n=t.lineAppendWidth;return this.isStroke()?r+n:0},e}(Vf),Fu=Oy,Dy=function(i){(0,y.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="circle",t.canFill=!0,t.canStroke=!0,t}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,y.__assign)((0,y.__assign)({},t),{x:0,y:0,r:0})},e.prototype.createPath=function(t,r){var n=this.attr(),a=this.get("el");(0,h.each)(r||n,function(o,s){s==="x"||s==="y"?a.setAttribute("c"+s,o):Gi[s]&&a.setAttribute(Gi[s],o)})},e}(Fu),Ly=Dy,Py=function(i){(0,y.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="dom",t.canFill=!1,t.canStroke=!1,t}return e.prototype.createPath=function(t,r){var n=this.attr(),a=this.get("el");if((0,h.each)(r||n,function(c,f){Gi[f]&&a.setAttribute(Gi[f],c)}),typeof n.html=="function"){var o=n.html.call(this,n);if(o instanceof Element||o instanceof HTMLDocument){for(var s=a.childNodes,u=s.length-1;u>=0;u--)a.removeChild(s[u]);a.appendChild(o)}else a.innerHTML=o}else a.innerHTML=n.html},e}(Fu),Ny=Py,Ry=function(i){(0,y.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="ellipse",t.canFill=!0,t.canStroke=!0,t}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,y.__assign)((0,y.__assign)({},t),{x:0,y:0,rx:0,ry:0})},e.prototype.createPath=function(t,r){var n=this.attr(),a=this.get("el");(0,h.each)(r||n,function(o,s){s==="x"||s==="y"?a.setAttribute("c"+s,o):Gi[s]&&a.setAttribute(Gi[s],o)})},e}(Fu),ky=Ry,By=function(i){(0,y.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="image",t.canFill=!1,t.canStroke=!1,t}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,y.__assign)((0,y.__assign)({},t),{x:0,y:0,width:0,height:0})},e.prototype.createPath=function(t,r){var n=this,a=this.attr(),o=this.get("el");(0,h.each)(r||a,function(s,u){u==="img"?n._setImage(a.img):Gi[u]&&o.setAttribute(Gi[u],s)})},e.prototype.setAttr=function(t,r){this.attrs[t]=r,t==="img"&&this._setImage(r)},e.prototype._setImage=function(t){var r=this.attr(),n=this.get("el");if((0,h.isString)(t))n.setAttribute("href",t);else if(t instanceof window.Image)r.width||(n.setAttribute("width",t.width),this.attr("width",t.width)),r.height||(n.setAttribute("height",t.height),this.attr("height",t.height)),n.setAttribute("href",t.src);else if(t instanceof HTMLElement&&(0,h.isString)(t.nodeName)&&t.nodeName.toUpperCase()==="CANVAS")n.setAttribute("href",t.toDataURL());else if(t instanceof ImageData){var a=document.createElement("canvas");a.setAttribute("width",""+t.width),a.setAttribute("height",""+t.height),a.getContext("2d").putImageData(t,0,0),r.width||(n.setAttribute("width",""+t.width),this.attr("width",t.width)),r.height||(n.setAttribute("height",""+t.height),this.attr("height",t.height)),n.setAttribute("href",a.toDataURL())}},e}(Fu),Fy=By,zy=function(i){(0,y.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="line",t.canFill=!1,t.canStroke=!0,t}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,y.__assign)((0,y.__assign)({},t),{x1:0,y1:0,x2:0,y2:0,startArrow:!1,endArrow:!1})},e.prototype.createPath=function(t,r){var n=this.attr(),a=this.get("el");(0,h.each)(r||n,function(o,s){if(s==="startArrow"||s==="endArrow")if(o){var u=(0,h.isObject)(o)?t.addArrow(n,Gi[s]):t.getDefaultArrow(n,Gi[s]);a.setAttribute(Gi[s],"url(#"+u+")")}else a.removeAttribute(Gi[s]);else Gi[s]&&a.setAttribute(Gi[s],o)})},e.prototype.getTotalLength=function(){var t=this.attr(),r=t.x1,n=t.y1,a=t.x2,o=t.y2;return hs.length(r,n,a,o)},e.prototype.getPoint=function(t){var r=this.attr(),n=r.x1,a=r.y1,o=r.x2,s=r.y2;return hs.pointAt(n,a,o,s,t)},e}(Fu),Gy=zy,rh={circle:function(i,e,t){return[["M",i,e],["m",-t,0],["a",t,t,0,1,0,t*2,0],["a",t,t,0,1,0,-t*2,0]]},square:function(i,e,t){return[["M",i-t,e-t],["L",i+t,e-t],["L",i+t,e+t],["L",i-t,e+t],["Z"]]},diamond:function(i,e,t){return[["M",i-t,e],["L",i,e-t],["L",i+t,e],["L",i,e+t],["Z"]]},triangle:function(i,e,t){var r=t*Math.sin(.3333333333333333*Math.PI);return[["M",i-t,e+r],["L",i,e-r],["L",i+t,e+r],["z"]]},triangleDown:function(i,e,t){var r=t*Math.sin(.3333333333333333*Math.PI);return[["M",i-t,e-r],["L",i+t,e-r],["L",i,e+r],["Z"]]}},Fp={get:function(i){return rh[i]},register:function(i,e){rh[i]=e},remove:function(i){delete rh[i]},getAll:function(){return rh}},Uy=function(i){(0,y.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="marker",t.canFill=!0,t.canStroke=!0,t}return e.prototype.createPath=function(t){var r=this.get("el");r.setAttribute("d",this._assembleMarker())},e.prototype._assembleMarker=function(){var t=this._getPath();return(0,h.isArray)(t)?t.map(function(r){return r.join(" ")}).join(""):t},e.prototype._getPath=function(){var t=this.attr(),r=t.x,n=t.y,a=t.r||t.radius,o=t.symbol||"circle",s;return(0,h.isFunction)(o)?s=o:s=Fp.get(o),s?s(r,n,a):(console.warn(s+" symbol is not exist."),null)},e.symbolsFactory=Fp,e}(Fu),Wy=Uy,Yy=function(i){(0,y.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="path",t.canFill=!0,t.canStroke=!0,t}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,y.__assign)((0,y.__assign)({},t),{startArrow:!1,endArrow:!1})},e.prototype.createPath=function(t,r){var n=this,a=this.attr(),o=this.get("el");(0,h.each)(r||a,function(s,u){if(u==="path"&&(0,h.isArray)(s))o.setAttribute("d",n._formatPath(s));else if(u==="startArrow"||u==="endArrow")if(s){var c=(0,h.isObject)(s)?t.addArrow(a,Gi[u]):t.getDefaultArrow(a,Gi[u]);o.setAttribute(Gi[u],"url(#"+c+")")}else o.removeAttribute(Gi[u]);else Gi[u]&&o.setAttribute(Gi[u],s)})},e.prototype._formatPath=function(t){var r=t.map(function(n){return n.join(" ")}).join("");return~r.indexOf("NaN")?"":r},e.prototype.getTotalLength=function(){var t=this.get("el");return t?t.getTotalLength():null},e.prototype.getPoint=function(t){var r=this.get("el"),n=this.getTotalLength();if(n===0)return null;var a=r?r.getPointAtLength(t*n):null;return a?{x:a.x,y:a.y}:null},e}(Fu),Xy=Yy,jy=function(i){(0,y.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="polygon",t.canFill=!0,t.canStroke=!0,t}return e.prototype.createPath=function(t,r){var n=this.attr(),a=this.get("el");(0,h.each)(r||n,function(o,s){s==="points"&&(0,h.isArray)(o)&&o.length>=2?a.setAttribute("points",o.map(function(u){return u[0]+","+u[1]}).join(" ")):Gi[s]&&a.setAttribute(Gi[s],o)})},e}(Fu),Vy=jy,Hy=function(i){(0,y.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="polyline",t.canFill=!0,t.canStroke=!0,t}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,y.__assign)((0,y.__assign)({},t),{startArrow:!1,endArrow:!1})},e.prototype.onAttrChange=function(t,r,n){i.prototype.onAttrChange.call(this,t,r,n),["points"].indexOf(t)!==-1&&this._resetCache()},e.prototype._resetCache=function(){this.set("totalLength",null),this.set("tCache",null)},e.prototype.createPath=function(t,r){var n=this.attr(),a=this.get("el");(0,h.each)(r||n,function(o,s){s==="points"&&(0,h.isArray)(o)&&o.length>=2?a.setAttribute("points",o.map(function(u){return u[0]+","+u[1]}).join(" ")):Gi[s]&&a.setAttribute(Gi[s],o)})},e.prototype.getTotalLength=function(){var t=this.attr().points,r=this.get("totalLength");return(0,h.isNil)(r)?(this.set("totalLength",zt.length(t)),this.get("totalLength")):r},e.prototype.getPoint=function(t){var r=this.attr().points,n=this.get("tCache");n||(this._setTcache(),n=this.get("tCache"));var a,o;return(0,h.each)(n,function(s,u){t>=s[0]&&t<=s[1]&&(a=(t-s[0])/(s[1]-s[0]),o=u)}),hs.pointAt(r[o][0],r[o][1],r[o+1][0],r[o+1][1],a)},e.prototype._setTcache=function(){var t=this.attr().points;if(!(!t||t.length===0)){var r=this.getTotalLength();if(!(r<=0)){var n=0,a=[],o,s;(0,h.each)(t,function(u,c){t[c+1]&&(o=[],o[0]=n/r,s=hs.length(u[0],u[1],t[c+1][0],t[c+1][1]),n+=s,o[1]=n/r,a.push(o))}),this.set("tCache",a)}}},e.prototype.getStartTangent=function(){var t=this.attr().points,r=[];return r.push([t[1][0],t[1][1]]),r.push([t[0][0],t[0][1]]),r},e.prototype.getEndTangent=function(){var t=this.attr().points,r=t.length-1,n=[];return n.push([t[r-1][0],t[r-1][1]]),n.push([t[r][0],t[r][1]]),n},e}(Fu),Zy=Hy,Ky=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/gi,$y=/[^\s,]+/gi;function qy(i){var e=0,t=0,r=0,n=0;return(0,h.isArray)(i)?i.length===1?e=t=r=n=i[0]:i.length===2?(e=r=i[0],t=n=i[1]):i.length===3?(e=i[0],t=n=i[1],r=i[2]):(e=i[0],t=i[1],r=i[2],n=i[3]):e=t=r=n=i,{r1:e,r2:t,r3:r,r4:n}}function kS(i){if(i=i||[],isArray(i))return i;if(isString(i))return i=i.match(Ky),each(i,function(e,t){if(e=e.match($y),e[0].length>1){var r=e[0].charAt(0);e.splice(1,0,e[0].substr(1)),e[0]=r}each(e,function(n,a){isNaN(n)||(e[a]=+n)}),i[t]=e}),i}var Qy=function(i){(0,y.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="rect",t.canFill=!0,t.canStroke=!0,t}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,y.__assign)((0,y.__assign)({},t),{x:0,y:0,width:0,height:0,radius:0})},e.prototype.createPath=function(t,r){var n=this,a=this.attr(),o=this.get("el"),s=!1,u=["x","y","width","height","radius"];(0,h.each)(r||a,function(c,f){u.indexOf(f)!==-1&&!s?(o.setAttribute("d",n._assembleRect(a)),s=!0):u.indexOf(f)===-1&&Gi[f]&&o.setAttribute(Gi[f],c)})},e.prototype._assembleRect=function(t){var r=t.x,n=t.y,a=t.width,o=t.height,s=t.radius;if(!s)return"M "+r+","+n+" l "+a+",0 l 0,"+o+" l"+-a+" 0 z";var u=qy(s);(0,h.isArray)(s)?s.length===1?u.r1=u.r2=u.r3=u.r4=s[0]:s.length===2?(u.r1=u.r3=s[0],u.r2=u.r4=s[1]):s.length===3?(u.r1=s[0],u.r2=u.r4=s[1],u.r3=s[2]):(u.r1=s[0],u.r2=s[1],u.r3=s[2],u.r4=s[3]):u.r1=u.r2=u.r3=u.r4=s;var c=[["M "+(r+u.r1)+","+n],["l "+(a-u.r1-u.r2)+",0"],["a "+u.r2+","+u.r2+",0,0,1,"+u.r2+","+u.r2],["l 0,"+(o-u.r2-u.r3)],["a "+u.r3+","+u.r3+",0,0,1,"+-u.r3+","+u.r3],["l "+(u.r3+u.r4-a)+",0"],["a "+u.r4+","+u.r4+",0,0,1,"+-u.r4+","+-u.r4],["l 0,"+(u.r4+u.r1-o)],["a "+u.r1+","+u.r1+",0,0,1,"+u.r1+","+-u.r1],["z"]];return c.join(" ")},e}(Fu),Jy=Qy,zp=.3,t1={top:"before-edge",middle:"central",bottom:"after-edge",alphabetic:"baseline",hanging:"hanging"},e1={top:"text-before-edge",middle:"central",bottom:"text-after-edge",alphabetic:"alphabetic",hanging:"hanging"},r1={left:"left",start:"left",center:"middle",right:"end",end:"end"},n1=function(i){(0,y.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="text",t.canFill=!0,t.canStroke=!0,t}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,y.__assign)((0,y.__assign)({},t),{x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"})},e.prototype.createPath=function(t,r){var n=this,a=this.attr(),o=this.get("el");this._setFont(),(0,h.each)(r||a,function(s,u){u==="text"?n._setText(""+s):u==="matrix"&&s?Md(n):Gi[u]&&o.setAttribute(Gi[u],s)}),o.setAttribute("paint-order","stroke"),o.setAttribute("style","stroke-linecap:butt; stroke-linejoin:miter;")},e.prototype._setFont=function(){var t=this.get("el"),r=this.attr(),n=r.textBaseline,a=r.textAlign,o=au();o&&o.name==="firefox"?t.setAttribute("dominant-baseline",e1[n]||"alphabetic"):t.setAttribute("alignment-baseline",t1[n]||"baseline"),t.setAttribute("text-anchor",r1[a]||"left")},e.prototype._setText=function(t){var r=this.get("el"),n=this.attr(),a=n.x,o=n.textBaseline,s=o===void 0?"bottom":o;if(!t)r.innerHTML="";else if(~t.indexOf(`
`)){var u=t.split(`
`),c=u.length-1,f="";(0,h.each)(u,function(l,_){_===0?s==="alphabetic"?f+='<tspan x="'+a+'" dy="'+-c+'em">'+l+"</tspan>":s==="top"?f+='<tspan x="'+a+'" dy="0.9em">'+l+"</tspan>":s==="middle"?f+='<tspan x="'+a+'" dy="'+-(c-1)/2+'em">'+l+"</tspan>":s==="bottom"?f+='<tspan x="'+a+'" dy="-'+(c+zp)+'em">'+l+"</tspan>":s==="hanging"&&(f+='<tspan x="'+a+'" dy="'+(-(c-1)-zp)+'em">'+l+"</tspan>"):f+='<tspan x="'+a+'" dy="1em">'+l+"</tspan>"}),r.innerHTML=f}else r.innerHTML=t},e}(Fu),a1=n1,i1=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,o1=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,s1=/[\d.]+:(#[^\s]+|[^)]+\))/gi;function Gp(i){var e=i.match(s1);if(!e)return"";var t="";return e.sort(function(r,n){return r=r.split(":"),n=n.split(":"),Number(r[0])-Number(n[0])}),(0,h.each)(e,function(r){r=r.split(":"),t+='<stop offset="'+r[0]+'" stop-color="'+r[1]+'"></stop>'}),t}function u1(i,e){var t=i1.exec(i),r=(0,h.mod)((0,h.toRadian)(parseFloat(t[1])),Math.PI*2),n=t[2],a,o;r>=0&&r<.5*Math.PI?(a={x:0,y:0},o={x:1,y:1}):.5*Math.PI<=r&&r<Math.PI?(a={x:1,y:0},o={x:0,y:1}):Math.PI<=r&&r<1.5*Math.PI?(a={x:1,y:1},o={x:0,y:0}):(a={x:0,y:1},o={x:1,y:0});var s=Math.tan(r),u=s*s,c=(o.x-a.x+s*(o.y-a.y))/(u+1)+a.x,f=s*(o.x-a.x+s*(o.y-a.y))/(u+1)+a.y;e.setAttribute("x1",a.x),e.setAttribute("y1",a.y),e.setAttribute("x2",c),e.setAttribute("y2",f),e.innerHTML=Gp(n)}function c1(i,e){var t=o1.exec(i),r=parseFloat(t[1]),n=parseFloat(t[2]),a=parseFloat(t[3]),o=t[4];e.setAttribute("cx",r),e.setAttribute("cy",n),e.setAttribute("r",a),e.innerHTML=Gp(o)}var f1=function(){function i(e){this.cfg={};var t=null,r=(0,h.uniqueId)("gradient_");return e.toLowerCase()[0]==="l"?(t=Bu("linearGradient"),u1(e,t)):(t=Bu("radialGradient"),c1(e,t)),t.setAttribute("id",r),this.el=t,this.id=r,this.cfg=e,this}return i.prototype.match=function(e,t){return this.cfg===t},i}(),l1=f1,d1={shadowColor:"color",shadowOpacity:"opacity",shadowBlur:"blur",shadowOffsetX:"dx",shadowOffsetY:"dy"},h1={x:"-40%",y:"-40%",width:"200%",height:"200%"},v1=function(){function i(e){this.type="filter",this.cfg={},this.type="filter";var t=Bu("filter");return(0,h.each)(h1,function(r,n){t.setAttribute(n,r)}),this.el=t,this.id=(0,h.uniqueId)("filter_"),this.el.id=this.id,this.cfg=e,this._parseShadow(e,t),this}return i.prototype.match=function(e,t){if(this.type!==e)return!1;var r=!0,n=this.cfg;return(0,h.each)(Object.keys(n),function(a){if(n[a]!==t[a])return r=!1,!1}),r},i.prototype.update=function(e,t){var r=this.cfg;return r[d1[e]]=t,this._parseShadow(r,this.el),this},i.prototype._parseShadow=function(e,t){var r=`<feDropShadow
      dx="`+(e.dx||0)+`"
      dy="`+(e.dy||0)+`"
      stdDeviation="`+(e.blur?e.blur/10:0)+`"
      flood-color="`+(e.color?e.color:"#000")+`"
      flood-opacity="`+(e.opacity?e.opacity:1)+`"
      />`;t.innerHTML=r},i}(),p1=v1,g1=function(){function i(e,t){this.cfg={};var r=Bu("marker"),n=(0,h.uniqueId)("marker_");r.setAttribute("id",n);var a=Bu("path");a.setAttribute("stroke",e.stroke||"none"),a.setAttribute("fill",e.fill||"none"),r.appendChild(a),r.setAttribute("overflow","visible"),r.setAttribute("orient","auto-start-reverse"),this.el=r,this.child=a,this.id=n;var o=e[t==="marker-start"?"startArrow":"endArrow"];return this.stroke=e.stroke||"#000",o===!0?this._setDefaultPath(t,a):(this.cfg=o,this._setMarker(e.lineWidth,a)),this}return i.prototype.match=function(){return!1},i.prototype._setDefaultPath=function(e,t){var r=this.el;t.setAttribute("d","M0,0 L"+10*Math.cos(Math.PI/6)+",5 L0,10"),r.setAttribute("refX",""+10*Math.cos(Math.PI/6)),r.setAttribute("refY","5")},i.prototype._setMarker=function(e,t){var r=this.el,n=this.cfg.path,a=this.cfg.d;(0,h.isArray)(n)&&(n=n.map(function(o){return o.join(" ")}).join("")),t.setAttribute("d",n),r.appendChild(t),a&&r.setAttribute("refX",""+a/e)},i.prototype.update=function(e){var t=this.child;t.attr?t.attr("fill",e):t.setAttribute("fill",e)},i}(),Up=g1,m1=function(){function i(e){this.type="clip",this.cfg={};var t=Bu("clipPath");this.el=t,this.id=(0,h.uniqueId)("clip_"),t.id=this.id;var r=e.cfg.el;return t.appendChild(r),this.cfg=e,this}return i.prototype.match=function(){return!1},i.prototype.remove=function(){var e=this.el;e.parentNode.removeChild(e)},i}(),y1=m1,x1=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,b1=function(){function i(e){this.cfg={};var t=Bu("pattern");t.setAttribute("patternUnits","userSpaceOnUse");var r=Bu("image");t.appendChild(r);var n=(0,h.uniqueId)("pattern_");t.id=n,this.el=t,this.id=n,this.cfg=e;var a=x1.exec(e),o=a[2];r.setAttribute("href",o);var s=new Image;o.match(/^data:/i)||(s.crossOrigin="Anonymous"),s.src=o;function u(){t.setAttribute("width",""+s.width),t.setAttribute("height",""+s.height)}return s.complete?u():(s.onload=u,s.src=s.src),this}return i.prototype.match=function(e,t){return this.cfg===t},i}(),E1=b1,w1=function(){function i(e){var t=Bu("defs"),r=(0,h.uniqueId)("defs_");t.id=r,e.appendChild(t),this.children=[],this.defaultArrow={},this.el=t,this.canvas=e}return i.prototype.find=function(e,t){for(var r=this.children,n=null,a=0;a<r.length;a++)if(r[a].match(e,t)){n=r[a].id;break}return n},i.prototype.findById=function(e){for(var t=this.children,r=null,n=0;n<t.length;n++)if(t[n].id===e){r=t[n];break}return r},i.prototype.add=function(e){this.children.push(e),e.canvas=this.canvas,e.parent=this},i.prototype.getDefaultArrow=function(e,t){var r=e.stroke||e.strokeStyle;if(this.defaultArrow[r])return this.defaultArrow[r].id;var n=new Up(e,t);return this.defaultArrow[r]=n,this.el.appendChild(n.el),this.add(n),n.id},i.prototype.addGradient=function(e){var t=new l1(e);return this.el.appendChild(t.el),this.add(t),t.id},i.prototype.addArrow=function(e,t){var r=new Up(e,t);return this.el.appendChild(r.el),this.add(r),r.id},i.prototype.addShadow=function(e){var t=new p1(e);return this.el.appendChild(t.el),this.add(t),t.id},i.prototype.addPattern=function(e){var t=new E1(e);return this.el.appendChild(t.el),this.add(t),t.id},i.prototype.addClip=function(e){var t=new y1(e);return this.el.appendChild(t.el),this.add(t),t.id},i}(),S1=w1,M1=function(i){(0,y.__extends)(e,i);function e(t){return i.call(this,(0,y.__assign)((0,y.__assign)({},t),{autoDraw:!0,renderer:"svg"}))||this}return e.prototype.getShapeBase=function(){return g},e.prototype.getGroupBase=function(){return Bp},e.prototype.getShape=function(t,r,n){var a=n.target||n.srcElement;if(!qh[a.tagName]){for(var o=a.parentNode;o&&!qh[o.tagName];)o=o.parentNode;a=o}return this.find(function(s){return s.get("el")===a})},e.prototype.createDom=function(){var t=Bu("svg"),r=new S1(t);return t.setAttribute("width",""+this.get("width")),t.setAttribute("height",""+this.get("height")),this.set("context",r),t},e.prototype.onCanvasChange=function(t){var r=this.get("context"),n=this.get("el");if(t==="sort"){var a=this.get("children");a&&a.length&&Np(this,function(s,u){return a.indexOf(s)-a.indexOf(u)?1:0})}else if(t==="clear"){if(n){n.innerHTML="";var o=r.el;o.innerHTML="",n.appendChild(o)}}else t==="matrix"?Md(this):t==="clip"?_d(this,r):t==="changeSize"&&(n.setAttribute("width",""+this.get("width")),n.setAttribute("height",""+this.get("height")))},e.prototype.draw=function(){var t=this.get("context"),r=this.getChildren();_d(this,t),r.length&&Rp(t,r)},e}(xl),Cd=M1,BS="0.5.6",_1=C(6767),Td=C.n(_1),nh=C(697234),ah=2,Wp=.16,C1=.05,T1=.05,A1=.15,Yp=5,Xp=4,I1=[{index:7,opacity:.15},{index:6,opacity:.25},{index:5,opacity:.3},{index:5,opacity:.45},{index:5,opacity:.65},{index:5,opacity:.85},{index:4,opacity:.9},{index:3,opacity:.95},{index:2,opacity:.97},{index:1,opacity:.98}];function jp(i,e,t){var r;return Math.round(i.h)>=60&&Math.round(i.h)<=240?r=t?Math.round(i.h)-ah*e:Math.round(i.h)+ah*e:r=t?Math.round(i.h)+ah*e:Math.round(i.h)-ah*e,r<0?r+=360:r>=360&&(r-=360),r}function Vp(i,e,t){if(i.h===0&&i.s===0)return i.s;var r;return t?r=i.s-Wp*e:e===Xp?r=i.s+Wp:r=i.s+C1*e,r>1&&(r=1),t&&e===Yp&&r>.1&&(r=.1),r<.06&&(r=.06),Number(r.toFixed(2))}function Hp(i,e,t){var r;return t?r=i.v+T1*e:r=i.v-A1*e,r>1&&(r=1),Number(r.toFixed(2))}function ih(i){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=[],r=(0,nh.Z)(i),n=Yp;n>0;n-=1){var a=r.toHsv(),o=(0,nh.Z)({h:jp(a,n,!0),s:Vp(a,n,!0),v:Hp(a,n,!0)}).toHexString();t.push(o)}t.push(r.toHexString());for(var s=1;s<=Xp;s+=1){var u=r.toHsv(),c=(0,nh.Z)({h:jp(u,s),s:Vp(u,s),v:Hp(u,s)}).toHexString();t.push(c)}return e.theme==="dark"?I1.map(function(f){var l=f.index,_=f.opacity,I=nh.Z.mix(e.backgroundColor||"#141414",t[l],_*100).toHexString();return I}):t}var Qh={red:"#F5222D",volcano:"#FA541C",orange:"#FA8C16",gold:"#FAAD14",yellow:"#FADB14",lime:"#A0D911",green:"#52C41A",cyan:"#13C2C2",blue:"#1890FF",geekblue:"#2F54EB",purple:"#722ED1",magenta:"#EB2F96",grey:"#666666"},$s={},Jh={};Object.keys(Qh).forEach(function(i){$s[i]=ih(Qh[i]),$s[i].primary=$s[i][5],Jh[i]=ih(Qh[i],{theme:"dark",backgroundColor:"#141414"}),Jh[i].primary=Jh[i][5]});var FS=$s.red,zS=$s.volcano,GS=$s.gold,US=$s.orange,WS=$s.yellow,YS=$s.lime,XS=$s.green,jS=$s.cyan,VS=$s.blue,HS=$s.geekblue,ZS=$s.purple,KS=$s.magenta,$S=$s.grey,Is=function(e,t,r){var n=Td()(e),a=Td()(t);return Td()([(1-r)*n.red()+r*a.red(),(1-r)*n.green()+r*a.green(),(1-r)*n.blue()+r*a.blue()]).rgb()},O1=function(e,t,r){t===void 0&&(t="#fff"),r===void 0&&(r="rgb(150, 150, 150)");var n=Is(t,e,.05).rgb().toString(),a=Is(t,e,.1).rgb().toString(),o=Is(t,e,.2).rgb().toString(),s=Is(t,e,.4).rgb().toString(),u=Is(t,r,.02).rgb().toString(),c=Is(t,r,.05).rgb().toString(),f=Is(t,r,.1).rgb().toString(),l=Is(t,r,.2).rgb().toString(),_=Is(t,r,.3).rgb().toString(),I=ih(e,{theme:"default",backgroundColor:t}),B=Td()(e).hex().toLowerCase(),j=I.indexOf(B),et=e;return j!==-1&&(et=I[j+1]),{mainStroke:e,mainFill:a,activeStroke:e,activeFill:n,inactiveStroke:s,inactiveFill:n,selectedStroke:e,selectedFill:t,highlightStroke:et,highlightFill:o,disableStroke:_,disableFill:c,edgeMainStroke:_,edgeActiveStroke:e,edgeInactiveStroke:l,edgeSelectedStroke:e,edgeHighlightStroke:e,edgeDisableStroke:f,comboMainStroke:_,comboMainFill:u,comboActiveStroke:e,comboActiveFill:n,comboInactiveStroke:_,comboInactiveFill:u,comboSelectedStroke:e,comboSelectedFill:u,comboHighlightStroke:et,comboHighlightFill:u,comboDisableStroke:l,comboDisableFill:c}},D1=function(e,t,r){t===void 0&&(t="#fff"),r===void 0&&(r="#777");var n=Is(t,e,.2).rgb().toString(),a=Is(t,e,.3).rgb().toString(),o=Is(t,e,.6).rgb().toString(),s=Is(t,e,.8).rgb().toString(),u=Is(t,r,.2).rgb().toString(),c=Is(t,r,.25).rgb().toString(),f=Is(t,r,.3).rgb().toString(),l=Is(t,r,.4).rgb().toString(),_=Is(t,r,.5).rgb().toString(),I=ih(e,{theme:"dark",backgroundColor:t}),B=Td()(e).hex().toLowerCase(),j=I.indexOf(B),et=e;return j!==-1&&(et=I[j+1]),{mainStroke:s,mainFill:n,activeStroke:e,activeFill:a,inactiveStroke:s,inactiveFill:n,selectedStroke:e,selectedFill:n,highlightStroke:e,highlightFill:o,disableStroke:_,disableFill:c,edgeMainStroke:r,edgeActiveStroke:e,edgeInactiveStroke:r,edgeSelectedStroke:e,edgeHighlightStroke:e,edgeDisableStroke:f,comboMainStroke:l,comboMainFill:c,comboActiveStroke:e,comboActiveFill:u,comboInactiveStroke:l,comboInactiveFill:c,comboSelectedStroke:e,comboSelectedFill:u,comboHighlightStroke:et,comboHighlightFill:c,comboDisableStroke:l,comboDisableFill:u}},tv=function(e,t,r,n){return t===void 0&&(t="#fff"),r===void 0&&(r="default"),n===void 0&&(n="rgb(150, 150, 150)"),r==="default"?O1(e,t,"rgb(150, 150, 150)"):D1(e,t,"#777")},L1=function(e,t,r,n){t===void 0&&(t="#fff"),r===void 0&&(r="default"),n===void 0&&(n="rgb(150, 150, 150)");var a=[];return e.forEach(function(o){a.push(tv(o,t,r,n))}),a},P1="rgb(95, 149, 255)",N1="rgb(255, 255, 255)",Zp="rgb(0, 0, 0)",Li=tv(P1,N1),_l={version:"0.8.15",rootContainerClassName:"root-container",nodeContainerClassName:"node-container",edgeContainerClassName:"edge-container",comboContainerClassName:"combo-container",delegateContainerClassName:"delegate-container",defaultLoopPosition:"top",nodeLabel:{style:{fill:"#000",fontSize:12,textAlign:"center",textBaseline:"middle"},offset:4},defaultNode:{type:"circle",style:{lineWidth:1,stroke:Li.mainStroke,fill:Li.mainFill},size:20,color:Li.mainStroke,linkPoints:{size:8,lineWidth:1,fill:Li.activeFill,stroke:Li.activeStroke}},nodeStateStyles:{active:{fill:Li.activeFill,stroke:Li.activeStroke,lineWidth:2,shadowColor:Li.mainStroke,shadowBlur:10},selected:{fill:Li.selectedFill,stroke:Li.selectedStroke,lineWidth:4,shadowColor:Li.selectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{fill:Li.highlightFill,stroke:Li.highlightStroke,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{fill:Li.inactiveFill,stroke:Li.inactiveStroke,lineWidth:1},disable:{fill:Li.disableFill,stroke:Li.disableStroke,lineWidth:1}},edgeLabel:{style:{fill:Zp,textAlign:"center",textBaseline:"middle",fontSize:12}},defaultEdge:{type:"line",size:1,style:{stroke:Li.edgeMainStroke,lineAppendWidth:2},color:Li.edgeMainStroke},edgeStateStyles:{active:{stroke:Li.edgeActiveStroke,lineWidth:1},selected:{stroke:Li.edgeSelectedStroke,lineWidth:2,shadowColor:Li.edgeSelectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:Li.edgeHighlightStroke,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{stroke:Li.edgeInactiveStroke,lineWidth:1},disable:{stroke:Li.edgeDisableStroke,lineWidth:1}},comboLabel:{style:{fill:Zp,textBaseline:"middle",fontSize:12},refY:10,refX:10},defaultCombo:{type:"circle",style:{fill:Li.comboMainFill,lineWidth:1,stroke:Li.comboMainStroke,r:5,width:20,height:10},size:[20,5],color:Li.comboMainStroke,padding:[25,20,15,20]},comboStateStyles:{active:{stroke:Li.comboActiveStroke,lineWidth:1,fill:Li.comboActiveFill},selected:{stroke:Li.comboSelectedStroke,lineWidth:2,fill:Li.comboSelectedFill,shadowColor:Li.comboSelectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:Li.comboHighlightStroke,lineWidth:2,fill:Li.comboHighlightFill,"text-shape":{fontWeight:500}},inactive:{stroke:Li.comboInactiveStroke,fill:Li.comboInactiveFill,lineWidth:1},disable:{stroke:Li.comboDisableStroke,fill:Li.comboDisableFill,lineWidth:1}},delegateStyle:{fill:"#F3F9FF",fillOpacity:.5,stroke:"#1890FF",strokeOpacity:.9,lineDash:[5,5]},textWaterMarkerConfig:{width:150,height:100,compatible:!1,text:{x:0,y:60,lineHeight:20,rotate:20,fontSize:14,fontFamily:"Microsoft YaHei",fill:"rgba(0, 0, 0, 0.1)",baseline:"Middle"}},imageWaterMarkerConfig:{width:150,height:130,compatible:!1,image:{x:0,y:0,width:30,height:20,rotate:0}},waterMarkerImage:"https://gw.alipayobjects.com/os/s/prod/antv/assets/image/logo-with-text-73b8a.svg"};function oh(i,e,t){if(i){if(typeof i.addEventListener=="function")return i.addEventListener(e,t,!1),{remove:function(){i.removeEventListener(e,t,!1)}};if(typeof i.attachEvent=="function")return i.attachEvent("on"+e,t),{remove:function(){i.detachEvent("on"+e,t)}}}}var R1=Xs.cloneEvent,k1=Xs.isViewportChanged,B1=function(i){(0,y.__extends)(e,i);function e(t){var r=i.call(this,t)||this;return r.extendEvents=[],r.dragging=!1,r.mousedown=!1,r.preItem=null,r.destroy(),r.graph=t,r.destroyed=!1,r.initEvents(),r}return e.prototype.initEvents=function(){var t=this,r=t.graph,n=t.extendEvents,a=n===void 0?[]:n,o=r.get("canvas"),s=o.get("el"),u=(0,h.wrapBehavior)(this,"onCanvasEvents"),c=(0,h.wrapBehavior)(this,"onExtendEvents"),f=(0,h.wrapBehavior)(this,"onWheelEvent");o.off("*").on("*",u),this.canvasHandler=u,a.push(oh(s,"wheel",f)),typeof window!="undefined"&&(a.push(oh(window,"keydown",c)),a.push(oh(window,"keyup",c)),a.push(oh(window,"focus",c))),this.resetHandler&&r.off("afterchangedata",this.resetHandler),this.resetHandler=(0,h.wrapBehavior)(this,"resetStatus"),r.on("afterchangedata",this.resetHandler)},e.getItemRoot=function(t){for(;t&&!t.get("item");)t=t.get("parent");return t},e.prototype.onCanvasEvents=function(t){var r=this,n=this.graph,a=n.get("canvas"),o=t.target,s=t.type;switch(s){case"drag":this.onCanvasEvents(Object.assign({},t,{type:"mousemove"}));break;case"dragend":this.onCanvasEvents(Object.assign({},t,{type:"mouseup"}));break;case"mousedown":this.mousedown=!0;break;case"dragend":case"mouseup":setTimeout(function(){return r.mousedown=!1});break;case"click":if(!this.mousedown)return;break;default:break}t.canvasX=t.x,t.canvasY=t.y;var u={x:t.canvasX,y:t.canvasY},c=n.get("group"),f=c.getMatrix();if(f||(f=[1,0,0,0,1,0,0,0,1]),k1(f)&&(u=n.getPointByClient(t.clientX,t.clientY)),t.x=u.x,t.y=u.y,t.currentTarget=n,o===a){(s==="mousemove"||s==="mouseleave")&&this.handleMouseMove(t,"canvas"),t.target=a,t.item=null,n.emit(s,t),n.emit("canvas:".concat(s),t);return}var l=e.getItemRoot(o);if(!l){n.emit(s,t);return}var _=l.get("item");if(!_.destroyed){var I=_.getType();if(t.target=o,t.item=_,t.canvasX===t.x&&t.canvasY===t.y){var B=n.getCanvasByPoint(t.x,t.y);t.canvasX=B.x,t.canvasY=B.y}t.name&&!t.name.includes(":")?(n.emit("".concat(I,":").concat(s),t),n.emit(s,t)):t.name&&n.emit(t.name,t),s==="dragstart"&&(this.dragging=!0),s==="dragend"&&(this.dragging=!1),s==="mousemove"&&this.handleMouseMove(t,I)}},e.prototype.onExtendEvents=function(t){this.graph.emit(t.type,t)},e.prototype.onWheelEvent=function(t){(0,h.isNil)(t.wheelDelta)&&(t.wheelDelta=-t.detail),this.graph.emit("wheel",t)},e.prototype.handleMouseMove=function(t,r){var n=this,a=n.graph,o=n.preItem,s=a.get("canvas"),u=t.target===s?null:t.item;t=R1(t),o&&o!==u&&!o.destroyed&&(t.item=o,this.emitCustomEvent(o.getType(),"mouseleave",t),this.dragging&&this.emitCustomEvent(o.getType(),"dragleave",t)),u&&o!==u&&(t.item=u,this.emitCustomEvent(r,"mouseenter",t),this.dragging&&this.emitCustomEvent(r,"dragenter",t)),this.preItem=u},e.prototype.emitCustomEvent=function(t,r,n){n.type=r,this.graph.emit("".concat(t,":").concat(r),n)},e.prototype.resetStatus=function(){this.mousedown=!1,this.dragging=!1,this.preItem=null},e.prototype.destroy=function(){var t=this,r=t.graph,n=t.canvasHandler,a=t.extendEvents,o=r.get("canvas");o.off("*",n),(0,h.each)(a,function(s){s.remove()}),this.resetStatus(),this.extendEvents.length=0,this.canvasHandler=null,this.resetHandler=null,this.destroyed=!0},e}(cp),F1=B1,Ci=C(483360),z1=C(981746),sh=C.n(z1),Kp=Xs.traverseTree,G1=function(e,t){var r;return e?(0,h.isNumber)(e)?r=function(a){return e}:r=e:r=function(a){return t||1},r},U1=function(e,t){var r=[],n=[],a={},o=0;for(o=0;o<e.length;o++){var s=e[o];a[s.id]=o,r.push(s.x),r.push(s.y),r.push(0),r.push(0),n.push([])}for(o=0;o<t.length;o++){var u=t[o];n[a[u.source]].push(a[u.target]),n[a[u.target]].push(a[u.source])}var c=0;for(o=0;o<e.length;o++){var f=r.length,l=n[o],_=l.length;r[o*4+2]=f,r[o*4+3]=l.length,c=Math.max(c,l.length);for(var I=0;I<_;++I){var B=l[I];r.push(+B)}}for(;r.length%4!==0;)r.push(0);return{array:new Float32Array(r),maxEdgePerVetex:c}},W1=function(e,t,r){var n=[],a=[],o={},s=0;for(s=0;s<e.length;s++){var u=e[s];o[u.id]=s,n.push(u.x),n.push(u.y),n.push(0),n.push(0),a.push([])}for(s=0;s<t.length;s++){var c=t[s];a[o[c.source]].push(o[c.target]),a[o[c.source]].push(r(c)),a[o[c.target]].push(o[c.source]),a[o[c.target]].push(r(c))}var f=0;for(s=0;s<e.length;s++){var l=n.length,_=a[s],I=_.length;n[s*4+2]=l,n[s*4+3]=I/2,f=Math.max(f,I/2);for(var B=0;B<I;++B){var j=_[B];n.push(+j)}}for(;n.length%4!==0;)n.push(0);return{array:new Float32Array(n),maxEdgePerVetex:f}},Y1=function(e,t,r,n){var a=[],o=[],s={},u=0;for(u=0;u<e.length;u++){var c=e[u];s[c.id]=u,a.push(c.x),a.push(c.y),a.push(0),a.push(0),o.push([])}for(u=0;u<t.length;u++){var f=t[u];o[s[f.source]].push(s[f.target]),o[s[f.source]].push(r(f)),o[s[f.source]].push(n(f)),o[s[f.source]].push(0),o[s[f.target]].push(s[f.source]),o[s[f.target]].push(r(f)),o[s[f.target]].push(n(f)),o[s[f.target]].push(0)}var l=0;for(u=0;u<e.length;u++){var _=a.length,I=o[u],B=I.length;a[u*4+2]=_+1048576*B/4,a[u*4+3]=0,l=Math.max(l,B/4);for(var j=0;j<B;++j){var et=I[j];a.push(+et)}}for(;a.length%4!==0;)a.push(0);return{array:new Float32Array(a),maxEdgePerVetex:l}},X1=function(e,t){var r=[],n=e.length,a={};return t.forEach(function(o){e.forEach(function(s,u){if(a[o[s]]===void 0&&(a[o[s]]=Object.keys(a).length),r.push(a[o[s]]),u===n-1)for(;r.length%4!==0;)r.push(0)})}),{array:new Float32Array(r),count:Object.keys(a).length}},j1=function(e){for(var t=[],r=e.length,n=e[0].length,a=function(u){e.forEach(function(c,f){if(t.push(c[u]),f===r-1)for(;t.length%4!==0;)t.push(0)})},o=0;o<n;o++)a(o);return new Float32Array(t)},V1=function(e,t){var r=["V","TB","BT"],n={x:1/0,y:1/0},a={x:-1/0,y:-1/0},o="x",s="y";t&&r.indexOf(t)>=0&&(s="x",o="y");var u=0;Kp(e,function(l){return u++,l.x>a.x&&(a.x=l.x),l.x<n.x&&(n.x=l.x),l.y>a.y&&(a.y=l.y),l.y<n.y&&(n.y=l.y),!0});var c=Math.PI*2/u,f=a[s]-n[s];return f===0||Kp(e,function(l){var _=(l[s]-n[s])/f*(Math.PI*2-c)+c,I=Math.abs(o==="x"?l.x-e.x:l.y-e.y);return l.x=I*Math.cos(_),l.y=I*Math.sin(_),!0}),e},$p=function i(){return typeof window=="undefined"||typeof document=="undefined"?{}:{canvas:!!window.CanvasRenderingContext2D,webgl:function(){try{var e=document.createElement("canvas");return!!(window.WebGLRenderingContext&&(e.getContext("webgl")||e.getContext("experimental-webgl")))}catch(t){return!1}}(),workers:!!window.Worker,fileapi:window.File&&window.FileReader&&window.FileList&&window.Blob,getWebGLErrorMessage:function(){var t=document.createElement("div");return t.id="webgl-error-message",t.style.fontFamily="monospace",t.style.fontSize="13px",t.style.fontWeight="normal",t.style.textAlign="center",t.style.background="#fff",t.style.color="#000",t.style.padding="1.5em",t.style.width="400px",t.style.margin="5em auto 0",this.webgl||(t.innerHTML=window.WebGLRenderingContext?['Your graphics card does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" rel="external nofollow" rel="external nofollow" style="color:#000">WebGL</a>.<br />','Find out how to get it <a href="http://get.webgl.org/" rel="external nofollow" rel="external nofollow" style="color:#000">here</a>.'].join(`
`):['Your browser does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" rel="external nofollow" rel="external nofollow" style="color:#000">WebGL</a>.<br/>','Find out how to get it <a href="http://get.webgl.org/" rel="external nofollow" rel="external nofollow" style="color:#000">here</a>.'].join(`
`)),t},addGetWebGLMessage:function(t){t=t||{};var r=t.parent!==void 0?t.parent:document.body,n=t.id!==void 0?t.id:"oldie",a=i().getWebGLErrorMessage();a.id=n,r.appendChild(a)}}},H1=(0,y.__assign)((0,y.__assign)((0,y.__assign)((0,y.__assign)({},Xs),A),E),D),lf=H1,Z1=lf.radialLayout,K1=function(){function i(e){this.type=e.type,this.radial=e.radial,this.config=e}return i.prototype.init=function(e){var t=this;if(this.data=e,this.radial){this.layoutMethod=function(r){var n=sh()[t.type](r,t.config);return Z1(n),n};return}this.layoutMethod=function(r){return sh()[t.type](r,t.config)}},i.prototype.execute=function(){return this.layoutMethod(this.data,this.config)},i.prototype.layout=function(e){return this.init(e),this.execute()},i}(),$1=K1;(0,Ci.registerLayout)("grid",Ci.GridLayout),(0,Ci.registerLayout)("random",Ci.RandomLayout),(0,Ci.registerLayout)("force",Ci.ForceLayout),(0,Ci.registerLayout)("circular",Ci.CircularLayout),(0,Ci.registerLayout)("dagre",Ci.DagreLayout),(0,Ci.registerLayout)("dagreCompound",Ci.DagreCompoundLayout),(0,Ci.registerLayout)("radial",Ci.RadialLayout),(0,Ci.registerLayout)("concentric",Ci.ConcentricLayout),(0,Ci.registerLayout)("mds",Ci.MDSLayout),(0,Ci.registerLayout)("fruchterman",Ci.FruchtermanLayout),(0,Ci.registerLayout)("fruchterman-gpu",Ci.FruchtermanGPULayout),(0,Ci.registerLayout)("gForce",Ci.GForceLayout),(0,Ci.registerLayout)("force2",Ci.Force2Layout),(0,Ci.registerLayout)("gForce-gpu",Ci.GForceGPULayout),(0,Ci.registerLayout)("comboForce",Ci.ComboForceLayout),(0,Ci.registerLayout)("comboCombined",Ci.ComboCombinedLayout),(0,Ci.registerLayout)("forceAtlas2",Ci.ForceAtlas2Layout);var q1=function(e,t){t.isCustomLayout=!0,Ci.Layouts[e]=(0,Ci.registerLayout)(e,t)},Q1=function(){function i(e,t){var r=e.toString(),n=new Blob(["importScripts('".concat(t,"');(").concat(r,")()")],{type:"text/javascript"});return new Worker(URL.createObjectURL(n))}return i}(),J1=Q1,tx=function(e){e===void 0&&(e="https://unpkg.com/@antv/layout@0.3.22/dist/layout.min.js");function t(){var n={RUN:"LAYOUT_RUN",END:"LAYOUT_END",ERROR:"LAYOUT_ERROR",TICK:"LAYOUT_TICK",GPURUN:"GPU_LAYOUT_RUN",GPUEND:"GPU_LAYOUT_END"};layout.registerLayout("grid",layout.GridLayout),layout.registerLayout("random",layout.RandomLayout),layout.registerLayout("force",layout.ForceLayout),layout.registerLayout("force2",layout.Force2Layout),layout.registerLayout("circular",layout.CircularLayout),layout.registerLayout("dagre",layout.DagreLayout),layout.registerLayout("dagreCompound",layout.DagreCompoundLayout),layout.registerLayout("radial",layout.RadialLayout),layout.registerLayout("concentric",layout.ConcentricLayout),layout.registerLayout("mds",layout.MDSLayout),layout.registerLayout("fruchterman",layout.FruchtermanLayout),layout.registerLayout("fruchterman-gpu",layout.FruchtermanGPULayout),layout.registerLayout("gForce",layout.GForceLayout),layout.registerLayout("gForce-gpu",layout.GForceGPULayout),layout.registerLayout("comboForce",layout.ComboForceLayout),layout.registerLayout("comboCombined",layout.ComboCombinedLayout),layout.registerLayout("forceAtlas2",layout.ForceAtlas2Layout);function a(s){var u=s.data.type;return u===n.RUN||u===n.GPURUN}function o(s){var u=this,c=s.data.type;switch(c){case n.RUN:{var f=s.data,l=f.nodes,_=f.edges,I=f.layoutCfg,B=I===void 0?{}:I,j=B.type,et=layout.getLayoutByName(j);if(!et){this.postMessage({type:n.ERROR,message:"layout ".concat(j," not found")});break}var ut;B.onLayoutEnd=function(){u.postMessage({type:n.END,nodes:l}),ut==null||ut.destroy()},ut=new et(B),ut.init({nodes:l,edges:_}),ut.execute();break}case n.GPURUN:{var ft=s.data,gt=ft.nodes,_=ft.edges,Mt=ft.layoutCfg,B=Mt===void 0?{}:Mt,Ht=ft.canvas,j=B.type,et=layout.getLayoutByName(j);if(!et){this.postMessage({type:n.ERROR,message:"layout ".concat(j," not found")});break}if(j.split("-")[1]!=="gpu"){this.postMessage({type:n.ERROR,message:"layout ".concat(j," does not support GPU")});break}var se=new et(B);se.init({nodes:gt,edges:_}),se.executeWithWorker(Ht,this);break}default:break}}onmessage=function(u){a(u)&&o(u)}}var r=new J1(t,e);return r},sd={RUN:"LAYOUT_RUN",END:"LAYOUT_END",ERROR:"LAYOUT_ERROR",TICK:"LAYOUT_TICK",GPURUN:"GPU_LAYOUT_RUN",GPUEND:"GPU_LAYOUT_END"};function ev(i){"@babel/helpers - typeof";return ev=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ev(i)}var qp=function(e){return setTimeout(e,16)},Qp=function(e){return clearTimeout(e)},uh={requestAnimationFrame:function(e){var t=typeof window!="undefined"&&(window.requestAnimationFrame||window.webkitRequestAnimationFrame)||qp;return t(e)},cancelAnimationFrame:function(e){var t=typeof window!="undefined"&&(window.cancelAnimationFrame||window.webkitCancelAnimationFrame)||Qp;return t(e)}},ex=["fruchterman","gForce"],rx=["force","grid","circular"],nx=function(i){(0,y.__extends)(e,i);function e(t){var r=i.call(this,t)||this;return r.graph=t,r.layoutCfg=t.get("layout")||{},r.layoutType=r.getLayoutType(),r.worker=null,r.workerData={},r.initLayout(),r}return e.prototype.initLayout=function(){},e.prototype.getWorker=function(){return this.worker?this.worker:(typeof Worker=="undefined"?(console.warn("Web worker is not supported in current browser."),this.worker=null):this.worker=tx(this.layoutCfg.workerScriptURL),this.worker)},e.prototype.stopWorker=function(){var t=this.workerData;this.worker&&(this.worker.terminate(),this.worker=null,t.requestId&&(uh.cancelAnimationFrame(t.requestId),t.requestId=null),t.requestId2&&(uh.cancelAnimationFrame(t.requestId2),t.requestId2=null))},e.prototype.execLayoutMethod=function(t,r){var n=this;return new Promise(function(a,o){return(0,y.__awaiter)(n,void 0,void 0,function(){var s,u,c,f,l,j,_,I,B,j,et;return(0,y.__generator)(this,function(ut){switch(ut.label){case 0:if(s=this.graph,!s||s.get("destroyed"))return[2];u=t.type,t.onLayoutEnd=function(){s.emit("aftersublayout",{type:u}),a()},u&&this.isGPU&&(Jp(u)?u="".concat(u,"-gpu"):console.warn("The '".concat(u,"' layout does not support GPU calculation for now, it will run in CPU."))),Xs.isForce(u)?(c=t.onTick,f=t.animate,l=f===void 0&&(u==="force"||u==="force2"),j=function(){c&&c(),(f||l)&&s.refreshPositions()},t.tick=j):(u==="comboForce"||u==="comboCombined")&&(t.comboTrees=s.get("comboTrees")),_=!1;try{I=new Ci.Layouts[u](t),this.layoutMethods[r]&&this.layoutMethods[r].destroy(),this.layoutMethods[r]=I}catch(ft){console.warn("The layout method: '".concat(u,"' does not exist! Please specify it first.")),o()}return _=I.enableTick,_&&(B=t.onTick,j=function(){B&&B(),s.refreshPositions()},I.tick=j),et=this.filterLayoutData(this.data,t),sx(et,r),I.init(et),s.emit("beforesublayout",{type:u}),[4,I.execute()];case 1:return ut.sent(),I.isCustomLayout&&t.onLayoutEnd&&t.onLayoutEnd(),[2]}})})})},e.prototype.updateLayoutMethod=function(t,r){var n=this;return new Promise(function(a,o){return(0,y.__awaiter)(n,void 0,void 0,function(){var s,u,c,f,l,_,I;return(0,y.__generator)(this,function(B){switch(B.label){case 0:return s=this.graph,u=r==null?void 0:r.type,r.onLayoutEnd=function(){s.emit("aftersublayout",{type:u}),a()},Xs.isForce(u)&&(c=r.onTick,f=r.animate,l=f===void 0&&(u==="force"||u==="force2"),_=function(){c==null||c(),(f||l)&&s.refreshPositions()},r.tick=_),I=this.filterLayoutData(this.data,r),t.init(I),t.updateCfg(r),s.emit("beforesublayout",{type:u}),[4,t.execute()];case 1:return B.sent(),t.isCustomLayout&&r.onLayoutEnd&&r.onLayoutEnd(),[2]}})})})},e.prototype.layout=function(t){var r=this,n,a=this.graph;if(!(!a||a.get("destroyed"))){this.data=this.setDataFromGraph();var o=this.data,s=o.nodes,u=o.hiddenNodes;if(!s)return!1;var c=a.get("width"),f=a.get("height"),l={};Object.assign(l,{width:c,height:f,center:[c/2,f/2]},this.layoutCfg),this.layoutCfg=l;var _=l.type,I=!1;(n=this.layoutMethods)===null||n===void 0||n.forEach(function(Ht){var se;return I=!!(!((se=Ht.nodes)===null||se===void 0)&&se.length)||I});var B=this.destoryLayoutMethods();a.emit("beforelayout");var j=Promise.resolve();I&&_&&(B==null?void 0:B.length)===1&&B[0]===_?this.tweakInit():j=this.initPositions(l.center,s);var et=this.initPositions(l.center,u);et.then(),this.isGPU=tg(l,_);var ut=l.onLayoutEnd,ft=l.layoutEndFormatted,gt=l.adjust;if(ft||(l.layoutEndFormatted=!0,l.onAllLayoutEnd=function(){return(0,y.__awaiter)(r,void 0,void 0,function(){return(0,y.__generator)(this,function(Ht){switch(Ht.label){case 0:return ut&&ut(s),this.refreshLayout(),gt&&l.pipes?[4,this.adjustPipesBox(this.data,gt)]:[3,2];case 1:Ht.sent(),this.refreshLayout(),Ht.label=2;case 2:return a.emit("afterlayout"),[2]}})})}),this.stopWorker(),l.workerEnabled&&this.layoutWithWorker(this.data,t))return!0;var Mt=!1;return l.type?(Mt=!0,j=j.then(function(){return(0,y.__awaiter)(r,void 0,void 0,function(){return(0,y.__generator)(this,function(Ht){switch(Ht.label){case 0:return[4,this.execLayoutMethod(l,0)];case 1:return[2,Ht.sent()]}})})})):l.pipes&&(Mt=!0,l.pipes.forEach(function(Ht,se){j=j.then(function(){return(0,y.__awaiter)(r,void 0,void 0,function(){return(0,y.__generator)(this,function(oe){switch(oe.label){case 0:return[4,this.execLayoutMethod(Ht,se)];case 1:return[2,oe.sent()]}})})})})),Mt?j.then(function(){l.onAllLayoutEnd&&l.onAllLayoutEnd(),t&&t()}).catch(function(Ht){console.warn("graph layout failed,",Ht)}):(a.refreshPositions(),t==null||t()),!1}},e.prototype.tweakInit=function(){var t=this,r=t.data,n=t.graph,a=r.nodes,o=r.edges;if(a!=null&&a.length){var s={};a.forEach(function(f){var l=f.x,_=f.y;!isNaN(l)&&!isNaN(_)&&(s[f.id]={x:l,y:_},f.mass=f.mass||2)}),o.forEach(function(f){var l=f.source,_=f.target,I=s[l],B=s[_];!I&&B?s[l]={x:B.x+(Math.random()-.5)*80,y:B.y+(Math.random()-.5)*80}:!B&&I&&(s[_]={x:I.x+(Math.random()-.5)*80,y:I.y+(Math.random()-.5)*80})});var u=n.get("width"),c=n.get("height");a.forEach(function(f){var l=s[f.id]||{x:u/2+(Math.random()-.5)*20,y:c/2+(Math.random()-.5)*20};f.x=l.x,f.y=l.y})}},e.prototype.initWithPreset=function(t,r){var n=this;return new Promise(function(a,o){return(0,y.__awaiter)(n,void 0,void 0,function(){var s,u,c,f,l,_,I;return(0,y.__generator)(this,function(B){switch(B.label){case 0:return s=this,u=s.layoutCfg,c=s.data,f=u.preset,!(f!=null&&f.type)||!Ci.Layouts[f==null?void 0:f.type]?(r==null||r(),a(),[2,!1]):(l=tg(f,f.type),_=l?"".concat(f.type,"-gpu"):f.type,I=new Ci.Layouts[_](f),delete u.preset,I.init(c),[4,I.execute()]);case 1:return B.sent(),t==null||t(),a(),[2,!0]}})})})},e.prototype.layoutWithWorker=function(t,r){var n=this,a=this,o=a.layoutCfg,s=a.graph,u=this.getWorker(),c=this.workerData;if(!u)return!1;c.requestId=null,c.requestId2=null,c.currentTick=null,c.currentTickData=null,s.emit("beforelayout");var f=Promise.resolve(),l=!1;if(o.type)l=!0,f=f.then(function(){return n.runWebworker(u,t,o)});else if(o.pipes){l=!0;for(var _=function(ut){f=f.then(function(){return n.runWebworker(u,t,ut)})},I=0,B=o.pipes;I<B.length;I++){var j=B[I];_(j)}}return l&&f.then(function(){o.onAllLayoutEnd&&o.onAllLayoutEnd(),r==null||r()}).catch(function(et){console.error("layout failed",et)}),!0},e.prototype.runWebworker=function(t,r,n){var a=this,o=this.isGPU,s=this.filterLayoutData(r,n),u=s.nodes,c=s.edges,f=document.createElement("canvas"),l=o&&typeof window!="undefined"&&window.navigator&&!navigator.gpu&&"OffscreenCanvas"in window&&"transferControlToOffscreen"in f,_=ix(n,function(B){return typeof B!="function"});if(!l)t.postMessage({type:sd.RUN,nodes:u,edges:c,layoutCfg:_});else{var I=f.transferControlToOffscreen();_.type="".concat(_.type,"-gpu"),t.postMessage({type:sd.GPURUN,nodes:u,edges:c,layoutCfg:_,canvas:I},[I])}return new Promise(function(B,j){t.onmessage=function(et){a.handleWorkerMessage(B,j,et,s,n)}})},e.prototype.handleWorkerMessage=function(t,r,n,a,o){var s=this,u=s.graph,c=s.workerData,f=n.data,l=f.type,_=function(){o.onTick&&o.onTick()};switch(l){case sd.TICK:c.currentTick=f.currentTick,c.currentTickData=f,c.requestId||(c.requestId=uh.requestAnimationFrame(function(){rv(a,f),u.refreshPositions(),_(),f.currentTick===f.totalTicks?t():c.currentTick===f.totalTicks&&(c.requestId2=uh.requestAnimationFrame(function(){rv(a,c.currentTickData),u.refreshPositions(),c.requestId2=null,_(),t()})),c.requestId=null}));break;case sd.END:c.currentTick==null&&(rv(a,f),t());break;case sd.GPUEND:c.currentTick==null&&(ox(a,f),t());break;case sd.ERROR:console.warn("Web-Worker layout error!",f.message),r();break;default:r();break}},e.prototype.updateLayoutCfg=function(t){var r=this,n=this,a=n.graph,o=n.layoutMethods;if(!(!a||a.get("destroyed"))){var s=t.disableTriggerLayout,u=(0,y.__rest)(t,["disableTriggerLayout"]),c=(0,h.mix)({},this.layoutCfg,u);if(this.layoutCfg=c,!s){if(!(o!=null&&o.length)){this.layout();return}if(this.data=this.setDataFromGraph(),this.stopWorker(),!(u.workerEnabled&&this.layoutWithWorker(this.data,null))){a.emit("beforelayout");var f=Promise.resolve(),l=!1;(o==null?void 0:o.length)===1?(l=!0,f=f.then(function(){return(0,y.__awaiter)(r,void 0,void 0,function(){return(0,y.__generator)(this,function(_){switch(_.label){case 0:return[4,this.updateLayoutMethod(o[0],c)];case 1:return[2,_.sent()]}})})})):o!=null&&o.length&&(l=!0,o.forEach(function(_,I){var B=c.pipes[I];f=f.then(function(){return(0,y.__awaiter)(r,void 0,void 0,function(){return(0,y.__generator)(this,function(j){switch(j.label){case 0:return[4,this.updateLayoutMethod(_,B)];case 1:return[2,j.sent()]}})})})})),l&&f.then(function(){c.onAllLayoutEnd&&c.onAllLayoutEnd()}).catch(function(_){console.warn("layout failed",_)})}}}},e.prototype.adjustPipesBox=function(t,r){var n=this;return new Promise(function(a){var o=t.nodes;o!=null&&o.length||a(),rx.includes(r)||(console.warn("The adjust type ".concat(r," is not supported yet, please assign it with 'force', 'grid', or 'circular'.")),a());var s={center:n.layoutCfg.center,nodeSize:function(B){return Math.max(B.height,B.width)},preventOverlap:!0,onLayoutEnd:function(){}},u=n.getLayoutBBox(o),c=u.groupNodes,f=u.layoutNodes,l=(0,h.clone)(f);s.onLayoutEnd=function(){f==null||f.forEach(function(I,B){var j,et,ut,ft=I.x-((j=l[B])===null||j===void 0?void 0:j.x),gt=I.y-((et=l[B])===null||et===void 0?void 0:et.y);(ut=c[B])===null||ut===void 0||ut.forEach(function(Mt){Mt.x+=ft,Mt.y+=gt})}),a()};var _=new Ci.Layouts[r](s);_.layout({nodes:f})})},e.prototype.destroy=function(){this.destoryLayoutMethods();var t=this.worker;t&&(t.terminate(),this.worker=null),this.destroyed=!0,this.graph.set("layout",void 0),this.layoutCfg=void 0,this.layoutType=void 0,this.layoutMethods=void 0,this.graph=null},e}(up),ax=nx;function rv(i,e){for(var t=i.nodes,r=e.nodes,n=t.length,a=0;a<n;a++){var o=t[a];o.x=r[a].x,o.y=r[a].y}}function ix(i,e){var t={};return i&&ev(i)==="object"?(Object.keys(i).forEach(function(r){i.hasOwnProperty(r)&&e(i[r])&&(t[r]=i[r])}),t):i}function ox(i,e){for(var t=i.nodes,r=e.vertexEdgeData,n=t.length,a=0;a<n;a++){var o=t[a],s=r[4*a],u=r[4*a+1];o.x=s,o.y=u}}function sx(i,e){var t;if(!((t=i==null?void 0:i.nodes)===null||t===void 0)&&t.length){var r=i.nodes;r.forEach(function(n){n.layoutOrder=e})}}function Jp(i){return ex.includes(i)}function tg(i,e){var t=e;e&&e.split("-")[1]==="gpu"&&(t=e.split("-")[0],i.gpuEnabled=!0);var r=!1;return i.gpuEnabled&&(r=!0,$p().webgl||(console.warn("Your browser does not support webGL or GPGPU. The layout will run in CPU."),r=!1)),r&&!Jp(t)&&(console.warn("The '".concat(t,"' layout does not support GPU calculation for now, it will run in CPU.")),r=!1),r}var Ad,nv,eg,av;function ux(){Ad=document.createElement("table"),nv=document.createElement("tr"),eg=/^\s*<(\w+|!)[^>]*>/,av={tr:document.createElement("tbody"),tbody:Ad,thead:Ad,tfoot:Ad,td:nv,th:nv,"*":document.createElement("div")}}function Ko(i){Ad||ux();var e=eg.test(i)&&RegExp.$1;(!e||!(e in av))&&(e="*");var t=av[e];i=typeof i=="string"?i.replace(/(^\s*)|(\s*$)/g,""):i,t.innerHTML=""+i;var r=t.childNodes[0];return r&&t.contains(r)&&t.removeChild(r),r}var cx=function(e){var t=e.clone();return fx(e,t),t},fx=function i(e,t){var r;e.isGroup()&&t.isGroup()&&((r=e.get("children"))===null||r===void 0||r.forEach(function(s,u){var c=t.get("children")[u];i(s,c)}));var n=e.get("type"),a=t.get("type");if(!(n!=="image"||a!=="image")){var o=e.get("clipShape");o&&t.setClip({type:o.get("type"),attrs:o.attr()})}},rg=pt,lx="svg",dx=function(i){(0,y.__extends)(e,i);function e(t){var r=i.call(this,t)||this,n=r.get("defaultNode");return n||r.set("defaultNode",{type:"circle"}),n.type||(n.type="circle",r.set("defaultNode",n)),r.destroyed=!1,r}return e.prototype.initLayoutController=function(){var t=new ax(this);this.set({layoutController:t})},e.prototype.initEventController=function(){var t=new F1(this);this.set({eventController:t})},e.prototype.initCanvas=function(){var t=this.get("container");if(typeof t=="string"&&(t=document.getElementById(t),this.set("container",t)),!t)throw new Error("invalid container");var r=t.clientWidth,n=t.clientHeight,a=this.get("width")||r,o=this.get("height")||n;!this.get("width")&&!this.get("height")&&(this.set("width",r),this.set("height",n));var s=this.get("renderer"),u;if(s===lx)u=new Cd({container:t,width:a,height:o});else{var c={container:t,width:a,height:o},f=this.get("pixelRatio");f&&(c.pixelRatio=f,window.devicePixelRatio=f),u=new ff(c)}this.set("canvas",u)},e.prototype.initPlugins=function(){var t=this;(0,h.each)(t.get("plugins"),function(r){!r.destroyed&&r.initPlugin&&r.initPlugin(t)})},e.prototype.downloadImageWatermark=function(t,r,n,a){return(0,y.__awaiter)(this,void 0,void 0,function(){var o,s,u;return(0,y.__generator)(this,function(c){switch(c.label){case 0:return o=t.style.backgroundImage,s=o.slice(5,o.length-2),u=new Image,u.src=s,[4,new Promise(function(f){u.onload=function(){var l=r.createPattern(u,"repeat");r.rect(0,0,n,a),r.fillStyle=l,r.fill(),f("")}})];case 1:return c.sent(),[2]}})})},e.prototype.asyncToDataUrl=function(t,r,n,a,o,s){var u=this,c=document.querySelector(".g6-graph-watermarker"),f=this.get("canvas"),l=f.getRenderer(),_=s||f.get("el"),I="";t||(t="image/png"),setTimeout(function(){return(0,y.__awaiter)(u,void 0,void 0,function(){var B,j,et,ut,ft,gt,Mt,Ht,se,oe;return(0,y.__generator)(this,function(_e){switch(_e.label){case 0:return l!=="svg"?[3,1]:(B=_.cloneNode(!0),j=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),et=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",j),et.replaceChild(B,et.documentElement),ut=new XMLSerializer().serializeToString(et),I="data:image/svg+xml;charset=utf8,".concat(encodeURIComponent(ut)),[3,4]);case 1:return ft=void 0,gt=_.getContext("2d"),Mt=a||this.get("width"),Ht=o||this.get("height"),se=void 0,c?[4,this.downloadImageWatermark(c,gt,Mt,Ht)]:[3,3];case 2:_e.sent(),_e.label=3;case 3:if(r){oe=typeof window!="undefined"?window.devicePixelRatio:1;try{ft=gt.getImageData(0,0,Mt*oe,Ht*oe),se=gt.globalCompositeOperation,gt.globalCompositeOperation="destination-over",gt.fillStyle=r,gt.fillRect(0,0,Mt,Ht)}catch(Ue){console.error("Download image failed. Out of memory at ImageData creation")}}I=_.toDataURL(t),r&&(gt.clearRect(0,0,Mt,Ht),gt.putImageData(ft,0,0),gt.globalCompositeOperation=se),_e.label=4;case 4:return n&&n(I),[2]}})})},16)},e.prototype.toDataURL=function(t,r){var n=this.get("canvas"),a=n.getRenderer(),o=n.get("el");t||(t="image/png");var s="";if(a==="svg"){var u=o.cloneNode(!0),c=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),f=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",c);f.replaceChild(u,f.documentElement);var l=new XMLSerializer().serializeToString(f);s="data:image/svg+xml;charset=utf8,".concat(encodeURIComponent(l))}else{var _=void 0,I=o.getContext("2d"),B=Math.max(this.get("width"),500),j=Math.max(this.get("height"),500),et=void 0;if(r){var ut=typeof window!="undefined"&&window.devicePixelRatio||1;try{_=I.getImageData(0,0,B*ut,j*ut),et=I.globalCompositeOperation,I.globalCompositeOperation="destination-over",I.fillStyle=r,I.fillRect(0,0,B,j)}catch(ft){console.error("Download image failed. Out of memory at ImageData creation")}}s=o.toDataURL(t),r&&(I.clearRect(0,0,B,j),I.putImageData(_,0,0),I.globalCompositeOperation=et)}return s},e.prototype.toFullDataURL=function(t,r,n){var a=this.get("group").getCanvasBBox(),o=a.height,s=a.width,u=this.get("renderer"),c=Ko('<div id="virtual-image"></div>'),f=n?n.backgroundColor:void 0,l=n?n.padding:void 0;l?(0,h.isNumber)(l)&&(l=[l,l,l,l]):l=[0,0,0,0];var _=o+l[0]+l[2],I=s+l[1]+l[3],B={container:c,height:_,width:I,quickHit:!0},j=u==="svg"?new Cd(B):new ff(B),et=this.get("group"),ut=et.clone(),ft=(0,h.clone)(ut.getMatrix());ft||(ft=[1,0,0,0,1,0,0,0,1]);var gt=(a.maxX+a.minX)/2,Mt=(a.maxY+a.minY)/2;ft=rg(ft,[["t",-gt,-Mt],["t",s/2+l[3],o/2+l[0]]]),ut.resetMatrix(),ut.setMatrix(ft),j.add(ut);var Ht=j.get("el"),se="";r||(r="image/png"),setTimeout(function(){if(u==="svg"){var oe=Ht.cloneNode(!0),_e=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),Ue=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",_e);Ue.replaceChild(oe,Ue.documentElement);var Ne=new XMLSerializer().serializeToString(Ue);se="data:image/svg+xml;charset=utf8,".concat(encodeURIComponent(Ne))}else{var Qe=void 0,dr=Ht.getContext("2d"),nn=void 0;if(f){var kn=typeof window!="undefined"?window.devicePixelRatio:1;try{Qe=dr.getImageData(0,0,I*kn,_*kn),nn=dr.globalCompositeOperation,dr.globalCompositeOperation="destination-over",dr.fillStyle=f,dr.fillRect(0,0,I,_)}catch(En){console.error("Download image failed. Out of memory at ImageData creation")}}se=Ht.toDataURL(r),f&&(dr.clearRect(0,0,I,_),dr.putImageData(Qe,0,0),dr.globalCompositeOperation=nn)}t&&t(se)},16)},e.prototype.downloadFullImage=function(t,r,n){var a=this,o=this.get("group").getCanvasBBox(),s=o.height,u=o.width,c=this.get("renderer"),f=Ko('<div id="virtual-image"></div>'),l=document.querySelector(".g6-graph-watermarker"),_=n?n.backgroundColor:void 0,I=n?n.padding:void 0;I?(0,h.isNumber)(I)&&(I=[I,I,I,I]):I=[0,0,0,0];var B=s+I[0]+I[2],j=u+I[1]+I[3];if(l){var et=this.get("graphWaterMarker").cfg||{},ut=et.width,ft=et.height;B=Math.ceil(B/ft)*ft,j=Math.ceil(j/ut)*ut}var gt={container:f,height:B,width:j},Mt=c==="svg"?new Cd(gt):new ff(gt),Ht=this.get("group"),se=cx(Ht),oe=(0,h.clone)(se.getMatrix());oe||(oe=[1,0,0,0,1,0,0,0,1]);var _e=(o.maxX+o.minX)/2,Ue=(o.maxY+o.minY)/2;oe=rg(oe,[["t",-_e,-Ue],["t",u/2+I[3],s/2+I[0]]]),se.resetMatrix(),se.setMatrix(oe),Mt.add(se);var Ne=Mt.get("el");r||(r="image/png"),this.asyncToDataUrl(r,_,function(Qe){var dr=document.createElement("a"),nn=(t||"graph")+(c==="svg"?".svg":".".concat(r.split("/")[1]));a.dataURLToImage(Qe,c,dr,nn);var kn=document.createEvent("MouseEvents");kn.initEvent("click",!1,!1),dr.dispatchEvent(kn)},j,B,Ne)},e.prototype.downloadImage=function(t,r,n){var a=this,o=this;o.stopAnimate();var s=o.get("canvas"),u=s.getRenderer();r||(r="image/png");var c=(t||"graph")+(u==="svg"?".svg":r.split("/")[1]),f=document.createElement("a");o.asyncToDataUrl(r,n,function(l){a.dataURLToImage(l,u,f,c);var _=document.createEvent("MouseEvents");_.initEvent("click",!1,!1),f.dispatchEvent(_)})},e.prototype.dataURLToImage=function(t,r,n,a){if(!t||t==="data:"){console.error("Download image failed. The graph is too large or there is invalid attribute values in graph items");return}if(typeof window!="undefined")if(window.Blob&&window.URL&&r!=="svg"){var o=t.split(","),s="";if(o&&o.length>0){var u=o[0].match(/:(.*?);/);u&&u.length>=2&&(s=u[1])}for(var c=atob(o[1]),f=c.length,l=new Uint8Array(f);f--;)l[f]=c.charCodeAt(f);var _=new Blob([l],{type:s});window.navigator.msSaveBlob?window.navigator.msSaveBlob(_,a):n.addEventListener("click",function(){n.download=a,n.href=window.URL.createObjectURL(_)})}else n.addEventListener("click",function(){n.download=a,n.href=t})},e.prototype.addPlugin=function(t){var r=this;t.destroyed||(r.get("plugins").push(t),t.initPlugin(r))},e.prototype.removePlugin=function(t){var r=this.get("plugins"),n=r.indexOf(t);n>=0&&(t.destroyPlugin(),r.splice(n,1))},e.prototype.setImageWaterMarker=function(t,r){t===void 0&&(t=_l.waterMarkerImage);var n=this.get("container");(0,h.isString)(n)&&(n=document.getElementById(n)),n.style.position||(n.style.position="relative");var a=this.get("graphWaterMarker"),o=(0,h.deepMix)({},_l.imageWaterMarkerConfig,r),s=o.width,u=o.height,c=o.compatible,f=o.image;if(!t){var l=c?n:document.querySelector(".g6-graph-watermarker");l&&(l.style.cssText=void 0),a&&a.clear();return}if(a)a.clear();else{var _={container:n,width:s,height:u,capture:!1},I=this.get("pixelRatio");I&&(_.pixelRatio=I,window.devicePixelRatio=I),a=new ff(_),this.set("graphWaterMarker",a)}a.get("el").style.display="none";var B=a.get("context"),j=f.rotate,et=f.x,ut=f.y;B.rotate(-j*Math.PI/180);var ft=new Image;ft.crossOrigin="anonymous",ft.src=t,ft.onload=function(){if(B.drawImage(ft,et,ut,f.width,f.height),B.rotate(j*Math.PI/180),c)n.style.cssText="background-image: url(".concat(a.get("el").toDataURL("image/png"),");background-repeat:repeat;");else{var gt=document.querySelector(".g6-graph-watermarker");gt||(gt=document.createElement("div"),gt.className="g6-graph-watermarker"),gt.className="g6-graph-watermarker",a.destroyed||(gt.style.cssText="background-image: url(".concat(a.get("el").toDataURL("image/png"),");background-repeat:repeat;position:absolute;top:0;bottom:0;left:0;right:0;pointer-events:none;z-index:-1;"),n.appendChild(gt))}}},e.prototype.setTextWaterMarker=function(t,r){var n=this.get("container");(0,h.isString)(n)&&(n=document.getElementById(n)),n.style.position||(n.style.position="relative");var a=this.get("graphWaterMarker"),o=(0,h.deepMix)({},_l.textWaterMarkerConfig,r),s=o.width,u=o.height,c=o.compatible,f=o.text;if(!(t!=null&&t.length)){var l=c?n:document.querySelector(".g6-graph-watermarker");l&&(l.style.cssText=void 0),a&&a.clear();return}if(a)a.clear();else{var _={container:n,width:s,height:u,capture:!1},I=this.get("pixelRatio");I&&(_.pixelRatio=I,window.devicePixelRatio=I),a=new ff(_),this.set("graphWaterMarker",a)}a.get("el").style.display="none";var B=a.get("context"),j=f.rotate,et=f.fill,ut=f.fontFamily,ft=f.fontSize,gt=f.baseline,Mt=f.x,Ht=f.y,se=f.lineHeight;B.rotate(-j*Math.PI/180),B.font="".concat(ft,"px ").concat(ut),B.fillStyle=et,B.textBaseline=gt;for(var oe=(0,h.isString)(t)?[t]:t,_e=oe.length-1;_e>=0;_e--)B.fillText(oe[_e],Mt,Ht+_e*se);if(B.rotate(j*Math.PI/180),c)n.style.cssText="background-image: url(".concat(a.get("el").toDataURL("image/png"),");background-repeat:repeat;");else{var Ue=document.querySelector(".g6-graph-watermarker");Ue||(Ue=document.createElement("div"),Ue.className="g6-graph-watermarker"),Ue.style.cssText="background-image: url(".concat(a.get("el").toDataURL("image/png"),");background-repeat:repeat;position:absolute;top:0;bottom:0;left:0;right:0;pointer-events:none;z-index:99;"),n.appendChild(Ue)}},e.prototype.destroy=function(){var t,r,n,a;(0,h.each)(this.get("plugins"),function(f){f.destroyPlugin()});var o=this.get("tooltips");if(o)for(var s=0;s<o.length;s++){var u=o[s];if(u){var c=u.parentElement;c&&c.removeChild(u)}}(t=this.get("eventController"))===null||t===void 0||t.destroy(),(r=this.get("layoutController"))===null||r===void 0||r.destroy(),(n=this.get("graphWaterMarker"))===null||n===void 0||n.destroy(),(a=document.querySelector(".g6-graph-watermarker"))===null||a===void 0||a.remove(),i.prototype.destroy.call(this)},e}(rp),ng=dx,hx=lf.radialLayout,iv=lf.traverseTree,vx=function(i){(0,y.__extends)(e,i);function e(t){var r=i.call(this,t)||this;return r.layoutAnimating=!1,r.set("removeList",[]),r.set("layoutMethod",r.getLayout()),r}return e.prototype.getLayout=function(){var t=this.get("layout");return t?typeof t=="function"?t:(t.type||(t.type="dendrogram"),t.direction||(t.direction=t.type==="indented"?"LR":"TB"),t.radial?function(r){var n=sh()[t.type](r,t);return hx(n),n}:function(r){return sh()[t.type](r,t)}):null},e.indexOfChild=function(t,r){var n=-1;return(0,h.each)(t,function(a,o){if(r===a.id)return n=o,!1}),n},e.prototype.getDefaultCfg=function(){var t=i.prototype.getDefaultCfg.call(this);return t.animate=!0,t},e.prototype.innerAddChild=function(t,r,n){var a=this,o=t.data;o&&(o.x=t.x,o.y=t.y,o.depth=t.depth);var s=a.addItem("node",o,!1);if(r){if(s.set("parent",r),n){var u=r.get("originAttrs");if(u)s.set("originAttrs",u);else{var c=r.getModel();s.set("originAttrs",{x:c.x,y:c.y})}}var f=r.get("children");f?f.push(s):r.set("children",[s]),a.addItem("edge",{source:r.get("id"),target:s.get("id"),id:"".concat(r.get("id"),":").concat(s.get("id"))},!1)}return(0,h.each)(t.children||[],function(l){a.innerAddChild(l,s,n)}),a.emit("afteraddchild",{item:s,parent:r}),s},e.prototype.innerUpdateChild=function(t,r,n){var a=this,o=a.findById(t.id);if(!o){a.innerAddChild(t,r,n);return}(0,h.each)(t.children||[],function(B){a.innerUpdateChild(B,o,n)});var s=o.get("children");if(s){var u=s.length;if(u>0)for(var c=s.length-1;c>=0;c--){var f=s[c].getModel();e.indexOfChild(t.children||[],f.id)===-1&&(a.innerRemoveChild(f.id,{x:t.x,y:t.y},n),s.splice(c,1))}}var l,_;o.get("originAttrs")&&(l=o.get("originAttrs").x,_=o.get("originAttrs").y);var I=o.getModel();n&&o.set("originAttrs",{x:I.x,y:I.y}),o.set("model",Object.assign(I,t.data)),(l!==t.x||_!==t.y)&&o.updatePosition({x:t.x,y:t.y})},e.prototype.innerRemoveChild=function(t,r,n){var a=this,o=a.findById(t);if(o)if((0,h.each)(o.get("children"),function(u){a.innerRemoveChild(u.getModel().id,r,n)}),n){var s=o.getModel();o.set("to",r),o.set("originAttrs",{x:s.x,y:s.y}),a.get("removeList").push(o)}else a.removeItem(o,!1)},e.prototype.changeData=function(t,r){r===void 0&&(r=!0);var n=this;this.getNodes().map(function(a){return n.clearItemStates(a)}),this.getEdges().map(function(a){return n.clearItemStates(a)}),r&&this.get("enabledStack")&&this.pushStack("changedata",{before:n.get("originData"),after:t||n.get("data")}),t?(n.data(t),n.render(!1)):n.layout(this.get("fitView"))},e.prototype.changeLayout=function(t){console.warn("Please call updateLayout instead of changeLayout. changeLayout will be discarded soon");var r=this;r.updateLayout(t)},e.prototype.updateLayout=function(t,r,n,a){a===void 0&&(a=!0);var o=this;if(!t){console.warn("layout cannot be null");return}if(a&&this.get("enabledStack")&&this.pushStack("layout",{before:o.get("layout"),after:t}),o.set("layout",t),o.set("layoutMethod",o.getLayout()),o.layout(),r){var s=n;s||(r==="begin"?s={x:0,y:0}:s={x:this.getWidth()/2,y:this.getHeight()/2}),s=this.getPointByCanvas(s.x,s.y);var u=this.getGroup().getMatrix()||[1,0,0,0,1,0,0,0,1];s.x=s.x*u[0]+u[6],s.y=s.y*u[0]+u[7];var c=this.getGroup().getCanvasBBox(),f=c.minX,l=c.maxX,_=c.minY,I=c.maxY,B={x:(f+l)/2,y:(_+I)/2};r==="begin"&&(B.x=f,B.y=_),this.translate(s.x-B.x,s.y-B.y)}},e.prototype.refreshLayout=function(t){console.warn("Please call layout instead of refreshLayout. refreshLayout will be discarded soon");var r=this;r.layout(t)},e.prototype.layout=function(t){var r=this,n=this,a=n.get("data"),o=n.get("layoutMethod"),s=n.get("layout"),u=a;if(s!=null&&s.excludeInvisibles){a=(0,h.clone)(n.get("data"));var c={};iv(a,function(_){var I=_.children;if(!(I!=null&&I.length))return!0;for(var B=I.length-1;B>=0;B--){var j=r.findById(I[B].id),et=j?!j.isVisible():I[B].visible===!1;et&&(c[_.id]=c[_.id]||[],c[_.id].push({idx:B,child:I.splice(B,1)[0]}))}}),u=o?o(a,n.get("layout")):a,iv(u,function(_){var I=c[_.id];if(I!=null&&I.length)for(var B=I.length-1;B>=0;B--){var j=I[B],et=j.idx,ut=j.child;_.children.splice(et,0,ut)}})}else u=o?o(a,n.get("layout")):a;var f=n.get("animate");if(n.emit("beforerefreshlayout",{data:a,layoutData:u}),n.emit("beforelayout"),n.innerUpdateChild(u,void 0,f),t){var l=n.get("viewController");l.fitView()}f?n.layoutAnimate(u):(n.refresh(),n.paint()),n.emit("afterrefreshlayout",{data:a,layoutData:u}),n.emit("afterlayout")},e.prototype.addChild=function(t,r,n){n===void 0&&(n=!0);var a=this;a.emit("beforeaddchild",{model:t,parent:r}),(0,h.isString)(r)||(r=r.get("id"));var o=a.findDataById(r);if(o){o.children||(o.children=[]),o.children.push(t);var s=a.findById(r);s.refresh(),a.changeData(void 0,n)}},e.prototype.updateChildren=function(t,r,n){n===void 0&&(n=!0);var a=this,o=a.findById(r);if(!r||!o){console.warn("Update children failed! There is no node with id '".concat(r,"'"));return}var s=a.findDataById(r);s.children=t,o.refresh(),a.changeData(void 0,n)},e.prototype.updateChild=function(t,r,n){n===void 0&&(n=!0);var a=this;if(!r||!a.findById(r)){a.changeData(t,n);return}var o=a.findDataById(r),s=a.findById(t.id);if(o.children||(o.children=[]),!s)o.children.push(t);else{var u=e.indexOfChild(o.children,t.id);u>-1&&(o.children[u]=t)}var c=a.findById(r);c==null||c.refresh(),a.changeData(void 0,n)},e.prototype.removeChild=function(t,r){r===void 0&&(r=!0);var n=this,a=n.findById(t),o;if(a?o=a==null?void 0:a.get("parent"):o=n.getNodes().find(function(l){var _=l.getModel().children||[];return!!_.find(function(I){return I.id===t})}),o&&!o.destroyed){var s=o.get("id"),u=n.findDataById(s),c=u&&u.children||[],f=e.indexOfChild(c,t);c.splice(f,1),o.refresh()}n.changeData(void 0,r)},e.prototype.findDataById=function(t,r){var n=this;if(r||(r=n.get("data")),t===r.id)return r;var a=null;return(0,h.each)(r.children||[],function(o){if(o.id===t)return a=o,!1;if(a=n.findDataById(t,o),a)return!1}),a},e.prototype.layoutAnimate=function(t,r){var n=this,a=this.get("animateCfg");n.emit("beforeanimate",{data:t}),n.getEdges().forEach(function(o){var s=o.get("model");s.sourceAnchor||(s.sourceAnchor=o.get("sourceAnchorIndex"))}),this.get("canvas").animate(function(o){iv(t,function(s){var u=n.findById(s.id);if(u){var c=u.get("originAttrs"),f=u.get("model");if(c||(c={x:f.x,y:f.y},u.set("originAttrs",c)),r){var l=r(u,o,c,t);u.set("model",Object.assign(f,l))}else f.x=c.x+(s.x-c.x)*o,f.y=c.y+(s.y-c.y)*o}return!0}),(0,h.each)(n.get("removeList"),function(s){var u=s.getModel(),c=s.get("originAttrs"),f=s.get("to");u.x=c.x+(f.x-c.x)*o,u.y=c.y+(f.y-c.y)*o}),n.refreshPositions()},{duration:a.duration,easing:a.ease,callback:function(){(0,h.each)(n.getNodes(),function(s){s.set("originAttrs",null)}),(0,h.each)(n.get("removeList"),function(s){n.removeItem(s,!1)}),n.set("removeList",[]),a.callback&&a.callback(),n.emit("afteranimate",{data:t})},delay:a.delay})},e.prototype.stopLayoutAnimate=function(){this.get("canvas").stopAnimate(),this.emit("layoutanimateend",{data:this.get("data")}),this.layoutAnimating=!1},e.prototype.isLayoutAnimating=function(){return this.layoutAnimating},e.prototype.render=function(t){t===void 0&&(t=!0);var r=this,n=r.get("data");if(!n||!(0,h.isObject)(n)||!Object.keys(n).length)throw new Error("data must be defined first");r.clear(),t&&this.get("enabledStack")&&this.clearStack(),r.emit("beforerender"),r.layout(this.get("fitView")),r.emit("afterrender")},e.prototype.save=function(){return this.get("data")},e.prototype.data=function(t){i.prototype.data.call(this,t),this.set("originData",JSON.parse(JSON.stringify(t)))},e}(ng),px=vx;function gi(i,e){if(i)for(var t in e)e.hasOwnProperty(t)&&(i.style[t]=e[t]);return i}var gx=function(){function i(e){this._cfgs=(0,h.deepMix)(this.getDefaultCfgs(),e),this._events={},this.destroyed=!1}return i.prototype.getDefaultCfgs=function(){return{}},i.prototype.initPlugin=function(e){var t=this;t.set("graph",e);var r=t.getEvents(),n={};(0,h.each)(r,function(a,o){var s=(0,h.wrapBehavior)(t,a);n[o]=s,e.on(o,s)}),this._events=n,this.init()},i.prototype.getEvents=function(){return{}},i.prototype.get=function(e){var t;return(t=this._cfgs)===null||t===void 0?void 0:t[e]},i.prototype.set=function(e,t){this._cfgs[e]=t},i.prototype.destroy=function(){},i.prototype.destroyPlugin=function(){this.destroy();var e=this.get("graph"),t=this._events;(0,h.each)(t,function(r,n){e.off(n,r)}),this._events=null,this._cfgs=null,this.destroyed=!0},i}(),uu=gx,mx=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),ag="url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGRlZnM+PHBhdHRlcm4gaWQ9ImdyaWQiIHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCIgcGF0dGVyblVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHBhdGggZD0iTSAwIDEwIEwgNDAgMTAgTSAxMCAwIEwgMTAgNDAgTSAwIDIwIEwgNDAgMjAgTSAyMCAwIEwgMjAgNDAgTSAwIDMwIEwgNDAgMzAgTSAzMCAwIEwgMzAgNDAiIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2UwZTBlMCIgb3BhY2l0eT0iMC4yIiBzdHJva2Utd2lkdGg9IjEiLz48cGF0aCBkPSJNIDQwIDAgTCAwIDAgMCA0MCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjZTBlMGUwIiBzdHJva2Utd2lkdGg9IjEiLz48L3BhdHRlcm4+PC9kZWZzPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9InVybCgjZ3JpZCkiLz48L3N2Zz4=)",yx=function(i){mx(e,i);function e(t){return i.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{img:ag,follow:!0}},e.prototype.init=function(){var t=this.get("graph"),r=t.get("container"),n=t.get("canvas").get("el"),a=this.get("img")||ag;a.includes("url(")||(a='url("'.concat(a,'")'));var o=Ko(`<div class='g6-grid-container' style="position:absolute;overflow:hidden;z-index: -1;"></div>`),s=Ko(`<div
        class='g6-grid'
        style='position:absolute;
        background-image: `.concat(a,`;
        user-select: none
        '></div>`));this.set("container",o),this.set("gridContainer",s),this.positionInit(),o.appendChild(s),r.insertBefore(o,n)},e.prototype.positionInit=function(){var t=this.get("graph"),r=t.get("minZoom"),n=t.get("width"),a=t.get("height");gi(this.get("container"),{width:"".concat(n,"px"),height:"".concat(a,"px")});var o=n*80/r,s=a*80/r;gi(this.get("gridContainer"),{width:"".concat(o,"px"),height:"".concat(s,"px"),left:"-".concat(o/2,"px"),top:"-".concat(s/2,"px")})},e.prototype.getEvents=function(){return{viewportchange:"updateGrid"}},e.prototype.updateGrid=function(t){var r=this.get("gridContainer"),n=t.matrix;n||(n=[1,0,0,0,1,0,0,0,1]);var a=this.get("follow"),o="matrix(".concat(n[0],", ").concat(n[1],", ").concat(n[3],", ").concat(n[4],", ").concat(a?n[6]:"0",", ").concat(a?n[7]:"0",")");gi(r,{transform:o})},e.prototype.getContainer=function(){return this.get("container")},e.prototype.destroy=function(){var t=this.get("graph"),r=t.get("container"),n=this.get("container");r.removeChild(n)},e}(uu),xx=yx,bx=C(738186),ch=C.n(bx),Ex=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();typeof document!="undefined"&&ch()(`
  .g6-component-contextmenu {
    border: 1px solid #e2e2e2;
    border-radius: 4px;
    font-size: 12px;
    color: #545454;
    background-color: rgba(255, 255, 255, 0.9);
    padding: 10px 8px;
    box-shadow: rgb(174, 174, 174) 0px 0px 10px;
  }
  .g6-contextmenu-ul {
    padding: 0;
    margin: 0;
    list-style: none;
  }

`);var wx=function(i){Ex(e,i);function e(t){return i.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{offsetX:6,offsetY:6,handleMenuClick:void 0,getContent:function(r){return`
          <ul class='g6-contextmenu-ul'>
            <li>\u83DC\u5355\u98791</li>
            <li>\u83DC\u5355\u98792</li>
          </ul>
        `},shouldBegin:function(r){return!0},onHide:function(){return!0},itemTypes:["node","edge","combo"],trigger:"contextmenu"}},e.prototype.getEvents=function(){return this.get("trigger")==="click"?{click:"onMenuShow",touchend:"onMenuShow"}:{contextmenu:"onMenuShow"}},e.prototype.init=function(){var t=this.get("className"),r=Ko("<div class=".concat(t||"g6-component-contextmenu","></div>"));gi(r,{top:"0px",position:"absolute",visibility:"hidden"});var n=this.get("container");n||(n=this.get("graph").get("container")),(0,h.isString)(n)&&(n=document.getElementById(n)),n.appendChild(r),this.set("menu",r)},e.prototype.onMenuShow=function(t){var r=this;t.preventDefault();var n=this.get("itemTypes");if(t.item){if(t.item&&t.item.getType&&n.indexOf(t.item.getType())===-1){r.onMenuHide();return}}else if(n.indexOf("canvas")===-1){r.onMenuHide();return}var a=this.get("shouldBegin");if(a(t)){var o=this.get("menu"),s=this.get("getContent"),u=this.get("graph"),c=s(t,u);(0,h.isString)(c)?o.innerHTML=c:o.innerHTML=c.outerHTML,this.removeMenuEventListener();var f=this.get("handleMenuClick");if(f){var l=function(_e){f(_e.target,t.item,u)};this.set("handleMenuClickWrapper",l),o.addEventListener("click",l)}var _=u.get("width"),I=u.get("height"),B=o.getBoundingClientRect(),j=this.get("offsetX")||0,et=this.get("offsetY")||0,ut=u.getContainer().offsetTop,ft=u.getContainer().offsetLeft,gt=t.canvasX+ft+j,Mt=t.canvasY+ut+et;gt+B.width>_&&(gt=t.canvasX-B.width-j+ft),Mt+B.height>I&&(Mt=t.canvasY-B.height-et+ut),gi(o,{top:"".concat(Mt,"px"),left:"".concat(gt,"px"),visibility:"visible"});var Ht=this.get("trigger")==="click",se=function(_e){if(Ht){Ht=!1;return}r.onMenuHide()};document.body.addEventListener("click",se),this.set("handler",se)}},e.prototype.removeMenuEventListener=function(){var t=this.get("handleMenuClickWrapper"),r=this.get("handler");if(t){var n=this.get("menu");n.removeEventListener("click",t),this.set("handleMenuClickWrapper",null)}r&&document.body.removeEventListener("click",r)},e.prototype.onMenuHide=function(){var t=this.get("menu");t&&gi(t,{visibility:"hidden"}),this.removeMenuEventListener()},e.prototype.destroy=function(){var t=this.get("menu");if(this.removeMenuEventListener(),t){var r=this.get("container");r||(r=this.get("graph").get("container")),(0,h.isString)(r)&&(r=document.getElementById(r)),r.removeChild(t)}},e}(uu),Sx=wx,Mx=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),ov=function(){return ov=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},ov.apply(this,arguments)},ig=Math.max,_x=pt,Cx="default",Tx="keyShape",Ax="delegate",og="svg",Ix=function(i){Mx(e,i);function e(t){var r=i.call(this,t)||this;return r.handleUpdateCanvas=(0,h.debounce)(function(n){var a=r;a.destroyed||a.updateCanvas()},100,!1),r}return e.prototype.getDefaultCfgs=function(){return{container:null,className:"g6-minimap",viewportClassName:"g6-minimap-viewport",type:"default",padding:50,size:[200,120],delegateStyle:{fill:"#40a9ff",stroke:"#096dd9"},refresh:!0,hideEdge:!1}},e.prototype.getEvents=function(){return{beforepaint:"updateViewport",beforeanimate:"disableRefresh",afteranimate:"enableRefresh",viewportchange:"disableOneRefresh"}},e.prototype.disableRefresh=function(){this.set("refresh",!1)},e.prototype.enableRefresh=function(){this.set("refresh",!0),this.updateCanvas()},e.prototype.disableOneRefresh=function(){this.set("viewportChange",!0)},e.prototype.initViewport=function(){var t=this,r=this._cfgs,n=r.size,a=r.graph;if(!this.destroyed){var o=this.get("canvas"),s=o.get("container"),u=navigator.userAgent.toLowerCase().indexOf("firefox")>-1,c=navigator.userAgent.toLowerCase().indexOf("safari")>-1,f=Ko(`
      <div
        class=`.concat(r.viewportClassName,`
        style='position:absolute;
          left:0;
          top:0;
          box-sizing:border-box;
          outline: 2px solid #1980ff;
          cursor:move'
        draggable=`).concat(!(c||u),`
      </div>`)),l=0,_=0,I=!1,B=0,j=0,et=0,ut=0,ft=0,gt=0,Mt=c||u?"mousedown":"dragstart";f.addEventListener(Mt,function(_e){var Ue,Ne;if(_e.dataTransfer){var Qe=new Image;Qe.src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' %3E%3Cpath /%3E%3C/svg%3E",(Ne=(Ue=_e.dataTransfer).setDragImage)===null||Ne===void 0||Ne.call(Ue,Qe,0,0);try{_e.dataTransfer.setData("text/html","view-port-minimap")}catch(nn){_e.dataTransfer.setData("text","view-port-minimap")}}if(r.refresh=!1,_e.target===f){var dr=f.style;B=parseInt(dr.left,10),j=parseInt(dr.top,10),et=parseInt(dr.width,10),ut=parseInt(dr.height,10),!(et>n[0]||ut>n[1])&&(gt=a.getZoom(),ft=t.get("ratio"),I=!0,l=_e.clientX,_=_e.clientY)}},!1);var Ht=function(Ue){if(!(!I||(0,h.isNil)(Ue.clientX)||(0,h.isNil)(Ue.clientY))){var Ne=l-Ue.clientX,Qe=_-Ue.clientY;(B-Ne<0||B-Ne+et>=n[0])&&(Ne=0),(j-Qe<0||j-Qe+ut>=n[1])&&(Qe=0),B-=Ne,j-=Qe,gi(f,{left:"".concat(B,"px"),top:"".concat(j,"px")}),a.translate(Ne*gt/ft,Qe*gt/ft),l=Ue.clientX,_=Ue.clientY}};!c&&!u&&f.addEventListener("drag",Ht,!1);var se=function(){I=!1,r.refresh=!0},oe=c||u?"mouseup":"dragend";f.addEventListener(oe,se,!1),s.addEventListener("mouseleave",se),s.addEventListener("mouseup",se),(c||u)&&s.addEventListener("mousemove",Ht,!1),this.set("viewport",f),s.appendChild(f)}},e.prototype.updateViewport=function(){if(!this.destroyed){var t=this.get("ratio"),r=this.get("totaldx"),n=this.get("totaldy"),a=this.get("graph"),o=this.get("size"),s=a.get("canvas").get("el"),u=a.get("width")||s.scrollWidth||500,c=a.get("height")||s.scrollHeight||500,f=a.getPointByCanvas(0,0),l=a.getPointByCanvas(u,c),_=this.get("viewport");_||this.initViewport();var I=(l.x-f.x)*t,B=(l.y-f.y)*t,j=f.x*t+r,et=f.y*t+n,ut=j+I,ft=et+B;j<0&&(I+=j,j=0),ut>o[0]&&(I=I-(ut-o[0])),et<0&&(B+=et,et=0),ft>o[1]&&(B=B-(ft-o[1])),this.set("ratio",t);var gt="".concat(j,"px"),Mt="".concat(et,"px");gi(_,{left:gt,top:Mt,width:"".concat(I,"px"),height:"".concat(B,"px")})}},e.prototype.updateGraphShapes=function(){var t=this._cfgs.graph,r=this.get("canvas"),n=t.get("group");if(!n.destroyed){r.clear();var a;this.get("hideEdge")?(a=r.addGroup(),n.get("children").forEach(function(s){s.get("id").includes("-edge")||a.add(s.clone())})):(a=n.clone(),a.resetMatrix(),r.add(a));var o=t.get("renderer");o===og&&this.updateVisible(a)}},e.prototype.updateVisible=function(t){var r=this;if(!t.isGroup()&&!t.get("visible"))t.hide();else{var n=t.get("children");if(!n||!n.length)return;n.forEach(function(a){a.get("visible")||a.hide(),r.updateVisible(a)})}},e.prototype.updateKeyShapes=function(){var t=this,r=this._cfgs.graph,n=this.get("canvas"),a=n.get("children")[0]||n.addGroup();this.get("hideEdge")||(0,h.each)(r.getEdges(),function(u){t.updateOneEdgeKeyShape(u,a)}),(0,h.each)(r.getNodes(),function(u){t.updateOneNodeKeyShape(u,a)});var o=r.getCombos();if(o&&o.length){var s=a.find(function(u){return u.get("name")==="comboGroup"})||a.addGroup({name:"comboGroup"});setTimeout(function(){t.destroyed||((0,h.each)(o,function(u){t.updateOneComboKeyShape(u,s)}),s==null||s.sort(),s==null||s.toBack(),t.updateCanvas())},250)}this.clearDestroyedShapes()},e.prototype.updateOneComboKeyShape=function(t,r){if(!this.destroyed){var n=this.get("itemMap")||{},a=n[t.get("id")],o=t.getBBox(),s=t.get("keyShape").clone(),u=s.attr(),c={x:o.centerX,y:o.centerY};a?c=Object.assign(u,c):(a=s,r.add(a));var f=a.get("type");(f==="rect"||f==="image")&&(c.x=o.minX,c.y=o.minY),a.attr(c),t.isVisible()?a.show():a.hide(),a.exist=!0;var l=t.getModel().depth;isNaN(l)||a.set("zIndex",l),n[t.get("id")]=a,this.set("itemMap",n)}},e.prototype.updateOneNodeKeyShape=function(t,r){var n=this.get("itemMap")||{},a=n[t.get("id")],o=t.getBBox(),s=t.get("keyShape").clone(),u=s.attr(),c={x:o.centerX,y:o.centerY};a?(c=Object.assign(u,c),a.toFront()):(a=s,r.add(a));var f=a.get("type");(f==="rect"||f==="image")&&(c.x=o.minX,c.y=o.minY),a.attr(c),t.isVisible()?a.show():a.hide(),a.exist=!0;var l=t.getModel().depth;isNaN(l)||a.set("zIndex",l),n[t.get("id")]=a,this.set("itemMap",n)},e.prototype.updateDelegateShapes=function(){var t=this,r=this._cfgs.graph,n=this.get("canvas"),a=n.get("children")[0]||n.addGroup();this.get("hideEdge")||(0,h.each)(r.getEdges(),function(u){t.updateOneEdgeKeyShape(u,a)}),(0,h.each)(r.getNodes(),function(u){t.updateOneNodeDelegateShape(u,a)});var o=r.getCombos();if(o&&o.length){var s=a.find(function(u){return u.get("name")==="comboGroup"})||a.addGroup({name:"comboGroup"});setTimeout(function(){t.destroyed||((0,h.each)(o,function(u){t.updateOneComboKeyShape(u,s)}),s==null||s.sort(),s==null||s.toBack(),t.updateCanvas())},250)}this.clearDestroyedShapes()},e.prototype.clearDestroyedShapes=function(){var t=this.get("itemMap")||{},r=Object.keys(t);if(!(!r||r.length===0))for(var n=r.length-1;n>=0;n--){var a=t[r[n]],o=a.exist;a.exist=!1,o||(a.remove(),delete t[r[n]])}},e.prototype.updateOneEdgeKeyShape=function(t,r){var n=this.get("itemMap")||{},a=n[t.get("id")];if(a){var o=t.get("keyShape").attr("path");a.attr("path",o)}else a=t.get("keyShape").clone(),r.add(a);t.isVisible()?a.show():a.hide(),a.exist=!0,n[t.get("id")]=a,this.set("itemMap",n)},e.prototype.updateOneNodeDelegateShape=function(t,r){var n=this.get("delegateStyle"),a=this.get("itemMap")||{},o=a[t.get("id")],s=t.getBBox();if(o){var u={x:s.minX,y:s.minY,width:s.width,height:s.height};o.attr(u),o.toFront()}else o=r.addShape("rect",{attrs:ov({x:s.minX,y:s.minY,width:s.width,height:s.height},n),name:"minimap-node-shape"});t.isVisible()?o.show():o.hide(),o.exist=!0,a[t.get("id")]=o,this.set("itemMap",a)},e.prototype.init=function(){this.initContainer(),this.get("graph").on("afterupdateitem",this.handleUpdateCanvas),this.get("graph").on("afteritemstatechange",this.handleUpdateCanvas),this.get("graph").on("afteradditem",this.handleUpdateCanvas),this.get("graph").on("afterremoveitem",this.handleUpdateCanvas),this.get("graph").on("afterrender",this.handleUpdateCanvas),this.get("graph").on("afterlayout",this.handleUpdateCanvas)},e.prototype.initContainer=function(){var t=this,r=t.get("graph"),n=t.get("size"),a=t.get("className"),o=t.get("container"),s=Ko("<div class='".concat(a,"' style='width: ").concat(n[0],"px; height: ").concat(n[1],"px; overflow: hidden'></div>"));(0,h.isString)(o)&&(o=document.getElementById(o)),o?o.appendChild(s):r.get("container").appendChild(s),t.set("container",s);var u=Ko('<div class="g6-minimap-container" style="position: relative;"></div>');s.appendChild(u),u.addEventListener("dragenter",function(l){l.preventDefault()}),u.addEventListener("dragover",function(l){l.preventDefault()});var c,f=r.get("renderer");f===og?c=new Cd({container:u,width:n[0],height:n[1]}):c=new ff({container:u,width:n[0],height:n[1]}),t.set("canvas",c),t.updateCanvas()},e.prototype.updateCanvas=function(){if(!this.destroyed){var t=this.get("refresh");if(t){var r=this.get("graph");if(!r.get("destroyed")){this.get("viewportChange")&&(this.set("viewportChange",!1),this.updateViewport());var n=this.get("size"),a=this.get("canvas"),o=this.get("type"),s=this.get("padding");if(!a.destroyed){switch(o){case Cx:this.updateGraphShapes();break;case Tx:this.updateKeyShapes();break;case Ax:this.updateDelegateShapes();break;default:break}var u=a.get("children")[0];if(u){u.resetMatrix();var c=u.getCanvasBBox(),f=r.get("canvas").getCanvasBBox(),l=r.getZoom()||1,_=f.width/l,I=f.height/l;Number.isFinite(c.width)&&(_=ig(c.width,_),I=ig(c.height,I)),_+=2*s,I+=2*s;var B=Math.min(n[0]/_,n[1]/I),j=[1,0,0,0,1,0,0,0,1],et=0,ut=0;Number.isFinite(c.minX)&&(et=-c.minX),Number.isFinite(c.minY)&&(ut=-c.minY);var ft=(n[0]-(_-2*s)*B)/2,gt=(n[1]-(I-2*s)*B)/2;j=_x(j,[["t",et,ut],["s",B,B],["t",ft,gt]]),u.setMatrix(j),this.set("ratio",B),this.set("totaldx",ft+et*B),this.set("totaldy",gt+ut*B),this.set("dx",ft),this.set("dy",gt),this.updateViewport()}}}}}},e.prototype.getCanvas=function(){return this.get("canvas")},e.prototype.getViewport=function(){return this.get("viewport")},e.prototype.getContainer=function(){return this.get("container")},e.prototype.destroy=function(){var t;(t=this.get("canvas"))===null||t===void 0||t.destroy();var r=this.get("container");r!=null&&r.parentNode&&r.parentNode.removeChild(r)},e}(uu),Ox=Ix,Dx=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();function Ac(i,e,t){var r=i.x-e.x,n=i.y-e.y;return!t||Math.abs(r)>t||Math.abs(n)>t?Math.sqrt(r*r+n*n):t}function Lx(i,e){return i.x*e.x+i.y*e.y}function sg(i,e){var t=(e.source.y-e.target.y)/(e.source.x-e.target.x),r=(t*t*e.source.x+t*(i.y-e.source.y)+i.x)/(t*t+1),n=t*(r-e.source.x)+e.source.y;return{x:r,y:n}}var Px=function(i){Dx(e,i);function e(t){return i.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{edgeBundles:[],edgePoints:[],K:.1,lambda:.1,divisions:1,divRate:2,cycles:6,iterations:90,iterRate:.6666667,bundleThreshold:.6,eps:1e-6,onLayoutEnd:function(){},onTick:function(){}}},e.prototype.init=function(){var t=this.get("graph"),r=this.get("onTick"),n=function(){r&&r(),t.refreshPositions()};this.set("tick",n)},e.prototype.bundling=function(t){var r=this;if(r.set("data",t),!r.isTicking()){var n=t.edges||[],a=t.nodes||[],o={},s=!1;if(a.forEach(function(Mt){(Mt.x===null||!Mt.y===null||Mt.x===void 0||!Mt.y===void 0)&&(s=!0),o[Mt.id]=Mt}),s)throw new Error("please layout the graph or assign x and y for nodes first");r.set("nodeIdMap",o);var u=r.get("divisions"),c=r.get("divRate"),f=r.divideEdges(u);r.set("edgePoints",f);var l=r.getEdgeBundles();r.set("edgeBundles",l);for(var _=r.get("cycles"),I=r.get("iterations"),B=r.get("iterRate"),j=r.get("lambda"),et=0;et<_;et++){for(var ut=function(Ht){var se=[];n.forEach(function(oe,_e){if(oe.source!==oe.target){var Ue=o[oe.source],Ne=o[oe.target];se[_e]=r.getEdgeForces({source:Ue,target:Ne},_e,u,j);for(var Qe=0;Qe<u+1;Qe++)f[_e][Qe].x+=se[_e][Qe].x,f[_e][Qe].y+=se[_e][Qe].y}})},ft=0;ft<I;ft++)ut(ft);j=j/2,u*=c,I*=B,f=r.divideEdges(u),r.set("edgePoints",f)}n.forEach(function(Mt,Ht){Mt.source!==Mt.target&&(Mt.type="polyline",Mt.controlPoints=f[Ht].slice(1,f[Ht].length-1))});var gt=r.get("graph");gt.refresh()}},e.prototype.updateBundling=function(t){var r=this,n=t.data;if(n&&r.set("data",n),r.get("ticking")&&r.set("ticking",!1),Object.keys(t).forEach(function(o){r.set(o,t[o])}),t.onTick){var a=this.get("graph");r.set("tick",function(){t.onTick(),a.refresh()})}r.bundling(n)},e.prototype.divideEdges=function(t){var r=this,n=r.get("data").edges,a=r.get("nodeIdMap"),o=r.get("edgePoints");return(!o||o===void 0)&&(o=[]),n.forEach(function(s,u){var c;(!o[u]||o[u]===void 0)&&(o[u]=[]);var f=a[s.source],l=a[s.target];if(t===1)o[u].push({x:f.x,y:f.y}),o[u].push({x:.5*(f.x+l.x),y:.5*(f.y+l.y)}),o[u].push({x:l.x,y:l.y});else{var _=0;!((c=o[u])===null||c===void 0)&&c.length?_=r.getEdgeLength(o[u]):_=Ac({x:f.x,y:f.y},{x:l.x,y:l.y});var I=_/(t+1),B=I,j=[{x:f.x,y:f.y}];o[u].forEach(function(et,ut){if(ut!==0){for(var ft=Ac(et,o[u][ut-1]);ft>B;){var gt=B/ft,Mt={x:o[u][ut-1].x,y:o[u][ut-1].y};Mt.x+=gt*(et.x-o[u][ut-1].x),Mt.y+=gt*(et.y-o[u][ut-1].y),j.push(Mt),ft-=B,B=I}B-=ft}}),j.push({x:l.x,y:l.y}),o[u]=j}}),o},e.prototype.getEdgeLength=function(t){var r=0;return t.forEach(function(n,a){a!==0&&(r+=Ac(n,t[a-1]))}),r},e.prototype.getEdgeBundles=function(){var t=this,r=t.get("data"),n=r.edges||[],a=t.get("bundleThreshold"),o=t.get("nodeIdMap"),s=t.get("edgeBundles");return s||(s=[]),n.forEach(function(u,c){(!s[c]||s[c]===void 0)&&(s[c]=[])}),n.forEach(function(u,c){var f=o[u.source],l=o[u.target];n.forEach(function(_,I){if(!(I<=c)){var B=o[_.source],j=o[_.target],et=t.getBundleScore({source:f,target:l},{source:B,target:j});et>=a&&(s[c].push(I),s[I].push(c))}})}),s},e.prototype.getBundleScore=function(t,r){var n=this;t.vx=t.target.x-t.source.x,t.vy=t.target.y-t.source.y,r.vx=r.target.x-r.source.x,r.vy=r.target.y-r.source.y,t.length=Ac({x:t.source.x,y:t.source.y},{x:t.target.x,y:t.target.y}),r.length=Ac({x:r.source.x,y:r.source.y},{x:r.target.x,y:r.target.y});var a=n.getAngleScore(t,r),o=n.getScaleScore(t,r),s=n.getPositionScore(t,r),u=n.getVisibilityScore(t,r);return a*o*s*u},e.prototype.getAngleScore=function(t,r){var n=Lx({x:t.vx,y:t.vy},{x:r.vx,y:r.vy});return n/(t.length*r.length)},e.prototype.getScaleScore=function(t,r){var n=(t.length+r.length)/2,a=2/(n/Math.min(t.length,r.length)+Math.max(t.length,r.length)/n);return a},e.prototype.getPositionScore=function(t,r){var n=(t.length+r.length)/2,a={x:(t.source.x+t.target.x)/2,y:(t.source.y+t.target.y)/2},o={x:(r.source.x+r.target.x)/2,y:(r.source.y+r.target.y)/2},s=Ac(a,o);return n/(n+s)},e.prototype.getVisibilityScore=function(t,r){var n=this.getEdgeVisibility(t,r),a=this.getEdgeVisibility(r,t);return n<a?n:a},e.prototype.getEdgeVisibility=function(t,r){var n=sg(r.source,t),a=sg(r.target,t),o={x:(n.x+a.x)/2,y:(n.y+a.y)/2},s={x:(t.source.x+t.target.x)/2,y:(t.source.y+t.target.y)/2};return Math.max(0,1-2*Ac(o,s)/Ac(n,a))},e.prototype.getEdgeForces=function(t,r,n,a){for(var o=this,s=o.get("edgePoints"),u=o.get("K"),c=u/(Ac(t.source,t.target)*(n+1)),f=[{x:0,y:0}],l=1;l<n;l++){var _={x:0,y:0},I=o.getSpringForce({pre:s[r][l-1],cur:s[r][l],next:s[r][l+1]},c),B=o.getElectrostaticForce(l,r);_.x=a*(I.x+B.x),_.y=a*(I.y+B.y),f.push(_)}return f.push({x:0,y:0}),f},e.prototype.getSpringForce=function(t,r){var n=t.pre.x+t.next.x-2*t.cur.x,a=t.pre.y+t.next.y-2*t.cur.y;return n*=r,a*=r,{x:n,y:a}},e.prototype.getElectrostaticForce=function(t,r){var n=this,a=n.get("eps"),o=n.get("edgeBundles"),s=n.get("edgePoints"),u=o[r],c={x:0,y:0};return u.forEach(function(f){var l={x:s[f][t].x-s[r][t].x,y:s[f][t].y-s[r][t].y};if(Math.abs(l.x)>a||Math.abs(l.y)>a){var _=Ac(s[f][t],s[r][t]),I=1/_;c.x+=l.x*I,c.y+=l.y*I}}),c},e.prototype.isTicking=function(){return this.get("ticking")},e.prototype.getSimulation=function(){return this.get("forceSimulation")},e.prototype.destroy=function(){this.get("ticking")&&this.getSimulation().stop(),i.prototype.destroy.call(this)},e}(uu),Nx=Px,Rx=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),sv=function(){return sv=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},sv.apply(this,arguments)},fh=.05,ug={stroke:"#000",strokeOpacity:.8,lineWidth:2,fillOpacity:.1,fill:"#ccc"},kx=function(i){Rx(e,i);function e(t){return i.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{trigger:"mousemove",d:1.5,r:300,delegateStyle:(0,h.clone)(ug),showLabel:!1,maxD:5,minD:0,scaleRBy:"unset",scaleDBy:"unset",showDPercent:!0}},e.prototype.getEvents=function(){var t;switch(this.get("trigger")){case"click":t={click:"magnify"};break;case"drag":t={click:"createDelegate"};break;default:t={mousemove:"magnify"};break}return t},e.prototype.init=function(){var t=this,r=t.get("r");t.set("cachedMagnifiedModels",[]),t.set("cachedOriginPositions",{}),t.set("r2",r*r);var n=t.get("d");t.set("molecularParam",(n+1)*r)},e.prototype.createDelegate=function(t){var r=this,n=this,a=n.get("delegate");(!a||a.destroyed)&&(n.magnify(t),a=n.get("delegate"),a.on("dragstart",function(o){n.set("delegateCenterDiff",{x:a.attr("x")-o.x,y:a.attr("y")-o.y})}),a.on("drag",function(o){n.magnify(o)}),this.get("scaleDBy")==="wheel"&&a.on("mousewheel",function(o){r.scaleDByWheel(o)}),this.get("scaleRBy")==="wheel"&&a.on("mousewheel",function(o){n.scaleRByWheel(o)}))},e.prototype.scaleRByWheel=function(t){var r=this;if(!(!t||!t.originalEvent)){t.preventDefault&&t.preventDefault();var n=r.get("graph"),a,o=r.get("delegate"),s=o?{x:o.attr("x"),y:o.attr("y")}:void 0,u=s||n.getPointByClient(t.clientX,t.clientY);t.originalEvent.wheelDelta<0?a=1-fh:a=1/(1-fh);var c=r.get("maxR"),f=r.get("minR"),l=r.get("r");(l>(c||n.get("height"))&&a>1||l<(f||n.get("height")*.05)&&a<1)&&(a=1),l*=a,r.set("r",l),r.set("r2",l*l);var _=r.get("d");r.set("molecularParam",(_+1)*l),r.set("delegateCenterDiff",void 0),r.magnify(t,u)}},e.prototype.scaleRByDrag=function(t){var r=this;if(t){var n=r.get("dragPrePos"),a=r.get("graph"),o,s=a.getPointByClient(t.clientX,t.clientY);t.x-n.x<0?o=1-fh:o=1/(1-fh);var u=r.get("maxR"),c=r.get("minR"),f=r.get("r");(f>(u||a.get("height"))&&o>1||f<(c||a.get("height")*.05)&&o<1)&&(o=1),f*=o,r.set("r",f),r.set("r2",f*f);var l=r.get("d");r.set("molecularParam",(l+1)*f),r.magnify(t,s),r.set("dragPrePos",{x:t.x,y:t.y})}},e.prototype.scaleDByWheel=function(t){var r=this;if(!(!t&&!t.originalEvent)){t.preventDefault&&t.preventDefault();var n=0;t.originalEvent.wheelDelta<0?n=-.1:n=.1;var a=r.get("d"),o=a+n,s=r.get("maxD"),u=r.get("minD");if(o<s&&o>u){r.set("d",o);var c=r.get("r");r.set("molecularParam",(o+1)*c);var f=r.get("delegate"),l=f?{x:f.attr("x"),y:f.attr("y")}:void 0;r.set("delegateCenterDiff",void 0),r.magnify(t,l)}}},e.prototype.scaleDByDrag=function(t){var r=this,n=r.get("dragPrePos"),a=t.x-n.x>0?.1:-.1,o=r.get("d"),s=o+a,u=r.get("maxD"),c=r.get("minD");if(s<u&&s>c){r.set("d",s);var f=r.get("r");r.set("molecularParam",(s+1)*f),r.magnify(t)}r.set("dragPrePos",{x:t.x,y:t.y})},e.prototype.magnify=function(t,r){var n=this;n.restoreCache();var a=n.get("graph"),o=n.get("cachedMagnifiedModels"),s=n.get("cachedOriginPositions"),u=n.get("showLabel"),c=n.get("r"),f=n.get("r2"),l=n.get("d"),_=n.get("molecularParam"),I=a.getNodes(),B=I.length,j=r?{x:r.x,y:r.y}:{x:t.x,y:t.y};n.get("dragging")&&(n.get("trigger")==="mousemove"||n.get("trigger")==="click")&&(j=n.get("cacheCenter"));var et=n.get("delegateCenterDiff");et&&(j.x+=et.x,j.y+=et.y),n.updateDelegate(j,c);for(var ut=0;ut<B;ut++){var ft=I[ut].getModel(),gt=ft.x,Mt=ft.y;if(!(isNaN(gt)||isNaN(Mt))){var Ht=(gt-j.x)*(gt-j.x)+(Mt-j.y)*(Mt-j.y);if(!isNaN(Ht)&&Ht<f&&Ht!==0){var se=Math.sqrt(Ht),oe=_*se/(l*se+c),_e=(gt-j.x)/se,Ue=(Mt-j.y)/se;if(ft.x=_e*oe+j.x,ft.y=Ue*oe+j.y,s[ft.id]||(s[ft.id]={x:gt,y:Mt,texts:[]}),o.push(ft),u&&2*se<c)for(var Ne=I[ut],Qe=Ne.getContainer(),dr=Qe.getChildren(),nn=dr.length,kn=0;kn<nn;kn++){var En=dr[kn];En.get("type")==="text"&&(s[ft.id].texts.push({visible:En.get("visible"),shape:En}),En.set("visible",!0))}}}}a.refreshPositions()},e.prototype.restoreCache=function(){for(var t=this,r=t.get("cachedMagnifiedModels"),n=t.get("cachedOriginPositions"),a=r.length,o=0;o<a;o++){var s=r[o],u=s.id,c=n[u];s.x=c.x,s.y=c.y;for(var f=c.texts.length,l=0;l<f;l++){var _=c.texts[l];_.shape.set("visible",_.visible)}}t.set("cachedMagnifiedModels",[]),t.set("cachedOriginPositions",{})},e.prototype.updateParams=function(t){var r=this,n=t.r,a=t.d,o=t.trigger,s=t.minD,u=t.maxD,c=t.minR,f=t.maxR,l=t.scaleDBy,_=t.scaleRBy;isNaN(t.r)||(r.set("r",n),r.set("r2",n*n)),isNaN(a)||r.set("d",a),isNaN(u)||r.set("maxD",u),isNaN(s)||r.set("minD",s),isNaN(f)||r.set("maxR",f),isNaN(c)||r.set("minR",c);var I=r.get("d"),B=r.get("r");if(r.set("molecularParam",(I+1)*B),(o==="mousemove"||o==="click"||o==="drag")&&r.set("trigger",o),l==="drag"||l==="wheel"||l==="unset"){r.set("scaleDBy",l),r.get("delegate").remove(),r.get("delegate").destroy();var j=r.get("dPercentText");j&&(j.remove(),j.destroy())}if(_==="drag"||_==="wheel"||_==="unset"){r.set("scaleRBy",_),r.get("delegate").remove(),r.get("delegate").destroy();var j=r.get("dPercentText");j&&(j.remove(),j.destroy())}},e.prototype.updateDelegate=function(t,r){var n=this,a=this,o=a.get("graph"),s=a.get("delegate");if(!s||s.destroyed){var u=o.get("group"),c=a.get("delegateStyle")||ug;s=u.addShape("circle",{attrs:sv({r:r/1.5,x:t.x,y:t.y},c),name:"lens-shape",draggable:!0}),this.get("trigger")!=="drag"&&(this.get("scaleRBy")==="wheel"?s.on("mousewheel",function(B){a.scaleRByWheel(B)}):this.get("scaleRBy")==="drag"&&(s.on("dragstart",function(B){a.set("dragging",!0),a.set("cacheCenter",{x:B.x,y:B.y}),a.set("dragPrePos",{x:B.x,y:B.y})}),s.on("drag",function(B){a.scaleRByDrag(B)}),s.on("dragend",function(B){a.set("dragging",!1)})),this.get("scaleDBy")==="wheel"?s.on("mousewheel",function(B){n.scaleDByWheel(B)}):this.get("scaleDBy")==="drag"&&(s.on("dragstart",function(B){a.set("dragging",!0),a.set("cacheCenter",{x:B.x,y:B.y}),a.set("dragPrePos",{x:B.x,y:B.y})}),s.on("drag",function(B){n.scaleDByDrag(B)}),s.on("dragend",function(B){a.set("dragging",!1)})))}else s.attr({x:t.x,y:t.y,r:r/1.5});if(a.get("showDPercent")){var f=Math.round((a.get("d")-a.get("minD"))/(a.get("maxD")-a.get("minD"))*100),l=a.get("dPercentText"),_=t.y+r/1.5+16;if(!l||l.destroyed){var I=o.get("group");l=I.addShape("text",{attrs:{text:"".concat(f,"%"),x:t.x,y:_,fill:"#aaa",stroke:"#fff",lineWidth:1,fontSize:12}}),a.set("dPercentText",l)}else l.attr({text:"".concat(f,"%"),x:t.x,y:_})}a.set("delegate",s)},e.prototype.clear=function(){var t=this.get("graph");this.restoreCache(),t.refreshPositions();var r=this.get("delegate");r&&!r.destroyed&&(r.remove(),r.destroy());var n=this.get("dPercentText");n&&!n.destroyed&&(n.remove(),n.destroy())},e.prototype.destroy=function(){this.clear()},e}(uu),Bx=kx,Fx=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),cg=.05;typeof document!="undefined"&&ch()(`
  .g6-component-toolbar {
    position: absolute;
    list-style-type: none;
    padding: 6px;
    left: 0px;
    top: 0px;
    background-color: rgba(255, 255, 255, 0.9);
    border: 1px solid #e2e2e2;
    border-radius: 4px;
    font-size: 12px;
    color: #545454;
    margin: 0;
  }
  .g6-component-toolbar li {
    float: left;
    text-align: center;
    width: 35px;
    height: 24px;
    cursor: pointer;
		list-style-type:none;
    list-style: none;
    margin-left: 0px;
  }
  .g6-component-toolbar li .icon {
    opacity: 0.7;
  }
  .g6-component-toolbar li .icon:hover {
    opacity: 1;
  }
`);var zx=function(e){if(!e)return[];if(e.composedPath)return e.composedPath();for(var t=[],r=e.target;r;){if(t.push(r),r.tagName==="HTML")return t.push(document,window),t;r=r.parentElement}return t},Gx=function(i){Fx(e,i);function e(t){return i.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{handleClick:void 0,getContent:function(r){return`
          <ul class='g6-component-toolbar'>
            <li code='redo'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">
                <path d="M256 682.666667c0-102.741333 66.730667-213.333333 213.333333-213.333334 107.008 0 190.762667 56.576 230.570667 125.354667L611.968 682.666667H853.333333v-241.365334l-91.562666 91.562667C704.768 448.469333 601.130667 384 469.333333 384c-196.096 0-298.666667 150.229333-298.666666 298.666667h85.333333z" fill="" p-id="2041"></path>
              </svg>
            </li>
            <li code='undo'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">
                <path d="M170.666667 682.666667h241.365333l-87.936-87.978667C363.904 525.909333 447.658667 469.333333 554.666667 469.333333c146.602667 0 213.333333 110.592 213.333333 213.333334h85.333333c0-148.437333-102.570667-298.666667-298.666666-298.666667-131.797333 0-235.392 64.469333-292.48 148.821333L170.666667 441.301333V682.666667z" fill="" p-id="2764"></path>
              </svg>
            </li>
            <li  code='zoomOut'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">
                <path d="M658.432 428.736a33.216 33.216 0 0 1-33.152 33.152H525.824v99.456a33.216 33.216 0 0 1-66.304 0V461.888H360.064a33.152 33.152 0 0 1 0-66.304H459.52V296.128a33.152 33.152 0 0 1 66.304 0V395.52H625.28c18.24 0 33.152 14.848 33.152 33.152z m299.776 521.792a43.328 43.328 0 0 1-60.864-6.912l-189.248-220.992a362.368 362.368 0 0 1-215.36 70.848 364.8 364.8 0 1 1 364.8-364.736 363.072 363.072 0 0 1-86.912 235.968l192.384 224.64a43.392 43.392 0 0 1-4.8 61.184z m-465.536-223.36a298.816 298.816 0 0 0 298.432-298.432 298.816 298.816 0 0 0-298.432-298.432A298.816 298.816 0 0 0 194.24 428.8a298.816 298.816 0 0 0 298.432 298.432z"></path>
              </svg>
            </li>
            <li code='zoomIn'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">
                <path d="M639.936 416a32 32 0 0 1-32 32h-256a32 32 0 0 1 0-64h256a32 32 0 0 1 32 32z m289.28 503.552a41.792 41.792 0 0 1-58.752-6.656l-182.656-213.248A349.76 349.76 0 0 1 480 768 352 352 0 1 1 832 416a350.4 350.4 0 0 1-83.84 227.712l185.664 216.768a41.856 41.856 0 0 1-4.608 59.072zM479.936 704c158.784 0 288-129.216 288-288S638.72 128 479.936 128a288.32 288.32 0 0 0-288 288c0 158.784 129.216 288 288 288z" p-id="3853"></path>
              </svg>
            </li>
            <li code='realZoom'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="20" height="24">
                <path d="M384 320v384H320V320h64z m256 0v384H576V320h64zM512 576v64H448V576h64z m0-192v64H448V384h64z m355.968 576H92.032A28.16 28.16 0 0 1 64 931.968V28.032C64 12.608 76.608 0 95.168 0h610.368L896 192v739.968a28.16 28.16 0 0 1-28.032 28.032zM704 64v128h128l-128-128z m128 192h-190.464V64H128v832h704V256z"></path>
              </svg>
            </li>
            <li code='autoZoom'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="20" height="24">
                <path d="M684.288 305.28l0.128-0.64-0.128-0.64V99.712c0-19.84 15.552-35.904 34.496-35.712a35.072 35.072 0 0 1 34.56 35.776v171.008h170.944c19.648 0 35.84 15.488 35.712 34.432a35.072 35.072 0 0 1-35.84 34.496h-204.16l-0.64-0.128a32.768 32.768 0 0 1-20.864-7.552c-1.344-1.024-2.816-1.664-3.968-2.816-0.384-0.32-0.512-0.768-0.832-1.088a33.472 33.472 0 0 1-9.408-22.848zM305.28 64a35.072 35.072 0 0 0-34.56 35.776v171.008H99.776A35.072 35.072 0 0 0 64 305.216c0 18.944 15.872 34.496 35.84 34.496h204.16l0.64-0.128a32.896 32.896 0 0 0 20.864-7.552c1.344-1.024 2.816-1.664 3.904-2.816 0.384-0.32 0.512-0.768 0.768-1.088a33.024 33.024 0 0 0 9.536-22.848l-0.128-0.64 0.128-0.704V99.712A35.008 35.008 0 0 0 305.216 64z m618.944 620.288h-204.16l-0.64 0.128-0.512-0.128c-7.808 0-14.72 3.2-20.48 7.68-1.28 1.024-2.752 1.664-3.84 2.752-0.384 0.32-0.512 0.768-0.832 1.088a33.664 33.664 0 0 0-9.408 22.912l0.128 0.64-0.128 0.704v204.288c0 19.712 15.552 35.904 34.496 35.712a35.072 35.072 0 0 0 34.56-35.776V753.28h170.944c19.648 0 35.84-15.488 35.712-34.432a35.072 35.072 0 0 0-35.84-34.496z m-593.92 11.52c-0.256-0.32-0.384-0.768-0.768-1.088-1.088-1.088-2.56-1.728-3.84-2.688a33.088 33.088 0 0 0-20.48-7.68l-0.512 0.064-0.64-0.128H99.84a35.072 35.072 0 0 0-35.84 34.496 35.072 35.072 0 0 0 35.712 34.432H270.72v171.008c0 19.84 15.552 35.84 34.56 35.776a35.008 35.008 0 0 0 34.432-35.712V720l-0.128-0.64 0.128-0.704a33.344 33.344 0 0 0-9.472-22.848zM512 374.144a137.92 137.92 0 1 0 0.128 275.84A137.92 137.92 0 0 0 512 374.08z"></path>
              </svg>
            </li>
          </ul>
        `},zoomSensitivity:2}},e.prototype.init=function(){var t=this,r=this.get("graph"),n=this.get("getContent"),a=n(r),o=a;(0,h.isString)(a)&&(o=Ko(a));var s=this.get("className");o.setAttribute("class",s||"g6-component-toolbar");var u=this.get("container");u||(u=this.get("graph").get("container")),(0,h.isString)(u)&&(u=document.getElementById(u)),u.appendChild(o),this.set("toolBar",o);var c=this.get("handleClick");o.addEventListener("click",function(l){var _=zx(l).filter(function(B){return B.nodeName==="LI"});if(_.length!==0){var I=_[0].getAttribute("code");I&&(c?c(I,r):t.handleDefaultOperator(I))}});var f=this.get("position");f&&gi(o,{top:"".concat(f.y,"px"),left:"".concat(f.x,"px")}),this.bindUndoRedo()},e.prototype.bindUndoRedo=function(){var t=this.get("graph"),r=document.querySelector('.g6-component-toolbar li[code="undo"]'),n=document.querySelector('.g6-component-toolbar li[code="undo"] svg'),a=document.querySelector('.g6-component-toolbar li[code="redo"]'),o=document.querySelector('.g6-component-toolbar li[code="redo"] svg');!r||!n||!a||!o||(r.setAttribute("style","cursor: not-allowed"),n.setAttribute("style","opacity: 0.4"),a.setAttribute("style","cursor: not-allowed"),o.setAttribute("style","opacity: 0.4"),t.on("stackchange",function(s){var u=s.undoStack,c=s.redoStack,f=u.length,l=c.length;f===0?(r.setAttribute("style","cursor: not-allowed"),n.setAttribute("style","opacity: 0.4")):(r.removeAttribute("style"),n.removeAttribute("style")),l===0?(a.setAttribute("style","cursor: not-allowed"),o.setAttribute("style","opacity: 0.4")):(a.removeAttribute("style"),o.removeAttribute("style"))}))},e.prototype.undo=function(){var t=this.get("graph"),r=t.getUndoStack();if(!(!r||r.length===0)){var n=r.pop();if(n){var a=n.action;t.pushStack(a,(0,h.clone)(n.data),"redo");var o=n.data.before;if(a==="add"&&(o=n.data.after),!o)return;switch(a){case"visible":{Object.keys(o).forEach(function(l){var _=o[l];_&&_.forEach(function(I){var B=t.findById(I.id);I.visible?t.showItem(B,!1):t.hideItem(B,!1)})});break}case"render":case"update":Object.keys(o).forEach(function(l){var _=o[l];_&&_.forEach(function(I){var B=t.findById(I.id);delete I.id,t.updateItem(B,I,!1),B.getType()==="combo"&&t.updateCombo(B)})});break;case"changedata":t.changeData(o,!1);break;case"delete":{Object.keys(o).forEach(function(l){var _=o[l];_&&_.forEach(function(I){var B=I.itemType;delete I.itemType,t.addItem(B,I,!1)})});break}case"add":Object.keys(o).forEach(function(l){var _=o[l];_&&_.forEach(function(I){t.removeItem(I.id,!1)})});break;case"updateComboTree":Object.keys(o).forEach(function(l){var _=o[l];_&&_.forEach(function(I){t.updateComboTree(I.id,I.parentId,!1)})});break;case"createCombo":var s=n.data.after.combos,u=s[s.length-1];Object.keys(o).forEach(function(l){var _=o[l];_&&_.forEach(function(I){t.updateComboTree(I.id,I.parentId,!1)})}),t.removeItem(u.id,!1);break;case"uncombo":var c=o.combos[o.combos.length-1],f=o.nodes.concat(o.combos).map(function(l){return l.id}).filter(function(l){return l!==c.id});t.createCombo(c,f,!1);break;case"layout":t.updateLayout(o,void 0,void 0,!1);break;default:}}}},e.prototype.redo=function(){var t=this.get("graph"),r=t.getRedoStack();if(!(!r||r.length===0)){var n=r.pop();if(n){var a=n.action,o=n.data.after;if(t.pushStack(a,(0,h.clone)(n.data)),a==="delete"&&(o=n.data.before),!o)return;switch(a){case"visible":{Object.keys(o).forEach(function(f){var l=o[f];l&&l.forEach(function(_){var I=t.findById(_.id);_.visible?t.showItem(I,!1):t.hideItem(I,!1)})});break}case"render":case"update":Object.keys(o).forEach(function(f){var l=o[f];l&&l.forEach(function(_){var I=t.findById(_.id);delete _.id,t.updateItem(I,_,!1),I.getType()==="combo"&&t.updateCombo(I)})});break;case"changedata":t.changeData(o,!1);break;case"delete":o.edges&&o.edges.forEach(function(f){t.removeItem(f.id,!1)}),o.nodes&&o.nodes.forEach(function(f){t.removeItem(f.id,!1)}),o.combos&&o.combos.forEach(function(f){t.removeItem(f.id,!1)});break;case"add":{Object.keys(o).forEach(function(f){var l=o[f];l&&l.forEach(function(_){var I=_.itemType;delete _.itemType,t.addItem(I,_,!1)})});break}case"updateComboTree":Object.keys(o).forEach(function(f){var l=o[f];l&&l.forEach(function(_){t.updateComboTree(_.id,_.parentId,!1)})});break;case"createCombo":var s=o.combos[o.combos.length-1];t.createCombo(s,s.children.map(function(f){return f.id}),!1);break;case"uncombo":var u=n.data.before.combos,c=u[u.length-1];t.uncombo(c.id,!1);break;case"layout":t.updateLayout(o,void 0,void 0,!1);break;default:}}}},e.prototype.zoomOut=function(){var t=this.get("graph"),r=t.getZoom(),n=1/(1-cg*this.get("zoomSensitivity")),a=this.get("maxZoom")||t.get("maxZoom");n*r>a||t.zoomTo(r*n)},e.prototype.zoomIn=function(){var t=this.get("graph"),r=t.getZoom(),n=1-cg*this.get("zoomSensitivity"),a=this.get("minZoom")||t.get("minZoom");n*r<a||t.zoomTo(r*n)},e.prototype.realZoom=function(){var t=this.get("graph");t.zoomTo(1)},e.prototype.autoZoom=function(){var t=this.get("graph");t.fitView([20,20])},e.prototype.handleDefaultOperator=function(t){switch(t){case"redo":this.redo();break;case"undo":this.undo();break;case"zoomOut":this.zoomOut();break;case"zoomIn":this.zoomIn();break;case"realZoom":this.realZoom();break;case"autoZoom":this.autoZoom();break;default:}},e.prototype.destroy=function(){var t=this.get("toolBar");if(t){var r=this.get("container");r||(r=this.get("graph").get("container")),(0,h.isString)(r)&&(r=document.getElementById(r)),r.removeChild(t)}var n=this.get("handleClick");n&&t.removeEventListener("click",n)},e}(uu),Ux=Gx,Wx=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();typeof document!="undefined"&&ch()(`
  .g6-component-tooltip {
    border: 1px solid #e2e2e2;
    border-radius: 4px;
    font-size: 12px;
    color: #545454;
    background-color: rgba(255, 255, 255, 0.9);
    padding: 10px 8px;
    box-shadow: rgb(174, 174, 174) 0px 0px 10px;
  }
  .tooltip-type {
    padding: 0;
    margin: 0;
  }
  .tooltip-id {
    color: #531dab;
  }
`);var Yx=function(i){Wx(e,i);function e(t){return i.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{offsetX:6,offsetY:6,getContent:function(r){return`
          <h4 class='tooltip-type'>\u7C7B\u578B\uFF1A`.concat(r.item.getType(),`</h4>
          <span class='tooltip-id'>ID\uFF1A`).concat(r.item.getID(),`</span>
        `)},shouldBegin:function(r){return!0},itemTypes:["node","edge","combo"],trigger:"mouseenter",fixToNode:void 0}},e.prototype.getEvents=function(){return this.get("trigger")==="click"?{"node:click":"onClick","edge:click":"onClick","combo:click":"onClick","canvas:click":"onMouseLeave",afterremoveitem:"onMouseLeave",contextmenu:"onMouseLeave",drag:"onMouseLeave"}:{"node:mouseenter":"onMouseEnter","node:mouseleave":"onMouseLeave","node:mousemove":"onMouseMove","edge:mouseenter":"onMouseEnter","edge:mouseleave":"onMouseLeave","edge:mousemove":"onMouseMove","combo:mouseenter":"onMouseEnter","combo:mouseleave":"onMouseLeave","combo:mousemove":"onMouseMove",afterremoveitem:"onMouseLeave",contextmenu:"onMouseLeave","node:drag":"onMouseLeave"}},e.prototype.init=function(){var t=this,r=t.get("className")||"g6-component-tooltip",n=Ko("<div class='".concat(r,"'></div>")),a=t.get("container");a||(a=t.get("graph").get("container")),(0,h.isString)(a)&&(a=document.getElementById(a)),gi(n,{position:"absolute",visibility:"hidden",display:"none"}),a.appendChild(n),t.get("trigger")!=="click"&&(n.addEventListener("mouseenter",function(o){gi(n,{visibility:"visible",display:"unset"})}),n.addEventListener("mouseleave",function(o){t.hideTooltip()})),t.set("tooltip",n)},e.prototype.onClick=function(t){var r=this.get("itemTypes");if(!(t.item&&t.item.getType&&r.indexOf(t.item.getType())===-1)){var n=t.item,a=this.get("graph");this.currentTarget===n?(this.currentTarget=null,this.hideTooltip(),a.emit("tooltipchange",{item:t.item,action:"hide"})):(this.currentTarget=n,this.showTooltip(t),a.emit("tooltipchange",{item:t.item,action:"show"}))}},e.prototype.onMouseEnter=function(t){var r=this.get("itemTypes");if(!(t.item&&t.item.getType&&r.indexOf(t.item.getType())===-1)){var n=t.item,a=this.get("graph");this.currentTarget=n,this.showTooltip(t),a.emit("tooltipchange",{item:t.item,action:"show"})}},e.prototype.onMouseMove=function(t){var r=this.get("itemTypes");t.item&&t.item.getType&&r.indexOf(t.item.getType())===-1||!this.currentTarget||t.item!==this.currentTarget||this.showTooltip(t)},e.prototype.onMouseLeave=function(){this.hideTooltip();var t=this.get("graph");t.emit("tooltipchange",{item:this.currentTarget,action:"hide"}),this.currentTarget=null},e.prototype.clearContainer=function(){var t=this.get("tooltip");t&&(t.innerHTML="")},e.prototype.showTooltip=function(t){if(t.item){var r=this.get("itemTypes");if(!(t.item.getType&&r.indexOf(t.item.getType())===-1)){var n=this.get("tooltip"),a=this.get("getContent"),o=a(t);(0,h.isString)(o)?n.innerHTML=o:(this.clearContainer(),n.appendChild(o)),this.updatePosition(t)}}},e.prototype.hideTooltip=function(){var t=this.get("tooltip");t&&gi(t,{visibility:"hidden",display:"none"})},e.prototype.updatePosition=function(t){var r=this.get("shouldBegin"),n=this.get("tooltip");if(!r(t)){gi(n,{visibility:"hidden",display:"none"});return}var a=this.get("graph"),o=a.get("width"),s=a.get("height"),u=this.get("offsetX")||0,c=this.get("offsetY")||0,f=a.getPointByClient(t.clientX,t.clientY),l=this.get("fixToNode"),_=t.item;if(_.getType&&_.getType()==="node"&&l&&(0,h.isArray)(l)&&l.length>=2){var I=_.getBBox();f={x:I.minX+I.width*l[0],y:I.minY+I.height*l[1]}}var B=a.getCanvasByPoint(f.x,f.y),j=B.x,et=B.y,ut=a.getContainer(),ft={x:j+ut.offsetLeft+u,y:et+ut.offsetTop+c};gi(n,{visibility:"visible",display:"unset"});var gt=n.getBoundingClientRect();j+gt.width+u>o&&(ft.x-=gt.width+u),et+gt.height+c>s&&(ft.y-=gt.height+c,ft.y<0&&(ft.y=0)),gi(n,{left:"".concat(ft.x,"px"),top:"".concat(ft.y,"px")})},e.prototype.hide=function(){this.onMouseLeave()},e.prototype.destroy=function(){var t=this.get("tooltip");if(t){var r=this.get("container");r||(r=this.get("graph").get("container")),(0,h.isString)(r)&&(r=document.getElementById(r)),r.removeChild(t)}},e}(uu),Xx=Yx,fg="timebarstartplay",lg="timebarendplay",Ic="valuechange",Cl="timebarConfigChanged",Jf="playPauseBtn",Id="nextStepBtn",Od="preStepBtn",qS={opacity:.5,fill:"#000"},QS={opacity:.5,fill:"#000",r:5},JS={fill:"#fff",fontSize:12},jx=function(){function i(e){var t=e.x,r=t===void 0?0:t,n=e.y,a=n===void 0?0:n,o=e.container,s=e.text,u=e.padding,c=u===void 0?[4,4,4,4]:u,f=e.className,l=f===void 0?"g6-component-timebar-tooltip":f,_=e.backgroundColor,I=_===void 0?"#000":_,B=e.textColor,j=B===void 0?"#fff":B,et=e.opacity,ut=et===void 0?.8:et,ft=e.fontSize,gt=ft===void 0?12:ft;this.container=o,this.className=l,this.backgroundColor=I,this.textColor=j,this.x=r,this.y=a,this.text=s,this.padding=c,this.opacity=ut,this.fontSize=gt,this.render()}return i.prototype.render=function(){var e=this,t=e.className,r=e.x,n=e.y,a=e.backgroundColor,o=e.textColor,s=e.text,u=e.padding,c=e.opacity,f=e.fontSize,l=e.container,_=Ko("<div class='".concat(t,`' style="position: absolute; width: fit-content; height: fit-content; opacity: `).concat(c,'"></div>'));(0,h.isString)(l)&&(l=document.getElementById(l)),l.appendChild(_),e.parentHeight=l.offsetHeight,e.parentWidth=l.offsetWidth,gi(_,{visibility:"hidden",top:0,left:0});var I=Ko(`
      <div style='position: absolute; white-space:nowrap; background-color: `.concat(a,"; font-size: ").concat(f,"px; border-radius: 4px; width: fit-content; height: fit-content; color: ").concat(o,"; padding: ").concat(u[0],"px ").concat(u[1],"px ").concat(u[2],"px ").concat(u[3],"px'></div>"));I.innerHTML=s,_.appendChild(I),e.backgroundDOM=I;var B=Ko("<div style='position: absolute; width: 0px; height: 0px; border-left: 5px solid transparent; border-right: 5px solid transparent; border-top: 10px solid ".concat(a,"'></div>"));_.appendChild(B),e.arrowDOM=B,e.container=_},i.prototype.show=function(e){var t=this,r=e.text,n=e.x,a=e.y,o=e.clientX,s=e.clientY;t.backgroundDOM.innerHTML=r;var u=t.backgroundDOM.offsetWidth,c=t.backgroundDOM.offsetHeight,f=t.arrowDOM.offsetWidth,l=t.arrowDOM.offsetHeight;gi(t.container,{top:"".concat(-c-l,"px"),left:"".concat(n,"px"),visibility:"visible"}),gi(t.backgroundDOM,{marginLeft:"".concat(-u/2,"px")}),gi(t.arrowDOM,{marginLeft:"".concat(-f/2,"px"),top:"".concat(c,"px")});var _=n-u/2,I=n+u/2;_<0?gi(t.backgroundDOM,{marginLeft:"".concat(-u/2-_,"px")}):I>t.parentWidth&&gi(t.backgroundDOM,{marginLeft:"".concat(-u/2-I+t.parentWidth+12,"px")})},i.prototype.hide=function(){gi(this.container,{top:0,left:0,visibility:"hidden"})},i}(),Vx=jx,uv=function(){return uv=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},uv.apply(this,arguments)},Hx=function(){function i(e){this.config=(0,h.deepMix)({},e),this.init()}return i.prototype.update=function(e){this.config=(0,h.deepMix)({},this.config,e),this.updateElement(),this.renderMarker()},i.prototype.init=function(){this.initElement(),this.renderMarker()},i.prototype.initElement=function(){var e=this.config,t=e.group,r=e.style,n=r.scale,a=n===void 0?1:n,o=r.offsetX,s=o===void 0?0:o,u=r.offsetY,c=u===void 0?0:u,f=this.config.x+s,l=this.config.y+c,_=t.addGroup({name:Jf});this.startMarkerGroup=_.addGroup({name:Jf}),this.circle=t.addShape("circle",{attrs:uv({x:f,y:l,r:this.config.r*a},r),name:Jf}),this.startMarker=this.startMarkerGroup.addShape("path",{attrs:{path:this.getStartMarkerPath(f,l,a),fill:r.stroke||"#aaa"},name:"start-marker"}),this.pauseMarkerGroup=_.addGroup({name:Jf});var I=.25*this.config.r*a,B=.5*this.config.r*Math.sqrt(3)*a;this.pauseLeftMarker=this.pauseMarkerGroup.addShape("rect",{attrs:{x:f-.375*this.config.r*a,y:l-B/2,width:I,height:B,fill:r.stroke||"#aaa",lineWidth:0}}),this.pauseRightMarker=this.pauseMarkerGroup.addShape("rect",{attrs:{x:f+1/8*this.config.r*a,y:l-B/2,width:I,height:B,fill:r.stroke||"#aaa",lineWidth:0}})},i.prototype.updateElement=function(){var e=this.config.style,t=e.scale,r=t===void 0?1:t,n=e.offsetX,a=n===void 0?0:n,o=e.offsetY,s=o===void 0?0:o,u=this.config.x+a,c=this.config.y+s;this.circle.attr("x",u),this.circle.attr("y",c),this.circle.attr("r",this.config.r*r),this.startMarker.attr("path",this.getStartMarkerPath(u,c,r));var f=.25*this.config.r*r,l=.5*this.config.r*Math.sqrt(3)*r;this.pauseLeftMarker.attr("x",u-(1/4+1/8)*this.config.r*r),this.pauseLeftMarker.attr("y",c-l/2),this.pauseLeftMarker.attr("width",f),this.pauseLeftMarker.attr("height",l),this.pauseRightMarker.attr("x",u+1/8*this.config.r*r),this.pauseRightMarker.attr("y",c-l/2),this.pauseRightMarker.attr("width",f),this.pauseRightMarker.attr("height",l)},i.prototype.renderMarker=function(){this.config.isPlay?(this.startMarkerGroup.hide(),this.pauseMarkerGroup.show()):(this.startMarkerGroup.show(),this.pauseMarkerGroup.hide())},i.prototype.getStartMarkerPath=function(e,t,r){var n=.5*this.config.r*Math.sqrt(3)*r;return[["M",e-n/Math.sqrt(3)/2,t-n/2],["L",e+n/Math.sqrt(3),t],["L",e-n/Math.sqrt(3)/2,t+n/2]]},i}(),Zx=Hx,xs=function(){return xs=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},xs.apply(this,arguments)},Dd=pt,Kx="#aaa",$x="green",qx={fill:"#aaa",fillOpacity:.35,stroke:"#aaa"},Qx={fill:"#fff"},Jx={fill:"green"},dg={pointer:{fill:"#aaa",lineWidth:0},scroller:{stroke:"#aaa",fill:"#aaa",lineWidth:1,lineAppendWidth:5,cursor:"pointer"},text:{fill:"#aaa",textBaseline:"top"}},hg={check:{stroke:"green",lineWidth:3},box:{fill:"#fff",stroke:"#aaa",lineWidth:2,radius:3,width:12,height:12},text:{fill:"#aaa",fontSize:12,textBaseline:"top"}},tb={speed:1,loop:!1,fill:"#fff",stroke:"#fff",hideTimeTypeController:!1,preBtnStyle:{fill:"#aaa",stroke:"#aaa"},nextBtnStyle:{fill:"#aaa",stroke:"#aaa"},playBtnStyle:{fill:"#aaa",stroke:"#aaa",fillOpacity:.05},speedControllerStyle:dg,timeTypeControllerStyle:hg},cv=110,tl=50,Oc={SINGLE:"single",RANGE:"range"},eb=function(){function i(e){this.controllerCfg=(0,h.deepMix)({},tb,e),this.group=e.group,this.controllerGroup=this.group.addGroup({name:"controller-group"}),this.speedAxisY=[],this.currentSpeed=this.controllerCfg.speed,this.currentType=this.controllerCfg.defaultTimeType||Oc.RANGE,this.fontFamily=e.fontFamily||"Arial, sans-serif",this.init()}return i.prototype.init=function(){this.renderPlayButton()},i.prototype.getNextMarkerPath=function(e,t,r){return[["M",e,t-r],["L",e+r,t],["L",e,t+r],["Z",e,t-r],["M",e,t],["L",e-r,t-r],["L",e-r,t+r],["Z"]]},i.prototype.getPreMarkerPath=function(e,t,r){return[["M",e,t-r],["L",e-r,t],["L",e,t+r],["L",e,t-r],["M",e,t],["L",e+r,t-r],["L",e+r,t+r],["Z"]]},i.prototype.renderPlayButton=function(){var e=this.controllerCfg,t=e.width,r=e.height,n=e.x,a=e.y,o=e.hideTimeTypeController,s=e.fill,u=s===void 0?Kx:s,c=e.stroke,f=c===void 0?$x:c,l=e.containerStyle,_=l===void 0?{}:l,I=xs(xs({},qx),e.playBtnStyle||{}),B=xs(xs({},Qx),e.preBtnStyle||{}),j=xs(xs({},Jx),e.nextBtnStyle||{}),et=r/2-5,ut=a+10,ft=this.controllerGroup.addShape("rect",{attrs:xs({x:n,y:ut,width:t,height:r,stroke:f,fill:u},_),name:"container-rect"});this.playButton?this.playButton.update({x:t/2,y:ut,r:et}):this.playButton=new Zx({group:this.controllerGroup,x:t/2,y:ut+et+5,r:et,isPlay:this.isPlay,style:I});var gt=B.offsetX||0,Mt=B.offsetY||0,Ht=(B.scale||1)*et;this.controllerGroup.addShape("path",{attrs:xs({path:this.getPreMarkerPath(t/2-5*et+gt,ut+et+5+Mt,Ht*.5)},B),name:Od});var se=j.offsetX||0,oe=j.offsetY||0,_e=(j.scale||1)*et;this.controllerGroup.addShape("path",{attrs:xs({path:this.getNextMarkerPath(t/2+5*et+se,ut+et+5+oe,_e*.5)},j),name:Id}),ft.toBack(),this.renderSpeedBtn(),o||this.renderToggleTime(),this.bindEvent();var Ue=this.controllerCfg.scale,Ne=Ue===void 0?1:Ue,Qe=this.controllerGroup.getCanvasBBox(),dr=(Qe.maxX+Qe.minX)/2,nn=(Qe.maxY+Qe.minY)/2,kn=Dd([1,0,0,0,1,0,0,0,1],[["t",-dr,-nn],["s",Ne,Ne],["t",dr,nn]]);this.controllerGroup.setMatrix(kn)},i.prototype.renderSpeedBtn=function(){var e=this.controllerCfg,t=e.y,r=e.width,n=e.hideTimeTypeController,a=xs(xs({},dg),this.controllerCfg.speedControllerStyle||{}),o=a.scroller,s=o===void 0?{}:o,u=a.text,c=u===void 0?{}:u,f=a.pointer,l=f===void 0?{}:f,_=a.scale,I=_===void 0?1:_,B=a.offsetX,j=B===void 0?0:B,et=a.offsetY,ut=et===void 0?0:et,ft=this.controllerGroup.addGroup({name:"speed-group"});this.speedGroup=ft;var gt=[],Mt=5;this.speedAxisY=[19,22,26,32,39];for(var Ht=0;Ht<5;Ht++){var se=t+this.speedAxisY[Ht],oe=r-(n?tl:cv);ft.addShape("line",{attrs:xs({x1:oe,x2:oe+15,y1:se,y2:se},s),speed:Mt,name:"speed-rect"}),this.speedAxisY[Ht]=se,gt.push(Mt),Mt=Mt-1}this.speedText=ft.addShape("text",{attrs:xs({x:r-(n?tl:cv)+20,y:this.speedAxisY[0]+4,text:"1.0X",fontFamily:this.fontFamily||"Arial, sans-serif"},c),name:"speed-text"}),this.speedPoint=ft.addShape("path",{attrs:xs({path:this.getPointerPath(r-(n?tl:cv),0),matrix:[1,0,0,0,1,0,0,this.speedAxisY[4],1]},l),name:"speed-pointer"});var _e=this.speedGroup.getCanvasBBox(),Ue=(_e.maxX+_e.minX)/2,Ne=(_e.maxY+_e.minY)/2,Qe=this.speedGroup.getMatrix()||[1,0,0,0,1,0,0,0,1];Qe=Dd(Qe,[["t",-Ue,-Ne],["s",I,I],["t",Ue+j*I,Ne+ut*I]]),this.speedGroup.setMatrix(Qe)},i.prototype.getPointerPath=function(e,t){return[["M",e,t],["L",e-10,t-4],["L",e-10,t+4],["Z"]]},i.prototype.renderToggleTime=function(){var e,t,r=this.controllerCfg,n=r.width,a=r.defaultTimeType,o=xs(xs({},hg),this.controllerCfg.timeTypeControllerStyle||{}),s=o.scale,u=s===void 0?1:s,c=o.offsetX,f=c===void 0?0:c,l=o.offsetY,_=l===void 0?0:l,I=o.box,B=I===void 0?{}:I,j=o.check,et=j===void 0?{}:j,ut=o.text,ft=ut===void 0?{}:ut;this.toggleGroup=this.controllerGroup.addGroup({name:"toggle-group"});var gt=a===Oc.SINGLE;this.toggleGroup.addShape("rect",{attrs:xs({x:n-tl,y:this.speedAxisY[0]+3.5},B),isChecked:gt,name:"toggle-model"}),this.checkedIcon=this.toggleGroup.addShape("path",{attrs:xs({path:[["M",n-tl+3,this.speedAxisY[1]+6],["L",n-tl+7,this.speedAxisY[1]+10],["L",n-tl+12,this.speedAxisY[1]+4]]},et),capture:!1,name:"check-icon"}),gt||this.checkedIcon.hide(),this.checkedText=this.toggleGroup.addShape("text",{attrs:xs({text:gt?((e=this.controllerCfg)===null||e===void 0?void 0:e.timeRangeControllerText)||"\u65F6\u95F4\u8303\u56F4":((t=this.controllerCfg)===null||t===void 0?void 0:t.timePointControllerText)||"\u5355\u4E00\u65F6\u95F4",x:n-tl+15,y:this.speedAxisY[0]+4,fontFamily:typeof window!="undefined"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif"},ft),name:"checked-text"});var Mt=this.toggleGroup.getCanvasBBox(),Ht=(Mt.maxX+Mt.minX)/2,se=(Mt.maxY+Mt.minY)/2,oe=this.toggleGroup.getMatrix()||[1,0,0,0,1,0,0,0,1];oe=Dd(oe,[["t",-Ht,-se],["s",u,u],["t",Ht+f*u,se+_*u]]),this.toggleGroup.setMatrix(oe)},i.prototype.bindEvent=function(){var e=this;this.speedGroup.on("speed-rect:click",function(t){var r=t.target.attr("y1"),n=e.speedPoint.attr("matrix"),a=e.speedAxisY.indexOf(n[7]||0),o=e.speedAxisY.indexOf(r),s=e.speedAxisY[o]-e.speedAxisY[a];n=Dd(n,[["t",0,s]]),e.speedPoint.setMatrix(n),e.currentSpeed=e.speedAxisY.length-o,e.speedText.attr("text","".concat(e.currentSpeed,".0X")),e.group.emit(Cl,{speed:e.currentSpeed,type:e.currentType})}),this.speedGroup.on("mousewheel",function(t){t.preventDefault();var r=e.speedPoint.attr("matrix")||[1,0,0,0,1,0,0,0,1],n=r[7],a=e.speedAxisY.indexOf(n);if(a===-1){var o=1/0;e.speedAxisY.forEach(function(u,c){var f=Math.abs(u-n);o>f&&(o=f,a=c)})}t.originalEvent.deltaY>0?a=Math.max(0,a-1):a=Math.min(e.speedAxisY.length-1,a+1);var s=e.speedAxisY[a]-n;r=Dd(r,[["t",0,s]]),e.speedPoint.setMatrix(r),e.currentSpeed=e.speedAxisY.length-a,e.speedText.attr("text","".concat(e.currentSpeed,".0X")),e.group.emit(Cl,{speed:e.currentSpeed,type:e.currentType})}),this.toggleGroup&&this.toggleGroup.on("toggle-model:click",function(t){var r,n,a=t.target.get("isChecked");a?(e.checkedIcon.hide(),e.checkedText.attr("text",((n=e.controllerCfg)===null||n===void 0?void 0:n.timePointControllerText)||"\u5355\u4E00\u65F6\u95F4"),e.currentType=Oc.RANGE):(e.checkedIcon.show(),e.checkedText.attr("text",((r=e.controllerCfg)===null||r===void 0?void 0:r.timeRangeControllerText)||"\u65F6\u95F4\u8303\u56F4"),e.currentType=Oc.SINGLE),t.target.set("isChecked",!a),e.group.emit(Cl,{type:e.currentType,speed:e.currentSpeed})})},i.prototype.destroy=function(){this.speedGroup.off("speed-rect:click"),this.toggleGroup&&(this.toggleGroup.off("toggle-model:click"),this.toggleGroup.destroy()),this.speedGroup.destroy()},i}(),vg=eb,Ld=function(){return Ld=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},Ld.apply(this,arguments)},rb=pt,nb={fill:"#5B8FF9"},ab={fill:"#e6e8e9"},ib=function(){function i(e){this.frameCount=0,this.fontFamily="Arial, sans-serif";var t=e.graph,r=e.canvas,n=e.group,a=e.width,o=e.height,s=e.padding,u=e.data,c=e.start,f=e.end,l=e.x,_=l===void 0?0:l,I=e.y,B=I===void 0?0:I,j=e.tickLabelFormatter,et=e.selectedTickStyle,ut=et===void 0?nb:et,ft=e.unselectedTickStyle,gt=ft===void 0?ab:ft,Mt=e.tooltipBackgroundColor,Ht=e.tooltipFomatter,se=e.tickLabelStyle,oe=e.controllerCfg,_e=oe===void 0?{speed:1}:oe;this.graph=t,this.group=n,this.sliceGroup=n.addGroup({name:"slice-group"}),this.canvas=r,this.width=a,this.height=o,this.padding=s,this.data=u,this.start=c,this.end=f,this.tickLabelFormatter=j,this.tickLabelStyle=se||{},this.selectedTickStyle=ut,this.unselectedTickStyle=gt,this.controllerCfg=_e,this.currentSpeed=_e.speed||1,this.x=_,this.y=B,this.tooltipBackgroundColor=Mt,this.tooltipFomatter=Ht,this.fontFamily=typeof window!="undefined"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif",this.renderSlices(),this.initEvent()}return i.prototype.renderSlices=function(){var e=this,t=this,r=t.width,n=t.height,a=t.padding,o=t.data,s=t.start,u=t.end,c=t.tickLabelFormatter,f=t.selectedTickStyle,l=t.unselectedTickStyle,_=t.tickLabelStyle,I=r-2*a,B=10,j=4,et=3*a+j+B,ut=n-et-2*a,ft=2,gt=o.length,Mt=(I-ft*(gt-1))/gt;this.tickWidth=Mt;var Ht=this.sliceGroup,se=[],oe=[],_e=Math.round(gt*s),Ue=Math.round(gt*u);this.startTickRectId=_e,this.endTickRectId=Ue;var Ne=_.rotate;delete _.rotate,o.forEach(function(dr,nn){var kn=nn>=_e&&nn<=Ue,En=kn?f:l,Kr=Ht.addShape("rect",{attrs:Ld({x:a+nn*(Mt+ft),y:a,width:Mt,height:ut},En),draggable:!0,name:"tick-rect-".concat(nn)}),Jn=Ht.addShape("rect",{attrs:{x:a+nn*Mt+ft*(2*nn-1)/2,y:a,width:nn===0||nn===gt-1?Mt+ft/2:Mt+ft,height:ut,fill:"#fff",opacity:0},draggable:!0,name:"pick-rect-".concat(nn)});Jn.toFront();var Kn=Kr.getBBox(),$r=(Kn.minX+Kn.maxX)/2;se.push({rect:Kr,pickRect:Jn,value:dr.date,x:$r,y:Kn.minY});var xn;if(c?(xn=c(dr),!(0,h.isString)(xn)&&xn&&(xn=dr.date)):nn%Math.round(gt/10)===0&&(xn=dr.date),xn){oe.push(xn);var zn=Kn.maxY+a*2;Ht.addShape("line",{attrs:{stroke:"#BFBFBF",x1:$r,y1:zn,x2:$r,y2:zn+j},name:"tick-line"});var Gn=zn+j+a,ia=Ht.addShape("text",{attrs:Ld({fill:"#8c8c8c",stroke:"#fff",lineWidth:1,x:$r,y:Gn,textAlign:"center",text:xn,textBaseline:"top",fontSize:10,fontFamily:e.fontFamily||"Arial, sans-serif"},_),capture:!1,name:"tick-label"}),ha=ia.getBBox();if(ha.maxX>r?ia.attr("textAlign","right"):ha.minX<0&&ia.attr("textAlign","left"),(0,h.isNumber)(Ne)&&oe.length!==10){var Xa=rb([1,0,0,0,1,0,0,0,1],[["t",-$r,-Gn],["r",Ne],["t",$r-5,Gn+2]]);ia.attr({textAlign:"left",matrix:Xa})}oe.length===1?ia.attr({textAlign:"left"}):oe.length===10&&ia.attr({textAlign:"right"})}}),this.tickRects=se;var Qe=this.group;this.currentSpeed=1,this.controllerBtnGroup=new vg(Ld({group:Qe,x:this.x,y:this.y+n+5,width:r,height:40,hideTimeTypeController:!0,speed:this.currentSpeed,fontFamily:this.fontFamily||"Arial, sans-serif"},this.controllerCfg))},i.prototype.initEvent=function(){var e=this,t=this.sliceGroup;t.on("click",function(f){var l=f.target;if(!(l.get("type")!=="rect"||!l.get("name"))){var _=parseInt(l.get("name").split("-")[2],10);if(!isNaN(_)){var I=e.tickRects,B=e.unselectedTickStyle;I.forEach(function(ft){ft.rect.attr(B)});var j=e.selectedTickStyle;I[_].rect.attr(j),e.startTickRectId=_,e.endTickRectId=_;var et=I.length,ut=_/et;e.graph.emit(Ic,{value:[ut,ut]})}}}),t.on("dragstart",function(f){var l=e.tickRects,_=e.unselectedTickStyle;l.forEach(function(ft){ft.rect.attr(_)});var I=f.target,B=parseInt(I.get("name").split("-")[2],10),j=e.selectedTickStyle;l[B].rect.attr(j),e.startTickRectId=B;var et=l.length,ut=B/et;e.graph.emit(Ic,{value:[ut,ut]}),e.dragging=!0}),t.on("dragover",function(f){if(e.dragging&&f.target.get("type")==="rect"){for(var l=parseInt(f.target.get("name").split("-")[2],10),_=e.startTickRectId,I=e.tickRects,B=e.selectedTickStyle,j=e.unselectedTickStyle,et=0;et<I.length;et++){var ut=et>=_&&et<=l?B:j;I[et].rect.attr(ut)}var ft=I.length;e.endTickRectId=l;var gt=_/ft,Mt=l/ft;e.graph.emit(Ic,{value:[gt,Mt]})}}),t.on("drop",function(f){if(e.dragging&&(e.dragging=!1,f.target.get("type")==="rect")){var l=e.startTickRectId,_=parseInt(f.target.get("name").split("-")[2],10);if(!(_<l)){var I=e.selectedTickStyle,B=e.tickRects;B[_].rect.attr(I),e.endTickRectId=_;var j=B.length,et=l/j,ut=_/j;e.graph.emit(Ic,{value:[et,ut]})}}});var r=this,n=r.tooltipBackgroundColor,a=r.tooltipFomatter,o=r.canvas,s=new Vx({container:o.get("container"),backgroundColor:n}),u=this.tickRects;u.forEach(function(f){var l=f.pickRect;l.on("mouseenter",function(_){var I=_.target;if(I.get("type")==="rect"){var B=parseInt(I.get("name").split("-")[2],10),j=o.getClientByPoint(u[B].x,u[B].y);s.show({x:u[B].x,y:u[B].y,clientX:j.x,clientY:j.y,text:a?a(u[B].value):u[B].value})}}),l.on("mouseleave",function(_){s.hide()})});var c=this.group;c.on("".concat(Jf,":click"),function(){e.isPlay=!e.isPlay,e.changePlayStatus()}),c.on("".concat(Id,":click"),function(){e.updateStartEnd(1)}),c.on("".concat(Od,":click"),function(){e.updateStartEnd(-1)}),c.on(Cl,function(f){var l=f.type,_=f.speed;e.currentSpeed=_})},i.prototype.changePlayStatus=function(e){e===void 0&&(e=!0),this.controllerBtnGroup.playButton.update({isPlay:this.isPlay}),this.isPlay?(this.playHandler=this.startPlay(),this.graph.emit(fg,null)):this.playHandler&&(typeof window!="undefined"&&window.cancelAnimationFrame(this.playHandler),e&&this.graph.emit(lg,null))},i.prototype.startPlay=function(){var e=this;return typeof window!="undefined"?window.requestAnimationFrame(function(){var t=e.currentSpeed;e.frameCount%(60/t)===0&&(e.frameCount=0,e.updateStartEnd(1)),e.frameCount++,e.isPlay&&(e.playHandler=e.startPlay())}):void 0},i.prototype.updateStartEnd=function(e){var t=this,r=this.tickRects,n=r.length,a=this.unselectedTickStyle,o=this.selectedTickStyle,s=t.endTickRectId;if(e>0?t.endTickRectId++:(r[t.endTickRectId].rect.attr(a),t.endTickRectId--),s!==t.startTickRectId)t.endTickRectId<t.startTickRectId&&(t.startTickRectId=t.endTickRectId);else{for(var u=t.startTickRectId;u<=t.endTickRectId-1;u++)r[u].rect.attr(a);t.startTickRectId=t.endTickRectId}if(r[t.endTickRectId]){r[t.endTickRectId].rect.attr(o);var c=t.startTickRectId/n,f=t.endTickRectId/n;this.graph.emit(Ic,{value:[c,f]})}},i.prototype.destory=function(){var e=this.sliceGroup;e.off("click"),e.off("dragstart"),e.off("dragover"),e.off("drop"),this.tickRects.forEach(function(t){var r=t.pickRect;r.off("mouseenter"),r.off("mouseleave")}),this.tickRects.length=0,e.off("".concat(Jf,":click")),e.off("".concat(Id,":click")),e.off("".concat(Od,":click")),e.off(Cl),this.sliceGroup.destroy()},i}(),ob=ib,pg={};function sb(i){return pg[i]}function Dc(i,e){pg[i]=e}var ub=function(){function i(e){this.type="base",this.isCategory=!1,this.isLinear=!1,this.isContinuous=!1,this.isIdentity=!1,this.values=[],this.range=[0,1],this.ticks=[],this.__cfg__=e,this.initCfg(),this.init()}return i.prototype.translate=function(e){return e},i.prototype.change=function(e){(0,h.assign)(this.__cfg__,e),this.init()},i.prototype.clone=function(){return this.constructor(this.__cfg__)},i.prototype.getTicks=function(){var e=this;return(0,h.map)(this.ticks,function(t,r){return(0,h.isObject)(t)?t:{text:e.getText(t,r),tickValue:t,value:e.scale(t)}})},i.prototype.getText=function(e,t){var r=this.formatter,n=r?r(e,t):e;return(0,h.isNil)(n)||!(0,h.isFunction)(n.toString)?"":n.toString()},i.prototype.getConfig=function(e){return this.__cfg__[e]},i.prototype.init=function(){(0,h.assign)(this,this.__cfg__),this.setDomain(),(0,h.isEmpty)(this.getConfig("ticks"))&&(this.ticks=this.calculateTicks())},i.prototype.initCfg=function(){},i.prototype.setDomain=function(){},i.prototype.calculateTicks=function(){var e=this.tickMethod,t=[];if((0,h.isString)(e)){var r=sb(e);if(!r)throw new Error("There is no method to to calculate ticks!");t=r(this)}else(0,h.isFunction)(e)&&(t=e(this));return t},i.prototype.rangeMin=function(){return this.range[0]},i.prototype.rangeMax=function(){return this.range[1]},i.prototype.calcPercent=function(e,t,r){return(0,h.isNumber)(e)?(e-t)/(r-t):NaN},i.prototype.calcValue=function(e,t,r){return t+e*(r-t)},i}(),fv=ub,cb=function(i){(0,y.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="cat",t.isCategory=!0,t}return e.prototype.buildIndexMap=function(){if(!this.translateIndexMap){this.translateIndexMap=new Map;for(var t=0;t<this.values.length;t++)this.translateIndexMap.set(this.values[t],t)}},e.prototype.translate=function(t){this.buildIndexMap();var r=this.translateIndexMap.get(t);return r===void 0&&(r=(0,h.isNumber)(t)?t:NaN),r},e.prototype.scale=function(t){var r=this.translate(t),n=this.calcPercent(r,this.min,this.max);return this.calcValue(n,this.rangeMin(),this.rangeMax())},e.prototype.invert=function(t){var r=this.max-this.min,n=this.calcPercent(t,this.rangeMin(),this.rangeMax()),a=Math.round(r*n)+this.min;return a<this.min||a>this.max?NaN:this.values[a]},e.prototype.getText=function(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var a=t;return(0,h.isNumber)(t)&&!this.values.includes(t)&&(a=this.values[a]),i.prototype.getText.apply(this,(0,y.__spreadArrays)([a],r))},e.prototype.initCfg=function(){this.tickMethod="cat"},e.prototype.setDomain=function(){if((0,h.isNil)(this.getConfig("min"))&&(this.min=0),(0,h.isNil)(this.getConfig("max"))){var t=this.values.length;this.max=t>1?t-1:t}this.translateIndexMap&&(this.translateIndexMap=void 0)},e}(fv),Pd=cb,gg=/d{1,4}|M{1,4}|YY(?:YY)?|S{1,3}|Do|ZZ|Z|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g,el="\\d\\d?",rl="\\d\\d",fb="\\d{3}",lb="\\d{4}",Nd="[^\\s]+",mg=/\[([^]*?)\]/gm;function yg(i,e){for(var t=[],r=0,n=i.length;r<n;r++)t.push(i[r].substr(0,e));return t}var xg=function(i){return function(e,t){var r=t[i].map(function(a){return a.toLowerCase()}),n=r.indexOf(e.toLowerCase());return n>-1?n:null}};function nl(i){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];for(var r=0,n=e;r<n.length;r++){var a=n[r];for(var o in a)i[o]=a[o]}return i}var bg=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],Eg=["January","February","March","April","May","June","July","August","September","October","November","December"],db=yg(Eg,3),hb=yg(bg,3),lv={dayNamesShort:hb,dayNames:bg,monthNamesShort:db,monthNames:Eg,amPm:["am","pm"],DoFn:function(i){return i+["th","st","nd","rd"][i%10>3?0:(i-i%10!==10?1:0)*i%10]}},lh=nl({},lv),wg=function(i){return lh=nl(lh,i)},Sg=function(i){return i.replace(/[|\\{()[^$+*?.-]/g,"\\$&")},cu=function(i,e){for(e===void 0&&(e=2),i=String(i);i.length<e;)i="0"+i;return i},vb={D:function(i){return String(i.getDate())},DD:function(i){return cu(i.getDate())},Do:function(i,e){return e.DoFn(i.getDate())},d:function(i){return String(i.getDay())},dd:function(i){return cu(i.getDay())},ddd:function(i,e){return e.dayNamesShort[i.getDay()]},dddd:function(i,e){return e.dayNames[i.getDay()]},M:function(i){return String(i.getMonth()+1)},MM:function(i){return cu(i.getMonth()+1)},MMM:function(i,e){return e.monthNamesShort[i.getMonth()]},MMMM:function(i,e){return e.monthNames[i.getMonth()]},YY:function(i){return cu(String(i.getFullYear()),4).substr(2)},YYYY:function(i){return cu(i.getFullYear(),4)},h:function(i){return String(i.getHours()%12||12)},hh:function(i){return cu(i.getHours()%12||12)},H:function(i){return String(i.getHours())},HH:function(i){return cu(i.getHours())},m:function(i){return String(i.getMinutes())},mm:function(i){return cu(i.getMinutes())},s:function(i){return String(i.getSeconds())},ss:function(i){return cu(i.getSeconds())},S:function(i){return String(Math.round(i.getMilliseconds()/100))},SS:function(i){return cu(Math.round(i.getMilliseconds()/10),2)},SSS:function(i){return cu(i.getMilliseconds(),3)},a:function(i,e){return i.getHours()<12?e.amPm[0]:e.amPm[1]},A:function(i,e){return i.getHours()<12?e.amPm[0].toUpperCase():e.amPm[1].toUpperCase()},ZZ:function(i){var e=i.getTimezoneOffset();return(e>0?"-":"+")+cu(Math.floor(Math.abs(e)/60)*100+Math.abs(e)%60,4)},Z:function(i){var e=i.getTimezoneOffset();return(e>0?"-":"+")+cu(Math.floor(Math.abs(e)/60),2)+":"+cu(Math.abs(e)%60,2)}},Mg=function(i){return+i-1},_g=[null,el],Cg=[null,Nd],Tg=["isPm",Nd,function(i,e){var t=i.toLowerCase();return t===e.amPm[0]?0:t===e.amPm[1]?1:null}],Ag=["timezoneOffset","[^\\s]*?[\\+\\-]\\d\\d:?\\d\\d|[^\\s]*?Z?",function(i){var e=(i+"").match(/([+-]|\d\d)/gi);if(e){var t=+e[1]*60+parseInt(e[2],10);return e[0]==="+"?t:-t}return 0}],pb={D:["day",el],DD:["day",rl],Do:["day",el+Nd,function(i){return parseInt(i,10)}],M:["month",el,Mg],MM:["month",rl,Mg],YY:["year",rl,function(i){var e=new Date,t=+(""+e.getFullYear()).substr(0,2);return+(""+(+i>68?t-1:t)+i)}],h:["hour",el,void 0,"isPm"],hh:["hour",rl,void 0,"isPm"],H:["hour",el],HH:["hour",rl],m:["minute",el],mm:["minute",rl],s:["second",el],ss:["second",rl],YYYY:["year",lb],S:["millisecond","\\d",function(i){return+i*100}],SS:["millisecond",rl,function(i){return+i*10}],SSS:["millisecond",fb],d:_g,dd:_g,ddd:Cg,dddd:Cg,MMM:["month",Nd,xg("monthNamesShort")],MMMM:["month",Nd,xg("monthNames")],a:Tg,A:Tg,ZZ:Ag,Z:Ag},dh={default:"ddd MMM DD YYYY HH:mm:ss",shortDate:"M/D/YY",mediumDate:"MMM D, YYYY",longDate:"MMMM D, YYYY",fullDate:"dddd, MMMM D, YYYY",isoDate:"YYYY-MM-DD",isoDateTime:"YYYY-MM-DDTHH:mm:ssZ",shortTime:"HH:mm",mediumTime:"HH:mm:ss",longTime:"HH:mm:ss.SSS"},Ig=function(i){return nl(dh,i)},Og=function(i,e,t){if(e===void 0&&(e=dh.default),t===void 0&&(t={}),typeof i=="number"&&(i=new Date(i)),Object.prototype.toString.call(i)!=="[object Date]"||isNaN(i.getTime()))throw new Error("Invalid Date pass to format");e=dh[e]||e;var r=[];e=e.replace(mg,function(a,o){return r.push(o),"@@@"});var n=nl(nl({},lh),t);return e=e.replace(gg,function(a){return vb[a](i,n)}),e.replace(/@@@/g,function(){return r.shift()})};function Dg(i,e,t){if(t===void 0&&(t={}),typeof e!="string")throw new Error("Invalid format in fecha parse");if(e=dh[e]||e,i.length>1e3)return null;var r=new Date,n={year:r.getFullYear(),month:0,day:1,hour:0,minute:0,second:0,millisecond:0,isPm:null,timezoneOffset:null},a=[],o=[],s=e.replace(mg,function(Mt,Ht){return o.push(Sg(Ht)),"@@@"}),u={},c={};s=Sg(s).replace(gg,function(Mt){var Ht=pb[Mt],se=Ht[0],oe=Ht[1],_e=Ht[3];if(u[se])throw new Error("Invalid format. "+se+" specified twice in format");return u[se]=!0,_e&&(c[_e]=!0),a.push(Ht),"("+oe+")"}),Object.keys(c).forEach(function(Mt){if(!u[Mt])throw new Error("Invalid format. "+Mt+" is required in specified format")}),s=s.replace(/@@@/g,function(){return o.shift()});var f=i.match(new RegExp(s,"i"));if(!f)return null;for(var l=nl(nl({},lh),t),_=1;_<f.length;_++){var I=a[_-1],B=I[0],j=I[2],et=j?j(f[_],l):+f[_];if(et==null)return null;n[B]=et}n.isPm===1&&n.hour!=null&&+n.hour!=12?n.hour=+n.hour+12:n.isPm===0&&+n.hour==12&&(n.hour=0);var ut;if(n.timezoneOffset==null){ut=new Date(n.year,n.month,n.day,n.hour,n.minute,n.second,n.millisecond);for(var ft=[["month","getMonth"],["day","getDate"],["hour","getHours"],["minute","getMinutes"],["second","getSeconds"]],_=0,gt=ft.length;_<gt;_++)if(u[ft[_][0]]&&n[ft[_][0]]!==ut[ft[_][1]]())return null}else if(ut=new Date(Date.UTC(n.year,n.month,n.day,n.hour,n.minute-n.timezoneOffset,n.second,n.millisecond)),n.month>11||n.month<0||n.day>31||n.day<1||n.hour>23||n.hour<0||n.minute>59||n.minute<0||n.second>59||n.second<0)return null;return ut}var gb={format:Og,parse:Dg,defaultI18n:lv,setGlobalDateI18n:wg,setGlobalDateMasks:Ig},Lg=gb;function mb(i){return function(e,t,r,n){for(var a=(0,h.isNil)(r)?0:r,o=(0,h.isNil)(n)?e.length:n;a<o;){var s=a+o>>>1;i(e[s])>t?o=s:a=s+1}return a}}var Pg="format";function Ng(i,e){var t=F[Pg]||Lg[Pg];return t(i,e)}function hh(i){return(0,h.isString)(i)&&(i.indexOf("T")>0?i=new Date(i).getTime():i=new Date(i.replace(/-/gi,"/")).getTime()),(0,h.isDate)(i)&&(i=i.getTime()),i}var ac=1e3,Tl=60*ac,Al=60*Tl,df=24*Al,Rd=df*31,Rg=df*365,kd=[["HH:mm:ss",ac],["HH:mm:ss",ac*10],["HH:mm:ss",ac*30],["HH:mm",Tl],["HH:mm",Tl*10],["HH:mm",Tl*30],["HH",Al],["HH",Al*6],["HH",Al*12],["YYYY-MM-DD",df],["YYYY-MM-DD",df*4],["YYYY-WW",df*7],["YYYY-MM",Rd],["YYYY-MM",Rd*4],["YYYY-MM",Rd*6],["YYYY",df*380]];function yb(i,e,t){var r=(e-i)/t,n=mb(function(o){return o[1]})(kd,r)-1,a=kd[n];return n<0?a=kd[0]:n>=kd.length&&(a=(0,h.last)(kd)),a}var xb=function(i){(0,y.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="timeCat",t}return e.prototype.translate=function(t){t=hh(t);var r=this.values.indexOf(t);return r===-1&&((0,h.isNumber)(t)&&t<this.values.length?r=t:r=NaN),r},e.prototype.getText=function(t,r){var n=this.translate(t);if(n>-1){var a=this.values[n],o=this.formatter;return a=o?o(a,r):Ng(a,this.mask),a}return t},e.prototype.initCfg=function(){this.tickMethod="time-cat",this.mask="YYYY-MM-DD",this.tickCount=7},e.prototype.setDomain=function(){var t=this.values;(0,h.each)(t,function(r,n){t[n]=hh(r)}),t.sort(function(r,n){return r-n}),i.prototype.setDomain.call(this)},e}(Pd),bb=xb,Eb=function(i){(0,y.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.isContinuous=!0,t}return e.prototype.scale=function(t){if((0,h.isNil)(t))return NaN;var r=this.rangeMin(),n=this.rangeMax(),a=this.max,o=this.min;if(a===o)return r;var s=this.getScalePercent(t);return r+s*(n-r)},e.prototype.init=function(){i.prototype.init.call(this);var t=this.ticks,r=(0,h.head)(t),n=(0,h.last)(t);r<this.min&&(this.min=r),n>this.max&&(this.max=n),(0,h.isNil)(this.minLimit)||(this.min=r),(0,h.isNil)(this.maxLimit)||(this.max=n)},e.prototype.setDomain=function(){var t=(0,h.getRange)(this.values),r=t.min,n=t.max;(0,h.isNil)(this.min)&&(this.min=r),(0,h.isNil)(this.max)&&(this.max=n),this.min>this.max&&(this.min=r,this.max=n)},e.prototype.calculateTicks=function(){var t=this,r=i.prototype.calculateTicks.call(this);return this.nice||(r=(0,h.filter)(r,function(n){return n>=t.min&&n<=t.max})),r},e.prototype.getScalePercent=function(t){var r=this.max,n=this.min;return(t-n)/(r-n)},e.prototype.getInvertPercent=function(t){return(t-this.rangeMin())/(this.rangeMax()-this.rangeMin())},e}(fv),vh=Eb,wb=function(i){(0,y.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="linear",t.isLinear=!0,t}return e.prototype.invert=function(t){var r=this.getInvertPercent(t);return this.min+r*(this.max-this.min)},e.prototype.initCfg=function(){this.tickMethod="wilkinson-extended",this.nice=!1},e}(vh),Bd=wb;function al(i,e){var t=Math.E,r;return e>=0?r=Math.pow(t,Math.log(e)/i):r=Math.pow(t,Math.log(-e)/i)*-1,r}function zu(i,e){return i===1?1:Math.log(e)/Math.log(i)}function kg(i,e,t){(0,h.isNil)(t)&&(t=Math.max.apply(null,i));var r=t;return(0,h.each)(i,function(n){n>0&&n<r&&(r=n)}),r===t&&(r=t/e),r>1&&(r=1),r}function Bg(i){var e=i.toString().split(/[eE]/),t=(e[0].split(".")[1]||"").length-+(e[1]||0);return t>0?t:0}function tM(i,e){var t=Bg(i),r=Bg(e),n=Math.pow(10,Math.max(t,r));return(i*n+e*n)/n}var Sb=function(i){(0,y.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="log",t}return e.prototype.invert=function(t){var r=this.base,n=zu(r,this.max),a=this.rangeMin(),o=this.rangeMax()-a,s,u=this.positiveMin;if(u){if(t===0)return 0;s=zu(r,u/r);var c=1/(n-s)*o;if(t<c)return t/c*u}else s=zu(r,this.min);var f=(t-a)/o,l=f*(n-s)+s;return Math.pow(r,l)},e.prototype.initCfg=function(){this.tickMethod="log",this.base=10,this.tickCount=6,this.nice=!0},e.prototype.setDomain=function(){i.prototype.setDomain.call(this);var t=this.min;if(t<0)throw new Error("When you use log scale, the minimum value must be greater than zero!");t===0&&(this.positiveMin=kg(this.values,this.base,this.max))},e.prototype.getScalePercent=function(t){var r=this.max,n=this.min;if(r===n||t<=0)return 0;var a=this.base,o=this.positiveMin;o&&(n=o*1/a);var s;return t<o?s=t/o/(zu(a,r)-zu(a,n)):s=(zu(a,t)-zu(a,n))/(zu(a,r)-zu(a,n)),s},e}(vh),Mb=Sb,_b=function(i){(0,y.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="pow",t}return e.prototype.invert=function(t){var r=this.getInvertPercent(t),n=this.exponent,a=al(n,this.max),o=al(n,this.min),s=r*(a-o)+o,u=s>=0?1:-1;return Math.pow(s,n)*u},e.prototype.initCfg=function(){this.tickMethod="pow",this.exponent=2,this.tickCount=5,this.nice=!0},e.prototype.getScalePercent=function(t){var r=this.max,n=this.min;if(r===n)return 0;var a=this.exponent,o=(al(a,t)-al(a,n))/(al(a,r)-al(a,n));return o},e}(vh),Cb=_b,Tb=function(i){(0,y.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="time",t}return e.prototype.getText=function(t,r){var n=this.translate(t),a=this.formatter;return a?a(n,r):Ng(n,this.mask)},e.prototype.scale=function(t){var r=t;return((0,h.isString)(r)||(0,h.isDate)(r))&&(r=this.translate(r)),i.prototype.scale.call(this,r)},e.prototype.translate=function(t){return hh(t)},e.prototype.initCfg=function(){this.tickMethod="time-pretty",this.mask="YYYY-MM-DD",this.tickCount=7,this.nice=!1},e.prototype.setDomain=function(){var t=this.values,r=this.getConfig("min"),n=this.getConfig("max");if((!(0,h.isNil)(r)||!(0,h.isNumber)(r))&&(this.min=this.translate(this.min)),(!(0,h.isNil)(n)||!(0,h.isNumber)(n))&&(this.max=this.translate(this.max)),t&&t.length){var a=[],o=1/0,s=o,u=0;(0,h.each)(t,function(c){var f=hh(c);if(isNaN(f))throw new TypeError("Invalid Time: "+c+" in time scale!");o>f?(s=o,o=f):s>f&&(s=f),u<f&&(u=f),a.push(f)}),t.length>1&&(this.minTickInterval=s-o),(0,h.isNil)(r)&&(this.min=o),(0,h.isNil)(n)&&(this.max=u)}},e}(Bd),Ab=Tb,Ib=function(i){(0,y.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="quantize",t}return e.prototype.invert=function(t){var r=this.ticks,n=r.length,a=this.getInvertPercent(t),o=Math.floor(a*(n-1));if(o>=n-1)return(0,h.last)(r);if(o<0)return(0,h.head)(r);var s=r[o],u=r[o+1],c=o/(n-1),f=(o+1)/(n-1);return s+(a-c)/(f-c)*(u-s)},e.prototype.initCfg=function(){this.tickMethod="r-pretty",this.tickCount=5,this.nice=!0},e.prototype.calculateTicks=function(){var t=i.prototype.calculateTicks.call(this);return this.nice||((0,h.last)(t)!==this.max&&t.push(this.max),(0,h.head)(t)!==this.min&&t.unshift(this.min)),t},e.prototype.getScalePercent=function(t){var r=this.ticks;if(t<(0,h.head)(r))return 0;if(t>(0,h.last)(r))return 1;var n=0;return(0,h.each)(r,function(a,o){if(t>=a)n=o;else return!1}),n/(r.length-1)},e}(vh),Fg=Ib,Ob=function(i){(0,y.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="quantile",t}return e.prototype.initCfg=function(){this.tickMethod="quantile",this.tickCount=5,this.nice=!0},e}(Fg),Db=Ob,zg={};function Lb(i){return zg[i]}function Lc(i,e){if(Lb(i))throw new Error("type '"+i+"' existed.");zg[i]=e}var Pb=function(i){(0,y.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="identity",t.isIdentity=!0,t}return e.prototype.calculateTicks=function(){return this.values},e.prototype.scale=function(t){return this.values[0]!==t&&(0,h.isNumber)(t)?t:this.range[0]},e.prototype.invert=function(t){var r=this.range;return t<r[0]||t>r[1]?NaN:this.values[0]},e}(fv),Nb=Pb;function Gg(i){var e=i.values,t=i.tickInterval,r=i.tickCount,n=i.showLast;if((0,h.isNumber)(t)){var a=(0,h.filter)(e,function(B,j){return j%t===0}),o=(0,h.last)(e);return n&&(0,h.last)(a)!==o&&a.push(o),a}var s=e.length,u=i.min,c=i.max;if((0,h.isNil)(u)&&(u=0),(0,h.isNil)(c)&&(c=e.length-1),!(0,h.isNumber)(r)||r>=s)return e.slice(u,c+1);if(r<=0||c<=0)return[];for(var f=r===1?s:Math.floor(s/(r-1)),l=[],_=u,I=0;I<r&&!(_>=c);I++)_=Math.min(u+I*f,c),I===r-1&&n?l.push(e[c]):l.push(e[_]);return l}function Rb(i){var e=i.min,t=i.max,r=i.nice,n=i.tickCount,a=new kb;return a.domain([e,t]),r&&a.nice(n),a.ticks(n)}var dv=5,Ug=Math.sqrt(50),Wg=Math.sqrt(10),Yg=Math.sqrt(2),kb=function(){function i(){this._domain=[0,1]}return i.prototype.domain=function(e){return e?(this._domain=Array.from(e,Number),this):this._domain.slice()},i.prototype.nice=function(e){var t,r;e===void 0&&(e=dv);var n=this._domain.slice(),a=0,o=this._domain.length-1,s=this._domain[a],u=this._domain[o],c;return u<s&&(t=[u,s],s=t[0],u=t[1],r=[o,a],a=r[0],o=r[1]),c=ph(s,u,e),c>0?(s=Math.floor(s/c)*c,u=Math.ceil(u/c)*c,c=ph(s,u,e)):c<0&&(s=Math.ceil(s*c)/c,u=Math.floor(u*c)/c,c=ph(s,u,e)),c>0?(n[a]=Math.floor(s/c)*c,n[o]=Math.ceil(u/c)*c,this.domain(n)):c<0&&(n[a]=Math.ceil(s*c)/c,n[o]=Math.floor(u*c)/c,this.domain(n)),this},i.prototype.ticks=function(e){return e===void 0&&(e=dv),Bb(this._domain[0],this._domain[this._domain.length-1],e||dv)},i}();function Bb(i,e,t){var r,n=-1,a,o,s;if(e=+e,i=+i,t=+t,i===e&&t>0)return[i];if((r=e<i)&&(a=i,i=e,e=a),(s=ph(i,e,t))===0||!isFinite(s))return[];if(s>0)for(i=Math.ceil(i/s),e=Math.floor(e/s),o=new Array(a=Math.ceil(e-i+1));++n<a;)o[n]=(i+n)*s;else for(i=Math.floor(i*s),e=Math.ceil(e*s),o=new Array(a=Math.ceil(i-e+1));++n<a;)o[n]=(i-n)/s;return r&&o.reverse(),o}function ph(i,e,t){var r=(e-i)/Math.max(0,t),n=Math.floor(Math.log(r)/Math.LN10),a=r/Math.pow(10,n);return n>=0?(a>=Ug?10:a>=Wg?5:a>=Yg?2:1)*Math.pow(10,n):-Math.pow(10,-n)/(a>=Ug?10:a>=Wg?5:a>=Yg?2:1)}function Xg(i,e,t){var r;return t==="ceil"?r=Math.ceil(i/e):t==="floor"?r=Math.floor(i/e):r=Math.round(i/e),r*e}function hv(i,e,t){var r=Xg(i,t,"floor"),n=Xg(e,t,"ceil");r=(0,h.fixedBase)(r,t),n=(0,h.fixedBase)(n,t);for(var a=[],o=Math.max((n-r)/(Math.pow(2,12)-1),t),s=r;s<=n;s=s+o){var u=(0,h.fixedBase)(s,o);a.push(u)}return{min:r,max:n,ticks:a}}function vv(i,e,t){var r,n=i.minLimit,a=i.maxLimit,o=i.min,s=i.max,u=i.tickCount,c=u===void 0?5:u,f=(0,h.isNil)(n)?(0,h.isNil)(e)?o:e:n,l=(0,h.isNil)(a)?(0,h.isNil)(t)?s:t:a;if(f>l&&(r=[f,l],l=r[0],f=r[1]),c<=2)return[f,l];for(var _=(l-f)/(c-1),I=[],B=0;B<c;B++)I.push(f+_*B);return I}function Fb(i){var e=i.min,t=i.max,r=i.tickInterval,n=i.minLimit,a=i.maxLimit,o=Rb(i);return!(0,h.isNil)(n)||!(0,h.isNil)(a)?vv(i,(0,h.head)(o),(0,h.last)(o)):r?hv(e,t,r).ticks:o}function Il(i){return Math.abs(i)<1e-15?i:parseFloat(i.toFixed(15))}var zb=[1,5,2,2.5,4,3],eM=null,jg=Number.EPSILON*100;function Gb(i,e){return(i%e+e)%e}function Ub(i){return Math.round(i*1e12)/1e12}function Wb(i,e,t,r,n,a){var o=(0,h.size)(e),s=(0,h.indexOf)(e,i),u=0,c=Gb(r,a);return(c<jg||a-c<jg)&&r<=0&&n>=0&&(u=1),1-s/(o-1)-t+u}function Yb(i,e,t){var r=(0,h.size)(e),n=(0,h.indexOf)(e,i),a=1;return 1-n/(r-1)-t+a}function Xb(i,e,t,r,n,a){var o=(i-1)/(a-n),s=(e-1)/(Math.max(a,r)-Math.min(t,n));return 2-Math.max(o/s,s/o)}function jb(i,e){return i>=e?2-(i-1)/(e-1):1}function Vb(i,e,t,r){var n=e-i;return 1-.5*(Math.pow(e-r,2)+Math.pow(i-t,2))/Math.pow(.1*n,2)}function Hb(i,e,t){var r=e-i;if(t>r){var n=(t-r)/2;return 1-Math.pow(n,2)/Math.pow(.1*r,2)}return 1}function Zb(){return 1}function Kb(i,e,t,r,n,a){t===void 0&&(t=5),r===void 0&&(r=!0),n===void 0&&(n=zb),a===void 0&&(a=[.25,.2,.5,.05]);var o=t<0?0:Math.round(t);if(Number.isNaN(i)||Number.isNaN(e)||typeof i!="number"||typeof e!="number"||!o)return{min:0,max:0,ticks:[]};if(e-i<1e-15||o===1)return{min:i,max:e,ticks:[i]};if(e-i>1e148){var s=t||5,u=(e-i)/s;return{min:i,max:e,ticks:Array(s).fill(null).map(function(zn,Gn){return Il(i+u*Gn)})}}for(var c={score:-2,lmin:0,lmax:0,lstep:0},f=1;f<1/0;){for(var l=0;l<n.length;l+=1){var _=n[l],I=Yb(_,n,f);if(a[0]*I+a[1]+a[2]+a[3]<c.score){f=1/0;break}for(var B=2;B<1/0;){var j=jb(B,o);if(a[0]*I+a[1]+a[2]*j+a[3]<c.score)break;for(var et=(e-i)/(B+1)/f/_,ut=Math.ceil(Math.log10(et));ut<1/0;){var ft=f*_*Math.pow(10,ut),gt=Hb(i,e,ft*(B-1));if(a[0]*I+a[1]*gt+a[2]*j+a[3]<c.score)break;var Mt=Math.floor(e/ft)*f-(B-1)*f,Ht=Math.ceil(i/ft)*f;if(Mt<=Ht)for(var s=Ht-Mt,se=0;se<=s;se+=1){var oe=Mt+se,_e=oe*(ft/f),Ue=_e+ft*(B-1),Ne=ft,Qe=Wb(_,n,f,_e,Ue,Ne),dr=Vb(i,e,_e,Ue),nn=Xb(B,o,i,e,_e,Ue),kn=Zb(),En=a[0]*Qe+a[1]*dr+a[2]*nn+a[3]*kn;En>c.score&&(!r||_e<=i&&Ue>=e)&&(c.lmin=_e,c.lmax=Ue,c.lstep=Ne,c.score=En)}ut+=1}B+=1}}f+=1}var Kr=Il(c.lmax),Jn=Il(c.lmin),Kn=Il(c.lstep),$r=Math.floor(Ub((Kr-Jn)/Kn))+1,xn=new Array($r);xn[0]=Il(Jn);for(var l=1;l<$r;l++)xn[l]=Il(xn[l-1]+Kn);return{min:Math.min(i,(0,h.head)(xn)),max:Math.max(e,(0,h.last)(xn)),ticks:xn}}function $b(i){var e=i.min,t=i.max,r=i.tickCount,n=i.nice,a=i.tickInterval,o=i.minLimit,s=i.maxLimit,u=Kb(e,t,r,n).ticks;return!(0,h.isNil)(o)||!(0,h.isNil)(s)?vv(i,(0,h.head)(u),(0,h.last)(u)):a?hv(e,t,a).ticks:u}function qb(i){var e=i.base,t=i.tickCount,r=i.min,n=i.max,a=i.values,o,s=zu(e,n);if(r>0)o=Math.floor(zu(e,r));else{var u=kg(a,e,n);o=Math.floor(zu(e,u))}for(var c=s-o,f=Math.ceil(c/t),l=[],_=o;_<s+f;_=_+f)l.push(Math.pow(e,_));return r<=0&&l.unshift(0),l}function Vg(i,e,t){if(t===void 0&&(t=5),i===e)return{max:e,min:i,ticks:[i]};var r=t<0?0:Math.round(t);if(r===0)return{max:e,min:i,ticks:[]};var n=1.5,a=.5+1.5*n,o=e-i,s=o/r,u=Math.pow(10,Math.floor(Math.log10(s))),c=u;2*u-s<n*(s-c)&&(c=2*u,5*u-s<a*(s-c)&&(c=5*u,10*u-s<n*(s-c)&&(c=10*u)));for(var f=Math.ceil(e/c),l=Math.floor(i/c),_=Math.max(f*c,e),I=Math.min(l*c,i),B=Math.floor((_-I)/c)+1,j=new Array(B),et=0;et<B;et++)j[et]=Il(I+et*c);return{min:I,max:_,ticks:j}}function Qb(i){var e=i.exponent,t=i.tickCount,r=Math.ceil(al(e,i.max)),n=Math.floor(al(e,i.min)),a=Vg(n,r,t).ticks;return a.map(function(o){var s=o>=0?1:-1;return Math.pow(o,e)*s})}function Jb(i,e){var t=i.length*e;return e===1?i[i.length-1]:e===0?i[0]:t%1!==0?i[Math.ceil(t)-1]:i.length%2===0?(i[t-1]+i[t])/2:i[t]}function tE(i){var e=i.tickCount,t=i.values;if(!t||!t.length)return[];for(var r=t.slice().sort(function(s,u){return s-u}),n=[],a=0;a<e;a++){var o=a/(e-1);n.push(Jb(r,o))}return n}function eE(i){var e=i.min,t=i.max,r=i.tickCount,n=i.tickInterval,a=i.minLimit,o=i.maxLimit,s=Vg(e,t,r).ticks;return!(0,h.isNil)(a)||!(0,h.isNil)(o)?vv(i,(0,h.head)(s),(0,h.last)(s)):n?hv(e,t,n).ticks:s}function rE(i){var e=i.min,t=i.max,r=i.minTickInterval,n=i.tickInterval,a=i.tickCount;if(n)a=Math.ceil((t-e)/n);else{n=yb(e,t,a)[1];var o=(t-e)/n,s=o/a;s>1&&(n=n*Math.ceil(s)),r&&n<r&&(n=r)}n=Math.max(Math.floor((t-e)/(Math.pow(2,12)-1)),n);for(var u=[],c=e;c<t+n;c+=n)u.push(c);return u}function nE(i){var e=Gg((0,y.__assign)({showLast:!0},i));return e}function gh(i){return new Date(i).getFullYear()}function aE(i){return new Date(i,0,1).getTime()}function pv(i){return new Date(i).getMonth()}function iE(i,e){var t=gh(i),r=gh(e),n=pv(i),a=pv(e);return(r-t)*12+(a-n)%12}function oE(i,e){return new Date(i,e,1).getTime()}function sE(i,e){return Math.ceil((e-i)/df)}function uE(i,e){return Math.ceil((e-i)/Al)}function cE(i,e){return Math.ceil((e-i)/(60*1e3))}function fE(i){var e=i.min,t=i.max,r=i.minTickInterval,n=i.tickCount,a=i.tickInterval,o=[];a||(a=(t-e)/n,r&&a<r&&(a=r)),a=Math.max(Math.floor((t-e)/(Math.pow(2,12)-1)),a);var s=gh(e);if(a>Rg)for(var u=gh(t),c=Math.ceil(a/Rg),f=s;f<=u+c;f=f+c)o.push(aE(f));else if(a>Rd)for(var l=Math.ceil(a/Rd),_=pv(e),I=iE(e,t),f=0;f<=I+l;f=f+l)o.push(oE(s,f+_));else if(a>df)for(var B=new Date(e),j=B.getFullYear(),et=B.getMonth(),ut=B.getDate(),ft=Math.ceil(a/df),gt=sE(e,t),f=0;f<gt+ft;f=f+ft)o.push(new Date(j,et,ut+f).getTime());else if(a>Al)for(var B=new Date(e),j=B.getFullYear(),et=B.getMonth(),ft=B.getDate(),Mt=B.getHours(),Ht=Math.ceil(a/Al),se=uE(e,t),f=0;f<=se+Ht;f=f+Ht)o.push(new Date(j,et,ft,Mt+f).getTime());else if(a>Tl)for(var oe=cE(e,t),_e=Math.ceil(a/Tl),f=0;f<=oe+_e;f=f+_e)o.push(e+f*Tl);else{var Ue=a;Ue<ac&&(Ue=ac);for(var Ne=Math.floor(e/ac)*ac,Qe=Math.ceil((t-e)/ac),dr=Math.ceil(Ue/ac),f=0;f<Qe+dr;f=f+dr)o.push(Ne+f*ac)}return o.length>=512&&console.warn("Notice: current ticks length("+o.length+') >= 512, may cause performance issues, even out of memory. Because of the configure "tickInterval"(in milliseconds, current is '+a+") is too small, increase the value to solve the problem!"),o}Dc("cat",Gg),Dc("time-cat",nE),Dc("wilkinson-extended",$b),Dc("r-pretty",eE),Dc("time",rE),Dc("time-pretty",fE),Dc("log",qb),Dc("pow",Qb),Dc("quantile",tE),Dc("d3-linear",Fb),Lc("cat",Pd),Lc("category",Pd),Lc("identity",Nb),Lc("linear",Bd),Lc("log",Mb),Lc("pow",Cb),Lc("time",Ab),Lc("timeCat",bb),Lc("quantize",Fg),Lc("quantile",Db);var lE=function(i,e,t){if(t||arguments.length===2)for(var r=0,n=e.length,a;r<n;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return i.concat(a||Array.prototype.slice.call(e))};function dE(i){return(0,h.map)(i,function(e,t){var r=t===0?"M":"L",n=e[0],a=e[1];return[r,n,a]})}function Hg(i){return dE(i)}function hE(i){if(i.length<=2)return Hg(i);var e=[];(0,h.each)(i,function(o){(0,h.isEqual)(o,e.slice(e.length-2))||e.push(o[0],o[1])});var t=Wa(e,!1),r=(0,h.head)(i),n=r[0],a=r[1];return t.unshift(["M",n,a]),t}function vE(i,e,t,r){r===void 0&&(r=!0);var n=new Bd({values:i}),a=new Pd({values:(0,h.map)(i,function(s,u){return u})}),o=(0,h.map)(i,function(s,u){return[a.scale(u)*e,t-n.scale(s)*t]});return r?hE(o):Hg(o)}function pE(i,e,t,r){r===void 0&&(r=5);for(var n=new Bd({values:i}),a=new Pd({values:(0,h.map)(i,function(_,I){return I})}),o=(0,h.map)(i,function(_,I){return[a.scale(I)*e,t-n.scale(_)*t]}),s=[],u=0;u<o.length;u++){var c=o[u],f={x:c[0],y:c[1],y0:t,size:r},l=yE(f);s.push.apply(s,l)}return xE(s)}function gE(i,e){var t=new Bd({values:i}),r=Math.max(0,t.min);return e-t.scale(r)*e}function mE(i,e,t,r){var n=lE([],i,!0),a=gE(r,t);return n.push(["L",e,a]),n.push(["L",0,a]),n.push(["Z"]),n}function yE(i){var e=i.x,t=i.y,r=i.y0,n=i.size,a,o;(0,h.isArray)(t)?(a=t[0],o=t[1]):(a=r,o=t);var s,u;(0,h.isArray)(e)?(s=e[0],u=e[1]):(s=e-n/2,u=e+n/2);var c=[{x:s,y:a},{x:s,y:o}];return c.push({x:u,y:o},{x:u,y:a}),c}function xE(i,e){e===void 0&&(e=!0);var t=[],r=i[0];t.push(["M",r.x,r.y]);for(var n=1,a=i.length;n<a;n++)t.push(["L",i[n].x,i[n].y]);return e&&(t.push(["L",r.x,r.y]),t.push(["z"])),t}var Fd=function(){return Fd=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},Fd.apply(this,arguments)},bE={stroke:"#C5C5C5",strokeOpacity:.85},EE={fill:"#CACED4",opacity:.85},wE=function(){function i(e){var t=e.x,r=t===void 0?0:t,n=e.y,a=n===void 0?0:n,o=e.width,s=o===void 0?200:o,u=e.height,c=u===void 0?26:u,f=e.smooth,l=f===void 0?!0:f,_=e.isArea,I=_===void 0?!1:_,B=e.data,j=B===void 0?[]:B,et=e.lineStyle,ut=e.areaStyle,ft=e.group,gt=e.interval,Mt=gt===void 0?null:gt;this.group=ft,this.x=r,this.y=a,this.width=s,this.height=c,this.data=j,this.smooth=l,this.isArea=I,this.lineStyle=Object.assign({},bE,et),this.areaStyle=Object.assign({},EE,ut),this.intervalConfig=Mt,this.renderLine()}return i.prototype.renderLine=function(){var e=this,t=e.x,r=e.y,n=e.width,a=e.height,o=e.barWidth,s=e.data,u=e.smooth,c=e.isArea,f=e.lineStyle,l=e.areaStyle,_=this.group.addGroup({name:"trend-group"});if(s){var I=vE(s,n,a,u);if(_.addShape("path",{attrs:Fd({path:I},f),name:"trend-line"}),c){var B=mE(I,n,a,s);_.addShape("path",{attrs:Fd({path:B},l),name:"trend-area"})}}this.intervalConfig&&_.addShape("path",{attrs:Fd({path:pE(this.intervalConfig.data,n,a,this.intervalConfig.style.barWidth)},this.intervalConfig.style),name:"trend-interval"}),_.move(t,r)},i.prototype.destory=function(){this.group.destroy()},i}(),SE=wE,ud=function(){return ud=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},ud.apply(this,arguments)},ME={fill:"#1890ff",stroke:"#1890ff",type:"trend",radius:2,opacity:1,cursor:"ew-resize",highLightFill:"#0050b3"},_E={fill:"#fff",stroke:"#1890ff",radius:2,opacity:1,cursor:"ew-resize"},CE=function(){function i(e){var t=e.group,r=e.name,n=e.type,a=e.x,o=a===void 0?0:a,s=e.y,u=s===void 0?0:s,c=e.width,f=c===void 0?2:c,l=e.height,_=l===void 0?24:l,I=e.style,B=I===void 0?{}:I;this.group=t,this.name=r,this.handleType=n,this.x=o,this.y=u,this.width=f,this.height=_,n==="trend"?this.style=ud(ud({},ME),B):n==="simple"&&(this.style=ud(ud({},_E),B)),this.renderHandle()}return i.prototype.setX=function(e){this.setXY(e,void 0)},i.prototype.setY=function(e){this.setXY(void 0,e)},i.prototype.setXY=function(e,t){(0,h.isNumber)(e)&&(this.x=e),(0,h.isNumber)(t)&&(this.y=t),this.updateXY()},i.prototype.renderHandle=function(){var e=this,t=e.width,r=e.height,n=e.style,a=e.name,o=n.fill,s=n.stroke,u=n.radius,c=n.opacity,f=n.cursor;this.handleGroup=this.group.addGroup(),this.handleType==="trend"?(this.verticalLine=this.handleGroup.addShape("rect",{attrs:{x:0,y:0,width:t,height:r,fill:o,stroke:s,radius:u,opacity:c,cursor:f},name:"".concat(a,"-handler")}),this.topCircle=this.handleGroup.addShape("circle",{attrs:{x:t/2,y:0,r:2*t,fill:o,stroke:s,radius:u,opacity:c,cursor:f,lineAppendWidth:12},name:"".concat(a,"-handler")}),this.bottomCircle=this.handleGroup.addShape("circle",{attrs:{x:t/2,y:r,r:2*t,fill:o,stroke:s,radius:u,opacity:c,cursor:f},name:"".concat(a,"-handler")})):this.handleType==="simple"&&(this.topCircle=this.handleGroup.addShape("circle",{attrs:{x:t/2,y:r/2,r:2*t,fill:o,stroke:s,radius:u,opacity:c,cursor:f,lineWidth:2},name:"".concat(a,"-handler")})),this.updateXY(),this.handleType==="trend"?this.bindTrendEvents():this.handleType==="simple"&&this.bindSimpleEvents()},i.prototype.bindSimpleEvents=function(){var e=this,t=this.name;this.handleGroup.on("".concat(t,"-handler:mouseenter"),function(){var r=e.style.highLightFill;e.topCircle.attr("fill",r)}),this.handleGroup.on("".concat(t,"-handler:mouseleave"),function(){var r=e.style.fill;e.topCircle.attr("fill",r)})},i.prototype.bindTrendEvents=function(){var e=this,t=this.name;this.handleGroup.on("".concat(t,"-handler:mouseenter"),function(){var r=e.style.highLightFill;e.verticalLine.attr("fill",r),e.topCircle.attr("fill",r),e.bottomCircle.attr("fill",r)}),this.handleGroup.on("".concat(t,"-handler:mouseleave"),function(){var r=e.style.fill;e.verticalLine.attr("fill",r),e.topCircle.attr("fill",r),e.bottomCircle.attr("fill",r)})},i.prototype.show=function(){this.handleGroup.show()},i.prototype.hide=function(){this.handleGroup.hide()},i.prototype.updateXY=function(){this.handleGroup.setMatrix([1,0,0,0,1,0,this.x,this.y,1])},i}(),Zg=CE,jo=function(){return jo=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},jo.apply(this,arguments)},TE=pt,AE={fill:"#416180",opacity:.05},IE={fill:"#416180",opacity:.15,radius:5},OE={fill:"#5B8FF9",opacity:.3,cursor:"grab"},gv=2,DE={width:gv,height:24},LE={textBaseline:"middle",fill:"#000",opacity:.45},PE={textAlign:"center",textBaseline:"top",fill:"#607889",opacity:.35},NE={lineWidth:1,stroke:"#ccc"},RE=function(){function i(e){var t=this;this.prevX=0,this.onMouseDown=function(zn){return function(Gn){t.currentHandler=zn;var ia=Gn.originalEvent;ia.stopPropagation(),ia.preventDefault(),t.prevX=(0,h.get)(ia,"touches.0.pageX",ia.pageX);var ha=t.canvas.get("container");ha.addEventListener("mousemove",t.onMouseMove),ha.addEventListener("mouseup",t.onMouseUp),ha.addEventListener("mouseleave",t.onMouseUp),ha.addEventListener("touchmove",t.onMouseMove),ha.addEventListener("touchend",t.onMouseUp),ha.addEventListener("touchcancel",t.onMouseUp)}},this.onMouseMove=function(zn){zn.stopPropagation(),zn.preventDefault();var Gn=(0,h.get)(zn,"touches.0.pageX",zn.pageX),ia=Gn-t.prevX,ha=t.adjustOffsetRange(ia/t.width);t.updateStartEnd(ha),t.updateUI(),t.prevX=Gn},this.onMouseUp=function(){t.currentHandler&&(t.currentHandler=void 0);var zn=t.canvas.get("container");zn&&(zn.removeEventListener("mousemove",t.onMouseMove),zn.removeEventListener("mouseup",t.onMouseUp),zn.removeEventListener("mouseleave",t.onMouseUp),zn.removeEventListener("touchmove",t.onMouseMove),zn.removeEventListener("touchend",t.onMouseUp),zn.removeEventListener("touchcancel",t.onMouseUp))};var r=e.x,n=r===void 0?0:r,a=e.y,o=a===void 0?0:a,s=e.width,u=s===void 0?100:s,c=e.height,f=e.padding,l=f===void 0?10:f,_=e.trendCfg,I=e.controllerCfg,B=I===void 0?{speed:1}:I,j=e.backgroundStyle,et=j===void 0?{}:j,ut=e.foregroundStyle,ft=ut===void 0?{}:ut,gt=e.handlerStyle,Mt=gt===void 0?{}:gt,Ht=e.textStyle,se=Ht===void 0?{}:Ht,oe=e.start,_e=oe===void 0?0:oe,Ue=e.end,Ne=Ue===void 0?1:Ue,Qe=e.minText,dr=Qe===void 0?"":Qe,nn=e.maxText,kn=nn===void 0?"":nn,En=e.group,Kr=e.graph,Jn=e.canvas,Kn=e.tick,$r=Kn===void 0?{tickLabelStyle:{},tickLineStyle:{},tickLabelFormatter:function(Gn){return Gn},ticks:[]}:Kn,xn=e.type;this.graph=Kr,this.canvas=Jn,this.group=En,this.timeBarType=xn,this.x=n,this.y=o,this.width=u,this.height=c,this.padding=l,this.ticks=$r.ticks,this.trendCfg=_,this.controllerCfg=B,this.currentSpeed=B.speed||1,this.tickLabelFormatter=$r.tickLabelFormatter,xn==="trend"?this.backgroundStyle=jo(jo({},AE),et):xn==="simple"&&(this.backgroundStyle=jo(jo({},IE),et)),this.foregroundStyle=jo(jo({},OE),ft),this.handlerStyle=jo(jo({},DE),Mt),this.textStyle=jo(jo({},LE),se),this.tickLabelStyle=jo(jo({},PE),$r.tickLabelStyle),this.tickLineStyle=jo(jo({},NE),$r.tickLineStyle),this.currentMode=B.defaultTimeType||Oc.RANGE,this.start=_e,this.end=Ne,this.minText=dr,this.maxText=kn,this.fontFamily=typeof window!="undefined"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif",this.renderSlider()}return i.prototype.update=function(e){var t=e.x,r=e.y,n=e.width,a=e.height,o=e.minText,s=e.maxText,u=e.start,c=e.end;this.start=Math.min(1,Math.max(u,0)),this.end=Math.min(1,Math.max(c,0)),(0,h.assign)(this,{x:t,y:r,width:n,height:a,minText:o,maxText:s}),this.updateUI()},i.prototype.setText=function(e,t){this.minTextShape.attr("text",e),this.maxTextShape.attr("text",t)},i.prototype.renderSlider=function(){var e=this,t=this,r=t.width,n=t.height,a=t.timeBarType;if(a==="trend"&&(0,h.size)((0,h.get)(this.trendCfg,"data"))){var o=new SE(jo(jo({x:this.x,y:this.y,width:r,height:n},this.trendCfg),{group:this.group}));this.trendComponent=o}var s=this.group.addGroup({name:"slider-group"});s.addShape("rect",{attrs:jo({x:0,y:0,width:r,height:n},this.backgroundStyle),name:"background"});var u=this.group.addGroup();a==="trend"?(this.minTextShape=u.addShape("text",{attrs:jo({x:0,y:n/2+this.y,textAlign:"right",text:this.minText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif",stroke:"#fff",lineWidth:5},this.textStyle),capture:!1,name:"min-text-shape"}),this.maxTextShape=u.addShape("text",{attrs:jo({y:n/2+this.y,textAlign:"left",text:this.maxText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif",stroke:"#fff",lineWidth:5},this.textStyle),capture:!1,name:"max-text-shape"})):(this.minTextShape=u.addShape("text",{attrs:jo({x:0,y:this.y-10,textAlign:"center",text:this.minText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif",stroke:"#fff",lineWidth:5},this.textStyle),capture:!1,name:"min-text-shape"}),this.maxTextShape=u.addShape("text",{attrs:jo({y:this.y-10,textAlign:"center",text:this.maxText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif",stroke:"#fff",lineWidth:5},this.textStyle),capture:!1,name:"max-text-shape"})),this.foregroundShape=this.group.addGroup().addShape("rect",{attrs:jo({x:0,y:this.y,height:n},this.foregroundStyle),name:"foreground-shape"}),this.foregroundShape.on("mousedown",function(ut){ut.target.attr("cursor","grabbing")}),this.foregroundShape.on("mouseup",function(ut){ut.target.attr("cursor",e.foregroundStyle.cursor||"grab")});var c=(0,h.get)(this.handlerStyle,"width",2),f=(0,h.get)(this.handlerStyle,"height",24),l=this.group.addGroup({name:"minHandlerShape"});this.minHandlerShape=new Zg({name:"minHandlerShape",group:l,type:a,x:this.x,y:this.y,width:c,height:f,style:this.handlerStyle});var _=this.group.addGroup({name:"maxHandlerShape"});this.maxHandlerShape=new Zg({name:"maxHandlerShape",group:_,type:a,x:this.x,y:this.y,width:c,height:f,style:this.handlerStyle});var I=this.ticks,B=r/(I.length-1);this.tickPosList=[],this.textList&&this.textList.length&&this.textList.forEach(function(ut){ut.destroy()});var j=-1/0,et=this.tickLabelStyle.rotate;delete this.tickLabelStyle.rotate,this.textList=I.map(function(ut,ft){e.tickPosList.push(e.x+ft*B);var gt;e.tickLabelFormatter?(gt=e.tickLabelFormatter(ut),!(0,h.isString)(gt)&&gt&&(gt=ut.date)):gt=ut.date;var Mt=e.x+ft*B,Ht=e.y+n+5,se=e.group.addShape("text",{attrs:jo({x:Mt,y:Ht,text:gt,fontFamily:e.fontFamily||"Arial, sans-serif"},e.tickLabelStyle),name:"tick-label"});if((0,h.isNumber)(et)&&ft!==I.length-1){var oe=TE([1,0,0,0,1,0,0,0,1],[["t",-Mt,-Ht],["r",et],["t",Mt-5,Ht+2]]);se.attr({textAlign:"left",matrix:oe})}ft===0?se.attr({textAlign:"left"}):ft!==I.length-1&&se.attr({textAlign:"right"});var _e=e.group.addShape("line",{attrs:jo({x1:e.x+ft*B,y1:e.y+n+2,x2:e.x+ft*B,y2:e.y+n+6},e.tickLineStyle),name:"tick-line"});_e.toBack();var Ue=se.getBBox();return Ue.minX>j?(se.show(),_e.show(),j=Ue.minX+Ue.width+10):(se.hide(),_e.hide()),se}),this.controllerBtnGroup=new vg(jo({group:this.group,x:this.x,y:this.y+n+25,width:r,height:35},this.controllerCfg)),this.updateStartEnd(0),this.updateUI(),s.move(this.x,this.y),this.bindEvents(),this.currentMode===Oc.SINGLE&&(this.minHandlerShape.hide(),this.foregroundShape.hide(),this.minTextShape.hide())},i.prototype.bindEvents=function(){var e=this,t=this.group.find(function(n){return n.get("name")==="minHandlerShape"});t&&(t.on("minHandlerShape-handler:mousedown",this.onMouseDown(this.minHandlerShape)),t.on("minHandlerShape-handler:touchstart",this.onMouseDown(this.minHandlerShape)));var r=this.group.find(function(n){return n.get("name")==="maxHandlerShape"});r&&(r.on("maxHandlerShape-handler:mousedown",this.onMouseDown(this.maxHandlerShape)),r.on("maxHandlerShape-handler:touchstart",this.onMouseDown(this.maxHandlerShape))),this.foregroundShape.on("mousedown",this.onMouseDown(this.foregroundShape)),this.foregroundShape.on("touchstart",this.onMouseDown(this.foregroundShape)),this.group.on("".concat(Jf,":click"),function(){e.isPlay=!e.isPlay,e.currentHandler=e.maxHandlerShape,e.changePlayStatus()}),this.group.on("".concat(Id,":click"),function(){e.currentHandler=e.maxHandlerShape,e.updateStartEnd(.01),e.updateUI()}),this.group.on("".concat(Od,":click"),function(){e.currentHandler=e.maxHandlerShape,e.updateStartEnd(-.01),e.updateUI()}),this.group.on(Cl,function(n){var a=n.type,o=n.speed;e.currentSpeed=o,e.currentMode=a,a===Oc.SINGLE?(e.minHandlerShape.hide(),e.foregroundShape.hide(),e.minTextShape.hide()):a===Oc.RANGE&&(e.minHandlerShape.show(),e.foregroundShape.show(),e.minTextShape.show())})},i.prototype.adjustTickIndex=function(e){for(var t=0;t<this.tickPosList.length-1;t++)if(this.tickPosList[t]<=e&&e<=this.tickPosList[t+1])return Math.abs(this.tickPosList[t]-e)<Math.abs(e-this.tickPosList[t+1])?t:t+1;return 0},i.prototype.adjustOffsetRange=function(e){switch(this.currentHandler){case this.minHandlerShape:{var t=0-this.start,r=1-this.start;return Math.min(r,Math.max(t,e))}case this.maxHandlerShape:{var t=0-this.end,r=1-this.end;return Math.min(r,Math.max(t,e))}case this.foregroundShape:{var t=0-this.start,r=1-this.end;return Math.min(r,Math.max(t,e))}default:return 0}},i.prototype.updateStartEnd=function(e){var t=this.ticks[this.adjustTickIndex(this.start*this.width)],r=this.ticks[this.adjustTickIndex(this.end*this.width)];if(!this.currentHandler){this.minText=this.tickLabelFormatter?this.tickLabelFormatter(t):t==null?void 0:t.date,this.maxText=this.tickLabelFormatter?this.tickLabelFormatter(r):r==null?void 0:r.date;return}switch(this.currentHandler){case this.minHandlerShape:this.maxText=this.maxTextShape.attr("text"),this.start+=e,this.minText=this.tickLabelFormatter?this.tickLabelFormatter(t):t.date;break;case this.maxHandlerShape:this.minText=this.minTextShape.attr("text"),this.end+=e,this.maxText=this.tickLabelFormatter?this.tickLabelFormatter(r):r.date;break;case this.foregroundShape:this.start+=e,this.end+=e,this.minText=this.tickLabelFormatter?this.tickLabelFormatter(t):t.date,this.maxText=this.tickLabelFormatter?this.tickLabelFormatter(r):r.date;break;default:break}},i.prototype.updateUI=function(){var e=this;this.start<0&&(this.start=0),this.end>1&&(this.end=1);var t=this.x+this.start*this.width,r=this.x+this.end*this.width;this.foregroundShape.attr("x",t),this.foregroundShape.attr("width",r-t);var n=(0,h.get)(this.handlerStyle,"width",gv);this.setText(this.minText,this.maxText);var a=this.dodgeText([t,r]),o=a[0],s=a[1];this.minHandlerShape.setX(t-n/2),(0,h.each)(o,function(u,c){return e.minTextShape.attr(c,u)}),this.maxHandlerShape.setX(r-n/2),(0,h.each)(s,function(u,c){return e.maxTextShape.attr(c,u)}),this.currentMode===Oc.RANGE?this.graph.emit(Ic,{value:[this.start,this.end].sort()}):this.currentMode===Oc.SINGLE&&this.graph.emit(Ic,{value:[this.end,this.end]})},i.prototype.dodgeText=function(e){var t,r,n=2,a=(0,h.get)(this.handlerStyle,"width",gv),o=this.minTextShape,s=this.maxTextShape,u=e[0],c=e[1],f=!1;u>c&&(t=[c,u],u=t[0],c=t[1],r=[s,o],o=r[0],s=r[1],f=!0);var l=o.getBBox(),_=s.getBBox(),I=null,B=null;return this.timeBarType==="trend"?(I=u-l.width<this.x+n?{x:u+a/2+n,textAlign:"left"}:{x:u-a/2-n,textAlign:"right"},B=c+_.width>this.x+this.width?{x:c-a/2-n,textAlign:"right"}:{x:c+a/2+n,textAlign:"left"}):this.timeBarType==="simple"&&(I=o.attr("x")>l.width?{x:u,textAlign:"center"}:{x:u,textAlign:"left"},B=s.attr("x")>this.width-_.width?{x:c,textAlign:"right"}:{x:c,textAlign:"center"}),f?[B,I]:[I,B]},i.prototype.startPlay=function(){var e=this;return typeof window!="undefined"?window.requestAnimationFrame(function(){var t=e,r=t.ticks,n=t.width,a=e.currentSpeed,o=n/r.length,s=o/((10-a)*1e3/60),u=e.adjustOffsetRange(s/e.width);e.updateStartEnd(u),e.updateUI(),e.isPlay&&(e.playHandler=e.startPlay())}):void 0},i.prototype.changePlayStatus=function(e){e===void 0&&(e=!0),this.controllerBtnGroup.playButton.update({isPlay:this.isPlay}),this.isPlay?(this.playHandler=this.startPlay(),this.graph.emit(fg,null)):this.playHandler&&(typeof window!="undefined"&&window.cancelAnimationFrame(this.playHandler),e&&this.graph.emit(lg,null))},i.prototype.destory=function(){this.graph.off(Ic,function(){});var e=this.group,t=e.find(function(n){return n.get("name")==="minHandlerShape"});t&&(t.off("minHandlerShape-handler:mousedown"),t.off("minHandlerShape-handler:touchstart"),t.destroy());var r=e.find(function(n){return n.get("name")==="maxHandlerShape"});r&&(r.off("maxHandlerShape-handler:mousedown"),r.off("maxHandlerShape-handler:touchstart"),r.destroy()),this.foregroundShape.off("mousedown"),this.foregroundShape.off("touchstart"),this.foregroundShape.destroy(),e.off("".concat(Jf,":click")),e.off("".concat(Id,":click")),e.off("".concat(Od,":click")),e.off(Cl),e.destroy(),this.trendComponent&&this.trendComponent.destory()},i}(),kE=RE,BE=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),hf=function(){return hf=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},hf.apply(this,arguments)},FE=function(i,e){var t={};for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&e.indexOf(r)<0&&(t[r]=i[r]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(i);n<r.length;n++)e.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(i,r[n])&&(t[r[n]]=i[r[n]]);return t},zE=4,GE=26,UE=function(i){BE(e,i);function e(t){var r=i.call(this,t)||this;return r.afterrenderListener=function(n){return r.filterData({})},r.valueChangeListener=(0,h.throttle)(function(n){return r.filterData(n)},200,{trailing:!0,leading:!0}),r.changeData=function(n){var a=r.get("graph");r.cacheGraphData=a.get("data"),r.filterData({})},r}return e.prototype.getDefaultCfgs=function(){return{container:null,className:"g6-component-timebar",padding:10,type:"trend",trend:{data:[],isArea:!1,smooth:!0},controllerCfg:{speed:1,loop:!1},slider:{start:.1,end:.9,minText:"min",maxText:"max"},tick:{start:.1,end:.9,data:[]},textStyle:{},filterEdge:!1,filterItemTypes:["node"],containerCSS:{},putInGraphContainer:!0}},e.prototype.initContainer=function(){var t=this.get("graph"),r=this._cfgs,n=r.width,a=r.height,o=r.putInGraphContainer,s=this.get("className")||"g6-component-timebar",u=this.get("container"),c;if(u?((0,h.isString)(u)&&(u=document.getElementById(u)),c=u):(c=Ko("<div class='".concat(s,"'></div>")),gi(c,{position:"relative"})),o){var f=this.get("graph").get("container");f.appendChild(c)}this.set("timeBarContainer",c);var l,_=t.get("renderer");_==="SVG"?l=new Cd({container:c,width:n,height:a}):l=new ff({container:c,width:n,height:a}),this.get("containerCSS")&&gi(c,this.get("containerCSS")),this.set("canvas",l)},e.prototype.init=function(){this.initContainer();var t=this.get("canvas"),r=t.addGroup({name:"timebar-group"});this.set("timeBarGroup",r),this.renderTrend(),this.initEvent();var n=typeof window!="undefined"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif";this.set("fontFamily",n)},e.prototype.play=function(){this.togglePlay(!0)},e.prototype.pause=function(){this.togglePlay(!1)},e.prototype.togglePlay=function(t){var r=this.get("timebar");r&&(r.isPlay=!!t,r.changePlayStatus())},e.prototype.renderTrend=function(){var t=this,r=this._cfgs,n=r.width,a=r.x,o=r.y,s=r.padding,u=r.type,c=r.trend,f=r.slider,l=r.controllerCfg,_=r.textStyle,I=r.tick,B=r.backgroundStyle,j=r.foregroundStyle,et=c.data,ut=FE(c,["data"]),ft=n-2*s,gt=u==="trend"?GE:zE,Mt=this.get("graph"),Ht=this.get("timeBarGroup"),se=this.get("canvas"),oe=null;if(u==="trend"||u==="simple"){var _e=this.get("getValue");oe=new kE(hf(hf({graph:Mt,canvas:se,group:Ht,type:u,x:a+s,y:u==="trend"?o+s:o+s+15,width:ft,height:gt,padding:s,backgroundStyle:B,foregroundStyle:j,trendCfg:hf(hf({},ut),{data:et.map(function(Ne){return(_e==null?void 0:_e(Ne))||Ne.value})})},f),{tick:{ticks:et,tickLabelFormatter:I.tickLabelFormatter,tickLabelStyle:I.tickLabelStyle,tickLineStyle:I.tickLineStyle},handlerStyle:hf(hf({},f.handlerStyle),{height:f.height||gt}),controllerCfg:l,textStyle:_}))}else u==="tick"&&(oe=new ob(hf({graph:Mt,canvas:se,group:Ht,x:a+s,y:o+s,width:n,height:42,padding:2,controllerCfg:l},I)));var Ue=function Ne(){var Qe=t.get("timebar");Qe.draggingHandler=!1,Qe.isPlay&&(Qe.isPlay=!1,Qe.currentHandler=Qe.maxHandlerShape,Qe.changePlayStatus()),document.removeEventListener("mouseup",Ne)};se.on("mousedown",function(Ne){(Ne.target.get("name")==="maxHandlerShape-handler"||Ne.target.get("name")==="minHandlerShape-handler"||Ne.target===oe.foregroundShape)&&document.addEventListener("mouseup",Ue)}),this.set("timebar",oe)},e.prototype.filterData=function(t){var r,n=t.value;if(!n){n=[];var a=this._cfgs.type;!a||a==="trend"||a==="simple"?(n[0]=this._cfgs.slider.start,n[1]=this._cfgs.slider.end):a==="tick"&&(n[0]=this._cfgs.tick.start,n[1]=this._cfgs.tick.end)}var o=null,s=this._cfgs.type;if(s==="trend"||s==="simple"?o=this._cfgs.trend.data:s==="tick"&&(o=this._cfgs.tick.data),!o||o.length===0){console.warn("\u8BF7\u914D\u7F6E TimeBar \u7EC4\u4EF6\u7684\u6570\u636E");return}var u=this.get("rangeChange"),c=this.get("graph"),f=Math.round(o.length*n[0]),l=Math.round(o.length*n[1]);l=l>=o.length?o.length-1:l,f=f>=o.length?o.length-1:f;var _=(r=this._cfgs.tick)===null||r===void 0?void 0:r.tickLabelFormatter,I=_?_(o[f]):o[f].date,B=_?_(o[l]):o[l].date;if(s!=="tick"){var j=this.get("timebar");j.setText(I,B)}if(u)u(c,I,B);else{(!this.cacheGraphData||this.cacheGraphData.nodes&&this.cacheGraphData.nodes.length===0)&&(this.cacheGraphData=c.get("data"));var et=this.get("filterItemTypes"),ut=this.get("changeData"),ft=this.get("getDate"),gt=this.get("shouldIgnore"),Mt=o[f].date,Ht=o[l].date;if(ut||ut===void 0){var se=this.cacheGraphData.nodes,oe=this.cacheGraphData.edges,_e={},Ue={};c.getNodes().forEach(function(Ne){return _e[Ne.getID()]=!0}),c.getEdges().forEach(function(Ne){return Ue[Ne.getID()]=!0}),et.includes("node")&&(se==null||se.forEach(function(Ne){var Qe=+((ft==null?void 0:ft(Ne))||Ne.date),dr=Qe>=Mt&&Qe<=Ht||(gt==null?void 0:gt("node",Ne,{min:Mt,max:Ht})),nn=_e[Ne.id];nn&&!dr?(c.removeItem(Ne.id),_e[Ne.id]=!1):!nn&&dr&&(c.addItem("node",Ne),_e[Ne.id]=!0)}),oe==null||oe.forEach(function(Ne){var Qe=_e[Ne.source]&&_e[Ne.target]||(gt==null?void 0:gt("edge",Ne,{min:Mt,max:Ht})),dr=!!c.findById(Ne.id);dr&&!Qe?(c.removeItem(Ne.id),Ue[Ne.id]=!1):!dr&&Qe?(c.addItem("edge",Ne),Ue[Ne.id]=!0):dr||(Ue[Ne.id]=!1)})),(this.get("filterEdge")||et.includes("edge"))&&(oe==null||oe.filter(function(Ne){var Qe=+((ft==null?void 0:ft(Ne))||Ne.date),dr=Qe>=Mt&&Qe<=Ht||(gt==null?void 0:gt("edge",Ne,{min:Mt,max:Ht})),nn=_e[Ne.source]&&_e[Ne.target],kn=dr&&nn,En=Ue[Ne.id];En&&!kn?(Ue[Ne.id]=!1,c.removeItem(Ne.id)):!En&&kn&&(Ue[Ne.id]=!0,c.addItem("edge",Ne))}))}else et.includes("node")&&c.getNodes().forEach(function(Ne){var Qe=Ne.getModel();if(!(gt!=null&&gt("node",Qe,{min:Mt,max:Ht}))){var dr=+((ft==null?void 0:ft(Qe))||Qe.date);dr<Mt||dr>Ht?c.hideItem(Ne):c.showItem(Ne)}}),(this.get("filterEdge")||et.includes("edge"))&&c.getEdges().forEach(function(Ne){var Qe=Ne.getModel();if(!(gt!=null&&gt("edge",Qe,{min:o[f].date,max:o[l].date}))){var dr=+((ft==null?void 0:ft(Qe))||Qe.date);if(dr<o[f].date||dr>o[l].date)c.hideItem(Ne);else{var nn=Ne.getSource().isVisible(),kn=Ne.getTarget().isVisible();nn&&kn&&c.showItem(Ne)}}})}},e.prototype.initEvent=function(){var t=this.get("graph");t.on("afterchangedata",this.changeData),t.on("afterrender",this.afterrenderListener),t.on(Ic,this.valueChangeListener)},e.prototype.destroy=function(){var t=this.get("graph");t.off("afterchangedata",this.changeData),t.off("afterrender",this.afterrenderListener),t.off(Ic,this.valueChangeListener);var r=this.get("timebar");r&&r.destory&&r.destory(),i.prototype.destroy.call(this);var n=this.get("timeBarContainer");if(n){var a=this.get("container");a||(a=this.get("graph").get("container")),(0,h.isString)(a)&&(a=document.getElementById(a)),a===n&&(a=a.parentElement),a.removeChild(n)}},e}(uu),WE=UE,YE=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),XE=Xs.applyMatrix;function jE(i,e){var t,r;if(i.naturalWidth)t=i.naturalWidth,r=i.naturalHeight;else{var n=new Image;n.src=i.src,n.onload=function(){e&&e(n.width,n.height)}}return[t,r]}var VE=function(i){YE(e,i);function e(t){return i.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{container:null,className:"g6-minimap",viewportClassName:"g6-minimap-viewport",width:200,delegateStyle:{fill:"#40a9ff",stroke:"#096dd9"},refresh:!0}},e.prototype.getEvents=function(){return{beforepaint:"updateViewport",beforeanimate:"disableRefresh",afteranimate:"enableRefresh",viewportchange:"disableOneRefresh"}},e.prototype.disableRefresh=function(){this.set("refresh",!1)},e.prototype.enableRefresh=function(){this.set("refresh",!0),this.updateCanvas()},e.prototype.disableOneRefresh=function(){this.set("viewportChange",!0)},e.prototype.initViewport=function(){var t=this,r=this._cfgs,n=r.graph;if(!this.destroyed){var a=this.get("container");(0,h.isString)(a)&&(a=document.getElementById(a));var o=Ko("<div class=".concat(r.viewportClassName,`
      style='position:absolute;
        left:0;
        top:0;
        box-sizing:border-box;
        border: 2px solid #1980ff;
        cursor:move'
      </div>`)),s=0,u=0,c=!1,f=0,l=0,_=0,I=0,B=0,j=0;a.addEventListener("mousedown",function(et){if(r.refresh=!1,et.target===o){var ut=o.style;_=parseInt(ut.width,10),I=parseInt(ut.height,10);var ft=t.get("width"),gt=t.get("height");_>ft||I>gt||(j=n.getZoom(),B=t.get("ratio"),c=!0,s=et.clientX,u=et.clientY)}},!1),a.addEventListener("mousemove",function(et){if(!(!c||(0,h.isNil)(et.clientX)||(0,h.isNil)(et.clientY))){var ut=t.get("width"),ft=t.get("height"),gt=o.style;f=parseInt(gt.left,10),l=parseInt(gt.top,10),_=parseInt(gt.width,10),I=parseInt(gt.height,10);var Mt=s-et.clientX,Ht=u-et.clientY;f-Mt<0?Mt=f:f-Mt+_>=ut&&(Mt=0),l-Ht<0?Ht=l:l-Ht+I>=ft&&(Ht=0),f-=Mt,l-=Ht,gi(o,{left:"".concat(f,"px"),top:"".concat(l,"px")}),n.translate(Mt*j/B,Ht*j/B),s=et.clientX,u=et.clientY}},!1),a.addEventListener("mouseleave",function(){c=!1,r.refresh=!0},!1),a.addEventListener("mouseup",function(){c=!1,r.refresh=!0},!1),this.set("viewport",o),a.appendChild(o)}},e.prototype.updateViewport=function(){if(!this.destroyed){var t=this.get("ratio"),r=this.get("width"),n=this.get("height"),a=this.get("graph"),o=a.get("width"),s=a.get("height"),u=o/s,c=a.getGroup(),f=c.getCanvasBBox(),l=[(f.minX+f.maxX)/2,(f.minY+f.maxY)/2],_=[f.maxX-f.minX,f.maxY-f.minY],I={centerX:l[0],centerY:l[1],width:0,height:0,minX:0,minY:0};f[0]/f[1]>u?(I.width=_[0],I.height=I.width/u):(I.height=_[1],I.width=I.height*u),I.minX=l[0]-I.width/2,I.minY=l[1]-I.height/2;var B=c.getMatrix();B||(B=[1,0,0,0,1,0,0,0,1]);var j=tt.invert([1,0,0,0,1,0,0,0,1],B),et=XE({x:I.minX,y:I.minY},j),ut=a.getCanvasByPoint(et.x,et.y),ft=this.get("viewport");ft||this.initViewport();var gt=o/I.width,Mt=gt*r,Ht=gt*n,se=r*-ut.x/I.width,oe=n*-ut.y/I.height,_e=se+Mt,Ue=oe+Ht;se<0&&(Mt+=se,se=0),_e>r&&(Mt=Mt-(_e-r)),oe<0&&(Ht+=oe,oe=0),Ue>n&&(Ht=Ht-(Ue-n)),this.set("ratio",t);var Ne="".concat(se,"px"),Qe="".concat(oe,"px");gi(ft,{left:Ne,top:Qe,width:"".concat(Mt,"px"),height:"".concat(Ht,"px")})}},e.prototype.init=function(){this.initContainer()},e.prototype.initContainer=function(){var t=this,r=t.get("graph"),n=r.get("width"),a=r.get("height"),o=a/n,s=t.get("className"),u=t.get("container"),c=t.get("width"),f=t.get("height");!c&&!f&&(c=200),c?(f=o*c,t.set("height",f)):(c=1/o*f,t.set("width",c));var l=Ko("<div class='".concat(s,"' style='width: ").concat(c,"px; height: ").concat(f,"px; overflow: hidden; position: relative;'></div>"));(0,h.isString)(u)&&(u=document.getElementById(u)),u?u.appendChild(l):r.get("container").appendChild(l),t.set("container",l);var _=Ko('<div class="g6-minimap-container" style="position: relative; width: 100%; height: 100%; text-align: center; display: table;"></div>');l.appendChild(_);var I=Ko('<span style="display: table-cell; vertical-align: middle; "></span>');_.appendChild(I),t.set("containerDOM",_),t.set("containerSpan",I);var B=Ko('<img alt="" src="'.concat(this.get("graphImg"),'" style="display: inline-block; user-select: none;" draggable="false" />'));t.set("imgDOM",B),t.updateImgSize(),I.appendChild(B),t.updateCanvas()},e.prototype.updateImgSize=function(){var t=this,r=t.get("imgDOM"),n=t.get("width"),a=t.get("height");r.onload=function(){var o=jE(r);o[0]>o[1]?r.width=n:r.height=a}},e.prototype.updateCanvas=function(){var t=this.get("refresh");if(t){var r=this.get("graph");if(!r.get("destroyed")){this.get("viewportChange")&&(this.set("viewportChange",!1),this.updateViewport());var n=this.get("width"),a=r.get("canvas").getCanvasBBox(),o=a.width,s=n/o;this.set("ratio",s),this.updateViewport()}}},e.prototype.getViewport=function(){return this.get("viewport")},e.prototype.getContainer=function(){return this.get("container")},e.prototype.updateGraphImg=function(t){var r=this,n=r.get("imgDOM");n.remove(),r.set("graphImg",t);var a=Ko('<img alt="" src="'.concat(t,'" style="display: inline-block;" ondragstart="return false;" onselectstart="return false;"/>'));r.set("imgDOM",a),a.src=t,r.updateImgSize();var o=r.get("containerSpan");o.appendChild(a),r.updateCanvas()},e.prototype.destroy=function(){var t=this.get("container");t.parentNode.removeChild(t)},e}(uu),HE=VE,ZE=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),mv=function(){return mv=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},mv.apply(this,arguments)},KE=Xs.distance,Kg=.05,$g={stroke:"#000",strokeOpacity:.8,lineWidth:2,fillOpacity:1,fill:"#fff"},$E=function(i){ZE(e,i);function e(t){return i.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{type:"both",trigger:"mousemove",r:60,delegateStyle:(0,h.clone)($g),showLabel:"edge",scaleRBy:"wheel"}},e.prototype.getEvents=function(){var t;switch(this.get("trigger")){case"click":t={click:"filter"};break;case"drag":t={click:"createDelegate"};break;default:t={mousemove:"filter"};break}return t},e.prototype.init=function(){var t=this,r=t.get("showLabel"),n=r==="node"||r==="both",a=r==="edge"||r==="both";t.set("showNodeLabel",n),t.set("showEdgeLabel",a);var o=t.get("shouldShow");o||t.set("shouldShow",function(){return!0})},e.prototype.createDelegate=function(t){var r=this,n=r.get("delegate");(!n||n.destroyed)&&(r.filter(t),n=r.get("delegate"),n.on("dragstart",function(a){}),n.on("drag",function(a){r.filter(a)}),this.get("scaleRBy")==="wheel"&&n.on("mousewheel",function(a){r.scaleRByWheel(a)}))},e.prototype.scaleRByWheel=function(t){var r=this;if(!(!t||!t.originalEvent)){t.preventDefault&&t.preventDefault();var n=r.get("graph"),a,o=r.get("delegate"),s=o?{x:o.attr("x"),y:o.attr("y")}:void 0,u=s||n.getPointByClient(t.clientX,t.clientY);t.originalEvent.wheelDelta<0?a=1-Kg:a=1/(1-Kg);var c=r.get("maxR"),f=r.get("minR"),l=r.get("r");(l>(c||n.get("height"))&&a>1||l<(f||n.get("height")*.05)&&a<1)&&(a=1),l*=a,r.set("r",l),r.filter(t)}},e.prototype.filter=function(t){var r=this,n=r.get("graph"),a=n.getNodes(),o={},s=r.get("r"),u=r.get("type"),c={x:t.x,y:t.y};r.updateDelegate(c,s);var f=r.get("shouldShow"),l=r.get("vShapes");l&&l.forEach(function(ut){ut.remove(),ut.destroy()}),l=[],a.forEach(function(ut){var ft=ut.getModel(),gt=ft.x,Mt=ft.y;KE({x:gt,y:Mt},c)<s&&(o[ft.id]=ut)});var _=n.getEdges(),I=[];_.forEach(function(ut){var ft=ut.getModel(),gt=ft.source,Mt=ft.target;f(ft)&&(u==="only-source"||u==="one"?o[gt]&&!o[Mt]&&I.push(ut):u==="only-target"||u==="one"?o[Mt]&&!o[gt]&&I.push(ut):u==="both"&&o[gt]&&o[Mt]&&I.push(ut))});var B=r.get("showNodeLabel"),j=r.get("showEdgelabel"),et=n.get("group");I.forEach(function(ut){var ft=ut.get("group").get("children");ft.forEach(function(gt){var Mt=gt.get("type"),Ht=et.addShape(Mt,{attrs:gt.attr()});l.push(Ht),B&&Mt==="text"&&Ht.set("visible",!0)})}),Object.keys(o).forEach(function(ut){var ft=o[ut],gt=ft.get("group").clone();if(et.add(gt),l.push(gt),j)for(var Mt=gt.get("children"),Ht=0;Ht<Mt.length;Ht++){var se=Mt[Ht];se.get("type")==="text"&&se.set("visible",!0)}}),r.set("vShapes",l)},e.prototype.updateParams=function(t){var r=this,n=t.r,a=t.trigger,o=t.minR,s=t.maxR,u=t.scaleRBy,c=t.showLabel,f=t.shouldShow;if(isNaN(t.r)||r.set("r",n),isNaN(s)||r.set("maxR",s),isNaN(o)||r.set("minR",o),(a==="mousemove"||a==="click")&&r.set("trigger",a),u==="wheel"||u==="unset"){r.set("scaleRBy",u),r.get("delegate").remove(),r.get("delegate").destroy();var l=r.get("dPercentText");l&&(l.remove(),l.destroy())}(c==="node"||c==="both")&&r.set("showNodeLabel",!0),(c==="edge"||c==="both")&&r.set("showEdgeLabel",!0),f&&r.set("shouldShow",f)},e.prototype.updateDelegate=function(t,r){var n=this,a=n.get("graph"),o=n.get("delegate");if(!o||o.destroyed){var s=a.get("group"),u=n.get("delegateStyle")||$g;o=s.addShape("circle",{attrs:mv({r,x:t.x,y:t.y},u),name:"lens-shape",draggable:!0}),this.get("trigger")!=="drag"&&this.get("scaleRBy")==="wheel"&&o.on("mousewheel",function(c){n.scaleRByWheel(c)})}else o.attr({x:t.x,y:t.y,r});n.set("delegate",o)},e.prototype.clear=function(){var t=this,r=t.get("vShapes");r&&r.forEach(function(a){a.remove(),a.destroy()}),r=[],t.set("vShapes",r);var n=t.get("delegate");n&&!n.destroyed&&(n.remove(),n.destroy())},e.prototype.destroy=function(){this.clear()},e}(uu),qE=$E,QE=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),JE=Xs.pointLineDistance,tw={stroke:"#FA8C16",lineWidth:1},ew=function(i){QE(e,i);function e(t){return i.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{line:tw,itemAlignType:"center",tolerance:5,horizontalLines:{},verticalLines:{},alignLines:[]}},e.prototype.init=function(){},e.prototype.getEvents=function(){return{"node:dragstart":"onDragStart","node:drag":"onDrag","node:dragend":"onDragEnd"}},e.prototype.onDragStart=function(){this.initBoxLine()},e.prototype.onDrag=function(t){var r=t.item,n=r.get("delegateShape")||r,a=n.getBBox(),o=r.getModel(),s=o.x-a.x,u=o.y-a.y;this.show({x:a.minX+s,y:a.minY+u},{width:a.width,height:a.height})},e.prototype.onDragEnd=function(){this.destory()},e.prototype.initBoxLine=function(){var t=this._cfgs,r=t.horizontalLines,n=t.verticalLines,a=t.itemAlignType,o=this.get("graph"),s=o.getNodes();s.forEach(function(u){var c=u.getBBox(),f=u.get("id");a===!0||a==="horizontal"?(r["".concat(f,"tltr")]=[c.minX,c.minY,c.maxX,c.minY,u],r["".concat(f,"lcrc")]=[c.minX,c.centerY,c.maxX,c.centerY,u],r["".concat(f,"blbr")]=[c.minX,c.maxY,c.maxX,c.maxY,u]):a==="center"&&(r["".concat(f,"lcrc")]=[c.minX,c.centerY,c.maxX,c.centerY,u]),a===!0||a==="vertical"?(n["".concat(f,"tlbl")]=[c.minX,c.minY,c.minX,c.maxY,u],n["".concat(f,"tcbc")]=[c.centerX,c.minY,c.centerX,c.maxY,u],n["".concat(f,"trbr")]=[c.maxX,c.minY,c.maxX,c.maxY,u]):a==="center"&&(n["".concat(f,"tcbc")]=[c.centerX,c.minY,c.centerX,c.maxY,u])})},e.prototype.show=function(t,r){var n=(0,h.mix)({},t);return this.itemAlign(t,r,n),t},e.prototype.itemAlign=function(t,r,n){var a=this,o=this._cfgs,s=o.horizontalLines,u=o.verticalLines,c=o.tolerance,f={x:n.x+r.width/2,y:n.y},l={x:n.x+r.width/2,y:n.y+r.height/2},_={x:n.x+r.width/2,y:n.y+r.height},I={x:n.x,y:n.y+r.height/2},B={x:n.x+r.width,y:n.y+r.height/2},j=[],et=[],ut=null;if(this.clearAlignLine(),(0,h.each)(s,function(gt){gt[4].isVisible&&(j.push(a.getLineDisObject(gt,f)),j.push(a.getLineDisObject(gt,l)),j.push(a.getLineDisObject(gt,_)))}),(0,h.each)(u,function(gt){gt[4].isVisible&&(et.push(a.getLineDisObject(gt,I)),et.push(a.getLineDisObject(gt,l)),et.push(a.getLineDisObject(gt,B)))}),j.sort(function(gt,Mt){return gt.dis-Mt.dis}),et.sort(function(gt,Mt){return gt.dis-Mt.dis}),j.length!==0&&j[0].dis<c){t.y=j[0].line[1]-j[0].point.y+n.y,ut={type:"item",horizontals:[j[0]]};for(var ft=1;ft<3;ft++)j[0].dis===j[ft].dis&&ut.horizontals.push(j[ft])}if(et.length!==0&&et[0].dis<c){t.x=et[0].line[0]-et[0].point.x+n.x,ut?ut.verticals=[et[0]]:ut={type:"item",verticals:[et[0]]};for(var ft=1;ft<3;ft++)et[0].dis===et[ft].dis&&ut.verticals.push(et[ft])}ut&&(ut.bbox=r,this.addAlignLine(ut))},e.prototype.addAlignLine=function(t){var r=t.bbox,n=t.type,a=t.horizontals,o=t.verticals,s=this._cfgs,u=s.line,c=s.alignLines,f=this.get("graph"),l=f.get("group");n==="item"&&(a&&(0,h.each)(a,function(_){var I=_.line,B=_.point,j=(I[0]+I[2])/2,et,ut;B.x<j?(et=B.x-r.width/2,ut=Math.max(I[0],I[2])):(et=B.x+r.width/2,ut=Math.min(I[0],I[2]));var ft=(0,h.mix)({x1:et,y1:I[1],x2:ut,y2:I[1]},u),gt=l.addShape("line",{attrs:ft,capture:!1});c.push(gt)}),o&&(0,h.each)(o,function(_){var I=_.line,B=_.point,j=(I[1]+I[3])/2,et,ut;B.y<j?(et=B.y-r.height/2,ut=Math.max(I[1],I[3])):(et=B.y+r.height/2,ut=Math.min(I[1],I[3]));var ft=(0,h.mix)({x1:I[0],y1:et,x2:I[0],y2:ut},u),gt=l.addShape("line",{attrs:ft,capture:!1});c.push(gt)}))},e.prototype.getLineDisObject=function(t,r){return{line:t,point:r,dis:JE(t,r)}},e.prototype.getContainer=function(){return this.get("container")},e.prototype.clearAlignLine=function(){var t=this._cfgs.alignLines;(0,h.each)(t,function(r){r.remove()}),t.length=0},e.prototype.destory=function(){var t=this._cfgs,r=t.horizontalLines,n=t.verticalLines,a=this.get("graph"),o=a.getNodes();o.forEach(function(s){var u=s.get("id");delete r["".concat(u,"tltr")],delete r["".concat(u,"lcrc")],delete r["".concat(u,"blbr")],delete n["".concat(u,"tlbl")],delete n["".concat(u,"tcbc")],delete n["".concat(u,"trbr")]}),this.clearAlignLine()},e}(uu),rw=ew,nw=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),as=function(){return as=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},as.apply(this,arguments)},aw=["click","mouseenter"],iw=function(i){nw(e,i);function e(t){return i.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{data:{},position:"top",padding:8,margin:8,offsetX:0,offsetY:0,layout:"horizontal",flipPage:!1,containerStyle:{},align:void 0,horiSep:8,vertiSep:8,filter:{enable:!1,trigger:"click"}}},e.prototype.init=function(){this.formatArray("padding"),this.formatArray("margin");var t=this.get("filter")||{},r=t.multiple;r&&t.trigger==="mouseenter"&&this.set("multiple",!1);var n=this.get("align");if(!n){var a=this.get("position").split("-");a.includes("left")&&(n="left"),a.includes("right")?n="right":n="center",this.set("align",n)}var o=this.get("graph"),s=o.get("container"),u=Ko(`<div class='g6-legend-container' style="position: absolute;"></div>`);s.appendChild(u),this.set("container",u);var c=this.render();gi(u,this.getContainerPos(c)),this.bindEvents()},e.prototype.getContainerPos=function(t){t===void 0&&(t=[0,0]);var r=this,n=r.get("graph"),a=this.get("offsetX"),o=this.get("offsetY"),s=this.get("margin"),u=this.get("position").split("-"),c={top:0,right:1,bottom:2,left:3},f=0,l=0,_={left:(n.getWidth()-t[0])/2+f,top:(n.getHeight()-t[1])/2+l};return u.forEach(function(I){var B=s[c[I]],j=I;switch(I){case"top":B+=l;break;case"left":B+=f;break;case"bottom":B=n.getHeight()-t[1]-B+l,j="top";break;default:B=n.getWidth()-t[0]-B+f,j="left";break}_[j]=B}),_.top+=o+n.getContainer().offsetTop,_.left+=a+n.getContainer().offsetLeft,Object.keys(_).forEach(function(I){_[I]="".concat(_[I],"px")}),_},e.prototype.bindEvents=function(){var t=this,r=t.get("filter");if(!(!r||!r.enable)){var n=r.trigger||"click";aw.includes(n)||(console.warn("Trigger for legend filterling must be 'click' or 'mouseenter', 'click' will take effect by default."),n="click");var a=t.get("legendCanvas");n==="mouseenter"?(a.on("node-container:mouseenter",function(o){return t.filterData(o)}),a.on("node-container:mouseleave",function(o){t.clearFilter(),t.clearActiveLegend()})):(a.on("node-container:click",function(o){return t.filterData(o)}),a.on("click",function(o){o.target&&o.target.isCanvas&&o.target.isCanvas()&&(t.clearFilter(),t.clearActiveLegend())}))}},e.prototype.changeData=function(t){this.set("data",t);var r=this.render();gi(this.get("container"),this.getContainerPos(r))},e.prototype.activateLegend=function(t){var r=this.get("filter"),n=r==null?void 0:r.multiple;n||this.clearActiveLegend();var a=t.get("parent");a.get("active")?(a.set("active",!1),this.findLegendItemsByState("active").length&&a.set("inactive",!0)):(a.set("inactive",!1),a.set("active",!0)),this.findLegendItemsByState("active").length?this.findLegendItemsByState("active","all",!1).forEach(function(l){l.set("inactive",!0)}):this.clearActiveLegend();var o=(r==null?void 0:r.legendStateStyles)||{},s=(o==null?void 0:o.inactive)||{opacity:.5,"text-shape":{opacity:.5}},u=s["text-shape"]||{};this.findLegendItemsByState("inactive").forEach(function(l){var _=l.get("children"),I=_[0],B=_[1];I.attr(as(as({},I.get("oriAttrs")),s)),B.attr(as(as({},B.get("oriAttrs")),u))});var c=(o==null?void 0:o.active)||{stroke:"#000",lineWidth:2,"text-shape":{fontWeight:"bold"}},f=c["text-shape"]||{};this.findLegendItemsByState("active").forEach(function(l){var _=l.get("children"),I=_[0],B=_[1];I.attr(as(as({},I.get("oriAttrs")),c)),B.attr(as(as({},B.get("oriAttrs")),f))})},e.prototype.findLegendItemsByState=function(t,r,n){r===void 0&&(r="all"),n===void 0&&(n=!0);var a=this.get("legendCanvas").find(function(u){return u.get("name")==="root"}),o=a.find(function(u){return u.get("name")==="node-group"}),s=a.find(function(u){return u.get("name")==="edge-group"});return r==="node"?o.get("children").filter(function(u){return!!u.get(t)===n}):r==="edge"?s.get("children").filter(function(u){return!!u.get(t)===n}):o.get("children").filter(function(u){return!!u.get(t)===n}).concat(s.get("children").filter(function(u){return!!u.get(t)===n}))},e.prototype.clearActiveLegend=function(){var t=this.get("legendCanvas"),r=t.find(function(a){return a.get("name")==="root"}),n=[r.find(function(a){return a.get("name")==="node-group"}),r.find(function(a){return a.get("name")==="edge-group"})];n.forEach(function(a){a.get("children").forEach(function(o){o.set("active",!1),o.set("inactive",!1);var s=o.get("children"),u=s[0],c=s[1];u.attr(u.get("oriAttrs")),c.attr(c.get("oriAttrs"))})})},e.prototype.filterData=function(t){var r=this.get("filter"),n=r==null?void 0:r.filterFunctions;if(!(!r||!n)){var a=this.get("legendCanvas"),o=this.get("graph"),s=r.graphActiveState||"active",u=r.graphInactiveState||"inactive",c=r.multiple;this.clearFilter(),c||this.clearActiveLegend(),this.activateLegend(t.target);var f=a.find(function(ut){return ut.get("name")==="root"}),l=f.find(function(ut){return ut.get("name")==="node-group"}),_=f.find(function(ut){return ut.get("name")==="edge-group"}),I=l.get("children").filter(function(ut){return ut.get("active")}),B=_.get("children").filter(function(ut){return ut.get("active")}),j=0,et=["getNodes","getEdges"];et.forEach(function(ut){o[ut]().forEach(function(ft){var gt=!1,Mt=ut==="getNodes"?I:B;Mt.forEach(function(Ht){var se=n[Ht.get("id")];gt=gt||se(ft.getModel())}),gt?(o.setItemState(ft,u,!1),o.setItemState(ft,s,!0),j++):(o.setItemState(ft,s,!1),o.setItemState(ft,u,!0))})}),j||et.forEach(function(ut){o[ut]().forEach(function(ft){o.clearItemStates(ft,[u])})})}},e.prototype.clearFilter=function(){var t=this.get("graph"),r=this.get("filter");if(r){var n=r.graphActiveState||"active",a=r.graphInactiveState||"inactive";t.getNodes().forEach(function(o){t.clearItemStates(o,[n,a])}),t.getEdges().forEach(function(o){t.clearItemStates(o,[n,a])})}},e.prototype.render=function(){var t=this;this.processData();var r=this.get("legendCanvas");r?r.clear():r=new ff({container:this.get("container"),width:200,height:200});var n=r.addGroup({name:"root"}),a=n.addGroup({name:"node-group"}),o=n.addGroup({name:"edge-group"});this.set("legendCanvas",r);var s=this.get("itemsData"),u=["nodes","edges"],c=[a,o];u.forEach(function(Kr,Jn){s[Kr].forEach(function(Kn){var $r,xn=c[Jn].addGroup({id:Kn.id,name:"node-container"}),zn,Gn=Kn.type,ia=t.getShapeSize(Kn),ha=ia.width,Xa=ia.height,si=ia.r,to=t.getStyle(Kr.substr(0,4),Kn);switch(Kn.type){case"circle":zn={r:si,x:0,y:0};break;case"rect":zn={width:ha,height:Xa,x:-ha/2,y:-Xa/2};break;case"ellipse":zn={rx:ha,ry:Xa,x:0,y:0},Gn="ellipse";break;case"line":zn={x1:-ha/2,y1:0,x2:ha/2,y2:0},Gn="line";break;case"quadratic":zn={path:[["M",-ha/2,0],["Q",0,ha/2,ha/2,0]]},Gn="path";break;case"cubic":zn={path:[["M",-ha/2,0],["C",-ha/6,ha/2,ha/6,-ha/2,ha/2,0]]},Gn="path";break;case"diamond":zn={path:[["M",0,-Xa],["L",ha,0],["L",0,Xa],["L",-ha,0],["Z"]]},Gn="path";break;case"triangle":zn={path:[["M",-ha,Xa],["L",0,-Xa],["L",ha,Xa],["Z"]]},Gn="path";break;case"star":zn={path:Xs.getStarPath(si*3,si*1.2)},Gn="path";break;default:zn={r:si,x:0,y:0};break}var Pi=xn.addShape(Gn,{attrs:as(as({},zn),to),name:"".concat(Kn.type,"-node-keyShape"),oriAttrs:as({opacity:1},to)});if(Kn.label){var eo=Pi.getBBox(),po=(($r=Kn.labelCfg)===null||$r===void 0?void 0:$r.style)||{},Vo=as({textAlign:"begin",fontSize:12,textBaseline:"middle",fill:"#000",opacity:1,fontWeight:"normal"},po);xn.addShape("text",{attrs:as({x:eo.maxX+4,y:0,text:Kn.label},Vo),className:"legend-label",name:"".concat(Kn.type,"-node-text"),oriAttrs:Vo})}})});var f=this.get("padding"),l,_=n.find(function(Kr){return Kr.get("name")==="title-container"}),I={height:0,maxY:0,width:0};if(this.get("title")){_||(_=n.addGroup({name:"title-container"}));var B={fontSize:20,fontFamily:"Arial",fontWeight:300,textBaseline:"top",textAlign:"center",fill:"#000",x:0,y:f[0]},j=this.get("titleConfig")||{},et=Object.assign(B,j.style||{});l=_.addShape("text",{attrs:as({text:this.get("title")},et)}),I=_.getCanvasBBox(),_.setMatrix([1,0,0,0,1,0,j.offsetX,j.offsetY,1])}this.layoutItems();var ut=n.getCanvasBBox(),ft=a.getCanvasBBox(),gt=ft.minX<0?Math.abs(ft.minX)+f[3]:f[3],Mt=I.maxY<ft.minY?Math.abs(I.maxY-ft.minY)+f[0]:I.maxY+f[0],Ht=[1,0,0,0,1,0,gt,Mt,1];a.setMatrix(Ht),ut=n.getCanvasBBox();var se=[ut.minX+ut.width+f[1],ut.minY+ut.height+f[2]];if(l){var j=as({position:"center",offsetX:0,offsetY:0},this.get("titleConfig"));I=_.getCanvasBBox();var oe=_.getMatrix()||[1,0,0,0,1,0,0,0,1];j.position==="center"?oe[6]=se[0]/2+j.offsetX:j.position==="right"?(oe[6]=se[0]-f[3]+j.offsetX,l.attr({textAlign:"right"})):(oe[6]=f[3]+j.offsetX,l.attr({textAlign:"left"})),_.setMatrix(oe),I=_.getCanvasBBox(),gt=ft.minX<0?Math.abs(ft.minX)+f[3]:f[3],Mt=ft.minY<I.maxY?Math.abs(I.maxY-ft.minY)+f[0]:I.maxY+f[0],Ht=[1,0,0,0,1,0,gt,Mt,1],a.setMatrix(Ht);var _e=[1,0,0,0,1,0,gt,Mt,1];this.get("layout")==="vertical"?_e[6]+=ft.maxX+this.get("horiSep"):_e[7]+=ft.maxY+this.get("vertiSep"),o.setMatrix(_e)}else{ft=a.getCanvasBBox();var Ue=[1,0,0,0,1,0,0,0,1];this.get("layout")==="vertical"?Ue[6]+=Ht[6]+ft.maxX+this.get("horiSep"):Ue[7]+=Ht[7]+ft.maxY+this.get("vertiSep"),o.setMatrix(Ue)}ut=n.getCanvasBBox(),ft=a.getCanvasBBox(),Ht=a.getMatrix()||[1,0,0,0,1,0,0,0,1];var Ne=o.getMatrix()||[1,0,0,0,1,0,0,0,1],Qe=o.getCanvasBBox();se=[Math.max(ft.width+Ht[6],Qe.width+Ne[6])+f[1],Math.max(ft.height+Ht[7],Qe.height+Ne[7])+f[2]],r.changeSize(se[0],se[1]);var dr=this.get("containerStyle"),nn=n.getMatrix()||[1,0,0,0,1,0,0,0,1],kn=Xs.invertMatrix({x:0,y:0},nn),En=n.addShape("rect",{attrs:as({x:kn.x+(dr.lineWidth||1),y:kn.y+(dr.lineWidth||1),width:se[0]-2*(dr.lineWidth||1),height:se[1]-2*(dr.lineWidth||1),fill:"#f00",stroke:"#000",lineWidth:1,opacity:.5},dr),name:"legend-back-rect",capture:!1});return En.toBack(),se},e.prototype.layoutItems=function(){var t=this.get("legendCanvas"),r=this.get("horiSep"),n=this.get("vertiSep"),a=this.get("layout"),o=this.get("align"),s=[0,0],u=t.find(function(Mt){return Mt.get("name")==="root"}),c=u.find(function(Mt){return Mt.get("name")==="node-group"}),f=u.find(function(Mt){return Mt.get("name")==="edge-group"}),l={min:0,max:-1/0},_=-1/0;c.get("children").forEach(function(Mt,Ht){Ht===0&&(l.min=s[0]);var se=Mt.get("children")[0],oe=Mt.getCanvasBBox(),_e=se.getBBox(),Ue=_e.width,Ne=_e.height,Qe=0,dr=0,nn=0;a==="vertical"?(dr=s[1],nn=s[0]+Ue/2,s[0]=nn+oe.height+n,Qe=oe.maxX+dr+Ue/2):(dr=s[0]+Ue/2,nn=s[1],s[0]=dr+oe.width+r,Qe=oe.maxY+nn+Ne/2),s[0]>l.max&&(l.max=s[0]),Qe>_&&(_=Qe),Mt.setMatrix([1,0,0,0,1,0,dr,nn,1])});var I=l.max-l.min,B={min:0,max:-1/0},j=c.getCanvasBBox();s[0]=0,s[1]=a==="vertical"?j.maxX+r:j.maxY+n,f.get("children").forEach(function(Mt,Ht){Ht===0&&(B.min=s[0]);var se=Mt.get("children")[0],oe=Mt.getCanvasBBox(),_e=se.getBBox(),Ue=_e.width,Ne=_e.height,Qe=0,dr=0;a==="vertical"?(Qe=s[1],dr=s[0],s[0]=dr+oe.height+n,Mt.setMatrix([1,0,0,0,1,0,0,dr+Ne/2,1])):(Qe=s[0],dr=s[1],s[0]=Qe+oe.width+r,Mt.setMatrix([1,0,0,0,1,0,Qe+Ue/2,0,1])),s[0]>B.max&&(B.max=s[0])});var et=B.max-B.min;if(o&&o!==""&&o!=="left"){var ut=I-et,ft=o==="center"?Math.abs(ut)/2:Math.abs(ut),gt=ut<0?c:f;gt.get("children").forEach(function(Mt){var Ht=Mt.getMatrix()||[1,0,0,0,1,0,0,0,1];a==="vertical"?Ht[7]+=ft:Ht[6]+=ft,Mt.setMatrix(Ht)})}},e.prototype.processData=function(){var t=this.get("data"),r={nodes:[],edges:[]};t.nodes&&(t.nodes.sort(function(n,a){return n.order-a.order}),t.nodes.forEach(function(n){var a,o,s,u,c,f=n.size||[((a=n.style)===null||a===void 0?void 0:a.width)||((o=n.style)===null||o===void 0?void 0:o.r)||8,((s=n.style)===null||s===void 0?void 0:s.height)||((u=n.style)===null||u===void 0?void 0:u.r)||8],l=((c=n.labelCfg)===null||c===void 0?void 0:c.style)||{};r.nodes.push({id:n.id||(0,h.uniqueId)(),type:n.type||"circle",style:as({},n.style),order:n.order,label:n.label,itemType:"node",size:f,labelCfg:{position:"right",style:as({fontFamily:"Arial"},l)}})})),t.edges&&(t.edges.sort(function(n,a){return n.order-a.order}),t.edges.forEach(function(n){var a,o,s=n.type||"line";n.type==="cubic-horizontal"&&(s="cubic");var u=((a=n.labelCfg)===null||a===void 0?void 0:a.style)||{},c=n.size||[((o=n.style)===null||o===void 0?void 0:o.width)||8,1];r.edges.push({id:n.id||(0,h.uniqueId)(),type:s,size:c,style:as({lineWidth:(0,h.isArray)(c)?c[1]:1},n.style),order:n.order,label:n.label,itemType:"edge",labelCfg:{position:"right",style:as({fontFamily:"Arial"},u)}})})),this.set("itemsData",r)},e.prototype.getContainer=function(){return this.get("container")},e.prototype.formatArray=function(t){var r=this.get(t);if((0,h.isNumber)(r))this.set(t,[r,r,r,r]);else if((0,h.isArray)(r))switch(r.length){case 0:this.set(t,[0,0,0,0]);break;case 1:this.set(t,[r[0],r[0],r[0],r[0]]);break;case 2:this.set(t,[r[0],r[1],r[0],r[1]]);break;case 3:this.set(t,[r[0],r[1],r[2],r[1]]);break;default:break}return this.get(t)},e.prototype.getShapeSize=function(t){var r,n,a;return t.size&&((0,h.isArray)(t.size)?(r=t.size[0],n=t.size[1]||t.size[0],a=t.size[0]/2):(0,h.isNumber)(t.size)&&(r=t.size,n=t.size,a=t.size/2)),t.style&&(t.style.width&&(r=t.style.width),t.style.height&&(n=t.style.height),t.style.r&&(a=t.style.r)),a||(a=5),r||(r=a),n||(n=a),{width:r,height:n,r:a}},e.prototype.getStyle=function(t,r){var n=t==="node"?{fill:"#ccc",lineWidth:0}:{stroke:"#000",lineWidth:1};return as(as({},n),r.style||{})},e.prototype.destroy=function(){var t=this.get("legendCanvas");t==null||t.destroy();var r=this.get("graph"),n=r.get("container"),a=this.get("container");n.removeChild(a)},e}(uu),ow=iw,sw=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Gu=function(){return Gu=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},Gu.apply(this,arguments)},qg=function(i,e){var t={};for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&e.indexOf(r)<0&&(t[r]=i[r]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(i);n<r.length;n++)e.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(i,r[n])&&(t[r[n]]=i[r[n]]);return t};typeof document!="undefined"&&ch()(`
  .g6-annotation-container {
    background-color: rgba(255, 255, 255, 0.3);
    padding: 8px;
  }
  .g6-annotation-wrapper {
    background-color: #fff;
    box-shadow: 0 0 8px rgba(0, 0, 0, 0.85);
  }
  .g6-annotation-header-wapper {
    height: fit-content;
    width: 100%;
    background-color: #5B8FF9;
    display: inline-flex;
    cursor: move;
  }
  .g6-annotation-title {
    margin: 4px 40px 4px 8px;
    cursor: text;
    min-width: 32px;
  }
  .g6-annotation-collapse {
    margin: 4px;
    cursor: pointer;
  }
  .g6-annotation-expand {
    margin: 4px;
    cursor: pointer;
  }
  .g6-annotation-close {
    margin: 4px 8px 4px 0;
    cursor: pointer;
  }
  .g6-annotation-content {
    padding: 8px;
    width: fit-content;
    cursor: text;
    word-break: break-all;
    min-width: 32px;
  }
  .g6-annotation-title-input-wrapper {
    margin: 4px 40px 4px 8px;
  }
  .g6-annotation-content-input {
    height: 100%;
    word-break: break-all;
  }
  .g6-annotation-content-input-wrapper {
    margin: 8px;
    height: 100%;
  }
`);var Qg="canvas-annotation",uw=function(i){sw(e,i);function e(t){return i.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{trigger:"click",editable:!0,itemHighlightState:"highlight",linkHighlightStyle:{shadowColor:"#5B8FF9",shadowBlur:10},cardCfg:{minHeight:60,width:"fit-content",height:"fit-content",collapseType:"minimize",closeType:"hide",borderRadius:5,maxTitleLength:20}}},e.prototype.getEvents=function(){var t={viewportchange:"updateLinks",afterlayout:"updateLinks",aftergraphrefreshposition:"updateLinks",afterupdateitem:"updateLink",afterchangedata:"onGraphDataChange",afteritemvisibilitychange:"onGraphItemVisibilityChange"};switch(this.get("trigger")){case"click":t=Gu(Gu({},t),{"node:click":"showAnnotation","edge:click":"showAnnotation"})}return t},e.prototype.getDOMContent=function(t){if(!this.destroyed){var r=t.collapsed,n=t.maxWidth,a=t.title,o=a===void 0?"":a,s=t.content,u=s===void 0?"":s,c=t.borderRadius,f=c===void 0?5:c,l=r?"<p class='g6-annotation-expand'>+</p>":"<p class='g6-annotation-collapse'>-</p>",_=r?"":" <p class='g6-annotation-content'>".concat(u,"</p>"),I="<p class='g6-annotation-close'>x</p>",B=r?"".concat(f,"px"):"".concat(f,"px ").concat(f,"px 0 0");return'<div class="g6-annotation-wrapper" style="border-radius: '.concat(f,"px; max-width: ").concat(n,`px">
        <div
          class="g6-annotation-header-wapper"
          style="border-radius: `).concat(B,`;"
        >
          <h4 class='g6-annotation-title'>`).concat(o,`</h4>
          `).concat(l,`
          `).concat(I,`
        </div>
        `).concat(_,`
      </div>`)}},e.prototype.init=function(){var t=this;if(!t.destroyed){var r=t.get("graph"),n=r.getContainer(),a=t.get("container"),o=this.get("containerCfg");o?(a=this.createContainer(),n.appendChild(a)):a=n,this.set("container",a);var s=n.getBoundingClientRect(),u=new ff({container:n,width:s.right-s.left,height:s.bottom-s.top});gi(u.get("el"),{position:"absolute",top:0,left:0,pointerEvents:"none"}),window.addEventListener("resize",(0,h.debounce)(function(){return t.resizeCanvas(t)},100));var c=u.addGroup({id:"annotation-link-group"});t.set("linkGroup",c),t.set("canvas",u),t.get("getTitle")||t.set("getTitle",function(l){var _,I=((_=l==null?void 0:l.getModel)===null||_===void 0?void 0:_.call(l))||{},B=I.label,j=I.id;return B||j||"-"}),t.get("getContent")||t.set("getContent",function(l){var _,I;if(!l)return"-";var B=((_=l.getModel)===null||_===void 0?void 0:_.call(l))||{},j=B.label,et=B.id,ut=(I=l.getType)===null||I===void 0?void 0:I.call(l),ft=ut?"".concat(ut,": "):"";return"".concat(ft).concat(j||et||"")});var f=t.get("defaultData");f&&this.readData(f)}},e.prototype.createContainer=function(){var t=this;if(!this.destroyed){var r=this.get("containerCfg"),n=this.get("graph"),a=n.getContainer(),o=a.getBoundingClientRect(),s=o.left,u=o.right,c=o.top,f=o.bottom,l=f-c,_=u-s,I=r.position,B=I===void 0?"top":I,j=r.offsetX,et=j===void 0?0:j,ut=r.offsetY,ft=ut===void 0?0:ut,gt=qg(r,["position","offsetX","offsetY"]),Mt=r.height,Ht=Mt===void 0?"fit-content":Mt,se=r.width,oe=se===void 0?n.getWidth():se;Ht==="100%"&&(Ht=l),oe==="100%"&&(oe=_);var _e="unset",Ue="unset",Ne={};switch(B){case"right":_e="".concat(l,"px"),Ne={top:0,right:0},Ne.right+=s+et,Ne.top+=c+ft;break;case"bottom":Ue="".concat(_,"px"),Ne={bottom:0,left:0},Ne.left+=s+et,Ne.bottom+=c+ft;break;case"top":Ue="".concat(_,"px");case"left":_e="".concat(l,"px");default:Ne={top:0,left:0},Ne.left+=s+et,Ne.top+=c+ft;break}Object.keys(Ne).forEach(function(dr){Ne[dr]="".concat(Ne[dr],"px")});var Qe=Ko("<div class='".concat(r.className," g6-annotation-container'></div>"));return gi(Qe,Gu(Gu({position:"absolute",display:B==="top"||B==="bottom"?"inline-flex":"unset",width:(0,h.isNumber)(oe)?"".concat(oe,"px"):oe,height:(0,h.isNumber)(Ht)?"".concat(Ht,"px"):Ht,maxHeight:_e,maxWidth:Ue,overflow:"scroll"},Ne),gt)),a.appendChild(Qe),Qe.addEventListener("scroll",function(dr){t.updateLinks()}),Qe}},e.prototype.resizeCanvas=function(t){clearTimeout(t.resizeTimer),t.resizeTimer=setTimeout(function(){if(!(!t||t.destroyed)){var r=t.get("container").getBoundingClientRect(),n=r.right-r.left,a=r.bottom-r.top;t.get("canvas").changeSize(n,a),t.updateOutsideCards(t)}},250)},e.prototype.updateOutsideCards=function(t){var r=t||this,n=r.get("cardInfoMap")||{},a=r.get("graph"),o=a.getPointByCanvas(0,0),s=a.getPointByCanvas(a.getWidth(),a.getHeight()),u=a.getClientByPoint(o.x,o.y),c=u.x,f=u.y,l=a.getClientByPoint(s.x,s.y),_=l.x,I=l.y;Object.values(n).forEach(function(B){var j=B.card;if(j){var et=j.style,ut=Ol(et.left),ft=Ol(et.top),gt=j.getBoundingClientRect(),Mt=gt.width,Ht=gt.height,se=ut,oe=ft;ut+Mt>_-c&&(se=_-c-Mt),ut<0&&(se=0),ft+Ht>I-f&&(oe=I-f-Ht),ft<0&&(oe=0),gi(j,{left:"".concat(se,"px"),top:"".concat(oe,"px")})}}),r.updateLinks()},e.prototype.showAnnotation=function(t){if(!this.destroyed){var r=t.item;this.toggleAnnotation(r)}},e.prototype.hideCards=function(){var t=this;if(!t.destroyed){var r=t.get("cardInfoMap")||{};Object.keys(r).forEach(function(n){t.hideCard(n)})}},e.prototype.toggleAnnotation=function(t,r){var n,a;r===void 0&&(r={});var o=this;if(!o.destroyed){var s=o.get("cardInfoMap")||{},u=o.get("graph"),c=o.get("container"),f=o.get("containerCfg"),l=Object.assign({},o.get("cardCfg")||{},r),_=l.minHeight,I=l.minWidth,B=l.width,j=l.height,et=l.collapsed,ut=et===void 0?!1:et,ft=l.x,gt=l.y,Mt=l.title,Ht=l.content,se=l.maxTitleLength,oe=l.defaultBegin,_e=qg(l,["minHeight","minWidth","width","height","collapsed","x","y","title","content","maxTitleLength","defaultBegin"]),Ue=o.get("linkGroup"),Ne=this.get("rows")||[[]],Qe=(n=t.isCanvas)===null||n===void 0?void 0:n.call(t),dr=Qe?Qg:t.getID(),nn=s[dr]||{},kn=nn.card,En=nn.link,Kr=nn.x,Jn=nn.y,Kn=nn.title,$r=nn.content,xn=this.get("getTitle"),zn=this.get("getContent"),Gn=this.get("getContentPlaceholder")||function(){return""},ia=this.get("getTitlePlaceHolder")||function(){return""},ha=Gn(t),Xa=ia(t),si=Ko(this.getDOMContent(Gu({itemId:dr,collapsed:ut,title:((a=Kn||Mt||(xn==null?void 0:xn(t)))===null||a===void 0?void 0:a.substr(0,se))||Xa,content:$r||Ht||(zn==null?void 0:zn(t))||ha},_e))),to=(0,h.isNumber)(_)?"".concat(_,"px"):_;gi(si,{minHeight:ut?"unset":to,minWidth:(0,h.isNumber)(I)?"".concat(I,"px"):I,height:j,width:B});var Pi=!!kn;Pi?(En==null||En.remove(!0),c.replaceChild(si,kn)):c.appendChild(si);var eo;if(!f){if(eo=c.getBoundingClientRect()||{},ft!==void 0&&gt!==void 0)Kr=ft,Jn=gt;else if(!Pi&&!Qe){var po=eo.top,Vo=oe||{},Ro=Vo.left,Uu=Vo.right,Ss=Uu===void 0?16:Uu,Wu=Vo.top,Ms=Wu===void 0?8:Wu,_s=Vo.bottom,wu=Ss,js=Ms;isNaN(Ro)||(wu=c.scrollWidth-Ro),isNaN(_s)||(js=c.scrollHeight-_s);var eu=(0,h.isNumber)(I)?I:100;Kr=c.scrollWidth-si.scrollWidth-(Ne.length-1)*eu-wu;var mi=Ne[Ne.length-1],Zi=(mi[mi.length-1]||{}).bbox;Jn=(Zi==null?void 0:Zi.bottom)-po||js}gi(si,{position:"absolute",left:"".concat(Kr,"px"),top:"".concat(Jn,"px"),cusor:f?"unset":"move"})}this.bindListener(si,dr);var pi=si.getBoundingClientRect();if(!Qe){var Ki=yv(t,pi,u,this.get("canvas")),To=this.get("linkStyle");En=Ue.addShape("path",{attrs:Gu({lineWidth:1,lineDash:[5,5],stroke:"#ccc",path:Ki},To)})}if(s[dr]=Gu(Gu({},s[dr]||{}),{id:dr,collapsed:ut,card:si,link:En,x:Kr,y:Jn,cardBBox:pi,content:$r||Ht,title:Kn||Mt,contentPlaceholder:ha,titlePlaceholder:Xa,isCanvas:Qe}),o.set("cardInfoMap",s),f)this.updateCardPositionsInConatainer(),this.updateLinks();else{var Ia=!isNaN(ft)&&!isNaN(gt);if(!Pi&&!Qe&&!Ia){var wi=eo.bottom,Ti=wi===void 0?0:wi,po=eo.top;Ne[Ne.length-1].push({id:dr,bbox:pi}),pi.top>Ti-po-pi.height-16&&Ne.push([]),this.set("rows",Ne)}}this.updateCardSize(dr);var Ao=this.get("onAnnotationChange");Ao==null||Ao(s[dr],Pi?"update":"create")}},e.prototype.updateCardPositionsInConatainer=function(){if(!this.destroyed){var t=this.get("cardInfoMap");if(t){var r=this.get("container"),n=this.get("containerCfg").position,a=r.getBoundingClientRect().width,o=getComputedStyle(r),s=Ol(o.paddingLeft)+Ol(o.paddingRight);a-=s,Object.values(t).forEach(function(u){var c=u.card,f=c.getBoundingClientRect().width;switch(n){case"right":gi(c,{marginLeft:a?"".concat(a-f,"px"):"0px"});break;case"top":case"bottom":gi(c,{marginLeft:"8px"});default:break}})}}},e.prototype.handleExpandCollapseCard=function(t){if(!this.destroyed){var r=this.get("graph"),n=this.get("cardInfoMap");if(n){var a=n[t].collapsed,o=r.findById(t);if(o){var s=this.get("cardCfg").collapseType;s==="hide"&&!a?this.hideCard(t):this.toggleAnnotation(o,{collapsed:!a}),n[t]=Gu(Gu({},n[t]),{collapsed:!a})}}}},e.prototype.hideCard=function(t){if(!this.destroyed){var r=this.get("cardInfoMap");if(!(!r||!r[t])){var n=r[t],a=n.card,o=n.link;gi(a,{display:"none"}),o==null||o.hide();var s=this.get("onAnnotationChange");s(r[t],"hide")}}},e.prototype.removeCard=function(t){if(!this.destroyed){var r=this.get("cardInfoMap");if(r){var n=r[t],a=n.card,o=n.link,s=this.get("container");s.removeChild(a),o==null||o.remove(!0),delete r[t];var u=this.get("onAnnotationChange");u(n,"remove")}}},e.prototype.bindListener=function(t,r){var n=this;if(!this.destroyed){t.addEventListener("mousemove",function(u){var c;if(u.target.className==="g6-annotation-collapse"?c="collapse":u.target.className==="g6-annotation-expand"?c="expand":u.target.className==="g6-annotation-close"&&(c="close"),c){var f=n.get("cardCfg").onMouseEnterIcon,l=f===void 0?function(){}:f;l(u,r,c)}}),t.addEventListener("mouseout",function(u){var c;if(u.target.className==="g6-annotation-collapse"?c="collapse":u.target.className==="g6-annotation-expand"?c="expand":u.target.className==="g6-annotation-close"&&(c="close"),c){var f=n.get("cardCfg").onMouseLeaveIcon,l=f===void 0?function(){}:f;l(u,r,c)}}),t.addEventListener("mouseenter",function(u){var c=n.get("cardInfoMap");if(c){var f=n.get("graph"),l=f.findById(r);if(l){var _=n.get("itemHighlightState");f.setItemState(l,_,!0)}var I=c[r].link;if(I){var B=n.get("linkHighlightStyle")||{};I.attr(B)}}}),t.addEventListener("mouseleave",function(u){var c=n.get("cardInfoMap");if(c){var f=n.get("graph"),l=f.findById(r);if(l){var _=n.get("itemHighlightState");f.setItemState(l,_,!1)}var I=c[r].link;if(I){var B=n.get("linkHighlightStyle")||{};Object.keys(B).forEach(function(et){I.attr(et,void 0),I.attr(et,void 0)});var j=n.get("linkStyle");I.attr(j)}}}),t.addEventListener("click",function(u){var c=(n.get("cardCfg")||{}).onClickIcon;if(u.target.className==="g6-annotation-collapse"||u.target.className==="g6-annotation-expand"){var f=n.get("cardCfg").collapseType;f==="hide"?n.hideCard(r):n.handleExpandCollapseCard(r),c==null||c(u,r,u.target.className==="g6-annotation-collapse"?"collapse":"expand")}else if(u.target.className==="g6-annotation-close"){var l=n.get("cardCfg").closeType;l==="remove"?n.removeCard(r):n.hideCard(r),c==null||c(u,r,"close")}});var a=this.get("editable");a&&t.addEventListener("dblclick",function(u){var c=n.get("cardInfoMap"),f=(n.get("cardCfg")||{}).maxTitleLength,l=f===void 0?20:f;if(c){var _=u.target,I=_.className;if(!(I!=="g6-annotation-title"&&I!=="g6-annotation-content")){var B=I==="g6-annotation-title"?_.getBoundingClientRect():_.parentNode.getBoundingClientRect(),j=B.width,et=B.height,ut=getComputedStyle(_),ft=I==="g6-annotation-title"?"input":"textarea",gt=Ko("<".concat(ft,' class="').concat(I,'-input" type="textarea" style="width:').concat(j,"px; height: ").concat(et,'px; min-width: 16px;"/>')),Mt=Ko('<div class="'.concat(I,'-input-wrapper" style="width: ').concat(j,"px; height: ").concat(et,"px; min-width: 16px; margin-right: ").concat(ut.marginRight,'" />'));Mt.appendChild(gt),_.parentNode.replaceChild(Mt,_);var Ht=c[r],se=Ht.contentPlaceholder,oe=Ht.titlePlaceholder,_e=Ht.content,Ue=Ht.title,Ne=_e;I==="g6-annotation-title"?(gt.name="title",gt.maxLength=l,Ne=Ue):gt.name="content",Ne?(gt.innerHTML=_.innerHTML,gt.value=_.innerHTML):gt.placeholder=I==="g6-annotation-title"?oe:se,gt.focus(),gt.addEventListener("blur",function(Qe){gt.value&&(_.innerHTML=gt.value,Ht[gt.name||"title"]=gt.value),Mt.parentNode.replaceChild(_,Mt),n.updateCardSize(r);var dr=n.get("onAnnotationChange");dr==null||dr(Ht,"update")})}}});var o=["g6-annotation-title","g6-annotation-content","g6-annotation-title-input","g6-annotation-content-input"];t.draggable=!0,t.addEventListener("dragstart",function(u){var c=u.target.className;if(!o.includes(c)){var f=t.style;n.set("dragging",{card:t,x:u.clientX,y:u.clientY,left:Ol(f.left),top:Ol(f.top)})}}),t.addEventListener("drag",function(u){u.preventDefault();var c=n.get("cardInfoMap");if(c){var f=u.clientX,l=u.clientY,_=n.get("dragging");if(!(isNaN(f)||isNaN(l)||!_)){var I=_.x,B=_.y,j=_.left,et=_.top,ut=_.card,ft=f-I,gt=l-B;j+=ft,et+=gt;var Mt=n.get("graph"),Ht=Mt.getPointByCanvas(0,0),se=Mt.getPointByCanvas(Mt.getWidth(),Mt.getHeight()),oe=Mt.getClientByPoint(Ht.x,Ht.y),_e=oe.x,Ue=oe.y,Ne=Mt.getClientByPoint(se.x,se.y),Qe=Ne.x,dr=Ne.y,nn=ut.getBoundingClientRect(),kn=nn.right-nn.left,En=nn.bottom-nn.top;(j>Qe-_e-kn&&ft>0||j<0&&ft<0)&&(j-=ft),(et>dr-Ue-En&&gt>0||et<0&&gt<0)&&(et-=gt),gi(ut,{left:"".concat(j,"px"),top:"".concat(et,"px"),visibility:"hidden"}),I=f,B=l;var Kr=(c[r]||{}).link;if(Kr){var Jn=Mt.findById(r);Kr.attr("path",yv(Jn,nn,Mt,n.get("canvas")))}n.set("dragging",{x:I,y:B,left:j,top:et,card:ut})}}});var s=function(c){var f=n.get("cardInfoMap");if(f){var l=n.get("dragging");if(l){var _=l.left,I=l.top,B=l.card;f[r].x=_,f[r].y=I,gi(B,{visibility:"visible"}),n.set("dragging",!1);var j=n.get("rows");j==null||j.forEach(function(ut){for(var ft=ut.length-1;ft>=0;ft--)ut[ft].id===r&&ut.splice(ft,1)});var et=n.get("onAnnotationChange");et==null||et(f[r],"update")}}};t.addEventListener("dragend",s)}},e.prototype.updateCardSize=function(t){var r=this.get("cardInfoMap");if(r){var n=r[t].card,a=n.getBoundingClientRect().width,o=n.getElementsByClassName("g6-annotation-title")[0];if(o){var s=getComputedStyle(o),u=Ol(s.marginLeft),c=o.getBoundingClientRect().width;gi(o,{marginRight:"".concat(a-u-24-16-c,"px")})}}},e.prototype.updateLink=function(t){var r=t.item;if(r){var n=this.get("cardInfoMap");if(n){var a=this.get("canvas"),o=this.get("graph"),s=r.getID(),u=n[s]||{},c=u.link,f=u.card;if(c){var l=yv(r,f.getBoundingClientRect(),o,a);c.attr("path",l)}}}},e.prototype.updateLinks=function(){var t=this;if(!this.destroyed){var r=this.get("cardInfoMap");if(r){var n=this.get("graph");Object.values(r).forEach(function(a){var o=a.id,s=n.findById(o);t.updateLink({item:s})})}}},e.prototype.onGraphDataChange=function(){var t=this,r=this.get("cardInfoMap");if(r){var n=this.get("graph");Object.values(r).forEach(function(a){var o=a.id,s=a.card,u=a.isCanvas;if(!(!s||u||s.style.display==="none")){var c=n.findById(o);c&&c.isVisible()?t.toggleAnnotation(c):t.hideCard(o)}})}},e.prototype.onGraphItemVisibilityChange=function(t){var r=t.item,n=t.visible;if(!(!r||r.destroyed)){var a=this.get("cardInfoMap");if(a){var o=r.getID();a[o]&&(n||this.hideCard(o))}}},e.prototype.saveData=function(t){t===void 0&&(t=!1);var r=this.get("cardInfoMap");if(r){var n=this.get("graph"),a=this.get("getTitle"),o=this.get("getContent"),s=[];return Object.values(r).forEach(function(u){var c=u.title,f=u.content,l=u.x,_=u.y,I=u.id,B=u.collapsed,j=u.card;if(!(j&&j.style.display==="none"&&!t)){var et=n.findById(I)||n.get("canvas");s.push({id:I,x:l,y:_,collapsed:B,title:c||(a==null?void 0:a(et)),content:f||(o==null?void 0:o(et)),visible:j&&j.style.display!=="none"})}}),s}},e.prototype.readData=function(t){var r=this,n=this.get("graph");t.forEach(function(a){var o=a.id,s=a.x,u=a.y,c=a.title,f=a.content,l=a.collapsed,_=a.visible,I=n.findById(o);if(!I&&o===Qg&&(I=n.get("canvas")),!I){var B=r.get("cardInfoMap")||{};B[o]=a,r.set("cardInfoMap",B);return}r.toggleAnnotation(I,{x:s,y:u,title:c,content:f,collapsed:l}),_||r.hideCard(o)})},e.prototype.clear=function(){var t=this.get("cardInfoMap");if(t){var r=this.get("container");Object.values(t).forEach(function(n){var a=n.card,o=n.link;r.removeChild(a),o==null||o.remove(!0)}),this.set("cardInfoMap",{})}},e.prototype.destroy=function(){var t;this.clear(),(t=this.get("canvas"))===null||t===void 0||t.destroy();var r=this.get("graph");!r||r.destroyed||(this.get("containerCfg")&&r.getContainer().removeChild(this.get("container")),this.destroyed=!0)},e}(uu),cw=uw,fw=function(e,t){var r,n,a,o=1/0;Object.keys(e).forEach(function(c){var f=e[c];Object.keys(t).forEach(function(l){var _=t[l],I=f.x-_.x,B=f.y-_.y,j=I*I+B*B;o>j&&(o=j,r=f,n=_,a=[c,l])})});var s=20,u=Xs.getControlPoint(r,n,.5,s);return[["M",r.x,r.y],["Q",u.x,u.y,n.x,n.y]]},yv=function(e,t,r,n){var a,o,s=e.getType();if(s==="edge")o=[e.getKeyShape().getPoint(.5)];else{var u=(a=e.getKeyShape)===null||a===void 0?void 0:a.call(e).getBBox(),c=u.minX,f=u.minY,l=u.maxX,_=u.maxY,I=e.getModel(),B=I.x,j=I.y;c+=B,f+=j,l+=B,_+=j,o={left:{x:c,y:(f+_)/2},right:{x:l,y:(f+_)/2},top:{x:(c+l)/2,y:f},bottom:{x:(c+l)/2,y:_}}}Object.keys(o).forEach(function(Ue){var Ne=o[Ue],Qe=Ne.x,dr=Ne.y,nn=r.getClientByPoint(Qe,dr);o[Ue]=n.getPointByClient(nn.x,nn.y)});var et=t.top,ut=et===void 0?0:et,ft=t.left,gt=ft===void 0?0:ft,Mt=t.right,Ht=Mt===void 0?0:Mt,se=t.bottom,oe=se===void 0?0:se,_e={left:n.getPointByClient(gt,(ut+oe)/2),right:n.getPointByClient(Ht,(ut+oe)/2),top:n.getPointByClient((gt+Ht)/2,ut),bottom:n.getPointByClient((gt+Ht)/2,oe)};return fw(o,_e)},Ol=function(e){return Number(e.replace(/\s+|px/gi,""))||0},lw={PluginBase:uu,Menu:Sx,Grid:xx,Minimap:Ox,Bundling:Nx,ToolBar:Ux,Tooltip:Xx,Fisheye:Bx,TimeBar:WE,ImageMinimap:HE,EdgeFilterLens:qE,SnapLine:rw,Legend:ow,Annotation:cw},dw=lw,ws=dw;cf("circle",{options:{size:Qn.defaultNode.size,style:{x:0,y:0,stroke:Qn.defaultNode.style.stroke,fill:Qn.defaultNode.style.fill,lineWidth:Qn.defaultNode.style.lineWidth},labelCfg:{style:{fill:Qn.nodeLabel.style.fill,fontSize:Qn.nodeLabel.style.fontSize,fontFamily:Qn.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:Qn.defaultNode.linkPoints.size,lineWidth:Qn.defaultNode.linkPoints.lineWidth,fill:Qn.defaultNode.linkPoints.fill,stroke:Qn.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:(0,y.__assign)({},Qn.nodeStateStyles)},shapeType:"circle",labelPosition:"center",drawShape:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).icon,n=r===void 0?{}:r,a=this.getShapeStyle(e),o=(0,h.deepMix)({},n,e.icon),s="".concat(this.type,"-keyShape"),u=t.addShape("circle",{attrs:a,className:s,name:s,draggable:!0});t.shapeMap[s]=u;var c=o.width,f=o.height,l=o.show,_=o.text;if(l){var I="".concat(this.type,"-icon");_?t.shapeMap[I]=t.addShape("text",{attrs:(0,y.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},o),className:I,name:I,draggable:!0}):t.shapeMap[I]=t.addShape("image",{attrs:(0,y.__assign)({x:-c/2,y:-f/2},o),className:I,name:I,draggable:!0})}return this.drawLinkPoints(e,t),u},drawLinkPoints:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).linkPoints;if(r){var n=r||{},a=n.top,o=n.left,s=n.right,u=n.bottom,c=n.size,f=n.r,l=(0,y.__rest)(n,["top","left","right","bottom","size","r"]),_=this.getSize(e),I=_[0]/2;if(o){var B="link-point-left";t.shapeMap[B]=t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},l),{x:-I,y:0,r:c/2||f||5}),className:B,name:B,isAnchorPoint:!0})}if(s){var j="link-point-right";t.shapeMap[j]=t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},l),{x:I,y:0,r:c/2||f||5}),className:j,name:j,isAnchorPoint:!0})}if(a){var et="link-point-top";t.shapeMap[et]=t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},l),{x:0,y:-I,r:c/2||f||5}),className:et,name:et,isAnchorPoint:!0})}if(u){var ut="link-point-bottom";t.shapeMap[ut]=t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},l),{x:0,y:I,r:c/2||f||5}),className:ut,name:ut,isAnchorPoint:!0})}}},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,r={stroke:e.color},n=(0,h.deepMix)({},t,r),a=this.getSize(e),o=a[0]/2,s=(0,y.__assign)({x:0,y:0,r:o},n);return s},update:function(e,t,r){var n=t.getContainer(),a=this.getSize(e),o=(0,y.__assign)({},e.style);e.style.stroke===void 0&&e.color&&(o.stroke=e.color),e.style.r===void 0&&!isNaN(a[0])&&(o.r=a[0]/2),this.updateShape(e,t,o,!0,r),this.updateLinkPoints(e,n)}},"single-node"),cf("rect",{options:{size:[100,30],style:{radius:0,stroke:Qn.defaultNode.style.stroke,fill:Qn.defaultNode.style.fill,lineWidth:Qn.defaultNode.style.lineWidth},labelCfg:{style:{fill:Qn.nodeLabel.style.fill,fontSize:Qn.nodeLabel.style.fontSize,fontFamily:Qn.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:Qn.defaultNode.linkPoints.size,lineWidth:Qn.defaultNode.linkPoints.lineWidth,fill:Qn.defaultNode.linkPoints.fill,stroke:Qn.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},anchorPoints:[[0,.5],[1,.5]],stateStyles:(0,y.__assign)({},Qn.nodeStateStyles)},shapeType:"rect",labelPosition:"center",drawShape:function(e,t){var r=this.getShapeStyle(e),n=t.addShape("rect",{attrs:r,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});return t.shapeMap["".concat(this.type,"-keyShape")]=n,this.drawLinkPoints(e,t),n},drawLinkPoints:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).linkPoints,n=r===void 0?{}:r,a=n.top,o=n.left,s=n.right,u=n.bottom,c=n.size,f=n.r,l=(0,y.__rest)(n,["top","left","right","bottom","size","r"]),_=this.getSize(e),I=_[0],B=_[1];o&&(t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},l),{x:-I/2,y:0,r:c/2||f||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),s&&(t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},l),{x:I/2,y:0,r:c/2||f||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),a&&(t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},l),{x:0,y:-B/2,r:c/2||f||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),u&&(t.shapeMap["link-point-bottom"]=t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},l),{x:0,y:B/2,r:c/2||f||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0}))},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,r={stroke:e.color},n=(0,h.mix)({},t,r),a=this.getSize(e),o=n.width||a[0],s=n.height||a[1],u=(0,y.__assign)({x:-o/2,y:-s/2,width:o,height:s},n);return u},update:function(e,t,r){var n=t.getContainer(),a=this.getOptions({}).style,o=this.getSize(e),s=t.get("keyShape");e.size||(o[0]=s.attr("width")||a.width,o[1]=s.attr("height")||a.height);var u={stroke:e.color,x:-o[0]/2,y:-o[1]/2,width:o[0],height:o[1]},c=(0,h.mix)({},a,s.attr(),u);c=(0,h.mix)(c,e.style),this.updateShape(e,t,c,!1,r),this.updateLinkPoints(e,n)}},"single-node"),cf("ellipse",{options:{size:[80,40],style:{x:0,y:0,stroke:Qn.defaultNode.style.stroke,fill:Qn.defaultNode.style.fill,lineWidth:Qn.defaultNode.style.lineWidth},labelCfg:{style:{fill:Qn.nodeLabel.style.fill,fontSize:Qn.nodeLabel.style.fontSize,fontFamily:Qn.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:Qn.defaultNode.linkPoints.size,lineWidth:Qn.defaultNode.linkPoints.lineWidth,fill:Qn.defaultNode.linkPoints.fill,stroke:Qn.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:(0,y.__assign)({},Qn.nodeStateStyles)},shapeType:"ellipse",labelPosition:"center",drawShape:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).icon,n=r===void 0?{}:r,a=this.getShapeStyle(e),o=t.addShape("ellipse",{attrs:a,className:"ellipse-keyShape",name:"ellipse-keyShape",draggable:!0});t.shapeMap["ellipse-keyShape"]=o;var s=n.width,u=n.height,c=n.show,f=n.text;return c&&(f?t.shapeMap["".concat(this.type,"-icon")]=t.addShape("text",{attrs:(0,y.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},n),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0}):t.shapeMap["".concat(this.type,"-icon")]=t.addShape("image",{attrs:(0,y.__assign)({x:-s/2,y:-u/2},n),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0})),this.drawLinkPoints(e,t),o},drawLinkPoints:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).linkPoints,n=r===void 0?{}:r,a=n.top,o=n.left,s=n.right,u=n.bottom,c=n.size,f=n.r,l=(0,y.__rest)(n,["top","left","right","bottom","size","r"]),_=this.getSize(e),I=_[0]/2,B=_[1]/2;o&&(t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},l),{x:-I,y:0,r:c/2||f||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),s&&(t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},l),{x:I,y:0,r:c/2||f||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),a&&(t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},l),{x:0,y:-B,r:c/2||f||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),u&&(t.shapeMap["link-point-bottom"]=t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},l),{x:0,y:B,r:c/2||f||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0}))},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,r={stroke:e.color},n=(0,h.mix)({},t,r),a=this.getSize(e),o=a[0]/2,s=a[1]/2,u=(0,y.__assign)({x:0,y:0,rx:o,ry:s},n);return u},update:function(e,t,r){var n=t.getContainer(),a=this.getOptions({}).style,o=this.getSize(e),s={stroke:e.color,rx:o[0]/2,ry:o[1]/2},u=t.get("keyShape"),c=(0,h.mix)({},a,u.attr(),s);c=(0,h.mix)(c,e.style),this.updateShape(e,t,c,!0,r),this.updateLinkPoints(e,n)}},"single-node"),cf("diamond",{options:{size:[80,80],style:{stroke:Qn.defaultNode.style.stroke,fill:Qn.defaultNode.style.fill,lineWidth:Qn.defaultNode.style.lineWidth},labelCfg:{style:{fill:Qn.nodeLabel.style.fill,fontSize:Qn.nodeLabel.style.fontSize,fontFamily:Qn.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:Qn.defaultNode.linkPoints.size,lineWidth:Qn.defaultNode.linkPoints.lineWidth,fill:Qn.defaultNode.linkPoints.fill,stroke:Qn.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:(0,y.__assign)({},Qn.nodeStateStyles)},shapeType:"diamond",labelPosition:"center",drawShape:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).icon,n=r===void 0?{}:r,a=this.getShapeStyle(e),o=t.addShape("path",{attrs:a,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});t.shapeMap["".concat(this.type,"-keyShape")]=o;var s=n.width,u=n.height,c=n.show,f=n.text;return c&&(f?t.shapeMap["".concat(this.type,"-icon")]=t.addShape("text",{attrs:(0,y.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},n),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0}):t.shapeMap["".concat(this.type,"-icon")]=t.addShape("image",{attrs:(0,y.__assign)({x:-s/2,y:-u/2},n),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0})),this.drawLinkPoints(e,t),o},drawLinkPoints:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).linkPoints,n=r===void 0?{}:r,a=n.top,o=n.left,s=n.right,u=n.bottom,c=n.size,f=n.r,l=(0,y.__rest)(n,["top","left","right","bottom","size","r"]),_=this.getSize(e),I=_[0],B=_[1];o&&(t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},l),{x:-I/2,y:0,r:c/2||f||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),s&&(t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},l),{x:I/2,y:0,r:c/2||f||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),a&&(t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},l),{x:0,y:-B/2,r:c/2||f||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),u&&(t.shapeMap["link-point-bottom"]=t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},l),{x:0,y:B/2,r:c/2||f||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0}))},getPath:function(e){var t=this.getSize(e),r=t[0],n=t[1],a=[["M",0,-n/2],["L",r/2,0],["L",0,n/2],["L",-r/2,0],["Z"]];return a},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,r={stroke:e.color},n=(0,h.mix)({},t,r),a=this.getPath(e),o=(0,y.__assign)({path:a},n);return o},update:function(e,t,r){var n=t.getContainer(),a=this.getOptions({}).style,o=this.getPath(e),s={stroke:e.color,path:o},u=t.get("keyShape"),c=(0,h.mix)({},a,u.attr(),s);c=(0,h.mix)(c,e.style),this.updateShape(e,t,c,!0,r),this.updateLinkPoints(e,n)}},"single-node"),cf("triangle",{options:{size:40,direction:"up",style:{stroke:Qn.defaultNode.style.stroke,fill:Qn.defaultNode.style.fill,lineWidth:Qn.defaultNode.style.lineWidth},labelCfg:{style:{fill:Qn.nodeLabel.style.fill,fontSize:Qn.nodeLabel.style.fontSize},offset:15},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:Qn.defaultNode.linkPoints.size,lineWidth:Qn.defaultNode.linkPoints.lineWidth,fill:Qn.defaultNode.linkPoints.fill,stroke:Qn.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20,offset:6},stateStyles:(0,y.__assign)({},Qn.nodeStateStyles)},shapeType:"triangle",labelPosition:"bottom",drawShape:function(e,t){var r=this.mergeStyle||this.getOptions(e),n=r.icon,a=n===void 0?{}:n,o=r.direction,s=this.getShapeStyle(e),u=e.direction||o,c=t.addShape("path",{attrs:s,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});t.shapeMap["".concat(this.type,"-keyShape")]=c;var f=a.width,l=a.height,_=a.show,I=a.offset,B=a.text;if(_)if(B)t.shapeMap["".concat(this.type,"-icon")]=t.addShape("text",{attrs:(0,y.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},a),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0});else{var j=-f/2,et=-l/2;(u==="up"||u==="down")&&(et+=I),(u==="left"||u==="right")&&(j+=I),t.shapeMap["".concat(this.type,"-icon")]=t.addShape("image",{attrs:(0,y.__assign)({x:j,y:et},a),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0})}return this.drawLinkPoints(e,t),c},drawLinkPoints:function(e,t){var r=this.mergeStyle||this.getOptions(e),n=r.linkPoints,a=n===void 0?{}:n,o=r.direction,s=e.direction||o,u=a.top,c=a.left,f=a.right,l=a.bottom,_=a.size,I=a.r,B=(0,y.__rest)(a,["top","left","right","bottom","size","r"]),j=this.getSize(e),et=j[0];if(c){var ut=null,ft=et*Math.sin(1/3*Math.PI),gt=et*Math.sin(1/3*Math.PI);s==="up"?ut=[-gt,ft]:s==="down"?ut=[-gt,-ft]:s==="left"&&(ut=[-gt,gt-ft]),ut&&(t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},B),{x:ut[0],y:ut[1],r:_/2||I||5}),className:"link-point-left",name:"link-point-left"}))}if(f){var Mt=null,ft=et*Math.sin(1/3*Math.PI),gt=et*Math.sin(1/3*Math.PI);s==="up"?Mt=[gt,ft]:s==="down"?Mt=[gt,-ft]:s==="right"&&(Mt=[gt,gt-ft]),Mt&&(t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},B),{x:Mt[0],y:Mt[1],r:_/2||I||5}),className:"link-point-right",name:"link-point-right"}))}if(u){var Ht=null,ft=et*Math.sin(1/3*Math.PI),gt=et*Math.sin(1/3*Math.PI);s==="up"?Ht=[gt-ft,-ft]:s==="left"?Ht=[gt,-ft]:s==="right"&&(Ht=[-gt,-ft]),Ht&&(t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},B),{x:Ht[0],y:Ht[1],r:_/2||I||5}),className:"link-point-top",name:"link-point-top"}))}if(l){var se=null,ft=et*Math.sin(1/3*Math.PI),gt=et*Math.sin(1/3*Math.PI);s==="down"?se=[-gt+ft,ft]:s==="left"?se=[gt,ft]:s==="right"&&(se=[-gt,ft]),se&&(t.shapeMap["link-point-bottom"]=t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},B),{x:se[0],y:se[1],r:_/2||I||5}),className:"link-point-bottom",name:"link-point-bottom"}))}},getPath:function(e){var t=(this.mergeStyle||this.getOptions(e)).direction,r=e.direction||t,n=this.getSize(e),a=n[0],o=a*Math.sin(1/3*Math.PI),s=a*Math.sin(1/3*Math.PI),u=[["M",-s,o],["L",0,-o],["L",s,o],["Z"]];return r==="down"?u=[["M",-s,-o],["L",s,-o],["L",0,o],["Z"]]:r==="left"?u=[["M",-s,s-o],["L",s,-s],["L",s,s],["Z"]]:r==="right"&&(u=[["M",s,s-o],["L",-s,s],["L",-s,-s],["Z"]]),u},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,r={stroke:e.color},n=(0,h.mix)({},t,r),a=this.getPath(e),o=(0,y.__assign)({path:a},n);return o},update:function(e,t,r){var n=t.getContainer(),a=this.getOptions({}).style,o=this.getPath(e),s={stroke:e.color,path:o},u=t.get("keyShape"),c=(0,h.mix)({},a,u.attr(),s);c=(0,h.mix)(c,e.style),this.updateShape(e,t,c,!0,r),this.updateLinkPoints(e,n)},updateLinkPoints:function(e,t){var r=this.getOptions({}),n=r.linkPoints,a=r.direction,o=e.direction||a,s=t.shapeMap["link-point-left"]||t.find(function(Kr){return Kr.get("className")==="link-point-left"}),u=t.shapeMap["link-point-right"]||t.find(function(Kr){return Kr.get("className")==="link-point-right"}),c=t.shapeMap["link-point-top"]||t.find(function(Kr){return Kr.get("className")==="link-point-top"}),f=t.shapeMap["link-point-bottom"]||t.find(function(Kr){return Kr.get("className")==="link-point-bottom"}),l=n,_=s||u||c||f;_&&(l=_.attr());var I=(0,h.mix)({},l,e.linkPoints),B=I.fill,j=I.stroke,et=I.lineWidth,ut=I.size/2;ut||(ut=I.r);var ft=e.linkPoints?e.linkPoints:{left:void 0,right:void 0,top:void 0,bottom:void 0},gt=ft.left,Mt=ft.right,Ht=ft.top,se=ft.bottom,oe=this.getSize(e),_e=oe[0],Ue={r:ut,fill:B,stroke:j,lineWidth:et},Ne=null,Qe=_e*Math.sin(1/3*Math.PI),dr=_e*Math.sin(1/3*Math.PI);o==="up"?Ne=[-dr,Qe]:o==="down"?Ne=[-dr,-Qe]:o==="left"&&(Ne=[-dr,dr-Qe]),Ne&&(s?!gt&&gt!==void 0?(s.remove(),delete t.shapeMap["link-point-left"]):s.attr((0,y.__assign)((0,y.__assign)({},Ue),{x:Ne[0],y:Ne[1]})):gt&&(t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},Ue),{x:Ne[0],y:Ne[1]}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})));var nn=null;o==="up"?nn=[dr,Qe]:o==="down"?nn=[dr,-Qe]:o==="right"&&(nn=[dr,dr-Qe]),nn&&(u?!Mt&&Mt!==void 0?(u.remove(),delete t.shapeMap["link-point-right"]):u.attr((0,y.__assign)((0,y.__assign)({},Ue),{x:nn[0],y:nn[1]})):Mt&&(t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},Ue),{x:nn[0],y:nn[1]}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})));var kn=null;o==="up"?kn=[dr-Qe,-Qe]:o==="left"?kn=[dr,-Qe]:o==="right"&&(kn=[-dr,-Qe]),kn&&(c?!Ht&&Ht!==void 0?(c.remove(),delete t.shapeMap["link-point-top"]):c.attr((0,y.__assign)((0,y.__assign)({},Ue),{x:kn[0],y:kn[1]})):Ht&&(t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},Ue),{x:kn[0],y:kn[1]}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})));var En=null;o==="down"?En=[-dr+Qe,Qe]:o==="left"?En=[dr,Qe]:o==="right"&&(En=[-dr,Qe]),En&&(f?!se&&se!==void 0?(f.remove(),delete t.shapeMap["link-point-bottom"]):f.attr((0,y.__assign)((0,y.__assign)({},Ue),{x:En[0],y:En[1]})):se&&(t.shapeMap["link-point-bottom"]=t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},Ue),{x:En[0],y:En[1]}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0})))}},"single-node"),cf("modelRect",{options:{size:[185,70],style:{radius:5,stroke:"#69c0ff",fill:"#ffffff",lineWidth:Qn.defaultNode.style.lineWidth,fillOpacity:1},labelCfg:{style:{fill:"#595959",fontSize:14,fontFamily:Qn.windowFontFamily},offset:30},descriptionCfg:{style:{fontSize:12,fill:"#bfbfbf",fontFamily:Qn.windowFontFamily},paddingTop:0},preRect:{show:!0,width:4,fill:"#40a9ff",radius:2},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:10,lineWidth:1,fill:"#72CC4A",stroke:"#72CC4A"},logoIcon:{show:!0,x:0,y:0,img:"https://gw.alipayobjects.com/zos/basement_prod/4f81893c-1806-4de4-aff3-9a6b266bc8a2.svg",width:16,height:16,offset:0},stateIcon:{show:!0,x:0,y:0,img:"https://gw.alipayobjects.com/zos/basement_prod/300a2523-67e0-4cbf-9d4a-67c077b40395.svg",width:16,height:16,offset:-5},anchorPoints:[[0,.5],[1,.5]]},shapeType:"modelRect",drawShape:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).preRect,n=r===void 0?{}:r,a=this.getShapeStyle(e),o=this.getSize(e),s=o[0],u=o[1],c=t.addShape("rect",{attrs:a,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});t.shapeMap["".concat(this.type,"-keyShape")]=c;var f=n.show,l=(0,y.__rest)(n,["show"]);return f&&(t.shapeMap["pre-rect"]=t.addShape("rect",{attrs:(0,y.__assign)({x:-s/2,y:-u/2,height:u},l),className:"pre-rect",name:"pre-rect",draggable:!0})),this.drawLogoIcon(e,t),this.drawStateIcon(e,t),this.drawLinkPoints(e,t),c},drawLogoIcon:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).logoIcon,n=r===void 0?{}:r,a=this.getSize(e),o=a[0];if(n.show){var s=n.width,u=n.height,c=n.x,f=n.y,l=n.offset,_=n.text,I=(0,y.__rest)(n,["width","height","x","y","offset","text"]);_?t.shapeMap["rect-logo-icon"]=t.addShape("text",{attrs:(0,y.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},I),className:"rect-logo-icon",name:"rect-logo-icon",draggable:!0}):t.shapeMap["rect-logo-icon"]=t.addShape("image",{attrs:(0,y.__assign)((0,y.__assign)({},I),{x:c||-o/2+s+l,y:f||-u/2,width:s,height:u}),className:"rect-logo-icon",name:"rect-logo-icon",draggable:!0})}},drawStateIcon:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).stateIcon,n=r===void 0?{}:r,a=this.getSize(e),o=a[0];if(n.show){var s=n.width,u=n.height,c=n.x,f=n.y,l=n.offset,_=n.text,I=(0,y.__rest)(n,["width","height","x","y","offset","text"]);_?t.shapeMap["rect-state-icon"]=t.addShape("text",{attrs:(0,y.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},I),className:"rect-state-icon",name:"rect-state-icon",draggable:!0}):t.shapeMap["rect-state-icon"]=t.addShape("image",{attrs:(0,y.__assign)((0,y.__assign)({},I),{x:c||o/2-s+l,y:f||-u/2,width:s,height:u}),className:"rect-state-icon",name:"rect-state-icon",draggable:!0})}},drawLinkPoints:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).linkPoints,n=r===void 0?{}:r,a=n.top,o=n.left,s=n.right,u=n.bottom,c=n.size,f=n.r,l=(0,y.__rest)(n,["top","left","right","bottom","size","r"]),_=this.getSize(e),I=_[0],B=_[1];o&&(t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},l),{x:-I/2,y:0,r:c/2||f||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),s&&(t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},l),{x:I/2,y:0,r:c/2||f||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),a&&(t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},l),{x:0,y:-B/2,r:c/2||f||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),u&&(t.shapeMap["link-point-bottom"]=t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},l),{x:0,y:B/2,r:c/2||f||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0}))},drawLabel:function(e,t){var r=this.getOptions(e),n=r.labelCfg,a=n===void 0?{}:n,o=r.logoIcon,s=o===void 0?{}:o,u=r.descriptionCfg,c=u===void 0?{}:u,f=this.getSize(e),l=f[0],_=null,I=s.show,B=s.width,j=-l/2+a.offset;I&&(j=-l/2+B+a.offset);var et=a.style,ut=c.style,ft=c.paddingTop;return(0,h.isString)(e.description)?(_=t.addShape("text",{attrs:(0,y.__assign)((0,y.__assign)({},et),{x:j,y:-5,text:e.label}),className:"text-shape",name:"text-shape",draggable:!0,labelRelated:!0}),t.shapeMap["text-shape"]=_,t.shapeMap["rect-description"]=t.addShape("text",{attrs:(0,y.__assign)((0,y.__assign)({},ut),{x:j,y:17+(ft||0),text:e.description}),className:"rect-description",name:"rect-description",draggable:!0,labelRelated:!0})):(_=t.addShape("text",{attrs:(0,y.__assign)((0,y.__assign)({},et),{x:j,y:7,text:e.label}),className:"text-shape",name:"text-shape",draggable:!0,labelRelated:!0}),t.shapeMap["text-shape"]=_),_},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,r={stroke:e.color},n=(0,h.mix)({},t,r),a=this.getSize(e),o=n.width||a[0],s=n.height||a[1],u=(0,y.__assign)({x:-o/2,y:-s/2,width:o,height:s},n);return u},update:function(e,t){var r=this.mergeStyle||this.getOptions(e),n=r.style,a=n===void 0?{}:n,o=r.labelCfg,s=o===void 0?{}:o,u=r.descriptionCfg,c=u===void 0?{}:u,f=this.getSize(e),l=f[0],_=f[1],I=t.get("keyShape");I.attr((0,y.__assign)((0,y.__assign)({},a),{x:-l/2,y:-_/2,width:l,height:_}));var B=t.getContainer(),j=B.shapeMap["rect-logo-icon"]||B.find(function(si){return si.get("className")==="rect-logo-icon"}),et=j?j.attr():{},ut=(0,h.mix)({},et,e.logoIcon),ft=ut.width;ft===void 0&&(ft=this.options.logoIcon.width);var gt=e.logoIcon?e.logoIcon.show:void 0,Mt=s.offset,Ht=-l/2+ft+Mt;!gt&&gt!==void 0&&(Ht=-l/2+Mt);var se=B.shapeMap["node-label"]||B.find(function(si){return si.get("className")==="node-label"}),oe=B.shapeMap["rect-description"]||B.find(function(si){return si.get("className")==="rect-description"});if(e.label)if(!se)B.shapeMap["node-label"]=B.addShape("text",{attrs:(0,y.__assign)((0,y.__assign)({},s.style),{x:Ht,y:e.description?-5:7,text:e.label}),className:"node-label",name:"node-label",draggable:!0,labelRelated:!0});else{var _e=e.labelCfg?e.labelCfg.style:{},Ue=(0,h.mix)({},se.attr(),_e);e.label&&(Ue.text=e.label),Ue.x=Ht,(0,h.isString)(e.description)&&(Ue.y=-5),oe&&(oe.resetMatrix(),oe.attr({x:Ht})),se.resetMatrix(),se.attr(Ue)}if((0,h.isString)(e.description)){var Ne=c.paddingTop;if(!oe)B.shapeMap["rect-description"]=B.addShape("text",{attrs:(0,y.__assign)((0,y.__assign)({},c.style),{x:Ht,y:17+(Ne||0),text:e.description}),className:"rect-description",name:"rect-description",draggable:!0,labelRelated:!0});else{var _e=e.descriptionCfg?e.descriptionCfg.style:{},Qe=(0,h.mix)({},oe.attr(),_e);(0,h.isString)(e.description)&&(Qe.text=e.description),Qe.x=Ht,oe.resetMatrix(),oe.attr((0,y.__assign)((0,y.__assign)({},Qe),{y:17+(Ne||0)}))}}var dr=B.shapeMap["pre-rect"]||B.find(function(si){return si.get("className")==="pre-rect"});if(dr&&!dr.destroyed){var nn=(0,h.mix)({},dr.attr(),e.preRect);dr.attr((0,y.__assign)((0,y.__assign)({},nn),{x:-l/2,y:-_/2,height:_}))}if(j&&!j.destroyed)if(!gt&&gt!==void 0)j.remove(),delete B.shapeMap["pre-rect"];else{var kn=ut.width,En=ut.height,Kr=ut.x,Jn=ut.y,Kn=ut.offset,$r=(0,y.__rest)(ut,["width","height","x","y","offset"]);j.attr((0,y.__assign)((0,y.__assign)({},$r),{x:Kr||-l/2+kn+Kn,y:Jn||-En/2,width:kn,height:En}))}else gt&&this.drawLogoIcon(e,B);var xn=B.shapeMap["rect-state-icon"]||B.find(function(si){return si.get("className")==="rect-state-icon"}),zn=xn?xn.attr():{},Gn=(0,h.mix)({},zn,e.stateIcon);if(xn){!Gn.show&&Gn.show!==void 0&&(xn.remove(),delete B.shapeMap["rect-state-icon"]);var ia=Gn.width,En=Gn.height,Kr=Gn.x,Jn=Gn.y,ha=Gn.offset,Xa=(0,y.__rest)(Gn,["width","height","x","y","offset"]);xn.attr((0,y.__assign)((0,y.__assign)({},Xa),{x:Kr||l/2-ia+ha,y:Jn||-En/2,width:ia,height:En}))}else Gn.show&&this.drawStateIcon(e,B);this.updateLinkPoints(e,B)},getOptions:function(e,t){return t==="move"?e:(0,h.deepMix)({},this.options,this.getCustomConfig(e)||{},e)}},"single-node"),cf("star",{options:{size:60,style:{stroke:Qn.defaultNode.style.stroke,fill:Qn.defaultNode.style.fill,lineWidth:Qn.defaultNode.style.lineWidth},labelCfg:{style:{fill:Qn.nodeLabel.style.fill,fontSize:Qn.nodeLabel.style.fontSize,fontFamily:Qn.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:Qn.defaultNode.linkPoints.size,lineWidth:Qn.defaultNode.linkPoints.lineWidth,fill:Qn.defaultNode.linkPoints.fill,stroke:Qn.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:(0,y.__assign)({},Qn.nodeStateStyles)},shapeType:"star",labelPosition:"center",drawShape:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).icon,n=r===void 0?{}:r,a=this.getShapeStyle(e),o=t.addShape("path",{attrs:a,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});t.shapeMap["".concat(this.type,"-keyShape")]=o;var s=n.width,u=n.height,c=n.show,f=n.text;return c&&(f?t.shapeMap["".concat(this.type,"-icon")]=t.addShape("text",{attrs:(0,y.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},n),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0}):t.shapeMap["".concat(this.type,"-icon")]=t.addShape("image",{attrs:(0,y.__assign)({x:-s/2,y:-u/2},n),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0})),this.drawLinkPoints(e,t),o},drawLinkPoints:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).linkPoints,n=r===void 0?{}:r,a=n.top,o=n.left,s=n.right,u=n.leftBottom,c=n.rightBottom,f=n.size,l=n.r,_=(0,y.__rest)(n,["top","left","right","leftBottom","rightBottom","size","r"]),I=this.getSize(e),B=I[0];if(s){var j=Math.cos(.1*Math.PI)*B,et=Math.sin((18+72*0)/180*Math.PI)*B;t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},_),{x:j,y:-et,r:f/2||l||5}),className:"link-point-right",name:"link-point-right"})}if(a){var j=Math.cos(.5*Math.PI)*B,et=Math.sin((18+72*1)/180*Math.PI)*B;t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},_),{x:j,y:-et,r:f/2||l||5}),className:"link-point-top",name:"link-point-top"})}if(o){var j=Math.cos(.9*Math.PI)*B,et=Math.sin((18+72*2)/180*Math.PI)*B;t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},_),{x:j,y:-et,r:f/2||l||5}),className:"link-point-left",name:"link-point-left"})}if(u){var j=Math.cos(1.3*Math.PI)*B,et=Math.sin((18+72*3)/180*Math.PI)*B;t.shapeMap["link-point-bottom"]=t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},_),{x:j,y:-et,r:f/2||l||5}),className:"link-point-left-bottom",name:"link-point-left-bottom"})}if(c){var j=Math.cos(1.7*Math.PI)*B,et=Math.sin((18+72*4)/180*Math.PI)*B;t.shapeMap["link-point-right-bottom"]=t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},_),{x:j,y:-et,r:f/2||l||5}),className:"link-point-right-bottom",name:"link-point-right-bottom"})}},getPath:function(e){var t=this.getSize(e),r=t[0],n=r*3/8,a=e.innerR||n;return Xs.getStarPath(r,a)},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,r={stroke:e.color},n=(0,h.mix)({},t,r),a=this.getPath(e),o=(0,y.__assign)({path:a},n);return o},update:function(e,t,r){var n=t.getContainer(),a=this.getOptions({}).style,o=this.getPath(e),s={stroke:e.color,path:o},u=t.get("keyShape"),c=(0,h.mix)({},a,u.attr(),s);c=(0,h.mix)(c,e.style),this.updateShape(e,t,c,!0,r),this.updateLinkPoints(e,n)},updateLinkPoints:function(e,t){var r=this.getOptions({}).linkPoints,n=t.shapeMap["link-point-left"]||t.find(function(Qe){return Qe.get("className")==="link-point-left"}),a=t.shapeMap["link-point-right"]||t.find(function(Qe){return Qe.get("className")==="link-point-right"}),o=t.shapeMap["link-point-top"]||t.find(function(Qe){return Qe.get("className")==="link-point-top"}),s=t.shapeMap["link-point-left-bottom"]||t.find(function(Qe){return Qe.get("className")==="link-point-left-bottom"}),u=t.shapeMap["link-point-left-bottom"]||t.find(function(Qe){return Qe.get("className")==="link-point-right-bottom"}),c=r,f=n||a||o||s||u;f&&(c=f.attr());var l=(0,h.mix)({},c,e.linkPoints),_=l.fill,I=l.stroke,B=l.lineWidth,j=l.size/2;j||(j=l.r);var et=e.linkPoints?e.linkPoints:{left:void 0,right:void 0,top:void 0,leftBottom:void 0,rightBottom:void 0},ut=et.left,ft=et.right,gt=et.top,Mt=et.leftBottom,Ht=et.rightBottom,se=this.getSize(e),oe=se[0],_e={r:j,fill:_,stroke:I,lineWidth:B},Ue=Math.cos((18+72*0)/180*Math.PI)*oe,Ne=Math.sin((18+72*0)/180*Math.PI)*oe;a?!ft&&ft!==void 0?(a.remove(),delete t.shapeMap["link-point-right"]):a.attr((0,y.__assign)((0,y.__assign)({},_e),{x:Ue,y:-Ne})):ft&&(t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},_e),{x:Ue,y:-Ne}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),Ue=Math.cos((18+72*1)/180*Math.PI)*oe,Ne=Math.sin((18+72*1)/180*Math.PI)*oe,o?!gt&&gt!==void 0?(o.remove(),delete t.shapeMap["link-point-top"]):o.attr((0,y.__assign)((0,y.__assign)({},_e),{x:Ue,y:-Ne})):gt&&(t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},_e),{x:Ue,y:-Ne}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),Ue=Math.cos((18+72*2)/180*Math.PI)*oe,Ne=Math.sin((18+72*2)/180*Math.PI)*oe,n?!ut&&ut!==void 0?(n.remove(),delete t.shapeMap["link-point-left"]):n.attr((0,y.__assign)((0,y.__assign)({},_e),{x:Ue,y:-Ne})):ut&&(t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},_e),{x:Ue,y:-Ne}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),Ue=Math.cos((18+72*3)/180*Math.PI)*oe,Ne=Math.sin((18+72*3)/180*Math.PI)*oe,s?!Mt&&Mt!==void 0?(s.remove(),delete t.shapeMap["link-point-left-bottom"]):s.attr((0,y.__assign)((0,y.__assign)({},_e),{x:Ue,y:-Ne})):Mt&&(t.shapeMap["link-point-left-bottom"]=t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},_e),{x:Ue,y:-Ne}),className:"link-point-left-bottom",name:"link-point-left-bottom",isAnchorPoint:!0})),Ue=Math.cos((18+72*4)/180*Math.PI)*oe,Ne=Math.sin((18+72*4)/180*Math.PI)*oe,u?!Ht&&Ht!==void 0?(u.remove(),delete t.shapeMap["link-point-right-bottom"]):u.attr((0,y.__assign)((0,y.__assign)({},_e),{x:Ue,y:-Ne})):Ht&&(t.shapeMap["link-point-right-bottom"]=t.addShape("circle",{attrs:(0,y.__assign)((0,y.__assign)({},_e),{x:Ue,y:-Ne}),className:"link-point-right-bottom",name:"link-point-right-bottom",isAnchorPoint:!0}))}},"single-node");var Jg=Xs.defaultSubjectColors,zd="fan-shape-";cf("donut",{options:{size:Qn.defaultNode.size,style:{x:0,y:0,stroke:Qn.defaultNode.style.stroke,fill:Qn.defaultNode.style.fill,lineWidth:Qn.defaultNode.style.lineWidth},labelCfg:{style:{fill:Qn.nodeLabel.style.fill,fontSize:Qn.nodeLabel.style.fontSize,fontFamily:Qn.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:Qn.defaultNode.linkPoints.size,lineWidth:Qn.defaultNode.linkPoints.lineWidth,fill:Qn.defaultNode.linkPoints.fill,stroke:Qn.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:(0,y.__assign)({},Qn.nodeStateStyles)},shapeType:"circle",labelPosition:"center",drawShape:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).icon,n=r===void 0?{}:r,a=this.getShapeStyle(e),o=(0,h.deepMix)({},n,e.icon),s=t.addShape("circle",{attrs:a,className:"".concat(this.type,"-keyShape"),draggable:!0,name:"".concat(this.type,"-keyShape")});t.shapeMap["".concat(this.type,"-keyShape")]=s;var u=o.width,c=o.height,f=o.show,l=o.text;return f&&(l?t.shapeMap["".concat(this.type,"-icon")]=t.addShape("text",{attrs:(0,y.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},o),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0}):t.shapeMap["".concat(this.type,"-icon")]=t.addShape("image",{attrs:(0,y.__assign)({x:-u/2,y:-c/2},o),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0})),hw(e,t,s),this.drawLinkPoints(e,t),s},updateShape:function(e,t,r,n,a){var o=t.get("keyShape");o.attr((0,y.__assign)({},r)),vw(e,t,o),this.updateLabel(e,t,a),n&&this.updateIcon(e,t)}},"circle");var hw=function(e,t,r){var n=e.donutAttrs,a=n===void 0?{}:n,o=e.donutColorMap,s=o===void 0?{}:o,u=Object.keys(a).length;if(a&&u>1){var c=t0(a,s),f=c.configs,l=c.totalValue;if(l){var _=e0(r),I=_.lineWidth,B=_.arcR,j=[B,0],et=0;if(u===1){xv(t,{arcR:B,arcBegin:j,beginAngle:et,config:f[0],fanIndex:0,lineWidth:I,totalValue:l,drawWhole:!0});return}for(var ut=0;ut<f.length;ut++){var ft=xv(t,{arcR:B,arcBegin:j,beginAngle:et,config:f[ut],fanIndex:ut,lineWidth:I,totalValue:l});if(ft.shouldEnd)return;j=ft.arcBegin,et=ft.beginAngle}}}},xv=function(e,t){var r=t.arcR,n=t.arcBegin,a=t.beginAngle,o=t.config,s=t.fanIndex,u=t.lineWidth,c=t.totalValue,f=t.drawWhole,l=f===void 0?!1:f,_=t.updateShape,I=_===void 0?void 0:_,B=o.value/c;if(B<.001)return{beginAngle:a,arcBegin:n,shape:void 0,shouldEnd:!1};var j,et,ut;if(l||B>.999)j=[r,1e-4],ut=1;else{var ft=B*Math.PI*2;et=a+ft,j=[r*Math.cos(et),-r*Math.sin(et)],ut=ft>Math.PI?1:0}var gt={path:[["M",n[0],n[1]],["A",r,r,0,ut,0,j[0],j[1]]],stroke:o.color||(I==null?void 0:I.attr("stroke"))||Jg[s%Jg.length],lineWidth:u};return I?I.attr(gt):e.shapeMap["".concat(zd).concat(s)]=e.addShape("path",{attrs:gt,name:"".concat(zd).concat(s),draggable:!0}),{beginAngle:et,arcBegin:j,shape:e.shapeMap["".concat(zd).concat(s)],shouldEnd:l||B>.999}},vw=function(e,t,r){var n=e.donutAttrs,a=e.donutColorMap,o=a===void 0?{}:a,s={},u=t.getContainer();if(n){var c=t0(n,o),f=c.configs,l=c.totalValue;if(l)for(var _=e0(r),I=_.lineWidth,B=_.arcR,j=[B,0],et=0,ut=0;ut<f.length;ut++){var ft="".concat(zd).concat(ut),gt=xv(u,{arcR:B,arcBegin:j,beginAngle:et,config:f[ut],fanIndex:ut,lineWidth:I,totalValue:l,drawWhole:f.length===1,updateShape:u.shapeMap[ft]});if(gt.shape&&(s[ft]=!0),gt.shouldEnd)break;j=gt.arcBegin,et=gt.beginAngle}}var Mt=Object.keys(u.shapeMap).filter(function(Ht){return Ht.includes(zd)});Mt.forEach(function(Ht){s[Ht]||(u.shapeMap[Ht].remove(!0),delete u.shapeMap[Ht])})},t0=function(e,t){var r=0,n=[];return Object.keys(e).forEach(function(a){var o=+e[a];isNaN(o)||(n.push({key:a,value:o,color:t[a]}),r+=o)}),{totalValue:r,configs:n}},e0=function(e){var t=e.attr("r"),r=.6*t,n=(t+r)/2,a=t-r;return{lineWidth:a,arcR:n}},mh=function(e){var t=e.x,r=e.y;return{x:t,y:r,centerX:t,centerY:r,minX:t,minY:r,maxX:t,maxY:r,height:0,width:0}},pw=function(e){e===void 0&&(e=[]);var t=[],r=[];e.forEach(function(u){t.push(u.x),r.push(u.y)});var n=Math.min.apply(Math,t),a=Math.max.apply(Math,t),o=Math.min.apply(Math,r),s=Math.max.apply(Math,r);return{centerX:(n+a)/2,centerY:(o+s)/2,maxX:a,maxY:s,minX:n,minY:o,height:s-o,width:a-n}},rM=function(e,t){return Math.abs(e.centerX-t.centerX)*2<e.width+t.width&&Math.abs(e.centerY-t.centerY)*2<e.height+t.height},bv=function(e){for(var t=[],r={},n=e.length,a=n-1;a>=0;a--){var o=e[a];o.id="".concat(o.x,"|||").concat(o.y),r[o.id]||(r[o.id]=o,t.push(o))}return t},r0=function(e){return bv(e)},nM=function(e,t){return[e,{x:e.x,y:t.y},t]},yh=function(e,t){return e.width||e.height?{centerX:e.centerX,centerY:e.centerY,minX:e.minX-t,minY:e.minY-t,maxX:e.maxX+t,maxY:e.maxY+t,height:e.height+2*t,width:e.width+2*t}:e},gw=function(e,t){var r=Math.abs(e.x-t.centerX),n=Math.abs(e.y-t.centerY);return r===0&&n===0?0:r/t.width>n/t.height},Ev=function(e,t,r){var n=gw(t,e);if(n===0){var a=e.centerX,o=e.centerY;return r.y<t.y?o=e.minY:r.x>t.x?a=e.maxX:r.x<t.x?a=e.minX:r.x===t.x&&(o=e.maxY),{x:a,y:o}}return n?{x:t.x>e.centerX?e.maxX:e.minX,y:t.y}:{x:t.x,y:t.y>e.centerY?e.maxY:e.minY}},n0=function(e,t){var r=Math.min(e.minX,t.minX),n=Math.min(e.minY,t.minY),a=Math.max(e.maxX,t.maxX),o=Math.max(e.maxY,t.maxY);return{centerX:(r+a)/2,centerY:(n+o)/2,minX:r,minY:n,maxX:a,maxY:o,height:o-n,width:a-r}},wv=function(e){return[{x:e.minX,y:e.minY},{x:e.maxX,y:e.minY},{x:e.maxX,y:e.maxY},{x:e.minX,y:e.maxY}]},xh=function(e,t){var r=e.x,n=e.y;return r<t.minX||r>t.maxX||n<t.minY||n>t.maxY},mw=function(e,t){return t<e.minX||t>e.maxX?[]:[{x:t,y:e.minY},{x:t,y:e.maxY}]},yw=function(e,t){return t<e.minY||t>e.maxY?[]:[{x:e.minX,y:t},{x:e.maxX,y:t}]},xw=function(e,t){return mw(e,t.x).concat(yw(e,t.y))},Gd=function(e,t){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)},bw=function(e,t){var r=-2,n=0;return t.forEach(function(a){a&&(e.x===a.x&&(n+=r),e.y===a.y&&(n+=r))}),n},a0=function(e,t,r,n,a){return Gd(e,t)+Gd(e,r)+bw(e,[t,r,n,a])},Ew=function i(e,t,r,n,a){a===void 0&&(a=0),e.unshift(t[n]),r[n]&&r[n]!==n&&a<=100&&i(e,t,r,r[n],a+1)},aM=function(e,t){var r=e.indexOf(t);r>-1&&e.splice(r,1)},bh=function(e,t,r,n){var a=r.x-e.x,o=r.y-e.y,s=n.x-e.x,u=n.y-e.y,c=r.x-t.x,f=r.y-t.y,l=n.x-t.x,_=n.y-t.y,I=a*u-o*s,B=c*_-f*l,j=a*f-o*c,et=s*_-u*l;return I*B<=0&&j*et<=0},Sv=function(e,t,r){if(r.width||r.height){var n=wv(r),a=n[0],o=n[1],s=n[2],u=n[3];return bh(e,t,a,o)||bh(e,t,a,u)||bh(e,t,o,s)||bh(e,t,s,u)}return!1},ww=function(e,t,r,n){var a=[];return e.forEach(function(o){if(o!==t&&(o.x===t.x||o.y===t.y)){if(Sv(o,t,r)||Sv(o,t,n))return;a.push(o)}}),bv(a)},Sw=function(e,t,r,n,a,o,s){var u,c=[],f=(u={},u[t.id]=t,u),l={},_={},I={};_[t.id]=0,I[t.id]=a0(t,r,t);var B=new s0;B.add({id:t.id,value:I[t.id]});var j={};e.forEach(function(Ht){j[Ht.id]=Ht});for(var et;Object.keys(f).length;){var ut=B.minId(!1);if(ut)et=f[ut];else break;if(et===r){var ft=[];return Ew(ft,j,l,r.id),ft}delete f[et.id],B.remove(et.id),c.push(et);var gt=ww(e,et,n,a),Mt=function(se){se.forEach(function(oe){if(c.indexOf(oe)===-1){var _e=oe.id;f[_e]||(f[_e]=oe);var Ue=I[et.id]+Gd(et,oe);if(_[_e]&&Ue>=_[_e]){B.add({id:_e,value:I[_e]});return}l[_e]=et.id,_[_e]=Ue,I[_e]=_[_e]+a0(oe,r,t,o,s),B.add({id:_e,value:I[_e]})}})};Mt(gt)}return[t,r]},Mw=function(e,t,r){return!(e.x===t.x&&t.x===r.x||e.y===t.y&&t.y===r.y)},_w=function(e,t,r,n){var a=Gd(e,t),o=Gd(r,t);a<n&&(n=a),o<n&&(n=o);var s={x:t.x-n/a*(t.x-e.x),y:t.y-n/a*(t.y-e.y)},u={x:t.x-n/o*(t.x-r.x),y:t.y-n/o*(t.y-r.y)};return[s,u]},i0=function(e,t){var r=[],n=e[0];return r.push("M".concat(n.x," ").concat(n.y)),e.forEach(function(a,o){var s=e[o+1],u=e[o+2];if(s&&u)if(Mw(a,s,u)){var c=_w(a,s,u,t),f=c[0],l=c[1];r.push("L".concat(f.x," ").concat(f.y)),r.push("Q".concat(s.x," ").concat(s.y," ").concat(l.x," ").concat(l.y)),r.push("L".concat(l.x," ").concat(l.y))}else r.push("L".concat(s.x," ").concat(s.y));else s&&r.push("L".concat(s.x," ").concat(s.y))}),r.join("")},o0=function(e,t,r,n,a){var o,s;if(!r||!r.getType())o=mh(e);else if(r.getType()==="combo"){var u=r.getKeyShape().getBBox();if(u){var c=r.getModel(),f=c.x,l=c.y;o={x:f,y:l,width:u.width,height:u.height,minX:u.minX+f,maxX:u.maxX+f,minY:u.minY+l,maxY:u.maxY+l},o.centerX=(o.minX+o.maxX)/2,o.centerY=(o.minY+o.maxY)/2}else o=mh(e)}else o=r&&r.getBBox();if(!n||!n.getType())s=mh(t);else if(n.getType()==="combo"){var _=n.getKeyShape().getBBox();if(_){var I=n.getModel(),B=I.x,j=I.y;s={x:B,y:j,width:_.width,height:_.height,minX:_.minX+B,maxX:_.maxX+B,minY:_.minY+j,maxY:_.maxY+j},s.centerX=(s.minX+s.maxX)/2,s.centerY=(s.minY+s.maxY)/2}else s=mh(t)}else s=n&&n.getBBox();var et=yh(o,a),ut=yh(s,a),ft=Ev(et,e,t),gt=Ev(ut,t,e),Mt=pw([ft,gt]),Ht=n0(et,Mt),se=n0(ut,Mt),oe=[];oe=oe.concat(wv(Ht)).concat(wv(se));var _e={x:(e.x+t.x)/2,y:(e.y+t.y)/2};[Mt,Ht,se].forEach(function(Ne){oe=oe.concat(xw(Ne,_e).filter(function(Qe){return xh(Qe,et)&&xh(Qe,ut)}))}),[{x:ft.x,y:gt.y},{x:gt.x,y:ft.y}].forEach(function(Ne){xh(Ne,et)&&xh(Ne,ut)&&oe.push(Ne)}),oe.unshift(ft),oe.push(gt),oe=bv(oe);var Ue=Sw(oe,ft,gt,o,s,e,t);return Ue.unshift(e),Ue.push(t),r0(Ue)},Cw=function(e){if(!(e!=null&&e.length))return e;for(var t=e[e.length-1],r={x:t.x,y:t.y},n=[t],a=[t],o=e.length-2;o>=0;o--){var s=e[o];if(s.x===r.x?n.push(s):(n=[s],r.x=s.x),s.y===r.y?a.push(s):(a=[s],r.y=s.y),n.length>2){var u=e.indexOf(n[1]);u>-1&&e.splice(u,1);continue}if(a.length>2){var u=e.indexOf(a[1]);u>-1&&e.splice(u,1)}}return e},s0=function(){function i(){this.arr=[],this.map={},this.arr=[],this.map={}}return i.prototype._innerAdd=function(e,t){for(var r=[0,t-1];r[1]-r[0]>1;){var n=Math.floor((r[0]+r[1])/2);if(this.arr[n].value>e.value)r[1]=n;else if(this.arr[n].value<e.value)r[0]=n;else{this.arr.splice(n,0,e),this.map[e.id]=!0;return}}this.arr.splice(r[1],0,e),this.map[e.id]=!0},i.prototype.add=function(e){delete this.map[e.id];var t=this.arr.length;if(!t){this.arr.push(e),this.map[e.id]=!0;return}if(this.arr[t-1].value<e.value){this.arr.push(e),this.map[e.id]=!0;return}this._innerAdd(e,t)},i.prototype.remove=function(e){this.map[e]&&delete this.map[e]},i.prototype._clearAndGetMinId=function(){for(var e,t=this.arr.length-1;t>=0;t--)this.map[this.arr[t].id]?e=this.arr[t].id:this.arr.splice(t,1);return e},i.prototype._findFirstId=function(){for(;this.arr.length;){var e=this.arr.shift();if(this.map[e.id])return e.id}},i.prototype.minId=function(e){return e?this._clearAndGetMinId():this._findFirstId()},i}(),Tw=function(e,t){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)},Aw=function(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))},Iw=function(e,t){return[e,t]},Ow=function(e,t,r,n,a){return r0(o0(e,t,r,n,a.offset))},Dw={offset:20,maxAllowedDirectionChange:Math.PI/2,maximumLoops:2e3,gridSize:10,directions:[{stepX:1,stepY:0},{stepX:-1,stepY:0},{stepX:0,stepY:1},{stepX:0,stepY:-1}],get penalties(){return{0:0,45:this.gridSize/2,90:this.gridSize/2}},distFunc:Tw,fallbackRoute:Ow},iM={maxAllowedDirectionChange:Math.PI/4,directions:[{stepX:1,stepY:0},{stepX:1,stepY:1},{stepX:0,stepY:1},{stepX:-1,stepY:1},{stepX:-1,stepY:0},{stepX:-1,stepY:-1},{stepX:0,stepY:-1},{stepX:1,stepY:-1}],distFunc:Aw,fallbackRoute:Iw},vf=function(e,t){var r=Math.round(Math.abs(e/t)),n=e<0?-1:1;return r<0?0:n*r},Lw=function(e,t,r){var n={};return e.forEach(function(a){if(a)for(var o=yh(a.getBBox(),r),s=vf(o.minX,t);s<=vf(o.maxX,t);s+=1)for(var u=vf(o.minY,t);u<=vf(o.maxY,t);u+=1)n["".concat(s,"|||").concat(u)]=!0}),n},Mv=function(e,t){var r=t.x-e.x,n=t.y-e.y;return r||n?Math.atan2(n,r):0},u0=function(e,t){var r=Math.abs(e-t);return r>Math.PI?2*Math.PI-r:r},c0=function(e,t,r){for(var n=1/0,a=0,o=t.length;a<o;a++){var s=r(e,t[a]);s<n&&(n=s)}return n},f0=function(e,t,r,n,a){var o=[];if(!r)return[e];var s=a.directions,u=a.offset,c=r.getBBox(),f=t.x>c.minX&&t.x<c.maxX&&t.y>c.minY&&t.y<c.maxY,l=yh(c,u);for(var _ in l)l[_]=vf(l[_],a.gridSize);if(f){for(var I=0,B=s;I<B.length;I++)for(var j=B[I],et=[[{x:l.minX,y:l.minY},{x:l.maxX,y:l.minY}],[{x:l.minX,y:l.minY},{x:l.minX,y:l.maxY}],[{x:l.maxX,y:l.minY},{x:l.maxX,y:l.maxY}],[{x:l.minX,y:l.maxY},{x:l.maxX,y:l.maxY}]],_=0;_<4;_++){var ut=et[_],ft=Xs.getLineIntersect(e,{x:e.x+j.stepX*l.width,y:e.y+j.stepY*l.height},ut[0],ut[1]);ft&&!Sv(e,ft,c)&&(ft.id="".concat(ft.x,"|||").concat(ft.y),o.push(ft))}return o}var gt=Ev(l,e,n);return gt.id="".concat(gt.x,"|||").concat(gt.y),[gt]},_v=function(e,t,r,n){var a=Mv(e,t),o=r[e.id];if(!o){var s=Mv(n,e);return u0(s,a)}var u=Mv({x:o.x,y:o.y},e);return u0(u,a)},Pw=function(e,t,r,n,a,o,s){var u=[n],c=n,f=e.id,l=e.x,_=e.y,I={x:l,y:_,id:f};_v(I,o,t,r)&&(c={x:o.x===n.x?n.x:I.x*s,y:o.y===n.y?n.y:I.y*s},u.unshift(c));for(var B=t[f];B&&B.id!==f;){var j={x:l,y:_,id:f},et={x:B.x,y:B.y,id:B.id},ut=_v(et,j,t,r);ut&&(c={x:et.x===j.x?c.x:et.x*s,y:et.y===j.y?c.y:et.y*s},u.unshift(c)),f=et.id,l=et.x,_=et.y,B=t[f]}return u[0].x=l===r.x?a.x:c.x,u[0].y=_===r.y?a.y:c.y,u.unshift(a),u},Nw=function(e,t,r,n,a){if(isNaN(e.x)||isNaN(t.x))return[];var o=(0,h.deepMix)(Dw,a);o.obstacles=o.obstacles||[];var s=o.penalties,u=o.gridSize,c=Lw(o.obstacles.concat([r,n]),u,o.offset),f={x:vf(e.x,u),y:vf(e.y,u)},l={x:vf(t.x,u),y:vf(t.y,u)};e.id="".concat(f.x,"|||").concat(f.y),t.id="".concat(l.x,"|||").concat(l.y);var _=f0(f,e,r,l,o),I=f0(l,t,n,f,o);_.forEach(function($r){delete c[$r.id]}),I.forEach(function($r){delete c[$r.id]});for(var B={},j={},et={},ut={},ft={},gt=new s0,Mt=0;Mt<_.length;Mt++){var Ht=_[Mt];B[Ht.id]=Ht,ut[Ht.id]=0,ft[Ht.id]=c0(Ht,I,o.distFunc),gt.add({id:Ht.id,value:ft[Ht.id]})}var se=o.maximumLoops,oe,_e,Ue,Ne,Qe,dr,nn=1/0,kn={};for(I.forEach(function($r){kn["".concat($r.x,"|||").concat($r.y)]=!0}),Object.keys(B).forEach(function($r){var xn=B[$r].id;ft[xn]<=nn&&(nn=ft[xn],oe=B[xn])});Object.keys(B).length>0&&se>0;){var En=gt.minId((se+1)%30===0);if(En)oe=B[En];else break;if(kn["".concat(oe.x,"|||").concat(oe.y)])return Pw(oe,et,f,t,e,l,u);delete B[oe.id],gt.remove(oe.id),j[oe.id]=!0;for(var Mt=0;Mt<o.directions.length;Mt++){_e=o.directions[Mt];var Kr="".concat(Math.round(oe.x)+_e.stepX,"|||").concat(Math.round(oe.y)+_e.stepY);if(Ue={x:oe.x+_e.stepX,y:oe.y+_e.stepY,id:Kr},!j[Kr]&&(dr=_v(oe,Ue,et,f),!(dr>o.maxAllowedDirectionChange)&&!c[Kr])){B[Kr]||(B[Kr]=Ue);var Jn=s[dr];Ne=o.distFunc(oe,Ue)+(isNaN(Jn)?u:Jn),Qe=ut[oe.id]+Ne;var Kn=ut[Kr];Kn&&Qe>=Kn||(et[Kr]=oe,ut[Kr]=Qe,ft[Kr]=Qe+c0(Ue,I,o.distFunc),gt.add({id:Kr,value:ft[Kr]}))}}se-=1}return o.fallbackRoute(e,t,r,n,o)};fp("polyline",{options:{color:Qn.defaultEdge.color,size:Qn.defaultEdge.size,style:{radius:0,offset:15,x:0,y:0,stroke:Qn.defaultEdge.style.stroke,lineAppendWidth:Qn.defaultEdge.style.lineAppendWidth},labelCfg:{style:{fill:Qn.edgeLabel.style.fill,fontSize:Qn.edgeLabel.style.fontSize,fontFamily:Qn.windowFontFamily}},routeCfg:{obstacles:[],maxAllowedDirectionChange:Math.PI,maximumLoops:500,gridSize:10},stateStyles:(0,y.__assign)({},Qn.edgeStateStyles)},shapeType:"polyline",labelPosition:"center",drawShape:function(e,t){var r=this.getShapeStyle(e);r.radius===0&&delete r.radius;var n=t.addShape("path",{className:"edge-shape",name:"edge-shape",attrs:r});return t.shapeMap["edge-shape"]=n,n},getShapeStyle:function(e){var t=this.options.style,r={stroke:e.color},n=(0,h.mix)({},t,r,e.style);e=this.getPathPoints(e),this.radius=n.radius,this.offset=n.offset;var a=e.startPoint,o=e.endPoint,s=this.getControlPoints(e),u=[a];s&&(u=u.concat(s)),u.push(o);var c=e.sourceNode,f=e.targetNode,l=n.radius,_=this.options.routeCfg,I=(0,h.mix)({},_,e.routeCfg);I.offset=n.offset;var B=this.getPath(u,c,f,l,I,!s);((0,h.isArray)(B)&&B.length<=1||(0,h.isString)(B)&&B.indexOf("L")===-1)&&(B="M0 0, L0 0"),(isNaN(a.x)||isNaN(a.y)||isNaN(o.x)||isNaN(o.y))&&(B="M0 0, L0 0");var j=(0,h.mix)({},Qn.defaultEdge.style,n,{lineWidth:e.size,path:B});return j},updateShapeStyle:function(e,t){var r=t.getContainer();if(t.isVisible()){var n={stroke:e.color},a=r.shapeMap["edge-shape"]||r.find(function(Mt){return Mt.get("className")==="edge-shape"})||t.getKeyShape(),o=e.size;e=this.getPathPoints(e);var s=e.startPoint,u=e.endPoint,c=this.getControlPoints(e),f=[s];c&&(f=f.concat(c)),f.push(u);var l=a.attr(),_=(0,h.mix)({},n,l,e.style),I=e.sourceNode,B=e.targetNode,j=_.radius,et=this.options.routeCfg,ut=(0,h.mix)({},et,e.routeCfg);ut.offset=_.offset;var ft=this.getPath(f,I,B,j,ut,!c);((0,h.isArray)(ft)&&ft.length<=1||(0,h.isString)(ft)&&ft.indexOf("L")===-1)&&(ft="M0 0, L0 0"),(isNaN(s.x)||isNaN(s.y)||isNaN(u.x)||isNaN(u.y))&&(ft="M0 0, L0 0"),l.endArrow&&_.endArrow===!1&&(e.style.endArrow={path:""}),l.startArrow&&_.startArrow===!1&&(e.style.startArrow={path:""});var gt=(0,h.mix)(n,a.attr(),{lineWidth:o,path:ft},e.style);a&&a.attr(gt)}},getPath:function(e,t,r,n,a,o){var s=a.offset,u=a.obstacles,c=a.simple;if(!s||e.length>2||o===!1){if(n)return i0(e,n);var f=[];return(0,h.each)(e,function(B,j){j===0?f.push(["M",B.x,B.y]):f.push(["L",B.x,B.y])}),f}c!==!1&&!(u!=null&&u.length)&&(c=!0);var l=c?o0(e[e.length-1],e[0],r,t,s):Nw(e[0],e[e.length-1],t,r,a);if(!l||!l.length)return"M0 0, L0 0";if(n){var _=i0(l,n);return _}l=Cw(l);var I=Xs.pointsToPolygon(l);return I}},"single-edge");var l0=lf.cloneEvent,d0=lf.isNaN,h0=Math.abs,Rw=10,kw=["shift","ctrl","alt","control"],Bw={getDefaultCfg:function(){return{direction:"both",enableOptimize:!1,scalableRange:0,allowDragOnItem:!1}},getEvents:function(){return{mousedown:"onMouseDown",drag:"onDragMove",dragend:"onMouseUp","canvas:click":"onMouseUp",keyup:"onKeyUp",focus:"onKeyUp",keydown:"onKeyDown",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onMouseUp"}},updateViewport:function(e){var t=this.origin,r=+e.clientX,n=+e.clientY;if(!(d0(r)||d0(n))){var a=r-t.x,o=n-t.y;this.get("direction")==="x"?o=0:this.get("direction")==="y"&&(a=0),this.origin={x:r,y:n};var s=this.graph.get("width"),u=this.graph.get("height"),c=this.graph.get("canvas").getCanvasBBox(),f=this.scalableRange,l=this.scalableRange;f<1&&f>-1&&(f=s*f,l=u*l),(c.minX<=s+f&&c.minX+a>s+f||c.maxX+f>=0&&c.maxX+f+a<0)&&(a=0),(c.minY<=u+l&&c.minY+o>u+l||c.maxY+l>=0&&c.maxY+l+o<0)&&(o=0),this.graph.translate(a,o)}},onTouchStart:function(e){var t=this,r=e.originalEvent.touches,n=r[0],a=r[1];n&&a||(e.preventDefault(),this.mousedown=!0,t.onDragStart(e))},onMouseDown:function(e){this.mousedown=!0},onDragMove:function(e){this.mousedown&&(this.dragstart?this.onDrag(e):(this.dragstart=!0,this.onDragStart(e)))},onDragStart:function(e){var t=this,r=e.originalEvent;if(!(r&&e.name!=="touchstart"&&r.button!==0)&&!(e.name!=="touchstart"&&typeof window!="undefined"&&window.event&&!window.event.buttons&&!window.event.button)&&this.shouldBegin(e,this)&&!t.keydown&&this.allowDrag(e)){if(t.origin={x:e.clientX,y:e.clientY},t.dragging=!1,this.enableOptimize){for(var n=this.graph,a=n.getEdges(),o=0,s=a.length;o<s;o++){var u=a[o].get("group").get("children");u&&u.forEach(function(gt){gt.set("ori-visibility",gt.get("ori-visibility")||gt.get("visible")),gt.hide()})}for(var c=n.getNodes(),f=0,l=c.length;f<l;f++)for(var _=c[f].getContainer(),I=_.get("children"),B=0,j=I;B<j.length;B++){var et=j[B],ut=et.get("isKeyShape");ut||(et.set("ori-visibility",et.get("ori-visibility")||et.get("visible")),et.hide())}}if(typeof window!="undefined"){var ft=this;this.handleDOMContextMenu=function(gt){return ft.onMouseUp(gt)},document.body.addEventListener("contextmenu",this.handleDOMContextMenu)}}},onTouchMove:function(e){var t=this,r=e.originalEvent.touches,n=r[0],a=r[1];if(n&&a){this.onMouseUp(e);return}e.preventDefault(),t.onDrag(e)},onDrag:function(e){if(this.mousedown){var t=this.graph;if(!this.keydown&&this.allowDrag(e)&&(e=l0(e),!!this.origin)){if(this.dragging)e.type="drag",t.emit("canvas:drag",e);else{if(h0(this.origin.x-e.clientX)+h0(this.origin.y-e.clientY)<Rw)return;this.shouldBegin(e,this)&&(e.type="dragstart",t.emit("canvas:dragstart",e),this.originPosition={x:e.clientX,y:e.clientY},this.dragging=!0)}this.shouldUpdate(e,this)&&this.updateViewport(e)}}},onMouseUp:function(e){var t,r;this.mousedown=!1,this.dragstart=!1;var n=this.graph;if(!this.keydown){var a=n.getZoom(),o=n.get("modeController"),s=(r=(t=o==null?void 0:o.modes[o.mode])===null||t===void 0?void 0:t.filter(function(oe){return oe.type==="zoom-canvas"}))===null||r===void 0?void 0:r[0],u=s?s.optimizeZoom||.1:0;if(this.enableOptimize){for(var c=n.getEdges(),f=0,l=c.length;f<l;f++){var _=c[f].get("group").get("children");_&&_.forEach(function(oe){var _e=oe.get("ori-visibility");oe.set("ori-visibility",void 0),_e&&oe.show()})}if(a>u)for(var I=n.getNodes(),B=0,j=I.length;B<j;B++)for(var et=I[B].getContainer(),ut=et.get("children"),ft=0,gt=ut;ft<gt.length;ft++){var Mt=gt[ft],Ht=Mt.get("isKeyShape");if(!Ht){var se=Mt.get("ori-visibility");Mt.set("ori-visibility",void 0),se&&Mt.show()}}}if(!this.dragging){this.origin=null;return}e=l0(e),this.shouldEnd(e,this)&&this.updateViewport(e),e.type="dragend",e.dx=e.clientX-this.originPosition.x,e.dy=e.clientY-this.originPosition.y,n.emit("canvas:dragend",e),this.endDrag(),typeof window!="undefined"&&document.body.removeEventListener("contextmenu",this.handleDOMContextMenu)}},endDrag:function(){this.origin=null,this.dragging=!1,this.dragbegin=!1,this.mousedown=!1,this.dragstart=!1},onKeyDown:function(e){var t=this,r=e.key;r&&(kw.indexOf(r.toLowerCase())>-1?t.keydown=!0:t.keydown=!1)},onKeyUp:function(){this.keydown=!1,this.origin=null,this.dragging=!1,this.dragbegin=!1},allowDrag:function(e){var t,r,n=e.target,a=n&&n.isCanvas&&n.isCanvas();if((0,h.isBoolean)(this.allowDragOnItem)&&!this.allowDragOnItem&&!a)return!1;if((0,h.isObject)(this.allowDragOnItem)){var o=this.allowDragOnItem,s=o.node,u=o.edge,c=o.combo,f=(r=(t=e.item)===null||t===void 0?void 0:t.getType)===null||r===void 0?void 0:r.call(t);if(!s&&f==="node"||!u&&f==="edge"||!c&&f==="combo")return!1}return!0}},Fw={getDefaultCfg:function(){return{updateEdge:!0,delegateStyle:{},enableDelegate:!1,onlyChangeComboSize:!1,comboActiveState:"",selectedState:"selected",enableOptimize:!1,enableDebounce:!1,enableStack:!0}},getEvents:function(){return{"node:mousedown":"onMouseDown",drag:"onDragMove",dragend:"onDragEnd","combo:dragenter":"onDragEnter","combo:dragleave":"onDragLeave","combo:drop":"onDropCombo","node:drop":"onDropNode","canvas:drop":"onDropCanvas",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onDragEnd",afterchangedata:"onDragEnd"}},validationCombo:function(e){if(!this.origin||!e||e.destroyed)return!1;var t=e.getType();return t==="combo"},onTouchStart:function(e){if(e.item){var t=this;try{var r=e.originalEvent.touches,n=r[0],a=r[1];if(n&&a)return;e.preventDefault()}catch(o){console.warn("Touch original event not exist!")}this.mousedown={item:e.item,target:e.target,origin:{x:e.x,y:e.y}},this.dragstart=!0,t.onDragStart(e)}},onTouchMove:function(e){var t=this;try{var r=e.originalEvent.touches,n=r[0],a=r[1];if(n&&a){t.onDragEnd(e);return}e.preventDefault()}catch(o){console.warn("Touch original event not exist!")}t.onDrag(e)},onMouseDown:function(e){this.mousedown={item:e.item,target:e.target,origin:{x:e.x,y:e.y}},typeof window!="undefined"&&!this.windowEventBinded&&(this.windowEventBinded=!0,document.body.addEventListener("contextmenu",this.onDragEnd.bind(this)),document.body.addEventListener("mouseup",this.onDragEnd.bind(this)))},onDragMove:function(e){var t,r;if(((r=(t=e.item)===null||t===void 0?void 0:t.getType)===null||r===void 0?void 0:r.call(t))!=="node"){this.onDragEnd();return}this.mousedown&&(this.dragstart?this.onDrag((0,y.__assign)((0,y.__assign)({},e),this.mousedown)):(this.dragstart=!0,this.onDragStart(e)))},onDragStart:function(e){var t=this;if(this.currentShouldEnd=!0,!!this.shouldBegin((0,y.__assign)((0,y.__assign)({},e),this.mousedown),this)){var r=this.mousedown,n=r.item,a=r.target;if(!(!n||n.destroyed||n.hasLocked())){var o=n.getContainer();if(o.set("capture",!1),this.cachedCaptureItems||(this.cachedCaptureItems=[]),this.cachedCaptureItems.push(n),a){var s=a.get("isAnchorPoint");if(s)return}var u=this.graph;this.targets=[],this.targetCombo=null;var c=u.findAllByState("node",this.selectedState),f=n.get("id"),l=c.filter(function(I){var B=I.get("id");return f===B});if(l.length===0?this.targets.push(n):c.length>1?c.forEach(function(I){var B=I.hasLocked();B||t.targets.push(I)}):this.targets.push(n),this.graph.get("enabledStack")&&this.enableStack){var _=[];this.targets.forEach(function(I){var B=I.getModel(),j=B.x,et=B.y,ut=B.id;_.push({x:j,y:et,id:ut})}),this.set("beforeDragNodes",_)}this.hidenEdge={},this.get("updateEdge")&&this.enableOptimize&&!this.enableDelegate&&this.targets.forEach(function(I){var B=I.getEdges();B.forEach(function(j){j.isVisible()&&(t.hidenEdge[j.getID()]=!0,j.hide())})}),this.origin=this.mousedown.origin,this.point={},this.originPoint={}}}},onDrag:function(e){var t=this;if(!(!this.mousedown||!this.origin)&&this.shouldUpdate(e,this))if(this.get("enableDelegate"))this.updateDelegate(e);else if(this.enableDebounce)this.debounceUpdate({targets:this.targets,graph:this.graph,point:this.point,origin:this.origin,evt:e,updateEdge:this.get("updateEdge"),onlyChangeComboSize:this.onlyChangeComboSize,updateParentCombos:this.updateParentCombos});else{var r={};this.targets.map(function(n){t.update(n,e);var a=n.getModel().comboId;a&&(r[a]=t.graph.findById(a))}),this.onlyChangeComboSize&&this.updateParentCombos()}},onDragEnd:function(e){var t=this,r;if(this.mousedown=!1,this.dragstart=!1,typeof window!="undefined"&&this.windowEventBinded&&(this.windowEventBinded=!1,document.body.removeEventListener("contextmenu",this.onDragEnd.bind(this)),document.body.removeEventListener("mouseup",this.onDragEnd.bind(this))),!!this.origin){(r=this.cachedCaptureItems)===null||r===void 0||r.forEach(function(o){var s=o.getContainer();s.set("capture",!0)}),this.cachedCaptureItems=[],this.delegateRect&&(this.delegateRect.remove(),this.delegateRect=null),this.get("updateEdge")&&this.enableOptimize&&!this.enableDelegate&&this.targets.forEach(function(o){var s=o.getEdges();s.forEach(function(u){t.hidenEdge[u.getID()]&&u.show(),u.refresh()})}),this.hidenEdge={};var n=this.graph;if(n.get("enabledStack")&&this.enableStack){var a={before:{nodes:[],edges:[],combos:[]},after:{nodes:[],edges:[],combos:[]}};this.get("beforeDragNodes").forEach(function(o){a.before.nodes.push(o)}),this.targets.forEach(function(o){var s=o.getModel(),u=s.x,c=s.y,f=s.id;a.after.nodes.push({x:u,y:c,id:f})}),n.pushStack("update",(0,h.clone)(a))}n.emit("dragnodeend",{items:this.targets,targetItem:null}),this.point={},this.origin=null,this.originPoint={},this.targets.length=0,this.targetCombo=null}},onDropCombo:function(e){var t=e.item;if(this.currentShouldEnd=this.shouldEnd(e,t,this),this.updatePositions(e,!this.currentShouldEnd),!(!this.currentShouldEnd||!this.validationCombo(t))){var r=this.graph;if(this.comboActiveState&&r.setItemState(t,this.comboActiveState,!1),this.targetCombo=t,this.onlyChangeComboSize)r.updateCombos();else{var n=t.getModel();this.targets.map(function(a){var o=a.getModel();o.comboId!==n.id&&r.updateComboTree(a,n.id)}),r.updateCombo(t)}r.emit("dragnodeend",{items:this.targets,targetItem:this.targetCombo})}},onDropCanvas:function(e){var t=this.graph;this.currentShouldEnd=this.shouldEnd(e,void 0,this),this.updatePositions(e,!this.currentShouldEnd),!(!this.targets||this.targets.length===0||!this.currentShouldEnd)&&(this.onlyChangeComboSize?this.updateParentCombos():this.targets.map(function(r){var n=r.getModel();n.comboId&&t.updateComboTree(r)}))},onDropNode:function(e){if(!(!this.targets||this.targets.length===0)){var t=this,r=e.item,n=t.graph,a=r.getModel().comboId,o=a?n.findById(a):void 0;if(this.currentShouldEnd=this.shouldEnd(e,o,this),this.updatePositions(e,!this.currentShouldEnd),!!this.currentShouldEnd){if(this.onlyChangeComboSize)this.updateParentCombos();else if(a){var s=n.findById(a);t.comboActiveState&&n.setItemState(s,t.comboActiveState,!1),this.targets.map(function(u){var c=u.getModel();a!==c.comboId&&n.updateComboTree(u,a)}),n.updateCombo(s)}else this.targets.map(function(u){var c=u.getModel();c.comboId&&n.updateComboTree(u)});n.emit("dragnodeend",{items:this.targets,targetItem:r})}}},onDragEnter:function(e){var t=e.item;if(this.validationCombo(t)){var r=this.graph;this.comboActiveState&&r.setItemState(t,this.comboActiveState,!0)}},onDragLeave:function(e){var t=e.item;if(this.validationCombo(t)){var r=this.graph;this.comboActiveState&&r.setItemState(t,this.comboActiveState,!1)}},updatePositions:function(e,t){var r=this;!this.targets||this.targets.length===0||(this.get("enableDelegate")?this.enableDebounce?this.debounceUpdate({targets:this.targets,graph:this.graph,point:this.point,origin:this.origin,evt:e,updateEdge:this.get("updateEdge"),onlyChangeComboSize:this.onlyChangeComboSize,updateParentCombos:this.updateParentCombos}):t||this.targets.map(function(n){return r.update(n,e)}):this.targets.map(function(n){return r.update(n,e,t)}))},update:function(e,t,r){var n=this.origin,a=e.get("model"),o=e.get("id");this.point[o]||(this.point[o]={x:a.x||0,y:a.y||0});var s=t.x-n.x+this.point[o].x,u=t.y-n.y+this.point[o].y;r&&(s+=n.x-t.x,u+=n.y-t.y);var c={x:s,y:u};this.get("updateEdge")?this.graph.updateItem(e,c,!1):e.updatePosition(c)},debounceUpdate:(0,h.debounce)(function(i){var e=i.targets,t=i.graph,r=i.point,n=i.origin,a=i.evt,o=i.updateEdge,s=i.onlyChangeComboSize,u=i.updateParentCombos;e.map(function(c){var f=c.get("model"),l=c.get("id");r[l]||(r[l]={x:f.x||0,y:f.y||0});var _=a.x-n.x+r[l].x,I=a.y-n.y+r[l].y,B={x:_,y:I};o?t.updateItem(c,B,!1):c.updatePosition(B)}),s&&u(t,e)},50,!0),updateDelegate:function(e){var t=this.graph;if(this.delegateRect){var _=e.x-this.origin.x+this.originPoint.minX,I=e.y-this.origin.y+this.originPoint.minY;this.delegateRect.attr({x:_,y:I})}else{var r=t.get("group"),n=(0,h.deepMix)({},_l.delegateStyle,this.delegateStyle),a=this.calculationGroupPosition(e),o=a.x,s=a.y,u=a.width,c=a.height,f=a.minX,l=a.minY;this.originPoint={x:o,y:s,width:u,height:c,minX:f,minY:l},this.delegateRect=r.addShape("rect",{attrs:(0,y.__assign)({width:u,height:c,x:o,y:s},n),name:"rect-delegate-shape"}),this.delegate=this.delegateRect,this.delegateRect.set("capture",!1)}},calculationGroupPosition:function(e){var t=this.targets;t.length===0&&t.push(e.item);for(var r=1/0,n=-1/0,a=1/0,o=-1/0,s=0;s<t.length;s++){var u=t[s],c=u.getBBox(),f=c.minX,l=c.minY,_=c.maxX,I=c.maxY;f<r&&(r=f),l<a&&(a=l),_>n&&(n=_),I>o&&(o=I)}var B=Math.floor(r),j=Math.floor(a),et=Math.ceil(n)-Math.floor(r),ut=Math.ceil(o)-Math.floor(a);return{x:B,y:j,width:et,height:ut,minX:r,minY:a}},updateParentCombos:function(e,t){var r=e||this.graph,n=t||this.targets,a={};n==null||n.forEach(function(o){var s=o.getModel().comboId;s&&(a[s]=r.findById(s))}),Object.values(a).forEach(function(o){o&&r.updateCombo(o)})}},zw={getDefaultCfg:function(){return{trigger:"mouseenter",activeState:"active",inactiveState:"inactive",resetSelected:!1,shouldUpdate:function(){return!0}}},getEvents:function(){return this.get("trigger")==="mouseenter"?{"node:mouseenter":"setAllItemStates","combo:mouseenter":"setAllItemStates","node:mouseleave":"clearActiveState","combo:mouseleave":"clearActiveState"}:{"node:click":"setAllItemStates","combo:click":"setAllItemStates","canvas:click":"clearActiveState","node:touchstart":"setOnTouchStart","combo:touchstart":"setOnTouchStart","canvas:touchstart":"clearOnTouchStart"}},setOnTouchStart:function(e){var t=this;try{var r=e.originalEvent.touches,n=r[0],a=r[1];if(n&&a)return;e.preventDefault()}catch(o){console.warn("Touch original event not exist!")}t.setAllItemStates(e)},clearOnTouchStart:function(e){var t=this;try{var r=e.originalEvent.touches,n=r[0],a=r[1];if(n&&a)return;e.preventDefault()}catch(o){console.warn("Touch original event not exist!")}t.clearActiveState(e)},setAllItemStates:function(e){clearTimeout(this.timer),this.throttleSetAllItemStates(e,this)},clearActiveState:function(e){var t=this;this.timer=setTimeout(function(){t.throttleClearActiveState(e,t)},50)},throttleSetAllItemStates:(0,h.throttle)(function(i,e){var t=i.item,r=e.graph;if(!(!r||r.destroyed)&&(e.item=t,!!e.shouldUpdate(i.item,{event:i,action:"activate"},e))){for(var n=e.activeState,a=e.inactiveState,o=r.getNodes(),s=r.getCombos(),u=r.getEdges(),c=r.get("vedges"),f=o.length,l=s.length,_=u.length,I=c.length,B=e.inactiveItems||{},j=e.activeItems||{},et=0;et<f;et++){var ut=o[et],ft=ut.getID(),gt=ut.hasState("selected");e.resetSelected&&gt&&r.setItemState(ut,"selected",!1),j[ft]&&(r.setItemState(ut,n,!1),delete j[ft]),a&&!B[ft]&&(r.setItemState(ut,a,!0),B[ft]=ut)}for(var et=0;et<l;et++){var Mt=s[et],Ht=Mt.getID(),gt=Mt.hasState("selected");e.resetSelected&&gt&&r.setItemState(Mt,"selected",!1),j[Ht]&&(r.setItemState(Mt,n,!1),delete j[Ht]),a&&!B[Ht]&&(r.setItemState(Mt,a,!0),B[Ht]=Mt)}for(var et=0;et<_;et++){var se=u[et],oe=se.getID();j[oe]&&(r.setItemState(se,n,!1),delete j[oe]),a&&!B[oe]&&(r.setItemState(se,a,!0),B[oe]=se)}for(var et=0;et<I;et++){var _e=c[et],Ue=_e.getID();j[Ue]&&(r.setItemState(_e,n,!1),delete j[Ue]),a&&!B[Ue]&&(r.setItemState(_e,a,!0),B[Ue]=_e)}if(t&&!t.destroyed){a&&(r.setItemState(t,a,!1),delete B[t.getID()]),j[t.getID()]||(r.setItemState(t,n,!0),j[t.getID()]=t);for(var Ne=t.getEdges(),Qe=Ne.length,et=0;et<Qe;et++){var se=Ne[et],oe=se.getID(),dr=void 0;se.getSource()===t?dr=se.getTarget():dr=se.getSource();var nn=dr.getID();a&&B[nn]&&(r.setItemState(dr,a,!1),delete B[nn]),j[nn]||(r.setItemState(dr,n,!0),j[nn]=dr),B[oe]&&(r.setItemState(se,a,!1),delete B[oe]),j[oe]||(r.setItemState(se,n,!0),j[oe]=se),se.toFront()}}e.activeItems=j,e.inactiveItems=B,r.emit("afteractivaterelations",{item:i.item,action:"activate"})}},50,{trailing:!0,leading:!0}),throttleClearActiveState:(0,h.throttle)(function(i,e){var t=e.get("graph");if(!(!t||t.destroyed)&&e.shouldUpdate(i.item,{event:i,action:"deactivate"},e)){var r=e.activeState,n=e.inactiveState,a=e.activeItems||{},o=e.inactiveItems||{};Object.values(a).filter(function(s){return!s.destroyed}).forEach(function(s){t.clearItemStates(s,r)}),Object.values(o).filter(function(s){return!s.destroyed}).forEach(function(s){t.clearItemStates(s,n)}),e.activeItems={},e.inactiveItems={},t.emit("afteractivaterelations",{item:i.item||e.get("item"),action:"deactivate"})}},50,{trailing:!0,leading:!0})},Eh=Math.min,v0=Math.max,p0=Math.abs,g0="shift",Gw=["drag","shift","ctrl","alt","control"],Uw={getDefaultCfg:function(){return{brushStyle:{fill:"#EEF6FF",fillOpacity:.4,stroke:"#DDEEFE",lineWidth:1},onSelect:function(){},onDeselect:function(){},selectedState:"selected",trigger:g0,includeEdges:!0,includeCombos:!1,selectedEdges:[],selectedNodes:[],selectedCombos:[]}},getEvents:function(){return Gw.indexOf(this.trigger.toLowerCase())>-1||(this.trigger=g0,console.warn("Behavior brush-select \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'drag'\u3001'shift'\u3001'ctrl' \u6216 'alt'")),this.trigger==="drag"?{dragstart:"onMouseDown",drag:"onMouseMove",dragend:"onMouseUp","canvas:click":"clearStates"}:{dragstart:"onMouseDown",drag:"onMouseMove",dragend:"onMouseUp","canvas:click":"clearStates",keyup:"onKeyUp",keydown:"onKeyDown"}},onMouseDown:function(e){var t=e.item,r=this.brush;t||this.trigger!=="drag"&&!this.keydown||(this.selectedNodes&&this.selectedNodes.length!==0&&this.clearStates(),r||(r=this.createBrush()),this.originPoint={x:e.canvasX,y:e.canvasY},r.attr({width:0,height:0}),r.show(),this.dragging=!0)},onMouseMove:function(e){this.dragging&&(this.trigger!=="drag"&&!this.keydown||this.updateBrush(e))},onMouseUp:function(e){var t=this.graph;!this.brush&&!this.dragging||this.trigger!=="drag"&&!this.keydown||(this.brush.remove(!0),this.brush=null,this.getSelectedNodes(e),this.dragging=!1)},clearStates:function(){var e=this,t=e.graph,r=e.selectedState,n=t.findAllByState("node",r),a=t.findAllByState("edge",r),o=t.findAllByState("combo",r);n.forEach(function(s){return t.setItemState(s,r,!1)}),a.forEach(function(s){return t.setItemState(s,r,!1)}),o.forEach(function(s){return t.setItemState(s,r,!1)}),this.selectedNodes=[],this.selectedEdges=[],this.selectedCombos=[],this.onDeselect&&this.onDeselect(this.selectedNodes,this.selectedEdges,this.selectedCombos),t.emit("nodeselectchange",{selectedItems:{nodes:[],edges:[],combos:[]},select:!1})},isBBoxCenterInRect:function(e,t,r,n,a){var o=e.getBBox();return o.centerX>=t&&o.centerX<=r&&o.centerY>=n&&o.centerY<=a},getSelectedNodes:function(e){var t=this,r=this,n=r.graph,a=r.originPoint,o=r.shouldUpdate,s=r.isBBoxCenterInRect,u=this.selectedState,c={x:e.x,y:e.y},f=n.getPointByCanvas(a.x,a.y),l=Eh(c.x,f.x),_=v0(c.x,f.x),I=Eh(c.y,f.y),B=v0(c.y,f.y),j=[],et=[];n.getNodes().forEach(function(gt){if(gt.isVisible()&&s(gt,l,_,I,B)&&o(gt,"select",t)){j.push(gt);var Mt=gt.getModel();et.push(Mt.id),n.setItemState(gt,u,!0)}});var ut=[];this.includeEdges&&j.forEach(function(gt){var Mt=gt.getOutEdges();Mt.forEach(function(Ht){if(Ht.isVisible()){var se=Ht.getModel(),oe=se.source,_e=se.target;et.includes(oe)&&et.includes(_e)&&o(Ht,"select",t)&&(ut.push(Ht),n.setItemState(Ht,t.selectedState,!0))}})});var ft=[];this.includeCombos&&n.getCombos().forEach(function(gt){if(gt.isVisible()&&s(gt,l,_,I,B)&&o(gt,"select",t)){ft.push(gt);var Mt=gt.getModel();et.push(Mt.id),n.setItemState(gt,u,!0)}}),this.selectedEdges=ut,this.selectedNodes=j,this.selectedCombos=ft,this.onSelect&&this.onSelect(j,ut,ft),n.emit("nodeselectchange",{selectedItems:{nodes:j,edges:ut,combos:ft},select:!0})},createBrush:function(){var e=this,t=e.graph.get("canvas").addShape("rect",{attrs:e.brushStyle,capture:!1,name:"brush-shape"});return this.brush=t,this.delegate=t,t},updateBrush:function(e){var t=this.originPoint;this.brush.attr({width:p0(e.canvasX-t.x),height:p0(e.canvasY-t.y),x:Eh(e.canvasX,t.x),y:Eh(e.canvasY,t.y)})},onKeyDown:function(e){var t=e.key;if(t){var r=this.trigger.toLowerCase(),n=t.toLowerCase();n===r||n==="control"&&r==="ctrl"||n==="ctrl"&&r==="control"?this.keydown=!0:this.keydown=!1}},onKeyUp:function(){this.brush&&(this.brush.remove(!0),this.brush=null,this.dragging=!1),this.keydown=!1}},m0="shift",Ww=["shift","ctrl","alt","control"],Yw={getDefaultCfg:function(){return{multiple:!0,trigger:m0,selectedState:"selected",selectNode:!0,selectEdge:!1,selectCombo:!0}},getEvents:function(){var e=this;return Ww.indexOf(e.trigger.toLowerCase())>-1||(e.trigger=m0,console.warn("Behavior click-select \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'drag'\u3001'shift'\u3001'ctrl' \u6216 'alt'")),e.multiple?{"node:click":"onClick","combo:click":"onClick","edge:click":"onClick","canvas:click":"onCanvasClick",keyup:"onKeyUp",keydown:"onKeyDown"}:{"node:click":"onClick","combo:click":"onClick","edge:click":"onClick","canvas:click":"onCanvasClick"}},onClick:function(e){var t=this,r=e.item;if(!(!r||r.destroyed)){var n=r.getType(),a=t.graph,o=t.keydown,s=t.multiple,u=t.shouldUpdate,c=t.shouldBegin;if(c(e,t)){if(!o||!s){var f=a.findAllByState("node",t.selectedState).concat(a.findAllByState("edge",t.selectedState)).concat(a.findAllByState("combo",t.selectedState));(0,h.each)(f,function(j){j!==r&&a.setItemState(j,t.selectedState,!1)})}var l=function(){switch(n){case"node":return t.selectNode;case"edge":return t.selectEdge;case"combo":return t.selectCombo;default:return!1}}();if(!l){var _=a.findAllByState("node",t.selectedState),I=a.findAllByState("edge",t.selectedState),B=a.findAllByState("combo",t.selectedState);a.emit("nodeselectchange",{selectedItems:{nodes:_,edges:I,combos:B},select:!1});return}if(r.hasState(t.selectedState)){u(e,t)&&a.setItemState(r,t.selectedState,!1);var _=a.findAllByState("node",t.selectedState),I=a.findAllByState("edge",t.selectedState),B=a.findAllByState("combo",t.selectedState);a.emit("nodeselectchange",{target:r,selectedItems:{nodes:_,edges:I,combos:B},select:!1})}else{u(e,t)&&a.setItemState(r,t.selectedState,!0);var _=a.findAllByState("node",t.selectedState),I=a.findAllByState("edge",t.selectedState),B=a.findAllByState("combo",t.selectedState);a.emit("nodeselectchange",{target:r,selectedItems:{nodes:_,edges:I,combos:B},select:!0})}}}},onCanvasClick:function(e){var t=this,r=this,n=r.graph,a=r.shouldBegin;if(a(e,this)){var o=n.findAllByState("node",this.selectedState);(0,h.each)(o,function(c){n.setItemState(c,t.selectedState,!1)});var s=n.findAllByState("edge",this.selectedState);(0,h.each)(s,function(c){n.setItemState(c,t.selectedState,!1)});var u=n.findAllByState("combo",this.selectedState);(0,h.each)(u,function(c){n.setItemState(c,t.selectedState,!1)}),n.emit("nodeselectchange",{selectedItems:{nodes:[],edges:[],combos:[]},select:!1})}},onKeyDown:function(e){var t=this,r=e.key;r&&(r.toLowerCase()===this.trigger.toLowerCase()||r.toLowerCase()==="control"?t.keydown=!0:t.keydown=!1)},onKeyUp:function(){var e=this;e.keydown=!1}},Xw=pt,y0=.05,jw={getDefaultCfg:function(){return{sensitivity:2,minZoom:void 0,maxZoom:void 0,enableOptimize:!1,optimizeZoom:.1,fixSelectedItems:{fixAll:!1,fixLineWidth:!1,fixLabel:!1,fixState:"selected"},animate:!1,animateCfg:{duration:500}}},getEvents:function(){var e=this.fixSelectedItems;return e.fixState||(e.fixState="selected"),e.fixAll&&(e.fixLineWidth=!0,e.fixLabel=!0),{wheel:"onWheel",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onTouchEnd"}},onTouchStart:function(e){var t=e.originalEvent.touches,r=t[0],n=t[1];e.preventDefault(),n&&(this.shouldBegin&&!this.shouldBegin(e,this)||(this.startPoint={pageX:r.pageX,pageY:r.pageY},this.moveable=!0,n&&(this.endPoint={pageX:n.pageX,pageY:n.pageY}),this.originScale=this.graph.getZoom()||this.currentScale||1))},onTouchMove:function(e){if(this.moveable){e.preventDefault();var t=e.originalEvent.touches,r=t[0],n=t[1];if(n){this.endPoint||(this.endPoint={pageX:n.pageX,pageY:n.pageY});var a=function(j,et){return Math.hypot(et.x-j.x,et.y-j.y)},o=a({x:r.pageX,y:r.pageY},{x:n.pageX,y:n.pageY})/a({x:this.startPoint.pageX,y:this.startPoint.pageY},{x:this.endPoint.pageX,y:this.endPoint.pageY}),s=this.originScale*o;this.currentScale=s;var u=this.get("minZoom")||this.graph.get("minZoom"),c=this.get("maxZoom")||this.graph.get("maxZoom");if(!(s>c||s<u)){var f=this.get("animate"),l=this.get("animateCfg"),_=this.graph.get("canvas"),I=_.getPointByClient(e.clientX,e.clientY);this.graph.zoomTo(s,{x:I.x,y:I.y},f,l),this.graph.emit("wheelzoom",e)}}}},onTouchEnd:function(){this.moveable=!1,this.endPoint=null},onWheel:function(e){var t=this,r=this,n=r.graph,a=r.fixSelectedItems;if(!(this.shouldBegin&&!this.shouldBegin(e,this))&&this.shouldUpdate(e,this)){e.preventDefault();var o=n.get("canvas"),s=o.getPointByClient(e.clientX,e.clientY),u=this.get("sensitivity"),c=n.getZoom(),f=c,l=c;e.wheelDelta<0?f=1-y0*u:f=1/(1-y0*u),l=c*f;var _=this.get("minZoom")||n.get("minZoom"),I=this.get("maxZoom")||n.get("maxZoom");l>I?l=I:l<_&&(l=_);var B=this.get("enableOptimize");if(B){var j=this.get("optimizeZoom"),et=this.get("optimized"),ut=n.getNodes(),ft=n.getEdges(),gt=ut.length,Mt=ft.length;if(!et){for(var Ht=0;Ht<gt;Ht++){var se=ut[Ht];if(!se.destroyed)for(var oe=se.get("group").get("children"),_e=oe.length,Ue=0;Ue<_e;Ue++){var Ne=oe[Ue];!Ne.destoryed&&!Ne.get("isKeyShape")&&(Ne.set("ori-visibility",Ne.get("ori-visibility")||Ne.get("visible")),Ne.hide())}}for(var Qe=0;Qe<Mt;Qe++)for(var dr=ft[Qe],oe=dr.get("group").get("children"),_e=oe.length,Ue=0;Ue<_e;Ue++){var Ne=oe[Ue];Ne.set("ori-visibility",Ne.get("ori-visibility")||Ne.get("visible")),Ne.hide()}this.set("optimized",!0)}clearTimeout(this.get("timeout"));var nn=setTimeout(function(){var mi=n.getZoom(),Zi=t.get("optimized");if(Zi){t.set("optimized",!1);for(var pi=0;pi<gt;pi++){var Ki=ut[pi],To=Ki.get("group").get("children"),Ia=To.length;if(mi<j){var wi=Ki.getKeyShape(),Ti=wi.get("ori-visibility");wi.set("ori-visibility",void 0),Ti&&wi.show()}else for(var Ao=0;Ao<Ia;Ao++){var Oi=To[Ao],Ti=Oi.get("ori-visibility");Oi.set("ori-visibility",void 0),!Oi.get("visible")&&Ti&&Ti&&Oi.show()}}for(var Ui=0;Ui<Mt;Ui++){var Jo=ft[Ui],To=Jo.get("group").get("children"),Ia=To.length;if(mi<j){var wi=Jo.getKeyShape(),Ti=wi.get("ori-visibility");wi.set("ori-visibility",void 0),Ti&&wi.show()}else for(var Ao=0;Ao<Ia;Ao++){var Oi=To[Ao];if(!Oi.get("visible")){var Ti=Oi.get("ori-visibility");Oi.set("ori-visibility",void 0),Ti&&Oi.show()}}}}},100);this.set("timeout",nn)}if(c<=1){var kn=void 0,En=void 0;if(a.fixAll||a.fixLineWidth||a.fixLabel){kn=n.findAllByState("node",a.fixState),En=n.findAllByState("edge",a.fixState);for(var Kr=c/l,Jn=kn.length,Kn=0;Kn<Jn;Kn++){var se=kn[Kn],$r=se.getContainer(),xn=se.getModel(),zn=se.getOriginStyle(),Gn=se.getStateStyle(a.fixState),ia=se.get("shapeFactory").getShape(xn.type).getStateStyle(a.fixState,se)[a.fixState];if(a.fixAll){if(l<=1){var ha=(0,h.clone)($r.getMatrix());ha||(ha=[1,0,0,0,1,0,0,0,1]);var Xa=se.getModel(),si=Xa.x,to=Xa.y;ha=Xw(ha,[["t",-si,-to],["s",Kr,Kr],["t",si,to]]),$r.setMatrix(ha)}}else for(var oe=$r.get("children"),_e=oe.length,Ue=0;Ue<_e;Ue++){var Ne=oe[Ue],Pi=void 0,eo=void 0;if(a.fixLabel){var po=Ne.get("type");if(po==="text"){Pi=Ne.attr("fontSize")||12;var Vo=Gn[Ne.get("name")],Ro=ia[Ne.get("name")],Uu=Vo?Vo.fontSize:12,Ss=Ro?Ro.fontSize:12,Wu=Uu||Ss||12;if(l<=1&&Ne.attr("fontSize",Wu/l),eo)break}}if(a.fixLineWidth&&Ne.get("isKeyShape")){eo=Ne.attr("lineWidth")||0;var Ms=Gn.lineWidth||ia.lineWidth||zn.lineWidth||0;if(l<=1&&Ne.attr("lineWidth",Ms/l),Pi)break}}}for(var _s=En.length,wu=0;wu<_s;wu++)for(var dr=En[wu],$r=dr.getContainer(),oe=$r.get("children"),xn=dr.getModel(),Gn=dr.getStateStyle(a.fixState),ia=dr.get("shapeFactory").getShape(xn.type).getStateStyle(a.fixState,dr)[a.fixState],_e=oe.length,Ue=0;Ue<_e;Ue++){var Ne=oe[Ue],Pi=void 0,eo=void 0;if(a.fixLabel||a.fixAll){var po=Ne.get("type");if(po==="text"){Pi=Ne.attr("fontSize")||12;var Vo=Gn[Ne.get("name")],Ro=ia[Ne.get("name")],Uu=Vo?Vo.fontSize:12,Ss=Ro?Ro.fontSize:12,Wu=Uu||Ss||12;if(l<=1&&Ne.attr("fontSize",Wu/l),eo)break}}if((a.fixLineWidth||a.fixAll)&&Ne.get("isKeyShape")){eo=Ne.attr("lineWidth")||0;var Ms=Gn.lineWidth||ia.lineWidth||1;if(l<=1&&Ne.attr("lineWidth",Ms/l),Pi)break}}}}var js=this.get("animate"),eu=this.get("animateCfg");n.zoomTo(l,{x:s.x,y:s.y},js,eu),n.emit("wheelzoom",e)}}},x0={onMouseEnter:function(e){var t=e.item;this.currentTarget=t,this.showTooltip(e),this.graph.emit("tooltipchange",{item:e.item,action:"show"})},onMouseMove:function(e){if(!this.shouldUpdate(e,this)){this.hideTooltip();return}!this.currentTarget||e.item!==this.currentTarget||this.updatePosition(e)},onMouseLeave:function(e){this.shouldEnd(e,this)&&(this.hideTooltip(),this.graph.emit("tooltipchange",{item:this.currentTarget,action:"hide"}),this.currentTarget=null)},showTooltip:function(e){var t=this.container;if(!(!e.item||e.item.destroyed)){t||(t=this.createTooltip(this.graph.get("canvas")),this.container=t);var r=this.formatText(e.item.get("model"),e);t.innerHTML=r,gi(this.container,{visibility:"visible"}),this.updatePosition(e)}},hideTooltip:function(){gi(this.container,{visibility:"hidden"})},updatePosition:function(e){var t=this.get("shouldBegin"),r=this,n=r.width,a=r.height,o=r.container,s=r.graph;if(!t(e,this)){gi(o,{visibility:"hidden"});return}var u=s.getPointByClient(e.clientX,e.clientY),c=s.getCanvasByPoint(u.x,u.y),f=c.x,l=c.y,_=o.getBoundingClientRect();f>n/2?f-=_.width:f+=this.offset,l>a/2?l-=_.height:l+=this.offset;var I="".concat(f,"px"),B="".concat(l,"px");gi(this.container,{left:I,top:B,visibility:"visible"})},createTooltip:function(e){var t=e.get("el");t.style.position="relative";var r=Ko('<div class="g6-tooltip g6-'.concat(this.item,'-tooltip"></div>'));return t.parentNode.appendChild(r),gi(r,{position:"absolute",visibility:"visible"}),this.width=e.get("width"),this.height=e.get("height"),this.container=r,this.graph.get("tooltips").push(r),r}},Vw=(0,y.__assign)({getDefaultCfg:function(){return{item:"node",offset:12,formatText:function(t){return t.label}}},getEvents:function(){return{"node:mouseenter":"onMouseEnter","node:mouseleave":"onMouseLeave","node:mousemove":"onMouseMove",afterremoveitem:"onMouseLeave"}}},x0),Hw=(0,y.__assign)({getDefaultCfg:function(){return{item:"edge",offset:12,formatText:function(t){return"source: ".concat(t.source," target: ").concat(t.target)}}},getEvents:function(){return{"edge:mouseenter":"onMouseEnter","edge:mouseleave":"onMouseLeave","edge:mousemove":"onMouseMove",afterremoveitem:"onMouseLeave"}}},x0),b0="click",Zw=["click","dblclick"],Kw={getDefaultCfg:function(){return{trigger:b0,onChange:function(){}}},getEvents:function(){var e,t;return Zw.includes(this.trigger)?t=this.trigger:(t=b0,console.warn("Behavior collapse-expand \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'click' \u6216 'dblclick'")),e={},e["node:".concat(t)]="onNodeClick",e.touchstart="onNodeClick",e},onNodeClick:function(e){var t=this;if(this.trigger==="click"){if(this.timer){clearTimeout(this.timer),this.timer=0;return}this.timer=setTimeout(function(){t.toggle(e),clearTimeout(t.timer),t.timer=0},200)}else this.toggle(e)},toggle:function(e){var t=e.item;if(t){var r=this.graph.findDataById(t.get("id"));if(r){var n=r.children;if(!(!n||n.length===0)){var a=!r.collapsed;this.shouldBegin(e,a,this)&&(r.collapsed=a,t.getModel().collapsed=a,this.graph.emit("itemcollapsed",{item:e.item,collapsed:a}),this.shouldUpdate(e,a,this)&&(this.onChange(t,a,this),this.graph.layout()))}}}}},$w=lf.calculationItemsBBox,qw=function i(e,t){if(t(e)!==!1&&e){var r=e.get("combos");if(r.length===0)return!1;(0,h.each)(r,function(n){i(n,t)})}},Qw={getDefaultCfg:function(){return{enableDelegate:!1,delegateStyle:{},onlyChangeComboSize:!1,activeState:"",selectedState:"selected",enableStack:!0}},getEvents:function(){return{"combo:mousedown":"onMouseDown","combo:dragstart":"onDragStart","combo:drag":"onDrag","combo:dragend":"onDragEnd","combo:drop":"onDrop","node:drop":"onNodeDrop","combo:dragenter":"onDragEnter","combo:dragleave":"onDragLeave"}},validationCombo:function(e){var t=e.item;if(!t||t.destroyed||!this.shouldUpdate(e,this))return!1;var r=t.getType();return r==="combo"},onMouseDown:function(e){this.origin={x:e.x,y:e.y}},onDragStart:function(e){var t=this,r=this.graph,n=e.item;if(this.currentShouldEnd=!0,!!this.validationCombo(e)){this.targets=[];var a=r.findAllByState("combo",this.selectedState),o=n.get("id"),s=a.filter(function(c){var f=c.get("id");return o===f});s.length===0?this.targets.push(n):this.targets=a;var u=[];this.targets.forEach(function(c){var f=c.getModel(),l=f.x,_=f.y,I=f.id;u.push({x:l,y:_,id:I})}),this.set("beforeDragItems",u),this.activeState&&this.targets.map(function(c){var f=c.getModel();if(f.parentId){var l=r.findById(f.parentId);l&&r.setItemState(l,t.activeState,!0)}}),this.point={},this.originPoint={},this.currentItemChildCombos=[],qw(n,function(c){if(c.destroyed)return!1;var f=c.getModel();return t.currentItemChildCombos.push(f.id),!0})}},onDrag:function(e){var t=this;if(this.origin&&this.validationCombo(e))if(this.enableDelegate)this.updateDelegate(e);else{if(this.activeState){var r=this.graph,n=e.item,a=n.getModel(),o=r.getCombos(),s=n.getBBox(),u=s.centerX,c=s.centerY,f=s.width,l=o.filter(function(_){var I=_.getModel();return a.parentId,I.id!==a.id&&!t.currentItemChildCombos.includes(I.id)});l.map(function(_){var I=_.getBBox(),B=I.centerX,j=I.centerY,et=I.width,ut=u-B,ft=c-j,gt=2*Math.sqrt(ut*ut+ft*ft);f+et-gt>.8*f?r.setItemState(_,t.activeState,!0):r.setItemState(_,t.activeState,!1)})}(0,h.each)(this.targets,function(_){t.updateCombo(_,e)}),this.onlyChangeComboSize&&this.updateParentCombos()}},updatePositions:function(e,t){var r=this;(this.enableDelegate||t)&&(0,h.each)(this.targets,function(n){r.updateCombo(n,e,t)})},onDrop:function(e){var t=this,r=e.item;if(this.currentShouldEnd=this.shouldEnd(e,r,this),this.updatePositions(e,!this.currentShouldEnd),!(!this.currentShouldEnd||!r||!this.targets||r.destroyed)){var n=this.graph,a=r.getModel();this.targets.map(function(o){var s=o.getModel();s.parentId!==a.id?(t.activeState&&n.setItemState(r,t.activeState,!1),t.onlyChangeComboSize?n.updateCombo(o):n.updateComboTree(o,a.id,!1)):n.updateCombo(r)}),this.end(r,e),this.endComparison=!0}},onNodeDrop:function(e){var t=this;if(!(!this.targets||this.targets.length===0)){var r=this.graph,n=e.item,a=n.getModel().comboId,o=a?r.findById(a):void 0;if(this.currentShouldEnd=this.shouldEnd(e,o,this),this.updatePositions(e,!this.currentShouldEnd),!!this.currentShouldEnd){var s;if(a){if(this.activeState){var u=r.findById(a);r.setItemState(u,this.activeState,!1)}this.targets.map(function(c){t.onlyChangeComboSize?r.updateCombo(c):a!==c.getID()&&(s=r.findById(a),a!==c.getModel().parentId&&r.updateComboTree(c,a,!1))})}else this.targets.map(function(c){if(t.onlyChangeComboSize)r.updateCombo(c);else{var f=c.getModel();f.comboId&&r.updateComboTree(c,void 0,!1)}});this.endComparison=!0,this.end(s,e)}}},onDragEnter:function(e){if(this.origin&&this.validationCombo(e)){var t=e.item,r=this.graph;this.activeState&&r.setItemState(t,this.activeState,!0)}},onDragLeave:function(e){if(this.origin&&this.validationCombo(e)){var t=e.item,r=this.graph;this.activeState&&r.setItemState(t,this.activeState,!1)}},onDragEnd:function(e){if(!(!this.targets||this.targets.length===0)){var t=e.item;this.currentShouldEnd&&this.updatePositions(e);var r=this.getParentCombo(t.getModel().parentId),n=this.graph;r&&this.activeState&&n.setItemState(r,this.activeState,!1),this.end(void 0,e)}},end:function(e,t){var r=this;if(this.origin){var n=this.graph;if(this.delegateShape){var a=n.get("delegateGroup");a.clear(),this.delegateShape=null}if(e&&this.activeState&&n.setItemState(e,this.activeState,!1),!e){var o=n.get("enabledStack")&&this.enableStack,s={before:{nodes:[],edges:[],combos:[].concat(this.get("beforeDragItems"))},after:{nodes:[],edges:[],combos:[]}};this.targets.map(function(u){if(!r.onlyChangeComboSize)n.updateComboTree(u,void 0,o);else{n.updateCombo(u);var c=u.getModel(),f=c.x,l=c.y,_=c.id;s.after.combos.push({x:f,y:l,id:_}),n.pushStack("update",s)}})}this.point=[],this.origin=null,this.originPoint=null,this.targets.length=0}},traverse:function(e,t,r){var n=this;if(r===void 0&&(r={}),t(e,r)!==!1&&e){var a=e.get("combos");(0,h.each)(a,function(s){n.traverse(s,t,r)});var o=e.get("nodes");(0,h.each)(o,function(s){n.traverse(s,t,r)})}},updateCombo:function(e,t,r){this.updateSingleItem(e,t,r);var n={};this.traverse(e,function(a,o){return a.destroyed?!1:(a.getEdges().forEach(function(s){return o[s.getID()]=s}),!0)},n),Object.values(n).forEach(function(a){return a.refresh()})},updateSingleItem:function(e,t,r){var n=this.origin,a=this.graph,o=e.getModel(),s=e.get("id");this.point[s]||(this.point[s]={x:o.x,y:o.y});var u=t.x-n.x+this.point[s].x,c=t.y-n.y+this.point[s].y;r&&(u+=n.x-t.x,c+=n.y-t.y),a.updateItem(e,{x:u,y:c},!1)},getParentCombo:function(e){var t=this.graph;if(e){var r=t.findById(e);if(r)return r}},updateDelegate:function(e){var t=this.graph;if(this.delegateShape){var _=e.x-this.origin.x+this.originPoint.minX,I=e.y-this.origin.y+this.originPoint.minY;this.delegateShape.attr({x:_,y:I})}else{var r=t.get("delegateGroup"),n=null;this.targets.length>1?n=$w(this.targets):n=this.targets[0].getBBox();var a=n.x,o=n.y,s=n.width,u=n.height,c=n.minX,f=n.minY;this.originPoint={x:a,y:o,width:s,height:u,minX:c,minY:f};var l=(0,y.__assign)((0,y.__assign)({},_l.delegateStyle),this.delegateStyle);this.delegateShape=r.addShape("rect",{attrs:(0,y.__assign)({width:n.width,height:n.height,x:n.x,y:n.y},l),name:"combo-delegate-shape"}),this.delegateShape.set("capture",!1),this.delegate=this.delegateShape}},updateParentCombos:function(){var e=this,t=e.graph,r=e.targets,n={};r==null||r.forEach(function(a){var o=a.getModel().parentId;o&&(n[o]=t.findById(o))}),Object.values(n).forEach(function(a){a&&t.updateCombo(a)})}},E0="dblclick",Jw=["click","dblclick"],tS={getDefaultCfg:function(){return{trigger:E0,relayout:!0}},getEvents:function(){var e,t;return Jw.includes(this.trigger)?t=this.trigger:(t=E0,console.warn("Behavior collapse-expand-group \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'click' \u6216 'dblclick'")),e={},e["combo:".concat(t)]="onComboClick",e},onComboClick:function(e){var t=e.item,r=this,n=r.graph,a=r.relayout;if(!(!t||t.destroyed||t.getType()!=="combo")){var o=t.getModel(),s=o.id;s&&(n.collapseExpandCombo(s),a&&n.get("layout")?n.layout():n.refreshPositions())}}},eS=lf.isPolygonsIntersect,rS=lf.pathToPoints,w0="shift",nS=["drag","shift","ctrl","alt","control"],aS=function(e,t){var r,n=e.getKeyShape();if(e.get("type")==="path")r=rS(n.attr("path"));else{var a=n.getCanvasBBox();r=[[a.minX,a.minY],[a.maxX,a.minY],[a.maxX,a.maxY],[a.minX,a.maxY]]}return eS(t,r)},iS={getDefaultCfg:function(){return{delegateStyle:{fill:"#EEF6FF",fillOpacity:.4,stroke:"#DDEEFE",lineWidth:1},onSelect:function(){},onDeselect:function(){},shouldDeselect:void 0,selectedState:"selected",trigger:w0,includeEdges:!0,selectedEdges:[],selectedNodes:[]}},getEvents:function(){return nS.indexOf(this.trigger.toLowerCase())>-1||(this.trigger=w0,console.warn("Behavior lasso-select \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'drag'\u3001'shift'\u3001'ctrl' \u6216 'alt'")),this.trigger==="drag"?{dragstart:"onDragStart",drag:"onDragMove",dragend:"onDragEnd","canvas:click":"clearStates"}:{dragstart:"onDragStart",drag:"onDragMove",dragend:"onDragEnd",keyup:"onKeyUp",keydown:"onKeyDown","canvas:click":"clearStates"}},onDragStart:function(e){var t=this.lasso,r=e.item;r||this.trigger!=="drag"&&!this.keydown||(this.selectedNodes&&this.selectedNodes.length!==0&&this.clearStates("dragstart"),t||(t=this.createLasso()),this.dragging=!0,this.originPoint={x:e.x,y:e.y},this.points.push(this.originPoint),t.show())},onDragMove:function(e){this.dragging&&(this.trigger!=="drag"&&!this.keydown||(this.points.push({x:e.x,y:e.y}),this.updateLasso(e)))},onDragEnd:function(e){!this.lasso&&!this.dragging||this.trigger!=="drag"&&!this.keydown||(this.points.push(this.originPoint),this.getSelectedItems(),this.lasso.remove(!0),this.lasso=null,this.points=[],this.dragging=!1)},getLassoPath:function(){var e=this.points,t=[];return e.length&&(e.forEach(function(r,n){n===0?t.push(["M",r.x,r.y]):t.push(["L",r.x,r.y])}),t.push(["L",e[0].x,e[0].y])),t},clearStates:function(e){e===void 0&&(e="canvas:click");var t=this,r=t.graph,n=t.selectedState,a=t.shouldDeselect,o=r.findAllByState("node",n),s=r.findAllByState("edge",n);(!a||a({action:e,nodes:o,edges:s}))&&(o.forEach(function(u){return r.setItemState(u,n,!1)}),s.forEach(function(u){return r.setItemState(u,n,!1)})),this.onDeselect&&this.onDeselect(this.selectedNodes,this.selectedEdges),this.selectedNodes=[],this.selectedEdges=[],r.emit("nodeselectchange",{selectedItems:{nodes:[],edges:[]},select:!1})},getSelectedItems:function(){var e=this,t=this,r=t.graph,n=t.shouldUpdate,a=this.points.map(function(f){return[r.getCanvasByPoint(f.x,f.y).x,r.getCanvasByPoint(f.x,f.y).y]}),o=this.selectedState,s=[],u=[];r.getNodes().forEach(function(f){if(f.isVisible()&&aS(f,a)&&n(f,"select",e)){s.push(f);var l=f.getModel();u.push(l.id),r.setItemState(f,o,!0)}});var c=[];this.includeEdges&&s.forEach(function(f){var l=f.getOutEdges();l.forEach(function(_){if(_.isVisible()){var I=_.getModel(),B=I.source,j=I.target;u.includes(B)&&u.includes(j)&&n(_,"select",e)&&(c.push(_),r.setItemState(_,e.selectedState,!0))}})}),this.selectedEdges=c,this.selectedNodes=s,this.onSelect&&this.onSelect(s,c),r.emit("nodeselectchange",{selectedItems:{nodes:s,edges:c},select:!0})},createLasso:function(){var e=this,t=e.graph.get("delegateGroup").addShape("path",{attrs:(0,y.__assign)({path:[]},e.delegateStyle),capture:!1,name:"lasso-shape"});return this.lasso=t,this.delegate=t,this.points=[],t},updateLasso:function(e){var t=this;this.lasso.attr({path:t.getLassoPath()})},onKeyDown:function(e){var t=e.key;t&&(t.toLowerCase()===this.trigger.toLowerCase()?this.keydown=!0:this.keydown=!1)},onKeyUp:function(){this.lasso&&(this.lasso.remove(!0),this.lasso=null,this.points=[],this.dragging=!1),this.keydown=!1}},S0="click",oS=["click","drag"],M0=void 0,sS=["shift","ctrl","control","alt","meta",void 0],uS={getDefaultCfg:function(){return{trigger:S0,key:M0,edgeConfig:{},getEdgeConfig:void 0}},getEvents:function(){var e=this;oS.indexOf(e.trigger.toLowerCase())>-1||(e.trigger=S0,console.warn("Behavior create-edge \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'click'\uFF0C'drag'")),e.key&&sS.indexOf(e.key.toLowerCase())===-1&&(e.trigger=M0,console.warn("Behavior create-edge \u7684 key \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'shift'\uFF0C'ctrl'\uFF0C'alt'\uFF0C'control'\uFF0C\u6216 undefined"));var t;return e.trigger==="drag"?t={"node:dragstart":"onClick","combo:dragstart":"onClick",drag:"updateEndPoint","node:drop":"onClick","combo:drop":"onClick",dragend:"onDragEnd"}:e.trigger==="click"&&(t={"node:click":"onClick",mousemove:"updateEndPoint","edge:click":"cancelCreating","canvas:click":"cancelCreating","combo:click":"onClick"}),e.key&&(t.keydown="onKeyDown",t.keyup="onKeyUp"),t},onDragEnd:function(e){var t=this;if(!(t.key&&!t.keydown)){var r=e.item;(!r||r.getID()===t.source||r.getType()!=="node")&&t.cancelCreating({item:t.edge,x:e.x,y:e.y})}},onClick:function(e){var t=this;if(!(t.key&&!t.keydown)){var r=e.item,n=t.graph,a=r.getModel(),o=t.getEdgeConfig;if(t.addingEdge&&t.edge){if(!t.shouldEnd(e,t))return;var s=void 0;o&&(0,h.isFunction)(o)?s=o({source:t.source,target:a.id},t):s=t.edgeConfig;var u=(0,y.__assign)({target:a.id},s);if(t.source===a.id&&(u.type="loop"),n.emit("beforecreateedge",{}),n.updateItem(t.edge,u,!1),n.get("enabledStack")){var c=(0,y.__assign)((0,y.__assign)({},t.edge.getModel()),{itemType:"edge"}),f={};f.edges=[c],n.pushStack("add",{before:{},after:f})}n.emit("aftercreateedge",{edge:t.edge}),t.edge.getKeyShape().set("capture",!0),t.edge=null,t.addingEdge=!1}else{if(!t.shouldBegin(e,t))return;var s=void 0;o&&(0,h.isFunction)(o)?s=o({source:a.id,target:a.id},t):s=t.edgeConfig,t.edge=n.addItem("edge",(0,y.__assign)({source:a.id,target:a.id},s),!1),t.source=a.id,t.addingEdge=!0,t.edge.getKeyShape().set("capture",!1)}}},updateEndPoint:function(e){var t=this;if(!(t.key&&!t.keydown)){t.edge&&t.edge.destroyed&&t.cancelCreating({item:t.edge});var r={x:e.x,y:e.y};if(!t.graph.findById(t.source)){t.addingEdge=!1;return}t.addingEdge&&t.edge&&t.graph.updateItem(t.edge,{target:r},!1)}},cancelCreating:function(e){var t,r,n=this;if(!(n.key&&!n.keydown)){var a=n.graph,o=e.item;if(n.addingEdge&&(n.edge===o||!((r=(t=e.target)===null||t===void 0?void 0:t.isCanvas)===null||r===void 0)&&r.call(t))){n.edge&&!n.edge.destroyed&&a.removeItem(n.edge,!1),n.edge=null,n.addingEdge=!1;return}}},onKeyDown:function(e){var t=this,r=e.key;r&&(r.toLowerCase()===t.key.toLowerCase()?t.keydown=!0:t.keydown=!1)},onKeyUp:function(){var e=this;e.addingEdge&&e.edge&&(e.graph.removeItem(e.edge,!1),e.addingEdge=!1,e.edge=null),this.keydown=!1}},_0="ctrl",cS=["shift","ctrl","alt","control"],fS="1",lS={getDefaultCfg:function(){return{trigger:_0,combinedKey:fS,functionName:"fitView",functionParams:[]}},getEvents:function(){return cS.indexOf(this.trigger.toLowerCase())>-1||(this.trigger=_0,console.warn("Behavior shortcuts-fit-view \u7684 trigger \u53C2\u6570 '".concat(this.trigger,"' \u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'drag'\u3001'shift'\u3001'ctrl' \u6216 'alt'"))),this.combinedKey===this.trigger&&(this.combinedKey=void 0),{keyup:"onKeyUp",keydown:"onKeyDown"}},onKeyDown:function(e){var t=e.key;if(t){var r=this.trigger.toLowerCase(),n=t.toLowerCase();this.triggerKeydown||(n===r||n==="control"&&r==="ctrl"||n==="ctrl"&&r==="control"?this.triggerKeydown=!0:this.triggerKeydown=!1);var a=this.graph;if(!a[this.functionName])return console.warn("Behavior shortcuts-fit-view \u7684 functionName \u53C2\u6570 '".concat(this.functionName,"' \u4E0D\u5408\u6CD5\uFF0C\u5B83\u4E0D\u662F Graph \u7684\u4E00\u4E2A\u51FD\u6570\u540D")),{};if(this.triggerKeydown&&!this.combinedKey){this.functionParams&&this.functionParams.length?a[this.functionName].apply(a,this.functionParams):a[this.functionName]();return}var o=this.combinedKey.toLowerCase();this.triggerKeydown&&(n===o||n==="control"&&o==="ctrl"||n==="ctrl"&&o==="control")&&(this.functionParams&&this.functionParams.length?a[this.functionName].apply(a,this.functionParams):a[this.functionName]())}},onKeyUp:function(){this.brush&&(this.brush.remove(!0),this.brush=null,this.dragging=!1),this.triggerKeydown=!1}},dS=["shift","ctrl","alt","control","meta"],hS={getDefaultCfg:function(){return{direction:"both",enableOptimize:!1,zoomKey:"ctrl",scalableRange:0,allowDragOnItem:!0}},getEvents:function(){return(!this.zoomKey||dS.indexOf(this.zoomKey)===-1)&&(this.zoomKey="ctrl"),{wheel:"onWheel"}},onWheel:function(e){var t=this;if(this.allowDrag(e)){var r=this.graph,n=Array.isArray(this.zoomKey)?[].concat(this.zoomKey):[this.zoomKey];n.includes("control")&&n.push("ctrl");var a=n.some(function(xn){return e["".concat(xn,"Key")]});if(a){var o=r.get("canvas"),s=o.getPointByClient(e.clientX,e.clientY),u=r.getZoom();e.wheelDelta>0?u=u+u*.05:u=u-u*.05,r.zoomTo(u,{x:s.x,y:s.y})}else{var c=e.deltaX||e.movementX,f=e.deltaY||e.movementY;!f&&navigator.userAgent.indexOf("Firefox")>-1&&(f=-e.wheelDelta*125/3);var l=this.graph.get("width"),_=this.graph.get("height"),I=this.graph.get("canvas").getCanvasBBox(),B=this.scalableRange,j=this.scalableRange;B<1&&B>-1&&(B=l*B,j=_*j);var et=I.minX,ut=I.maxX,ft=I.minY,gt=I.maxY;c>0?ut<-B?c=0:ut-c<-B&&(c=ut+B):c<0&&(et>l+B?c=0:et-c>l+B&&(c=et-(l+B))),f>0?gt<-j?f=0:gt-f<-j&&(f=gt+j):f<0&&(ft>_+j?f=0:ft-f>_+j&&(f=ft-(_+j))),this.get("direction")==="x"?f=0:this.get("direction")==="y"&&(c=0),r.translate(-c,-f)}e.preventDefault();var Mt=this.get("enableOptimize");if(Mt){var Ht=this.get("optimizeZoom"),se=this.get("optimized"),oe=r.getNodes(),_e=r.getEdges(),Ue=oe.length,Ne=_e.length;if(!se){for(var Qe=0;Qe<Ue;Qe++){var dr=oe[Qe];if(!dr.destroyed)for(var nn=dr.get("group").get("children"),kn=nn.length,En=0;En<kn;En++){var Kr=nn[En];!Kr.destoryed&&!Kr.get("isKeyShape")&&(Kr.set("ori-visibility",Kr.get("ori-visibility")||Kr.get("visible")),Kr.hide())}}for(var Jn=0;Jn<Ne;Jn++)for(var Kn=_e[Jn],nn=Kn.get("group").get("children"),kn=nn.length,En=0;En<kn;En++){var Kr=nn[En];Kr.set("ori-visibility",Kr.get("ori-visibility")||Kr.get("visible")),Kr.hide()}this.set("optimized",!0)}clearTimeout(this.get("timeout"));var $r=setTimeout(function(){var xn=r.getZoom(),zn=t.get("optimized");if(zn){t.set("optimized",!1);for(var Gn=0;Gn<Ue;Gn++){var ia=oe[Gn],ha=ia.get("group").get("children"),Xa=ha.length;if(xn<Ht){var si=ia.getKeyShape(),to=si.get("ori-visibility");to&&si.show()}else for(var Pi=0;Pi<Xa;Pi++){var eo=ha[Pi],to=eo.get("ori-visibility");!eo.get("visible")&&to&&to&&eo.show()}}for(var po=0;po<Ne;po++){var Vo=_e[po],ha=Vo.get("group").get("children"),Xa=ha.length;if(xn<Ht){var si=Vo.getKeyShape(),to=si.get("ori-visibility");to&&si.show()}else for(var Pi=0;Pi<Xa;Pi++){var eo=ha[Pi];if(!eo.get("visible")){var to=eo.get("ori-visibility");to&&eo.show()}}}}},100);this.set("timeout",$r)}}},allowDrag:function(e){var t,r,n=e.target,a=n&&n.isCanvas&&n.isCanvas();if((0,h.isBoolean)(this.allowDragOnItem)&&!this.allowDragOnItem&&!a)return!1;if((0,h.isObject)(this.allowDragOnItem)){var o=this.allowDragOnItem,s=o.node,u=o.edge,c=o.combo,f=(r=(t=e.item)===null||t===void 0?void 0:t.getType)===null||r===void 0?void 0:r.call(t);if(!s&&f==="node"||!u&&f==="edge"||!c&&f==="combo")return!1}return!0}},vS={"drag-canvas":Bw,"zoom-canvas":jw,"drag-node":Fw,"activate-relations":zw,"brush-select":Uw,"click-select":Yw,"lasso-select":iS,tooltip:Vw,"edge-tooltip":Hw,"collapse-expand":Kw,"drag-combo":Qw,"collapse-expand-combo":tS,"create-edge":uS,"shortcuts-call":lS,"scroll-canvas":hS};(0,h.each)(vS,function(i,e){lp(e,i)});var pS=(0,y.__assign)((0,y.__assign)({},b),Pm),oM=ws.Grid,sM=ws.Minimap,uM=ws.Bundling,cM=ws.Menu,gS=ws.Fisheye,fM=ws.ToolBar,lM=ws.Tooltip,mS=ws.TimeBar,yS=ws.ImageMinimap,xS=ws.EdgeFilterLens,bS=ws.SnapLine,dM=ws.Legend,ES=ws.Annotation,C0={version:_l.version,Graph:ng,TreeGraph:px,Util:lf,Layout:Ci.Layouts,TreeLayout:$1,registerLayout:q1,Global:_l,registerBehavior:lp,registerCombo:Lm,registerEdge:fp,registerNode:cf,Minimap:ws.Minimap,Grid:ws.Grid,Bundling:ws.Bundling,Menu:ws.Menu,ToolBar:ws.ToolBar,Tooltip:ws.Tooltip,Legend:ws.Legend,TimeBar:mS,SnapLine:bS,Fisheye:gS,ImageMinimap:yS,EdgeFilterLens:xS,Annotation:ES,Algorithm:pS,Arrow:ip,Marker:op,Shape:qf};C0.version="4.8.15";var wS=C0,hM="4.8.15"},199905:function(Ve,z,C){"use strict";C.r(z),C.d(z,{Graph:function(){return H},GraphWithEvent:function(){return _t},algorithm:function(){return b},comparision:function(){return w},essence:function(){return k},generate:function(){return T}});var b={};C.r(b),C.d(b,{components:function(){return ue},dfs:function(){return ne},dijkstra:function(){return Mr},dijkstraAll:function(){return Ir},findCycles:function(){return Ln},floydWarshall:function(){return Ut},isAcyclic:function(){return Ze},postorder:function(){return Jt},preorder:function(){return Ce},prim:function(){return Nt},tarjan:function(){return dn},topsort:function(){return jn}});var k={};C.r(k),C.d(k,{hasSelfLoop:function(){return lr},isGraph:function(){return Lr},isNullGraph:function(){return $e},isSimpleGraph:function(){return cn}});var w={};C.r(w),C.d(w,{containAllSameEdges:function(){return mt},containAllSameNodes:function(){return X},containSameEdges:function(){return it},containSameNodes:function(){return J},getSameEdges:function(){return M},getSameNodes:function(){return R},isGraphComplement:function(){return Pr},isGraphContainsAnother:function(){return Bt},isGraphOptionSame:function(){return O},isGraphSame:function(){return Ft}});var T={};C.r(T),C.d(T,{getGraphComplement:function(){return Dr}});var L;(function(fe){fe.DEFAULT_EDGE_NAME="\0",fe.GRAPH_NODE="\0",fe.EDGE_KEY_DELIM=""})(L||(L={}));function P(fe,jt){var ve=fe.get(jt)||0;fe.set(jt,ve+1)}function p(fe,jt){var ve=fe.get(jt);ve!==void 0&&(ve=ve-1,ve>0?fe.set(jt,ve):fe.delete(jt))}function m(fe,jt,ve,Ie){var ye=String(jt),ze=String(ve);if(!fe&&ye>ze){var sr=ye;ye=ze,ze=sr}return ye+L.EDGE_KEY_DELIM+ze+L.EDGE_KEY_DELIM+(Ie===void 0?L.DEFAULT_EDGE_NAME:Ie)}function S(fe,jt,ve,Ie){var ye=String(jt),ze=String(ve),sr={v:jt,w:ve};if(!fe&&ye>ze){var pr=sr.v;sr.v=sr.w,sr.w=pr}return Ie!==void 0&&(sr.name=Ie),sr}function x(fe,jt){return m(fe,jt.v,jt.w,jt.name)}function g(fe){return typeof fe=="function"}var A=function(jt){return jt.nodes().map(function(ve){var Ie=jt.node(ve),ye=jt.parent(ve),ze={id:ve,value:Ie,parent:ye};return ze.value===void 0&&delete ze.value,ze.parent===void 0&&delete ze.parent,ze})},E=function(jt){return jt.edges().map(function(ve){var Ie=jt.edge(ve),ye={v:ve.v,w:ve.w,value:Ie,name:ve.name};return ye.name===void 0&&delete ye.name,ye.value===void 0&&delete ye.value,ye})},D=function(jt){var ve={options:{directed:jt.isDirected(),multigraph:jt.isMultigraph(),compound:jt.isCompound()},nodes:A(jt),edges:E(jt),value:jt.graph()};return ve.value===void 0&&delete ve.value,ve},F=function(jt){var ve=new H(jt.options);return jt.value!==void 0&&ve.setGraph(jt.value),jt.nodes.forEach(function(Ie){ve.setNode(Ie.id,Ie.value),Ie.parent&&ve.setParent(Ie.id,Ie.parent)}),jt.edges.forEach(function(Ie){ve.setEdge(Ie.v,Ie.w,Ie.value,Ie.name)}),ve};function y(fe,jt){var ve=Object.keys(fe);if(Object.getOwnPropertySymbols){var Ie=Object.getOwnPropertySymbols(fe);jt&&(Ie=Ie.filter(function(ye){return Object.getOwnPropertyDescriptor(fe,ye).enumerable})),ve.push.apply(ve,Ie)}return ve}function h(fe){for(var jt=1;jt<arguments.length;jt++){var ve=arguments[jt]!=null?arguments[jt]:{};jt%2?y(Object(ve),!0).forEach(function(Ie){Y(fe,Ie,ve[Ie])}):Object.getOwnPropertyDescriptors?Object.defineProperties(fe,Object.getOwnPropertyDescriptors(ve)):y(Object(ve)).forEach(function(Ie){Object.defineProperty(fe,Ie,Object.getOwnPropertyDescriptor(ve,Ie))})}return fe}function Y(fe,jt,ve){return jt in fe?Object.defineProperty(fe,jt,{value:ve,enumerable:!0,configurable:!0,writable:!0}):fe[jt]=ve,fe}function $(fe,jt){if(!(fe instanceof jt))throw new TypeError("Cannot call a class as a function")}function U(fe,jt){for(var ve=0;ve<jt.length;ve++){var Ie=jt[ve];Ie.enumerable=Ie.enumerable||!1,Ie.configurable=!0,"value"in Ie&&(Ie.writable=!0),Object.defineProperty(fe,Ie.key,Ie)}}function W(fe,jt,ve){return jt&&U(fe.prototype,jt),ve&&U(fe,ve),Object.defineProperty(fe,"prototype",{writable:!1}),fe}var V={compound:!1,multigraph:!1,directed:!0},H=function(){function fe(){var jt=this,ve=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};$(this,fe),this.directed=!0,this.multigraph=!1,this.compound=!1,this.GRAPH_NODE=L.GRAPH_NODE,this.label=void 0,this.nodeCountNum=0,this.edgeCountNum=0,this.defaultNodeLabelFn=function(){},this.defaultEdgeLabelFn=function(){},this.parentMap=void 0,this.childrenMap=void 0,this.nodesLabelMap=new Map,this.inEdgesMap=new Map,this.outEdgesMap=new Map,this.predecessorsMap=new Map,this.successorsMap=new Map,this.edgesMap=new Map,this.edgesLabelsMap=new Map,this.isDirected=function(){return jt.directed},this.isMultigraph=function(){return jt.multigraph},this.isCompound=function(){return jt.compound},this.setGraph=function(ye){return jt.label=ye,jt},this.graph=function(){return jt.label},this.setDefaultNodeLabel=function(ye){return g(ye)?jt.defaultNodeLabelFn=ye:jt.defaultNodeLabelFn=function(){return ye},jt},this.nodeCount=function(){return jt.nodeCountNum},this.node=function(ye){return jt.nodesLabelMap.get(ye)},this.nodes=function(){return Array.from(jt.nodesLabelMap.keys())},this.sources=function(){return jt.nodes().filter(function(ye){var ze;return!(!((ze=jt.inEdgesMap.get(ye))===null||ze===void 0)&&ze.size)})},this.sinks=function(){return jt.nodes().filter(function(ye){var ze;return!(!((ze=jt.outEdgesMap.get(ye))===null||ze===void 0)&&ze.size)})},this.setNodes=function(ye,ze){return ye.map(function(sr){return jt.setNode(sr,ze)}),jt},this.hasNode=function(ye){return jt.nodesLabelMap.has(ye)},this.checkCompound=function(){if(!jt.isCompound())throw new Error("Cannot construct parent-children relations in a non-compound graph")},this.parent=function(ye){if(jt.isCompound()){var ze,sr=(ze=jt.parentMap)===null||ze===void 0?void 0:ze.get(ye);if(sr!==jt.GRAPH_NODE)return sr}},this.removeFromParentsChildList=function(ye){var ze=jt.parentMap.get(ye);jt.childrenMap.get(ze).delete(ye)},this.setParent=function(ye,ze){var sr,pr;jt.checkCompound();for(var en=ze===void 0?jt.GRAPH_NODE:ze,Fn=jt.parent(en);Fn;){if(ye===Fn)throw new Error("Setting "+ze+" as parent of "+ye+" would create a cycle");Fn=jt.parent(Fn)}ze&&jt.setNode(ze),jt.setNode(ye),jt.removeFromParentsChildList(ye),(sr=jt.parentMap)===null||sr===void 0||sr.set(ye,en);var ln=jt.childrenMap.get(en);return ln.set(ye,!0),(pr=jt.childrenMap)===null||pr===void 0||pr.set(en,ln),jt},this.children=function(ye){var ze=ye===void 0?jt.GRAPH_NODE:ye;if(jt.isCompound()){var sr,pr=(sr=jt.childrenMap)===null||sr===void 0?void 0:sr.get(ze);return pr?Array.from(pr.keys()):void 0}if(ze===jt.GRAPH_NODE)return jt.nodes();if(ye&&jt.hasNode(ye))return[]},this.predecessors=function(ye){var ze=jt.predecessorsMap.get(ye);return ze?Array.from(ze.keys()):void 0},this.successors=function(ye){var ze=jt.successorsMap.get(ye);return ze?Array.from(ze.keys()):void 0},this.neighbors=function(ye){var ze;if(jt.hasNode(ye))return Array.from(new Set((ze=jt.predecessors(ye))===null||ze===void 0?void 0:ze.concat(jt.successors(ye))))},this.isLeaf=function(ye){var ze;if(jt.isDirected()){var sr;return!(!((sr=jt.successors(ye))===null||sr===void 0)&&sr.length)}return!(!((ze=jt.neighbors(ye))===null||ze===void 0)&&ze.length)},this.filterNodes=function(ye){var ze=jt.directed,sr=jt.multigraph,pr=jt.compound,en=new fe({directed:ze,multigraph:sr,compound:pr});if(en.setGraph(jt.graph()),jt.nodes().forEach(function(ln){ye(ln)&&en.setNode(ln,jt.node(ln))}),jt.edges().forEach(function(ln){en.hasNode(ln.v)&&en.hasNode(ln.w)&&en.setEdgeObj(ln,jt.edge(ln))}),pr){var Fn=function(ea){for(var fn=jt.parent(ea);fn!==void 0&&!en.hasNode(fn);)fn=jt.parent(fn);return fn};en.nodes().forEach(function(ln){en.setParent(ln,Fn(ln))})}return en},this.setDefaultEdgeLabel=function(ye){return g(ye)?jt.defaultEdgeLabelFn=ye:jt.defaultEdgeLabelFn=function(){return ye},jt},this.edgeCount=function(){return jt.edgeCountNum},this.setEdgeObj=function(ye,ze){return jt.setEdge(ye.v,ye.w,ze,ye.name)},this.setPath=function(ye,ze){return ye.reduce(function(sr,pr){return jt.setEdge(sr,pr,ze),pr}),jt},this.edgeFromArgs=function(ye,ze,sr){return jt.edge({v:ye,w:ze,name:sr})},this.edge=function(ye){return jt.edgesLabelsMap.get(x(jt.isDirected(),ye))},this.hasEdge=function(ye,ze,sr){return jt.edgesLabelsMap.has(x(jt.isDirected(),{v:ye,w:ze,name:sr}))},this.removeEdgeObj=function(ye){var ze=ye.v,sr=ye.w,pr=ye.name;return jt.removeEdge(ze,sr,pr)},this.edges=function(){return Array.from(jt.edgesMap.values())},this.inEdges=function(ye,ze){var sr=jt.inEdgesMap.get(ye);if(sr)return Array.from(sr.values()).filter(function(pr){return!ze||pr.v===ze})},this.outEdges=function(ye,ze){var sr=jt.outEdgesMap.get(ye);if(sr)return Array.from(sr.values()).filter(function(pr){return!ze||pr.w===ze})},this.nodeEdges=function(ye,ze){var sr;if(jt.hasNode(ye))return(sr=jt.inEdges(ye,ze))===null||sr===void 0?void 0:sr.concat(jt.outEdges(ye,ze))},this.toJSON=function(){return D(jt)},this.nodeInDegree=function(ye){var ze=jt.inEdgesMap.get(ye);return ze?ze.size:0},this.nodeOutDegree=function(ye){var ze=jt.outEdgesMap.get(ye);return ze?ze.size:0},this.nodeDegree=function(ye){return jt.nodeInDegree(ye)+jt.nodeOutDegree(ye)},this.source=function(ye){return ye.v},this.target=function(ye){return ye.w};var Ie=h(h({},V),ve);this.compound=Ie.compound,this.directed=Ie.directed,this.multigraph=Ie.multigraph,this.compound&&(this.parentMap=new Map,this.childrenMap=new Map)}return W(fe,[{key:"setNode",value:function(ve,Ie){var ye=this.nodesLabelMap,ze=this.defaultNodeLabelFn,sr=this.isCompound,pr=this.parentMap,en=this.childrenMap,Fn=this.inEdgesMap,ln=this.outEdgesMap,ea=this.predecessorsMap,fn=this.successorsMap;if(ye.has(ve))return Ie!==void 0&&ye.set(ve,Ie),this;if(ye.set(ve,Ie||ze(ve)),sr()){var Hn;pr==null||pr.set(ve,this.GRAPH_NODE),en==null||en.set(ve,new Map),en!=null&&en.has(this.GRAPH_NODE)||en==null||en.set(this.GRAPH_NODE,new Map),en==null||(Hn=en.get(this.GRAPH_NODE))===null||Hn===void 0||Hn.set(ve,!0)}return[Fn,ln,ea,fn].forEach(function(la){return la.set(ve,new Map)}),this.nodeCountNum+=1,this}},{key:"removeNode",value:function(ve){var Ie=this;if(this.hasNode(ve)){var ye=function(ba){Ie.removeEdge(ba.v,ba.w,ba.name)},ze=this.inEdgesMap,sr=this.outEdgesMap,pr=this.predecessorsMap,en=this.successorsMap,Fn=this.nodesLabelMap;if(this.isCompound()){var ln,ea,fn;this.removeFromParentsChildList(ve),(ln=this.parentMap)===null||ln===void 0||ln.delete(ve),(ea=this.children(ve))===null||ea===void 0||ea.forEach(function(xa){return Ie.setParent(xa)}),(fn=this.childrenMap)===null||fn===void 0||fn.delete(ve)}var Hn=ze.get(ve),la=sr.get(ve);Array.from(Hn.values()).forEach(function(xa){return ye(xa)}),Array.from(la.values()).forEach(function(xa){return ye(xa)}),Fn.delete(ve),ze.delete(ve),sr.delete(ve),pr.delete(ve),en.delete(ve),this.nodeCountNum-=1}return this}},{key:"setEdge",value:function(ve,Ie,ye,ze){var sr,pr,en=S(this.isDirected(),ve,Ie,ze),Fn=x(this.isDirected(),en),ln=en.v,ea=en.w;if(this.edgesLabelsMap.has(Fn))return this.edgesLabelsMap.set(Fn,ye),this;if(ze!==void 0&&!this.isMultigraph())throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(ln),this.setNode(ea),this.edgesLabelsMap.set(Fn,ye||this.defaultEdgeLabelFn(ln,ea,ze)),Object.freeze(en),this.edgesMap.set(Fn,en);var fn=this.predecessorsMap.get(ea),Hn=this.successorsMap.get(ln);return P(fn,ln),P(Hn,ea),(sr=this.inEdgesMap.get(ea))===null||sr===void 0||sr.set(Fn,en),(pr=this.outEdgesMap.get(ln))===null||pr===void 0||pr.set(Fn,en),this.edgeCountNum+=1,this}},{key:"removeEdge",value:function(ve,Ie,ye){var ze=m(this.isDirected(),ve,Ie,ye),sr=this.edgesMap.get(ze);if(sr){var pr=S(this.isDirected(),ve,Ie,ye),en=pr.v,Fn=pr.w;this.edgesLabelsMap.delete(ze),this.edgesMap.delete(ze);var ln=this.predecessorsMap.get(Fn),ea=this.successorsMap.get(en);p(ln,en),p(ea,Fn),this.inEdgesMap.get(Fn).delete(ze),this.outEdgesMap.get(en).delete(ze),this.edgeCountNum-=1}return this}}]),fe}();H.fromJSON=F;function Q(fe){"@babel/helpers - typeof";return Q=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(jt){return typeof jt}:function(jt){return jt&&typeof Symbol=="function"&&jt.constructor===Symbol&&jt!==Symbol.prototype?"symbol":typeof jt},Q(fe)}function tt(fe,jt){if(!(fe instanceof jt))throw new TypeError("Cannot call a class as a function")}function rt(fe,jt){for(var ve=0;ve<jt.length;ve++){var Ie=jt[ve];Ie.enumerable=Ie.enumerable||!1,Ie.configurable=!0,"value"in Ie&&(Ie.writable=!0),Object.defineProperty(fe,Ie.key,Ie)}}function ct(fe,jt,ve){return jt&&rt(fe.prototype,jt),ve&&rt(fe,ve),Object.defineProperty(fe,"prototype",{writable:!1}),fe}function ot(){return typeof Reflect!="undefined"&&Reflect.get?ot=Reflect.get:ot=function(jt,ve,Ie){var ye=xt(jt,ve);if(ye){var ze=Object.getOwnPropertyDescriptor(ye,ve);return ze.get?ze.get.call(arguments.length<3?jt:Ie):ze.value}},ot.apply(this,arguments)}function xt(fe,jt){for(;!Object.prototype.hasOwnProperty.call(fe,jt)&&(fe=bt(fe),fe!==null););return fe}function pt(fe,jt){if(typeof jt!="function"&&jt!==null)throw new TypeError("Super expression must either be null or a function");fe.prototype=Object.create(jt&&jt.prototype,{constructor:{value:fe,writable:!0,configurable:!0}}),Object.defineProperty(fe,"prototype",{writable:!1}),jt&&Xt(fe,jt)}function Xt(fe,jt){return Xt=Object.setPrototypeOf||function(Ie,ye){return Ie.__proto__=ye,Ie},Xt(fe,jt)}function Ct(fe){var jt=q();return function(){var Ie=bt(fe),ye;if(jt){var ze=bt(this).constructor;ye=Reflect.construct(Ie,arguments,ze)}else ye=Ie.apply(this,arguments);return At(this,ye)}}function At(fe,jt){if(jt&&(Q(jt)==="object"||typeof jt=="function"))return jt;if(jt!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Z(fe)}function Z(fe){if(fe===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return fe}function q(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(fe){return!1}}function bt(fe){return bt=Object.setPrototypeOf?Object.getPrototypeOf:function(ve){return ve.__proto__||Object.getPrototypeOf(ve)},bt(fe)}var _t=function(fe){pt(ve,fe);var jt=Ct(ve);function ve(){var Ie;tt(this,ve);for(var ye=arguments.length,ze=new Array(ye),sr=0;sr<ye;sr++)ze[sr]=arguments[sr];return Ie=jt.call.apply(jt,[this].concat(ze)),Ie.eventPool={},Ie}return ct(ve,[{key:"appendEvent",value:function(ye,ze){this.eventPool[ye]||(this.eventPool[ye]=[]),this.eventPool[ye].push(ze)}},{key:"removeEvent",value:function(ye,ze){if(this.eventPool[ye]){var sr=this.eventPool[ye].indexOf(ze);sr>-1&&this.eventPool[ye].splice(sr,1)}}},{key:"emitEvent",value:function(ye){for(var ze=arguments.length,sr=new Array(ze>1?ze-1:0),pr=1;pr<ze;pr++)sr[pr-1]=arguments[pr];this.eventPool[ye]&&this.eventPool[ye].forEach(function(en){en.apply(void 0,sr)})}},{key:"setNode",value:function(ye,ze){return ot(bt(ve.prototype),"setNode",this).call(this,ye,ze),this.emitEvent("nodeAdd",ye,ze),this}},{key:"removeNode",value:function(ye){return ot(bt(ve.prototype),"removeNode",this).call(this,ye),this.emitEvent("nodeRemove",ye),this}},{key:"setEdge",value:function(ye,ze,sr,pr){return ot(bt(ve.prototype),"setEdge",this).call(this,ye,ze,sr,pr),this.emitEvent("edgeAdd",ye,ze,sr,pr),this}},{key:"removeEdge",value:function(ye,ze,sr){return ot(bt(ve.prototype),"removeEdge",this).call(this,ye,ze,sr),this.emitEvent("edgeRemove",ye,ze,sr),this}}]),ve}(H);function nt(fe,jt){for(var ve=0;ve<jt.length;ve++){var Ie=jt[ve];Ie.enumerable=Ie.enumerable||!1,Ie.configurable=!0,"value"in Ie&&(Ie.writable=!0),Object.defineProperty(fe,Ie.key,Ie)}}function vt(fe,jt,ve){return jt&&nt(fe.prototype,jt),ve&&nt(fe,ve),Object.defineProperty(fe,"prototype",{writable:!1}),fe}function It(fe,jt){if(!(fe instanceof jt))throw new TypeError("Cannot call a class as a function")}var Pt=vt(function fe(){var jt=this;It(this,fe),this.arr=[],this.keyIndice=new Map,this.size=function(){return jt.arr.length},this.keys=function(){return jt.arr.map(function(ve){return ve.key})},this.has=function(ve){return jt.keyIndice.has(ve)},this.priority=function(ve){var Ie=jt.keyIndice.get(ve);if(Ie!==void 0)return jt.arr[Ie].priority},this.swap=function(ve,Ie){var ye=jt.arr,ze=jt.keyIndice,sr=[ye[ve],ye[Ie]],pr=sr[0],en=sr[1];ye[ve]=en,ye[Ie]=pr,ze.set(pr.key,Ie),ze.set(en.key,ve)},this.innerDecrease=function(ve){for(var Ie=jt.arr,ye=Ie[ve].priority,ze,sr=ve;sr!==0;){var pr;if(ze=sr>>1,((pr=Ie[ze])===null||pr===void 0?void 0:pr.priority)<ye)break;jt.swap(sr,ze),sr=ze}},this.heapify=function(ve){var Ie=jt.arr,ye=ve<<1,ze=ye+1,sr=ve;ye<Ie.length&&(sr=Ie[ye].priority<Ie[sr].priority?ye:sr,ze<Ie.length&&(sr=Ie[ze].priority<Ie[sr].priority?ze:sr),sr!==ve&&(jt.swap(ve,sr),jt.heapify(sr)))},this.min=function(){if(jt.size()===0)throw new Error("Queue underflow");return jt.arr[0].key},this.add=function(ve,Ie){var ye=jt.keyIndice,ze=jt.arr;if(!ye.has(ve)){var sr=ze.length;return ye.set(ve,sr),ze.push({key:ve,priority:Ie}),jt.innerDecrease(sr),!0}return!1},this.removeMin=function(){jt.swap(0,jt.arr.length-1);var ve=jt.arr.pop();return jt.keyIndice.delete(ve.key),jt.heapify(0),ve.key},this.decrease=function(ve,Ie){if(!jt.has(ve))throw new Error("There's no key named ".concat(ve));var ye=jt.keyIndice.get(ve);if(Ie>jt.arr[ye].priority)throw new Error("New priority is greater than current priority.Key: ".concat(ve," Old: + ").concat(jt.arr[ye].priority," New: ").concat(Ie));jt.arr[ye].priority=Ie,jt.innerDecrease(ye)}}),Et=function(jt,ve){var Ie=new H,ye=new Map,ze=new Pt,sr;function pr(ln){var ea=ln.v===sr?ln.w:ln.v,fn=ze.priority(ea);if(fn!==void 0){var Hn=ve(ln);Hn<fn&&(ye.set(ea,sr),ze.decrease(ea,Hn))}}if(jt.nodeCount()===0)return Ie;jt.nodes().forEach(function(ln){ze.add(ln,Number.POSITIVE_INFINITY),Ie.setNode(ln)}),ze.decrease(jt.nodes()[0],0);for(var en=!1;ze.size()>0;){var Fn;if(sr=ze.removeMin(),ye.has(sr))Ie.setEdge(sr,ye.get(sr));else{if(en)throw new Error("Input graph is not connected: "+jt.graph());en=!0}(Fn=jt.nodeEdges(sr))===null||Fn===void 0||Fn.forEach(pr)}return Ie},Nt=Et,$t=function(jt){var ve=new Set,Ie=[],ye=jt.nodes();return ye.forEach(function(ze){for(var sr=[],pr=[ze];pr.length>0;){var en=pr.pop();if(!ve.has(en)){var Fn,ln;ve.add(en),sr.push(en),(Fn=jt.successors(en))===null||Fn===void 0||Fn.forEach(function(ea){return pr.push(ea)}),(ln=jt.predecessors(en))===null||ln===void 0||ln.forEach(function(ea){return pr.push(ea)})}}sr.length&&Ie.push(sr)}),Ie},ue=$t,ie=function fe(jt,ve,Ie,ye,ze,sr){ye.includes(ve)||(ye.push(ve),Ie||sr.push(ve),ze(ve).forEach(function(pr){return fe(jt,pr,Ie,ye,ze,sr)}),Ie&&sr.push(ve))},Dt=function(jt,ve,Ie){var ye=Array.isArray(ve)?ve:[ve],ze=function(Fn){return jt.isDirected()?jt.successors(Fn):jt.neighbors(Fn)},sr=[],pr=[];return ye.forEach(function(en){if(jt.hasNode(en))ie(jt,en,Ie==="post",pr,ze,sr);else throw new Error("Graph does not have node: "+en)}),sr},ne=Dt;function pe(fe,jt){return Qt(fe)||be(fe,jt)||ae(fe,jt)||Wt()}function Wt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ae(fe,jt){if(fe){if(typeof fe=="string")return Se(fe,jt);var ve=Object.prototype.toString.call(fe).slice(8,-1);if(ve==="Object"&&fe.constructor&&(ve=fe.constructor.name),ve==="Map"||ve==="Set")return Array.from(fe);if(ve==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ve))return Se(fe,jt)}}function Se(fe,jt){(jt==null||jt>fe.length)&&(jt=fe.length);for(var ve=0,Ie=new Array(jt);ve<jt;ve++)Ie[ve]=fe[ve];return Ie}function be(fe,jt){var ve=fe==null?null:typeof Symbol!="undefined"&&fe[Symbol.iterator]||fe["@@iterator"];if(ve!=null){var Ie=[],ye=!0,ze=!1,sr,pr;try{for(ve=ve.call(fe);!(ye=(sr=ve.next()).done)&&(Ie.push(sr.value),!(jt&&Ie.length===jt));ye=!0);}catch(en){ze=!0,pr=en}finally{try{!ye&&ve.return!=null&&ve.return()}finally{if(ze)throw pr}}return Ie}}function Qt(fe){if(Array.isArray(fe))return fe}var we=function(){return 1},Tt=function(jt,ve,Ie,ye){return Le(jt,ve,Ie||we,ye||function(ze){return jt.outEdges(ze)})},Le=function(jt,ve,Ie,ye){var ze=new Map,sr=new Pt,pr,en,Fn=function(fn){var Hn=fn.v!==pr?fn.v:fn.w,la=ze.get(Hn),xa=Ie(fn),ba=en.distance+xa;if(xa<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+fn+" Weight: "+xa);ba<la.distance&&(la.distance=ba,la.predecessor=pr,sr.decrease(Hn,ba))};for(jt.nodes().forEach(function(ea){var fn=ea===ve?0:Number.POSITIVE_INFINITY;ze.set(ea,{distance:fn}),sr.add(ea,fn)});sr.size()>0&&(pr=sr.removeMin(),en=ze.get(pr),!(en&&en.distance===Number.POSITIVE_INFINITY));)ye(pr).forEach(Fn);var ln={};return Array.from(ze.entries()).forEach(function(ea){var fn=pe(ea,2),Hn=fn[0],la=fn[1];return ln[String(Hn)]=la,ln}),ln},Mr=Tt,Ar=function(jt,ve,Ie){var ye={};return jt.nodes().forEach(function(ze){return ye[String(ze)]=Mr(jt,ze,ve,Ie),ye}),ye},Ir=Ar,Br=function(jt){var ve=0,Ie=[],ye=new Map,ze=[];function sr(pr){var en,Fn={onStack:!0,lowlink:ve,index:ve};if(ye.set(pr,Fn),ve+=1,Ie.push(pr),(en=jt.successors(pr))===null||en===void 0||en.forEach(function(Hn){var la;if(ye.has(Hn)){if(!((la=ye.get(Hn))===null||la===void 0)&&la.onStack){var ba=ye.get(Hn);Fn.lowlink=Math.min(Fn.lowlink,ba.index)}}else{sr(Hn);var xa=ye.get(Hn);Fn.lowlink=Math.min(Fn.lowlink,xa.lowlink)}}),Fn.lowlink===Fn.index){var ln=[],ea;do{ea=Ie.pop();var fn=ye.get(ea);fn.onStack=!1,ln.push(ea)}while(pr!==ea);ze.push(ln)}}return jt.nodes().forEach(function(pr){ye.has(pr)||sr(pr)}),ze},dn=Br,an=function(jt){return dn(jt).filter(function(ve){return ve.length>1||ve.length===1&&jt.hasEdge(ve[0],ve[0])})},Ln=an;function Un(fe){"@babel/helpers - typeof";return Un=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(jt){return typeof jt}:function(jt){return jt&&typeof Symbol=="function"&&jt.constructor===Symbol&&jt!==Symbol.prototype?"symbol":typeof jt},Un(fe)}function Yn(fe,jt){for(var ve=0;ve<jt.length;ve++){var Ie=jt[ve];Ie.enumerable=Ie.enumerable||!1,Ie.configurable=!0,"value"in Ie&&(Ie.writable=!0),Object.defineProperty(fe,Ie.key,Ie)}}function xr(fe,jt,ve){return jt&&Yn(fe.prototype,jt),ve&&Yn(fe,ve),Object.defineProperty(fe,"prototype",{writable:!1}),fe}function qe(fe,jt){if(!(fe instanceof jt))throw new TypeError("Cannot call a class as a function")}function Cr(fe,jt){if(typeof jt!="function"&&jt!==null)throw new TypeError("Super expression must either be null or a function");fe.prototype=Object.create(jt&&jt.prototype,{constructor:{value:fe,writable:!0,configurable:!0}}),Object.defineProperty(fe,"prototype",{writable:!1}),jt&&on(fe,jt)}function tn(fe){var jt=un();return function(){var Ie=Wn(fe),ye;if(jt){var ze=Wn(this).constructor;ye=Reflect.construct(Ie,arguments,ze)}else ye=Ie.apply(this,arguments);return vn(this,ye)}}function vn(fe,jt){if(jt&&(Un(jt)==="object"||typeof jt=="function"))return jt;if(jt!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _n(fe)}function _n(fe){if(fe===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return fe}function Pn(fe){var jt=typeof Map=="function"?new Map:void 0;return Pn=function(Ie){if(Ie===null||!An(Ie))return Ie;if(typeof Ie!="function")throw new TypeError("Super expression must either be null or a function");if(typeof jt!="undefined"){if(jt.has(Ie))return jt.get(Ie);jt.set(Ie,ye)}function ye(){return _r(Ie,arguments,Wn(this).constructor)}return ye.prototype=Object.create(Ie.prototype,{constructor:{value:ye,enumerable:!1,writable:!0,configurable:!0}}),on(ye,Ie)},Pn(fe)}function _r(fe,jt,ve){return un()?_r=Reflect.construct:_r=function(ye,ze,sr){var pr=[null];pr.push.apply(pr,ze);var en=Function.bind.apply(ye,pr),Fn=new en;return sr&&on(Fn,sr.prototype),Fn},_r.apply(null,arguments)}function un(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(fe){return!1}}function An(fe){return Function.toString.call(fe).indexOf("[native code]")!==-1}function on(fe,jt){return on=Object.setPrototypeOf||function(Ie,ye){return Ie.__proto__=ye,Ie},on(fe,jt)}function Wn(fe){return Wn=Object.setPrototypeOf?Object.getPrototypeOf:function(ve){return ve.__proto__||Object.getPrototypeOf(ve)},Wn(fe)}var Cn=function(fe){Cr(ve,fe);var jt=tn(ve);function ve(){return qe(this,ve),jt.apply(this,arguments)}return xr(ve)}(Pn(Error));function On(fe){var jt=new Set,ve=new Set,Ie=[];function ye(ze){if(ve.has(ze))throw new Cn;if(!jt.has(ze)){var sr;ve.add(ze),jt.add(ze),(sr=fe.predecessors(ze))===null||sr===void 0||sr.forEach(ye),ve.delete(ze),Ie.push(ze)}}if(fe.sinks().forEach(ye),jt.size!==fe.nodeCount())throw new Cn;return Ie}var jn=On,at=function(jt){try{jn(jt)}catch(ve){if(ve instanceof Cn)return!1;throw ve}return!0},Ze=at,qt=function(jt,ve){return ne(jt,ve,"post")},Jt=qt,St=function(jt,ve){return ne(jt,ve,"pre")},Ce=St,kt=function(){return 1};function Kt(fe,jt,ve){return dt(fe,jt||kt,ve||function(Ie){return fe.outEdges(Ie)})}function dt(fe,jt,ve){var Ie={},ye=fe.nodes();return ye.forEach(function(ze){var sr=String(ze);Ie[sr]={},Ie[sr][sr]={distance:0},ye.forEach(function(pr){ze!==pr&&(Ie[sr][String(pr)]={distance:Number.POSITIVE_INFINITY})}),ve(ze).forEach(function(pr){var en=pr.v===ze?pr.w:pr.v,Fn=jt(pr);Ie[sr][String(en)]={distance:Fn,predecessor:ze}})}),ye.forEach(function(ze){var sr=String(ze),pr=Ie[sr];ye.forEach(function(en){var Fn=String(en),ln=Ie[Fn];ye.forEach(function(ea){var fn=String(ea),Hn=ln[sr],la=pr[fn],xa=ln[fn],ba=Hn.distance+la.distance;ba<xa.distance&&(xa.distance=ba,xa.predecessor=la.predecessor)})})}),Ie}var Ut=Kt,J=function(jt,ve){for(var Ie=jt.nodes(),ye=0;ye<Ie.length;ye++){var ze=Ie[ye];if(ve.hasNode(ze))return!0}return!1},it=function(jt,ve){for(var Ie=jt.edges(),ye=0;ye<Ie.length;ye++){var ze=Ie[ye];if(ve.hasEdge(ze.v,ze.w,ze.name))return!0}return!1},R=function(jt,ve){var Ie=jt.nodes(),ye=Ie.filter(function(ze){return ve.hasNode(ze)});return ye},M=function(jt,ve){var Ie=jt.edges(),ye=Ie.filter(function(ze){return ve.hasEdge(ze.v,ze.w,ze.name)});return ye},O=function(jt,ve){return jt.isCompound()===ve.isCompound()&&jt.isDirected()===ve.isDirected()&&jt.isMultigraph()===ve.isMultigraph()},X=function(jt,ve){var Ie=R(jt,ve);return Ie.length===jt.nodes().length},mt=function(jt,ve){var Ie=M(jt,ve);return Ie.length===jt.edges().length},Ft=function(jt,ve){return O(jt,ve)&&jt.nodeCount()===ve.nodeCount()&&X(jt,ve)&&jt.edgeCount()===ve.edgeCount()&&mt(jt,ve)},Bt=function(jt,ve){return X(jt,ve)&&mt(jt,ve)};function re(fe,jt){return Ke(fe)||hr(fe,jt)||me(fe,jt)||De()}function De(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function me(fe,jt){if(fe){if(typeof fe=="string")return Xe(fe,jt);var ve=Object.prototype.toString.call(fe).slice(8,-1);if(ve==="Object"&&fe.constructor&&(ve=fe.constructor.name),ve==="Map"||ve==="Set")return Array.from(fe);if(ve==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ve))return Xe(fe,jt)}}function Xe(fe,jt){(jt==null||jt>fe.length)&&(jt=fe.length);for(var ve=0,Ie=new Array(jt);ve<jt;ve++)Ie[ve]=fe[ve];return Ie}function hr(fe,jt){var ve=fe==null?null:typeof Symbol!="undefined"&&fe[Symbol.iterator]||fe["@@iterator"];if(ve!=null){var Ie=[],ye=!0,ze=!1,sr,pr;try{for(ve=ve.call(fe);!(ye=(sr=ve.next()).done)&&(Ie.push(sr.value),!(jt&&Ie.length===jt));ye=!0);}catch(en){ze=!0,pr=en}finally{try{!ye&&ve.return!=null&&ve.return()}finally{if(ze)throw pr}}return Ie}}function Ke(fe){if(Array.isArray(fe))return fe}function Lr(fe){return fe instanceof H}function cn(fe){if(fe.isMultigraph())return!1;for(var jt=fe.edges(),ve=new Map,Ie=0;Ie<jt.length;Ie++){var ye=jt[Ie];if(ye.v===ye.w)return!1;var ze=[ye.v,ye.w].sort(),sr=re(ze,2),pr=sr[0],en=sr[1],Fn="".concat(pr,"-").concat(en);if(ve.has(Fn))return!1;ve.set(Fn,!0)}return!0}function $e(fe){return fe.nodes().length===0}function lr(fe){for(var jt=fe.edges(),ve=0;ve<jt.length;ve++){var Ie=jt[ve];if(Ie.v===Ie.w)return!0}return!1}var Pr=function(jt,ve){if(!cn(jt)||!cn(ve)||!X(jt,ve)||it(jt,ve))return!1;var Ie=jt.nodeCount();return jt.edgeCount()+ve.edgeCount()===Ie*(Ie-1)/2},Dr=function(jt){if(!cn(jt))return null;for(var ve=jt.nodeCount(),Ie=new H({compound:jt.isCompound(),directed:jt.isDirected(),multigraph:jt.isMultigraph()}),ye=jt.nodes(),ze=0;ze<ve;ze++){var sr=ye[ze];Ie.setNode(sr,jt.node(sr));for(var pr=ze+1;pr<ve;pr++){var en=ye[pr];jt.hasEdge(sr,en)||Ie.setEdge(sr,en)}}return Ie}},981746:function(Ve){(function(C,b){Ve.exports=b()})(typeof self!="undefined"?self:this,function(){return function(z){var C={};function b(k){if(C[k])return C[k].exports;var w=C[k]={i:k,l:!1,exports:{}};return z[k].call(w.exports,w,w.exports,b),w.l=!0,w.exports}return b.m=z,b.c=C,b.d=function(k,w,T){b.o(k,w)||Object.defineProperty(k,w,{configurable:!1,enumerable:!0,get:T})},b.n=function(k){var w=k&&k.__esModule?function(){return k.default}:function(){return k};return b.d(w,"a",w),w},b.o=function(k,w){return Object.prototype.hasOwnProperty.call(k,w)},b.p="",b(b.s=36)}([function(z,C,b){"use strict";var k=b(3);C.a=function(w){return Array.isArray?Array.isArray(w):Object(k.a)(w,"Array")}},function(z,C,b){"use strict";var k=function(w){return w!==null&&typeof w!="function"&&isFinite(w.length)};C.a=k},function(z,C,b){"use strict";var k=b(3);C.a=function(w){return Object(k.a)(w,"Function")}},function(z,C,b){"use strict";var k={}.toString,w=function(T,L){return k.call(T)==="[object "+L+"]"};C.a=w},function(z,C,b){"use strict";var k=b(3);C.a=function(w){return Object(k.a)(w,"String")}},function(z,C,b){"use strict";var k=b(3),w=function(T){return Object(k.a)(T,"Number")};C.a=w},function(z,C,b){var k=b(38),w=k.mix;function T(L,P,p,m){return m===void 0&&(m="height"),p==="center"?(L[m]+P[m])/2:L.height}z.exports={assign:w,getHeight:T}},function(z,C,b){"use strict";var k=function(w){return w==null};C.a=k},function(z,C,b){"use strict";var k=b(0),w=b(12);function T(L,P){if(L){var p;if(Object(k.a)(L))for(var m=0,S=L.length;m<S&&(p=P(L[m],m),p!==!1);m++);else if(Object(w.a)(L)){for(var x in L)if(L.hasOwnProperty(x)&&(p=P(L[x],x),p===!1))break}}}C.a=T},function(z,C,b){"use strict";var k=b(7);C.a=function(w){return Object(k.a)(w)?"":w.toString()}},function(z,C,b){"use strict";var k=b(14),w=b(3),T=function(L){if(!Object(k.a)(L)||!Object(w.a)(L,"Object"))return!1;if(Object.getPrototypeOf(L)===null)return!0;for(var P=L;Object.getPrototypeOf(P)!==null;)P=Object.getPrototypeOf(P);return Object.getPrototypeOf(L)===P};C.a=T},function(z,C,b){var k=b(18),w=function(){function T(P,p){p===void 0&&(p={});var m=this;m.options=p,m.rootNode=k(P,p)}var L=T.prototype;return L.execute=function(){throw new Error("please override this method")},T}();z.exports=w},function(z,C,b){"use strict";C.a=function(k){var w=typeof k;return k!==null&&w==="object"||w==="function"}},function(z,C,b){"use strict";var k=b(1),w=function(T,L){return Object(k.a)(T)?T.indexOf(L)>-1:!1};C.a=w},function(z,C,b){"use strict";var k=function(w){return typeof w=="object"&&w!==null};C.a=k},function(z,C,b){"use strict";var k=b(8),w=b(2),T=Object.values?function(L){return Object.values(L)}:function(L){var P=[];return Object(k.a)(L,function(p,m){Object(w.a)(L)&&m==="prototype"||P.push(p)}),P};C.a=T},function(z,C,b){"use strict";C.a=w;function k(T,L){for(var P in L)L.hasOwnProperty(P)&&P!=="constructor"&&L[P]!==void 0&&(T[P]=L[P])}function w(T,L,P,p){return L&&k(T,L),P&&k(T,P),p&&k(T,p),T}},function(z,C,b){var k=b(35),w=["LR","RL","TB","BT","H","V"],T=["LR","RL","H"],L=function(m){return T.indexOf(m)>-1},P=w[0];z.exports=function(p,m,S){var x=m.direction||P;if(m.isHorizontal=L(x),x&&w.indexOf(x)===-1)throw new TypeError("Invalid direction: "+x);if(x===w[0])S(p,m);else if(x===w[1])S(p,m),p.right2left();else if(x===w[2])S(p,m);else if(x===w[3])S(p,m),p.bottom2top();else if(x===w[4]||x===w[5]){var g=k(p,m),A=g.left,E=g.right;S(A,m),S(E,m),m.isHorizontal?A.right2left():A.bottom2top(),E.translate(A.x-E.x,A.y-E.y),p.x=A.x,p.y=E.y;var D=p.getBoundingBox();m.isHorizontal?D.top<0&&p.translate(0,-D.top):D.left<0&&p.translate(-D.left,0)}var F=m.fixedRoot;return F===void 0&&(F=!0),F&&p.translate(-(p.x+p.width/2+p.hgap),-(p.y+p.height/2+p.vgap)),p}},function(z,C,b){var k=b(6),w=18,T=w*2,L=w,P={getId:function(x){return x.id||x.name},getPreH:function(x){return x.preH||0},getPreV:function(x){return x.preV||0},getHGap:function(x){return x.hgap||L},getVGap:function(x){return x.vgap||L},getChildren:function(x){return x.children},getHeight:function(x){return x.height||T},getWidth:function(x){var g=x.label||" ";return x.width||g.split("").length*w}};function p(S,x){var g=this;if(g.vgap=g.hgap=0,S instanceof p)return S;g.data=S;var A=x.getHGap(S),E=x.getVGap(S);return g.preH=x.getPreH(S),g.preV=x.getPreV(S),g.width=x.getWidth(S),g.height=x.getHeight(S),g.width+=g.preH,g.height+=g.preV,g.id=x.getId(S),g.x=g.y=0,g.depth=0,g.children||(g.children=[]),g.addGap(A,E),g}k.assign(p.prototype,{isRoot:function(){return this.depth===0},isLeaf:function(){return this.children.length===0},addGap:function(x,g){var A=this;A.hgap+=x,A.vgap+=g,A.width+=2*x,A.height+=2*g},eachNode:function(x){for(var g=this,A=[g],E;E=A.shift();)x(E),A=E.children.concat(A)},DFTraverse:function(x){this.eachNode(x)},BFTraverse:function(x){for(var g=this,A=[g],E;E=A.shift();)x(E),A=A.concat(E.children)},getBoundingBox:function(){var x={left:Number.MAX_VALUE,top:Number.MAX_VALUE,width:0,height:0};return this.eachNode(function(g){x.left=Math.min(x.left,g.x),x.top=Math.min(x.top,g.y),x.width=Math.max(x.width,g.x+g.width),x.height=Math.max(x.height,g.y+g.height)}),x},translate:function(x,g){x===void 0&&(x=0),g===void 0&&(g=0),this.eachNode(function(A){A.x+=x,A.y+=g,A.x+=A.preH,A.y+=A.preV})},right2left:function(){var x=this,g=x.getBoundingBox();x.eachNode(function(A){A.x=A.x-(A.x-g.left)*2-A.width}),x.translate(g.width,0)},bottom2top:function(){var x=this,g=x.getBoundingBox();x.eachNode(function(A){A.y=A.y-(A.y-g.top)*2-A.height}),x.translate(0,g.height)}});function m(S,x,g){x===void 0&&(x={}),x=k.assign({},P,x);var A=new p(S,x),E=[A],D;if(!g&&!S.collapsed){for(;D=E.shift();)if(!D.data.collapsed){var F=x.getChildren(D.data),y=F?F.length:0;if(D.children=new Array(y),F&&y)for(var h=0;h<y;h++){var Y=new p(F[h],x);D.children[h]=Y,E.push(Y),Y.parent=D,Y.depth=D.depth+1}}}return A}z.exports=m},function(z,C,b){"use strict";var k=b(1),w=function(T,L){if(!Object(k.a)(T))return T;for(var P=[],p=0;p<T.length;p++){var m=T[p];L(m,p)&&P.push(m)}return P};C.a=w},function(z,C,b){"use strict";var k=b(7),w=b(21);function T(L,P){var p=Object(w.a)(P),m=p.length;if(Object(k.a)(L))return!m;for(var S=0;S<m;S+=1){var x=p[S];if(P[x]!==L[x]||!(x in L))return!1}return!0}C.a=T},function(z,C,b){"use strict";var k=b(8),w=b(2),T=Object.keys?function(L){return Object.keys(L)}:function(L){var P=[];return Object(k.a)(L,function(p,m){Object(w.a)(L)&&m==="prototype"||P.push(m)}),P};C.a=T},function(z,C,b){"use strict";var k=b(0);C.a=function(w){if(Object(k.a)(w))return w.reduce(function(T,L){return Math.max(T,L)},w[0])}},function(z,C,b){"use strict";var k=b(0);C.a=function(w){if(Object(k.a)(w))return w.reduce(function(T,L){return Math.min(T,L)},w[0])}},function(z,C,b){"use strict";var k=b(1),w=Array.prototype.splice,T=function(P,p){if(!Object(k.a)(P))return[];for(var m=P?p.length:0,S=m-1;m--;){var x=void 0,g=p[m];(m===S||g!==x)&&(x=g,w.call(P,g,1))}return P};C.a=T},function(z,C,b){"use strict";var k=b(8),w=b(0),T=b(10),L=function(P,p,m){if(!Object(w.a)(P)&&!Object(T.a)(P))return P;var S=m;return Object(k.a)(P,function(x,g){S=p(S,x,g)}),S};C.a=L},function(z,C,b){"use strict";C.a=k;function k(w,T){T===void 0&&(T=new Map);var L=[];if(Array.isArray(w))for(var P=0,p=w.length;P<p;P++){var m=w[P];T.has(m)||(L.push(m),T.set(m,!0))}return L}},function(z,C,b){"use strict";C.a=L;var k=b(0),w=b(2),T=b(28);function L(P,p){if(!p)return{0:P};if(!Object(w.a)(p)){var m=Object(k.a)(p)?p:p.replace(/\s+/g,"").split("*");p=function(S){for(var x="_",g=0,A=m.length;g<A;g++)x+=S[m[g]]&&S[m[g]].toString();return x}}return Object(T.a)(P,p)}},function(z,C,b){"use strict";var k=b(0),w=b(2),T=Object.prototype.hasOwnProperty;function L(P,p){if(!p||!Object(k.a)(P))return{};for(var m={},S=Object(w.a)(p)?p:function(E){return E[p]},x,g=0;g<P.length;g++){var A=P[g];x=S(A),T.call(m,x)?m[x].push(A):m[x]=[A]}return m}C.a=L},function(z,C,b){"use strict";C.a=function(k,w){return k.hasOwnProperty(w)}},function(z,C,b){"use strict";var k={}.toString,w=function(T){return k.call(T).replace(/^\[object /,"").replace(/]$/,"")};C.a=w},function(z,C,b){"use strict";var k=Object.prototype,w=function(T){var L=T&&T.constructor,P=typeof L=="function"&&L.prototype||k;return T===P};C.a=w},function(z,C,b){"use strict";var k=b(2);C.a=function(w,T){if(!Object(k.a)(w))throw new TypeError("Expected a function");var L=function(){for(var P=[],p=0;p<arguments.length;p++)P[p]=arguments[p];var m=T?T.apply(this,P):P[0],S=L.cache;if(S.has(m))return S.get(m);var x=w.apply(this,P);return S.set(m,x),x};return L.cache=new Map,L}},function(z,C,b){"use strict";var k=b(14),w=b(1),T=b(4),L=function(P,p){if(P===p)return!0;if(!P||!p||Object(T.a)(P)||Object(T.a)(p))return!1;if(Object(w.a)(P)||Object(w.a)(p)){if(P.length!==p.length)return!1;for(var m=!0,S=0;S<P.length&&(m=L(P[S],p[S]),!!m);S++);return m}if(Object(k.a)(P)||Object(k.a)(p)){var x=Object.keys(P),g=Object.keys(p);if(x.length!==g.length)return!1;for(var m=!0,S=0;S<x.length&&(m=L(P[x[S]],p[x[S]]),!!m);S++);return m}return!1};C.a=L},function(z,C,b){"use strict";var k=b(116),w=b(15),T=b(32),L=b(4),P;C.a=Object(T.a)(function(p,m){m===void 0&&(m={});var S=m.fontSize,x=m.fontFamily,g=m.fontWeight,A=m.fontStyle,E=m.fontVariant;return P||(P=document.createElement("canvas").getContext("2d")),P.font=[A,E,g,S+"px",x].join(" "),P.measureText(Object(L.a)(p)?p:"").width},function(p,m){return m===void 0&&(m={}),Object(k.a)([p],Object(w.a)(m)).join("")})},function(z,C,b){var k=b(18);z.exports=function(w,T){for(var L=k(w.data,T,!0),P=k(w.data,T,!0),p=w.children.length,m=Math.round(p/2),S=T.getSide||function(E,D){return D<m?"right":"left"},x=0;x<p;x++){var g=w.children[x],A=S(g,x);A==="right"?P.children.push(g):L.children.push(g)}return L.eachNode(function(E){E.isRoot()||(E.side="left")}),P.eachNode(function(E){E.isRoot()||(E.side="right")}),{left:L,right:P}}},function(z,C,b){var k={compactBox:b(37),dendrogram:b(120),indented:b(122),mindmap:b(124)};z.exports=k},function(z,C,b){function k(g,A){g.prototype=Object.create(A.prototype),g.prototype.constructor=g,w(g,A)}function w(g,A){return w=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(D,F){return D.__proto__=F,D},w(g,A)}var T=b(11),L=b(119),P=b(17),p=b(6),m=function(g){k(A,g);function A(){return g.apply(this,arguments)||this}var E=A.prototype;return E.execute=function(){var F=this;return P(F.rootNode,F.options,L)},A}(T),S={};function x(g,A){return A=p.assign({},S,A),new m(g,A).execute()}z.exports=x},function(z,C,b){"use strict";Object.defineProperty(C,"__esModule",{value:!0});var k=b(13);b.d(C,"contains",function(){return k.a}),b.d(C,"includes",function(){return k.a});var w=b(39);b.d(C,"difference",function(){return w.a});var T=b(40);b.d(C,"find",function(){return T.a});var L=b(41);b.d(C,"findIndex",function(){return L.a});var P=b(42);b.d(C,"firstValue",function(){return P.a});var p=b(43);b.d(C,"flatten",function(){return p.a});var m=b(44);b.d(C,"flattenDeep",function(){return m.a});var S=b(45);b.d(C,"getRange",function(){return S.a});var x=b(46);b.d(C,"pull",function(){return x.a});var g=b(24);b.d(C,"pullAt",function(){return g.a});var A=b(25);b.d(C,"reduce",function(){return A.a});var E=b(47);b.d(C,"remove",function(){return E.a});var D=b(48);b.d(C,"sortBy",function(){return D.a});var F=b(49);b.d(C,"union",function(){return F.a});var y=b(26);b.d(C,"uniq",function(){return y.a});var h=b(50);b.d(C,"valuesOfKey",function(){return h.a});var Y=b(51);b.d(C,"head",function(){return Y.a});var $=b(52);b.d(C,"last",function(){return $.a});var U=b(53);b.d(C,"startsWith",function(){return U.a});var W=b(54);b.d(C,"endsWith",function(){return W.a});var V=b(19);b.d(C,"filter",function(){return V.a});var H=b(55);b.d(C,"every",function(){return H.a});var Q=b(56);b.d(C,"some",function(){return Q.a});var tt=b(57);b.d(C,"group",function(){return tt.a});var rt=b(28);b.d(C,"groupBy",function(){return rt.a});var ct=b(27);b.d(C,"groupToMap",function(){return ct.a});var ot=b(58);b.d(C,"getWrapBehavior",function(){return ot.a});var xt=b(59);b.d(C,"wrapBehavior",function(){return xt.a});var pt=b(60);b.d(C,"number2color",function(){return pt.a});var Xt=b(61);b.d(C,"parseRadius",function(){return Xt.a});var Ct=b(62);b.d(C,"clamp",function(){return Ct.a});var At=b(63);b.d(C,"fixedBase",function(){return At.a});var Z=b(64);b.d(C,"isDecimal",function(){return Z.a});var q=b(65);b.d(C,"isEven",function(){return q.a});var bt=b(66);b.d(C,"isInteger",function(){return bt.a});var _t=b(67);b.d(C,"isNegative",function(){return _t.a});var nt=b(68);b.d(C,"isNumberEqual",function(){return nt.a});var vt=b(69);b.d(C,"isOdd",function(){return vt.a});var It=b(70);b.d(C,"isPositive",function(){return It.a});var Pt=b(22);b.d(C,"max",function(){return Pt.a});var Et=b(71);b.d(C,"maxBy",function(){return Et.a});var Nt=b(23);b.d(C,"min",function(){return Nt.a});var $t=b(72);b.d(C,"minBy",function(){return $t.a});var ue=b(73);b.d(C,"mod",function(){return ue.a});var ie=b(74);b.d(C,"toDegree",function(){return ie.a});var Dt=b(75);b.d(C,"toInteger",function(){return Dt.a});var ne=b(76);b.d(C,"toRadian",function(){return ne.a});var pe=b(77);b.d(C,"forIn",function(){return pe.a});var Wt=b(29);b.d(C,"has",function(){return Wt.a});var ae=b(78);b.d(C,"hasKey",function(){return ae.a});var Se=b(79);b.d(C,"hasValue",function(){return Se.a});var be=b(21);b.d(C,"keys",function(){return be.a});var Qt=b(20);b.d(C,"isMatch",function(){return Qt.a});var we=b(15);b.d(C,"values",function(){return we.a});var Tt=b(80);b.d(C,"lowerCase",function(){return Tt.a});var Le=b(81);b.d(C,"lowerFirst",function(){return Le.a});var Mr=b(82);b.d(C,"substitute",function(){return Mr.a});var Ar=b(83);b.d(C,"upperCase",function(){return Ar.a});var Ir=b(84);b.d(C,"upperFirst",function(){return Ir.a});var Br=b(30);b.d(C,"getType",function(){return Br.a});var dn=b(85);b.d(C,"isArguments",function(){return dn.a});var an=b(0);b.d(C,"isArray",function(){return an.a});var Ln=b(1);b.d(C,"isArrayLike",function(){return Ln.a});var Un=b(86);b.d(C,"isBoolean",function(){return Un.a});var Yn=b(87);b.d(C,"isDate",function(){return Yn.a});var xr=b(88);b.d(C,"isError",function(){return xr.a});var qe=b(2);b.d(C,"isFunction",function(){return qe.a});var Cr=b(89);b.d(C,"isFinite",function(){return Cr.a});var tn=b(7);b.d(C,"isNil",function(){return tn.a});var vn=b(90);b.d(C,"isNull",function(){return vn.a});var _n=b(5);b.d(C,"isNumber",function(){return _n.a});var Pn=b(12);b.d(C,"isObject",function(){return Pn.a});var _r=b(14);b.d(C,"isObjectLike",function(){return _r.a});var un=b(10);b.d(C,"isPlainObject",function(){return un.a});var An=b(31);b.d(C,"isPrototype",function(){return An.a});var on=b(91);b.d(C,"isRegExp",function(){return on.a});var Wn=b(4);b.d(C,"isString",function(){return Wn.a});var Cn=b(3);b.d(C,"isType",function(){return Cn.a});var On=b(92);b.d(C,"isUndefined",function(){return On.a});var jn=b(93);b.d(C,"isElement",function(){return jn.a});var at=b(94);b.d(C,"requestAnimationFrame",function(){return at.a});var Ze=b(95);b.d(C,"clearAnimationFrame",function(){return Ze.a});var qt=b(96);b.d(C,"augment",function(){return qt.a});var Jt=b(97);b.d(C,"clone",function(){return Jt.a});var St=b(98);b.d(C,"debounce",function(){return St.a});var Ce=b(32);b.d(C,"memoize",function(){return Ce.a});var kt=b(99);b.d(C,"deepMix",function(){return kt.a});var Kt=b(8);b.d(C,"each",function(){return Kt.a});var dt=b(100);b.d(C,"extend",function(){return dt.a});var Ut=b(101);b.d(C,"indexOf",function(){return Ut.a});var J=b(102);b.d(C,"isEmpty",function(){return J.a});var it=b(33);b.d(C,"isEqual",function(){return it.a});var R=b(103);b.d(C,"isEqualWith",function(){return R.a});var M=b(104);b.d(C,"map",function(){return M.a});var O=b(105);b.d(C,"mapValues",function(){return O.a});var X=b(16);b.d(C,"mix",function(){return X.a}),b.d(C,"assign",function(){return X.a});var mt=b(106);b.d(C,"get",function(){return mt.a});var Ft=b(107);b.d(C,"set",function(){return Ft.a});var Bt=b(108);b.d(C,"pick",function(){return Bt.a});var re=b(109);b.d(C,"omit",function(){return re.a});var De=b(110);b.d(C,"throttle",function(){return De.a});var me=b(111);b.d(C,"toArray",function(){return me.a});var Xe=b(9);b.d(C,"toString",function(){return Xe.a});var hr=b(112);b.d(C,"uniqueId",function(){return hr.a});var Ke=b(113);b.d(C,"noop",function(){return Ke.a});var Lr=b(114);b.d(C,"identity",function(){return Lr.a});var cn=b(115);b.d(C,"size",function(){return cn.a});var $e=b(34);b.d(C,"measureTextWidth",function(){return $e.a});var lr=b(117);b.d(C,"getEllipsisText",function(){return lr.a});var Pr=b(118);b.d(C,"Cache",function(){return Pr.a})},function(z,C,b){"use strict";var k=b(19),w=b(13),T=function(L,P){return P===void 0&&(P=[]),Object(k.a)(L,function(p){return!Object(w.a)(P,p)})};C.a=T},function(z,C,b){"use strict";var k=b(2),w=b(20),T=b(0),L=b(10);function P(p,m){if(!Object(T.a)(p))return null;var S;if(Object(k.a)(m)&&(S=m),Object(L.a)(m)&&(S=function(g){return Object(w.a)(g,m)}),S){for(var x=0;x<p.length;x+=1)if(S(p[x]))return p[x]}return null}C.a=P},function(z,C,b){"use strict";function k(w,T,L){L===void 0&&(L=0);for(var P=L;P<w.length;P++)if(T(w[P],P))return P;return-1}C.a=k},function(z,C,b){"use strict";var k=b(7),w=b(0),T=function(L,P){for(var p=null,m=0;m<L.length;m++){var S=L[m],x=S[P];if(!Object(k.a)(x)){Object(w.a)(x)?p=x[0]:p=x;break}}return p};C.a=T},function(z,C,b){"use strict";var k=b(0),w=function(T){if(!Object(k.a)(T))return[];for(var L=[],P=0;P<T.length;P++)L=L.concat(T[P]);return L};C.a=w},function(z,C,b){"use strict";var k=b(0),w=function(T,L){if(L===void 0&&(L=[]),!Object(k.a)(T))L.push(T);else for(var P=0;P<T.length;P+=1)w(T[P],L);return L};C.a=w},function(z,C,b){"use strict";var k=b(0),w=b(22),T=b(23),L=function(P){var p=P.filter(function(A){return!isNaN(A)});if(!p.length)return{min:0,max:0};if(Object(k.a)(P[0])){for(var m=[],S=0;S<P.length;S++)m=m.concat(P[S]);p=m}var x=Object(w.a)(p),g=Object(T.a)(p);return{min:g,max:x}};C.a=L},function(z,C,b){"use strict";var k=Array.prototype,w=k.splice,T=k.indexOf,L=function(P){for(var p=[],m=1;m<arguments.length;m++)p[m-1]=arguments[m];for(var S=0;S<p.length;S++)for(var x=p[S],g=-1;(g=T.call(P,x))>-1;)w.call(P,g,1);return P};C.a=L},function(z,C,b){"use strict";var k=b(1),w=b(24),T=function(L,P){var p=[];if(!Object(k.a)(L))return p;for(var m=-1,S=[],x=L.length;++m<x;){var g=L[m];P(g,m,L)&&(p.push(g),S.push(m))}return Object(w.a)(L,S),p};C.a=T},function(z,C,b){"use strict";var k=b(0),w=b(4),T=b(2);function L(P,p){var m;if(Object(T.a)(p))m=function(x,g){return p(x)-p(g)};else{var S=[];Object(w.a)(p)?S.push(p):Object(k.a)(p)&&(S=p),m=function(x,g){for(var A=0;A<S.length;A+=1){var E=S[A];if(x[E]>g[E])return 1;if(x[E]<g[E])return-1}return 0}}return P.sort(m),P}C.a=L},function(z,C,b){"use strict";var k=b(26),w=function(){for(var T=[],L=0;L<arguments.length;L++)T[L]=arguments[L];return Object(k.a)([].concat.apply([],T))};C.a=w},function(z,C,b){"use strict";var k=b(0),w=b(7);C.a=function(T,L){for(var P=[],p={},m=0;m<T.length;m++){var S=T[m],x=S[L];if(!Object(w.a)(x)){Object(k.a)(x)||(x=[x]);for(var g=0;g<x.length;g++){var A=x[g];p[A]||(P.push(A),p[A]=!0)}}}return P}},function(z,C,b){"use strict";C.a=w;var k=b(1);function w(T){if(Object(k.a)(T))return T[0]}},function(z,C,b){"use strict";C.a=w;var k=b(1);function w(T){if(Object(k.a)(T)){var L=T;return L[L.length-1]}}},function(z,C,b){"use strict";var k=b(0),w=b(4);function T(L,P){return Object(k.a)(L)||Object(w.a)(L)?L[0]===P:!1}C.a=T},function(z,C,b){"use strict";var k=b(0),w=b(4);function T(L,P){return Object(k.a)(L)||Object(w.a)(L)?L[L.length-1]===P:!1}C.a=T},function(z,C,b){"use strict";var k=function(w,T){for(var L=0;L<w.length;L++)if(!T(w[L],L))return!1;return!0};C.a=k},function(z,C,b){"use strict";var k=function(w,T){for(var L=0;L<w.length;L++)if(T(w[L],L))return!0;return!1};C.a=k},function(z,C,b){"use strict";var k=b(27);C.a=function(w,T){if(!T)return[w];var L=Object(k.a)(w,T),P=[];for(var p in L)P.push(L[p]);return P}},function(z,C,b){"use strict";function k(w,T){return w["_wrap_"+T]}C.a=k},function(z,C,b){"use strict";function k(w,T){if(w["_wrap_"+T])return w["_wrap_"+T];var L=function(P){w[T](P)};return w["_wrap_"+T]=L,L}C.a=k},function(z,C,b){"use strict";var k={};function w(T){var L=k[T];if(!L){for(var P=T.toString(16),p=P.length;p<6;p++)P="0"+P;L="#"+P,k[T]=L}return L}C.a=w},function(z,C,b){"use strict";var k=b(0);function w(T){var L=0,P=0,p=0,m=0;return Object(k.a)(T)?T.length===1?L=P=p=m=T[0]:T.length===2?(L=p=T[0],P=m=T[1]):T.length===3?(L=T[0],P=m=T[1],p=T[2]):(L=T[0],P=T[1],p=T[2],m=T[3]):L=P=p=m=T,{r1:L,r2:P,r3:p,r4:m}}C.a=w},function(z,C,b){"use strict";var k=function(w,T,L){return w<T?T:w>L?L:w};C.a=k},function(z,C,b){"use strict";var k=function(w,T){var L=T.toString(),P=L.indexOf(".");if(P===-1)return Math.round(w);var p=L.substr(P+1).length;return p>20&&(p=20),parseFloat(w.toFixed(p))};C.a=k},function(z,C,b){"use strict";var k=b(5),w=function(T){return Object(k.a)(T)&&T%1!==0};C.a=w},function(z,C,b){"use strict";var k=b(5),w=function(T){return Object(k.a)(T)&&T%2===0};C.a=w},function(z,C,b){"use strict";var k=b(5),w=Number.isInteger?Number.isInteger:function(T){return Object(k.a)(T)&&T%1===0};C.a=w},function(z,C,b){"use strict";var k=b(5),w=function(T){return Object(k.a)(T)&&T<0};C.a=w},function(z,C,b){"use strict";C.a=w;var k=1e-5;function w(T,L,P){return P===void 0&&(P=k),Math.abs(T-L)<P}},function(z,C,b){"use strict";var k=b(5),w=function(T){return Object(k.a)(T)&&T%2!==0};C.a=w},function(z,C,b){"use strict";var k=b(5),w=function(T){return Object(k.a)(T)&&T>0};C.a=w},function(z,C,b){"use strict";var k=b(0),w=b(2);C.a=function(T,L){if(Object(k.a)(T)){for(var P,p=-1/0,m=0;m<T.length;m++){var S=T[m],x=Object(w.a)(L)?L(S):S[L];x>p&&(P=S,p=x)}return P}}},function(z,C,b){"use strict";var k=b(0),w=b(2);C.a=function(T,L){if(Object(k.a)(T)){for(var P,p=1/0,m=0;m<T.length;m++){var S=T[m],x=Object(w.a)(L)?L(S):S[L];x<p&&(P=S,p=x)}return P}}},function(z,C,b){"use strict";var k=function(w,T){return(w%T+T)%T};C.a=k},function(z,C,b){"use strict";var k=180/Math.PI,w=function(T){return k*T};C.a=w},function(z,C,b){"use strict";C.a=parseInt},function(z,C,b){"use strict";var k=Math.PI/180,w=function(T){return k*T};C.a=w},function(z,C,b){"use strict";var k=b(8);C.a=k.a},function(z,C,b){"use strict";var k=b(29);C.a=k.a},function(z,C,b){"use strict";var k=b(13),w=b(15);C.a=function(T,L){return Object(k.a)(Object(w.a)(T),L)}},function(z,C,b){"use strict";var k=b(9),w=function(T){return Object(k.a)(T).toLowerCase()};C.a=w},function(z,C,b){"use strict";var k=b(9),w=function(T){var L=Object(k.a)(T);return L.charAt(0).toLowerCase()+L.substring(1)};C.a=w},function(z,C,b){"use strict";function k(w,T){return!w||!T?w:w.replace(/\\?\{([^{}]+)\}/g,function(L,P){return L.charAt(0)==="\\"?L.slice(1):T[P]===void 0?"":T[P]})}C.a=k},function(z,C,b){"use strict";var k=b(9),w=function(T){return Object(k.a)(T).toUpperCase()};C.a=w},function(z,C,b){"use strict";var k=b(9),w=function(T){var L=Object(k.a)(T);return L.charAt(0).toUpperCase()+L.substring(1)};C.a=w},function(z,C,b){"use strict";var k=b(3),w=function(T){return Object(k.a)(T,"Arguments")};C.a=w},function(z,C,b){"use strict";var k=b(3),w=function(T){return Object(k.a)(T,"Boolean")};C.a=w},function(z,C,b){"use strict";var k=b(3),w=function(T){return Object(k.a)(T,"Date")};C.a=w},function(z,C,b){"use strict";var k=b(3),w=function(T){return Object(k.a)(T,"Error")};C.a=w},function(z,C,b){"use strict";var k=b(5);C.a=function(w){return Object(k.a)(w)&&isFinite(w)}},function(z,C,b){"use strict";var k=function(w){return w===null};C.a=k},function(z,C,b){"use strict";var k=b(3),w=function(T){return Object(k.a)(T,"RegExp")};C.a=w},function(z,C,b){"use strict";var k=function(w){return w===void 0};C.a=k},function(z,C,b){"use strict";var k=function(w){return w instanceof Element||w instanceof HTMLDocument};C.a=k},function(z,C,b){"use strict";C.a=k;function k(w){var T=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(L){return setTimeout(L,16)};return T(w)}},function(z,C,b){"use strict";C.a=k;function k(w){var T=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout;T(w)}},function(z,C,b){"use strict";var k=b(16),w=b(2),T=function(){for(var L=[],P=0;P<arguments.length;P++)L[P]=arguments[P];for(var p=L[0],m=1;m<L.length;m++){var S=L[m];Object(w.a)(S)&&(S=S.prototype),Object(k.a)(p.prototype,S)}};C.a=T},function(z,C,b){"use strict";var k=b(0),w=function(T){if(typeof T!="object"||T===null)return T;var L;if(Object(k.a)(T)){L=[];for(var P=0,p=T.length;P<p;P++)typeof T[P]=="object"&&T[P]!=null?L[P]=w(T[P]):L[P]=T[P]}else{L={};for(var m in T)typeof T[m]=="object"&&T[m]!=null?L[m]=w(T[m]):L[m]=T[m]}return L};C.a=w},function(z,C,b){"use strict";function k(w,T,L){var P;return function(){var p=this,m=arguments,S=function(){P=null,L||w.apply(p,m)},x=L&&!P;clearTimeout(P),P=setTimeout(S,T),x&&w.apply(p,m)}}C.a=k},function(z,C,b){"use strict";var k=b(0),w=b(10),T=5;function L(p,m,S,x){S=S||0,x=x||T;for(var g in m)if(m.hasOwnProperty(g)){var A=m[g];A!==null&&Object(w.a)(A)?(Object(w.a)(p[g])||(p[g]={}),S<x?L(p[g],A,S+1,x):p[g]=m[g]):Object(k.a)(A)?(p[g]=[],p[g]=p[g].concat(A)):A!==void 0&&(p[g]=A)}}var P=function(p){for(var m=[],S=1;S<arguments.length;S++)m[S-1]=arguments[S];for(var x=0;x<m.length;x+=1)L(p,m[x]);return p};C.a=P},function(z,C,b){"use strict";var k=b(16),w=b(2),T=function(L,P,p,m){Object(w.a)(P)||(p=P,P=L,L=function(){});var S=Object.create?function(g,A){return Object.create(g,{constructor:{value:A}})}:function(g,A){function E(){}E.prototype=g;var D=new E;return D.constructor=A,D},x=S(P.prototype,L);return L.prototype=Object(k.a)(x,L.prototype),L.superclass=S(P.prototype,P),Object(k.a)(x,p),Object(k.a)(L,m),L};C.a=T},function(z,C,b){"use strict";var k=b(1),w=function(T,L){if(!Object(k.a)(T))return-1;var P=Array.prototype.indexOf;if(P)return P.call(T,L);for(var p=-1,m=0;m<T.length;m++)if(T[m]===L){p=m;break}return p};C.a=w},function(z,C,b){"use strict";var k=b(7),w=b(1),T=b(30),L=b(31),P=Object.prototype.hasOwnProperty;function p(m){if(Object(k.a)(m))return!0;if(Object(w.a)(m))return!m.length;var S=Object(T.a)(m);if(S==="Map"||S==="Set")return!m.size;if(Object(L.a)(m))return!Object.keys(m).length;for(var x in m)if(P.call(m,x))return!1;return!0}C.a=p},function(z,C,b){"use strict";var k=b(2),w=b(33);C.a=function(T,L,P){return Object(k.a)(P)?!!P(T,L):Object(w.a)(T,L)}},function(z,C,b){"use strict";var k=b(1),w=function(T,L){if(!Object(k.a)(T))return T;for(var P=[],p=0;p<T.length;p++){var m=T[p];P.push(L(m,p))}return P};C.a=w},function(z,C,b){"use strict";var k=b(7),w=b(12),T=function(L){return L};C.a=function(L,P){P===void 0&&(P=T);var p={};return Object(w.a)(L)&&!Object(k.a)(L)&&Object.keys(L).forEach(function(m){p[m]=P(L[m],m)}),p}},function(z,C,b){"use strict";var k=b(4);C.a=function(w,T,L){for(var P=0,p=Object(k.a)(T)?T.split("."):T;w&&P<p.length;)w=w[p[P++]];return w===void 0||P<p.length?L:w}},function(z,C,b){"use strict";var k=b(12),w=b(4),T=b(5);C.a=function(L,P,p){var m=L,S=Object(w.a)(P)?P.split("."):P;return S.forEach(function(x,g){g<S.length-1?(Object(k.a)(m[x])||(m[x]=Object(T.a)(S[g+1])?[]:{}),m=m[x]):m[x]=p}),L}},function(z,C,b){"use strict";var k=b(8),w=b(10),T=Object.prototype.hasOwnProperty;C.a=function(L,P){if(L===null||!Object(w.a)(L))return{};var p={};return Object(k.a)(P,function(m){T.call(L,m)&&(p[m]=L[m])}),p}},function(z,C,b){"use strict";var k=b(25);C.a=function(w,T){return Object(k.a)(w,function(L,P,p){return T.includes(p)||(L[p]=P),L},{})}},function(z,C,b){"use strict";C.a=function(k,w,T){var L,P,p,m,S=0;T||(T={});var x=function(){S=T.leading===!1?0:Date.now(),L=null,m=k.apply(P,p),L||(P=p=null)},g=function(){var A=Date.now();!S&&T.leading===!1&&(S=A);var E=w-(A-S);return P=this,p=arguments,E<=0||E>w?(L&&(clearTimeout(L),L=null),S=A,m=k.apply(P,p),L||(P=p=null)):!L&&T.trailing!==!1&&(L=setTimeout(x,E)),m};return g.cancel=function(){clearTimeout(L),S=0,L=P=p=null},g}},function(z,C,b){"use strict";var k=b(1);C.a=function(w){return Object(k.a)(w)?Array.prototype.slice.call(w):[]}},function(z,C,b){"use strict";var k={};C.a=function(w){return w=w||"g",k[w]?k[w]+=1:k[w]=1,w+k[w]}},function(z,C,b){"use strict";C.a=function(){}},function(z,C,b){"use strict";C.a=function(k){return k}},function(z,C,b){"use strict";C.a=T;var k=b(7),w=b(1);function T(L){return Object(k.a)(L)?0:Object(w.a)(L)?L.length:Object.keys(L).length}},function(z,C,b){"use strict";C.a=U;var k=function(At,Z){return k=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(q,bt){q.__proto__=bt}||function(q,bt){for(var _t in bt)Object.prototype.hasOwnProperty.call(bt,_t)&&(q[_t]=bt[_t])},k(At,Z)};function w(At,Z){if(typeof Z!="function"&&Z!==null)throw new TypeError("Class extends value "+String(Z)+" is not a constructor or null");k(At,Z);function q(){this.constructor=At}At.prototype=Z===null?Object.create(Z):(q.prototype=Z.prototype,new q)}var T=function(){return T=Object.assign||function(Z){for(var q,bt=1,_t=arguments.length;bt<_t;bt++){q=arguments[bt];for(var nt in q)Object.prototype.hasOwnProperty.call(q,nt)&&(Z[nt]=q[nt])}return Z},T.apply(this,arguments)};function L(At,Z){var q={};for(var bt in At)Object.prototype.hasOwnProperty.call(At,bt)&&Z.indexOf(bt)<0&&(q[bt]=At[bt]);if(At!=null&&typeof Object.getOwnPropertySymbols=="function")for(var _t=0,bt=Object.getOwnPropertySymbols(At);_t<bt.length;_t++)Z.indexOf(bt[_t])<0&&Object.prototype.propertyIsEnumerable.call(At,bt[_t])&&(q[bt[_t]]=At[bt[_t]]);return q}function P(At,Z,q,bt){var _t=arguments.length,nt=_t<3?Z:bt===null?bt=Object.getOwnPropertyDescriptor(Z,q):bt,vt;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")nt=Reflect.decorate(At,Z,q,bt);else for(var It=At.length-1;It>=0;It--)(vt=At[It])&&(nt=(_t<3?vt(nt):_t>3?vt(Z,q,nt):vt(Z,q))||nt);return _t>3&&nt&&Object.defineProperty(Z,q,nt),nt}function p(At,Z){return function(q,bt){Z(q,bt,At)}}function m(At,Z,q,bt,_t,nt){function vt(Wt){if(Wt!==void 0&&typeof Wt!="function")throw new TypeError("Function expected");return Wt}for(var It=bt.kind,Pt=It==="getter"?"get":It==="setter"?"set":"value",Et=!Z&&At?bt.static?At:At.prototype:null,Nt=Z||(Et?Object.getOwnPropertyDescriptor(Et,bt.name):{}),$t,ue=!1,ie=q.length-1;ie>=0;ie--){var Dt={};for(var ne in bt)Dt[ne]=ne==="access"?{}:bt[ne];for(var ne in bt.access)Dt.access[ne]=bt.access[ne];Dt.addInitializer=function(Wt){if(ue)throw new TypeError("Cannot add initializers after decoration has completed");nt.push(vt(Wt||null))};var pe=(0,q[ie])(It==="accessor"?{get:Nt.get,set:Nt.set}:Nt[Pt],Dt);if(It==="accessor"){if(pe===void 0)continue;if(pe===null||typeof pe!="object")throw new TypeError("Object expected");($t=vt(pe.get))&&(Nt.get=$t),($t=vt(pe.set))&&(Nt.set=$t),($t=vt(pe.init))&&_t.push($t)}else($t=vt(pe))&&(It==="field"?_t.push($t):Nt[Pt]=$t)}Et&&Object.defineProperty(Et,bt.name,Nt),ue=!0}function S(At,Z,q){for(var bt=arguments.length>2,_t=0;_t<Z.length;_t++)q=bt?Z[_t].call(At,q):Z[_t].call(At);return bt?q:void 0}function x(At){return typeof At=="symbol"?At:"".concat(At)}function g(At,Z,q){return typeof Z=="symbol"&&(Z=Z.description?"[".concat(Z.description,"]"):""),Object.defineProperty(At,"name",{configurable:!0,value:q?"".concat(q," ",Z):Z})}function A(At,Z){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(At,Z)}function E(At,Z,q,bt){function _t(nt){return nt instanceof q?nt:new q(function(vt){vt(nt)})}return new(q||(q=Promise))(function(nt,vt){function It(Nt){try{Et(bt.next(Nt))}catch($t){vt($t)}}function Pt(Nt){try{Et(bt.throw(Nt))}catch($t){vt($t)}}function Et(Nt){Nt.done?nt(Nt.value):_t(Nt.value).then(It,Pt)}Et((bt=bt.apply(At,Z||[])).next())})}function D(At,Z){var q={label:0,sent:function(){if(nt[0]&1)throw nt[1];return nt[1]},trys:[],ops:[]},bt,_t,nt,vt;return vt={next:It(0),throw:It(1),return:It(2)},typeof Symbol=="function"&&(vt[Symbol.iterator]=function(){return this}),vt;function It(Et){return function(Nt){return Pt([Et,Nt])}}function Pt(Et){if(bt)throw new TypeError("Generator is already executing.");for(;vt&&(vt=0,Et[0]&&(q=0)),q;)try{if(bt=1,_t&&(nt=Et[0]&2?_t.return:Et[0]?_t.throw||((nt=_t.return)&&nt.call(_t),0):_t.next)&&!(nt=nt.call(_t,Et[1])).done)return nt;switch(_t=0,nt&&(Et=[Et[0]&2,nt.value]),Et[0]){case 0:case 1:nt=Et;break;case 4:return q.label++,{value:Et[1],done:!1};case 5:q.label++,_t=Et[1],Et=[0];continue;case 7:Et=q.ops.pop(),q.trys.pop();continue;default:if(nt=q.trys,!(nt=nt.length>0&&nt[nt.length-1])&&(Et[0]===6||Et[0]===2)){q=0;continue}if(Et[0]===3&&(!nt||Et[1]>nt[0]&&Et[1]<nt[3])){q.label=Et[1];break}if(Et[0]===6&&q.label<nt[1]){q.label=nt[1],nt=Et;break}if(nt&&q.label<nt[2]){q.label=nt[2],q.ops.push(Et);break}nt[2]&&q.ops.pop(),q.trys.pop();continue}Et=Z.call(At,q)}catch(Nt){Et=[6,Nt],_t=0}finally{bt=nt=0}if(Et[0]&5)throw Et[1];return{value:Et[0]?Et[1]:void 0,done:!0}}}var F=Object.create?function(At,Z,q,bt){bt===void 0&&(bt=q);var _t=Object.getOwnPropertyDescriptor(Z,q);(!_t||("get"in _t?!Z.__esModule:_t.writable||_t.configurable))&&(_t={enumerable:!0,get:function(){return Z[q]}}),Object.defineProperty(At,bt,_t)}:function(At,Z,q,bt){bt===void 0&&(bt=q),At[bt]=Z[q]};function y(At,Z){for(var q in At)q!=="default"&&!Object.prototype.hasOwnProperty.call(Z,q)&&F(Z,At,q)}function h(At){var Z=typeof Symbol=="function"&&Symbol.iterator,q=Z&&At[Z],bt=0;if(q)return q.call(At);if(At&&typeof At.length=="number")return{next:function(){return At&&bt>=At.length&&(At=void 0),{value:At&&At[bt++],done:!At}}};throw new TypeError(Z?"Object is not iterable.":"Symbol.iterator is not defined.")}function Y(At,Z){var q=typeof Symbol=="function"&&At[Symbol.iterator];if(!q)return At;var bt=q.call(At),_t,nt=[],vt;try{for(;(Z===void 0||Z-- >0)&&!(_t=bt.next()).done;)nt.push(_t.value)}catch(It){vt={error:It}}finally{try{_t&&!_t.done&&(q=bt.return)&&q.call(bt)}finally{if(vt)throw vt.error}}return nt}function $(){for(var At=[],Z=0;Z<arguments.length;Z++)At=At.concat(Y(arguments[Z]));return At}function U(){for(var At=0,Z=0,q=arguments.length;Z<q;Z++)At+=arguments[Z].length;for(var bt=Array(At),_t=0,Z=0;Z<q;Z++)for(var nt=arguments[Z],vt=0,It=nt.length;vt<It;vt++,_t++)bt[_t]=nt[vt];return bt}function W(At,Z,q){if(q||arguments.length===2)for(var bt=0,_t=Z.length,nt;bt<_t;bt++)(nt||!(bt in Z))&&(nt||(nt=Array.prototype.slice.call(Z,0,bt)),nt[bt]=Z[bt]);return At.concat(nt||Array.prototype.slice.call(Z))}function V(At){return this instanceof V?(this.v=At,this):new V(At)}function H(At,Z,q){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var bt=q.apply(At,Z||[]),_t,nt=[];return _t={},vt("next"),vt("throw"),vt("return"),_t[Symbol.asyncIterator]=function(){return this},_t;function vt(ue){bt[ue]&&(_t[ue]=function(ie){return new Promise(function(Dt,ne){nt.push([ue,ie,Dt,ne])>1||It(ue,ie)})})}function It(ue,ie){try{Pt(bt[ue](ie))}catch(Dt){$t(nt[0][3],Dt)}}function Pt(ue){ue.value instanceof V?Promise.resolve(ue.value.v).then(Et,Nt):$t(nt[0][2],ue)}function Et(ue){It("next",ue)}function Nt(ue){It("throw",ue)}function $t(ue,ie){ue(ie),nt.shift(),nt.length&&It(nt[0][0],nt[0][1])}}function Q(At){var Z,q;return Z={},bt("next"),bt("throw",function(_t){throw _t}),bt("return"),Z[Symbol.iterator]=function(){return this},Z;function bt(_t,nt){Z[_t]=At[_t]?function(vt){return(q=!q)?{value:V(At[_t](vt)),done:!1}:nt?nt(vt):vt}:nt}}function tt(At){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Z=At[Symbol.asyncIterator],q;return Z?Z.call(At):(At=typeof h=="function"?h(At):At[Symbol.iterator](),q={},bt("next"),bt("throw"),bt("return"),q[Symbol.asyncIterator]=function(){return this},q);function bt(nt){q[nt]=At[nt]&&function(vt){return new Promise(function(It,Pt){vt=At[nt](vt),_t(It,Pt,vt.done,vt.value)})}}function _t(nt,vt,It,Pt){Promise.resolve(Pt).then(function(Et){nt({value:Et,done:It})},vt)}}function rt(At,Z){return Object.defineProperty?Object.defineProperty(At,"raw",{value:Z}):At.raw=Z,At}var ct=Object.create?function(At,Z){Object.defineProperty(At,"default",{enumerable:!0,value:Z})}:function(At,Z){At.default=Z};function ot(At){if(At&&At.__esModule)return At;var Z={};if(At!=null)for(var q in At)q!=="default"&&Object.prototype.hasOwnProperty.call(At,q)&&F(Z,At,q);return ct(Z,At),Z}function xt(At){return At&&At.__esModule?At:{default:At}}function pt(At,Z,q,bt){if(q==="a"&&!bt)throw new TypeError("Private accessor was defined without a getter");if(typeof Z=="function"?At!==Z||!bt:!Z.has(At))throw new TypeError("Cannot read private member from an object whose class did not declare it");return q==="m"?bt:q==="a"?bt.call(At):bt?bt.value:Z.get(At)}function Xt(At,Z,q,bt,_t){if(bt==="m")throw new TypeError("Private method is not writable");if(bt==="a"&&!_t)throw new TypeError("Private accessor was defined without a setter");if(typeof Z=="function"?At!==Z||!_t:!Z.has(At))throw new TypeError("Cannot write private member to an object whose class did not declare it");return bt==="a"?_t.call(At,q):_t?_t.value=q:Z.set(At,q),q}function Ct(At,Z){if(Z===null||typeof Z!="object"&&typeof Z!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof At=="function"?Z===At:At.has(Z)}},function(z,C,b){"use strict";var k=b(4),w=b(9),T=b(34);C.a=function(L,P,p,m){m===void 0&&(m="...");var S=16,x=Object(T.a)(m,p),g=Object(k.a)(L)?L:Object(w.a)(L),A=P,E=[],D,F;if(Object(T.a)(L,p)<=P)return L;for(;D=g.substr(0,S),F=Object(T.a)(D,p),!(F+x>A&&F>A);)if(E.push(D),A-=F,g=g.substr(S),!g)return E.join("");for(;D=g.substr(0,1),F=Object(T.a)(D,p),!(F+x>A);)if(E.push(D),A-=F,g=g.substr(1),!g)return E.join("");return""+E.join("")+m}},function(z,C,b){"use strict";var k=function(){function w(){this.map={}}return w.prototype.has=function(T){return this.map[T]!==void 0},w.prototype.get=function(T,L){var P=this.map[T];return P===void 0?L:P},w.prototype.set=function(T,L){this.map[T]=L},w.prototype.clear=function(){this.map={}},w.prototype.delete=function(T){delete this.map[T]},w.prototype.size=function(){return Object.keys(this.map).length},w}();C.a=k},function(z,C){function b(p,m,S,x){x===void 0&&(x=[]);var g=this;g.w=p||0,g.h=m||0,g.y=S||0,g.x=0,g.c=x||[],g.cs=x.length,g.prelim=0,g.mod=0,g.shift=0,g.change=0,g.tl=null,g.tr=null,g.el=null,g.er=null,g.msel=0,g.mser=0}b.fromNode=function(p,m){if(!p)return null;var S=[];return p.children.forEach(function(x){S.push(b.fromNode(x,m))}),m?new b(p.height,p.width,p.x,S):new b(p.width,p.height,p.y,S)};function k(p,m,S){S?p.y+=m:p.x+=m,p.children.forEach(function(x){k(x,m,S)})}function w(p,m){var S=m?p.y:p.x;return p.children.forEach(function(x){S=Math.min(w(x,m),S)}),S}function T(p,m){var S=w(p,m);k(p,-S,m)}function L(p,m,S){S?m.y=p.x:m.x=p.x,p.c.forEach(function(x,g){L(x,m.children[g],S)})}function P(p,m,S){S===void 0&&(S=0),m?(p.x=S,S+=p.width):(p.y=S,S+=p.height),p.children.forEach(function(x){P(x,m,S)})}z.exports=function(p,m){m===void 0&&(m={});var S=m.isHorizontal;function x(tt){if(tt.cs===0){g(tt);return}x(tt.c[0]);for(var rt=H(y(tt.c[0].el),0,null),ct=1;ct<tt.cs;++ct){x(tt.c[ct]);var ot=y(tt.c[ct].er);A(tt,ct,rt),rt=H(ot,ct,rt)}$(tt),g(tt)}function g(tt){tt.cs===0?(tt.el=tt,tt.er=tt,tt.msel=tt.mser=0):(tt.el=tt.c[0].el,tt.msel=tt.c[0].msel,tt.er=tt.c[tt.cs-1].er,tt.mser=tt.c[tt.cs-1].mser)}function A(tt,rt,ct){for(var ot=tt.c[rt-1],xt=ot.mod,pt=tt.c[rt],Xt=pt.mod;ot!==null&&pt!==null;){y(ot)>ct.low&&(ct=ct.nxt);var Ct=xt+ot.prelim+ot.w-(Xt+pt.prelim);Ct>0&&(Xt+=Ct,E(tt,rt,ct.index,Ct));var At=y(ot),Z=y(pt);At<=Z&&(ot=F(ot),ot!==null&&(xt+=ot.mod)),At>=Z&&(pt=D(pt),pt!==null&&(Xt+=pt.mod))}!ot&&pt?h(tt,rt,pt,Xt):ot&&!pt&&Y(tt,rt,ot,xt)}function E(tt,rt,ct,ot){tt.c[rt].mod+=ot,tt.c[rt].msel+=ot,tt.c[rt].mser+=ot,W(tt,rt,ct,ot)}function D(tt){return tt.cs===0?tt.tl:tt.c[0]}function F(tt){return tt.cs===0?tt.tr:tt.c[tt.cs-1]}function y(tt){return tt.y+tt.h}function h(tt,rt,ct,ot){var xt=tt.c[0].el;xt.tl=ct;var pt=ot-ct.mod-tt.c[0].msel;xt.mod+=pt,xt.prelim-=pt,tt.c[0].el=tt.c[rt].el,tt.c[0].msel=tt.c[rt].msel}function Y(tt,rt,ct,ot){var xt=tt.c[rt].er;xt.tr=ct;var pt=ot-ct.mod-tt.c[rt].mser;xt.mod+=pt,xt.prelim-=pt,tt.c[rt].er=tt.c[rt-1].er,tt.c[rt].mser=tt.c[rt-1].mser}function $(tt){tt.prelim=(tt.c[0].prelim+tt.c[0].mod+tt.c[tt.cs-1].mod+tt.c[tt.cs-1].prelim+tt.c[tt.cs-1].w)/2-tt.w/2}function U(tt,rt){rt+=tt.mod,tt.x=tt.prelim+rt,V(tt);for(var ct=0;ct<tt.cs;ct++)U(tt.c[ct],rt)}function W(tt,rt,ct,ot){if(ct!==rt-1){var xt=rt-ct;tt.c[ct+1].shift+=ot/xt,tt.c[rt].shift-=ot/xt,tt.c[rt].change-=ot-ot/xt}}function V(tt){for(var rt=0,ct=0,ot=0;ot<tt.cs;ot++)rt+=tt.c[ot].shift,ct+=rt+tt.c[ot].change,tt.c[ot].mod+=ct}function H(tt,rt,ct){for(;ct!==null&&tt>=ct.low;)ct=ct.nxt;return{low:tt,index:rt,nxt:ct}}P(p,S);var Q=b.fromNode(p,S);return x(Q),U(Q,0),L(Q,p,S),T(p,S),p}},function(z,C,b){function k(g,A){g.prototype=Object.create(A.prototype),g.prototype.constructor=g,w(g,A)}function w(g,A){return w=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(D,F){return D.__proto__=F,D},w(g,A)}var T=b(11),L=b(121),P=b(17),p=b(6),m=function(g){k(A,g);function A(){return g.apply(this,arguments)||this}var E=A.prototype;return E.execute=function(){var F=this;return F.rootNode.width=0,P(F.rootNode,F.options,L)},A}(T),S={};function x(g,A){return A=p.assign({},S,A),new m(g,A).execute()}z.exports=x},function(z,C,b){var k=b(6);function w(P,p){P===void 0&&(P=0),p===void 0&&(p=[]);var m=this;m.x=m.y=0,m.leftChild=m.rightChild=null,m.height=0,m.children=p}var T={isHorizontal:!0,nodeSep:20,nodeSize:20,rankSep:200,subTreeSep:10};function L(P,p,m){m?(p.x=P.x,p.y=P.y):(p.x=P.y,p.y=P.x),P.children.forEach(function(S,x){L(S,p.children[x],m)})}z.exports=function(P,p){p===void 0&&(p={}),p=k.assign({},T,p);var m=0;function S(D){if(!D)return null;D.width=0,D.depth&&D.depth>m&&(m=D.depth);var F=D.children,y=F.length,h=new w(D.height,[]);return F.forEach(function(Y,$){var U=S(Y);h.children.push(U),$===0&&(h.leftChild=U),$===y-1&&(h.rightChild=U)}),h.originNode=D,h.isLeaf=D.isLeaf(),h}function x(D){if(D.isLeaf||D.children.length===0)D.drawingDepth=m;else{var F=D.children.map(function(h){return x(h)}),y=Math.min.apply(null,F);D.drawingDepth=y-1}return D.drawingDepth}var g;function A(D){D.x=D.drawingDepth*p.rankSep,D.isLeaf?(D.y=0,g&&(D.y=g.y+g.height+p.nodeSep,D.originNode.parent!==g.originNode.parent&&(D.y+=p.subTreeSep)),g=D):(D.children.forEach(function(F){A(F)}),D.y=(D.leftChild.y+D.rightChild.y)/2)}var E=S(P);return x(E),A(E),L(E,P,p.isHorizontal),P}},function(z,C,b){function k(E,D){E.prototype=Object.create(D.prototype),E.prototype.constructor=E,w(E,D)}function w(E,D){return w=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(y,h){return y.__proto__=h,y},w(E,D)}var T=b(11),L=b(123),P=b(35),p=b(6),m=["LR","RL","H"],S=m[0],x=function(E){k(D,E);function D(){return E.apply(this,arguments)||this}var F=D.prototype;return F.execute=function(){var h=this,Y=h.options,$=h.rootNode;Y.isHorizontal=!0;var U=Y.indent,W=U===void 0?20:U,V=Y.dropCap,H=V===void 0?!0:V,Q=Y.direction,tt=Q===void 0?S:Q,rt=Y.align;if(tt&&m.indexOf(tt)===-1)throw new TypeError("Invalid direction: "+tt);if(tt===m[0])L($,W,H,rt);else if(tt===m[1])L($,W,H,rt),$.right2left();else if(tt===m[2]){var ct=P($,Y),ot=ct.left,xt=ct.right;L(ot,W,H,rt),ot.right2left(),L(xt,W,H,rt);var pt=ot.getBoundingBox();xt.translate(pt.width,0),$.x=xt.x-$.width/2}return $},D}(T),g={};function A(E,D){return D=p.assign({},g,D),new x(E,D).execute()}z.exports=A},function(z,C,b){var k=b(6);function w(T,L,P,p,m){var S=typeof P=="function"?P(T):P*T.depth;if(!p)try{if(T.id===T.parent.children[0].id){T.x+=S,T.y=L?L.y:0;return}}catch(A){}if(T.x+=S,L){if(T.y=L.y+k.getHeight(L,T,m),L.parent&&T.parent.id!==L.parent.id){var x=L.parent,g=x.y+k.getHeight(x,T,m);T.y=g>T.y?g:T.y}}else T.y=0}z.exports=function(T,L,P,p){var m=null;T.eachNode(function(S){w(S,m,L,P,p),m=S})}},function(z,C,b){function k(g,A){g.prototype=Object.create(A.prototype),g.prototype.constructor=g,w(g,A)}function w(g,A){return w=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(D,F){return D.__proto__=F,D},w(g,A)}var T=b(11),L=b(125),P=b(17),p=b(6),m=function(g){k(A,g);function A(){return g.apply(this,arguments)||this}var E=A.prototype;return E.execute=function(){var F=this;return P(F.rootNode,F.options,L)},A}(T),S={};function x(g,A){return A=p.assign({},S,A),new m(g,A).execute()}z.exports=x},function(z,C,b){var k=b(6);function w(P,p){var m=0;return P.children.length?P.children.forEach(function(S){m+=w(S,p)}):m=P.height,P._subTreeSep=p.getSubTreeSep(P.data),P.totalHeight=Math.max(P.height,m)+2*P._subTreeSep,P.totalHeight}function T(P){var p=P.children,m=p.length;if(m){p.forEach(function(D){T(D)});var S=p[0],x=p[m-1],g=x.y-S.y+x.height,A=0;if(p.forEach(function(D){A+=D.totalHeight}),g>P.height)P.y=S.y+g/2-P.height/2;else if(p.length!==1||P.height>A){var E=P.y+(P.height-g)/2-S.y;p.forEach(function(D){D.translate(0,E)})}else P.y=(S.y+S.height/2+x.y+x.height/2)/2-P.height/2}}var L={getSubTreeSep:function(){return 0}};z.exports=function(P,p){p===void 0&&(p={}),p=k.assign({},L,p),P.parent={x:0,width:0,height:0,y:0},P.BFTraverse(function(m){m.x=m.parent.x+m.parent.width}),P.parent=null,w(P,p),P.startY=0,P.y=P.totalHeight/2-P.height/2,P.eachNode(function(m){var S=m.children,x=S.length;if(x){var g=S[0];if(g.startY=m.startY+m._subTreeSep,x===1)g.y=m.y+m.height/2-g.height/2;else{g.y=g.startY+g.totalHeight/2-g.height/2;for(var A=1;A<x;A++){var E=S[A];E.startY=S[A-1].startY+S[A-1].totalHeight,E.y=E.startY+E.totalHeight/2-E.height/2}}}}),T(P)}}])})},483360:function(Ve,z,C){"use strict";var b=this&&this.__createBinding||(Object.create?function(T,L,P,p){p===void 0&&(p=P);var m=Object.getOwnPropertyDescriptor(L,P);(!m||("get"in m?!L.__esModule:m.writable||m.configurable))&&(m={enumerable:!0,get:function(){return L[P]}}),Object.defineProperty(T,p,m)}:function(T,L,P,p){p===void 0&&(p=P),T[p]=L[P]}),k=this&&this.__exportStar||function(T,L){for(var P in T)P!=="default"&&!Object.prototype.hasOwnProperty.call(L,P)&&b(L,T,P)};Object.defineProperty(z,"__esModule",{value:!0}),z.getLayoutByName=z.unRegisterLayout=z.registerLayout=void 0;var w=C(695326);Object.defineProperty(z,"registerLayout",{enumerable:!0,get:function(){return w.registerLayout}}),Object.defineProperty(z,"unRegisterLayout",{enumerable:!0,get:function(){return w.unRegisterLayout}}),Object.defineProperty(z,"getLayoutByName",{enumerable:!0,get:function(){return w.getLayoutByName}}),k(C(702584),z)},762329:function(Ve,z){"use strict";Object.defineProperty(z,"__esModule",{value:!0}),z.Base=void 0;var C=function(){function b(){this.nodes=[],this.edges=[],this.combos=[],this.comboEdges=[],this.hiddenNodes=[],this.hiddenEdges=[],this.hiddenCombos=[],this.vedges=[],this.positions=[],this.destroyed=!1,this.onLayoutEnd=function(){}}return b.prototype.layout=function(k){return this.init(k),this.execute(!0)},b.prototype.init=function(k){this.nodes=k.nodes||[],this.edges=k.edges||[],this.combos=k.combos||[],this.comboEdges=k.comboEdges||[],this.hiddenNodes=k.hiddenNodes||[],this.hiddenEdges=k.hiddenEdges||[],this.hiddenCombos=k.hiddenCombos||[],this.vedges=k.vedges||[]},b.prototype.execute=function(k){},b.prototype.executeWithWorker=function(){},b.prototype.getDefaultCfg=function(){return{}},b.prototype.updateCfg=function(k){k&&Object.assign(this,k)},b.prototype.getType=function(){return"base"},b.prototype.destroy=function(){this.nodes=null,this.edges=null,this.combos=null,this.positions=null,this.destroyed=!0},b}();z.Base=C},964885:function(Ve,z,C){"use strict";var b=this&&this.__extends||function(){var m=function(S,x){return m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,A){g.__proto__=A}||function(g,A){for(var E in A)Object.prototype.hasOwnProperty.call(A,E)&&(g[E]=A[E])},m(S,x)};return function(S,x){if(typeof x!="function"&&x!==null)throw new TypeError("Class extends value "+String(x)+" is not a constructor or null");m(S,x);function g(){this.constructor=S}S.prototype=x===null?Object.create(x):(g.prototype=x.prototype,new g)}}();Object.defineProperty(z,"__esModule",{value:!0}),z.CircularLayout=void 0;var k=C(762329),w=C(449784);function T(m,S,x,g){m.forEach(function(A,E){m[E].children=[],m[E].parent=[]}),g?S.forEach(function(A){var E=(0,w.getEdgeTerminal)(A,"source"),D=(0,w.getEdgeTerminal)(A,"target"),F=0;E&&(F=x[E]);var y=0;D&&(y=x[D]);var h=m[F].children,Y=m[y].parent;h.push(m[y].id),Y.push(m[F].id)}):S.forEach(function(A){var E=(0,w.getEdgeTerminal)(A,"source"),D=(0,w.getEdgeTerminal)(A,"target"),F=0;E&&(F=x[E]);var y=0;D&&(y=x[D]);var h=m[F].children,Y=m[y].children;h.push(m[y].id),Y.push(m[F].id)})}function L(m,S,x){for(var g=x.length,A=0;A<g;A++){var E=(0,w.getEdgeTerminal)(x[A],"source"),D=(0,w.getEdgeTerminal)(x[A],"target");if(m.id===E&&S.id===D||S.id===E&&m.id===D)return!0}return!1}function P(m,S){var x=m.degree,g=S.degree;return x<g?-1:x>g?1:0}var p=function(m){b(S,m);function S(x){var g=m.call(this)||this;return g.radius=null,g.nodeSize=void 0,g.startRadius=null,g.endRadius=null,g.startAngle=0,g.endAngle=2*Math.PI,g.clockwise=!0,g.divisions=1,g.ordering=null,g.angleRatio=1,g.nodes=[],g.edges=[],g.nodeMap={},g.degrees=[],g.width=300,g.height=300,g.updateCfg(x),g}return S.prototype.getDefaultCfg=function(){return{radius:null,startRadius:null,endRadius:null,startAngle:0,endAngle:2*Math.PI,clockwise:!0,divisions:1,ordering:null,angleRatio:1}},S.prototype.execute=function(){var x,g=this,A=g.nodes,E=g.edges,D=A.length;if(D===0){g.onLayoutEnd&&g.onLayoutEnd();return}!g.width&&typeof window!="undefined"&&(g.width=window.innerWidth),!g.height&&typeof window!="undefined"&&(g.height=window.innerHeight),g.center||(g.center=[g.width/2,g.height/2]);var F=g.center;if(D===1){A[0].x=F[0],A[0].y=F[1],g.onLayoutEnd&&g.onLayoutEnd();return}var y=g.radius,h=g.startRadius,Y=g.endRadius,$=g.divisions,U=g.startAngle,W=g.endAngle,V=g.angleRatio,H=g.ordering,Q=g.clockwise,tt=g.nodeSpacing,rt=g.nodeSize,ct=(W-U)/D,ot={};A.forEach(function(It,Pt){ot[It.id]=Pt}),g.nodeMap=ot;var xt=(0,w.getDegree)(A.length,ot,E);if(g.degrees=xt,tt){var pt=(0,w.getFuncByUnknownType)(10,tt),Xt=(0,w.getFuncByUnknownType)(10,rt),Ct=-1/0;A.forEach(function(It){var Pt=Xt(It);Ct<Pt&&(Ct=Pt)});var At=0;A.forEach(function(It,Pt){Pt===0?At+=Ct||10:At+=(pt(It)||0)+(Ct||10)}),y=At/(2*Math.PI)}else!y&&!h&&!Y?y=g.height>g.width?g.width/2:g.height/2:!h&&Y?h=Y:h&&!Y&&(Y=h);var Z=ct*V,q=[];H==="topology"?q=g.topologyOrdering():H==="topology-directed"?q=g.topologyOrdering(!0):H==="degree"?q=g.degreeOrdering():q=A;for(var bt=Math.ceil(D/$),_t=0;_t<D;++_t){var nt=y;!nt&&h!==null&&Y!==null&&(nt=h+_t*(Y-h)/(D-1)),nt||(nt=10+_t*100/(D-1));var vt=U+_t%bt*Z+2*Math.PI/$*Math.floor(_t/bt);Q||(vt=W-_t%bt*Z-2*Math.PI/$*Math.floor(_t/bt)),q[_t].x=F[0]+Math.cos(vt)*nt,q[_t].y=F[1]+Math.sin(vt)*nt,q[_t].weight=xt[_t].all}return(x=g.onLayoutEnd)===null||x===void 0||x.call(g),{nodes:q,edges:this.edges}},S.prototype.topologyOrdering=function(x){x===void 0&&(x=!1);var g=this,A=g.degrees,E=g.edges,D=g.nodes,F=(0,w.clone)(D),y=g.nodeMap,h=[F[0]],Y=[D[0]],$=[],U=D.length;$[0]=!0,T(F,E,y,x);var W=0;return F.forEach(function(V,H){if(H!==0)if((H===U-1||A[H].all!==A[H+1].all||L(h[W],V,E))&&!$[H])h.push(V),Y.push(D[y[V.id]]),$[H]=!0,W++;else{for(var Q=h[W].children,tt=!1,rt=0;rt<Q.length;rt++){var ct=y[Q[rt]];if(A[ct].all===A[H].all&&!$[ct]){h.push(F[ct]),Y.push(D[y[F[ct].id]]),$[ct]=!0,tt=!0;break}}for(var ot=0;!tt&&($[ot]||(h.push(F[ot]),Y.push(D[y[F[ot].id]]),$[ot]=!0,tt=!0),ot++,ot!==U););}}),Y},S.prototype.degreeOrdering=function(){var x=this,g=x.nodes,A=[],E=x.degrees;return g.forEach(function(D,F){D.degree=E[F].all,A.push(D)}),A.sort(P),A},S.prototype.getType=function(){return"circular"},S}(k.Base);z.CircularLayout=p},263861:function(Ve,z,C){"use strict";var b=this&&this.__extends||function(){var m=function(S,x){return m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,A){g.__proto__=A}||function(g,A){for(var E in A)Object.prototype.hasOwnProperty.call(A,E)&&(g[E]=A[E])},m(S,x)};return function(S,x){if(typeof x!="function"&&x!==null)throw new TypeError("Class extends value "+String(x)+" is not a constructor or null");m(S,x);function g(){this.constructor=S}S.prototype=x===null?Object.create(x):(g.prototype=x.prototype,new g)}}(),k=this&&this.__assign||function(){return k=Object.assign||function(m){for(var S,x=1,g=arguments.length;x<g;x++){S=arguments[x];for(var A in S)Object.prototype.hasOwnProperty.call(S,A)&&(m[A]=S[A])}return m},k.apply(this,arguments)};Object.defineProperty(z,"__esModule",{value:!0}),z.ComboCombinedLayout=void 0;var w=C(416470),T=C(762329),L=C(449784),P=C(702584),p=function(m){b(S,m);function S(x){var g=m.call(this)||this;return g.center=[0,0],g.nodes=[],g.edges=[],g.combos=[],g.comboEdges=[],g.comboPadding=10,g.comboTrees=[],g.updateCfg(x),g}return S.prototype.getDefaultCfg=function(){return{}},S.prototype.execute=function(){var x=this,g=x.nodes,A=x.center;if(!g||g.length===0){x.onLayoutEnd&&x.onLayoutEnd();return}if(g.length===1){g[0].x=A[0],g[0].y=A[1],x.onLayoutEnd&&x.onLayoutEnd();return}x.initVals(),x.run(),x.onLayoutEnd&&x.onLayoutEnd()},S.prototype.run=function(){var x,g=this,A=g.nodes,E=g.edges,D=g.combos,F=g.comboEdges,y=g.center,h={};A.forEach(function(Ct){h[Ct.id]=Ct});var Y={};D.forEach(function(Ct){Y[Ct.id]=Ct});var $=g.getInnerGraphs(h),U=[],W=[],V={},H=!0;this.comboTrees.forEach(function(Ct){var At=$[Ct.id],Z=k(k({},Ct),{x:At.x||Y[Ct.id].x,y:At.y||Y[Ct.id].y,fx:At.fx||Y[Ct.id].fx,fy:At.fy||Y[Ct.id].fy,mass:At.mass||Y[Ct.id].mass,size:At.size});W.push(Z),!isNaN(Z.x)&&Z.x!==0&&!isNaN(Z.y)&&Z.y!==0?H=!1:(Z.x=Math.random()*100,Z.y=Math.random()*100),U.push(Ct.id),(0,L.traverseTreeUp)(Ct,function(q){return q.id!==Ct.id&&(V[q.id]=Ct.id),!0})}),A.forEach(function(Ct){if(!(Ct.comboId&&Y[Ct.comboId])){var At=k({},Ct);W.push(At),!isNaN(At.x)&&At.x!==0&&!isNaN(At.y)&&At.y!==0?H=!1:(At.x=Math.random()*100,At.y=Math.random()*100),U.push(Ct.id)}});var Q=[];if(E.concat(F).forEach(function(Ct){var At=V[Ct.source]||Ct.source,Z=V[Ct.target]||Ct.target;At!==Z&&U.includes(At)&&U.includes(Z)&&Q.push({source:At,target:Z})}),W!=null&&W.length){if(W.length===1)W[0].x=y[0],W[0].y=y[1];else{var tt={nodes:W,edges:Q},rt=this.outerLayout||new P.GForceLayout({gravity:1,factor:4,linkDistance:function(Ct,At,Z){var q,bt,_t=((((q=At.size)===null||q===void 0?void 0:q[0])||30)+(((bt=Z.size)===null||bt===void 0?void 0:bt[0])||30))/2;return Math.min(_t*1.5,700)}}),ct=(x=rt.getType)===null||x===void 0?void 0:x.call(rt);if(rt.updateCfg({center:y,kg:5,preventOverlap:!0,animate:!1}),H&&w.FORCE_LAYOUT_TYPE_MAP[ct]){var ot=W.length<100?new P.MDSLayout:new P.GridLayout;ot.layout(tt)}rt.layout(tt)}W.forEach(function(Ct){var At=$[Ct.id];if(!At){var Z=h[Ct.id];Z&&(Z.x=Ct.x,Z.y=Ct.y);return}At.visited=!0,At.x=Ct.x,At.y=Ct.y,At.nodes.forEach(function(q){q.x+=Ct.x,q.y+=Ct.y})})}for(var xt=Object.keys($),pt=function(Ct){var At=xt[Ct],Z=$[At];if(!Z)return"continue";Z.nodes.forEach(function(q){Z.visited||(q.x+=Z.x||0,q.y+=Z.y||0),h[q.id]&&(h[q.id].x=q.x,h[q.id].y=q.y)}),Y[At]&&(Y[At].x=Z.x,Y[At].y=Z.y)},Xt=xt.length-1;Xt>=0;Xt--)pt(Xt);return{nodes:A,edges:E,combos:D,comboEdges:F}},S.prototype.getInnerGraphs=function(x){var g=this,A=g.comboTrees,E=g.nodeSize,D=g.edges,F=g.comboPadding,y=g.spacing,h={},Y=this.innerLayout||new P.ConcentricLayout({sortBy:"id"});return Y.center=[0,0],Y.preventOverlap=!0,Y.nodeSpacing=y,(A||[]).forEach(function($){(0,L.traverseTreeUp)($,function(U){var W,V=(F==null?void 0:F(U))||10;if((0,L.isArray)(V)&&(V=Math.max.apply(Math,V)),!((W=U.children)===null||W===void 0)&&W.length){var Q=U.children.map(function(q){if(q.itemType==="combo")return h[q.id];var bt=x[q.id]||{};return k(k({},bt),q)}),tt=Q.map(function(q){return q.id}),rt={nodes:Q,edges:D.filter(function(q){return tt.includes(q.source)&&tt.includes(q.target)})},ct=1/0;Q.forEach(function(q){var bt;q.size||(q.size=((bt=h[q.id])===null||bt===void 0?void 0:bt.size)||(E==null?void 0:E(q))||[30,30]),(0,L.isNumber)(q.size)&&(q.size=[q.size,q.size]),ct>q.size[0]&&(ct=q.size[0]),ct>q.size[1]&&(ct=q.size[1])}),Y.layout(rt);var ot=(0,L.getLayoutBBox)(Q),xt=ot.minX,pt=ot.minY,Xt=ot.maxX,Ct=ot.maxY,At={x:(Xt+xt)/2,y:(Ct+pt)/2};rt.nodes.forEach(function(q){q.x-=At.x,q.y-=At.y});var Z=Math.max(Xt-xt,Ct-pt,ct)+V*2;h[U.id]={id:U.id,nodes:Q,size:[Z,Z]}}else if(U.itemType==="combo"){var H=V?[V*2,V*2]:[30,30];h[U.id]={id:U.id,nodes:[],size:H}}return!0})}),h},S.prototype.initVals=function(){var x=this,g=x.nodeSize,A=x.spacing,E,D;if((0,L.isNumber)(A)?D=function(){return A}:(0,L.isFunction)(A)?D=A:D=function(){return 0},this.spacing=D,!g)E=function(U){var W=D(U);if(U.size){if((0,L.isArray)(U.size)){var V=U.size[0]>U.size[1]?U.size[0]:U.size[1];return(V+W)/2}if((0,L.isObject)(U.size)){var V=U.size.width>U.size.height?U.size.width:U.size.height;return(V+W)/2}return(U.size+W)/2}return 10+W/2};else if((0,L.isFunction)(g))E=function(U){var W=g(U),V=D(U);if((0,L.isArray)(U.size)){var H=U.size[0]>U.size[1]?U.size[0]:U.size[1];return(H+V)/2}return((W||10)+V)/2};else if((0,L.isArray)(g)){var F=g[0]>g[1]?g[0]:g[1],y=F/2;E=function(U){return y+D(U)/2}}else{var h=g/2;E=function(U){return h+D(U)/2}}this.nodeSize=E;var Y=x.comboPadding,$;(0,L.isNumber)(Y)?$=function(){return Y}:(0,L.isArray)(Y)?$=function(){return Math.max.apply(null,Y)}:(0,L.isFunction)(Y)?$=Y:$=function(){return 0},this.comboPadding=$},S.prototype.getType=function(){return"comboCombined"},S}(T.Base);z.ComboCombinedLayout=p},366590:function(Ve,z,C){"use strict";var b=this&&this.__extends||function(){var L=function(P,p){return L=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,S){m.__proto__=S}||function(m,S){for(var x in S)Object.prototype.hasOwnProperty.call(S,x)&&(m[x]=S[x])},L(P,p)};return function(P,p){if(typeof p!="function"&&p!==null)throw new TypeError("Class extends value "+String(p)+" is not a constructor or null");L(P,p);function m(){this.constructor=P}P.prototype=p===null?Object.create(p):(m.prototype=p.prototype,new m)}}();Object.defineProperty(z,"__esModule",{value:!0}),z.ComboForceLayout=void 0;var k=C(762329),w=C(449784),T=function(L){b(P,L);function P(p){var m=L.call(this)||this;return m.center=[0,0],m.maxIteration=100,m.gravity=10,m.comboGravity=10,m.linkDistance=10,m.alpha=1,m.alphaMin=.001,m.alphaDecay=1-Math.pow(m.alphaMin,1/300),m.alphaTarget=0,m.velocityDecay=.6,m.edgeStrength=.6,m.nodeStrength=30,m.preventOverlap=!1,m.preventNodeOverlap=!1,m.preventComboOverlap=!1,m.collideStrength=void 0,m.nodeCollideStrength=.5,m.comboCollideStrength=.5,m.comboSpacing=20,m.comboPadding=10,m.optimizeRangeFactor=1,m.onTick=function(){},m.onLayoutEnd=function(){},m.depthAttractiveForceScale=1,m.depthRepulsiveForceScale=2,m.nodes=[],m.edges=[],m.combos=[],m.comboTrees=[],m.width=300,m.height=300,m.bias=[],m.nodeMap={},m.oriComboMap={},m.indexMap={},m.comboMap={},m.previousLayouted=!1,m.updateCfg(p),m}return P.prototype.getDefaultCfg=function(){return{maxIteration:100,center:[0,0],gravity:10,speed:1,comboGravity:30,preventOverlap:!1,preventComboOverlap:!0,preventNodeOverlap:!0,nodeSpacing:void 0,collideStrength:void 0,nodeCollideStrength:.5,comboCollideStrength:.5,comboSpacing:20,comboPadding:10,edgeStrength:.6,nodeStrength:30,linkDistance:10}},P.prototype.execute=function(){var p=this,m=p.nodes,S=p.center;if(p.comboTree={id:"comboTreeRoot",depth:-1,children:p.comboTrees},!m||m.length===0){p.onLayoutEnd&&p.onLayoutEnd();return}if(m.length===1){m[0].x=S[0],m[0].y=S[1],p.onLayoutEnd&&p.onLayoutEnd();return}p.initVals(),p.run(),p.onLayoutEnd&&p.onLayoutEnd()},P.prototype.run=function(){var p=this,m=p.nodes,S=p.previousLayouted?p.maxIteration/5:p.maxIteration;!p.width&&typeof window!="undefined"&&(p.width=window.innerWidth),!p.height&&typeof window!="undefined"&&(p.height=window.innerHeight);var x=p.center,g=p.velocityDecay,A=p.comboMap;p.previousLayouted||p.initPos(A);for(var E=function(h){var Y=[];m.forEach(function($,U){Y[U]={x:0,y:0}}),p.applyCalculate(Y),p.applyComboCenterForce(Y),m.forEach(function($,U){!(0,w.isNumber)($.x)||!(0,w.isNumber)($.y)||($.x+=Y[U].x*g,$.y+=Y[U].y*g)}),p.alpha+=(p.alphaTarget-p.alpha)*p.alphaDecay,p.onTick()},D=0;D<S;D++)E(D);var F=[0,0];m.forEach(function(h){!(0,w.isNumber)(h.x)||!(0,w.isNumber)(h.y)||(F[0]+=h.x,F[1]+=h.y)}),F[0]/=m.length,F[1]/=m.length;var y=[x[0]-F[0],x[1]-F[1]];m.forEach(function(h,Y){!(0,w.isNumber)(h.x)||!(0,w.isNumber)(h.y)||(h.x+=y[0],h.y+=y[1])}),p.combos.forEach(function(h){var Y=A[h.id];Y&&Y.empty&&(h.x=Y.cx||h.x,h.y=Y.cy||h.y)}),p.previousLayouted=!0},P.prototype.initVals=function(){var p=this,m=p.edges,S=p.nodes,x=p.combos,g={},A={},E={};S.forEach(function(nt,vt){A[nt.id]=nt,E[nt.id]=vt}),p.nodeMap=A,p.indexMap=E;var D={};x.forEach(function(nt){D[nt.id]=nt}),p.oriComboMap=D,p.comboMap=p.getComboMap();var F=p.preventOverlap;p.preventComboOverlap=p.preventComboOverlap||F,p.preventNodeOverlap=p.preventNodeOverlap||F;var y=p.collideStrength;y&&(p.comboCollideStrength=y,p.nodeCollideStrength=y),p.comboCollideStrength=p.comboCollideStrength?p.comboCollideStrength:0,p.nodeCollideStrength=p.nodeCollideStrength?p.nodeCollideStrength:0;for(var h=0;h<m.length;++h){var Y=(0,w.getEdgeTerminal)(m[h],"source"),$=(0,w.getEdgeTerminal)(m[h],"target");g[Y]?g[Y]++:g[Y]=1,g[$]?g[$]++:g[$]=1}for(var U=[],h=0;h<m.length;++h){var Y=(0,w.getEdgeTerminal)(m[h],"source"),$=(0,w.getEdgeTerminal)(m[h],"target");U[h]=g[Y]/(g[Y]+g[$])}this.bias=U;var W=p.nodeSize,V=p.nodeSpacing,H,Q;if((0,w.isNumber)(V)?Q=function(){return V}:(0,w.isFunction)(V)?Q=V:Q=function(){return 0},this.nodeSpacing=Q,!W)H=function(nt){if(nt.size){if((0,w.isArray)(nt.size)){var vt=nt.size[0]>nt.size[1]?nt.size[0]:nt.size[1];return vt/2}if((0,w.isObject)(nt.size)){var vt=nt.size.width>nt.size.height?nt.size.width:nt.size.height;return vt/2}return nt.size/2}return 10};else if((0,w.isFunction)(W))H=function(nt){return W(nt)};else if((0,w.isArray)(W)){var tt=W[0]>W[1]?W[0]:W[1],rt=tt/2;H=function(nt){return rt}}else{var ct=W/2;H=function(nt){return ct}}this.nodeSize=H;var ot=p.comboSpacing,xt;(0,w.isNumber)(ot)?xt=function(){return ot}:(0,w.isFunction)(ot)?xt=ot:xt=function(){return 0},this.comboSpacing=xt;var pt=p.comboPadding,Xt;(0,w.isNumber)(pt)?Xt=function(){return pt}:(0,w.isArray)(pt)?Xt=function(){return Math.max.apply(null,pt)}:(0,w.isFunction)(pt)?Xt=pt:Xt=function(){return 0},this.comboPadding=Xt;var Ct=this.linkDistance,At;Ct||(Ct=10),(0,w.isNumber)(Ct)?At=function(nt){return Ct}:At=Ct,this.linkDistance=At;var Z=this.edgeStrength,q;Z||(Z=1),(0,w.isNumber)(Z)?q=function(nt){return Z}:q=Z,this.edgeStrength=q;var bt=this.nodeStrength,_t;bt||(bt=30),(0,w.isNumber)(bt)?_t=function(nt){return bt}:_t=bt,this.nodeStrength=_t},P.prototype.initPos=function(p){var m=this,S=m.nodes;S.forEach(function(x,g){var A=x.comboId,E=p[A];A&&E?(x.x=E.cx+100/(g+1),x.y=E.cy+100/(g+1)):(x.x=100/(g+1),x.y=100/(g+1))})},P.prototype.getComboMap=function(){var p=this,m=p.nodeMap,S=p.comboTrees,x=p.oriComboMap,g={};return(S||[]).forEach(function(A){var E=[];(0,w.traverseTreeUp)(A,function(D){if(D.itemType==="node"||!x[D.id])return!0;if(g[D.id]===void 0){var F={id:D.id,name:D.id,cx:0,cy:0,count:0,depth:p.oriComboMap[D.id].depth||0,children:[]};g[D.id]=F}var y=D.children;y&&y.forEach(function($){if(!g[$.id]&&!m[$.id])return!0;E.push($)});var h=g[D.id];if(h.cx=0,h.cy=0,E.length===0){h.empty=!0;var Y=x[D.id];h.cx=Y.x,h.cy=Y.y}return E.forEach(function($){if(h.count++,$.itemType!=="node"){var U=g[$.id];(0,w.isNumber)(U.cx)&&(h.cx+=U.cx),(0,w.isNumber)(U.cy)&&(h.cy+=U.cy);return}var W=m[$.id];W&&((0,w.isNumber)(W.x)&&(h.cx+=W.x),(0,w.isNumber)(W.y)&&(h.cy+=W.y))}),h.cx/=h.count||1,h.cy/=h.count||1,h.children=E,!0})}),g},P.prototype.applyComboCenterForce=function(p){var m=this,S=m.gravity,x=m.comboGravity||S,g=this.alpha,A=m.comboTrees,E=m.indexMap,D=m.nodeMap,F=m.comboMap;(A||[]).forEach(function(y){(0,w.traverseTreeUp)(y,function(h){if(h.itemType==="node")return!0;var Y=F[h.id];if(!Y)return!0;var $=F[h.id],U=($.depth+1)/10*.5,W=$.cx,V=$.cy;return $.cx=0,$.cy=0,$.children.forEach(function(H){if(H.itemType!=="node"){var Q=F[H.id];Q&&(0,w.isNumber)(Q.cx)&&($.cx+=Q.cx),Q&&(0,w.isNumber)(Q.cy)&&($.cy+=Q.cy);return}var tt=D[H.id],rt=tt.x-W||.005,ct=tt.y-V||.005,ot=Math.sqrt(rt*rt+ct*ct),xt=E[tt.id],pt=x*g/ot*U;p[xt].x-=rt*pt,p[xt].y-=ct*pt,(0,w.isNumber)(tt.x)&&($.cx+=tt.x),(0,w.isNumber)(tt.y)&&($.cy+=tt.y)}),$.cx/=$.count||1,$.cy/=$.count||1,!0})})},P.prototype.applyCalculate=function(p){var m=this,S=m.comboMap,x=m.nodes,g={};x.forEach(function(E,D){x.forEach(function(F,y){if(!(D<y)){var h=E.x-F.x||.005,Y=E.y-F.y||.005,$=h*h+Y*Y,U=Math.sqrt($);$<1&&($=U),g["".concat(E.id,"-").concat(F.id)]={vx:h,vy:Y,vl2:$,vl:U},g["".concat(F.id,"-").concat(E.id)]={vl2:$,vl:U,vx:-h,vy:-Y}}})}),m.updateComboSizes(S),m.calRepulsive(p,g),m.calAttractive(p,g);var A=m.preventComboOverlap;A&&m.comboNonOverlapping(p,S)},P.prototype.updateComboSizes=function(p){var m=this,S=m.comboTrees,x=m.nodeMap,g=m.nodeSize,A=m.comboSpacing,E=m.comboPadding;(S||[]).forEach(function(D){var F=[];(0,w.traverseTreeUp)(D,function(y){if(y.itemType==="node")return!0;var h=p[y.id];if(!h)return!1;var Y=y.children;Y&&Y.forEach(function(W){!p[W.id]&&!x[W.id]||F.push(W)}),h.minX=1/0,h.minY=1/0,h.maxX=-1/0,h.maxY=-1/0,F.forEach(function(W){if(W.itemType!=="node")return!0;var V=x[W.id];if(!V)return!0;var H=g(V),Q=V.x-H,tt=V.y-H,rt=V.x+H,ct=V.y+H;h.minX>Q&&(h.minX=Q),h.minY>tt&&(h.minY=tt),h.maxX<rt&&(h.maxX=rt),h.maxY<ct&&(h.maxY=ct)});var $=m.oriComboMap[y.id].size||10;(0,w.isArray)($)&&($=$[0]);var U=Math.max(h.maxX-h.minX,h.maxY-h.minY,$);return h.r=U/2+A(h)/2+E(h),!0})})},P.prototype.comboNonOverlapping=function(p,m){var S=this,x=S.comboTree,g=S.comboCollideStrength,A=S.indexMap,E=S.nodeMap;(0,w.traverseTreeUp)(x,function(D){if(!m[D.id]&&!E[D.id]&&D.id!=="comboTreeRoot")return!1;var F=D.children;return F&&F.length>1&&F.forEach(function(y,h){if(y.itemType==="node")return!1;var Y=m[y.id];Y&&F.forEach(function($,U){if(h<=U||$.itemType==="node")return!1;var W=m[$.id];if(!W)return!1;var V=Y.cx-W.cx||.005,H=Y.cy-W.cy||.005,Q=V*V+H*H,tt=Y.r||1,rt=W.r||1,ct=tt+rt,ot=rt*rt,xt=tt*tt;if(Q<ct*ct){var pt=y.children;if(!pt||pt.length===0)return!1;var Xt=$.children;if(!Xt||Xt.length===0)return!1;var Ct=Math.sqrt(Q),At=(ct-Ct)/Ct*g,Z=V*At,q=H*At,bt=ot/(xt+ot),_t=1-bt;pt.forEach(function(nt){if(nt.itemType!=="node")return!1;if(E[nt.id]){var vt=A[nt.id];Xt.forEach(function(It){if(It.itemType!=="node"||!E[It.id])return!1;var Pt=A[It.id];p[vt].x+=Z*bt,p[vt].y+=q*bt,p[Pt].x-=Z*_t,p[Pt].y-=q*_t})}})}})}),!0})},P.prototype.calRepulsive=function(p,m){var S=this,x=S.nodes,g=S.width*S.optimizeRangeFactor,A=S.nodeStrength,E=S.alpha,D=S.nodeCollideStrength,F=S.preventNodeOverlap,y=S.nodeSize,h=S.nodeSpacing,Y=S.depthRepulsiveForceScale,$=S.center;x.forEach(function(U,W){if(!(!U.x||!U.y)){if($){var V=S.gravity,H=U.x-$[0]||.005,Q=U.y-$[1]||.005,tt=Math.sqrt(H*H+Q*Q);p[W].x-=H*V*E/tt,p[W].y-=Q*V*E/tt}x.forEach(function(rt,ct){if(W!==ct&&!(!rt.x||!rt.y)){var ot=m["".concat(U.id,"-").concat(rt.id)],xt=ot.vl2,pt=ot.vl;if(!(pt>g)){var Xt=m["".concat(U.id,"-").concat(rt.id)],Ct=Xt.vx,At=Xt.vy,Z=Math.log(Math.abs(rt.depth-U.depth)/10)+1||1;Z=Z<1?1:Z,rt.comboId!==U.comboId&&(Z+=1);var q=Z?Math.pow(Y,Z):1,bt=A(rt)*E/xt*q;if(p[W].x+=Ct*bt,p[W].y+=At*bt,W<ct&&F){var _t=y(U)+h(U)||1,nt=y(rt)+h(rt)||1,vt=_t+nt;if(xt<vt*vt){var It=(vt-pt)/pt*D,Pt=nt*nt,Et=Pt/(_t*_t+Pt),Nt=Ct*It,$t=At*It;p[W].x+=Nt*Et,p[W].y+=$t*Et,Et=1-Et,p[ct].x-=Nt*Et,p[ct].y-=$t*Et}}}}})}})},P.prototype.calAttractive=function(p,m){var S=this,x=S.edges,g=S.linkDistance,A=S.alpha,E=S.edgeStrength,D=S.bias,F=S.depthAttractiveForceScale;x.forEach(function(y,h){var Y=(0,w.getEdgeTerminal)(y,"source"),$=(0,w.getEdgeTerminal)(y,"target");if(!(!Y||!$||Y===$)){var U=S.indexMap[Y],W=S.indexMap[$],V=S.nodeMap[Y],H=S.nodeMap[$];if(!(!V||!H)){var Q=V.depth===H.depth?0:Math.log(Math.abs(V.depth-H.depth)/10);V.comboId===H.comboId&&(Q=Q/2);var tt=Q?Math.pow(F,Q):1;if(V.comboId!==H.comboId&&tt===1?tt=F/2:V.comboId===H.comboId&&(tt=2),!(!(0,w.isNumber)(H.x)||!(0,w.isNumber)(V.x)||!(0,w.isNumber)(H.y)||!(0,w.isNumber)(V.y))){var rt=m["".concat($,"-").concat(Y)],ct=rt.vl,ot=rt.vx,xt=rt.vy,pt=(ct-g(y))/ct*A*E(y)*tt,Xt=ot*pt,Ct=xt*pt,At=D[h];p[W].x-=Xt*At,p[W].y-=Ct*At,p[U].x+=Xt*(1-At),p[U].y+=Ct*(1-At)}}}})},P.prototype.getType=function(){return"comboForce"},P}(k.Base);z.ComboForceLayout=T},843281:function(Ve,z,C){"use strict";var b=this&&this.__extends||function(){var L=function(P,p){return L=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,S){m.__proto__=S}||function(m,S){for(var x in S)Object.prototype.hasOwnProperty.call(S,x)&&(m[x]=S[x])},L(P,p)};return function(P,p){if(typeof p!="function"&&p!==null)throw new TypeError("Class extends value "+String(p)+" is not a constructor or null");L(P,p);function m(){this.constructor=P}P.prototype=p===null?Object.create(p):(m.prototype=p.prototype,new m)}}();Object.defineProperty(z,"__esModule",{value:!0}),z.ConcentricLayout=void 0;var k=C(449784),w=C(762329),T=function(L){b(P,L);function P(p){var m=L.call(this)||this;return m.nodeSize=30,m.minNodeSpacing=10,m.nodeSpacing=10,m.preventOverlap=!1,m.equidistant=!1,m.startAngle=3/2*Math.PI,m.clockwise=!0,m.sortBy="degree",m.nodes=[],m.edges=[],m.width=300,m.height=300,m.onLayoutEnd=function(){},m.updateCfg(p),m}return P.prototype.getDefaultCfg=function(){return{nodeSize:30,minNodeSpacing:10,nodeSpacing:10,preventOverlap:!1,sweep:void 0,equidistant:!1,startAngle:3/2*Math.PI,clockwise:!0,maxLevelDiff:void 0,sortBy:"degree"}},P.prototype.execute=function(){var p,m,S=this,x=S.nodes,g=S.edges,A=x.length;if(A===0){(p=S.onLayoutEnd)===null||p===void 0||p.call(S);return}!S.width&&typeof window!="undefined"&&(S.width=window.innerWidth),!S.height&&typeof window!="undefined"&&(S.height=window.innerHeight),S.center||(S.center=[S.width/2,S.height/2]);var E=S.center;if(A===1){x[0].x=E[0],x[0].y=E[1],(m=S.onLayoutEnd)===null||m===void 0||m.call(S);return}var D=S.nodeSize,F=S.nodeSpacing,y=[],h,Y=0;(0,k.isArray)(D)?h=Math.max(D[0],D[1]):h=D,(0,k.isArray)(F)?Y=Math.max(F[0],F[1]):(0,k.isNumber)(F)&&(Y=F),x.forEach(function(Z){y.push(Z);var q=h;(0,k.isArray)(Z.size)?q=Math.max(Z.size[0],Z.size[1]):(0,k.isNumber)(Z.size)?q=Z.size:(0,k.isObject)(Z.size)&&(q=Math.max(Z.size.width,Z.size.height)),h=Math.max(h,q),(0,k.isFunction)(F)&&(Y=Math.max(F(Z),Y))}),S.clockwise=S.counterclockwise!==void 0?!S.counterclockwise:S.clockwise;var $={},U={};if(y.forEach(function(Z,q){$[Z.id]=Z,U[Z.id]=q}),(S.sortBy==="degree"||!(0,k.isString)(S.sortBy)||y[0][S.sortBy]===void 0)&&(S.sortBy="degree",!(0,k.isNumber)(x[0].degree))){var W=(0,k.getDegree)(x.length,U,g);y.forEach(function(Z,q){Z.degree=W[q].all})}y.sort(function(Z,q){return q[S.sortBy]-Z[S.sortBy]}),S.maxValueNode=y[0],S.maxLevelDiff=S.maxLevelDiff||S.maxValueNode[S.sortBy]/4;var V=[[]],H=V[0];y.forEach(function(Z){if(H.length>0){var q=Math.abs(H[0][S.sortBy]-Z[S.sortBy]);S.maxLevelDiff&&q>=S.maxLevelDiff&&(H=[],V.push(H))}H.push(Z)});var Q=h+(Y||S.minNodeSpacing);if(!S.preventOverlap){var tt=V.length>0&&V[0].length>1,rt=Math.min(S.width,S.height)/2-Q,ct=rt/(V.length+(tt?1:0));Q=Math.min(Q,ct)}var ot=0;if(V.forEach(function(Z){var q=S.sweep;q===void 0&&(q=2*Math.PI-2*Math.PI/Z.length);var bt=Z.dTheta=q/Math.max(1,Z.length-1);if(Z.length>1&&S.preventOverlap){var _t=Math.cos(bt)-Math.cos(0),nt=Math.sin(bt)-Math.sin(0),vt=Math.sqrt(Q*Q/(_t*_t+nt*nt));ot=Math.max(vt,ot)}Z.r=ot,ot+=Q}),S.equidistant){for(var xt=0,pt=0,Xt=0;Xt<V.length;Xt++){var Ct=V[Xt],At=Ct.r-pt;xt=Math.max(xt,At)}pt=0,V.forEach(function(Z,q){q===0&&(pt=Z.r),Z.r=pt,pt+=xt})}return V.forEach(function(Z){var q=Z.dTheta,bt=Z.r;Z.forEach(function(_t,nt){var vt=S.startAngle+(S.clockwise?1:-1)*q*nt;_t.x=E[0]+bt*Math.cos(vt),_t.y=E[1]+bt*Math.sin(vt)})}),S.onLayoutEnd&&S.onLayoutEnd(),{nodes:x,edges:g}},P.prototype.getType=function(){return"concentric"},P}(w.Base);z.ConcentricLayout=T},416470:function(Ve,z){"use strict";Object.defineProperty(z,"__esModule",{value:!0}),z.FORCE_LAYOUT_TYPE_MAP=z.LAYOUT_MESSAGE=void 0,z.LAYOUT_MESSAGE={RUN:"LAYOUT_RUN",END:"LAYOUT_END",ERROR:"LAYOUT_ERROR",TICK:"LAYOUT_TICK",GPURUN:"GPU_LAYOUT_RUN",GPUEND:"GPU_LAYOUT_END"},z.FORCE_LAYOUT_TYPE_MAP={gForce:!0,force2:!0,fruchterman:!0,forceAtlas2:!0,force:!0,"graphin-force":!0}},920171:function(Ve,z,C){"use strict";var b=this&&this.__extends||function(){var S=function(x,g){return S=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(A,E){A.__proto__=E}||function(A,E){for(var D in E)Object.prototype.hasOwnProperty.call(E,D)&&(A[D]=E[D])},S(x,g)};return function(x,g){if(typeof g!="function"&&g!==null)throw new TypeError("Class extends value "+String(g)+" is not a constructor or null");S(x,g);function A(){this.constructor=x}x.prototype=g===null?Object.create(g):(A.prototype=g.prototype,new A)}}(),k=this&&this.__importDefault||function(S){return S&&S.__esModule?S:{default:S}};Object.defineProperty(z,"__esModule",{value:!0}),z.DagreLayout=void 0;var w=k(C(441106)),T=C(449784),L=C(762329),P=C(627652),p=function(S){b(x,S);function x(g){var A=S.call(this)||this;return A.rankdir="TB",A.nodesep=50,A.ranksep=50,A.controlPoints=!1,A.sortByCombo=!1,A.edgeLabelSpace=!0,A.radial=!1,A.nodes=[],A.edges=[],A.onLayoutEnd=function(){},A.layoutNode=function(E){var D=A,F=D.nodes,y=F.find(function(Y){return Y.id===E});if(y){var h=y.layout!==!1;return h}return!0},A.updateCfg(g),A}return x.prototype.getDefaultCfg=function(){return{rankdir:"TB",align:void 0,nodeSize:void 0,nodesepFunc:void 0,ranksepFunc:void 0,nodesep:50,ranksep:50,controlPoints:!1,radial:!1,focusNode:null}},x.prototype.execute=function(){var g=this,A,E,D,F,y=this,h=y.nodes,Y=y.nodeSize,$=y.rankdir,U=y.combos,W=y.begin,V=y.radial,H=y.comboEdges,Q=H===void 0?[]:H,tt=y.vedges,rt=tt===void 0?[]:tt;if(h){var ct=y.edges||[],ot=new P.Graph({multigraph:!0,compound:!0});y.nodeMap={};var xt={};h.forEach(function(xr){y.nodeMap[xr.id]=xr,xr.comboId&&(xt[xr.comboId]=xt[xr.comboId]||[],xt[xr.comboId].push(xr.id))});var pt=[],Xt={};!((A=y.nodeOrder)===null||A===void 0)&&A.length?(y.nodeOrder.forEach(function(xr){Xt[xr]=!0,pt.push(y.nodeMap[xr])}),h.forEach(function(xr){Xt[xr.id]||pt.push(xr)})):pt=h;var Ct;Y?(0,T.isArray)(Y)?Ct=function(){return Y}:Ct=function(){return[Y,Y]}:Ct=function(xr){return xr.size?(0,T.isArray)(xr.size)?xr.size:(0,T.isObject)(xr.size)?[xr.size.width||40,xr.size.height||40]:[xr.size,xr.size]:[40,40]};var At=(0,T.getFunc)(y.ranksep,50,y.ranksepFunc),Z=(0,T.getFunc)(y.nodesep,50,y.nodesepFunc),q=Z,bt=At;($==="LR"||$==="RL")&&(q=At,bt=Z),ot.setDefaultEdgeLabel(function(){return{}}),ot.setGraph(y);var _t={};this.sortByCombo&&U&&U.forEach(function(xr){if(_t[xr.id]=xr,xr.collapsed){var qe=Ct(xr),Cr=bt(xr),tn=q(xr),vn=qe[0]+2*tn,_n=qe[1]+2*Cr;ot.setNode(xr.id,{width:vn,height:_n})}xr.parentId&&(_t[xr.parentId]||ot.setNode(xr.parentId,{}),ot.setParent(xr.id,xr.parentId))}),pt.filter(function(xr){return xr.layout!==!1}).forEach(function(xr){var qe=Ct(xr),Cr=bt(xr),tn=q(xr),vn=qe[0]+2*tn,_n=qe[1]+2*Cr,Pn=xr.layer;(0,T.isNumber)(Pn)?ot.setNode(xr.id,{width:vn,height:_n,layer:Pn}):ot.setNode(xr.id,{width:vn,height:_n}),g.sortByCombo&&xr.comboId&&(_t[xr.comboId]||(_t[xr.comboId]={id:xr.comboId},ot.setNode(xr.comboId,{})),ot.setParent(xr.id,xr.comboId))}),ct.forEach(function(xr){var qe=(0,T.getEdgeTerminal)(xr,"source"),Cr=(0,T.getEdgeTerminal)(xr,"target");g.layoutNode(qe)&&g.layoutNode(Cr)&&ot.setEdge(qe,Cr,{weight:xr.weight||1})}),(E=Q==null?void 0:Q.concat(rt||[]))===null||E===void 0||E.forEach(function(xr){var qe,Cr,tn=xr.source,vn=xr.target,_n=!((qe=_t[tn])===null||qe===void 0)&&qe.collapsed?[tn]:xt[tn]||[tn],Pn=!((Cr=_t[vn])===null||Cr===void 0)&&Cr.collapsed?[vn]:xt[vn]||[vn];_n.forEach(function(_r){Pn.forEach(function(un){ot.setEdge(_r,un,{weight:xr.weight||1})})})});var nt=void 0;!((D=y.preset)===null||D===void 0)&&D.nodes&&(nt=new P.Graph({multigraph:!0,compound:!0}),y.preset.nodes.forEach(function(xr){nt==null||nt.setNode(xr.id,xr)})),w.default.layout(ot,{prevGraph:nt,edgeLabelSpace:y.edgeLabelSpace,keepNodeOrder:!!y.nodeOrder,nodeOrder:y.nodeOrder});var vt=[0,0];if(W){var It=1/0,Pt=1/0;ot.nodes().forEach(function(xr){var qe=ot.node(xr);It>qe.x&&(It=qe.x),Pt>qe.y&&(Pt=qe.y)}),ot.edges().forEach(function(xr){var qe,Cr=ot.edge(xr);(qe=Cr.points)===null||qe===void 0||qe.forEach(function(tn){It>tn.x&&(It=tn.x),Pt>tn.y&&(Pt=tn.y)})}),vt[0]=W[0]-It,vt[1]=W[1]-Pt}var Et=$==="LR"||$==="RL";if(V){var Nt=this,$t=Nt.focusNode,ue=Nt.ranksep,ie=Nt.getRadialPos,Dt=(0,T.isString)($t)?$t:$t==null?void 0:$t.id,ne=Dt?(F=ot.node(Dt))===null||F===void 0?void 0:F._rank:0,pe=[],Wt=Et?"y":"x",ae=Et?"height":"width",Se=1/0,be=-1/0;ot.nodes().forEach(function(xr){var qe=ot.node(xr);if(y.nodeMap[xr]){var Cr=Z(y.nodeMap[xr]);if(ne===0)pe[qe._rank]||(pe[qe._rank]={nodes:[],totalWidth:0,maxSize:-1/0}),pe[qe._rank].nodes.push(xr),pe[qe._rank].totalWidth+=Cr*2+qe[ae],pe[qe._rank].maxSize<Math.max(qe.width,qe.height)&&(pe[qe._rank].maxSize=Math.max(qe.width,qe.height));else{var tn=qe._rank-ne;if(tn===0)pe[tn]||(pe[tn]={nodes:[],totalWidth:0,maxSize:-1/0}),pe[tn].nodes.push(xr),pe[tn].totalWidth+=Cr*2+qe[ae],pe[tn].maxSize<Math.max(qe.width,qe.height)&&(pe[tn].maxSize=Math.max(qe.width,qe.height));else{var vn=Math.abs(tn);pe[vn]||(pe[vn]={left:[],right:[],totalWidth:0,maxSize:-1/0}),pe[vn].totalWidth+=Cr*2+qe[ae],pe[vn].maxSize<Math.max(qe.width,qe.height)&&(pe[vn].maxSize=Math.max(qe.width,qe.height)),tn<0?pe[vn].left.push(xr):pe[vn].right.push(xr)}}var _n=qe[Wt]-qe[ae]/2-Cr,Pn=qe[Wt]+qe[ae]/2+Cr;_n<Se&&(Se=_n),Pn>be&&(be=Pn)}});var Qt=ue||50,we={},Tt=(be-Se)/.9,Le=[(Se+be-Tt)*.5,(Se+be+Tt)*.5],Mr=function(xr,qe,Cr,tn){Cr===void 0&&(Cr=-1/0),tn===void 0&&(tn=[0,1]);var vn=Cr;return xr.forEach(function(_n){var Pn=ot.node(_n);we[_n]=qe;var _r=ie(Pn[Wt],Le,Tt,qe,tn),un=_r.x,An=_r.y;if(y.nodeMap[_n]){y.nodeMap[_n].x=un+vt[0],y.nodeMap[_n].y=An+vt[1],y.nodeMap[_n]._order=Pn._order;var on=At(y.nodeMap[_n]);vn<on&&(vn=on)}}),vn},Ar=!0,Ir=0;pe.forEach(function(xr){var qe,Cr,tn,vn,_n,Pn,_r;if(!(!(!((qe=xr==null?void 0:xr.nodes)===null||qe===void 0)&&qe.length)&&!(!((Cr=xr==null?void 0:xr.left)===null||Cr===void 0)&&Cr.length)&&!(!((tn=xr==null?void 0:xr.right)===null||tn===void 0)&&tn.length))){if(Ar&&xr.nodes.length===1){var un=xr.nodes[0];if(!y.nodeMap[un])return;y.nodeMap[un].x=vt[0],y.nodeMap[un].y=vt[1],we[xr.nodes[0]]=0,Qt=At(y.nodeMap[un]),Ar=!1;return}Qt=Math.max(Qt,xr.totalWidth/(2*Math.PI));var An=-1/0;if(ne===0||!((vn=xr.nodes)===null||vn===void 0)&&vn.length)An=Mr(xr.nodes,Qt,An,[0,1]);else{var on=((_n=xr.left)===null||_n===void 0?void 0:_n.length)/(((Pn=xr.left)===null||Pn===void 0?void 0:Pn.length)+((_r=xr.right)===null||_r===void 0?void 0:_r.length));An=Mr(xr.left,Qt,An,[0,on]),An=Mr(xr.right,Qt,An,[on+.05,1])}Qt+=An,Ar=!1,Ir-xr.maxSize}}),ot.edges().forEach(function(xr){var qe,Cr,tn,vn=ot.edge(xr),_n=ct.findIndex(function(On){var jn=(0,T.getEdgeTerminal)(On,"source"),at=(0,T.getEdgeTerminal)(On,"target");return jn===xr.v&&at===xr.w});if(!(_n<=-1)&&y.edgeLabelSpace&&y.controlPoints&&ct[_n].type!=="loop"){var Pn=Wt==="x"?"y":"x",_r=(qe=vn==null?void 0:vn.points)===null||qe===void 0?void 0:qe.slice(1,vn.points.length-1),un=[],An=(Cr=ot.node(xr.v))===null||Cr===void 0?void 0:Cr[Pn],on=An-((tn=ot.node(xr.w))===null||tn===void 0?void 0:tn[Pn]),Wn=we[xr.v],Cn=Wn-we[xr.w];_r==null||_r.forEach(function(On){var jn=(On[Pn]-An)/on*Cn+Wn,at=ie(On[Wt],Le,Tt,jn);un.push({x:at.x+vt[0],y:at.y+vt[1]})}),ct[_n].controlPoints=un}})}else{var Br=new Set,dn=$==="BT"||$==="RL",an=dn?function(xr,qe){return qe-xr}:function(xr,qe){return xr-qe};ot.nodes().forEach(function(xr){var qe=ot.node(xr);if(qe){var Cr=g.nodeMap[xr];Cr||(Cr=U==null?void 0:U.find(function(tn){return tn.id===xr})),Cr&&(Cr.x=qe.x+vt[0],Cr.y=qe.y+vt[1],Cr._order=qe._order,Br.add(Et?Cr.x:Cr.y))}});var Ln=Array.from(Br).sort(an),Un=Et?function(xr,qe){return xr.x!==qe.x}:function(xr,qe){return xr.y!==qe.y},Yn=Et?function(xr,qe,Cr){var tn=Math.max(qe.y,Cr.y),vn=Math.min(qe.y,Cr.y);return xr.filter(function(_n){return _n.y<=tn&&_n.y>=vn})}:function(xr,qe,Cr){var tn=Math.max(qe.x,Cr.x),vn=Math.min(qe.x,Cr.x);return xr.filter(function(_n){return _n.x<=tn&&_n.x>=vn})};ot.edges().forEach(function(xr){var qe,Cr=ot.edge(xr),tn=ct.findIndex(function(Pn){var _r=(0,T.getEdgeTerminal)(Pn,"source"),un=(0,T.getEdgeTerminal)(Pn,"target");return _r===xr.v&&un===xr.w});if(!(tn<=-1)&&y.edgeLabelSpace&&y.controlPoints&&ct[tn].type!=="loop"){(qe=Cr==null?void 0:Cr.points)===null||qe===void 0||qe.forEach(function(Pn){Pn.x+=vt[0],Pn.y+=vt[1]});var vn=y.nodeMap[xr.v],_n=y.nodeMap[xr.w];ct[tn].controlPoints=m(Cr==null?void 0:Cr.points,vn,_n,Ln,Et,Un,Yn)}})}return y.onLayoutEnd&&y.onLayoutEnd(),{nodes:h,edges:ct}}},x.prototype.getRadialPos=function(g,A,E,D,F){F===void 0&&(F=[0,1]);var y=(g-A[0])/E;y=y*(F[1]-F[0])+F[0];var h=y*2*Math.PI;return{x:Math.cos(h)*D,y:Math.sin(h)*D}},x.prototype.getType=function(){return"dagre"},x}(L.Base);z.DagreLayout=p;var m=function(S,x,g,A,E,D,F){var y=(S==null?void 0:S.slice(1,S.length-1))||[];if(x&&g){var h=x.x,Y=x.y,$=g.x,U=g.y;if(E&&(h=x.y,Y=x.x,$=g.y,U=g.x),U!==Y&&h!==$){var W=A.indexOf(Y),V=A[W+1];if(V){var H=y[0],Q=E?{x:(Y+V)/2,y:(H==null?void 0:H.y)||$}:{x:(H==null?void 0:H.x)||$,y:(Y+V)/2};(!H||D(H,Q))&&y.unshift(Q)}var tt=A.indexOf(U),rt=Math.abs(tt-W);if(rt===1)y=F(y,x,g),y.length||y.push(E?{x:(Y+U)/2,y:h}:{x:h,y:(Y+U)/2});else if(rt>1){var ct=A[tt-1];if(ct){var ot=y[y.length-1],xt=E?{x:(U+ct)/2,y:(ot==null?void 0:ot.y)||$}:{x:(ot==null?void 0:ot.x)||h,y:(U+ct)/2};(!ot||D(ot,xt))&&y.push(xt)}}}}return y}},627652:function(Ve,z,C){"use strict";var b=this&&this.__extends||function(){var T=function(L,P){return T=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,m){p.__proto__=m}||function(p,m){for(var S in m)Object.prototype.hasOwnProperty.call(m,S)&&(p[S]=m[S])},T(L,P)};return function(L,P){if(typeof P!="function"&&P!==null)throw new TypeError("Class extends value "+String(P)+" is not a constructor or null");T(L,P);function p(){this.constructor=L}L.prototype=P===null?Object.create(P):(p.prototype=P.prototype,new p)}}();Object.defineProperty(z,"__esModule",{value:!0}),z.Graph=void 0;var k=C(199905),w=function(T){b(L,T);function L(){return T!==null&&T.apply(this,arguments)||this}return L}(k.Graph);z.Graph=w},441106:function(Ve,z,C){"use strict";var b=this&&this.__importDefault||function(T){return T&&T.__esModule?T:{default:T}};Object.defineProperty(z,"__esModule",{value:!0});var k=b(C(265236)),w=C(269209);z.default={layout:k.default,util:{time:w.time,notime:w.notime}}},178029:function(Ve,z,C){"use strict";var b=this&&this.__importDefault||function(P){return P&&P.__esModule?P:{default:P}};Object.defineProperty(z,"__esModule",{value:!0});var k=b(C(40773)),w=function(P){var p=function(S){return function(x){var g;return((g=S.edge(x))===null||g===void 0?void 0:g.weight)||1}},m=P.graph().acyclicer==="greedy"?(0,k.default)(P,p(P)):T(P);m==null||m.forEach(function(S){var x=P.edge(S);P.removeEdgeObj(S),x.forwardName=S.name,x.reversed=!0,P.setEdge(S.w,S.v,x,"rev-".concat(Math.random()))})},T=function(P){var p=[],m={},S={},x=function(g){var A;S[g]||(S[g]=!0,m[g]=!0,(A=P.outEdges(g))===null||A===void 0||A.forEach(function(E){m[E.w]?p.push(E):x(E.w)}),delete m[g])};return P.nodes().forEach(x),p},L=function(P){P.edges().forEach(function(p){var m=P.edge(p);if(m.reversed){P.removeEdgeObj(p);var S=m.forwardName;delete m.reversed,delete m.forwardName,P.setEdge(p.w,p.v,m,S)}})};z.default={run:w,undo:L}},111500:function(Ve,z,C){"use strict";Object.defineProperty(z,"__esModule",{value:!0});var b=C(269209),k=function(T){var L,P=function(p){var m=T.children(p),S=T.node(p);if(m!=null&&m.length&&m.forEach(function(A){return P(A)}),S.hasOwnProperty("minRank")){S.borderLeft=[],S.borderRight=[];for(var x=S.minRank,g=S.maxRank+1;x<g;x+=1)w(T,"borderLeft","_bl",p,S,x),w(T,"borderRight","_br",p,S,x)}};(L=T.children())===null||L===void 0||L.forEach(function(p){return P(p)})},w=function(T,L,P,p,m,S){var x={rank:S,borderType:L,width:0,height:0},g=m[L][S-1],A=(0,b.addDummyNode)(T,"border",x,P);m[L][S]=A,T.setParent(A,p),g&&T.setEdge(g,A,{weight:1})};z.default=k},335279:function(Ve,z){"use strict";Object.defineProperty(z,"__esModule",{value:!0});var C=function(m){var S,x=(S=m.graph().rankdir)===null||S===void 0?void 0:S.toLowerCase();(x==="lr"||x==="rl")&&k(m)},b=function(m){var S,x=(S=m.graph().rankdir)===null||S===void 0?void 0:S.toLowerCase();(x==="bt"||x==="rl")&&T(m),(x==="lr"||x==="rl")&&(P(m),k(m))},k=function(m){m.nodes().forEach(function(S){w(m.node(S))}),m.edges().forEach(function(S){w(m.edge(S))})},w=function(m){var S=m.width;m.width=m.height,m.height=S},T=function(m){m.nodes().forEach(function(S){L(m.node(S))}),m.edges().forEach(function(S){var x,g=m.edge(S);(x=g.points)===null||x===void 0||x.forEach(function(A){return L(A)}),g.hasOwnProperty("y")&&L(g)})},L=function(m){m!=null&&m.y&&(m.y=-m.y)},P=function(m){m.nodes().forEach(function(S){p(m.node(S))}),m.edges().forEach(function(S){var x,g=m.edge(S);(x=g.points)===null||x===void 0||x.forEach(function(A){return p(A)}),g.hasOwnProperty("x")&&p(g)})},p=function(m){var S=m.x;m.x=m.y,m.y=S};z.default={adjust:C,undo:b}},455532:function(Ve,z){"use strict";Object.defineProperty(z,"__esModule",{value:!0});var C=function(w,T){if(w!=="next"&&w!=="prev")return T},b=function(w){w.prev.next=w.next,w.next.prev=w.prev,delete w.next,delete w.prev},k=function(){function w(){var T={};T.prev=T,T.next=T.prev,this.shortcut=T}return w.prototype.dequeue=function(){var T=this.shortcut,L=T.prev;if(L&&L!==T)return b(L),L},w.prototype.enqueue=function(T){var L=this.shortcut;T.prev&&T.next&&b(T),T.next=L.next,L.next.prev=T,L.next=T,T.prev=L},w.prototype.toString=function(){for(var T=[],L=this.shortcut,P=L.prev;P!==L;)T.push(JSON.stringify(P,C)),P=P==null?void 0:P.prev;return"[".concat(T.join(", "),"]")},w}();z.default=k},40773:function(Ve,z,C){"use strict";var b=this&&this.__extends||function(){var E=function(D,F){return E=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,h){y.__proto__=h}||function(y,h){for(var Y in h)Object.prototype.hasOwnProperty.call(h,Y)&&(y[Y]=h[Y])},E(D,F)};return function(D,F){if(typeof F!="function"&&F!==null)throw new TypeError("Class extends value "+String(F)+" is not a constructor or null");E(D,F);function y(){this.constructor=D}D.prototype=F===null?Object.create(F):(y.prototype=F.prototype,new y)}}(),k=this&&this.__importDefault||function(E){return E&&E.__esModule?E:{default:E}};Object.defineProperty(z,"__esModule",{value:!0});var w=k(C(455532)),T=C(199905),L=function(E){b(D,E);function D(){return E!==null&&E.apply(this,arguments)||this}return D}(w.default),P=function(E){b(D,E);function D(){return E!==null&&E.apply(this,arguments)||this}return D}(T.Graph),p=function(){return 1},m=function(E,D){var F;if(E.nodeCount()<=1)return[];var y=g(E,D||p),h=S(y.graph,y.buckets,y.zeroIdx);return(F=h.map(function(Y){return E.outEdges(Y.v,Y.w)}))===null||F===void 0?void 0:F.flat()},S=function(E,D,F){for(var y=[],h=D[D.length-1],Y=D[0],$;E.nodeCount();){for(;$=Y.dequeue();)x(E,D,F,$);for(;$=h.dequeue();)x(E,D,F,$);if(E.nodeCount()){for(var U=D.length-2;U>0;--U)if($=D[U].dequeue(),$){y=y.concat(x(E,D,F,$,!0));break}}}return y},x=function(E,D,F,y,h){var Y,$,U=[];return(Y=E.inEdges(y.v))===null||Y===void 0||Y.forEach(function(W){var V=E.edge(W),H=E.node(W.v);h&&U.push({v:W.v,w:W.w,in:0,out:0}),H.out===void 0&&(H.out=0),H.out-=V,A(D,F,H)}),($=E.outEdges(y.v))===null||$===void 0||$.forEach(function(W){var V=E.edge(W),H=W.w,Q=E.node(H);Q.in===void 0&&(Q.in=0),Q.in-=V,A(D,F,Q)}),E.removeNode(y.v),h?U:void 0},g=function(E,D){var F=new P,y=0,h=0;E.nodes().forEach(function(V){F.setNode(V,{v:V,in:0,out:0})}),E.edges().forEach(function(V){var H=F.edge(V)||0,Q=(D==null?void 0:D(V))||1,tt=H+Q;F.setEdge(V.v,V.w,tt),h=Math.max(h,F.node(V.v).out+=Q),y=Math.max(y,F.node(V.w).in+=Q)});for(var Y=[],$=h+y+3,U=0;U<$;U++)Y.push(new L);var W=y+1;return F.nodes().forEach(function(V){A(Y,W,F.node(V))}),{buckets:Y,zeroIdx:W,graph:F}},A=function(E,D,F){F.out?F.in?E[F.out-F.in+D].enqueue(F):E[E.length-1].enqueue(F):E[0].enqueue(F)};z.default=m},265236:function(Ve,z,C){"use strict";var b=this&&this.__assign||function(){return b=Object.assign||function(Et){for(var Nt,$t=1,ue=arguments.length;$t<ue;$t++){Nt=arguments[$t];for(var ie in Nt)Object.prototype.hasOwnProperty.call(Nt,ie)&&(Et[ie]=Nt[ie])}return Et},b.apply(this,arguments)},k=this&&this.__importDefault||function(Et){return Et&&Et.__esModule?Et:{default:Et}};Object.defineProperty(z,"__esModule",{value:!0});var w=k(C(178029)),T=k(C(546171)),L=k(C(576827)),P=C(269209),p=k(C(933562)),m=k(C(59596)),S=k(C(111500)),x=k(C(335279)),g=k(C(819597)),A=k(C(100095)),E=k(C(724956)),D=C(627652),F=function(Et,Nt){var $t=Nt&&Nt.debugTiming?P.time:P.notime;$t("layout",function(){Nt&&!Nt.keepNodeOrder&&Nt.prevGraph&&$t("  inheritOrder",function(){h(Et,Nt.prevGraph)});var ue=$t("  buildLayoutGraph",function(){return ct(Et)});Nt&&Nt.edgeLabelSpace===!1||$t("  makeSpaceForEdgeLabels",function(){ot(ue)});try{$t("  runLayout",function(){y(ue,$t,Nt)})}catch(ie){if(ie.message==="Not possible to find intersection inside of the rectangle"){console.error(`The following error may be caused by improper layer setting, please make sure your manual layer setting does not violate the graph's structure:
`,ie);return}throw ie}$t("  updateInputGraph",function(){Y(Et,ue)})})},y=function(Et,Nt,$t){Nt("    removeSelfEdges",function(){_t(Et)}),Nt("    acyclic",function(){w.default.run(Et)}),Nt("    nestingGraph.run",function(){m.default.run(Et)}),Nt("    rank",function(){(0,L.default)((0,P.asNonCompoundGraph)(Et))}),Nt("    injectEdgeLabelProxies",function(){xt(Et)}),Nt("    removeEmptyRanks",function(){(0,P.removeEmptyRanks)(Et)}),Nt("    nestingGraph.cleanup",function(){m.default.cleanup(Et)}),Nt("    normalizeRanks",function(){(0,P.normalizeRanks)(Et)}),Nt("    assignRankMinMax",function(){pt(Et)}),Nt("    removeEdgeLabelProxies",function(){Xt(Et)}),Nt("    normalize.run",function(){T.default.run(Et)}),Nt("    parentDummyChains",function(){(0,p.default)(Et)}),Nt("    addBorderSegments",function(){(0,S.default)(Et)}),$t&&$t.keepNodeOrder&&Nt("    initDataOrder",function(){(0,E.default)(Et,$t.nodeOrder)}),Nt("    order",function(){(0,g.default)(Et,$t==null?void 0:$t.keepNodeOrder)}),Nt("    insertSelfEdges",function(){nt(Et)}),Nt("    adjustCoordinateSystem",function(){x.default.adjust(Et)}),Nt("    position",function(){(0,A.default)(Et)}),Nt("    positionSelfEdges",function(){vt(Et)}),Nt("    removeBorderNodes",function(){bt(Et)}),Nt("    normalize.undo",function(){T.default.undo(Et)}),Nt("    fixupEdgeLabelCoords",function(){Z(Et)}),Nt("    undoCoordinateSystem",function(){x.default.undo(Et)}),Nt("    translateGraph",function(){Ct(Et)}),Nt("    assignNodeIntersects",function(){At(Et)}),Nt("    reversePoints",function(){q(Et)}),Nt("    acyclic.undo",function(){w.default.undo(Et)})},h=function(Et,Nt){Et.nodes().forEach(function($t){var ue=Et.node($t),ie=Nt.node($t);ie!==void 0?(ue.fixorder=ie._order,delete ie._order):delete ue.fixorder})},Y=function(Et,Nt){Et.nodes().forEach(function($t){var ue,ie=Et.node($t);if(ie){var Dt=Nt.node($t);ie.x=Dt.x,ie.y=Dt.y,ie._order=Dt.order,ie._rank=Dt.rank,!((ue=Nt.children($t))===null||ue===void 0)&&ue.length&&(ie.width=Dt.width,ie.height=Dt.height)}}),Et.edges().forEach(function($t){var ue=Et.edge($t),ie=Nt.edge($t);ue.points=ie?ie.points:[],ie&&ie.hasOwnProperty("x")&&(ue.x=ie.x,ue.y=ie.y)}),Et.graph().width=Nt.graph().width,Et.graph().height=Nt.graph().height},$=["nodesep","edgesep","ranksep","marginx","marginy"],U={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},W=["acyclicer","ranker","rankdir","align"],V=["width","height","layer","fixorder"],H={width:0,height:0},Q=["minlen","weight","width","height","labeloffset"],tt={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},rt=["labelpos"],ct=function(Et){var Nt=new D.Graph({multigraph:!0,compound:!0}),$t=Pt(Et.graph()),ue={};return W==null||W.forEach(function(ie){$t[ie]!==void 0&&(ue[ie]=$t[ie])}),Nt.setGraph(Object.assign({},U,It($t,$),ue)),Et.nodes().forEach(function(ie){var Dt=Pt(Et.node(ie)),ne=b(b({},H),Dt),pe=It(ne,V);Nt.setNode(ie,pe),Nt.setParent(ie,Et.parent(ie))}),Et.edges().forEach(function(ie){var Dt=Pt(Et.edge(ie)),ne={};rt==null||rt.forEach(function(pe){Dt[pe]!==void 0&&(ne[pe]=Dt[pe])}),Nt.setEdgeObj(ie,Object.assign({},tt,It(Dt,Q),ne))}),Nt},ot=function(Et){var Nt=Et.graph();Nt.ranksep||(Nt.ranksep=0),Nt.ranksep/=2,Et.nodes().forEach(function($t){var ue=Et.node($t);isNaN(ue.layer)||ue.layer||(ue.layer=0)}),Et.edges().forEach(function($t){var ue,ie=Et.edge($t);ie.minlen*=2,((ue=ie.labelpos)===null||ue===void 0?void 0:ue.toLowerCase())!=="c"&&(Nt.rankdir==="TB"||Nt.rankdir==="BT"?ie.width+=ie.labeloffset:ie.height+=ie.labeloffset)})},xt=function(Et){Et.edges().forEach(function(Nt){var $t=Et.edge(Nt);if($t.width&&$t.height){var ue=Et.node(Nt.v),ie=Et.node(Nt.w),Dt={e:Nt,rank:(ie.rank-ue.rank)/2+ue.rank};(0,P.addDummyNode)(Et,"edge-proxy",Dt,"_ep")}})},pt=function(Et){var Nt=0;Et.nodes().forEach(function($t){var ue,ie,Dt=Et.node($t);Dt.borderTop&&(Dt.minRank=(ue=Et.node(Dt.borderTop))===null||ue===void 0?void 0:ue.rank,Dt.maxRank=(ie=Et.node(Dt.borderBottom))===null||ie===void 0?void 0:ie.rank,Nt=Math.max(Nt,Dt.maxRank||-1/0))}),Et.graph().maxRank=Nt},Xt=function(Et){Et.nodes().forEach(function(Nt){var $t=Et.node(Nt);$t.dummy==="edge-proxy"&&(Et.edge($t.e).labelRank=$t.rank,Et.removeNode(Nt))})},Ct=function(Et){var Nt,$t=0,ue,ie=0,Dt=Et.graph(),ne=Dt.marginx||0,pe=Dt.marginy||0,Wt=function(ae){if(ae){var Se=ae.x,be=ae.y,Qt=ae.width,we=ae.height;!isNaN(Se)&&!isNaN(Qt)&&(Nt===void 0&&(Nt=Se-Qt/2),Nt=Math.min(Nt,Se-Qt/2),$t=Math.max($t,Se+Qt/2)),!isNaN(be)&&!isNaN(we)&&(ue===void 0&&(ue=be-we/2),ue=Math.min(ue,be-we/2),ie=Math.max(ie,be+we/2))}};Et.nodes().forEach(function(ae){Wt(Et.node(ae))}),Et.edges().forEach(function(ae){var Se=Et.edge(ae);Se!=null&&Se.hasOwnProperty("x")&&Wt(Se)}),Nt-=ne,ue-=pe,Et.nodes().forEach(function(ae){var Se=Et.node(ae);Se&&(Se.x-=Nt,Se.y-=ue)}),Et.edges().forEach(function(ae){var Se,be=Et.edge(ae);(Se=be.points)===null||Se===void 0||Se.forEach(function(Qt){Qt.x-=Nt,Qt.y-=ue}),be.hasOwnProperty("x")&&(be.x-=Nt),be.hasOwnProperty("y")&&(be.y-=ue)}),Dt.width=$t-Nt+ne,Dt.height=ie-ue+pe},At=function(Et){Et.edges().forEach(function(Nt){var $t=Et.edge(Nt),ue=Et.node(Nt.v),ie=Et.node(Nt.w),Dt,ne;$t.points?(Dt=$t.points[0],ne=$t.points[$t.points.length-1]):($t.points=[],Dt=ie,ne=ue),$t.points.unshift((0,P.intersectRect)(ue,Dt)),$t.points.push((0,P.intersectRect)(ie,ne))})},Z=function(Et){Et.edges().forEach(function(Nt){var $t=Et.edge(Nt);if($t!=null&&$t.hasOwnProperty("x"))switch(($t.labelpos==="l"||$t.labelpos==="r")&&($t.width-=$t.labeloffset),$t.labelpos){case"l":$t.x-=$t.width/2+$t.labeloffset;break;case"r":$t.x+=$t.width/2+$t.labeloffset;break}})},q=function(Et){Et.edges().forEach(function(Nt){var $t,ue=Et.edge(Nt);ue.reversed&&(($t=ue.points)===null||$t===void 0||$t.reverse())})},bt=function(Et){Et.nodes().forEach(function(Nt){var $t,ue,ie;if(!(($t=Et.children(Nt))===null||$t===void 0)&&$t.length){var Dt=Et.node(Nt),ne=Et.node(Dt.borderTop),pe=Et.node(Dt.borderBottom),Wt=Et.node(Dt.borderLeft[((ue=Dt.borderLeft)===null||ue===void 0?void 0:ue.length)-1]),ae=Et.node(Dt.borderRight[((ie=Dt.borderRight)===null||ie===void 0?void 0:ie.length)-1]);Dt.width=Math.abs((ae==null?void 0:ae.x)-(Wt==null?void 0:Wt.x))||10,Dt.height=Math.abs((pe==null?void 0:pe.y)-(ne==null?void 0:ne.y))||10,Dt.x=((Wt==null?void 0:Wt.x)||0)+Dt.width/2,Dt.y=((ne==null?void 0:ne.y)||0)+Dt.height/2}}),Et.nodes().forEach(function(Nt){var $t;(($t=Et.node(Nt))===null||$t===void 0?void 0:$t.dummy)==="border"&&Et.removeNode(Nt)})},_t=function(Et){Et.edges().forEach(function(Nt){if(Nt.v===Nt.w){var $t=Et.node(Nt.v);$t.selfEdges||($t.selfEdges=[]),$t.selfEdges.push({e:Nt,label:Et.edge(Nt)}),Et.removeEdgeObj(Nt)}})},nt=function(Et){var Nt=(0,P.buildLayerMatrix)(Et);Nt==null||Nt.forEach(function($t){var ue=0;$t==null||$t.forEach(function(ie,Dt){var ne,pe=Et.node(ie);pe.order=Dt+ue,(ne=pe.selfEdges)===null||ne===void 0||ne.forEach(function(Wt){(0,P.addDummyNode)(Et,"selfedge",{width:Wt.label.width,height:Wt.label.height,rank:pe.rank,order:Dt+ ++ue,e:Wt.e,label:Wt.label},"_se")}),delete pe.selfEdges})})},vt=function(Et){Et.nodes().forEach(function(Nt){var $t=Et.node(Nt);if($t.dummy==="selfedge"){var ue=Et.node($t.e.v),ie=ue.x+ue.width/2,Dt=ue.y,ne=$t.x-ie,pe=ue.height/2;Et.setEdgeObj($t.e,$t.label),Et.removeNode(Nt),$t.label.points=[{x:ie+2*ne/3,y:Dt-pe},{x:ie+5*ne/6,y:Dt-pe},{y:Dt,x:ie+ne},{x:ie+5*ne/6,y:Dt+pe},{x:ie+2*ne/3,y:Dt+pe}],$t.label.x=$t.x,$t.label.y=$t.y}})},It=function(Et,Nt){var $t={};return Nt==null||Nt.forEach(function(ue){Et[ue]!==void 0&&($t[ue]=+Et[ue])}),$t},Pt=function(Et){Et===void 0&&(Et={});var Nt={};return Object.keys(Et).forEach(function($t){Nt[$t.toLowerCase()]=Et[$t]}),Nt};z.default=F},59596:function(Ve,z,C){"use strict";Object.defineProperty(z,"__esModule",{value:!0});var b=C(269209),k=function(p){var m,S=(0,b.addDummyNode)(p,"root",{},"_root"),x=T(p),g=Math.max.apply(Math,Object.values(x));Math.abs(g)===1/0&&(g=1);var A=g-1,E=2*A+1;p.graph().nestingRoot=S,p.edges().forEach(function(F){p.edge(F).minlen*=E});var D=L(p)+1;(m=p.children())===null||m===void 0||m.forEach(function(F){w(p,S,E,D,A,x,F)}),p.graph().nodeRankFactor=E},w=function(p,m,S,x,g,A,E){var D=p.children(E);if(!(D!=null&&D.length)){E!==m&&p.setEdge(m,E,{weight:0,minlen:S});return}var F=(0,b.addBorderNode)(p,"_bt"),y=(0,b.addBorderNode)(p,"_bb"),h=p.node(E);p.setParent(F,E),h.borderTop=F,p.setParent(y,E),h.borderBottom=y,D==null||D.forEach(function(Y){w(p,m,S,x,g,A,Y);var $=p.node(Y),U=$.borderTop?$.borderTop:Y,W=$.borderBottom?$.borderBottom:Y,V=$.borderTop?x:2*x,H=U!==W?1:g-A[E]+1;p.setEdge(F,U,{minlen:H,weight:V,nestingEdge:!0}),p.setEdge(W,y,{minlen:H,weight:V,nestingEdge:!0})}),p.parent(E)||p.setEdge(m,F,{weight:0,minlen:g+A[E]})},T=function(p){var m,S={},x=function(g,A){var E=p.children(g);E==null||E.forEach(function(D){return x(D,A+1)}),S[g]=A};return(m=p.children())===null||m===void 0||m.forEach(function(g){return x(g,1)}),S},L=function(p){var m=0;return p.edges().forEach(function(S){m+=p.edge(S).weight}),m},P=function(p){var m=p.graph();m.nestingRoot&&p.removeNode(m.nestingRoot),delete m.nestingRoot,p.edges().forEach(function(S){var x=p.edge(S);x.nestingEdge&&p.removeEdgeObj(S)})};z.default={run:k,cleanup:P}},546171:function(Ve,z,C){"use strict";Object.defineProperty(z,"__esModule",{value:!0});var b=C(269209),k=function(L){L.graph().dummyChains=[],L.edges().forEach(function(P){return w(L,P)})},w=function(L,P){var p=P.v,m=L.node(p).rank,S=P.w,x=L.node(S).rank,g=P.name,A=L.edge(P),E=A.labelRank;if(x!==m+1){L.removeEdgeObj(P);var D=L.graph(),F,y,h;for(h=0,++m;m<x;++h,++m)A.points=[],y={edgeLabel:A,width:0,height:0,edgeObj:P,rank:m},F=(0,b.addDummyNode)(L,"edge",y,"_d"),m===E&&(y.width=A.width,y.height=A.height,y.dummy="edge-label",y.labelpos=A.labelpos),L.setEdge(p,F,{weight:A.weight},g),h===0&&(D.dummyChains||(D.dummyChains=[]),D.dummyChains.push(F)),p=F;L.setEdge(p,S,{weight:A.weight},g)}},T=function(L){var P;(P=L.graph().dummyChains)===null||P===void 0||P.forEach(function(p){var m=L.node(p),S=m.edgeLabel,x;m.edgeObj&&L.setEdgeObj(m.edgeObj,S);for(var g=p;m.dummy;)x=L.successors(g)[0],L.removeNode(g),S.points.push({x:m.x,y:m.y}),m.dummy==="edge-label"&&(S.x=m.x,S.y=m.y,S.width=m.width,S.height=m.height),g=x,m=L.node(g)})};z.default={run:k,undo:T}},680314:function(Ve,z){"use strict";Object.defineProperty(z,"__esModule",{value:!0});var C=function(b,k,w){var T={},L;w==null||w.forEach(function(P){for(var p=b.parent(P),m,S;p;){if(m=b.parent(p),m?(S=T[m],T[m]=p):(S=L,L=p),S&&S!==p){k.setEdge(S,p);return}p=m}})};z.default=C},989921:function(Ve,z){"use strict";Object.defineProperty(z,"__esModule",{value:!0});var C=function(b,k){return k.map(function(w){var T=b.inEdges(w);if(!(T!=null&&T.length))return{v:w};{var L={sum:0,weight:0};return T==null||T.forEach(function(P){var p=b.edge(P),m=b.node(P.v);L.sum+=p.weight*m.order,L.weight+=p.weight}),{v:w,barycenter:L.sum/L.weight,weight:L.weight}}})};z.default=C},277006:function(Ve,z,C){"use strict";Object.defineProperty(z,"__esModule",{value:!0});var b=C(627652),k=function(T,L,P){var p=w(T),m=new b.Graph({compound:!0}).setGraph({root:p}).setDefaultNodeLabel(function(S){return T.node(S)});return T.nodes().forEach(function(S){var x,g=T.node(S),A=T.parent(S);(g.rank===L||g.minRank<=L&&L<=g.maxRank)&&(m.setNode(S),m.setParent(S,A||p),(x=T[P](S))===null||x===void 0||x.forEach(function(E){var D=E.v===S?E.w:E.v,F=m.edgeFromArgs(D,S),y=F!==void 0?F.weight:0;m.setEdge(D,S,{weight:T.edge(E).weight+y})}),g.hasOwnProperty("minRank")&&m.setNode(S,{borderLeft:g.borderLeft[L],borderRight:g.borderRight[L]}))}),m},w=function(T){for(var L;T.hasNode(L="_root".concat(Math.random())););return L};z.default=k},632957:function(Ve,z,C){"use strict";Object.defineProperty(z,"__esModule",{value:!0});var b=C(269209),k=function(T,L,P){for(var p=(0,b.zipObject)(P,P.map(function(D,F){return F})),m=L.map(function(D){var F,y=(F=T.outEdges(D))===null||F===void 0?void 0:F.map(function(h){return{pos:p[h.w]||0,weight:T.edge(h).weight}});return y==null?void 0:y.sort(function(h,Y){return h.pos-Y.pos})}),S=m.flat().filter(function(D){return D!==void 0}),x=1;x<P.length;)x<<=1;var g=2*x-1;x-=1;var A=Array(g).fill(0,0,g),E=0;return S==null||S.forEach(function(D){if(D){var F=D.pos+x;A[F]+=D.weight;for(var y=0;F>0;)F%2&&(y+=A[F+1]),F=F-1>>1,A[F]+=D.weight;E+=D.weight*y}}),E},w=function(T,L){for(var P=0,p=1;p<(L==null?void 0:L.length);p+=1)P+=k(T,L[p-1],L[p]);return P};z.default=w},819597:function(Ve,z,C){"use strict";var b=this&&this.__importDefault||function(D){return D&&D.__esModule?D:{default:D}};Object.defineProperty(z,"__esModule",{value:!0});var k=b(C(115697)),w=b(C(632957)),T=b(C(277006)),L=b(C(680314)),P=b(C(99455)),p=C(449784),m=C(627652),S=C(269209),x=function(D,F){for(var y=(0,S.maxRank)(D),h=[],Y=[],$=1;$<y+1;$++)h.push($);for(var $=y-1;$>-1;$--)Y.push($);var U=g(D,h,"inEdges"),W=g(D,Y,"outEdges"),V=(0,k.default)(D);E(D,V);for(var H=Number.POSITIVE_INFINITY,Q,$=0,tt=0;tt<4;++$,++tt){A($%2?U:W,$%4>=2,!1,F),V=(0,S.buildLayerMatrix)(D);var rt=(0,w.default)(D,V);rt<H&&(tt=0,Q=(0,p.clone)(V),H=rt)}V=(0,k.default)(D),E(D,V);for(var $=0,tt=0;tt<4;++$,++tt){A($%2?U:W,$%4>=2,!0,F),V=(0,S.buildLayerMatrix)(D);var rt=(0,w.default)(D,V);rt<H&&(tt=0,Q=(0,p.clone)(V),H=rt)}E(D,Q)},g=function(D,F,y){return F.map(function(h){return(0,T.default)(D,h,y)})},A=function(D,F,y,h){var Y=new m.Graph;D==null||D.forEach(function($){for(var U,W=$.graph().root,V=(0,P.default)($,W,Y,F,y,h),H=0;H<((U=V.vs)===null||U===void 0?void 0:U.length);H++){var Q=$.node(V.vs[H]);Q&&(Q.order=H)}(0,L.default)($,Y,V.vs)})},E=function(D,F){F==null||F.forEach(function(y){y==null||y.forEach(function(h,Y){D.node(h).order=Y})})};z.default=x},724956:function(Ve,z){"use strict";Object.defineProperty(z,"__esModule",{value:!0});var C=function(b,k){for(var w=b.nodes().filter(function(m){var S;return!(!((S=b.children(m))===null||S===void 0)&&S.length)}),T=w.map(function(m){return b.node(m).rank}),L=Math.max.apply(Math,T),P=[],p=0;p<L+1;p++)P[p]=[];k==null||k.forEach(function(m){var S=b.node(m);!S||S!=null&&S.dummy||isNaN(S.rank)||(S.fixorder=P[S.rank].length,P[S.rank].push(m))})};z.default=C},115697:function(Ve,z,C){"use strict";Object.defineProperty(z,"__esModule",{value:!0});var b=C(233446),k=function(w){for(var T={},L=w.nodes().filter(function(D){var F;return!(!((F=w.children(D))===null||F===void 0)&&F.length)}),P=L.map(function(D){return w.node(D).rank}),p=(0,b.max)(P),m=[],S=0;S<p+1;S++)m.push([]);var x=function(D){var F;if(!T.hasOwnProperty(D)){T[D]=!0;var y=w.node(D);isNaN(y.rank)||m[y.rank].push(D),(F=w.successors(D))===null||F===void 0||F.forEach(function(h){return x(h)})}},g=L.sort(function(D,F){return w.node(D).rank-w.node(F).rank}),A=g.filter(function(D){return w.node(D).fixorder!==void 0}),E=A.sort(function(D,F){return w.node(D).fixorder-w.node(F).fixorder});return E==null||E.forEach(function(D){isNaN(w.node(D).rank)||m[w.node(D).rank].push(D),T[D]=!0}),g==null||g.forEach(x),m};z.default=k},707043:function(Ve,z){"use strict";Object.defineProperty(z,"__esModule",{value:!0});var C=function(w,T){var L,P,p,m={};w==null||w.forEach(function(x,g){m[x.v]={i:g,indegree:0,in:[],out:[],vs:[x.v]};var A=m[x.v];x.barycenter!==void 0&&(A.barycenter=x.barycenter,A.weight=x.weight)}),(L=T.edges())===null||L===void 0||L.forEach(function(x){var g=m[x.v],A=m[x.w];g!==void 0&&A!==void 0&&(A.indegree++,g.out.push(m[x.w]))});var S=(p=(P=Object.values(m)).filter)===null||p===void 0?void 0:p.call(P,function(x){return!x.indegree});return b(S)},b=function(w){for(var T,L,P=[],p=function(A){return function(E){E.merged||(E.barycenter===void 0||A.barycenter===void 0||E.barycenter>=A.barycenter)&&k(A,E)}},m=function(A){return function(E){E.in.push(A),--E.indegree===0&&w.push(E)}},S=function(){var A=w.pop();P.push(A),(T=A.in.reverse())===null||T===void 0||T.forEach(function(E){return p(A)(E)}),(L=A.out)===null||L===void 0||L.forEach(function(E){return m(A)(E)})};w!=null&&w.length;)S();var x=P.filter(function(A){return!A.merged}),g=["vs","i","barycenter","weight"];return x.map(function(A){var E={};return g==null||g.forEach(function(D){A[D]!==void 0&&(E[D]=A[D])}),E})},k=function(w,T){var L,P=0,p=0;w.weight&&(P+=w.barycenter*w.weight,p+=w.weight),T.weight&&(P+=T.barycenter*T.weight,p+=T.weight),w.vs=(L=T.vs)===null||L===void 0?void 0:L.concat(w.vs),w.barycenter=P/p,w.weight=p,w.i=Math.min(T.i,w.i),T.merged=!0};z.default=C},99455:function(Ve,z,C){"use strict";var b=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(z,"__esModule",{value:!0});var k=b(C(989921)),w=b(C(707043)),T=b(C(421498)),L=function(m,S,x,g,A,E){var D,F,y,h,Y=m.children(S),$=m.node(S),U=$?$.borderLeft:void 0,W=$?$.borderRight:void 0,V={};U&&(Y=Y==null?void 0:Y.filter(function(ot){return ot!==U&&ot!==W}));var H=(0,k.default)(m,Y||[]);H==null||H.forEach(function(ot){var xt;if(!((xt=m.children(ot.v))===null||xt===void 0)&&xt.length){var pt=L(m,ot.v,x,g,E);V[ot.v]=pt,pt.hasOwnProperty("barycenter")&&p(ot,pt)}});var Q=(0,w.default)(H,x);P(Q,V),(D=Q.filter(function(ot){return ot.vs.length>0}))===null||D===void 0||D.forEach(function(ot){var xt=m.node(ot.vs[0]);xt&&(ot.fixorder=xt.fixorder,ot.order=xt.order)});var tt=(0,T.default)(Q,g,A,E);if(U&&(tt.vs=[U,tt.vs,W].flat(),!((F=m.predecessors(U))===null||F===void 0)&&F.length)){var rt=m.node(((y=m.predecessors(U))===null||y===void 0?void 0:y[0])||""),ct=m.node(((h=m.predecessors(W))===null||h===void 0?void 0:h[0])||"");tt.hasOwnProperty("barycenter")||(tt.barycenter=0,tt.weight=0),tt.barycenter=(tt.barycenter*tt.weight+rt.order+ct.order)/(tt.weight+2),tt.weight+=2}return tt},P=function(m,S){m==null||m.forEach(function(x){var g,A=(g=x.vs)===null||g===void 0?void 0:g.map(function(E){return S[E]?S[E].vs:E});x.vs=A.flat()})},p=function(m,S){m.barycenter!==void 0?(m.barycenter=(m.barycenter*m.weight+S.barycenter*S.weight)/(m.weight+S.weight),m.weight+=S.weight):(m.barycenter=S.barycenter,m.weight=S.weight)};z.default=L},421498:function(Ve,z,C){"use strict";Object.defineProperty(z,"__esModule",{value:!0});var b=C(269209),k=function(L,P,p,m){var S=(0,b.partition)(L,function(h){var Y=h.hasOwnProperty("fixorder")&&!isNaN(h.fixorder);return m?!Y&&h.hasOwnProperty("barycenter"):Y||h.hasOwnProperty("barycenter")}),x=S.lhs,g=S.rhs.sort(function(h,Y){return-h.i- -Y.i}),A=[],E=0,D=0,F=0;x==null||x.sort(T(!!P,!!p)),F=w(A,g,F),x==null||x.forEach(function(h){var Y;F+=(Y=h.vs)===null||Y===void 0?void 0:Y.length,A.push(h.vs),E+=h.barycenter*h.weight,D+=h.weight,F=w(A,g,F)});var y={vs:A.flat()};return D&&(y.barycenter=E/D,y.weight=D),y},w=function(L,P,p){for(var m=p,S;P.length&&(S=P[P.length-1]).i<=m;)P.pop(),L==null||L.push(S.vs),m++;return m},T=function(L,P){return function(p,m){if(p.fixorder!==void 0&&m.fixorder!==void 0)return p.fixorder-m.fixorder;if(p.barycenter<m.barycenter)return-1;if(p.barycenter>m.barycenter)return 1;if(P&&p.order!==void 0&&m.order!==void 0){if(p.order<m.order)return-1;if(p.order>m.order)return 1}return L?m.i-p.i:p.i-m.i}};z.default=k},933562:function(Ve,z){"use strict";Object.defineProperty(z,"__esModule",{value:!0});var C=function(w){var T,L={},P=0,p=function(m){var S,x=P;(S=w.children(m))===null||S===void 0||S.forEach(p),L[m]={low:x,lim:P++}};return(T=w.children())===null||T===void 0||T.forEach(p),L},b=function(w,T,L,P){var p=[],m=[],S=Math.min(T[L].low,T[P].low),x=Math.max(T[L].lim,T[P].lim),g,A;g=L;do g=w.parent(g),p.push(g);while(g&&(T[g].low>S||x>T[g].lim));for(A=g,g=P;g&&g!==A;)m.push(g),g=w.parent(g);return{lca:A,path:p.concat(m.reverse())}},k=function(w){var T,L=C(w);(T=w.graph().dummyChains)===null||T===void 0||T.forEach(function(P){var p,m,S=P,x=w.node(S),g=x.edgeObj;if(g)for(var A=b(w,L,g.v,g.w),E=A.path,D=A.lca,F=0,y=E[F],h=!0;S!==g.w;){if(x=w.node(S),h){for(;y!==D&&((p=w.node(y))===null||p===void 0?void 0:p.maxRank)<x.rank;)F++,y=E[F];y===D&&(h=!1)}if(!h){for(;F<E.length-1&&((m=w.node(E[F+1]))===null||m===void 0?void 0:m.minRank)<=x.rank;)F++;y=E[F]}w.setParent(S,y),S=w.successors(S)[0]}})};z.default=k},371963:function(Ve,z,C){"use strict";var b=this&&this.__extends||function(){var U=function(W,V){return U=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(H,Q){H.__proto__=Q}||function(H,Q){for(var tt in Q)Object.prototype.hasOwnProperty.call(Q,tt)&&(H[tt]=Q[tt])},U(W,V)};return function(W,V){if(typeof V!="function"&&V!==null)throw new TypeError("Class extends value "+String(V)+" is not a constructor or null");U(W,V);function H(){this.constructor=W}W.prototype=V===null?Object.create(V):(H.prototype=V.prototype,new H)}}();Object.defineProperty(z,"__esModule",{value:!0}),z.width=z.sep=z.positionX=z.balance=z.alignCoordinates=z.findSmallestWidthAlignment=z.buildBlockGraph=z.horizontalCompaction=z.verticalAlignment=z.hasConflict=z.addConflict=z.findOtherInnerSegmentNode=z.findType2Conflicts=z.findType1Conflicts=void 0;var k=C(199905),w=C(233446),T=C(269209),L=function(U){b(W,U);function W(){return U!==null&&U.apply(this,arguments)||this}return W}(k.Graph),P=function(U,W){var V={},H=function(Q,tt){var rt=0,ct=0,ot=Q.length,xt=tt==null?void 0:tt[(tt==null?void 0:tt.length)-1];return tt==null||tt.forEach(function(pt,Xt){var Ct,At=(0,z.findOtherInnerSegmentNode)(U,pt),Z=At?U.node(At).order:ot;(At||pt===xt)&&((Ct=tt.slice(ct,Xt+1))===null||Ct===void 0||Ct.forEach(function(q){var bt;(bt=U.predecessors(q))===null||bt===void 0||bt.forEach(function(_t){var nt,vt=U.node(_t),It=vt.order;(It<rt||Z<It)&&!(vt.dummy&&(!((nt=U.node(q))===null||nt===void 0)&&nt.dummy))&&(0,z.addConflict)(V,_t,q)})}),ct=Xt+1,rt=Z)}),tt};return W!=null&&W.length&&W.reduce(H),V};z.findType1Conflicts=P;var p=function(U,W){var V={};function H(ct,ot,xt,pt,Xt){for(var Ct,At,Z,q=ot;q<xt;q++)Z=ct[q],!((Ct=U.node(Z))===null||Ct===void 0)&&Ct.dummy&&((At=U.predecessors(Z))===null||At===void 0||At.forEach(function(bt){var _t=U.node(bt);_t.dummy&&(_t.order<pt||_t.order>Xt)&&(0,z.addConflict)(V,bt,Z)}))}function Q(ct){return JSON.stringify(ct.slice(1))}function tt(ct,ot){var xt=Q(ct);ot.get(xt)||(H.apply(void 0,ct),ot.set(xt,!0))}var rt=function(ct,ot){var xt=-1,pt,Xt=0,Ct=new Map;return ot==null||ot.forEach(function(At,Z){var q;if(((q=U.node(At))===null||q===void 0?void 0:q.dummy)==="border"){var bt=U.predecessors(At)||[];bt.length&&(pt=U.node(bt[0]).order,tt([ot,Xt,Z,xt,pt],Ct),Xt=Z,xt=pt)}tt([ot,Xt,ot.length,pt,ct.length],Ct)}),ot};return W!=null&&W.length&&W.reduce(rt),V};z.findType2Conflicts=p;var m=function(U,W){var V,H;if(!((V=U.node(W))===null||V===void 0)&&V.dummy)return(H=U.predecessors(W))===null||H===void 0?void 0:H.find(function(Q){return U.node(Q).dummy})};z.findOtherInnerSegmentNode=m;var S=function(U,W,V){var H=W,Q=V;if(H>Q){var tt=H;H=Q,Q=tt}var rt=U[H];rt||(U[H]=rt={}),rt[Q]=!0};z.addConflict=S;var x=function(U,W,V){var H=W,Q=V;if(H>Q){var tt=W;H=Q,Q=tt}return!!U[H]};z.hasConflict=x;var g=function(U,W,V,H){var Q={},tt={},rt={};return W==null||W.forEach(function(ct){ct==null||ct.forEach(function(ot,xt){Q[ot]=ot,tt[ot]=ot,rt[ot]=xt})}),W==null||W.forEach(function(ct){var ot=-1;ct==null||ct.forEach(function(xt){var pt=H(xt);if(pt.length){pt=pt.sort(function(q,bt){return rt[q]-rt[bt]});for(var Xt=(pt.length-1)/2,Ct=Math.floor(Xt),At=Math.ceil(Xt);Ct<=At;++Ct){var Z=pt[Ct];tt[xt]===xt&&ot<rt[Z]&&!(0,z.hasConflict)(V,xt,Z)&&(tt[Z]=xt,tt[xt]=Q[xt]=Q[Z],ot=rt[Z])}}})}),{root:Q,align:tt}};z.verticalAlignment=g;var A=function(U,W,V,H,Q){var tt,rt={},ct=(0,z.buildBlockGraph)(U,W,V,Q),ot=Q?"borderLeft":"borderRight",xt=function(Ct,At){for(var Z=ct.nodes(),q=Z.pop(),bt={};q;)bt[q]?Ct(q):(bt[q]=!0,Z.push(q),Z=Z.concat(At(q))),q=Z.pop()},pt=function(Ct){rt[Ct]=(ct.inEdges(Ct)||[]).reduce(function(At,Z){return Math.max(At,(rt[Z.v]||0)+ct.edge(Z))},0)},Xt=function(Ct){var At=(ct.outEdges(Ct)||[]).reduce(function(q,bt){return Math.min(q,(rt[bt.w]||0)-ct.edge(bt))},Number.POSITIVE_INFINITY),Z=U.node(Ct);At!==Number.POSITIVE_INFINITY&&Z.borderType!==ot&&(rt[Ct]=Math.max(rt[Ct],At))};return xt(pt,ct.predecessors.bind(ct)),xt(Xt,ct.successors.bind(ct)),(tt=Object.values(H))===null||tt===void 0||tt.forEach(function(Ct){rt[Ct]=rt[V[Ct]]}),rt};z.horizontalCompaction=A;var E=function(U,W,V,H){var Q=new L,tt=U.graph(),rt=(0,z.sep)(tt.nodesep,tt.edgesep,H);return W==null||W.forEach(function(ct){var ot;ct==null||ct.forEach(function(xt){var pt=V[xt];if(Q.setNode(pt),ot){var Xt=V[ot],Ct=Q.edgeFromArgs(Xt,pt);Q.setEdge(Xt,pt,Math.max(rt(U,xt,ot),Ct||0))}ot=xt})}),Q};z.buildBlockGraph=E;var D=function(U,W){return(0,T.minBy)(Object.values(W),function(V){var H,Q=Number.NEGATIVE_INFINITY,tt=Number.POSITIVE_INFINITY;return(H=Object.keys(V))===null||H===void 0||H.forEach(function(rt){var ct=V[rt],ot=(0,z.width)(U,rt)/2;Q=Math.max(ct+ot,Q),tt=Math.min(ct-ot,tt)}),Q-tt})};z.findSmallestWidthAlignment=D;function F(U,W){var V=Object.values(W),H=(0,w.min)(V),Q=(0,w.max)(V);["u","d"].forEach(function(tt){["l","r"].forEach(function(rt){var ct=tt+rt,ot=U[ct],xt;if(ot!==W){var pt=Object.values(ot);xt=rt==="l"?H-(0,w.min)(pt):Q-(0,w.max)(pt),xt&&(U[ct]={},Object.keys(ot).forEach(function(Xt){U[ct][Xt]=ot[Xt]+xt}))}})})}z.alignCoordinates=F;var y=function(U,W){var V={};return Object.keys(U.ul).forEach(function(H){if(W)V[H]=U[W.toLowerCase()][H];else{var Q=Object.values(U).map(function(tt){return tt[H]});V[H]=(Q[0]+Q[1])/2}}),V};z.balance=y;var h=function(U){var W=(0,T.buildLayerMatrix)(U),V=Object.assign((0,z.findType1Conflicts)(U,W),(0,z.findType2Conflicts)(U,W)),H={},Q;["u","d"].forEach(function(rt){Q=rt==="u"?W:Object.values(W).reverse(),["l","r"].forEach(function(ct){ct==="r"&&(Q=Q.map(function(Xt){return Object.values(Xt).reverse()}));var ot=(rt==="u"?U.predecessors:U.successors).bind(U),xt=(0,z.verticalAlignment)(U,Q,V,ot),pt=(0,z.horizontalCompaction)(U,Q,xt.root,xt.align,ct==="r");ct==="r"&&Object.keys(pt).forEach(function(Xt){pt[Xt]=-pt[Xt]}),H[rt+ct]=pt})});var tt=(0,z.findSmallestWidthAlignment)(U,H);return F(H,tt),(0,z.balance)(H,U.graph().align)};z.positionX=h;var Y=function(U,W,V){return function(H,Q,tt){var rt=H.node(Q),ct=H.node(tt),ot=0,xt;if(ot+=rt.width/2,rt.hasOwnProperty("labelpos"))switch((rt.labelpos||"").toLowerCase()){case"l":xt=-rt.width/2;break;case"r":xt=rt.width/2;break}if(xt&&(ot+=V?xt:-xt),xt=0,ot+=(rt.dummy?W:U)/2,ot+=(ct.dummy?W:U)/2,ot+=ct.width/2,ct.labelpos)switch((ct.labelpos||"").toLowerCase()){case"l":xt=ct.width/2;break;case"r":xt=-ct.width/2;break}return xt&&(ot+=V?xt:-xt),xt=0,ot}};z.sep=Y;var $=function(U,W){return U.node(W).width||0};z.width=$},100095:function(Ve,z,C){"use strict";var b=this&&this.__spreadArray||function(p,m,S){if(S||arguments.length===2)for(var x=0,g=m.length,A;x<g;x++)(A||!(x in m))&&(A||(A=Array.prototype.slice.call(m,0,x)),A[x]=m[x]);return p.concat(A||Array.prototype.slice.call(m))};Object.defineProperty(z,"__esModule",{value:!0});var k=C(269209),w=C(371963),T=function(p){var m=(0,k.buildLayerMatrix)(p),S=p.graph().ranksep,x=0;m==null||m.forEach(function(g){var A=g.map(function(D){return p.node(D).height}),E=Math.max.apply(Math,b(b([],A,!1),[0],!1));g==null||g.forEach(function(D){p.node(D).y=x+E/2}),x+=E+S})},L=function(p){var m=(0,k.buildLayerMatrix)(p),S=Object.assign((0,w.findType1Conflicts)(p,m),(0,w.findType2Conflicts)(p,m)),x={},g=[];["u","d"].forEach(function(E){g=E==="u"?m:Object.values(m).reverse(),["l","r"].forEach(function(D){D==="r"&&(g=g.map(function(Y){return Object.values(Y).reverse()}));var F=(E==="u"?p.predecessors:p.successors).bind(p),y=(0,w.verticalAlignment)(p,g,S,F),h=(0,w.horizontalCompaction)(p,g,y.root,y.align,D==="r");D==="r"&&Object.keys(h).forEach(function(Y){return h[Y]=-h[Y]}),x[E+D]=h})});var A=(0,w.findSmallestWidthAlignment)(p,x);return A&&(0,w.alignCoordinates)(x,A),(0,w.balance)(x,p.graph().align)},P=function(p){var m,S=(0,k.asNonCompoundGraph)(p);T(S);var x=L(S);(m=Object.keys(x))===null||m===void 0||m.forEach(function(g){S.node(g).x=x[g]})};z.default=P},813614:function(Ve,z,C){"use strict";Object.defineProperty(z,"__esModule",{value:!0}),z.feasibleTreeWithLayer=z.feasibleTree=void 0;var b=C(337323),k=C(269209),w=C(627652),T=function(x){var g=new w.Graph({directed:!1}),A=x.nodes()[0],E=x.nodeCount();g.setNode(A,{});for(var D,F;L(g,x)<E;)D=m(g,x),F=g.hasNode(D.v)?(0,b.slack)(x,D):-(0,b.slack)(x,D),S(g,x,F);return g};z.feasibleTree=T;var L=function(x,g){var A=function(E){g.nodeEdges(E).forEach(function(D){var F=D.v,y=E===F?D.w:F;!x.hasNode(y)&&!(0,b.slack)(g,D)&&(x.setNode(y,{}),x.setEdge(E,y,{}),A(y))})};return x.nodes().forEach(A),x.nodeCount()},P=function(x){var g=new w.Graph({directed:!1}),A=x.nodes()[0],E=x.nodes().filter(function(y){return!!x.node(y)}).length;g.setNode(A,{});for(var D,F;p(g,x)<E;)D=m(g,x),F=g.hasNode(D.v)?(0,b.slack)(x,D):-(0,b.slack)(x,D),S(g,x,F);return g};z.feasibleTreeWithLayer=P;var p=function(x,g){var A=function(E){var D;(D=g.nodeEdges(E))===null||D===void 0||D.forEach(function(F){var y=F.v,h=E===y?F.w:y;!x.hasNode(h)&&(g.node(h).layer!==void 0||!(0,b.slack)(g,F))&&(x.setNode(h,{}),x.setEdge(E,h,{}),A(h))})};return x.nodes().forEach(A),x.nodeCount()},m=function(x,g){return(0,k.minBy)(g.edges(),function(A){return x.hasNode(A.v)!==x.hasNode(A.w)?(0,b.slack)(g,A):1/0})},S=function(x,g,A){x.nodes().forEach(function(E){g.node(E).rank||(g.node(E).rank=0),g.node(E).rank+=A})};z.default={feasibleTree:T,feasibleTreeWithLayer:P}},576827:function(Ve,z,C){"use strict";var b=this&&this.__importDefault||function(S){return S&&S.__esModule?S:{default:S}};Object.defineProperty(z,"__esModule",{value:!0});var k=C(337323),w=C(813614),T=b(C(432253)),L=function(S){switch(S.graph().ranker){case"network-simplex":m(S);break;case"tight-tree":p(S);break;case"longest-path":P(S);break;default:p(S)}},P=k.longestPath,p=function(S){(0,k.longestPathWithLayer)(S),(0,w.feasibleTreeWithLayer)(S)},m=function(S){(0,T.default)(S)};z.default=L},432253:function(Ve,z,C){"use strict";Object.defineProperty(z,"__esModule",{value:!0}),z.exchangeEdges=z.enterEdge=z.leaveEdge=z.initLowLimValues=z.calcCutValue=z.initCutValues=void 0;var b=C(813614),k=C(337323),w=C(269209),T=C(199905),L=T.algorithm.preorder,P=T.algorithm.postorder,p=function($){var U=(0,w.simplify)($);(0,k.longestPath)(U);var W=(0,b.feasibleTree)(U);(0,z.initLowLimValues)(W),(0,z.initCutValues)(W,U);for(var V,H;V=(0,z.leaveEdge)(W);)H=(0,z.enterEdge)(W,U,V),(0,z.exchangeEdges)(W,U,V,H)},m=function($,U){var W=P($,$.nodes());W=W==null?void 0:W.slice(0,(W==null?void 0:W.length)-1),W==null||W.forEach(function(V){S($,U,V)})};z.initCutValues=m;var S=function($,U,W){var V=$.node(W),H=V.parent;$.edgeFromArgs(W,H).cutvalue=(0,z.calcCutValue)($,U,W)},x=function($,U,W){var V,H=$.node(W),Q=H.parent,tt=!0,rt=U.edgeFromArgs(W,Q),ct=0;return rt||(tt=!1,rt=U.edgeFromArgs(Q,W)),ct=rt.weight,(V=U.nodeEdges(W))===null||V===void 0||V.forEach(function(ot){var xt=ot.v===W,pt=xt?ot.w:ot.v;if(pt!==Q){var Xt=xt===tt,Ct=U.edge(ot).weight;if(ct+=Xt?Ct:-Ct,h($,W,pt)){var At=$.edgeFromArgs(W,pt).cutvalue;ct+=Xt?-At:At}}}),ct};z.calcCutValue=x;var g=function($,U){U===void 0&&(U=$.nodes()[0]),A($,{},1,U)};z.initLowLimValues=g;var A=function($,U,W,V,H){var Q,tt=W,rt=W,ct=$.node(V);return U[V]=!0,(Q=$.neighbors(V))===null||Q===void 0||Q.forEach(function(ot){U[ot]||(rt=A($,U,rt,ot,V))}),ct.low=tt,ct.lim=rt++,H?ct.parent=H:delete ct.parent,rt},E=function($){return $.edges().find(function(U){return $.edge(U).cutvalue<0})};z.leaveEdge=E;var D=function($,U,W){var V=W.v,H=W.w;U.hasEdge(V,H)||(V=W.w,H=W.v);var Q=$.node(V),tt=$.node(H),rt=Q,ct=!1;Q.lim>tt.lim&&(rt=tt,ct=!0);var ot=U.edges().filter(function(xt){return ct===Y($,$.node(xt.v),rt)&&ct!==Y($,$.node(xt.w),rt)});return(0,w.minBy)(ot,function(xt){return(0,k.slack)(U,xt)})};z.enterEdge=D;var F=function($,U,W,V){var H=W.v,Q=W.w;$.removeEdge(H,Q),$.setEdge(V.v,V.w,{}),(0,z.initLowLimValues)($),(0,z.initCutValues)($,U),y($,U)};z.exchangeEdges=F;var y=function($,U){var W=$.nodes().find(function(H){var Q;return!(!((Q=U.node(H))===null||Q===void 0)&&Q.parent)}),V=L($,W);V=V==null?void 0:V.slice(1),V==null||V.forEach(function(H){var Q=$.node(H).parent,tt=U.edgeFromArgs(H,Q),rt=!1;tt||(tt=U.edgeFromArgs(Q,H),rt=!0),U.node(H).rank=U.node(Q).rank+(rt?tt.minlen:-tt.minlen)})},h=function($,U,W){return $.hasEdge(U,W)},Y=function($,U,W){return W.low<=U.lim&&U.lim<=W.lim};z.default=p},337323:function(Ve,z){"use strict";Object.defineProperty(z,"__esModule",{value:!0}),z.slack=z.longestPathWithLayer=z.longestPath=void 0;var C=function(w){var T,L={},P=function(p){var m,S=w.node(p);if(!S)return 0;if(L[p])return S.rank;L[p]=!0;var x;return(m=w.outEdges(p))===null||m===void 0||m.forEach(function(g){var A=P(g.w),E=w.edge(g).minlen,D=A-E;D&&(x===void 0||D<x)&&(x=D)}),x||(x=0),S.rank=x,x};(T=w.sources())===null||T===void 0||T.forEach(function(p){return P(p)})};z.longestPath=C;var b=function(w){var T,L={},P,p=function(x){var g,A=w.node(x);if(!A)return 0;if(L[x])return A.rank;L[x]=!0;var E;return(g=w.outEdges(x))===null||g===void 0||g.forEach(function(D){var F=p(D.w),y=w.edge(D).minlen,h=F-y;h&&(E===void 0||h<E)&&(E=h)}),E||(E=0),(P===void 0||E<P)&&(P=E),A.rank=E,E};(T=w.sources())===null||T===void 0||T.forEach(function(x){w.node(x)&&p(x)}),P===void 0&&(P=0);var m={},S=function(x,g){var A,E=w.node(x),D=isNaN(E.layer)?g:E.layer;(E.rank===void 0||E.rank<D)&&(E.rank=D),!m[x]&&(m[x]=!0,(A=w.outEdges(x))===null||A===void 0||A.map(function(F){S(F.w,D+w.edge(F).minlen)}))};w.nodes().forEach(function(x){var g=w.node(x);g&&(isNaN(g.layer)?g.rank-=P:S(x,g.layer))})};z.longestPathWithLayer=b;var k=function(w,T){return w.node(T.w).rank-w.node(T.v).rank-w.edge(T).minlen};z.slack=k,z.default={longestPath:C,longestPathWithLayer:b,slack:k}},269209:function(Ve,z,C){"use strict";Object.defineProperty(z,"__esModule",{value:!0}),z.minBy=z.notime=z.time=z.partition=z.maxRank=z.addBorderNode=z.removeEmptyRanks=z.normalizeRanks=z.buildLayerMatrix=z.intersectRect=z.predecessorWeights=z.successorWeights=z.zipObject=z.asNonCompoundGraph=z.simplify=z.addDummyNode=void 0;var b=C(449784),k=C(627652),w=function(U,W){return Number(U)-Number(W)},T=function(U,W,V,H){var Q;do Q="".concat(H).concat(Math.random());while(U.hasNode(Q));return V.dummy=W,U.setNode(Q,V),Q};z.addDummyNode=T;var L=function(U){var W=new k.Graph().setGraph(U.graph());return U.nodes().forEach(function(V){W.setNode(V,U.node(V))}),U.edges().forEach(function(V){var H=W.edgeFromArgs(V.v,V.w)||{weight:0,minlen:1},Q=U.edge(V);W.setEdge(V.v,V.w,{weight:H.weight+Q.weight,minlen:Math.max(H.minlen,Q.minlen)})}),W};z.simplify=L;var P=function(U){var W=new k.Graph({multigraph:U.isMultigraph()}).setGraph(U.graph());return U.nodes().forEach(function(V){var H;!((H=U.children(V))===null||H===void 0)&&H.length||W.setNode(V,U.node(V))}),U.edges().forEach(function(V){W.setEdgeObj(V,U.edge(V))}),W};z.asNonCompoundGraph=P;var p=function(U,W){return U==null?void 0:U.reduce(function(V,H,Q){return V[H]=W[Q],V},{})};z.zipObject=p;var m=function(U){var W={};return U.nodes().forEach(function(V){var H,Q={};(H=U.outEdges(V))===null||H===void 0||H.forEach(function(tt){var rt;Q[tt.w]=(Q[tt.w]||0)+(((rt=U.edge(tt))===null||rt===void 0?void 0:rt.weight)||0)}),W[V]=Q}),W};z.successorWeights=m;var S=function(U){var W=U.nodes(),V=W.map(function(H){var Q,tt={};return(Q=U.inEdges(H))===null||Q===void 0||Q.forEach(function(rt){tt[rt.v]=(tt[rt.v]||0)+U.edge(rt).weight}),tt});return(0,z.zipObject)(W,V)};z.predecessorWeights=S;var x=function(U,W){var V=Number(U.x),H=Number(U.y),Q=Number(W.x)-V,tt=Number(W.y)-H,rt=Number(U.width)/2,ct=Number(U.height)/2;if(!Q&&!tt)return{x:0,y:0};var ot,xt;return Math.abs(tt)*rt>Math.abs(Q)*ct?(tt<0&&(ct=-ct),ot=ct*Q/tt,xt=ct):(Q<0&&(rt=-rt),ot=rt,xt=rt*tt/Q),{x:V+ot,y:H+xt}};z.intersectRect=x;var g=function(U){for(var W=[],V=(0,z.maxRank)(U)+1,H=0;H<V;H++)W.push([]);U.nodes().forEach(function(Q){var tt=U.node(Q);if(tt){var rt=tt.rank;rt!==void 0&&W[rt]&&W[rt].push(Q)}});for(var H=0;H<V;H++)W[H]=W[H].sort(function(tt,rt){var ct,ot;return w((ct=U.node(tt))===null||ct===void 0?void 0:ct.order,(ot=U.node(rt))===null||ot===void 0?void 0:ot.order)});return W};z.buildLayerMatrix=g;var A=function(U){var W=U.nodes().filter(function(H){var Q;return((Q=U.node(H))===null||Q===void 0?void 0:Q.rank)!==void 0}).map(function(H){return U.node(H).rank}),V=Math.min.apply(Math,W);U.nodes().forEach(function(H){var Q=U.node(H);Q.hasOwnProperty("rank")&&V!==1/0&&(Q.rank-=V)})};z.normalizeRanks=A;var E=function(U){var W=U.nodes(),V=W.filter(function(xt){var pt;return((pt=U.node(xt))===null||pt===void 0?void 0:pt.rank)!==void 0}).map(function(xt){return U.node(xt).rank}),H=Math.min.apply(Math,V),Q=[];W.forEach(function(xt){var pt,Xt=(((pt=U.node(xt))===null||pt===void 0?void 0:pt.rank)||0)-H;Q[Xt]||(Q[Xt]=[]),Q[Xt].push(xt)});for(var tt=0,rt=U.graph().nodeRankFactor||0,ct=0;ct<Q.length;ct++){var ot=Q[ct];ot===void 0?ct%rt!==0&&(tt-=1):tt&&(ot==null||ot.forEach(function(xt){var pt=U.node(xt);pt&&(pt.rank=pt.rank||0,pt.rank+=tt)}))}};z.removeEmptyRanks=E;var D=function(U,W,V,H){var Q={width:0,height:0};return(0,b.isNumber)(V)&&(0,b.isNumber)(H)&&(Q.rank=V,Q.order=H),(0,z.addDummyNode)(U,"border",Q,W)};z.addBorderNode=D;var F=function(U){var W;return U.nodes().forEach(function(V){var H,Q=(H=U.node(V))===null||H===void 0?void 0:H.rank;Q!==void 0&&(W===void 0||Q>W)&&(W=Q)}),W||(W=0),W};z.maxRank=F;var y=function(U,W){var V={lhs:[],rhs:[]};return U==null||U.forEach(function(H){W(H)?V.lhs.push(H):V.rhs.push(H)}),V};z.partition=y;var h=function(U,W){var V=Date.now();try{return W()}finally{console.log("".concat(U," time: ").concat(Date.now()-V,"ms"))}};z.time=h;var Y=function(U,W){return W()};z.notime=Y;var $=function(U,W){return U.reduce(function(V,H){var Q=W(V),tt=W(H);return Q>tt?H:V})};z.minBy=$},177057:function(Ve,z,C){"use strict";var b=this&&this.__extends||function(){var m=function(S,x){return m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,A){g.__proto__=A}||function(g,A){for(var E in A)Object.prototype.hasOwnProperty.call(A,E)&&(g[E]=A[E])},m(S,x)};return function(S,x){if(typeof x!="function"&&x!==null)throw new TypeError("Class extends value "+String(x)+" is not a constructor or null");m(S,x);function g(){this.constructor=S}S.prototype=x===null?Object.create(x):(g.prototype=x.prototype,new g)}}(),k=this&&this.__assign||function(){return k=Object.assign||function(m){for(var S,x=1,g=arguments.length;x<g;x++){S=arguments[x];for(var A in S)Object.prototype.hasOwnProperty.call(S,A)&&(m[A]=S[A])}return m},k.apply(this,arguments)},w=this&&this.__spreadArray||function(m,S,x){if(x||arguments.length===2)for(var g=0,A=S.length,E;g<A;g++)(E||!(g in S))&&(E||(E=Array.prototype.slice.call(S,0,g)),E[g]=S[g]);return m.concat(E||Array.prototype.slice.call(S))};Object.defineProperty(z,"__esModule",{value:!0}),z.DagreCompoundLayout=void 0;var T=C(762329),L=C(631969),P=C(449784),p=function(m){b(S,m);function S(x){var g=m.call(this)||this;return g.rankdir="TB",g.nodesep=50,g.edgesep=5,g.ranksep=50,g.controlPoints=!0,g.anchorPoint=!0,g.nodes=[],g.edges=[],g.combos=[],g.onLayoutEnd=function(){},g.updateCfg(x),g}return S.prototype.getDefaultCfg=function(){return{rankdir:"TB",align:void 0,begin:void 0,nodeSize:void 0,nodesep:50,ranksep:50,controlPoints:!0,anchorPoint:!0}},S.prototype.init=function(x){var g=x.hiddenNodes||[],A=x.hiddenEdges||[],E=x.hiddenCombos||[];this.nodes=this.getDataByOrder((x.nodes||[]).concat(g)),this.edges=this.getDataByOrder((x.edges||[]).concat(A)),this.combos=(x.combos||[]).concat(E.map(function(D){return k(k({},D),{collapsed:!0})}))},S.prototype.execute=function(){var x=this,g=x.nodes,A=x.edges;if(g){var E=x.getLayoutConfig(),D=E.graphDef,F=E.graphOption,y=E.graphSettings,h=(0,L.buildGraph)(D,F,y),Y=(0,L.flatGraph)(h,!0);return this.updatePosition(Y),x.onLayoutEnd&&x.onLayoutEnd(),{nodes:g,edges:A}}},S.prototype.getNodePath=function(x){var g=this,A=g.nodes,E=g.combos,D=A.find(function(y){return y.id===x}),F=function(y,h){h===void 0&&(h=[]);var Y=E.find(function($){return $.id===y});return Y?(h.unshift(y),Y.parentId?F(Y.parentId,h):h):h};return D&&D.comboId?F(D.comboId,[x]):[x]},S.prototype.getLayoutConfig=function(){var x,g,A,E=this,D=E.nodes,F=E.edges,y=E.combos,h=E.nodeSize,Y=E.rankdir,$=E.align,U=E.edgesep,W=E.nodesep,V=E.ranksep,H=E.settings,Q=(y||[]).reduce(function(It,Pt){var Et=D.filter(function($t){return $t.comboId===Pt.id}).map(function($t){return $t.id}),Nt=(y||[]).filter(function($t){return $t.parentId===Pt.id}).map(function($t){return $t.id});return(Et.length||Nt.length)&&(It[Pt.id]=w(w([],Et,!0),Nt,!0)),It},{}),tt;h?(0,P.isArray)(h)?tt=function(){return h}:tt=function(){return[h,h]}:tt=function(It){return It&&It.size?(0,P.isArray)(It.size)?It.size:(0,P.isObject)(It.size)?[It.size.width||40,It.size.height||40]:[It.size,It.size]:[40,40]};var rt=function(It){return It&&It.size?(0,P.isArray)(It.size)?It.size:[It.size,It.size]:[80,40]},ct=rt(y==null?void 0:y[0]),ot=ct[0],xt=ct[1],pt=(g=(x=E.graphSettings)===null||x===void 0?void 0:x.subScene)===null||g===void 0?void 0:g.meta,Xt=((A=y.find(function(It){return!It.collapsed}))===null||A===void 0?void 0:A.padding)||[20,20,20,20],Ct=Xt[0],At=Xt[1],Z=Xt[2],q=Xt[3],bt={compound:Q,nodes:w([],(D||[]).map(function(It){var Pt=tt(It),Et=Pt[0],Nt=Pt[1];return k(k({},It),{width:Et,height:Nt})}),!0),edges:w([],(F||[]).map(function(It){return k(k({},It),{v:It.source,w:It.target})}),!0)},_t={expanded:(y||[]).filter(function(It){return!It.collapsed}).map(function(It){return It.id})},nt={graph:{meta:{align:$,rankDir:Y,nodeSep:W,edgeSep:U,rankSep:V}},subScene:{meta:{paddingTop:Ct||(pt==null?void 0:pt.paddingTop)||20,paddingRight:At||(pt==null?void 0:pt.paddingRight)||20,paddingBottom:Z||(pt==null?void 0:pt.paddingBottom)||20,paddingLeft:q||(pt==null?void 0:pt.paddingLeft)||20,labelHeight:0}},nodeSize:{meta:{width:ot,height:xt}}},vt=(0,L.mergeConfig)(H,k({},(0,L.mergeConfig)(nt,L.LAYOUT_CONFIG)));return E.graphSettings=vt,{graphDef:bt,graphOption:_t,graphSettings:vt}},S.prototype.updatePosition=function(x){var g=x.nodes,A=x.edges;this.updateNodePosition(g,A),this.updateEdgePosition(g,A)},S.prototype.getBegin=function(x,g){var A=this,E=A.begin,D=[0,0];if(E){var F=1/0,y=1/0;x.forEach(function(h){F>h.x&&(F=h.x),y>h.y&&(y=h.y)}),g.forEach(function(h){h.points.forEach(function(Y){F>Y.x&&(F=Y.x),y>Y.y&&(y=Y.y)})}),D[0]=E[0]-F,D[1]=E[1]-y}return D},S.prototype.updateNodePosition=function(x,g){var A=this,E=A.combos,D=A.nodes,F=A.edges,y=A.anchorPoint,h=A.graphSettings,Y=this.getBegin(x,g);x.forEach(function($){var U,W=$.x,V=$.y,H=$.id,Q=$.type,tt=$.coreBox;if(Q===L.HierarchyNodeType.META&&H!==L.ROOT_NAME){var rt=E.findIndex(function(Xt){return Xt.id===H}),ct=(U=h==null?void 0:h.subScene)===null||U===void 0?void 0:U.meta;E[rt].offsetX=W+Y[0],E[rt].offsetY=V+Y[1],E[rt].fixSize=[tt.width,tt.height],E[rt].fixCollapseSize=[tt.width,tt.height],$.expanded?E[rt].padding=[ct==null?void 0:ct.paddingTop,ct==null?void 0:ct.paddingRight,ct==null?void 0:ct.paddingBottom,ct==null?void 0:ct.paddingLeft]:E[rt].padding=[0,0,0,0]}else if(Q===L.HierarchyNodeType.OP){var rt=D.findIndex(function(Ct){return Ct.id===H});if(D[rt].x=W+Y[0],D[rt].y=V+Y[1],y){var ot=[],xt=g.filter(function(Ct){return Ct.v===H}),pt=g.filter(function(Ct){return Ct.w===H});xt.length>0&&xt.forEach(function(Ct){var At=Ct.points[0],Z=(At.x-W)/$.width+.5,q=(At.y-V)/$.height+.5;ot.push([Z,q]),Ct.baseEdgeList.forEach(function(bt){var _t=F.find(function(nt){return nt.source===bt.v&&nt.target===bt.w});_t&&(_t.sourceAnchor=ot.length-1)})}),pt.length>0&&pt.forEach(function(Ct){var At=Ct.points[Ct.points.length-1],Z=(At.x-W)/$.width+.5,q=(At.y-V)/$.height+.5;ot.push([Z,q]),Ct.baseEdgeList.forEach(function(bt){var _t=F.find(function(nt){return nt.source===bt.v&&nt.target===bt.w});_t&&(_t.targetAnchor=ot.length-1)})}),D[rt].anchorPoints=ot.length>0?ot:D[rt].anchorPoints||[]}}})},S.prototype.updateEdgePosition=function(x,g){var A=this,E=A.combos,D=A.edges,F=A.controlPoints,y=this.getBegin(x,g);F&&(E.forEach(function(h){h.inEdges=[],h.outEdges=[]}),D.forEach(function(h){var Y,$,U,W,V=x.find(function(Xt){return Xt.id===h.source}),H=x.find(function(Xt){return Xt.id===h.target}),Q=[],tt=[];if(V&&H)tt=(0,L.getEdges)(V==null?void 0:V.id,H==null?void 0:H.id,x);else if(!V||!H){var rt=A.getNodePath(h.source),ct=A.getNodePath(h.target),ot=rt.reverse().slice(V?0:1).find(function(Xt){return x.find(function(Ct){return Ct.id===Xt})}),xt=ct.reverse().slice(H?0:1).find(function(Xt){return x.find(function(Ct){return Ct.id===Xt})});V=x.find(function(Xt){return Xt.id===ot}),H=x.find(function(Xt){return Xt.id===xt}),tt=(0,L.getEdges)(V==null?void 0:V.id,H==null?void 0:H.id,x,{v:h.source,w:h.target})}if(Q=tt.reduce(function(Xt,Ct){return w(w([],Xt,!0),Ct.points.map(function(At){return k(k({},At),{x:At.x+y[0],y:At.y+y[1]})}),!0)},[]),Q=Q.slice(1,-1),h.controlPoints=Q,(H==null?void 0:H.type)===L.NodeType.META){var pt=E.findIndex(function(Xt){return Xt.id===(H==null?void 0:H.id)});if(!E[pt]||!((Y=E[pt].inEdges)===null||Y===void 0)&&Y.some(function(Xt){return Xt.source===V.id&&Xt.target===H.id}))return;($=E[pt].inEdges)===null||$===void 0||$.push({source:V.id,target:H.id,controlPoints:Q})}if((V==null?void 0:V.type)===L.NodeType.META){var pt=E.findIndex(function(Ct){return Ct.id===(V==null?void 0:V.id)});if(!E[pt]||!((U=E[pt].outEdges)===null||U===void 0)&&U.some(function(Ct){return Ct.source===V.id&&Ct.target===H.id}))return;(W=E[pt].outEdges)===null||W===void 0||W.push({source:V.id,target:H.id,controlPoints:Q})}}))},S.prototype.getType=function(){return"dagreCompound"},S.prototype.getDataByOrder=function(x){return x.every(function(g){return g.layoutOrder!==void 0})||x.forEach(function(g,A){g.layoutOrder=A}),x.sort(function(g,A){return g.layoutOrder-A.layoutOrder})},S}(T.Base);z.DagreCompoundLayout=p},934015:function(Ve,z,C){"use strict";var b=this&&this.__assign||function(){return b=Object.assign||function(g){for(var A,E=1,D=arguments.length;E<D;E++){A=arguments[E];for(var F in A)Object.prototype.hasOwnProperty.call(A,F)&&(g[F]=A[F])}return g},b.apply(this,arguments)},k=this&&this.__createBinding||(Object.create?function(g,A,E,D){D===void 0&&(D=E);var F=Object.getOwnPropertyDescriptor(A,E);(!F||("get"in F?!A.__esModule:F.writable||F.configurable))&&(F={enumerable:!0,get:function(){return A[E]}}),Object.defineProperty(g,D,F)}:function(g,A,E,D){D===void 0&&(D=E),g[D]=A[E]}),w=this&&this.__setModuleDefault||(Object.create?function(g,A){Object.defineProperty(g,"default",{enumerable:!0,value:A})}:function(g,A){g.default=A}),T=this&&this.__importStar||function(g){if(g&&g.__esModule)return g;var A={};if(g!=null)for(var E in g)E!=="default"&&Object.prototype.hasOwnProperty.call(g,E)&&k(A,g,E);return w(A,g),A},L=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(z,"__esModule",{value:!0});var P=T(C(971497)),p=L(C(788221)),m=L(C(87064)),S=C(920171);function x(g,A){var E=g.nodes,D=g.edges,F=A.width,y=A.height;if(!(E!=null&&E.length))return Promise.resolve();var h=[];E.forEach(function(tt){var rt=D.filter(function(ot){return ot.source===tt.id||ot.target===tt.id});if(rt.length>1){var ct=b({},tt);delete ct.size,h.push(ct)}});var Y=[];D.forEach(function(tt){var rt=h.find(function(ot){return ot.id===tt.source}),ct=h.find(function(ot){return ot.id===tt.target});rt&&ct&&Y.push(tt)});var $=new S.DagreLayout({type:"dagre",ranksep:A.nodeMinGap,nodesep:A.nodeMinGap}),U=$.layout({nodes:h,edges:Y}).nodes;E.forEach(function(tt){var rt=(U||[]).find(function(ct){return ct.id===tt.id});tt.x=(rt==null?void 0:rt.x)||F/2,tt.y=(rt==null?void 0:rt.y)||y/2});var W=JSON.parse(JSON.stringify(E)),V=JSON.parse(JSON.stringify(D)),H=P.forceSimulation().nodes(W).force("link",P.forceLink(V).id(function(tt){return tt.id}).distance(function(tt){var rt=Y.find(function(ct){return ct.source===tt.source&&ct.target===tt.target});return rt?30:20})).force("charge",P.forceManyBody()).force("center",P.forceCenter(F/2,y/2)).force("x",P.forceX(F/2)).force("y",P.forceY(y/2)).alpha(.3).alphaDecay(.08).alphaMin(.001),Q=new Promise(function(tt){H.on("end",function(){E.forEach(function(Ct){var At=W.find(function(Z){return Z.id===Ct.id});At&&(Ct.x=At.x,Ct.y=At.y)});var rt=Math.min.apply(Math,E.map(function(Ct){return Ct.x})),ct=Math.max.apply(Math,E.map(function(Ct){return Ct.x})),ot=Math.min.apply(Math,E.map(function(Ct){return Ct.y})),xt=Math.max.apply(Math,E.map(function(Ct){return Ct.y})),pt=F/(ct-rt),Xt=y/(xt-ot);E.forEach(function(Ct){Ct.x!==void 0&&pt<1&&(Ct.x=(Ct.x-rt)*pt),Ct.y!==void 0&&Xt<1&&(Ct.y=(Ct.y-ot)*Xt)}),E.forEach(function(Ct){Ct.sizeTemp=Ct.size,Ct.size=[10,10]}),(0,m.default)(E,D),E.forEach(function(Ct){Ct.size=Ct.sizeTemp||[],delete Ct.sizeTemp}),(0,p.default)({nodes:E,edges:D},A),tt()})});return Q}z.default=x},788221:function(Ve,z,C){"use strict";var b=this&&this.__importDefault||function(T){return T&&T.__esModule?T:{default:T}};Object.defineProperty(z,"__esModule",{value:!0});var k=b(C(28611));function w(T,L){if(!T.nodes||T.nodes.length===0)return T;var P=L.width,p=L.height,m=L.nodeMinGap,S=1e4,x=1e4;T.nodes.forEach(function(V){var H=V.size[0]||50,Q=V.size[1]||50;S=Math.min(H,S),x=Math.min(Q,x)});var g=new k.default;g.init(P,p,{CELL_H:x,CELL_W:S}),T.nodes.forEach(function(V){var H=g.occupyNearest(V);H&&(H.node={id:V.id,size:V.size},V.x=H.x,V.y=H.y,V.dx=H.dx,V.dy=H.dy)});for(var A=0;A<T.nodes.length;A++){var E=T.nodes[A],D=g.findGridByNodeId(E.id);if(!D)throw new Error("can not find node cell");var F=D.column,y=D.row;if(E.size[0]+m>S){for(var h=Math.ceil((E.size[0]+m)/S)-1,Y=h,$=0;$<h;$++){var U=g.additionColumn.indexOf(F+$+1)>-1;if(U&&!g.cells[F+$+1][y].node)Y--;else break}g.insertColumn(F,Y)}if(E.size[1]+m>x){for(var h=Math.ceil((E.size[1]+m)/x)-1,Y=h,$=0;$<h;$++){var U=g.additionRow.indexOf(y+$+1)>-1;if(U&&!g.cells[F][y+$+1].node)Y--;else break}g.insertRow(y,Y)}}for(var A=0;A<g.columnNum;A++)for(var W=function(H){var Q=g.cells[A][H];if(Q.node){var tt=T.nodes.find(function(rt){var ct;return rt.id===((ct=Q==null?void 0:Q.node)===null||ct===void 0?void 0:ct.id)});tt&&(tt.x=Q.x+tt.size[0]/2,tt.y=Q.y+tt.size[1]/2)}},$=0;$<g.rowNum;$++)W($)}z.default=w},28611:function(Ve,z){"use strict";var C=this&&this.__assign||function(){return C=Object.assign||function(k){for(var w,T=1,L=arguments.length;T<L;T++){w=arguments[T];for(var P in w)Object.prototype.hasOwnProperty.call(w,P)&&(k[P]=w[P])}return k},C.apply(this,arguments)};Object.defineProperty(z,"__esModule",{value:!0});var b=function(){function k(){this.cells=[],this.columnNum=0,this.rowNum=0,this.additionColumn=[],this.additionRow=[]}return k.prototype.init=function(w,T,L){this.cells=[],this.CELL_W=L.CELL_W||k.DEFAULT_CELL_W,this.CELL_H=L.CELL_H||k.DEFAULT_CELL_H,this.columnNum=Math.ceil(w/this.CELL_W),this.rowNum=Math.ceil(T/this.CELL_H),k.MIN_DIST=Math.pow(w,2)+Math.pow(T,2);for(var P=0;P<this.columnNum;P++){for(var p=[],m=0;m<this.rowNum;m++){var S={dx:P,dy:m,x:P*this.CELL_W,y:m*this.CELL_H,occupied:!1};p.push(S)}this.cells.push(p)}},k.prototype.findGridByNodeId=function(w){for(var T,L,P=0;P<this.columnNum;P++)for(var p=0;p<this.rowNum;p++)if(this.cells[P][p].node&&((L=(T=this.cells[P][p])===null||T===void 0?void 0:T.node)===null||L===void 0?void 0:L.id)===w)return{column:P,row:p};return null},k.prototype.sqdist=function(w,T){return Math.pow(w.x-T.x,2)+Math.pow(w.y-T.y,2)},k.prototype.occupyNearest=function(w){for(var T=k.MIN_DIST,L,P=null,p=0;p<this.columnNum;p++)for(var m=0;m<this.rowNum;m++)!this.cells[p][m].occupied&&(L=this.sqdist(w,this.cells[p][m]))<T&&(T=L,P=this.cells[p][m]);return P&&(P.occupied=!0),P},k.prototype.insertColumn=function(w,T){if(!(T<=0)){for(var L=0;L<T;L++){this.cells[L+this.columnNum]=[];for(var P=0;P<this.rowNum;P++)this.cells[L+this.columnNum][P]={dx:L,dy:P,x:L*this.CELL_W,y:P*this.CELL_H,occupied:!1,node:null}}for(var L=this.columnNum-1;L>w;L--)for(var P=0;P<this.rowNum;P++)this.cells[L+T][P]=C(C({},this.cells[L][P]),{x:(L+T)*this.CELL_W,y:P*this.CELL_H}),this.cells[L][P]={x:L*this.CELL_W,y:P*this.CELL_H,occupied:!0,node:null};for(var P=0;P<this.additionColumn.length;P++)this.additionColumn[P]>=w&&(this.additionColumn[P]+=T);for(var L=0;L<T;L++)this.additionColumn.push(w+L+1);this.columnNum+=T}},k.prototype.insertRow=function(w,T){if(!(T<=0)){for(var L=0;L<T;L++)for(var P=0;P<this.columnNum;P++)this.cells[P][L+this.rowNum]={dx:P,dy:L,x:P*this.CELL_W,y:L*this.CELL_H,occupied:!1,node:null};for(var P=0;P<this.columnNum;P++)for(var L=this.rowNum-1;L>w;L--)this.cells[P][L+T]=C(C({},this.cells[P][L]),{dx:P,dy:L+T,x:P*this.CELL_W,y:(L+T)*this.CELL_H}),this.cells[P][L]={dx:P,dy:L,x:P*this.CELL_W,y:L*this.CELL_H,occupied:!1,node:null};for(var L=0;L<this.additionRow.length;L++)this.additionRow[L]>=w&&(this.additionRow[L]+=T);for(var P=0;P<T;P++)this.additionRow.push(w+P+1);this.rowNum+=T}},k.prototype.getNodes=function(){for(var w=[],T=0;T<this.columnNum;T++)for(var L=0;L<this.rowNum;L++)this.cells[T][L].node&&w.push(this.cells[T][L]);return w},k.MIN_DIST=50,k.DEFAULT_CELL_W=80,k.DEFAULT_CELL_H=80,k}();z.default=b},290441:function(Ve,z,C){"use strict";var b=this&&this.__extends||function(){var P=function(p,m){return P=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(S,x){S.__proto__=x}||function(S,x){for(var g in x)Object.prototype.hasOwnProperty.call(x,g)&&(S[g]=x[g])},P(p,m)};return function(p,m){if(typeof m!="function"&&m!==null)throw new TypeError("Class extends value "+String(m)+" is not a constructor or null");P(p,m);function S(){this.constructor=p}p.prototype=m===null?Object.create(m):(S.prototype=m.prototype,new S)}}(),k=this&&this.__importDefault||function(P){return P&&P.__esModule?P:{default:P}};Object.defineProperty(z,"__esModule",{value:!0}),z.ERLayout=void 0;var w=C(762329),T=k(C(934015)),L=function(P){b(p,P);function p(m){var S=P.call(this)||this;return S.width=300,S.height=300,S.nodeMinGap=50,S.onLayoutEnd=function(){},m&&S.updateCfg(m),S}return p.prototype.getDefaultCfg=function(){return{width:300,height:300,nodeMinGap:50}},p.prototype.execute=function(){var m=this,S=m.nodes,x=m.edges;return S==null||S.forEach(function(g){g.size||(g.size=[50,50])}),(0,T.default)({nodes:S,edges:x},{width:this.width,height:this.height,nodeMinGap:this.nodeMinGap}).then(function(){m.onLayoutEnd&&m.onLayoutEnd()})},p.prototype.getType=function(){return"er"},p}(w.Base);z.ERLayout=L},87064:function(Ve,z){"use strict";Object.defineProperty(z,"__esModule",{value:!0});var C=1200,b=800,k=1e7,w=10,T=3.141592653589793,L=1.5707963267948966,P=T*.375,p=T*.625,m=new Map,S=10,x=10,g=.8,A=.1,E=.5;function D(W,V,H){var Q=W.x-W.size[0]/2,tt=W.y-W.size[1]/2,rt=W.x+W.size[0]/2,ct=W.y+W.size[1]/2,ot=V.x-V.size[0]/2,xt=V.y-V.size[1]/2,pt=V.x+V.size[0]/2,Xt=V.y+V.size[1]/2,Ct=W.x,At=W.y,Z=V.x,q=V.y,bt=Z-Ct,_t=Math.atan2(bt,q-At),nt=0,vt=0,It=0,Pt=0;_t>L?(vt=tt-Xt,nt=ot-rt,It=parseFloat(vt?(vt/Math.cos(_t)).toFixed(2):nt.toFixed(2)),Pt=parseFloat(nt?(nt/Math.sin(_t)).toFixed(2):vt.toFixed(2))):0<_t&&_t<=L?(vt=xt-ct,nt=ot-rt,vt>nt?It=Pt=parseFloat(vt?(vt/Math.cos(_t)).toFixed(2):nt.toFixed(2)):It=Pt=parseFloat(nt?(nt/Math.sin(_t)).toFixed(2):vt.toFixed(2))):_t<-L?(vt=tt-Xt,nt=-(pt-Q),vt>nt?It=Pt=parseFloat(vt?(vt/Math.cos(_t)).toFixed(2):nt.toFixed(2)):It=Pt=parseFloat(nt?(nt/Math.sin(_t)).toFixed(2):vt.toFixed(2))):(vt=xt-ct,Math.abs(bt)>(rt-Q)/2?nt=Q-pt:nt=bt,vt>nt?It=Pt=parseFloat(vt?(vt/Math.cos(_t)).toFixed(2):nt.toFixed(2)):It=Pt=parseFloat(nt&&_t!==0?(nt/Math.sin(_t)).toFixed(2):vt.toFixed(2)));var Et=parseFloat(_t.toFixed(2)),Nt=H;return H&&(Nt=P<Et&&Et<p),{distance:Math.abs(It<Pt?It:Pt),isHoriz:Nt}}function F(W,V){var H=m.get(W.id)||[],Q=H.find(function(be){return be.source===V.id||be.target===V.id}),tt=W.size[0]*W.size[1],rt=V.size[0]*V.size[1],ct=tt>rt?V:W,ot=tt>rt?W:V,xt=ct.x-ct.size[0]/2,pt=ct.y-ct.size[1]/2,Xt=ct.x+ct.size[0]/2,Ct=ct.y+ct.size[1]/2,At=ot.x-ot.size[0]/2,Z=ot.y-ot.size[1]/2,q=ot.x+ot.size[0]/2,bt=ot.y+ot.size[1]/2,_t=ct.x,nt=ct.y,vt=ot.x,It=ot.y,Pt=Xt>=At&&q>=xt&&Ct>=Z&&bt>=pt,Et=0,Nt=0;if(Pt){Nt=Math.sqrt(Math.pow(vt-_t,2)+Math.pow(It-nt,2));var $t=xt>At?xt:At,ue=pt>Z?pt:Z,ie=Xt<q?Xt:q,Dt=Ct<bt?Ct:bt,ne=ie-$t,pe=Dt-ue,Wt=ne*pe;Nt===0&&(Nt=1e-7),Et=w*1/Nt*100+Wt,Et*=k}else{var ae=!1,Se=D(ct,ot,ae);Nt=Se.distance,ae=Se.isHoriz,Nt<=w?Nt!==0?Q?Et+=w+k*1/Nt:Et+=w+k*w/Nt:Et+=k:(Et+=Nt,Q&&(Et+=Nt*Nt))}return Et}function y(W){for(var V=0,H=0;H<W.length;H++){var Q=W[H];(Q.x<0||Q.y<0||Q.x>C||Q.y>b)&&(V+=1e12);for(var tt=H+1;tt<W.length;tt++)V+=F(Q,W[tt])}return V}function h(W,V,H,Q){var tt=new Map;H.forEach(function(_t,nt){tt.set(_t.id,_t)});var rt=Q.filter(function(_t){return _t.source===W.id||_t.target===W.id})||[],ct=[];rt.forEach(function(_t){var nt=_t.source===W.id?_t.target:_t.source,vt=tt.get(nt);vt&&ct.push(vt)});for(var ot=!0,xt=0;xt<ct.length;xt++){var pt=ct[xt],Xt=Math.atan((W.y-pt.y)/(pt.x-W.y))*180,Ct=Math.atan((V.y-pt.y)/(pt.x-V.y))*180,At=Xt<30||Xt>150,Z=Ct<30||Ct>150,q=Xt>70&&Xt<110,bt=Ct>70&&Ct<110;if(At&&!Z||Xt*Ct<0){ot=!1;break}else if(q&&!bt||Xt*Ct<0){ot=!1;break}else if((pt.x-W.x)*(pt.x-V.x)<0){ot=!1;break}else if((pt.y-W.y)*(pt.y-V.y)<0){ot=!1;break}}return ot}function Y(W,V){for(var H=!1,Q=1,tt=S*Q,rt=x*Q,ct=[tt,-tt,0,0],ot=[0,0,rt,-rt],xt=0;xt<W.length;++xt)for(var pt=W[xt],Xt=$(pt,W),Ct=0;Ct<ct.length;Ct++){var At=h(pt,{x:pt.x+ct[Ct],y:pt.y+ot[Ct]},W,V);if(At){pt.x+=ct[Ct],pt.y+=ot[Ct];var Z=$(pt,W),q=Math.random();Z<Xt||q<g&&q>A?(Xt=Z,H=!0):(pt.x-=ct[Ct],pt.y-=ot[Ct])}}return g>A&&(g*=E),H?y(W):0}function $(W,V){var H=0;(W.x<0||W.y<0||W.x+W.size[0]+20>C||W.y+W.size[1]+20>b)&&(H+=1e12);for(var Q=0;Q<V.length;++Q)W.id!==V[Q].id&&(H+=F(W,V[Q]));return H}function U(W,V){if(W.length===0)return{nodes:W,edges:V};W.forEach(function(pt){var Xt=V.filter(function(Ct){return Ct.source===pt.id||Ct.target===pt.id});m.set(pt,Xt)}),W.sort(function(pt,Xt){var Ct,At;return((Ct=m.get(pt.id))===null||Ct===void 0?void 0:Ct.length)-((At=m.get(Xt.id))===null||At===void 0?void 0:At.length)});for(var H=y(W),Q=20,tt=1,rt=0,ct=50,ot=0;Q>0&&(ot++,!(ot>=ct));){var xt=Y(W,V);xt!==0&&(rt=xt),tt=rt-H,H=rt,tt===0?--Q:Q=20}return W.forEach(function(pt){pt.x=pt.x-pt.size[0]/2,pt.y=pt.y-pt.size[1]/2}),{nodes:W,edges:V}}z.default=U},589806:function(Ve,z,C){"use strict";var b=this&&this.__createBinding||(Object.create?function(p,m,S,x){x===void 0&&(x=S);var g=Object.getOwnPropertyDescriptor(m,S);(!g||("get"in g?!m.__esModule:g.writable||g.configurable))&&(g={enumerable:!0,get:function(){return m[S]}}),Object.defineProperty(p,x,g)}:function(p,m,S,x){x===void 0&&(x=S),p[x]=m[S]}),k=this&&this.__setModuleDefault||(Object.create?function(p,m){Object.defineProperty(p,"default",{enumerable:!0,value:m})}:function(p,m){p.default=m}),w=this&&this.__importStar||function(p){if(p&&p.__esModule)return p;var m={};if(p!=null)for(var S in p)S!=="default"&&Object.prototype.hasOwnProperty.call(p,S)&&b(m,p,S);return k(m,p),m};Object.defineProperty(z,"__esModule",{value:!0});var T=w(C(971497)),L=C(449784);function P(){function p(Dt){return function(){return Dt}}var m=function(Dt){return Dt.cluster},S=p(1),x=p(-1),g=p(100),A=p(.1),E=[0,0],D=[],F={},y=[],h=100,Y=100,$={none:{x:0,y:0}},U=[],W,V="force",H=!0,Q=.1;function tt(Dt){if(!H)return tt;W.tick(),Xt();for(var ne=0,pe=D.length,Wt=void 0,ae=Dt*Q;ne<pe;++ne)Wt=D[ne],Wt.vx+=($[m(Wt)].x-Wt.x)*ae,Wt.vy+=($[m(Wt)].y-Wt.y)*ae}function rt(){D&&ct()}function ct(){if(!(!D||!D.length)){if(m(D[0])===void 0)throw Error("Couldnt find the grouping attribute for the nodes. Make sure to set it up with forceInABox.groupBy('clusterAttr') before calling .links()");var Dt=ot();W=T.forceSimulation(Dt.nodes).force("x",T.forceX(h).strength(.1)).force("y",T.forceY(Y).strength(.1)).force("collide",T.forceCollide(function(ne){return ne.r}).iterations(4)).force("charge",T.forceManyBody().strength(x)).force("links",T.forceLink(Dt.nodes.length?Dt.links:[]).distance(g).strength(A)),U=W.nodes(),Xt()}}function ot(){var Dt=[],ne=[],pe={},Wt=[],ae={},Se=[];return ae=xt(D),Se=pt(y),Wt=Object.keys(ae),Wt.forEach(function(be,Qt){var we=ae[be];Dt.push({id:be,size:we.count,r:Math.sqrt(we.sumforceNodeSize/Math.PI)}),pe[be]=Qt}),Se.forEach(function(be){var Qt=(0,L.getEdgeTerminal)(be,"source"),we=(0,L.getEdgeTerminal)(be,"target"),Tt=pe[Qt],Le=pe[we];Tt!==void 0&&Le!==void 0&&ne.push({source:Tt,target:Le,count:be.count})}),{nodes:Dt,links:ne}}function xt(Dt){var ne={};return Dt.forEach(function(pe){var Wt=m(pe);ne[Wt]||(ne[Wt]={count:0,sumforceNodeSize:0})}),Dt.forEach(function(pe){var Wt=m(pe),ae=S(pe),Se=ne[Wt];Se.count=Se.count+1,Se.sumforceNodeSize=Se.sumforceNodeSize+Math.PI*(ae*ae)*1.3,ne[Wt]=Se}),ne}function pt(Dt){var ne={},pe=[];Dt.forEach(function(ae){var Se=Ct(ae),be=0;ne[Se]!==void 0&&(be=ne[Se]),be+=1,ne[Se]=be});var Wt=Object.entries(ne);return Wt.forEach(function(ae){var Se=ae[0],be=ae[1],Qt=Se.split("~")[0],we=Se.split("~")[1];Qt!==void 0&&we!==void 0&&pe.push({source:Qt,target:we,count:be})}),pe}function Xt(){return $={none:{x:0,y:0}},U.forEach(function(Dt){$[Dt.id]={x:Dt.x-E[0],y:Dt.y-E[1]}}),$}function Ct(Dt){var ne=(0,L.getEdgeTerminal)(Dt,"source"),pe=(0,L.getEdgeTerminal)(Dt,"target"),Wt=m(F[ne]),ae=m(F[pe]);return Wt<=ae?"".concat(Wt,"~").concat(ae):"".concat(ae,"~").concat(Wt)}function At(Dt){F={},Dt.forEach(function(ne){F[ne.id]=ne})}function Z(Dt){return arguments.length?(V=Dt,rt(),tt):V}function q(Dt){return arguments.length?typeof Dt=="string"?(m=function(ne){return ne[Dt]},tt):(m=Dt,tt):m}function bt(Dt){return arguments.length?(H=Dt,tt):H}function _t(Dt){return arguments.length?(Q=Dt,tt):Q}function nt(Dt){return arguments.length?(h=Dt,tt):h}function vt(Dt){return arguments.length?(Y=Dt,tt):Y}function It(Dt){return arguments.length?(At(Dt||[]),D=Dt||[],tt):D}function Pt(Dt){return arguments.length?(y=Dt||[],rt(),tt):y}function Et(Dt){return arguments.length?(typeof Dt=="function"?S=Dt:S=p(+Dt),rt(),tt):S}function Nt(Dt){return arguments.length?(typeof Dt=="function"?x=Dt:x=p(+Dt),rt(),tt):x}function $t(Dt){return arguments.length?(typeof Dt=="function"?g=Dt:g=p(+Dt),rt(),tt):g}function ue(Dt){return arguments.length?(typeof Dt=="function"?A=Dt:A=p(+Dt),rt(),tt):A}function ie(Dt){return arguments.length?(E=Dt,tt):E}return tt.initialize=function(Dt){D=Dt,rt()},tt.template=Z,tt.groupBy=q,tt.enableGrouping=bt,tt.strength=_t,tt.centerX=nt,tt.centerY=vt,tt.nodes=It,tt.links=Pt,tt.forceNodeSize=Et,tt.nodeSize=tt.forceNodeSize,tt.forceCharge=Nt,tt.forceLinkDistance=$t,tt.forceLinkStrength=ue,tt.offset=ie,tt.getFocis=Xt,tt}z.default=P},508810:function(Ve,z,C){"use strict";var b=this&&this.__extends||function(){var D=function(F,y){return D=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,Y){h.__proto__=Y}||function(h,Y){for(var $ in Y)Object.prototype.hasOwnProperty.call(Y,$)&&(h[$]=Y[$])},D(F,y)};return function(F,y){if(typeof y!="function"&&y!==null)throw new TypeError("Class extends value "+String(y)+" is not a constructor or null");D(F,y);function h(){this.constructor=F}F.prototype=y===null?Object.create(y):(h.prototype=y.prototype,new h)}}(),k=this&&this.__createBinding||(Object.create?function(D,F,y,h){h===void 0&&(h=y);var Y=Object.getOwnPropertyDescriptor(F,y);(!Y||("get"in Y?!F.__esModule:Y.writable||Y.configurable))&&(Y={enumerable:!0,get:function(){return F[y]}}),Object.defineProperty(D,h,Y)}:function(D,F,y,h){h===void 0&&(h=y),D[h]=F[y]}),w=this&&this.__setModuleDefault||(Object.create?function(D,F){Object.defineProperty(D,"default",{enumerable:!0,value:F})}:function(D,F){D.default=F}),T=this&&this.__importStar||function(D){if(D&&D.__esModule)return D;var F={};if(D!=null)for(var y in D)y!=="default"&&Object.prototype.hasOwnProperty.call(D,y)&&k(F,D,y);return w(F,D),F},L=this&&this.__importDefault||function(D){return D&&D.__esModule?D:{default:D}};Object.defineProperty(z,"__esModule",{value:!0}),z.ForceLayout=void 0;var P=T(C(971497)),p=L(C(589806)),m=C(449784),S=C(762329),x=C(416470),g=function(D){b(F,D);function F(y){var h=D.call(this)||this;return h.center=[0,0],h.nodeStrength=null,h.edgeStrength=null,h.preventOverlap=!1,h.clusterNodeStrength=null,h.clusterEdgeStrength=null,h.clusterEdgeDistance=null,h.clusterNodeSize=null,h.clusterFociStrength=null,h.linkDistance=50,h.alphaDecay=.028,h.alphaMin=.001,h.alpha=.3,h.collideStrength=1,h.workerEnabled=!1,h.tick=function(){},h.onLayoutEnd=function(){},h.ticking=void 0,y&&h.updateCfg(y),h}return F.prototype.getDefaultCfg=function(){return{center:[0,0],nodeStrength:null,edgeStrength:null,preventOverlap:!1,nodeSize:void 0,nodeSpacing:void 0,linkDistance:50,forceSimulation:null,alphaDecay:.028,alphaMin:.001,alpha:.3,collideStrength:1,clustering:!1,clusterNodeStrength:-1,clusterEdgeStrength:.1,clusterEdgeDistance:100,clusterFociStrength:.8,clusterNodeSize:10,tick:function(){},onLayoutEnd:function(){},workerEnabled:!1}},F.prototype.init=function(y){var h=this;h.nodes=y.nodes||[];var Y=y.edges||[];h.edges=Y.map(function($){var U={},W=["targetNode","sourceNode","startPoint","endPoint"];return Object.keys($).forEach(function(V){W.indexOf(V)>-1||(U[V]=$[V])}),U}),h.ticking=!1},F.prototype.execute=function(y){var h=this,Y=h.nodes,$=h.edges;if(!h.ticking){var U=h.forceSimulation,W=h.alphaMin,V=h.alphaDecay,H=h.alpha;if(U){if(y){if(h.clustering&&h.clusterForce&&(h.clusterForce.nodes(Y),h.clusterForce.links($)),U.nodes(Y),$&&h.edgeForce)h.edgeForce.links($);else if($&&!h.edgeForce){var rt=P.forceLink().id(function(pt){return pt.id}).links($);h.edgeStrength&&rt.strength(h.edgeStrength),h.linkDistance&&rt.distance(h.linkDistance),h.edgeForce=rt,U.force("link",rt)}}h.preventOverlap&&h.overlapProcess(U),U.alpha(H).restart(),this.ticking=!0}else try{var Q=P.forceManyBody();if(h.nodeStrength&&Q.strength(h.nodeStrength),U=P.forceSimulation().nodes(Y),h.clustering){var tt=(0,p.default)();tt.centerX(h.center[0]).centerY(h.center[1]).template("force").strength(h.clusterFociStrength),$&&tt.links($),Y&&tt.nodes(Y),tt.forceLinkDistance(h.clusterEdgeDistance).forceLinkStrength(h.clusterEdgeStrength).forceCharge(h.clusterNodeStrength).forceNodeSize(h.clusterNodeSize),h.clusterForce=tt,U.force("group",tt)}if(U.force("center",P.forceCenter(h.center[0],h.center[1])).force("charge",Q).alpha(H).alphaDecay(V).alphaMin(W),h.preventOverlap&&h.overlapProcess(U),$){var rt=P.forceLink().id(function(xt){return xt.id}).links($);h.edgeStrength&&rt.strength(h.edgeStrength),h.linkDistance&&rt.distance(h.linkDistance),h.edgeForce=rt,U.force("link",rt)}if(h.workerEnabled&&!E()&&(h.workerEnabled=!1,console.warn("workerEnabled option is only supported when running in web worker.")),!h.workerEnabled)U.on("tick",function(){h.tick()}).on("end",function(){h.ticking=!1,h.onLayoutEnd&&h.onLayoutEnd()}),h.ticking=!0;else{U.stop();for(var ct=A(U),ot=1;ot<=ct;ot++)U.tick(),postMessage({nodes:Y,currentTick:ot,totalTicks:ct,type:x.LAYOUT_MESSAGE.TICK},void 0);h.ticking=!1}h.forceSimulation=U,h.ticking=!0}catch(xt){h.ticking=!1,console.warn(xt)}}},F.prototype.overlapProcess=function(y){var h=this,Y=h.nodeSize,$=h.nodeSpacing,U,W,V=h.collideStrength;if((0,m.isNumber)($)?W=function(){return $}:(0,m.isFunction)($)?W=$:W=function(){return 0},!Y)U=function(rt){if(rt.size){if((0,m.isArray)(rt.size)){var ct=rt.size[0]>rt.size[1]?rt.size[0]:rt.size[1];return ct/2+W(rt)}if((0,m.isObject)(rt.size)){var ct=rt.size.width>rt.size.height?rt.size.width:rt.size.height;return ct/2+W(rt)}return rt.size/2+W(rt)}return 10+W(rt)};else if((0,m.isFunction)(Y))U=function(rt){var ct=Y(rt);return ct+W(rt)};else if((0,m.isArray)(Y)){var H=Y[0]>Y[1]?Y[0]:Y[1],Q=H/2;U=function(rt){return Q+W(rt)}}else if((0,m.isNumber)(Y)){var tt=Y/2;U=function(rt){return tt+W(rt)}}else U=function(){return 10};y.force("collisionForce",P.forceCollide(U).strength(V))},F.prototype.updateCfg=function(y){var h=this;h.ticking&&(h.forceSimulation.stop(),h.ticking=!1),h.forceSimulation=null,Object.assign(h,y)},F.prototype.destroy=function(){var y=this;y.ticking&&(y.forceSimulation.stop(),y.ticking=!1),y.nodes=null,y.edges=null,y.destroyed=!0},F}(S.Base);z.ForceLayout=g;function A(D){var F=D.alphaMin(),y=D.alphaTarget(),h=D.alpha(),Y=Math.log((F-y)/(h-y))/Math.log(1-D.alphaDecay()),$=Math.ceil(Y);return $}function E(){return typeof WorkerGlobalScope!="undefined"&&self instanceof WorkerGlobalScope}},885717:function(Ve,z,C){"use strict";var b=this&&this.__createBinding||(Object.create?function(w,T,L,P){P===void 0&&(P=L);var p=Object.getOwnPropertyDescriptor(T,L);(!p||("get"in p?!T.__esModule:p.writable||p.configurable))&&(p={enumerable:!0,get:function(){return T[L]}}),Object.defineProperty(w,P,p)}:function(w,T,L,P){P===void 0&&(P=L),w[P]=T[L]}),k=this&&this.__exportStar||function(w,T){for(var L in w)L!=="default"&&!Object.prototype.hasOwnProperty.call(T,L)&&b(T,w,L)};Object.defineProperty(z,"__esModule",{value:!0}),k(C(508810),z)},191019:function(Ve,z,C){"use strict";Object.defineProperty(z,"__esModule",{value:!0}),z.forceNBody=void 0;var b=C(971829),k=.81,w=.1;function T(m,S,x,g,A){var E=x/g,D=m.map(function(y,h){var Y=S[y.id],$=Y.data,U=Y.x,W=Y.y,V=Y.size,H=$.layout.force.nodeStrength;return{x:U,y:W,size:V,index:h,vx:0,vy:0,weight:E*H}}),F=(0,b.quadtree)(D,function(y){return y.x},function(y){return y.y}).visitAfter(L);return D.forEach(function(y){p(y,F)}),D.map(function(y,h){var Y=S[m[h].id],$=Y.data.layout.force.mass,U=$===void 0?1:$;A[2*h]=y.vx/U,A[2*h+1]=y.vy/U}),A}z.forceNBody=T;function L(m){var S=0,x=0,g=0;if(m.length){for(var A=0;A<4;A++){var E=m[A];E&&E.weight&&(S+=E.weight,x+=E.x*E.weight,g+=E.y*E.weight)}m.x=x/S,m.y=g/S,m.weight=S}else{var E=m;m.x=E.data.x,m.y=E.data.y,m.weight=E.data.weight}}var P=function(m,S,x,g,A,E){var D=E.x-m.x||w,F=E.y-m.y||w,y=g-S,h=D*D+F*F,Y=Math.sqrt(h)*h;if(y*y*k<h){var $=m.weight/Y;return E.vx+=D*$,E.vy+=F*$,!0}if(m.length)return!1;if(m.data!==E){var $=m.data.weight/Y;E.vx+=D*$,E.vy+=F*$}};function p(m,S){S.visit(function(x,g,A,E,D){return P(x,g,A,E,D,m)})}},306740:function(Ve,z,C){"use strict";var b=this&&this.__extends||function(){var m=function(S,x){return m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,A){g.__proto__=A}||function(g,A){for(var E in A)Object.prototype.hasOwnProperty.call(A,E)&&(g[E]=A[E])},m(S,x)};return function(S,x){if(typeof x!="function"&&x!==null)throw new TypeError("Class extends value "+String(x)+" is not a constructor or null");m(S,x);function g(){this.constructor=S}S.prototype=x===null?Object.create(x):(g.prototype=x.prototype,new g)}}(),k=this&&this.__assign||function(){return k=Object.assign||function(m){for(var S,x=1,g=arguments.length;x<g;x++){S=arguments[x];for(var A in S)Object.prototype.hasOwnProperty.call(S,A)&&(m[A]=S[A])}return m},k.apply(this,arguments)};Object.defineProperty(z,"__esModule",{value:!0}),z.Force2Layout=void 0;var w=C(762329),T=C(449784),L=C(191019),P=function(m,S){var x;return m?(0,T.isNumber)(m)?x=function(g){return m}:x=m:x=function(g){return S||1},x},p=function(m){b(S,m);function S(x){var g=m.call(this)||this;g.maxIteration=1e3,g.workerEnabled=!1,g.edgeStrength=200,g.nodeStrength=1e3,g.coulombDisScale=.005,g.damping=.9,g.maxSpeed=500,g.minMovement=.4,g.interval=.02,g.factor=1,g.linkDistance=200,g.gravity=0,g.clusterNodeStrength=20,g.preventOverlap=!0,g.distanceThresholdMode="mean",g.tick=function(){},g.nodes=[],g.edges=[],g.width=300,g.height=300,g.nodeMap={},g.nodeIdxMap={},g.judgingDistance=0,g.centripetalOptions={leaf:2,single:2,others:1,center:function(E){return{x:g.width/2,y:g.height/2}}};var A=x.getMass;return g.propsGetMass=A,g.updateCfg(x),g}return S.prototype.getCentripetalOptions=function(){var x=this,g=x.leafCluster,A=x.clustering,E=x.nodeClusterBy,D=x.nodes,F=x.nodeMap,y=x.clusterNodeStrength,h=function(ct){return typeof y=="function"?y(ct):y},Y={},$;if(g){$=this.getSameTypeLeafMap()||{};var U=Array.from(new Set(D==null?void 0:D.map(function(ct){return ct[E]})))||[];Y={single:100,leaf:function(ct,ot,xt){var pt=$[ct.id]||{},Xt=pt.relativeLeafNodes,Ct=pt.sameTypeLeafNodes;return(Ct==null?void 0:Ct.length)===(Xt==null?void 0:Xt.length)||(U==null?void 0:U.length)===1?1:h(ct)},others:1,center:function(ct,ot,xt){var pt,Xt=(((pt=ct.data)===null||pt===void 0?void 0:pt.layout)||{}).degree;if(!Xt)return{x:100,y:100};var Ct;if(Xt===1){var At=($[ct.id]||{}).sameTypeLeafNodes,Z=At===void 0?[]:At;Z.length===1?Ct=void 0:Z.length>1&&(Ct=(0,T.getAvgNodePosition)(Z))}else Ct=void 0;return{x:Ct==null?void 0:Ct.x,y:Ct==null?void 0:Ct.y}}}}if(A){$||($=this.getSameTypeLeafMap());var W=Array.from(new Set(D.map(function(ct,ot){return ct[E]}))).filter(function(ct){return ct!==void 0}),V={};W.forEach(function(ct){var ot=D.filter(function(xt){return xt[E]===ct}).map(function(xt){return F[xt.id]});V[ct]=(0,T.getAvgNodePosition)(ot)}),Y={single:function(ct){return h(ct)},leaf:function(ct){return h(ct)},others:function(ct){return h(ct)},center:function(ct,ot,xt){var pt=V[ct[E]];return{x:pt==null?void 0:pt.x,y:pt==null?void 0:pt.y}}}}this.centripetalOptions=k(k({},this.centripetalOptions),Y);var H=this.centripetalOptions,Q=H.leaf,tt=H.single,rt=H.others;Q&&typeof Q!="function"&&(this.centripetalOptions.leaf=function(){return Q}),tt&&typeof tt!="function"&&(this.centripetalOptions.single=function(){return tt}),rt&&typeof rt!="function"&&(this.centripetalOptions.others=function(){return rt})},S.prototype.updateCfg=function(x){x&&Object.assign(this,x)},S.prototype.getDefaultCfg=function(){return{maxIteration:500,gravity:10,enableTick:!0,animate:!0}},S.prototype.execute=function(){var x=this;x.stop();var g=x.nodes,A=x.edges,E=x.defSpringLen;if(x.judgingDistance=0,!g||g.length===0){x.onLayoutEnd([]);return}!x.width&&typeof window!="undefined"&&(x.width=window.innerWidth),!x.height&&typeof window!="undefined"&&(x.height=window.innerHeight),x.center||(x.center=[x.width/2,x.height/2]);var D=x.center;if(g.length===1){g[0].x=D[0],g[0].y=D[1],x.onLayoutEnd([k({},g[0])]);return}x.degreesMap=(0,T.getDegreeMap)(g,A),x.propsGetMass?x.getMass=x.propsGetMass:x.getMass=function(W){var V=1;(0,T.isNumber)(W.mass)&&(V=W.mass);var H=x.degreesMap[W.id].all;return!H||H<5?V:H*5*V};var F=x.nodeSize,y;if(x.preventOverlap){var h=x.nodeSpacing,Y;(0,T.isNumber)(h)?Y=function(){return h}:(0,T.isFunction)(h)?Y=h:Y=function(){return 0},F?(0,T.isArray)(F)?y=function(W){return Math.max(F[0],F[1])+Y(W)}:y=function(W){return F+Y(W)}:y=function(W){return W.size?(0,T.isArray)(W.size)?Math.max(W.size[0],W.size[1])+Y(W):(0,T.isObject)(W.size)?Math.max(W.size.width,W.size.height)+Y(W):W.size+Y(W):10+Y(W)}}x.nodeSize=y,x.linkDistance=P(x.linkDistance,1),x.nodeStrength=P(x.nodeStrength,1),x.edgeStrength=P(x.edgeStrength,1);var $={},U={};g.forEach(function(W,V){(0,T.isNumber)(W.x)||(W.x=Math.random()*x.width),(0,T.isNumber)(W.y)||(W.y=Math.random()*x.height);var H=x.degreesMap[W.id];$[W.id]=k(k({},W),{data:k(k({},W.data),{size:x.nodeSize(W)||30,layout:{inDegree:H.in,outDegree:H.out,degree:H.all,tDegree:H.in,sDegree:H.out,force:{mass:x.getMass(W),nodeStrength:x.nodeStrength(W,A)}}})}),U[W.id]=V}),x.nodeMap=$,x.nodeIdxMap=U,x.edgeInfos=[],A==null||A.forEach(function(W){var V=$[W.source],H=$[W.target];!V||!H?elf.edgeInfos.push({}):x.edgeInfos.push({edgeStrength:x.edgeStrength(W),linkDistance:E?E(k(k({},W),{source:V,target:H}),V,H):x.linkDistance(W,V,H)||1+(F(V)+F(V)||0)/2})}),this.getCentripetalOptions(),x.onLayoutEnd=x.onLayoutEnd||function(){},x.run()},S.prototype.run=function(){var x=this,g=x.maxIteration,A=x.nodes,E=x.edges,D=x.workerEnabled,F=x.minMovement,y=x.animate,h=x.nodeMap,Y=x.height;if(x.currentMinY=0,x.currentMaxY=Y,!!A){var $=[];if(A.forEach(function(rt,ct){$[2*ct]=0,$[2*ct+1]=0}),this.defSideCoe&&typeof this.defSideCoe=="function"){var U={};E.forEach(function(rt){var ct=rt.source,ot=rt.target;U[ct]=U[ct]||[],U[ct].push(rt),U[ot]=U[ot]||[],U[ot].push(rt)}),this.relatedEdges=U}var W=g,V=!y;if(D||V){for(var H=0,Q=0;(x.judgingDistance>F||Q<1)&&Q<W;Q++)H=Q,x.runOneStep(Q,$);x.onLayoutEnd(Object.values(h))}else{if(typeof window=="undefined")return;var tt=0;this.timeInterval=window.setInterval(function(){A&&(x.runOneStep(tt,$),tt++,(tt>=W||x.judgingDistance<F)&&(x.onLayoutEnd(Object.values(h)),window.clearInterval(x.timeInterval)))},0)}}},S.prototype.runOneStep=function(x,g){var A,E=this,D=E.nodes,F=E.edges,y=E.nodeMap,h=E.monitor,Y=[];if(D!=null&&D.length){E.calRepulsive(Y),F&&E.calAttractive(Y),E.calGravity(Y),E.attractToSide(Y);var $=E.interval;if(E.updateVelocity(Y,g,$),E.updatePosition(g,$),(A=E.tick)===null||A===void 0||A.call(E),h){var U=this.calTotalEnergy(Y);h({energy:U,nodes:D,edges:F,iterations:x})}}},S.prototype.calTotalEnergy=function(x){var g=this,A=g.nodes,E=g.nodeMap;if(!(A!=null&&A.length))return 0;var D=0;return A.forEach(function(F,y){var h=x[2*y],Y=x[2*y+1],$=h*h+Y*Y,U=E[F.id].data.layout.force.mass,W=U===void 0?1:U;D+=W*$*.5}),D},S.prototype.calRepulsive=function(x){var g=this,A=g.nodes,E=g.nodeMap,D=g.factor,F=g.coulombDisScale,y=g.nodeSize;(0,L.forceNBody)(A,E,D,F*F,x)},S.prototype.calAttractive=function(x){var g=this,A=g.edges,E=g.nodeMap,D=g.nodeIdxMap,F=g.edgeInfos,y=g.nodeSize;A.forEach(function(h,Y){var $=(0,T.getEdgeTerminal)(h,"source"),U=(0,T.getEdgeTerminal)(h,"target"),W=E[$],V=E[U];if(!(!W||!V)){var H=V.x-W.x,Q=V.y-W.y;!H&&!Q&&(H=Math.random()*.01,Q=Math.random()*.01);var tt=Math.sqrt(H*H+Q*Q),rt=H/tt,ct=Q/tt,ot=F[Y]||{},xt=ot.linkDistance,pt=xt===void 0?200:xt,Xt=ot.edgeStrength,Ct=Xt===void 0?200:Xt,At=pt-tt,Z=At*Ct,q=W.data.layout.force.mass||1,bt=V.data.layout.force.mass||1,_t=1/q,nt=1/bt,vt=rt*Z,It=ct*Z,Pt=2*D[$],Et=2*D[U];x[Pt]-=vt*_t,x[Pt+1]-=It*_t,x[Et]+=vt*nt,x[Et+1]+=It*nt}})},S.prototype.calGravity=function(x){var g,A=this,E=A.nodes,D=A.edges,F=D===void 0?[]:D,y=A.nodeMap,h=A.width,Y=A.height,$=A.center,U=A.gravity,W=A.degreesMap,V=A.centripetalOptions;if(E)for(var H=E.length,Q=0;Q<H;Q++){var tt=2*Q,rt=y[E[Q].id],ct=rt.data.layout.force.mass,ot=ct===void 0?1:ct,xt=0,pt=0,Xt=U,Ct=W[rt.id],At=Ct.in,Z=Ct.out,q=Ct.all,bt=(g=A.getCenter)===null||g===void 0?void 0:g.call(A,rt,q);if(bt){var _t=bt[0],nt=bt[1],vt=bt[2];xt=rt.x-_t,pt=rt.y-nt,Xt=vt}else xt=rt.x-$[0],pt=rt.y-$[1];if(Xt&&(x[tt]-=Xt*xt/ot,x[tt+1]-=Xt*pt/ot),V){var It=V.leaf,Pt=V.single,Et=V.others,Nt=V.center,$t=(Nt==null?void 0:Nt(rt,E,F,h,Y))||{x:0,y:0,centerStrength:0},ue=$t.x,ie=$t.y,Dt=$t.centerStrength;if(!(0,T.isNumber)(ue)||!(0,T.isNumber)(ie))continue;var ne=(rt.x-ue)/ot,pe=(rt.y-ie)/ot;if(Dt&&(x[tt]-=Dt*ne,x[tt+1]-=Dt*pe),q===0){var Wt=Pt(rt);if(!Wt)continue;x[tt]-=Wt*ne,x[tt+1]-=Wt*pe;continue}if(At===0||Z===0){var ae=It(rt,E,F);if(!ae)continue;x[tt]-=ae*ne,x[tt+1]-=ae*pe;continue}var Se=Et(rt);if(!Se)continue;x[tt]-=Se*ne,x[tt+1]-=Se*pe}}},S.prototype.attractToSide=function(x){var g=this,A=g.defSideCoe,E=g.height,D=g.nodes,F=g.relatedEdges,y=g.currentMinY,h=y===void 0?0:y,Y=g.currentMaxY,$=Y===void 0?this.height:Y;!A||typeof A!="function"||!(D!=null&&D.length)||D.forEach(function(U,W){var V=A(U,F[U.id]||[]);if(V!==0){var H=V<0?h:$,Q=Math.abs(V);x[2*W+1]-=Q*(U.y-H)}})},S.prototype.updateVelocity=function(x,g,A){var E=this,D=E.nodes,F=E.damping,y=E.maxSpeed;D!=null&&D.length&&D.forEach(function(h,Y){var $=(g[2*Y]+x[2*Y]*A)*F||.01,U=(g[2*Y+1]+x[2*Y+1]*A)*F||.01,W=Math.sqrt($*$+U*U);if(W>y){var V=y/W;$=V*$,U=V*U}g[2*Y]=$,g[2*Y+1]=U})},S.prototype.updatePosition=function(x,g){var A=this,E=A.nodes,D=A.distanceThresholdMode,F=A.nodeMap;if(!(E!=null&&E.length)){this.judgingDistance=0;return}var y=0;D==="max"?A.judgingDistance=-1/0:D==="min"&&(A.judgingDistance=1/0);var h=1/0,Y=-1/0;E.forEach(function($,U){var W=F[$.id];if((0,T.isNumber)($.fx)&&(0,T.isNumber)($.fy)){$.x=$.fx,$.y=$.fy,W.x=$.x,W.y=$.y;return}var V=x[2*U]*g,H=x[2*U+1]*g;$.x+=V,$.y+=H,W.x=$.x,W.y=$.y,$.y<h&&(h=$.y),$.y>Y&&(Y=$.y);var Q=Math.sqrt(V*V+H*H);switch(D){case"max":A.judgingDistance<Q&&(A.judgingDistance=Q);break;case"min":A.judgingDistance>Q&&(A.judgingDistance=Q);break;default:y=y+Q;break}}),this.currentMinY=h,this.currentMaxY=Y,(!D||D==="mean")&&(A.judgingDistance=y/E.length)},S.prototype.stop=function(){this.timeInterval&&typeof window!="undefined"&&window.clearInterval(this.timeInterval)},S.prototype.destroy=function(){var x=this;x.stop(),x.tick=null,x.nodes=null,x.edges=null,x.destroyed=!0},S.prototype.getType=function(){return"force2"},S.prototype.getSameTypeLeafMap=function(){var x=this,g=x.nodeClusterBy,A=x.nodes,E=x.edges,D=x.nodeMap,F=x.degreesMap;if(A!=null&&A.length){var y={};return A.forEach(function(h,Y){var $=F[h.id].all;$===1&&(y[h.id]=(0,T.getCoreNodeAndRelativeLeafNodes)("leaf",h,E,g,F,D))}),y}},S}(w.Base);z.Force2Layout=p},19712:function(Ve,z){"use strict";Object.defineProperty(z,"__esModule",{value:!0});var C=function(){function b(k){this.id=k.id||0,this.rx=k.rx,this.ry=k.ry,this.fx=0,this.fy=0,this.mass=k.mass,this.degree=k.degree,this.g=k.g||0}return b.prototype.distanceTo=function(k){var w=this.rx-k.rx,T=this.ry-k.ry;return Math.hypot(w,T)},b.prototype.setPos=function(k,w){this.rx=k,this.ry=w},b.prototype.resetForce=function(){this.fx=0,this.fy=0},b.prototype.addForce=function(k){var w=k.rx-this.rx,T=k.ry-this.ry,L=Math.hypot(w,T);L=L<1e-4?1e-4:L;var P=this.g*(this.degree+1)*(k.degree+1)/L;this.fx+=P*w/L,this.fy+=P*T/L},b.prototype.in=function(k){return k.contains(this.rx,this.ry)},b.prototype.add=function(k){var w=this.mass+k.mass,T=(this.rx*this.mass+k.rx*k.mass)/w,L=(this.ry*this.mass+k.ry*k.mass)/w,P=this.degree+k.degree,p={rx:T,ry:L,mass:w,degree:P};return new b(p)},b}();z.default=C},148564:function(Ve,z,C){"use strict";var b=this&&this.__extends||function(){var S=function(x,g){return S=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(A,E){A.__proto__=E}||function(A,E){for(var D in E)Object.prototype.hasOwnProperty.call(E,D)&&(A[D]=E[D])},S(x,g)};return function(x,g){if(typeof g!="function"&&g!==null)throw new TypeError("Class extends value "+String(g)+" is not a constructor or null");S(x,g);function A(){this.constructor=x}x.prototype=g===null?Object.create(g):(A.prototype=g.prototype,new A)}}(),k=this&&this.__importDefault||function(S){return S&&S.__esModule?S:{default:S}};Object.defineProperty(z,"__esModule",{value:!0}),z.ForceAtlas2Layout=void 0;var w=C(762329),T=C(449784),L=k(C(19712)),P=k(C(851638)),p=k(C(762732)),m=function(S){b(x,S);function x(g){var A=S.call(this)||this;return A.center=[0,0],A.width=300,A.height=300,A.nodes=[],A.edges=[],A.kr=5,A.kg=1,A.mode="normal",A.preventOverlap=!1,A.dissuadeHubs=!1,A.barnesHut=void 0,A.maxIteration=0,A.ks=.1,A.ksmax=10,A.tao=.1,A.onLayoutEnd=function(){},A.prune=void 0,A.updateCfg(g),A}return x.prototype.getDefaultCfg=function(){return{}},x.prototype.execute=function(){var g=this,A=g.nodes,E=g.onLayoutEnd,D=g.prune,F=g.maxIteration;!g.width&&typeof window!="undefined"&&(g.width=window.innerWidth),!g.height&&typeof window!="undefined"&&(g.height=window.innerHeight);for(var y=[],h=A.length,Y=0;Y<h;Y+=1){var $=A[Y],U=10,W=10;(0,T.isNumber)($.size)&&(U=$.size,W=$.size),(0,T.isArray)($.size)?(isNaN($.size[0])||(U=$.size[0]),isNaN($.size[1])||(W=$.size[1])):(0,T.isObject)($.size)&&(U=$.size.width,W=$.size.height),g.getWidth&&!isNaN(g.getWidth($))&&(W=g.getWidth($)),g.getHeight&&!isNaN(g.getHeight($))&&(U=g.getHeight($));var V=Math.max(U,W);y.push(V)}g.barnesHut===void 0&&h>250&&(g.barnesHut=!0),g.prune===void 0&&h>100&&(g.prune=!0),this.maxIteration===0&&!g.prune?(F=250,h<=200&&h>100?F=1e3:h>200&&(F=1200),this.maxIteration=F):this.maxIteration===0&&D&&(F=100,h<=200&&h>100?F=500:h>200&&(F=950),this.maxIteration=F),g.kr||(g.kr=50,h>100&&h<=500?g.kr=20:h>500&&(g.kr=1)),g.kg||(g.kg=20,h>100&&h<=500?g.kg=10:h>500&&(g.kg=1)),this.nodes=g.updateNodesByForces(y),E()},x.prototype.updateNodesByForces=function(g){for(var A=this,E=A.edges,D=A.maxIteration,F=A.nodes,y=E.filter(function(Ct){var At=(0,T.getEdgeTerminal)(Ct,"source"),Z=(0,T.getEdgeTerminal)(Ct,"target");return At!==Z}),h=F.length,Y=y.length,$=[],U={},W={},V=[],H=0;H<h;H+=1)U[F[H].id]=H,$[H]=0,(F[H].x===void 0||isNaN(F[H].x))&&(F[H].x=Math.random()*1e3),(F[H].y===void 0||isNaN(F[H].y))&&(F[H].y=Math.random()*1e3),V.push({x:F[H].x,y:F[H].y});for(var H=0;H<Y;H+=1){for(var Q=void 0,tt=void 0,rt=0,ct=0,ot=0;ot<h;ot+=1){var xt=(0,T.getEdgeTerminal)(y[H],"source"),pt=(0,T.getEdgeTerminal)(y[H],"target");F[ot].id===xt?(Q=F[ot],rt=ot):F[ot].id===pt&&(tt=F[ot],ct=ot),W[H]={sourceIdx:rt,targetIdx:ct}}Q&&($[U[Q.id]]+=1),tt&&($[U[tt.id]]+=1)}var Xt=D;if(F=this.iterate(Xt,U,W,Y,$,g),A.prune){for(var ot=0;ot<Y;ot+=1)$[W[ot].sourceIdx]<=1?(F[W[ot].sourceIdx].x=F[W[ot].targetIdx].x,F[W[ot].sourceIdx].y=F[W[ot].targetIdx].y):$[W[ot].targetIdx]<=1&&(F[W[ot].targetIdx].x=F[W[ot].sourceIdx].x,F[W[ot].targetIdx].y=F[W[ot].sourceIdx].y);A.prune=!1,A.barnesHut=!1,Xt=100,F=this.iterate(Xt,U,W,Y,$,g)}return F},x.prototype.iterate=function(g,A,E,D,F,y){for(var h=this,Y=h.nodes,$=h.kr,U=h.preventOverlap,W=h.barnesHut,V=Y.length,H=0,Q=100,tt=g,rt=50,ct=[],ot=[],xt=[],pt=0;pt<V;pt+=1)if(ct[2*pt]=0,ct[2*pt+1]=0,W){var Xt={id:pt,rx:Y[pt].x,ry:Y[pt].y,mass:1,g:$,degree:F[pt]};xt[pt]=new L.default(Xt)}for(;tt>0;){for(var pt=0;pt<V;pt+=1)ot[2*pt]=ct[2*pt],ot[2*pt+1]=ct[2*pt+1],ct[2*pt]=0,ct[2*pt+1]=0;ct=this.getAttrForces(tt,rt,D,A,E,F,y,ct),W&&(U&&tt>rt||!U)?ct=this.getOptRepGraForces(ct,xt,F):ct=this.getRepGraForces(tt,rt,ct,Q,y,F);var Ct=this.updatePos(ct,ot,H,F);Y=Ct.nodes,H=Ct.sg,tt--,h.tick&&h.tick()}return Y},x.prototype.getAttrForces=function(g,A,E,D,F,y,h,Y){for(var $=this,U=$.nodes,W=$.preventOverlap,V=$.dissuadeHubs,H=$.mode,Q=$.prune,tt=0;tt<E;tt+=1){var rt=U[F[tt].sourceIdx],ct=F[tt].sourceIdx,ot=U[F[tt].targetIdx],xt=F[tt].targetIdx;if(!(Q&&(y[ct]<=1||y[xt]<=1))){var pt=[ot.x-rt.x,ot.y-rt.y],Xt=Math.hypot(pt[0],pt[1]);Xt=Xt<1e-4?1e-4:Xt,pt[0]=pt[0]/Xt,pt[1]=pt[1]/Xt,W&&g<A&&(Xt=Xt-h[ct]-h[xt]);var Ct=Xt,At=Ct;H==="linlog"&&(Ct=Math.log(1+Xt),At=Ct),V&&(Ct=Xt/y[ct],At=Xt/y[xt]),W&&g<A&&Xt<=0?(Ct=0,At=0):W&&g<A&&Xt>0&&(Ct=Xt,At=Xt),Y[2*D[rt.id]]+=Ct*pt[0],Y[2*D[ot.id]]-=At*pt[0],Y[2*D[rt.id]+1]+=Ct*pt[1],Y[2*D[ot.id]+1]-=At*pt[1]}}return Y},x.prototype.getRepGraForces=function(g,A,E,D,F,y){for(var h=this,Y=h.nodes,$=h.preventOverlap,U=h.kr,W=h.kg,V=h.center,H=h.prune,Q=Y.length,tt=0;tt<Q;tt+=1){for(var rt=tt+1;rt<Q;rt+=1)if(!(H&&(y[tt]<=1||y[rt]<=1))){var ct=[Y[rt].x-Y[tt].x,Y[rt].y-Y[tt].y],ot=Math.hypot(ct[0],ct[1]);ot=ot<1e-4?1e-4:ot,ct[0]=ct[0]/ot,ct[1]=ct[1]/ot,$&&g<A&&(ot=ot-F[tt]-F[rt]);var xt=U*(y[tt]+1)*(y[rt]+1)/ot;$&&g<A&&ot<0?xt=D*(y[tt]+1)*(y[rt]+1):$&&g<A&&ot===0?xt=0:$&&g<A&&ot>0&&(xt=U*(y[tt]+1)*(y[rt]+1)/ot),E[2*tt]-=xt*ct[0],E[2*rt]+=xt*ct[0],E[2*tt+1]-=xt*ct[1],E[2*rt+1]+=xt*ct[1]}var pt=[Y[tt].x-V[0],Y[tt].y-V[1]],Xt=Math.hypot(pt[0],pt[1]);pt[0]=pt[0]/Xt,pt[1]=pt[1]/Xt;var Ct=W*(y[tt]+1);E[2*tt]-=Ct*pt[0],E[2*tt+1]-=Ct*pt[1]}return E},x.prototype.getOptRepGraForces=function(g,A,E){for(var D=this,F=D.nodes,y=D.kg,h=D.center,Y=D.prune,$=F.length,U=9e10,W=-9e10,V=9e10,H=-9e10,Q=0;Q<$;Q+=1)Y&&E[Q]<=1||(A[Q].setPos(F[Q].x,F[Q].y),F[Q].x>=W&&(W=F[Q].x),F[Q].x<=U&&(U=F[Q].x),F[Q].y>=H&&(H=F[Q].y),F[Q].y<=V&&(V=F[Q].y));for(var tt=Math.max(W-U,H-V),rt={xmid:(W+U)/2,ymid:(H+V)/2,length:tt,massCenter:h,mass:$},ct=new P.default(rt),ot=new p.default(ct),Q=0;Q<$;Q+=1)Y&&E[Q]<=1||A[Q].in(ct)&&ot.insert(A[Q]);for(var Q=0;Q<$;Q+=1)if(!(Y&&E[Q]<=1)){A[Q].resetForce(),ot.updateForce(A[Q]),g[2*Q]-=A[Q].fx,g[2*Q+1]-=A[Q].fy;var xt=[F[Q].x-h[0],F[Q].y-h[1]],pt=Math.hypot(xt[0],xt[1]);pt=pt<1e-4?1e-4:pt,xt[0]=xt[0]/pt,xt[1]=xt[1]/pt;var Xt=y*(E[Q]+1);g[2*Q]-=Xt*xt[0],g[2*Q+1]-=Xt*xt[1]}return g},x.prototype.updatePos=function(g,A,E,D){for(var F=this,y=F.nodes,h=F.ks,Y=F.tao,$=F.prune,U=F.ksmax,W=y.length,V=[],H=[],Q=0,tt=0,rt=0;rt<W;rt+=1)if(!($&&D[rt]<=1)){var ct=[g[2*rt]-A[2*rt],g[2*rt+1]-A[2*rt+1]],ot=Math.hypot(ct[0],ct[1]),xt=[g[2*rt]+A[2*rt],g[2*rt+1]+A[2*rt+1]],pt=Math.hypot(xt[0],xt[1]);V[rt]=ot,H[rt]=pt/2,Q+=(D[rt]+1)*V[rt],tt+=(D[rt]+1)*H[rt]}var Xt=E;E=Y*tt/Q,Xt!==0&&(E=E>1.5*Xt?1.5*Xt:E);for(var rt=0;rt<W;rt+=1)if(!($&&D[rt]<=1)&&!((0,T.isNumber)(y[rt].fx)&&(0,T.isNumber)(y[rt].fy))){var Ct=h*E/(1+E*Math.sqrt(V[rt])),At=Math.hypot(g[2*rt],g[2*rt+1]);At=At<1e-4?1e-4:At;var Z=U/At;Ct=Ct>Z?Z:Ct;var q=Ct*g[2*rt],bt=Ct*g[2*rt+1];y[rt].x+=q,y[rt].y+=bt}return{nodes:y,sg:E}},x}(w.Base);z.ForceAtlas2Layout=m},851638:function(Ve,z){"use strict";Object.defineProperty(z,"__esModule",{value:!0});var C=function(){function b(k){this.xmid=k.xmid,this.ymid=k.ymid,this.length=k.length,this.massCenter=k.massCenter||[0,0],this.mass=k.mass||1}return b.prototype.getLength=function(){return this.length},b.prototype.contains=function(k,w){var T=this.length/2;return k<=this.xmid+T&&k>=this.xmid-T&&w<=this.ymid+T&&w>=this.ymid-T},b.prototype.NW=function(){var k=this.xmid-this.length/4,w=this.ymid+this.length/4,T=this.length/2,L={xmid:k,ymid:w,length:T},P=new b(L);return P},b.prototype.NE=function(){var k=this.xmid+this.length/4,w=this.ymid+this.length/4,T=this.length/2,L={xmid:k,ymid:w,length:T},P=new b(L);return P},b.prototype.SW=function(){var k=this.xmid-this.length/4,w=this.ymid-this.length/4,T=this.length/2,L={xmid:k,ymid:w,length:T},P=new b(L);return P},b.prototype.SE=function(){var k=this.xmid+this.length/4,w=this.ymid-this.length/4,T=this.length/2,L={xmid:k,ymid:w,length:T},P=new b(L);return P},b}();z.default=C},762732:function(Ve,z){"use strict";Object.defineProperty(z,"__esModule",{value:!0});var C=function(){function b(k){this.body=null,this.quad=null,this.NW=null,this.NE=null,this.SW=null,this.SE=null,this.theta=.5,k!=null&&(this.quad=k)}return b.prototype.insert=function(k){if(this.body==null){this.body=k;return}this._isExternal()?(this.quad&&(this.NW=new b(this.quad.NW()),this.NE=new b(this.quad.NE()),this.SW=new b(this.quad.SW()),this.SE=new b(this.quad.SE())),this._putBody(this.body),this._putBody(k),this.body=this.body.add(k)):(this.body=this.body.add(k),this._putBody(k))},b.prototype._putBody=function(k){this.quad&&(k.in(this.quad.NW())&&this.NW?this.NW.insert(k):k.in(this.quad.NE())&&this.NE?this.NE.insert(k):k.in(this.quad.SW())&&this.SW?this.SW.insert(k):k.in(this.quad.SE())&&this.SE&&this.SE.insert(k))},b.prototype._isExternal=function(){return this.NW==null&&this.NE==null&&this.SW==null&&this.SE==null},b.prototype.updateForce=function(k){if(!(this.body==null||k===this.body))if(this._isExternal())k.addForce(this.body);else{var w=this.quad?this.quad.getLength():0,T=this.body.distanceTo(k);w/T<this.theta?k.addForce(this.body):(this.NW&&this.NW.updateForce(k),this.NE&&this.NE.updateForce(k),this.SW&&this.SW.updateForce(k),this.SE&&this.SE.updateForce(k))}},b}();z.default=C},880374:function(Ve,z,C){"use strict";var b=this&&this.__extends||function(){var P=function(p,m){return P=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(S,x){S.__proto__=x}||function(S,x){for(var g in x)Object.prototype.hasOwnProperty.call(x,g)&&(S[g]=x[g])},P(p,m)};return function(p,m){if(typeof m!="function"&&m!==null)throw new TypeError("Class extends value "+String(m)+" is not a constructor or null");P(p,m);function S(){this.constructor=p}p.prototype=m===null?Object.create(m):(S.prototype=m.prototype,new S)}}();Object.defineProperty(z,"__esModule",{value:!0}),z.FruchtermanLayout=void 0;var k=C(762329),w=C(449784),T=800,L=function(P){b(p,P);function p(m){var S=P.call(this)||this;return S.maxIteration=1e3,S.workerEnabled=!1,S.gravity=10,S.speed=5,S.clustering=!1,S.clusterGravity=10,S.nodes=[],S.edges=[],S.width=300,S.height=300,S.nodeMap={},S.nodeIdxMap={},S.onLayoutEnd=function(){},S.tick=function(){},S.animate=!0,S.updateCfg(m),S}return p.prototype.getDefaultCfg=function(){return{maxIteration:1e3,gravity:10,speed:1,clustering:!1,clusterGravity:10,animate:!0}},p.prototype.execute=function(){var m=this,S,x,g=this,A=g.nodes;if(g.timeInterval!==void 0&&typeof window!="undefined"&&window.clearInterval(g.timeInterval),!A||A.length===0){(S=g.onLayoutEnd)===null||S===void 0||S.call(g);return}!g.width&&typeof window!="undefined"&&(g.width=window.innerWidth),!g.height&&typeof window!="undefined"&&(g.height=window.innerHeight),g.center||(g.center=[g.width/2,g.height/2]);var E=g.center;if(A.length===1){A[0].x=E[0],A[0].y=E[1],(x=g.onLayoutEnd)===null||x===void 0||x.call(g);return}var D={},F={};return A.forEach(function(y,h){(0,w.isNumber)(y.x)||(y.x=Math.random()*m.width),(0,w.isNumber)(y.y)||(y.y=Math.random()*m.height),D[y.id]=y,F[y.id]=h}),g.nodeMap=D,g.nodeIdxMap=F,g.run()},p.prototype.run=function(){var m,S=this,x=S.nodes;if(x){var g=S.edges,A=S.maxIteration,E=S.workerEnabled,D=S.clustering,F=S.animate,y={};if(D&&x.forEach(function($){y[$.cluster]===void 0&&(y[$.cluster]={name:$.cluster,cx:0,cy:0,count:0})}),E||!F){for(var h=0;h<A;h++)S.runOneStep(y);(m=S.onLayoutEnd)===null||m===void 0||m.call(S)}else{if(typeof window=="undefined")return;var Y=0;this.timeInterval=window.setInterval(function(){var $;S.runOneStep(y),Y++,Y>=A&&(($=S.onLayoutEnd)===null||$===void 0||$.call(S),window.clearInterval(S.timeInterval))},0)}return{nodes:x,edges:g}}},p.prototype.runOneStep=function(m){var S,x=this,g=x.nodes;if(g){var A=x.edges,E=x.center,D=x.gravity,F=x.speed,y=x.clustering,h=x.height*x.width,Y=Math.sqrt(h)/10,$=h/(g.length+1),U=Math.sqrt($),W=[];if(g.forEach(function(Q,tt){W[tt]={x:0,y:0}}),x.applyCalculate(g,A,W,U,$),y){for(var V in m)m[V].cx=0,m[V].cy=0,m[V].count=0;g.forEach(function(Q){var tt=m[Q.cluster];(0,w.isNumber)(Q.x)&&(tt.cx+=Q.x),(0,w.isNumber)(Q.y)&&(tt.cy+=Q.y),tt.count++});for(var V in m)m[V].cx/=m[V].count,m[V].cy/=m[V].count;var H=x.clusterGravity||D;g.forEach(function(Q,tt){if(!(!(0,w.isNumber)(Q.x)||!(0,w.isNumber)(Q.y))){var rt=m[Q.cluster],ct=Math.sqrt((Q.x-rt.cx)*(Q.x-rt.cx)+(Q.y-rt.cy)*(Q.y-rt.cy)),ot=U*H;W[tt].x-=ot*(Q.x-rt.cx)/ct,W[tt].y-=ot*(Q.y-rt.cy)/ct}})}g.forEach(function(Q,tt){if(!(!(0,w.isNumber)(Q.x)||!(0,w.isNumber)(Q.y))){var rt=.01*U*D;W[tt].x-=rt*(Q.x-E[0]),W[tt].y-=rt*(Q.y-E[1])}}),g.forEach(function(Q,tt){if((0,w.isNumber)(Q.fx)&&(0,w.isNumber)(Q.fy)){Q.x=Q.fx,Q.y=Q.fy;return}if(!(!(0,w.isNumber)(Q.x)||!(0,w.isNumber)(Q.y))){var rt=Math.sqrt(W[tt].x*W[tt].x+W[tt].y*W[tt].y);if(rt>0){var ct=Math.min(Y*(F/T),rt);Q.x+=W[tt].x/rt*ct,Q.y+=W[tt].y/rt*ct}}}),(S=x.tick)===null||S===void 0||S.call(x)}},p.prototype.applyCalculate=function(m,S,x,g,A){var E=this;E.calRepulsive(m,x,A),S&&E.calAttractive(S,x,g)},p.prototype.calRepulsive=function(m,S,x){m.forEach(function(g,A){S[A]={x:0,y:0},m.forEach(function(E,D){if(A!==D&&!(!(0,w.isNumber)(g.x)||!(0,w.isNumber)(E.x)||!(0,w.isNumber)(g.y)||!(0,w.isNumber)(E.y))){var F=g.x-E.x,y=g.y-E.y,h=F*F+y*y;if(h===0){h=1;var Y=A>D?1:-1;F=.01*Y,y=.01*Y}var $=x/h;S[A].x+=F*$,S[A].y+=y*$}})})},p.prototype.calAttractive=function(m,S,x){var g=this;m.forEach(function(A){var E=(0,w.getEdgeTerminal)(A,"source"),D=(0,w.getEdgeTerminal)(A,"target");if(!(!E||!D)){var F=g.nodeIdxMap[E],y=g.nodeIdxMap[D];if(F!==y){var h=g.nodeMap[E],Y=g.nodeMap[D];if(!(!(0,w.isNumber)(Y.x)||!(0,w.isNumber)(h.x)||!(0,w.isNumber)(Y.y)||!(0,w.isNumber)(h.y))){var $=Y.x-h.x,U=Y.y-h.y,W=Math.sqrt($*$+U*U),V=W*W/x;S[y].x-=$/W*V,S[y].y-=U/W*V,S[F].x+=$/W*V,S[F].y+=U/W*V}}}})},p.prototype.stop=function(){this.timeInterval&&typeof window!="undefined"&&window.clearInterval(this.timeInterval)},p.prototype.destroy=function(){var m=this;m.stop(),m.tick=null,m.nodes=null,m.edges=null,m.destroyed=!0},p.prototype.getType=function(){return"fruchterman"},p}(k.Base);z.FruchtermanLayout=L},113653:function(Ve,z,C){"use strict";var b=this&&this.__extends||function(){var P=function(p,m){return P=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(S,x){S.__proto__=x}||function(S,x){for(var g in x)Object.prototype.hasOwnProperty.call(x,g)&&(S[g]=x[g])},P(p,m)};return function(p,m){if(typeof m!="function"&&m!==null)throw new TypeError("Class extends value "+String(m)+" is not a constructor or null");P(p,m);function S(){this.constructor=p}p.prototype=m===null?Object.create(m):(S.prototype=m.prototype,new S)}}();Object.defineProperty(z,"__esModule",{value:!0}),z.GForceLayout=void 0;var k=C(762329),w=C(449784),T=function(P,p){var m;return P?(0,w.isNumber)(P)?m=function(S){return P}:m=P:m=function(S){return p||1},m},L=function(P){b(p,P);function p(m){var S=P.call(this)||this;return S.maxIteration=500,S.workerEnabled=!1,S.edgeStrength=200,S.nodeStrength=1e3,S.coulombDisScale=.005,S.damping=.9,S.maxSpeed=1e3,S.minMovement=.5,S.interval=.02,S.factor=1,S.linkDistance=1,S.gravity=10,S.preventOverlap=!0,S.collideStrength=1,S.tick=function(){},S.nodes=[],S.edges=[],S.width=300,S.height=300,S.nodeMap={},S.nodeIdxMap={},S.animate=!0,S.updateCfg(m),S}return p.prototype.getDefaultCfg=function(){return{maxIteration:500,gravity:10,enableTick:!0,animate:!0}},p.prototype.execute=function(){var m,S,x=this,g=x.nodes;if(x.timeInterval!==void 0&&typeof window!="undefined"&&window.clearInterval(x.timeInterval),!g||g.length===0){(m=x.onLayoutEnd)===null||m===void 0||m.call(x);return}!x.width&&typeof window!="undefined"&&(x.width=window.innerWidth),!x.height&&typeof window!="undefined"&&(x.height=window.innerHeight),x.center||(x.center=[x.width/2,x.height/2]);var A=x.center;if(g.length===1){g[0].x=A[0],g[0].y=A[1],(S=x.onLayoutEnd)===null||S===void 0||S.call(x);return}var E={},D={};g.forEach(function(U,W){(0,w.isNumber)(U.x)||(U.x=Math.random()*x.width),(0,w.isNumber)(U.y)||(U.y=Math.random()*x.height),E[U.id]=U,D[U.id]=W}),x.nodeMap=E,x.nodeIdxMap=D,x.linkDistance=T(x.linkDistance,1),x.nodeStrength=T(x.nodeStrength,1),x.edgeStrength=T(x.edgeStrength,1);var F=x.nodeSize,y;if(x.preventOverlap){var h=x.nodeSpacing,Y;(0,w.isNumber)(h)?Y=function(){return h}:(0,w.isFunction)(h)?Y=h:Y=function(){return 0},F?(0,w.isArray)(F)?y=function(U){return Math.max(F[0],F[1])+Y(U)}:y=function(U){return F+Y(U)}:y=function(U){return U.size?(0,w.isArray)(U.size)?Math.max(U.size[0],U.size[1])+Y(U):(0,w.isObject)(U.size)?Math.max(U.size.width,U.size.height)+Y(U):U.size+Y(U):10+Y(U)}}x.nodeSize=y;var $=x.edges;x.degrees=(0,w.getDegree)(g.length,x.nodeIdxMap,$),x.getMass||(x.getMass=function(U){var W=U.mass||x.degrees[x.nodeIdxMap[U.id]].all||1;return W}),x.run()},p.prototype.run=function(){var m,S=this,x=S.maxIteration,g=S.nodes,A=S.workerEnabled,E=S.minMovement,D=S.animate;if(g)if(A||!D){for(var F=0;F<x;F++){var y=S.runOneStep(F);if(S.reachMoveThreshold(g,y,E))break}(m=S.onLayoutEnd)===null||m===void 0||m.call(S)}else{if(typeof window=="undefined")return;var h=0;this.timeInterval=window.setInterval(function(){var Y,$;if(g){var U=S.runOneStep(h)||[];S.reachMoveThreshold(g,U,E)&&((Y=S.onLayoutEnd)===null||Y===void 0||Y.call(S),window.clearInterval(S.timeInterval)),h++,h>=x&&(($=S.onLayoutEnd)===null||$===void 0||$.call(S),window.clearInterval(S.timeInterval))}},0)}},p.prototype.reachMoveThreshold=function(m,S,x){var g=0;return m.forEach(function(A,E){var D=A.x-S[E].x,F=A.y-S[E].y;g+=Math.sqrt(D*D+F*F)}),g/=m.length,g<x},p.prototype.runOneStep=function(m){var S,x=this,g=x.nodes,A=x.edges,E=[],D=[];if(g){g.forEach(function(h,Y){E[2*Y]=0,E[2*Y+1]=0,D[2*Y]=0,D[2*Y+1]=0}),x.calRepulsive(E,g),A&&x.calAttractive(E,A),x.calGravity(E,g);var F=Math.max(.02,x.interval-m*.002);x.updateVelocity(E,D,F,g);var y=[];return g.forEach(function(h){y.push({x:h.x,y:h.y})}),x.updatePosition(D,F,g),(S=x.tick)===null||S===void 0||S.call(x),y}},p.prototype.calRepulsive=function(m,S){var x=this,g=x.getMass,A=x.factor,E=x.coulombDisScale,D=x.preventOverlap,F=x.collideStrength,y=F===void 0?1:F,h=x.nodeStrength,Y=x.nodeSize;S.forEach(function($,U){var W=g?g($):1;S.forEach(function(V,H){if(!(U>=H)){var Q=$.x-V.x,tt=$.y-V.y;Q===0&&tt===0&&(Q=Math.random()*.01,tt=Math.random()*.01);var rt=Q*Q+tt*tt,ct=Math.sqrt(rt),ot=(ct+.1)*E,xt=Q/ct,pt=tt/ct,Xt=(h($)+h(V))*.5*A/(ot*ot),Ct=g?g(V):1;if(m[2*U]+=xt*Xt,m[2*U+1]+=pt*Xt,m[2*H]-=xt*Xt,m[2*H+1]-=pt*Xt,D&&(Y($)+Y(V))/2>ct){var At=y*(h($)+h(V))*.5/rt;m[2*U]+=xt*At/W,m[2*U+1]+=pt*At/W,m[2*H]-=xt*At/Ct,m[2*H+1]-=pt*At/Ct}}})})},p.prototype.calAttractive=function(m,S){var x=this,g=x.nodeMap,A=x.nodeIdxMap,E=x.linkDistance,D=x.edgeStrength,F=x.nodeSize,y=x.getMass;S.forEach(function(h,Y){var $=(0,w.getEdgeTerminal)(h,"source"),U=(0,w.getEdgeTerminal)(h,"target"),W=g[$],V=g[U],H=V.x-W.x,Q=V.y-W.y;H===0&&Q===0&&(H=Math.random()*.01,Q=Math.random()*.01);var tt=Math.sqrt(H*H+Q*Q),rt=H/tt,ct=Q/tt,ot=E(h,W,V)||1+(F(W)+F(V)||0)/2,xt=ot-tt,pt=xt*D(h),Xt=A[$],Ct=A[U],At=y?y(W):1,Z=y?y(V):1;m[2*Xt]-=rt*pt/At,m[2*Xt+1]-=ct*pt/At,m[2*Ct]+=rt*pt/Z,m[2*Ct+1]+=ct*pt/Z})},p.prototype.calGravity=function(m,S){for(var x=this,g=x.center,A=x.gravity,E=x.degrees,D=S.length,F=0;F<D;F++){var y=S[F],h=y.x-g[0],Y=y.y-g[1],$=A;if(x.getCenter){var U=x.getCenter(y,E[F].all);U&&(0,w.isNumber)(U[0])&&(0,w.isNumber)(U[1])&&(0,w.isNumber)(U[2])&&(h=y.x-U[0],Y=y.y-U[1],$=U[2])}$&&(m[2*F]-=$*h,m[2*F+1]-=$*Y)}},p.prototype.updateVelocity=function(m,S,x,g){var A=this,E=x*A.damping;g.forEach(function(D,F){var y=m[2*F]*E||.01,h=m[2*F+1]*E||.01,Y=Math.sqrt(y*y+h*h);if(Y>A.maxSpeed){var $=A.maxSpeed/Y;y=$*y,h=$*h}S[2*F]=y,S[2*F+1]=h})},p.prototype.updatePosition=function(m,S,x){x.forEach(function(g,A){if((0,w.isNumber)(g.fx)&&(0,w.isNumber)(g.fy)){g.x=g.fx,g.y=g.fy;return}var E=m[2*A]*S,D=m[2*A+1]*S;g.x+=E,g.y+=D})},p.prototype.stop=function(){this.timeInterval&&typeof window!="undefined"&&window.clearInterval(this.timeInterval)},p.prototype.destroy=function(){var m=this;m.stop(),m.tick=null,m.nodes=null,m.edges=null,m.destroyed=!0},p.prototype.getType=function(){return"gForce"},p}(k.Base);z.GForceLayout=L},687745:function(Ve,z,C){"use strict";var b=this&&this.__extends||function(){var g=function(A,E){return g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(D,F){D.__proto__=F}||function(D,F){for(var y in F)Object.prototype.hasOwnProperty.call(F,y)&&(D[y]=F[y])},g(A,E)};return function(A,E){if(typeof E!="function"&&E!==null)throw new TypeError("Class extends value "+String(E)+" is not a constructor or null");g(A,E);function D(){this.constructor=A}A.prototype=E===null?Object.create(E):(D.prototype=E.prototype,new D)}}(),k=this&&this.__awaiter||function(g,A,E,D){function F(y){return y instanceof E?y:new E(function(h){h(y)})}return new(E||(E=Promise))(function(y,h){function Y(W){try{U(D.next(W))}catch(V){h(V)}}function $(W){try{U(D.throw(W))}catch(V){h(V)}}function U(W){W.done?y(W.value):F(W.value).then(Y,$)}U((D=D.apply(g,A||[])).next())})},w=this&&this.__generator||function(g,A){var E={label:0,sent:function(){if(y[0]&1)throw y[1];return y[1]},trys:[],ops:[]},D,F,y,h;return h={next:Y(0),throw:Y(1),return:Y(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function Y(U){return function(W){return $([U,W])}}function $(U){if(D)throw new TypeError("Generator is already executing.");for(;h&&(h=0,U[0]&&(E=0)),E;)try{if(D=1,F&&(y=U[0]&2?F.return:U[0]?F.throw||((y=F.return)&&y.call(F),0):F.next)&&!(y=y.call(F,U[1])).done)return y;switch(F=0,y&&(U=[U[0]&2,y.value]),U[0]){case 0:case 1:y=U;break;case 4:return E.label++,{value:U[1],done:!1};case 5:E.label++,F=U[1],U=[0];continue;case 7:U=E.ops.pop(),E.trys.pop();continue;default:if(y=E.trys,!(y=y.length>0&&y[y.length-1])&&(U[0]===6||U[0]===2)){E=0;continue}if(U[0]===3&&(!y||U[1]>y[0]&&U[1]<y[3])){E.label=U[1];break}if(U[0]===6&&E.label<y[1]){E.label=y[1],y=U;break}if(y&&E.label<y[2]){E.label=y[2],E.ops.push(U);break}y[2]&&E.ops.pop(),E.trys.pop();continue}U=A.call(g,E)}catch(W){U=[6,W],F=0}finally{D=y=0}if(U[0]&5)throw U[1];return{value:U[0]?U[1]:void 0,done:!0}}};Object.defineProperty(z,"__esModule",{value:!0}),z.FruchtermanGPULayout=void 0;var T=C(762329),L=C(449784),P=C(901029),p=C(248835),m=C(108574),S=C(416470),x=function(g){b(A,g);function A(E){var D=g.call(this)||this;return D.maxIteration=1e3,D.gravity=10,D.speed=1,D.clustering=!1,D.clusterField="cluster",D.clusterGravity=10,D.workerEnabled=!1,D.nodes=[],D.edges=[],D.width=300,D.height=300,D.nodeMap={},D.nodeIdxMap={},D.updateCfg(E),D}return A.prototype.getDefaultCfg=function(){return{maxIteration:1e3,gravity:10,speed:1,clustering:!1,clusterGravity:10}},A.prototype.execute=function(){return k(this,void 0,void 0,function(){var E,D,F,y,h,Y=this;return w(this,function($){switch($.label){case 0:return E=this,D=E.nodes,!D||D.length===0?(E.onLayoutEnd&&E.onLayoutEnd(),[2]):(!E.width&&typeof window!="undefined"&&(E.width=window.innerWidth),!E.height&&typeof window!="undefined"&&(E.height=window.innerHeight),E.center||(E.center=[E.width/2,E.height/2]),F=E.center,D.length===1?(D[0].x=F[0],D[0].y=F[1],E.onLayoutEnd&&E.onLayoutEnd(),[2]):(y={},h={},D.forEach(function(U,W){(0,L.isNumber)(U.x)||(U.x=Math.random()*Y.width),(0,L.isNumber)(U.y)||(U.y=Math.random()*Y.height),y[U.id]=U,h[U.id]=W}),E.nodeMap=y,E.nodeIdxMap=h,[4,E.run()]));case 1:return $.sent(),[2]}})})},A.prototype.executeWithWorker=function(E,D){return k(this,void 0,void 0,function(){var F,y,h,Y,$,U=this;return w(this,function(W){switch(W.label){case 0:return F=this,y=F.nodes,h=F.center,!y||y.length===0?[2]:y.length===1?(y[0].x=h[0],y[0].y=h[1],[2]):(Y={},$={},y.forEach(function(V,H){(0,L.isNumber)(V.x)||(V.x=Math.random()*U.width),(0,L.isNumber)(V.y)||(V.y=Math.random()*U.height),Y[V.id]=V,$[V.id]=H}),F.nodeMap=Y,F.nodeIdxMap=$,[4,F.run(E,D)]);case 1:return W.sent(),[2]}})})},A.prototype.run=function(E,D){return k(this,void 0,void 0,function(){var F,y,h,Y,$,U,W,V,H,Q,tt,rt,ct,ot,xt,pt,Xt,Ct,At,Z,q,bt,_t,nt,vt,It,Pt=this;return w(this,function(Et){switch(Et.label){case 0:for(F=this,y=F.nodes,h=F.edges,Y=F.maxIteration,$=F.center,U=F.height*F.width,W=Math.sqrt(U)/10,V=U/(y.length+1),H=Math.sqrt(V),Q=F.speed,tt=F.clustering,rt=(0,p.attributesToTextureData)([F.clusterField],y),ct=rt.array,ot=rt.count,y.forEach(function(Nt,$t){var ue=0,ie=0;(0,L.isNumber)(Nt.fx)&&(0,L.isNumber)(Nt.fy)&&(ue=Nt.fx||.001,ie=Nt.fy||.001),ct[4*$t+1]=ue,ct[4*$t+2]=ie}),xt=y.length,pt=(0,p.buildTextureData)(y,h),Xt=pt.maxEdgePerVetex,Ct=pt.array,At=F.workerEnabled,At?Z=P.World.create({canvas:E,engineOptions:{supportCompute:!0}}):Z=P.World.create({engineOptions:{supportCompute:!0}}),q=F.onLayoutEnd,bt=[],_t=0;_t<ot;_t++)bt.push(0,0,0,0);return nt=Z.createKernel(m.fruchtermanBundle).setDispatch([xt,1,1]).setBinding({u_Data:Ct,u_K:H,u_K2:V,u_Gravity:F.gravity,u_ClusterGravity:F.clusterGravity||F.gravity||1,u_Speed:Q,u_MaxDisplace:W,u_Clustering:tt?1:0,u_Center:$,u_AttributeArray:ct,u_ClusterCenters:bt,MAX_EDGE_PER_VERTEX:Xt,VERTEX_COUNT:xt}),tt&&(vt=Z.createKernel(m.clusterBundle).setDispatch([ot,1,1]).setBinding({u_Data:Ct,u_NodeAttributes:ct,u_ClusterCenters:bt,VERTEX_COUNT:xt,CLUSTER_COUNT:ot})),It=function(){return k(Pt,void 0,void 0,function(){var Nt,$t;return w(this,function(ue){switch(ue.label){case 0:Nt=0,ue.label=1;case 1:return Nt<Y?[4,nt.execute()]:[3,6];case 2:return ue.sent(),tt?(vt.setBinding({u_Data:nt}),[4,vt.execute()]):[3,4];case 3:ue.sent(),nt.setBinding({u_ClusterCenters:vt}),ue.label=4;case 4:nt.setBinding({u_MaxDisplace:W*=.99}),ue.label=5;case 5:return Nt++,[3,1];case 6:return[4,nt.getOutput()];case 7:return $t=ue.sent(),E?D.postMessage({type:S.LAYOUT_MESSAGE.GPUEND,vertexEdgeData:$t}):y.forEach(function(ie,Dt){var ne=$t[4*Dt],pe=$t[4*Dt+1];ie.x=ne,ie.y=pe}),q&&q(),[2]}})})},[4,It()];case 1:return Et.sent(),[2]}})})},A.prototype.getType=function(){return"fruchterman-gpu"},A}(T.Base);z.FruchtermanGPULayout=x},108574:function(Ve,z){"use strict";Object.defineProperty(z,"__esModule",{value:!0}),z.clusterBundle=z.clusterCode=z.fruchtermanBundle=z.fruchtermanCode=void 0,z.fruchtermanCode=`
import { globalInvocationID } from 'g-webgpu';
const MAX_EDGE_PER_VERTEX;
const VERTEX_COUNT;
@numthreads(1, 1, 1)
class Fruchterman {
  @in @out
  u_Data: vec4[];
  @in
  u_K: float;
  @in
  u_K2: float;
  
  @in
  u_Center: vec2;
  @in
  u_Gravity: float;
  @in
  u_ClusterGravity: float;
  @in
  u_Speed: float;
  @in
  u_MaxDisplace: float;
  @in
  u_Clustering: float;
  @in
  u_AttributeArray: vec4[];
  @in
  u_ClusterCenters: vec4[];
  calcRepulsive(i: int, currentNode: vec4): vec2 {
    let dx = 0, dy = 0;
    for (let j = 0; j < VERTEX_COUNT; j++) {
      if (i != j) {
        const nextNode = this.u_Data[j];
        const xDist = currentNode[0] - nextNode[0];
        const yDist = currentNode[1] - nextNode[1];
        const dist = (xDist * xDist + yDist * yDist) + 0.01;
        let param = this.u_K2 / dist;
        
        if (dist > 0.0) {
          dx += param * xDist;
          dy += param * yDist;
          if (xDist == 0 && yDist == 0) {
            const sign = i < j ? 1 : -1;
            dx += param * sign;
            dy += param * sign;
          }
        }
      }
    }
    return [dx, dy];
  }
  calcGravity(currentNode: vec4, nodeAttributes: vec4): vec2 { // 
    let dx = 0, dy = 0;
    const vx = currentNode[0] - this.u_Center[0];
    const vy = currentNode[1] - this.u_Center[1];
    const gf = 0.01 * this.u_K * this.u_Gravity;
    dx = gf * vx;
    dy = gf * vy;
    if (this.u_Clustering == 1) {
      const clusterIdx = int(nodeAttributes[0]);
      const center = this.u_ClusterCenters[clusterIdx];
      const cvx = currentNode[0] - center[0];
      const cvy = currentNode[1] - center[1];
      const dist = sqrt(cvx * cvx + cvy * cvy) + 0.01;
      const parma = this.u_K * this.u_ClusterGravity / dist;
      dx += parma * cvx;
      dy += parma * cvy;
    }
    return [dx, dy];
  }
  calcAttractive(i: int, currentNode: vec4): vec2 {
    let dx = 0, dy = 0;
    const arr_offset = int(floor(currentNode[2] + 0.5));
    const length = int(floor(currentNode[3] + 0.5));
    const node_buffer: vec4;
    for (let p = 0; p < MAX_EDGE_PER_VERTEX; p++) {
      if (p >= length) break;
      const arr_idx = arr_offset + p;
      // when arr_idx % 4 == 0 update currentNodedx_buffer
      const buf_offset = arr_idx - arr_idx / 4 * 4;
      if (p == 0 || buf_offset == 0) {
        node_buffer = this.u_Data[int(arr_idx / 4)];
      }
      const float_j = buf_offset == 0 ? node_buffer[0] :
                      buf_offset == 1 ? node_buffer[1] :
                      buf_offset == 2 ? node_buffer[2] :
                                        node_buffer[3];
      const nextNode = this.u_Data[int(float_j)];
      const xDist = currentNode[0] - nextNode[0];
      const yDist = currentNode[1] - nextNode[1];
      const dist = sqrt(xDist * xDist + yDist * yDist) + 0.01;
      let attractiveF = dist / this.u_K;
    
      if (dist > 0.0) {
        dx -= xDist * attractiveF;
        dy -= yDist * attractiveF;
        if (xDist == 0 && yDist == 0) {
          const sign = i < int(float_j) ? 1 : -1;
          dx -= sign * attractiveF;
          dy -= sign * attractiveF;
        }
      }
    }
    return [dx, dy];
  }
  @main
  compute() {
    const i = globalInvocationID.x;
    const currentNode = this.u_Data[i];
    let dx = 0, dy = 0;
    if (i >= VERTEX_COUNT) {
      this.u_Data[i] = currentNode;
      return;
    }

    // [gravity, fx, fy, 0]
    const nodeAttributes = this.u_AttributeArray[i];

    if (nodeAttributes[1] != 0 && nodeAttributes[2] != 0) {
      // the node is fixed
      this.u_Data[i] = [
        nodeAttributes[1],
        nodeAttributes[2],
        currentNode[2],
        currentNode[3]
      ];
      return;
    }

    // repulsive
    const repulsive = this.calcRepulsive(i, currentNode);
    dx += repulsive[0];
    dy += repulsive[1];
    // attractive
    const attractive = this.calcAttractive(i, currentNode);
    dx += attractive[0];
    dy += attractive[1];
    // gravity
    const gravity = this.calcGravity(currentNode, nodeAttributes);
    dx -= gravity[0];
    dy -= gravity[1];
    // speed
    dx *= this.u_Speed;
    dy *= this.u_Speed;

    // move
    const distLength = sqrt(dx * dx + dy * dy);
    if (distLength > 0.0) {
      const limitedDist = min(this.u_MaxDisplace * this.u_Speed, distLength);
      this.u_Data[i] = [
        currentNode[0] + dx / distLength * limitedDist,
        currentNode[1] + dy / distLength * limitedDist,
        currentNode[2],
        currentNode[3]
      ];
    }
  }
}
`,z.fruchtermanBundle='{"shaders":{"WGSL":"","GLSL450":"","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_K;\\nuniform float u_K2;\\nuniform vec2 u_Center;\\nuniform float u_Gravity;\\nuniform float u_ClusterGravity;\\nuniform float u_Speed;\\nuniform float u_MaxDisplace;\\nuniform float u_Clustering;\\nuniform sampler2D u_AttributeArray;\\nuniform vec2 u_AttributeArraySize;\\nvec4 getDatau_AttributeArray(vec2 address2D) {\\n  return vec4(texture2D(u_AttributeArray, address2D).rgba);\\n}\\nvec4 getDatau_AttributeArray(float address1D) {\\n  return getDatau_AttributeArray(addrTranslation_1Dto2D(address1D, u_AttributeArraySize));\\n}\\nvec4 getDatau_AttributeArray(int address1D) {\\n  return getDatau_AttributeArray(float(address1D));\\n}\\nuniform sampler2D u_ClusterCenters;\\nuniform vec2 u_ClusterCentersSize;\\nvec4 getDatau_ClusterCenters(vec2 address2D) {\\n  return vec4(texture2D(u_ClusterCenters, address2D).rgba);\\n}\\nvec4 getDatau_ClusterCenters(float address1D) {\\n  return getDatau_ClusterCenters(addrTranslation_1Dto2D(address1D, u_ClusterCentersSize));\\n}\\nvec4 getDatau_ClusterCenters(int address1D) {\\n  return getDatau_ClusterCenters(float(address1D));\\n}\\nvec2 calcRepulsive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = getDatau_Data(j);\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = ((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat param = u_K2 / dist;\\nif (dist > 0.0) {dx += param * xDist;\\ndy += param * yDist;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < j) ? (1.0) : (-1.0);\\ndx += param * sign;\\ndy += param * sign;}}}}\\nreturn vec2(dx, dy);}\\nvec2 calcGravity(vec4 currentNode, vec4 nodeAttributes) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nfloat vx = currentNode.x - u_Center.x;\\nfloat vy = currentNode.y - u_Center.y;\\nfloat gf = (0.01 * u_K) * u_Gravity;\\ndx = gf * vx;\\ndy = gf * vy;\\nif (u_Clustering == 1.0) {int clusterIdx = int(nodeAttributes.x);\\nvec4 center = getDatau_ClusterCenters(clusterIdx);\\nfloat cvx = currentNode.x - center.x;\\nfloat cvy = currentNode.y - center.y;\\nfloat dist = sqrt((cvx * cvx) + (cvy * cvy)) + 0.01;\\nfloat parma = (u_K * u_ClusterGravity) / dist;\\ndx += parma * cvx;\\ndy += parma * cvy;}\\nreturn vec2(dx, dy);}\\nvec2 calcAttractive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nint arr_offset = int(floor(currentNode.z + 0.5));\\nint length = int(floor(currentNode.w + 0.5));\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + int(p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = getDatau_Data(int(arr_idx / 4));}\\nfloat float_j = (buf_offset == 0) ? (node_buffer.x) : ((buf_offset == 1) ? (node_buffer.y) : ((buf_offset == 2) ? (node_buffer.z) : (node_buffer.w)));\\nvec4 nextNode = getDatau_Data(int(float_j));\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = sqrt((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat attractiveF = dist / u_K;\\nif (dist > 0.0) {dx -= xDist * attractiveF;\\ndy -= yDist * attractiveF;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < int(float_j)) ? (1.0) : (-1.0);\\ndx -= sign * attractiveF;\\ndy -= sign * attractiveF;}}}\\nreturn vec2(dx, dy);}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 currentNode = getDatau_Data(i);\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nif (i >= VERTEX_COUNT) {gl_FragColor = vec4(currentNode);\\nreturn ;}\\nvec4 nodeAttributes = getDatau_AttributeArray(i);\\nif ((nodeAttributes.y != 0.0) && (nodeAttributes.z != 0.0)) {gl_FragColor = vec4(vec4(nodeAttributes.y, nodeAttributes.z, currentNode.z, currentNode.w));\\nreturn ;}\\nvec2 repulsive = calcRepulsive(i, currentNode);\\ndx += repulsive.x;\\ndy += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode);\\ndx += attractive.x;\\ndy += attractive.y;\\nvec2 gravity = calcGravity(currentNode, nodeAttributes);\\ndx -= gravity.x;\\ndy -= gravity.y;\\ndx *= u_Speed;\\ndy *= u_Speed;\\nfloat distLength = sqrt((dx * dx) + (dy * dy));\\nif (distLength > 0.0) {float limitedDist = min(u_MaxDisplace * u_Speed, distLength);\\ngl_FragColor = vec4(vec4(currentNode.x + ((dx / distLength) * limitedDist), currentNode.y + ((dy / distLength) * limitedDist), currentNode.z, currentNode.w));}if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"MAX_EDGE_PER_VERTEX","type":"Float","runtime":true},{"name":"VERTEX_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]},{"name":"u_K","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_K2","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Center","type":"vec2<f32>","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Gravity","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterGravity","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Speed","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_MaxDisplace","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Clustering","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AttributeArray","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterCenters","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_Data","size":[1,1],"length":1},"needPingpong":true}}',z.clusterCode=`
import { globalInvocationID } from 'g-webgpu';
const VERTEX_COUNT;
const CLUSTER_COUNT;
@numthreads(1, 1, 1)
class CalcCenter {
  @in
  u_Data: vec4[];
  @in
  u_NodeAttributes: vec4[]; // [[clusterIdx, 0, 0, 0], ...]
  @in @out
  u_ClusterCenters: vec4[]; // [[cx, cy, nodeCount, clusterIdx], ...]
  @main
  compute() {
    const i = globalInvocationID.x;
    const center = this.u_ClusterCenters[i];
    let sumx = 0;
    let sumy = 0;
    let count = 0;
    for (let j = 0; j < VERTEX_COUNT; j++) {
      const attributes = this.u_NodeAttributes[j];
      const clusterIdx = int(attributes[0]);
      const vertex = this.u_Data[j];
      if (clusterIdx == i) {
        sumx += vertex.x;
        sumy += vertex.y;
        count += 1;
      }
    }
    this.u_ClusterCenters[i] = [
      sumx / count,
      sumy / count,
      count,
      i
    ];
  }
}
`,z.clusterBundle='{"shaders":{"WGSL":"","GLSL450":"","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define CLUSTER_COUNT __DefineValuePlaceholder__CLUSTER_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform sampler2D u_NodeAttributes;\\nuniform vec2 u_NodeAttributesSize;\\nvec4 getDatau_NodeAttributes(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributes, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributes(float address1D) {\\n  return getDatau_NodeAttributes(addrTranslation_1Dto2D(address1D, u_NodeAttributesSize));\\n}\\nvec4 getDatau_NodeAttributes(int address1D) {\\n  return getDatau_NodeAttributes(float(address1D));\\n}\\nuniform sampler2D u_ClusterCenters;\\nuniform vec2 u_ClusterCentersSize;\\nvec4 getDatau_ClusterCenters(vec2 address2D) {\\n  return vec4(texture2D(u_ClusterCenters, address2D).rgba);\\n}\\nvec4 getDatau_ClusterCenters(float address1D) {\\n  return getDatau_ClusterCenters(addrTranslation_1Dto2D(address1D, u_ClusterCentersSize));\\n}\\nvec4 getDatau_ClusterCenters(int address1D) {\\n  return getDatau_ClusterCenters(float(address1D));\\n}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 center = getDatau_ClusterCenters(i);\\nfloat sumx = 0.0;\\nfloat sumy = 0.0;\\nfloat count = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 attributes = getDatau_NodeAttributes(j);\\nint clusterIdx = int(attributes.x);\\nvec4 vertex = getDatau_Data(j);\\nif (clusterIdx == i) {sumx += vertex.x;\\nsumy += vertex.y;\\ncount += 1.0;}}\\ngl_FragColor = vec4(vec4(sumx / count, sumy / count, count, i));if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"VERTEX_COUNT","type":"Float","runtime":true},{"name":"CLUSTER_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributes","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterCenters","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_ClusterCenters","size":[1,1],"length":1},"needPingpong":true}}'},785194:function(Ve,z,C){"use strict";var b=this&&this.__extends||function(){var A=function(E,D){return A=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(F,y){F.__proto__=y}||function(F,y){for(var h in y)Object.prototype.hasOwnProperty.call(y,h)&&(F[h]=y[h])},A(E,D)};return function(E,D){if(typeof D!="function"&&D!==null)throw new TypeError("Class extends value "+String(D)+" is not a constructor or null");A(E,D);function F(){this.constructor=E}E.prototype=D===null?Object.create(D):(F.prototype=D.prototype,new F)}}(),k=this&&this.__awaiter||function(A,E,D,F){function y(h){return h instanceof D?h:new D(function(Y){Y(h)})}return new(D||(D=Promise))(function(h,Y){function $(V){try{W(F.next(V))}catch(H){Y(H)}}function U(V){try{W(F.throw(V))}catch(H){Y(H)}}function W(V){V.done?h(V.value):y(V.value).then($,U)}W((F=F.apply(A,E||[])).next())})},w=this&&this.__generator||function(A,E){var D={label:0,sent:function(){if(h[0]&1)throw h[1];return h[1]},trys:[],ops:[]},F,y,h,Y;return Y={next:$(0),throw:$(1),return:$(2)},typeof Symbol=="function"&&(Y[Symbol.iterator]=function(){return this}),Y;function $(W){return function(V){return U([W,V])}}function U(W){if(F)throw new TypeError("Generator is already executing.");for(;Y&&(Y=0,W[0]&&(D=0)),D;)try{if(F=1,y&&(h=W[0]&2?y.return:W[0]?y.throw||((h=y.return)&&h.call(y),0):y.next)&&!(h=h.call(y,W[1])).done)return h;switch(y=0,h&&(W=[W[0]&2,h.value]),W[0]){case 0:case 1:h=W;break;case 4:return D.label++,{value:W[1],done:!1};case 5:D.label++,y=W[1],W=[0];continue;case 7:W=D.ops.pop(),D.trys.pop();continue;default:if(h=D.trys,!(h=h.length>0&&h[h.length-1])&&(W[0]===6||W[0]===2)){D=0;continue}if(W[0]===3&&(!h||W[1]>h[0]&&W[1]<h[3])){D.label=W[1];break}if(W[0]===6&&D.label<h[1]){D.label=h[1],h=W;break}if(h&&D.label<h[2]){D.label=h[2],D.ops.push(W);break}h[2]&&D.ops.pop(),D.trys.pop();continue}W=E.call(A,D)}catch(V){W=[6,V],y=0}finally{F=h=0}if(W[0]&5)throw W[1];return{value:W[0]?W[1]:void 0,done:!0}}};Object.defineProperty(z,"__esModule",{value:!0}),z.GForceGPULayout=void 0;var T=C(762329),L=C(449784),P=C(901029),p=C(248835),m=C(280628),S=C(549762),x=C(416470),g=function(A){b(E,A);function E(D){var F=A.call(this)||this;return F.maxIteration=1e3,F.edgeStrength=200,F.nodeStrength=1e3,F.coulombDisScale=.005,F.damping=.9,F.maxSpeed=1e3,F.minMovement=.5,F.interval=.02,F.factor=1,F.linkDistance=1,F.gravity=10,F.workerEnabled=!1,F.nodes=[],F.edges=[],F.width=300,F.height=300,F.nodeMap={},F.nodeIdxMap={},F.updateCfg(D),F}return E.prototype.getDefaultCfg=function(){return{maxIteration:2e3,gravity:10,clustering:!1,clusterGravity:10}},E.prototype.execute=function(){return k(this,void 0,void 0,function(){var D,F,y,h,Y;return w(this,function($){switch($.label){case 0:return D=this,F=D.nodes,!F||F.length===0?(D.onLayoutEnd&&D.onLayoutEnd(),[2]):(!D.width&&typeof window!="undefined"&&(D.width=window.innerWidth),!D.height&&typeof window!="undefined"&&(D.height=window.innerHeight),D.center||(D.center=[D.width/2,D.height/2]),y=D.center,F.length===1?(F[0].x=y[0],F[0].y=y[1],D.onLayoutEnd&&D.onLayoutEnd(),[2]):(h={},Y={},F.forEach(function(U,W){(0,L.isNumber)(U.x)||(U.x=Math.random()*D.width),(0,L.isNumber)(U.y)||(U.y=Math.random()*D.height),h[U.id]=U,Y[U.id]=W}),D.nodeMap=h,D.nodeIdxMap=Y,D.nodeStrength=(0,p.proccessToFunc)(D.nodeStrength,1),D.edgeStrength=(0,p.proccessToFunc)(D.edgeStrength,1),[4,D.run()]));case 1:return $.sent(),[2]}})})},E.prototype.executeWithWorker=function(D,F){var y=this,h=y.nodes,Y=y.center;if(!(!h||h.length===0)){if(h.length===1){h[0].x=Y[0],h[0].y=Y[1];return}var $={},U={};h.forEach(function(W,V){(0,L.isNumber)(W.x)||(W.x=Math.random()*y.width),(0,L.isNumber)(W.y)||(W.y=Math.random()*y.height),$[W.id]=W,U[W.id]=V}),y.nodeMap=$,y.nodeIdxMap=U,y.nodeStrength=(0,p.proccessToFunc)(y.nodeStrength,1),y.edgeStrength=(0,p.proccessToFunc)(y.edgeStrength,1),y.run(D,F)}},E.prototype.run=function(D,F){return k(this,void 0,void 0,function(){var y,h,Y,$,U,W,V,H,Q,tt,rt,ct,ot,xt,pt,Xt,Ct,At,Z,q,bt,_t,nt,vt,It,Pt,Et,Nt=this;return w(this,function($t){switch($t.label){case 0:for(y=this,h=y.nodes,Y=y.edges,$=y.maxIteration,!y.width&&typeof window!="undefined"&&(y.width=window.innerWidth),!y.height&&typeof window!="undefined"&&(y.height=window.innerHeight),U=h.length,y.linkDistance=(0,p.proccessToFunc)(y.linkDistance),y.edgeStrength=(0,p.proccessToFunc)(y.edgeStrength),W=(0,p.buildTextureDataWithTwoEdgeAttr)(h,Y,y.linkDistance,y.edgeStrength),V=W.maxEdgePerVetex,H=W.array,y.degrees=(0,m.getDegree)(h.length,y.nodeIdxMap,Y).map(function(ue){return ue.all}),Q=[],tt=[],rt=[],ct=[],ot=[],xt=[],pt=[],y.getMass||(y.getMass=function(ue){return y.degrees[y.nodeIdxMap[ue.id]]||1}),Xt=y.gravity,Ct=y.center,h.forEach(function(ue,ie){Q.push(y.getMass(ue)),tt.push(y.nodeStrength(ue)),y.degrees[ie]||(y.degrees[ie]=0);var Dt=[Ct[0],Ct[1],Xt];if(y.getCenter){var ne=y.getCenter(ue,y.degrees[ie]);ne&&(0,L.isNumber)(ne[0])&&(0,L.isNumber)(ne[1])&&(0,L.isNumber)(ne[2])&&(Dt=ne)}rt.push(Dt[0]),ct.push(Dt[1]),ot.push(Dt[2]),(0,L.isNumber)(ue.fx)&&(0,L.isNumber)(ue.fy)?(xt.push(ue.fx||.001),pt.push(ue.fy||.001)):(xt.push(0),pt.push(0))}),At=(0,p.arrayToTextureData)([Q,y.degrees,tt,xt]),Z=(0,p.arrayToTextureData)([rt,ct,ot,pt]),q=y.workerEnabled,q?bt=P.World.create({canvas:D,engineOptions:{supportCompute:!0}}):bt=P.World.create({engineOptions:{supportCompute:!0}}),_t=y.onLayoutEnd,nt=[],H.forEach(function(ue){nt.push(ue)}),vt=0;vt<4;vt++)nt.push(0);return It=bt.createKernel(S.gForceBundle).setDispatch([U,1,1]).setBinding({u_Data:H,u_damping:y.damping,u_maxSpeed:y.maxSpeed,u_minMovement:y.minMovement,u_coulombDisScale:y.coulombDisScale,u_factor:y.factor,u_NodeAttributeArray1:At,u_NodeAttributeArray2:Z,MAX_EDGE_PER_VERTEX:V,VERTEX_COUNT:U,u_AveMovement:nt,u_interval:y.interval}),Pt=bt.createKernel(S.aveMovementBundle).setDispatch([1,1,1]).setBinding({u_Data:H,VERTEX_COUNT:U,u_AveMovement:[0,0,0,0]}),Et=function(){return k(Nt,void 0,void 0,function(){var ue,ie,Dt;return w(this,function(ne){switch(ne.label){case 0:ue=0,ne.label=1;case 1:return ue<$?[4,It.execute()]:[3,5];case 2:return ne.sent(),Pt.setBinding({u_Data:It}),[4,Pt.execute()];case 3:ne.sent(),ie=Math.max(.02,y.interval-ue*.002),It.setBinding({u_interval:ie,u_AveMovement:Pt}),ne.label=4;case 4:return ue++,[3,1];case 5:return[4,It.getOutput()];case 6:return Dt=ne.sent(),D?F.postMessage({type:x.LAYOUT_MESSAGE.GPUEND,vertexEdgeData:Dt}):h.forEach(function(pe,Wt){var ae=Dt[4*Wt],Se=Dt[4*Wt+1];pe.x=ae,pe.y=Se}),_t&&_t(),[2]}})})},[4,Et()];case 1:return $t.sent(),[2]}})})},E.prototype.getType=function(){return"gForce-gpu"},E}(T.Base);z.GForceGPULayout=g},549762:function(Ve,z){"use strict";Object.defineProperty(z,"__esModule",{value:!0}),z.aveMovementBundle=z.aveMovementCode=z.gForceBundle=z.gForceCode=void 0,z.gForceCode=`
import { globalInvocationID } from 'g-webgpu';

const MAX_EDGE_PER_VERTEX;
const VERTEX_COUNT;
const SHIFT_20 = 1048576;

@numthreads(1, 1, 1)
class GGForce {
  @in @out
  u_Data: vec4[];

  @in
  u_damping: float;
  
  @in
  u_maxSpeed: float;

  @in
  u_minMovement: float;

  @in
  u_AveMovement: vec4[];

  @in
  u_coulombDisScale: float;

  @in
  u_factor: float;

  @in
  u_NodeAttributeArray1: vec4[];

  @in
  u_NodeAttributeArray2: vec4[];

  @in
  u_interval: float;

  unpack_float(packedValue: float): ivec2 {
    const packedIntValue = int(packedValue);
    const v0 = packedIntValue / SHIFT_20;
    return [v0, packedIntValue - v0 * SHIFT_20];
  }

  calcRepulsive(i: int, currentNode: vec4): vec2 {
    let ax = 0, ay = 0;
    for (let j: int = 0; j < VERTEX_COUNT; j++) {
      if (i != j) {
        const nextNode = this.u_Data[j];
        const vx = currentNode[0] - nextNode[0];
        const vy = currentNode[1] - nextNode[1];
        const dist = sqrt(vx * vx + vy * vy) + 0.01;
        const n_dist = (dist + 0.1) * this.u_coulombDisScale;
        const direx = vx / dist;
        const direy = vy / dist;
        const attributesi = this.u_NodeAttributeArray1[i];
        const attributesj = this.u_NodeAttributeArray1[j];
        const massi = attributesi[0];
        const nodeStrengthi = attributesi[2];
        const nodeStrengthj = attributesj[2];
        const nodeStrength = (nodeStrengthi + nodeStrengthj) / 2;
        // const param = nodeStrength * this.u_factor / (n_dist * n_dist * massi);
        const param = nodeStrength * this.u_factor / (n_dist * n_dist);
        ax += direx * param;
        ay += direy * param;
      }
    }
    return [ax, ay];
  }

  calcGravity(i: int, currentNode: vec4, attributes2: vec4): vec2 {
    // note: attributes2 = [centerX, centerY, gravity, 0]

    const vx = currentNode[0] - attributes2[0];
    const vy = currentNode[1] - attributes2[1];
    
    const ax = vx * attributes2[2];
    const ay = vy * attributes2[2];
    
    return [ax, ay];
  }

  calcAttractive(i: int, currentNode: vec4, attributes1: vec4): vec2 {
    // note: attributes1 = [mass, degree, nodeSterngth, 0]

    const mass = attributes1[0];
    let ax = 0, ay = 0;
    // const arr_offset = int(floor(currentNode[2] + 0.5));
    // const length = int(floor(currentNode[3] + 0.5));

    const compressed = this.unpack_float(currentNode[2]);
    const length = compressed[0];
    const arr_offset = compressed[1];

    const node_buffer: vec4;
    for (let p: int = 0; p < MAX_EDGE_PER_VERTEX; p++) {
      if (p >= length) break;
      const arr_idx = arr_offset + 4 * p; // i \u8282\u70B9\u7684\u7B2C p \u6761\u8FB9\u5F00\u59CB\u7684\u5C0F\u683C\u5B50\u4F4D\u7F6E
      const buf_offset = arr_idx - arr_idx / 4 * 4;
      if (p == 0 || buf_offset == 0) {
        node_buffer = this.u_Data[int(arr_idx / 4)]; // \u5927\u683C\u5B50\uFF0C\u5927\u683C\u5B50\u4F4D\u7F6E=\u5C0F\u4E2A\u5B50\u4F4D\u7F6E / 4\uFF0C
      }

      let float_j: float = node_buffer[0];

      const nextNode = this.u_Data[int(float_j)];
      const vx = nextNode[0] - currentNode[0];
      const vy = nextNode[1] - currentNode[1];
      const dist = sqrt(vx * vx + vy * vy) + 0.01;
      const direx = vx / dist;
      const direy = vy / dist;
      const edgeLength = node_buffer[1];
      const edgeStrength = node_buffer[2];
      const diff: float = edgeLength - dist;//edgeLength
      // const param = diff * this.u_stiffness / mass; //
      const param = diff * edgeStrength / mass; // 
      ax -= direx * param;
      ay -= direy * param;
    }
    return [ax, ay];
  }

  @main
  compute() {
    const i = globalInvocationID.x;
    const currentNode = this.u_Data[i];
    const movement = u_AveMovement[0];
    let ax = 0, ay = 0;

    if (i >= VERTEX_COUNT || movement.x < u_minMovement) {
      this.u_Data[i] = currentNode;
      return;
    }

    // \u6BCF\u4E2A\u8282\u70B9\u5C5E\u6027\u5360\u4E24\u4E2A\u6570\u7EC4\u4E2D\u5404\u4E00\u683C
    // [mass, degree, nodeStrength, fx]
    const nodeAttributes1 = this.u_NodeAttributeArray1[i];
    // [centerX, centerY, centerGravity, fy]
    const nodeAttributes2 = this.u_NodeAttributeArray2[i];

    // repulsive
    const repulsive = this.calcRepulsive(i, currentNode);
    ax += repulsive[0];
    ay += repulsive[1];

    // attractive
    const attractive = this.calcAttractive(i, currentNode, nodeAttributes1);
    ax += attractive[0];
    ay += attractive[1];

    // gravity
    const gravity = this.calcGravity(i, currentNode, nodeAttributes2);
    ax -= gravity[0];
    ay -= gravity[1];

    // speed
    const param = this.u_interval * this.u_damping;
    let vx = ax * param;
    let vy = ay * param;
    const vlength = sqrt(vx * vx + vy * vy) + 0.0001;
    if (vlength > this.u_maxSpeed) {
      const param2 = this.u_maxSpeed / vlength;
      vx = param2 * vx;
      vy = param2 * vy;
    }

    // move
    if (nodeAttributes1[3] != 0 && nodeAttributes2[3] != 0) {
      this.u_Data[i] = [
        nodeAttributes1[3],
        nodeAttributes2[3],
        currentNode[2],
        0
      ];
    } else {
      const distx = vx * this.u_interval;
      const disty = vy * this.u_interval;
      const distLength = sqrt(distx * distx + disty * disty);
      this.u_Data[i] = [
        currentNode[0] + distx,
        currentNode[1] + disty,
        currentNode[2],
        distLength
      ];
    }
    
    // the avarage move distance
    // need to share memory
    
  }
}
`,z.gForceBundle='{"shaders":{"WGSL":"","GLSL450":"","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define SHIFT_20 1048576.0\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_damping;\\nuniform float u_maxSpeed;\\nuniform float u_minMovement;\\nuniform sampler2D u_AveMovement;\\nuniform vec2 u_AveMovementSize;\\nvec4 getDatau_AveMovement(vec2 address2D) {\\n  return vec4(texture2D(u_AveMovement, address2D).rgba);\\n}\\nvec4 getDatau_AveMovement(float address1D) {\\n  return getDatau_AveMovement(addrTranslation_1Dto2D(address1D, u_AveMovementSize));\\n}\\nvec4 getDatau_AveMovement(int address1D) {\\n  return getDatau_AveMovement(float(address1D));\\n}\\nuniform float u_coulombDisScale;\\nuniform float u_factor;\\nuniform sampler2D u_NodeAttributeArray1;\\nuniform vec2 u_NodeAttributeArray1Size;\\nvec4 getDatau_NodeAttributeArray1(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributeArray1, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributeArray1(float address1D) {\\n  return getDatau_NodeAttributeArray1(addrTranslation_1Dto2D(address1D, u_NodeAttributeArray1Size));\\n}\\nvec4 getDatau_NodeAttributeArray1(int address1D) {\\n  return getDatau_NodeAttributeArray1(float(address1D));\\n}\\nuniform sampler2D u_NodeAttributeArray2;\\nuniform vec2 u_NodeAttributeArray2Size;\\nvec4 getDatau_NodeAttributeArray2(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributeArray2, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributeArray2(float address1D) {\\n  return getDatau_NodeAttributeArray2(addrTranslation_1Dto2D(address1D, u_NodeAttributeArray2Size));\\n}\\nvec4 getDatau_NodeAttributeArray2(int address1D) {\\n  return getDatau_NodeAttributeArray2(float(address1D));\\n}\\nuniform float u_interval;\\nivec2 unpack_float(float packedValue) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint packedIntValue = int(packedValue);\\nint v0 = packedIntValue / int(SHIFT_20);\\nreturn ivec2(v0, packedIntValue - (v0 * int(SHIFT_20)));}\\nvec2 calcRepulsive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = getDatau_Data(j);\\nfloat vx = currentNode.x - nextNode.x;\\nfloat vy = currentNode.y - nextNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat n_dist = (dist + 0.1) * u_coulombDisScale;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nvec4 attributesi = getDatau_NodeAttributeArray1(i);\\nvec4 attributesj = getDatau_NodeAttributeArray1(j);\\nfloat massi = attributesi.x;\\nfloat nodeStrengthi = attributesi.z;\\nfloat nodeStrengthj = attributesj.z;\\nfloat nodeStrength = (nodeStrengthi + nodeStrengthj) / 2.0;\\nfloat param = (nodeStrength * u_factor) / (n_dist * n_dist);\\nax += direx * param;\\nay += direy * param;}}\\nreturn vec2(ax, ay);}\\nvec2 calcGravity(int i, vec4 currentNode, vec4 attributes2) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat vx = currentNode.x - attributes2.x;\\nfloat vy = currentNode.y - attributes2.y;\\nfloat ax = vx * attributes2.z;\\nfloat ay = vy * attributes2.z;\\nreturn vec2(ax, ay);}\\nvec2 calcAttractive(int i, vec4 currentNode, vec4 attributes1) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat mass = attributes1.x;\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nivec2 compressed = unpack_float(currentNode.z);\\nint length = compressed.x;\\nint arr_offset = compressed.y;\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + (4 * p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = getDatau_Data(int(arr_idx / 4));}\\nfloat float_j = node_buffer.x;\\nvec4 nextNode = getDatau_Data(int(float_j));\\nfloat vx = nextNode.x - currentNode.x;\\nfloat vy = nextNode.y - currentNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nfloat edgeLength = node_buffer.y;\\nfloat edgeStrength = node_buffer.z;\\nfloat diff = edgeLength - dist;\\nfloat param = (diff * edgeStrength) / mass;\\nax -= direx * param;\\nay -= direy * param;}\\nreturn vec2(ax, ay);}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 currentNode = getDatau_Data(i);\\nvec4 movement = getDatau_AveMovement(0.0);\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nif ((i >= VERTEX_COUNT) || (movement.x < u_minMovement)) {gl_FragColor = vec4(currentNode);\\nreturn ;}\\nvec4 nodeAttributes1 = getDatau_NodeAttributeArray1(i);\\nvec4 nodeAttributes2 = getDatau_NodeAttributeArray2(i);\\nvec2 repulsive = calcRepulsive(i, currentNode);\\nax += repulsive.x;\\nay += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode, nodeAttributes1);\\nax += attractive.x;\\nay += attractive.y;\\nvec2 gravity = calcGravity(i, currentNode, nodeAttributes2);\\nax -= gravity.x;\\nay -= gravity.y;\\nfloat param = u_interval * u_damping;\\nfloat vx = ax * param;\\nfloat vy = ay * param;\\nfloat vlength = sqrt((vx * vx) + (vy * vy)) + 0.0001;\\nif (vlength > u_maxSpeed) {float param2 = u_maxSpeed / vlength;\\nvx = param2 * vx;\\nvy = param2 * vy;}\\nif ((nodeAttributes1.w != 0.0) && (nodeAttributes2.w != 0.0)) {gl_FragColor = vec4(vec4(nodeAttributes1.w, nodeAttributes2.w, currentNode.z, 0.0));}else {float distx = vx * u_interval;\\nfloat disty = vy * u_interval;\\nfloat distLength = sqrt((distx * distx) + (disty * disty));\\ngl_FragColor = vec4(vec4(currentNode.x + distx, currentNode.y + disty, currentNode.z, distLength));}if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"MAX_EDGE_PER_VERTEX","type":"Float","runtime":true},{"name":"VERTEX_COUNT","type":"Float","runtime":true},{"name":"SHIFT_20","type":"Float","value":1048576,"runtime":false}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]},{"name":"u_damping","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_maxSpeed","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_minMovement","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AveMovement","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_coulombDisScale","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_factor","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributeArray1","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributeArray2","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_interval","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_Data","size":[1,1],"length":1},"needPingpong":true}}',z.aveMovementCode=`
const VERTEX_COUNT;
@numthreads(1, 1, 1)
class CalcAveMovement {
  @in
  u_Data: vec4[];
  @in
  u_iter: float;
  @in @out
  u_AveMovement: vec4[];
  @main
  compute() {
    let movement = 0;
    for (let j: int = 0; j < VERTEX_COUNT; j++) {
      const vertex = this.u_Data[j];
      movement += vertex[3];
    }
    movement = movement / float(VERTEX_COUNT);
    this.u_AveMovement[0] = [movement, 0, 0, 0];
  }
}
`,z.aveMovementBundle='{"shaders":{"WGSL":"","GLSL450":"","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_iter;\\nuniform sampler2D u_AveMovement;\\nuniform vec2 u_AveMovementSize;\\nvec4 getDatau_AveMovement(vec2 address2D) {\\n  return vec4(texture2D(u_AveMovement, address2D).rgba);\\n}\\nvec4 getDatau_AveMovement(float address1D) {\\n  return getDatau_AveMovement(addrTranslation_1Dto2D(address1D, u_AveMovementSize));\\n}\\nvec4 getDatau_AveMovement(int address1D) {\\n  return getDatau_AveMovement(float(address1D));\\n}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat movement = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 vertex = getDatau_Data(j);\\nmovement += vertex.w;}\\nmovement = movement / float(VERTEX_COUNT);\\ngl_FragColor = vec4(vec4(movement, 0.0, 0.0, 0.0));if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"VERTEX_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_iter","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AveMovement","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_AveMovement","size":[1,1],"length":1},"needPingpong":true}}'},694414:function(Ve,z,C){"use strict";var b=this&&this.__extends||function(){var L=function(P,p){return L=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,S){m.__proto__=S}||function(m,S){for(var x in S)Object.prototype.hasOwnProperty.call(S,x)&&(m[x]=S[x])},L(P,p)};return function(P,p){if(typeof p!="function"&&p!==null)throw new TypeError("Class extends value "+String(p)+" is not a constructor or null");L(P,p);function m(){this.constructor=P}P.prototype=p===null?Object.create(p):(m.prototype=p.prototype,new m)}}();Object.defineProperty(z,"__esModule",{value:!0}),z.GridLayout=void 0;var k=C(449784),w=C(762329),T=function(L){b(P,L);function P(p){var m=L.call(this)||this;return m.begin=[0,0],m.preventOverlap=!0,m.preventOverlapPadding=10,m.condense=!1,m.sortBy="degree",m.nodes=[],m.edges=[],m.width=300,m.height=300,m.row=0,m.col=0,m.cellWidth=0,m.cellHeight=0,m.cellUsed={},m.id2manPos={},m.onLayoutEnd=function(){},m.updateCfg(p),m}return P.prototype.getDefaultCfg=function(){return{begin:[0,0],preventOverlap:!0,preventOverlapPadding:10,condense:!1,rows:void 0,cols:void 0,position:void 0,sortBy:"degree",nodeSize:30}},P.prototype.execute=function(){var p=this,m=p.nodes,S=p.edges,x=p.begin,g=m.length;if(g===0)return p.onLayoutEnd&&p.onLayoutEnd(),{nodes:m,edges:S};if(g===1)return m[0].x=x[0],m[0].y=x[1],p.onLayoutEnd&&p.onLayoutEnd(),{nodes:m,edges:S};var A=p.sortBy,E=p.width,D=p.height,F=p.condense,y=p.preventOverlapPadding,h=p.preventOverlap,Y=p.nodeSpacing,$=p.nodeSize,U=[];m.forEach(function(At){U.push(At)});var W={};if(U.forEach(function(At,Z){W[At.id]=Z}),(A==="degree"||!(0,k.isString)(A)||U[0][A]===void 0)&&(A="degree",(0,k.isNaN)(m[0].degree))){var V=(0,k.getDegree)(U.length,W,S);U.forEach(function(At,Z){At.degree=V[Z].all})}U.sort(function(At,Z){return Z[A]-At[A]}),!E&&typeof window!="undefined"&&(E=window.innerWidth),!D&&typeof window!="undefined"&&(D=window.innerHeight);var H=p.rows,Q=p.cols!=null?p.cols:p.columns;if(p.cells=g,H!=null&&Q!=null?(p.rows=H,p.cols=Q):H!=null&&Q==null?(p.rows=H,p.cols=Math.ceil(p.cells/p.rows)):H==null&&Q!=null?(p.cols=Q,p.rows=Math.ceil(p.cells/p.cols)):(p.splits=Math.sqrt(p.cells*p.height/p.width),p.rows=Math.round(p.splits),p.cols=Math.round(p.width/p.height*p.splits)),p.rows=Math.max(p.rows,1),p.cols=Math.max(p.cols,1),p.cols*p.rows>p.cells){var tt=p.small(),rt=p.large();(tt-1)*rt>=p.cells?p.small(tt-1):(rt-1)*tt>=p.cells&&p.large(rt-1)}else for(;p.cols*p.rows<p.cells;){var tt=p.small(),rt=p.large();(rt+1)*tt>=p.cells?p.large(rt+1):p.small(tt+1)}if(p.cellWidth=E/p.cols,p.cellHeight=D/p.rows,F&&(p.cellWidth=0,p.cellHeight=0),h||Y){var ct=(0,k.getFuncByUnknownType)(10,Y),ot=(0,k.getFuncByUnknownType)(30,$,!1);U.forEach(function(At){(!At.x||!At.y)&&(At.x=0,At.y=0);var Z=ot(At)||30,q,bt;(0,k.isArray)(Z)?(q=Z[0],bt=Z[1]):(q=Z,bt=Z);var _t=ct!==void 0?ct(At):y,nt=q+_t,vt=bt+_t;p.cellWidth=Math.max(p.cellWidth,nt),p.cellHeight=Math.max(p.cellHeight,vt)})}p.cellUsed={},p.row=0,p.col=0,p.id2manPos={};for(var xt=0;xt<U.length;xt++){var pt=U[xt],Xt=void 0;if(p.position&&(Xt=p.position(pt)),Xt&&(Xt.row!==void 0||Xt.col!==void 0)){var Ct={row:Xt.row,col:Xt.col};if(Ct.col===void 0)for(Ct.col=0;p.used(Ct.row,Ct.col);)Ct.col++;else if(Ct.row===void 0)for(Ct.row=0;p.used(Ct.row,Ct.col);)Ct.row++;p.id2manPos[pt.id]=Ct,p.use(Ct.row,Ct.col)}p.getPos(pt)}return p.onLayoutEnd&&p.onLayoutEnd(),{edges:S,nodes:U}},P.prototype.small=function(p){var m=this,S,x=m.rows||5,g=m.cols||5;if(p==null)S=Math.min(x,g);else{var A=Math.min(x,g);A===m.rows?m.rows=p:m.cols=p}return S},P.prototype.large=function(p){var m=this,S,x=m.rows||5,g=m.cols||5;if(p==null)S=Math.max(x,g);else{var A=Math.max(x,g);A===m.rows?m.rows=p:m.cols=p}return S},P.prototype.used=function(p,m){var S=this;return S.cellUsed["c-".concat(p,"-").concat(m)]||!1},P.prototype.use=function(p,m){var S=this;S.cellUsed["c-".concat(p,"-").concat(m)]=!0},P.prototype.moveToNextCell=function(){var p=this,m=p.cols||5;p.col++,p.col>=m&&(p.col=0,p.row++)},P.prototype.getPos=function(p){var m=this,S=m.begin,x=m.cellWidth,g=m.cellHeight,A,E,D=m.id2manPos[p.id];if(D)A=D.col*x+x/2+S[0],E=D.row*g+g/2+S[1];else{for(;m.used(m.row,m.col);)m.moveToNextCell();A=m.col*x+x/2+S[0],E=m.row*g+g/2+S[1],m.use(m.row,m.col),m.moveToNextCell()}p.x=A,p.y=E},P.prototype.getType=function(){return"grid"},P}(w.Base);z.GridLayout=T},702584:function(Ve,z,C){"use strict";var b=this&&this.__createBinding||(Object.create?function(V,H,Q,tt){tt===void 0&&(tt=Q);var rt=Object.getOwnPropertyDescriptor(H,Q);(!rt||("get"in rt?!H.__esModule:rt.writable||rt.configurable))&&(rt={enumerable:!0,get:function(){return H[Q]}}),Object.defineProperty(V,tt,rt)}:function(V,H,Q,tt){tt===void 0&&(tt=Q),V[tt]=H[Q]}),k=this&&this.__exportStar||function(V,H){for(var Q in V)Q!=="default"&&!Object.prototype.hasOwnProperty.call(H,Q)&&b(H,V,Q)};Object.defineProperty(z,"__esModule",{value:!0}),z.ERLayout=z.ForceAtlas2Layout=z.ComboCombinedLayout=z.ComboForceLayout=z.GForceGPULayout=z.FruchtermanGPULayout=z.FruchtermanLayout=z.MDSLayout=z.ConcentricLayout=z.RadialLayout=z.DagreCompoundLayout=z.DagreLayout=z.CircularLayout=z.ForceLayout=z.Force2Layout=z.GForceLayout=z.RandomLayout=z.GridLayout=z.Layouts=z.Layout=void 0;var w=C(694414);Object.defineProperty(z,"GridLayout",{enumerable:!0,get:function(){return w.GridLayout}});var T=C(539711);Object.defineProperty(z,"RandomLayout",{enumerable:!0,get:function(){return T.RandomLayout}});var L=C(113653);Object.defineProperty(z,"GForceLayout",{enumerable:!0,get:function(){return L.GForceLayout}});var P=C(306740);Object.defineProperty(z,"Force2Layout",{enumerable:!0,get:function(){return P.Force2Layout}});var p=C(885717);Object.defineProperty(z,"ForceLayout",{enumerable:!0,get:function(){return p.ForceLayout}});var m=C(964885);Object.defineProperty(z,"CircularLayout",{enumerable:!0,get:function(){return m.CircularLayout}});var S=C(920171);Object.defineProperty(z,"DagreLayout",{enumerable:!0,get:function(){return S.DagreLayout}});var x=C(177057);Object.defineProperty(z,"DagreCompoundLayout",{enumerable:!0,get:function(){return x.DagreCompoundLayout}});var g=C(847944);Object.defineProperty(z,"RadialLayout",{enumerable:!0,get:function(){return g.RadialLayout}});var A=C(843281);Object.defineProperty(z,"ConcentricLayout",{enumerable:!0,get:function(){return A.ConcentricLayout}});var E=C(352899);Object.defineProperty(z,"MDSLayout",{enumerable:!0,get:function(){return E.MDSLayout}});var D=C(880374);Object.defineProperty(z,"FruchtermanLayout",{enumerable:!0,get:function(){return D.FruchtermanLayout}});var F=C(687745);Object.defineProperty(z,"FruchtermanGPULayout",{enumerable:!0,get:function(){return F.FruchtermanGPULayout}});var y=C(785194);Object.defineProperty(z,"GForceGPULayout",{enumerable:!0,get:function(){return y.GForceGPULayout}});var h=C(366590);Object.defineProperty(z,"ComboForceLayout",{enumerable:!0,get:function(){return h.ComboForceLayout}});var Y=C(263861);Object.defineProperty(z,"ComboCombinedLayout",{enumerable:!0,get:function(){return Y.ComboCombinedLayout}});var $=C(148564);Object.defineProperty(z,"ForceAtlas2Layout",{enumerable:!0,get:function(){return $.ForceAtlas2Layout}});var U=C(290441);Object.defineProperty(z,"ERLayout",{enumerable:!0,get:function(){return U.ERLayout}});var W=C(842875);Object.defineProperty(z,"Layout",{enumerable:!0,get:function(){return W.Layout}}),Object.defineProperty(z,"Layouts",{enumerable:!0,get:function(){return W.Layouts}}),k(C(932867),z)},842875:function(Ve,z,C){"use strict";Object.defineProperty(z,"__esModule",{value:!0}),z.Layouts=z.Layout=void 0;var b=C(695326),k=C(694414),w=C(539711),T=C(306740),L=C(113653),P=C(885717),p=C(964885),m=C(920171),S=C(847944),x=C(843281),g=C(352899),A=C(880374),E=C(687745),D=C(785194),F=C(366590),y=C(263861),h=C(148564),Y=C(290441),$=C(177057),U=C(449784),W=function(){function V(H){var Q=(0,b.getLayoutByName)(H.type);this.layoutInstance=new Q(H)}return V.prototype.layout=function(H){return this.layoutInstance.layout(H)},V.prototype.updateCfg=function(H){this.layoutInstance.updateCfg(H)},V.prototype.init=function(H){this.correctLayers(H.nodes),this.layoutInstance.init(H)},V.prototype.correctLayers=function(H){if(H!=null&&H.length){var Q=1/0,tt=[];if(H.forEach(function(ct){(0,U.isString)(ct.layer)&&(ct.layer=parseInt(ct.layer,10)),!(ct.layer===void 0||isNaN(ct.layer))&&(tt.push(ct),ct.layer<Q&&(Q=ct.layer))}),Q<=0){var rt=Math.abs(Q)+1;tt.forEach(function(ct){return ct.layer+=rt})}}},V.prototype.execute=function(){this.layoutInstance.execute()},V.prototype.getDefaultCfg=function(){return this.layoutInstance.getDefaultCfg()},V.prototype.destroy=function(){return this.layoutInstance.destroy()},V}();z.Layout=W,z.Layouts={force:P.ForceLayout,fruchterman:A.FruchtermanLayout,forceAtlas2:h.ForceAtlas2Layout,gForce:L.GForceLayout,force2:T.Force2Layout,dagre:m.DagreLayout,dagreCompound:$.DagreCompoundLayout,circular:p.CircularLayout,radial:S.RadialLayout,concentric:x.ConcentricLayout,grid:k.GridLayout,mds:g.MDSLayout,comboForce:F.ComboForceLayout,comboCombined:y.ComboCombinedLayout,random:w.RandomLayout,"gForce-gpu":D.GForceGPULayout,"fruchterman-gpu":E.FruchtermanGPULayout,er:Y.ERLayout}},352899:function(Ve,z,C){"use strict";var b=this&&this.__extends||function(){var P=function(p,m){return P=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(S,x){S.__proto__=x}||function(S,x){for(var g in x)Object.prototype.hasOwnProperty.call(x,g)&&(S[g]=x[g])},P(p,m)};return function(p,m){if(typeof m!="function"&&m!==null)throw new TypeError("Class extends value "+String(m)+" is not a constructor or null");P(p,m);function S(){this.constructor=p}p.prototype=m===null?Object.create(m):(S.prototype=m.prototype,new S)}}();Object.defineProperty(z,"__esModule",{value:!0}),z.MDSLayout=void 0;var k=C(405237),w=C(449784),T=C(762329),L=function(P){b(p,P);function p(m){var S=P.call(this)||this;return S.center=[0,0],S.linkDistance=50,S.nodes=[],S.edges=[],S.onLayoutEnd=function(){},S.updateCfg(m),S}return p.prototype.getDefaultCfg=function(){return{center:[0,0],linkDistance:50}},p.prototype.execute=function(){var m=this,S=m.nodes,x=m.edges,g=x===void 0?[]:x,A=m.center;if(!S||S.length===0){m.onLayoutEnd&&m.onLayoutEnd();return}if(S.length===1){S[0].x=A[0],S[0].y=A[1],m.onLayoutEnd&&m.onLayoutEnd();return}var E=m.linkDistance,D=(0,w.getAdjMatrix)({nodes:S,edges:g},!1),F=(0,w.floydWarshall)(D);m.handleInfinity(F);var y=(0,w.scaleMatrix)(F,E);m.scaledDistances=y;var h=m.runMDS();return m.positions=h,h.forEach(function(Y,$){S[$].x=Y[0]+A[0],S[$].y=Y[1]+A[1]}),m.onLayoutEnd&&m.onLayoutEnd(),{nodes:S,edges:g}},p.prototype.runMDS=function(){var m=this,S=2,x=m.scaledDistances,g=k.Matrix.mul(k.Matrix.pow(x,2),-.5),A=g.mean("row"),E=g.mean("column"),D=g.mean();g.add(D).subRowVector(A).subColumnVector(E);var F=new k.SingularValueDecomposition(g),y=k.Matrix.sqrt(F.diagonalMatrix).diagonal();return F.leftSingularVectors.toJSON().map(function(h){return k.Matrix.mul([h],[y]).toJSON()[0].splice(0,S)})},p.prototype.handleInfinity=function(m){var S=-999999;m.forEach(function(x){x.forEach(function(g){g!==1/0&&S<g&&(S=g)})}),m.forEach(function(x,g){x.forEach(function(A,E){A===1/0&&(m[g][E]=S)})})},p.prototype.getType=function(){return"mds"},p}(T.Base);z.MDSLayout=L},847944:function(Ve,z,C){"use strict";var b=this&&this.__createBinding||(Object.create?function(w,T,L,P){P===void 0&&(P=L);var p=Object.getOwnPropertyDescriptor(T,L);(!p||("get"in p?!T.__esModule:p.writable||p.configurable))&&(p={enumerable:!0,get:function(){return T[L]}}),Object.defineProperty(w,P,p)}:function(w,T,L,P){P===void 0&&(P=L),w[P]=T[L]}),k=this&&this.__exportStar||function(w,T){for(var L in w)L!=="default"&&!Object.prototype.hasOwnProperty.call(T,L)&&b(T,w,L)};Object.defineProperty(z,"__esModule",{value:!0}),k(C(255974),z)},366082:function(Ve,z,C){"use strict";Object.defineProperty(z,"__esModule",{value:!0});var b=C(405237),k=function(){function w(T){this.distances=T.distances,this.dimension=T.dimension||2,this.linkDistance=T.linkDistance}return w.prototype.layout=function(){var T=this,L=T.dimension,P=T.distances,p=T.linkDistance;try{var m=b.Matrix.mul(b.Matrix.pow(P,2),-.5),S=m.mean("row"),x=m.mean("column"),g=m.mean();m.add(g).subRowVector(S).subColumnVector(x);var A=new b.SingularValueDecomposition(m),E=b.Matrix.sqrt(A.diagonalMatrix).diagonal();return A.leftSingularVectors.toJSON().map(function(Y){return b.Matrix.mul([Y],[E]).toJSON()[0].splice(0,L)})}catch(Y){for(var D=[],F=0;F<P.length;F++){var y=Math.random()*p,h=Math.random()*p;D.push([y,h])}return D}},w}();z.default=k},255974:function(Ve,z,C){"use strict";var b=this&&this.__extends||function(){var g=function(A,E){return g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(D,F){D.__proto__=F}||function(D,F){for(var y in F)Object.prototype.hasOwnProperty.call(F,y)&&(D[y]=F[y])},g(A,E)};return function(A,E){if(typeof E!="function"&&E!==null)throw new TypeError("Class extends value "+String(E)+" is not a constructor or null");g(A,E);function D(){this.constructor=A}A.prototype=E===null?Object.create(E):(D.prototype=E.prototype,new D)}}(),k=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}};Object.defineProperty(z,"__esModule",{value:!0}),z.RadialLayout=void 0;var w=C(449784),T=C(762329),L=k(C(366082)),P=k(C(706290));function p(g){for(var A=g.length,E=g[0].length,D=[],F=0;F<A;F++){for(var y=[],h=0;h<E;h++)g[F][h]!==0?y.push(1/(g[F][h]*g[F][h])):y.push(0);D.push(y)}return D}function m(g,A){var E=-1;return g.forEach(function(D,F){D.id===A&&(E=F)}),E}function S(g,A){return Math.sqrt((g[0]-A[0])*(g[0]-A[0])+(g[1]-A[1])*(g[1]-A[1]))}var x=function(g){b(A,g);function A(E){var D=g.call(this)||this;return D.maxIteration=1e3,D.focusNode=null,D.unitRadius=null,D.linkDistance=50,D.preventOverlap=!1,D.strictRadial=!0,D.maxPreventOverlapIteration=200,D.sortStrength=10,D.nodes=[],D.edges=[],D.updateCfg(E),D}return A.prototype.getDefaultCfg=function(){return{maxIteration:1e3,focusNode:null,unitRadius:null,linkDistance:50,preventOverlap:!1,nodeSize:void 0,nodeSpacing:void 0,strictRadial:!0,maxPreventOverlapIteration:200,sortBy:void 0,sortStrength:10}},A.prototype.execute=function(){var E=this,D=E.nodes,F=E.edges||[];if(!D||D.length===0){E.onLayoutEnd&&E.onLayoutEnd();return}!E.width&&typeof window!="undefined"&&(E.width=window.innerWidth),!E.height&&typeof window!="undefined"&&(E.height=window.innerHeight),E.center||(E.center=[E.width/2,E.height/2]);var y=E.center;if(D.length===1){D[0].x=y[0],D[0].y=y[1],E.onLayoutEnd&&E.onLayoutEnd();return}var h=E.linkDistance,Y=null;if((0,w.isString)(E.focusNode)){for(var $=!1,U=0;U<D.length;U++)D[U].id===E.focusNode&&(Y=D[U],E.focusNode=Y,$=!0,U=D.length);$||(Y=null)}else Y=E.focusNode;Y||(Y=D[0],E.focusNode=Y);var W=m(D,Y.id);W<0&&(W=0),E.focusIndex=W;var V=(0,w.getAdjMatrix)({nodes:D,edges:F},!1),H=(0,w.floydWarshall)(V),Q=E.maxToFocus(H,W);E.handleInfinity(H,W,Q+1),E.distances=H;var tt=H[W],rt=E.width||500,ct=E.height||500,ot=rt-y[0]>y[0]?y[0]:rt-y[0],xt=ct-y[1]>y[1]?y[1]:ct-y[1];ot===0&&(ot=rt/2),xt===0&&(xt=ct/2);var pt=xt>ot?ot:xt,Xt=Math.max.apply(Math,tt),Ct=[];tt.forEach(function(ue,ie){E.unitRadius||(E.unitRadius=pt/Xt),Ct[ie]=ue*E.unitRadius}),E.radii=Ct;var At=E.eIdealDisMatrix();E.eIdealDistances=At;var Z=p(At);E.weights=Z;var q=new L.default({linkDistance:h,distances:At}),bt=q.layout();bt.forEach(function(ue){(0,w.isNaN)(ue[0])&&(ue[0]=Math.random()*h),(0,w.isNaN)(ue[1])&&(ue[1]=Math.random()*h)}),E.positions=bt,bt.forEach(function(ue,ie){D[ie].x=ue[0]+y[0],D[ie].y=ue[1]+y[1]}),bt.forEach(function(ue){ue[0]-=bt[W][0],ue[1]-=bt[W][1]}),E.run();var _t=E.preventOverlap,nt=E.nodeSize,vt,It=E.strictRadial;if(_t){var Pt=E.nodeSpacing,Et;(0,w.isNumber)(Pt)?Et=function(){return Pt}:(0,w.isFunction)(Pt)?Et=Pt:Et=function(){return 0},nt?(0,w.isArray)(nt)?vt=function(ue){var ie=nt[0]>nt[1]?nt[0]:nt[1];return ie+Et(ue)}:vt=function(ue){return nt+Et(ue)}:vt=function(ue){if(ue.size){if((0,w.isArray)(ue.size)){var ie=ue.size[0]>ue.size[1]?ue.size[0]:ue.size[1];return ie+Et(ue)}if((0,w.isObject)(ue.size)){var ie=ue.size.width>ue.size.height?ue.size.width:ue.size.height;return ie+Et(ue)}return ue.size+Et(ue)}return 10+Et(ue)};var Nt={nodes:D,nodeSizeFunc:vt,adjMatrix:V,positions:bt,radii:Ct,height:ct,width:rt,strictRadial:It,focusID:W,iterations:E.maxPreventOverlapIteration||200,k:bt.length/4.5},$t=new P.default(Nt);bt=$t.layout()}return bt.forEach(function(ue,ie){D[ie].x=ue[0]+y[0],D[ie].y=ue[1]+y[1]}),E.onLayoutEnd&&E.onLayoutEnd(),{nodes:D,edges:F}},A.prototype.run=function(){for(var E=this,D=E.maxIteration,F=E.positions||[],y=E.weights||[],h=E.eIdealDistances||[],Y=E.radii||[],$=0;$<=D;$++){var U=$/D;E.oneIteration(U,F,Y,h,y)}},A.prototype.oneIteration=function(E,D,F,y,h){var Y=this,$=1-E,U=Y.focusIndex;D.forEach(function(W,V){var H=S(W,[0,0]),Q=H===0?0:1/H;if(V!==U){var tt=0,rt=0,ct=0;D.forEach(function(xt,pt){if(V!==pt){var Xt=S(W,xt),Ct=Xt===0?0:1/Xt,At=y[pt][V];ct+=h[V][pt],tt+=h[V][pt]*(xt[0]+At*(W[0]-xt[0])*Ct),rt+=h[V][pt]*(xt[1]+At*(W[1]-xt[1])*Ct)}});var ot=F[V]===0?0:1/F[V];ct*=$,ct+=E*ot*ot,tt*=$,tt+=E*ot*W[0]*Q,W[0]=tt/ct,rt*=$,rt+=E*ot*W[1]*Q,W[1]=rt/ct}})},A.prototype.eIdealDisMatrix=function(){var E=this,D=E.nodes;if(!D)return[];var F=E.distances,y=E.linkDistance,h=E.radii||[],Y=E.unitRadius||50,$=[];return F&&F.forEach(function(U,W){var V=[];U.forEach(function(H,Q){if(W===Q)V.push(0);else if(h[W]===h[Q])if(E.sortBy==="data")V.push(H*(Math.abs(W-Q)*E.sortStrength)/(h[W]/Y));else if(E.sortBy){var tt=D[W][E.sortBy]||0,rt=D[Q][E.sortBy]||0;(0,w.isString)(tt)&&(tt=tt.charCodeAt(0)),(0,w.isString)(rt)&&(rt=rt.charCodeAt(0)),V.push(H*(Math.abs(tt-rt)*E.sortStrength)/(h[W]/Y))}else V.push(H*y/(h[W]/Y));else{var ct=(y+Y)/2;V.push(H*ct)}}),$.push(V)}),$},A.prototype.handleInfinity=function(E,D,F){for(var y=E.length,h=0;h<y;h++)if(E[D][h]===1/0){E[D][h]=F,E[h][D]=F;for(var Y=0;Y<y;Y++)E[h][Y]!==1/0&&E[D][Y]===1/0&&(E[D][Y]=F+E[h][Y],E[Y][D]=F+E[h][Y])}for(var h=0;h<y;h++)if(h!==D){for(var Y=0;Y<y;Y++)if(E[h][Y]===1/0){var $=Math.abs(E[D][h]-E[D][Y]);$=$===0?1:$,E[h][Y]=$}}},A.prototype.maxToFocus=function(E,D){for(var F=0,y=0;y<E[D].length;y++)E[D][y]!==1/0&&(F=E[D][y]>F?E[D][y]:F);return F},A.prototype.getType=function(){return"radial"},A}(T.Base);z.RadialLayout=x},706290:function(Ve,z){"use strict";Object.defineProperty(z,"__esModule",{value:!0});var C=800,b=function(){function k(w){this.disp=[],this.positions=w.positions,this.adjMatrix=w.adjMatrix,this.focusID=w.focusID,this.radii=w.radii,this.iterations=w.iterations||10,this.height=w.height||10,this.width=w.width||10,this.speed=w.speed||100,this.gravity=w.gravity||10,this.nodeSizeFunc=w.nodeSizeFunc,this.k=w.k||5,this.strictRadial=w.strictRadial,this.nodes=w.nodes}return k.prototype.layout=function(){var w=this,T=w.positions,L=[],P=w.iterations,p=w.width/10;w.maxDisplace=p,w.disp=L;for(var m=0;m<P;m++)T.forEach(function(S,x){L[x]={x:0,y:0}}),w.getRepulsion(),w.updatePositions();return T},k.prototype.getRepulsion=function(){var w=this,T=w.positions,L=w.nodes,P=w.disp,p=w.k,m=w.radii||[];T.forEach(function(S,x){P[x]={x:0,y:0},T.forEach(function(g,A){if(x!==A&&m[x]===m[A]){var E=S[0]-g[0],D=S[1]-g[1],F=Math.sqrt(E*E+D*D);if(F===0){F=1;var y=x>A?1:-1;E=.01*y,D=.01*y}if(F<w.nodeSizeFunc(L[x])/2+w.nodeSizeFunc(L[A])/2){var h=p*p/F;P[x].x+=E/F*h,P[x].y+=D/F*h}}})})},k.prototype.updatePositions=function(){var w=this,T=w.positions,L=w.disp,P=w.speed,p=w.strictRadial,m=w.focusID,S=w.maxDisplace||w.width/10;p&&L.forEach(function(g,A){var E=T[A][0]-T[m][0],D=T[A][1]-T[m][1],F=Math.sqrt(E*E+D*D),y=D/F,h=-E/F,Y=Math.sqrt(g.x*g.x+g.y*g.y),$=Math.acos((y*g.x+h*g.y)/Y);$>Math.PI/2&&($-=Math.PI/2,y*=-1,h*=-1);var U=Math.cos($)*Y;g.x=y*U,g.y=h*U});var x=w.radii;T.forEach(function(g,A){if(A!==m){var E=Math.sqrt(L[A].x*L[A].x+L[A].y*L[A].y);if(E>0&&A!==m){var D=Math.min(S*(P/C),E);if(g[0]+=L[A].x/E*D,g[1]+=L[A].y/E*D,p){var F=g[0]-T[m][0],y=g[1]-T[m][1],h=Math.sqrt(F*F+y*y);F=F/h*x[A],y=y/h*x[A],g[0]=T[m][0]+F,g[1]=T[m][1]+y}}}})},k}();z.default=b},539711:function(Ve,z,C){"use strict";var b=this&&this.__extends||function(){var T=function(L,P){return T=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,m){p.__proto__=m}||function(p,m){for(var S in m)Object.prototype.hasOwnProperty.call(m,S)&&(p[S]=m[S])},T(L,P)};return function(L,P){if(typeof P!="function"&&P!==null)throw new TypeError("Class extends value "+String(P)+" is not a constructor or null");T(L,P);function p(){this.constructor=L}L.prototype=P===null?Object.create(P):(p.prototype=P.prototype,new p)}}();Object.defineProperty(z,"__esModule",{value:!0}),z.RandomLayout=void 0;var k=C(762329),w=function(T){b(L,T);function L(P){var p=T.call(this)||this;return p.center=[0,0],p.width=300,p.height=300,p.nodes=[],p.edges=[],p.onLayoutEnd=function(){},p.updateCfg(P),p}return L.prototype.getDefaultCfg=function(){return{center:[0,0],width:300,height:300}},L.prototype.execute=function(){var P=this,p=P.nodes,m=.9,S=P.center;return!P.width&&typeof window!="undefined"&&(P.width=window.innerWidth),!P.height&&typeof window!="undefined"&&(P.height=window.innerHeight),p&&p.forEach(function(x){x.x=(Math.random()-.5)*m*P.width+S[0],x.y=(Math.random()-.5)*m*P.height+S[1]}),P.onLayoutEnd&&P.onLayoutEnd(),{nodes:p,edges:this.edges}},L.prototype.getType=function(){return"random"},L}(k.Base);z.RandomLayout=w},932867:function(Ve,z){"use strict";Object.defineProperty(z,"__esModule",{value:!0})},695326:function(Ve,z,C){"use strict";var b=this&&this.__extends||function(){var m=function(S,x){return m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,A){g.__proto__=A}||function(g,A){for(var E in A)Object.prototype.hasOwnProperty.call(A,E)&&(g[E]=A[E])},m(S,x)};return function(S,x){if(typeof x!="function"&&x!==null)throw new TypeError("Class extends value "+String(x)+" is not a constructor or null");m(S,x);function g(){this.constructor=S}S.prototype=x===null?Object.create(x):(g.prototype=x.prototype,new g)}}();Object.defineProperty(z,"__esModule",{value:!0}),z.getLayoutByName=z.unRegisterLayout=z.registerLayout=void 0;var k=C(762329),w=C(449784),T=new Map,L=function(m,S){if(T.get(m)&&console.warn("The layout with the name ".concat(m," exists already, it will be overridden")),(0,w.isObject)(S)){var x=function(g){b(A,g);function A(E){var D=this,F;D=g.call(this)||this;var y=D,h={},Y=Object.assign({},y.getDefaultCfg(),((F=S.getDefaultCfg)===null||F===void 0?void 0:F.call(S))||{});return Object.assign(h,Y,S,E),Object.keys(h).forEach(function($){var U=h[$];y[$]=U}),D}return A}(k.Base);T.set(m,x)}else T.set(m,S);return T.get(m)};z.registerLayout=L;var P=function(m){T.has(m)&&T.delete(m)};z.unRegisterLayout=P;var p=function(m){return T.has(m)?T.get(m):null};z.getLayoutByName=p},185087:function(Ve,z){"use strict";Object.defineProperty(z,"__esModule",{value:!0}),z.isArray=void 0,z.isArray=Array.isArray},578732:function(Ve,z,C){"use strict";Object.defineProperty(z,"__esModule",{value:!0}),z.getFuncByUnknownType=z.getFunc=z.isFunction=void 0;var b=C(449784),k=C(330627),w=function(P){return typeof P=="function"};z.isFunction=w;var T=function(P,p,m){var S;return m?S=m:(0,k.isNumber)(P)?S=function(){return P}:S=function(){return p},S};z.getFunc=T;var L=function(P,p,m){return m===void 0&&(m=!0),!p&&p!==0?function(S){return S.size?(0,b.isArray)(S.size)?S.size[0]>S.size[1]?S.size[0]:S.size[1]:(0,b.isObject)(S.size)?S.size.width>S.size.height?S.size.width:S.size.height:S.size:P}:(0,z.isFunction)(p)?p:(0,k.isNumber)(p)?function(){return p}:(0,b.isArray)(p)?function(){if(m){var S=Math.max.apply(Math,p);return isNaN(S)?P:S}return p}:(0,b.isObject)(p)?function(){if(m){var S=Math.max(p.width,p.height);return isNaN(S)?P:S}return[p.width,p.height]}:function(){return P}};z.getFuncByUnknownType=L},248835:function(Ve,z,C){"use strict";Object.defineProperty(z,"__esModule",{value:!0}),z.arrayToTextureData=z.attributesToTextureData=z.buildTextureDataWithTwoEdgeAttr=z.buildTextureData=z.proccessToFunc=void 0;var b=C(449784),k=C(280628),w=function(m,S){var x;return m?(0,b.isNumber)(m)?x=function(){return m}:x=m:x=function(){return S||1},x};z.proccessToFunc=w;var T=function(m,S){var x=[],g=[],A={},E=0;for(E=0;E<m.length;E++){var D=m[E];A[D.id]=E,x.push(D.x),x.push(D.y),x.push(0),x.push(0),g.push([])}for(E=0;E<S.length;E++){var F=S[E],y=(0,k.getEdgeTerminal)(F,"source"),h=(0,k.getEdgeTerminal)(F,"target");!isNaN(A[y])&&!isNaN(A[h])&&(g[A[y]].push(A[h]),g[A[h]].push(A[y]))}var Y=0;for(E=0;E<m.length;E++){var $=x.length,U=g[E],W=U.length;x[E*4+2]=$,x[E*4+3]=W,Y=Math.max(Y,W);for(var V=0;V<W;++V){var H=U[V];x.push(+H)}}for(;x.length%4!==0;)x.push(0);return{maxEdgePerVetex:Y,array:new Float32Array(x)}};z.buildTextureData=T;var L=function(m,S,x,g){var A=[],E=[],D={},F=0;for(F=0;F<m.length;F++){var y=m[F];D[y.id]=F,A.push(y.x),A.push(y.y),A.push(0),A.push(0),E.push([])}for(F=0;F<S.length;F++){var h=S[F],Y=(0,k.getEdgeTerminal)(h,"source"),$=(0,k.getEdgeTerminal)(h,"target");E[D[Y]].push(D[$]),E[D[Y]].push(x(h)),E[D[Y]].push(g(h)),E[D[Y]].push(0),E[D[$]].push(D[Y]),E[D[$]].push(x(h)),E[D[$]].push(g(h)),E[D[$]].push(0)}var U=0;for(F=0;F<m.length;F++){var W=A.length,V=E[F],H=V.length;A[F*4+2]=W+1048576*H/4,A[F*4+3]=0,U=Math.max(U,H/4);for(var Q=0;Q<H;++Q){var tt=V[Q];A.push(+tt)}}for(;A.length%4!==0;)A.push(0);return{maxEdgePerVetex:U,array:new Float32Array(A)}};z.buildTextureDataWithTwoEdgeAttr=L;var P=function(m,S){var x=[],g=m.length,A={};return S.forEach(function(E){m.forEach(function(D,F){if(A[E[D]]===void 0&&(A[E[D]]=Object.keys(A).length),x.push(A[E[D]]),F===g-1)for(;x.length%4!==0;)x.push(0)})}),{array:new Float32Array(x),count:Object.keys(A).length}};z.attributesToTextureData=P;var p=function(m){for(var S=[],x=m.length,g=m[0].length,A=function(D){m.forEach(function(F,y){if(S.push(F[D]),y===x-1)for(;S.length%4!==0;)S.push(0)})},E=0;E<g;E++)A(E);return new Float32Array(S)};z.arrayToTextureData=p},449784:function(Ve,z,C){"use strict";var b=this&&this.__createBinding||(Object.create?function(w,T,L,P){P===void 0&&(P=L);var p=Object.getOwnPropertyDescriptor(T,L);(!p||("get"in p?!T.__esModule:p.writable||p.configurable))&&(p={enumerable:!0,get:function(){return T[L]}}),Object.defineProperty(w,P,p)}:function(w,T,L,P){P===void 0&&(P=L),w[P]=T[L]}),k=this&&this.__exportStar||function(w,T){for(var L in w)L!=="default"&&!Object.prototype.hasOwnProperty.call(T,L)&&b(T,w,L)};Object.defineProperty(z,"__esModule",{value:!0}),k(C(708055),z),k(C(185087),z),k(C(330627),z),k(C(280628),z),k(C(898130),z),k(C(578732),z)},280628:function(Ve,z,C){"use strict";Object.defineProperty(z,"__esModule",{value:!0}),z.getCoreNodeAndRelativeLeafNodes=z.getAvgNodePosition=z.getLayoutBBox=z.traverseTreeUp=z.scaleMatrix=z.getAdjMatrix=z.floydWarshall=z.getDegreeMap=z.getDegree=z.getEdgeTerminal=void 0;var b=C(185087),k=C(330627),w=C(898130),T=function(Y,$){var U=Y[$];return(0,w.isObject)(U)?U.cell:U};z.getEdgeTerminal=T;var L=function(Y,$,U){for(var W=[],V=0;V<Y;V++)W[V]={in:0,out:0,all:0};return U&&U.forEach(function(H){var Q=(0,z.getEdgeTerminal)(H,"source"),tt=(0,z.getEdgeTerminal)(H,"target");Q&&W[$[Q]]&&(W[$[Q]].out+=1,W[$[Q]].all+=1),tt&&W[$[tt]]&&(W[$[tt]].in+=1,W[$[tt]].all+=1)}),W};z.getDegree=L;var P=function(Y,$){var U={};return Y.forEach(function(W){U[W.id]={in:0,out:0,all:0}}),$&&$.forEach(function(W){var V=(0,z.getEdgeTerminal)(W,"source"),H=(0,z.getEdgeTerminal)(W,"target");V&&(U[V].out+=1,U[V].all+=1),H&&(U[H].in+=1,U[H].all+=1)}),U};z.getDegreeMap=P;var p=function(Y){for(var $=[],U=Y.length,W=0;W<U;W+=1){$[W]=[];for(var V=0;V<U;V+=1)W===V?$[W][V]=0:Y[W][V]===0||!Y[W][V]?$[W][V]=1/0:$[W][V]=Y[W][V]}for(var H=0;H<U;H+=1)for(var W=0;W<U;W+=1)for(var V=0;V<U;V+=1)$[W][V]>$[W][H]+$[H][V]&&($[W][V]=$[W][H]+$[H][V]);return $};z.floydWarshall=p;var m=function(Y,$){var U=Y.nodes,W=Y.edges,V=[],H={};if(!U)throw new Error("invalid nodes data!");return U&&U.forEach(function(Q,tt){H[Q.id]=tt;var rt=[];V.push(rt)}),W==null||W.forEach(function(Q){var tt=(0,z.getEdgeTerminal)(Q,"source"),rt=(0,z.getEdgeTerminal)(Q,"target"),ct=H[tt],ot=H[rt];ct===void 0||ot===void 0||(V[ct][ot]=1,$||(V[ot][ct]=1))}),V};z.getAdjMatrix=m;var S=function(Y,$){var U=[];return Y.forEach(function(W){var V=[];W.forEach(function(H){V.push(H*$)}),U.push(V)}),U};z.scaleMatrix=S;var x=function(Y,$){if(Y&&Y.children){for(var U=Y.children.length-1;U>=0;U--)if(!x(Y.children[U],$))return}return!!$(Y)},g=function(Y,$){typeof $=="function"&&x(Y,$)};z.traverseTreeUp=g;var A=function(Y){var $=1/0,U=1/0,W=-1/0,V=-1/0;return Y.forEach(function(H){var Q=H.size;(0,b.isArray)(Q)?Q.length===1&&(Q=[Q[0],Q[0]]):(0,k.isNumber)(Q)?Q=[Q,Q]:(Q===void 0||isNaN(Q))&&(Q=[30,30]);var tt=[Q[0]/2,Q[1]/2],rt=H.x-tt[0],ct=H.x+tt[0],ot=H.y-tt[1],xt=H.y+tt[1];$>rt&&($=rt),U>ot&&(U=ot),W<ct&&(W=ct),V<xt&&(V=xt)}),{minX:$,minY:U,maxX:W,maxY:V}};z.getLayoutBBox=A;var E=function(Y){var $={x:0,y:0};Y.forEach(function(W){$.x+=W.x||0,$.y+=W.y||0});var U=Y.length||1;return{x:$.x/U,y:$.y/U}};z.getAvgNodePosition=E;var D=function(Y,$,U){var W,V;return Y==="source"?((W=U==null?void 0:U.find(function(H){return H.target===$.id}))===null||W===void 0?void 0:W.source)||{}:((V=U==null?void 0:U.find(function(H){return H.source===$.id}))===null||V===void 0?void 0:V.target)||{}},F=function(Y,$,U){var W=[];switch(Y){case"source":W=U==null?void 0:U.filter(function(H){return H.source===$.id}).map(function(H){return H.target});break;case"target":W=U==null?void 0:U.filter(function(H){return H.target===$.id}).map(function(H){return H.source});break;case"both":W=U==null?void 0:U.filter(function(H){return H.source===$.id}).map(function(H){return H.target}).concat(U==null?void 0:U.filter(function(H){return H.target===$.id}).map(function(H){return H.source}));break;default:break}var V=new Set(W);return Array.from(V)},y=function(Y,$,U,W,V){var H=U[$]||"",Q=(W==null?void 0:W.filter(function(tt){return tt[$]===H}))||[];return Y==="leaf"&&(Q=Q.filter(function(tt){var rt,ct;return((rt=V[tt.id])===null||rt===void 0?void 0:rt.in)===0||((ct=V[tt.id])===null||ct===void 0?void 0:ct.out)===0})),Q},h=function(Y,$,U,W,V,H){var Q=V[$.id],tt=Q.in,rt=Q.out,ct=$,ot=[];tt===0?(ct=D("source",$,U),ot=F("both",ct,U).map(function(pt){return H[pt]})):rt===0&&(ct=D("target",$,U),ot=F("both",ct,U).map(function(pt){return H[pt]})),ot=ot.filter(function(pt){return V[pt.id]&&(V[pt.id].in===0||V[pt.id].out===0)});var xt=y(Y,W,$,ot,V);return{coreNode:ct,relativeLeafNodes:ot,sameTypeLeafNodes:xt}};z.getCoreNodeAndRelativeLeafNodes=h},330627:function(Ve,z){"use strict";Object.defineProperty(z,"__esModule",{value:!0}),z.toNumber=z.isNaN=z.isNumber=void 0;var C=function(w){return typeof w=="number"};z.isNumber=C;var b=function(w){return Number.isNaN(Number(w))};z.isNaN=b;var k=function(w){var T=parseFloat(w);return(0,z.isNaN)(T)?w:T};z.toNumber=k},898130:function(Ve,z){"use strict";var C=this&&this.__assign||function(){return C=Object.assign||function(w){for(var T,L=1,P=arguments.length;L<P;L++){T=arguments[L];for(var p in T)Object.prototype.hasOwnProperty.call(T,p)&&(w[p]=T[p])}return w},C.apply(this,arguments)};Object.defineProperty(z,"__esModule",{value:!0}),z.clone=z.isObject=void 0;var b=function(w){return w!==null&&typeof w=="object"};z.isObject=b;var k=function(w){if(w===null)return w;if(w instanceof Date)return new Date(w.getTime());if(w instanceof Array){var T=[];return w.forEach(function(P){T.push(P)}),T.map(function(P){return(0,z.clone)(P)})}if(typeof w=="object"&&Object.keys(w).length){var L=C({},w);return Object.keys(L).forEach(function(P){L[P]=(0,z.clone)(L[P])}),L}return w};z.clone=k},708055:function(Ve,z){"use strict";Object.defineProperty(z,"__esModule",{value:!0}),z.camelize=z.isString=void 0;var C=function(w){return typeof w=="string"};z.isString=C;var b=function(w){var T=Object.create(null);return function(L){var P=T[L];return P||(T[L]=w(L))}},k=/-(\w)/g;z.camelize=b(function(w){return w.replace(k,function(T,L){return L?L.toUpperCase():""})})},233446:function(Ve,z,C){"use strict";C.r(z),C.d(z,{Cache:function(){return ta},angleTo:function(){return Q},arcToCubic:function(){return be},assign:function(){return ur},augment:function(){return jr},clamp:function(){return ei},clearAnimationFrame:function(){return Fe},clone:function(){return mn},clonePath:function(){return rt},contains:function(){return kt},debounce:function(){return Qr},deepMix:function(){return _a},difference:function(){return J},direction:function(){return H},distanceSquareRoot:function(){return Tt},each:function(){return De},endsWith:function(){return $i},equalizeSegments:function(){return qt},every:function(){return ee},extend:function(){return Po},filter:function(){return dt},find:function(){return Dr},findIndex:function(){return jt},firstValue:function(){return Ie},fixedBase:function(){return Di},flatten:function(){return ze},flattenDeep:function(){return pr},forIn:function(){return ls},get:function(){return Rc},getDrawDirection:function(){return on},getPathArea:function(){return An},getPathBBox:function(){return tn},getPathBBoxTotalLength:function(){return _n},getPointAtLength:function(){return Wn},getRange:function(){return ea},getRotatedCurve:function(){return _r},getTotalLength:function(){return vn},getType:function(){return ps},getWrapBehavior:function(){return Dn},gradient:function(){return x},group:function(){return qr},groupBy:function(){return Nr},groupToMap:function(){return Sr},has:function(){return Ds},hasKey:function(){return Aa},hasValue:function(){return nr},head:function(){return ro},identity:function(){return sl},includes:function(){return kt},indexOf:function(){return Eo},isArguments:function(){return qs},isArray:function(){return Ft},isArrayLike:function(){return St},isBoolean:function(){return fu},isDate:function(){return Ls},isDecimal:function(){return Oa},isElement:function(){return ge},isEmpty:function(){return Fo},isEqual:function(){return fi},isEqualWith:function(){return Bi},isError:function(){return os},isEven:function(){return Mi},isFinite:function(){return _u},isFunction:function(){return it},isInteger:function(){return co},isMatch:function(){return Ke},isNegative:function(){return mo},isNil:function(){return M},isNull:function(){return bo},isNumber:function(){return ka},isNumberEqual:function(){return es},isObject:function(){return Bt},isObjectLike:function(){return cn},isOdd:function(){return ni},isPlainObject:function(){return lr},isPointInPolygon:function(){return Au},isPointInStroke:function(){return jn},isPolygonsIntersect:function(){return Gs},isPositive:function(){return fo},isPrototype:function(){return d},isRegExp:function(){return wt},isString:function(){return Ea},isType:function(){return mt},isUndefined:function(){return te},keys:function(){return Xe},last:function(){return go},lowerCase:function(){return pn},lowerFirst:function(){return qa},map:function(){return zs},mapValues:function(){return lu},max:function(){return en},maxBy:function(){return Ya},memoize:function(){return na},min:function(){return Fn},minBy:function(){return yo},mix:function(){return ur},mod:function(){return ji},noop:function(){return xf},normalizePath:function(){return Wt},number2color:function(){return di},omit:function(){return ol},parseRadius:function(){return ua},path2Absolute:function(){return ne},path2Curve:function(){return Ir},path2String:function(){return ot},pick:function(){return kc},pull:function(){return ba},pullAt:function(){return ti},reduce:function(){return Xi},remove:function(){return oo},requestAnimationFrame:function(){return Oe},reverseCurve:function(){return Br},rgb2arr:function(){return b},set:function(){return mf},size:function(){return du},some:function(){return Be},sortBy:function(){return Io},startsWith:function(){return Yo},substitute:function(){return Do},throttle:function(){return Bc},toArray:function(){return Xu},toCSSGradient:function(){return F},toDegree:function(){return Bo},toInteger:function(){return cs},toRGB:function(){return p},toRadian:function(){return fs},toString:function(){return gr},transform:function(){return V},union:function(){return uo},uniq:function(){return ii},uniqueId:function(){return Fc},upperCase:function(){return ks},upperFirst:function(){return Lo},values:function(){return Ge},valuesOfKey:function(){return Wo},vertical:function(){return tt},wrapBehavior:function(){return qn}});function b(lt){return[parseInt(lt.substr(1,2),16),parseInt(lt.substr(3,2),16),parseInt(lt.substr(5,2),16)]}function k(lt){var Lt=Math.round(lt).toString(16);return Lt.length===1?"0"+Lt:Lt}function w(lt){return"#"+k(lt[0])+k(lt[1])+k(lt[2])}var T=/rgba?\(([\s.,0-9]+)\)/;function L(){var lt=document.createElement("i");return lt.title="Web Colour Picker",lt.style.display="none",document.body.appendChild(lt),lt}var P;function p(lt){if(lt[0]==="#"&&lt.length===7)return lt;P||(P=L()),P.style.color=lt;var Lt=document.defaultView.getComputedStyle(P,"").getPropertyValue("color"),Vt=T.exec(Lt),le=Vt[1].split(/\s*,\s*/).map(function(Ae){return Number(Ae)});return Lt=w(le),Lt}function m(lt,Lt,Vt,le){return lt[le]+(Lt[le]-lt[le])*Vt}function S(lt,Lt){var Vt=isNaN(Number(Lt))||Lt<0?0:Lt>1?1:Number(Lt),le=lt.length-1,Ae=Math.floor(le*Vt),ir=le*Vt-Ae,cr=lt[Ae],Gr=Ae===le?cr:lt[Ae+1];return w([m(cr,Gr,ir,0),m(cr,Gr,ir,1),m(cr,Gr,ir,2)])}function x(lt){var Lt=typeof lt=="string"?lt.split("-"):lt,Vt=Lt.map(function(le){return b(le.indexOf("#")===-1?p(le):le)});return function(le){return S(Vt,le)}}var g=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,A=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,E=/[\d.]+:(#[^\s]+|[^)]+\))/gi;function D(lt){return/^[r,R,L,l]{1}[\s]*\(/.test(lt)}function F(lt){if(D(lt)){var Lt,Vt=void 0;if(lt[0]==="l"){var le=g.exec(lt),Ae=+le[1]+90;Vt=le[2],Lt="linear-gradient("+Ae+"deg, "}else if(lt[0]==="r"){Lt="radial-gradient(";var le=A.exec(lt);Vt=le[4]}var ir=Vt.match(E);return ir.forEach(function(cr,Gr){var gn=cr.split(":");Lt+=gn[1]+" "+Number(gn[0])*100+"%",Gr!==ir.length-1&&(Lt+=", ")}),Lt+=")",Lt}return lt}var y=C(935600),h=C(631437);function Y(lt,Lt,Vt){var le=[0,0,0,0,0,0,0,0,0];return y.fromTranslation(le,Vt),y.multiply(lt,le,Lt)}function $(lt,Lt,Vt){var le=[0,0,0,0,0,0,0,0,0];return y.fromRotation(le,Vt),y.multiply(lt,le,Lt)}function U(lt,Lt,Vt){var le=[0,0,0,0,0,0,0,0,0];return y.fromScaling(le,Vt),y.multiply(lt,le,Lt)}function W(lt,Lt,Vt){return y.multiply(lt,Vt,Lt)}function V(lt,Lt){for(var Vt=lt?[].concat(lt):[1,0,0,0,1,0,0,0,1],le=0,Ae=Lt.length;le<Ae;le++){var ir=Lt[le];switch(ir[0]){case"t":Y(Vt,Vt,[ir[1],ir[2]]);break;case"s":U(Vt,Vt,[ir[1],ir[2]]);break;case"r":$(Vt,Vt,ir[1]);break;case"m":W(Vt,Vt,ir[1]);break;default:break}}return Vt}function H(lt,Lt){return lt[0]*Lt[1]-Lt[0]*lt[1]}function Q(lt,Lt,Vt){var le=h.angle(lt,Lt),Ae=H(lt,Lt)>=0;return Vt?Ae?Math.PI*2-le:le:Ae?le:Math.PI*2-le}function tt(lt,Lt,Vt){return Vt?(lt[0]=Lt[1],lt[1]=-1*Lt[0]):(lt[0]=-1*Lt[1],lt[1]=Lt[0]),lt}function rt(lt){return lt.map(function(Lt){return Array.isArray(Lt)?[].concat(Lt):Lt})}function ct(lt,Lt){if(Lt==="off")return rt(lt);var Vt=typeof Lt=="number"&&Lt>=1?Math.pow(10,Lt):1;return lt.map(function(le){var Ae=le.slice(1).map(Number).map(function(ir){return Lt?Math.round(ir*Vt)/Vt:Math.round(ir)});return[le[0]].concat(Ae)})}function ot(lt,Lt){return Lt===void 0&&(Lt="off"),ct(lt,Lt).map(function(Vt){return Vt[0]+Vt.slice(1).join(" ")}).join("")}var xt=C(197582),pt={x1:0,y1:0,x2:0,y2:0,x:0,y:0,qx:null,qy:null};function Xt(lt,Lt,Vt){if(lt[Vt].length>7){lt[Vt].shift();for(var le=lt[Vt],Ae=Vt;le.length;)Lt[Vt]="A",lt.splice(Ae+=1,0,["C"].concat(le.splice(0,6)));lt.splice(Vt,1)}}var Ct={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0};function At(lt){return Array.isArray(lt)&&lt.every(function(Lt){var Vt=Lt[0].toLowerCase();return Ct[Vt]===Lt.length-1&&"achlmqstvz".includes(Vt)})}function Z(lt){return At(lt)&&lt.every(function(Lt){var Vt=Lt[0];return Vt===Vt.toUpperCase()})}function q(lt){return Z(lt)&&lt.every(function(Lt){var Vt=Lt[0];return"ACLMQZ".includes(Vt)})}function bt(lt){for(var Lt=lt.pathValue[lt.segmentStart],Vt=Lt.toLowerCase(),le=lt.data;le.length>=Ct[Vt]&&(Vt==="m"&&le.length>2?(lt.segments.push([Lt].concat(le.splice(0,2))),Vt="l",Lt=Lt==="m"?"l":"L"):lt.segments.push([Lt].concat(le.splice(0,Ct[Vt]))),!!Ct[Vt]););}function _t(lt){var Lt=lt.index,Vt=lt.pathValue,le=Vt.charCodeAt(Lt);if(le===48){lt.param=0,lt.index+=1;return}if(le===49){lt.param=1,lt.index+=1;return}lt.err='[path-util]: invalid Arc flag "'+Vt[Lt]+'", expecting 0 or 1 at index '+Lt}function nt(lt){return lt>=48&&lt<=57||lt===43||lt===45||lt===46}function vt(lt){return lt>=48&&lt<=57}function It(lt){var Lt=lt.max,Vt=lt.pathValue,le=lt.index,Ae=le,ir=!1,cr=!1,Gr=!1,gn=!1,yn;if(Ae>=Lt){lt.err="[path-util]: Invalid path value at index "+Ae+', "pathValue" is missing param';return}if(yn=Vt.charCodeAt(Ae),(yn===43||yn===45)&&(Ae+=1,yn=Vt.charCodeAt(Ae)),!vt(yn)&&yn!==46){lt.err="[path-util]: Invalid path value at index "+Ae+', "'+Vt[Ae]+'" is not a number';return}if(yn!==46){if(ir=yn===48,Ae+=1,yn=Vt.charCodeAt(Ae),ir&&Ae<Lt&&yn&&vt(yn)){lt.err="[path-util]: Invalid path value at index "+le+', "'+Vt[le]+'" illegal number';return}for(;Ae<Lt&&vt(Vt.charCodeAt(Ae));)Ae+=1,cr=!0;yn=Vt.charCodeAt(Ae)}if(yn===46){for(gn=!0,Ae+=1;vt(Vt.charCodeAt(Ae));)Ae+=1,Gr=!0;yn=Vt.charCodeAt(Ae)}if(yn===101||yn===69){if(gn&&!cr&&!Gr){lt.err="[path-util]: Invalid path value at index "+Ae+', "'+Vt[Ae]+'" invalid float exponent';return}if(Ae+=1,yn=Vt.charCodeAt(Ae),(yn===43||yn===45)&&(Ae+=1),Ae<Lt&&vt(Vt.charCodeAt(Ae)))for(;Ae<Lt&&vt(Vt.charCodeAt(Ae));)Ae+=1;else{lt.err="[path-util]: Invalid path value at index "+Ae+', "'+Vt[Ae]+'" invalid integer exponent';return}}lt.index=Ae,lt.param=+lt.pathValue.slice(le,Ae)}function Pt(lt){var Lt=[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279];return lt===10||lt===13||lt===8232||lt===8233||lt===32||lt===9||lt===11||lt===12||lt===160||lt>=5760&&Lt.includes(lt)}function Et(lt){for(var Lt=lt.pathValue,Vt=lt.max;lt.index<Vt&&Pt(Lt.charCodeAt(lt.index));)lt.index+=1}function Nt(lt){switch(lt|32){case 109:case 122:case 108:case 104:case 118:case 99:case 115:case 113:case 116:case 97:return!0;default:return!1}}function $t(lt){return(lt|32)===97}function ue(lt){var Lt=lt.max,Vt=lt.pathValue,le=lt.index,Ae=Vt.charCodeAt(le),ir=Ct[Vt[le].toLowerCase()];if(lt.segmentStart=le,!Nt(Ae)){lt.err='[path-util]: Invalid path value "'+Vt[le]+'" is not a path command';return}if(lt.index+=1,Et(lt),lt.data=[],!ir){bt(lt);return}for(;;){for(var cr=ir;cr>0;cr-=1){if($t(Ae)&&(cr===3||cr===4)?_t(lt):It(lt),lt.err.length)return;lt.data.push(lt.param),Et(lt),lt.index<Lt&&Vt.charCodeAt(lt.index)===44&&(lt.index+=1,Et(lt))}if(lt.index>=lt.max||!nt(Vt.charCodeAt(lt.index)))break}bt(lt)}var ie=function(){function lt(Lt){this.pathValue=Lt,this.segments=[],this.max=Lt.length,this.index=0,this.param=0,this.segmentStart=0,this.data=[],this.err=""}return lt}();function Dt(lt){if(At(lt))return rt(lt);var Lt=new ie(lt);for(Et(Lt);Lt.index<Lt.max&&!Lt.err.length;)ue(Lt);return Lt.err?Lt.err:Lt.segments}function ne(lt){if(Z(lt))return rt(lt);var Lt=Dt(lt),Vt=0,le=0,Ae=0,ir=0;return Lt.map(function(cr){var Gr=cr.slice(1).map(Number),gn=cr[0],yn=gn.toUpperCase();if(gn==="M")return Vt=Gr[0],le=Gr[1],Ae=Vt,ir=le,["M",Vt,le];var Vn;if(gn!==yn)switch(yn){case"A":Vn=[yn,Gr[0],Gr[1],Gr[2],Gr[3],Gr[4],Gr[5]+Vt,Gr[6]+le];break;case"V":Vn=[yn,Gr[0]+le];break;case"H":Vn=[yn,Gr[0]+Vt];break;default:{var aa=Gr.map(function(La,Qa){return La+(Qa%2?le:Vt)});Vn=[yn].concat(aa)}}else Vn=[yn].concat(Gr);var Zn=Vn.length;switch(yn){case"Z":Vt=Ae,le=ir;break;case"H":Vt=Vn[1];break;case"V":le=Vn[1];break;default:Vt=Vn[Zn-2],le=Vn[Zn-1],yn==="M"&&(Ae=Vt,ir=le)}return Vn})}function pe(lt,Lt){var Vt=lt[0],le=Lt.x1,Ae=Lt.y1,ir=Lt.x2,cr=Lt.y2,Gr=lt.slice(1).map(Number),gn=lt;if("TQ".includes(Vt)||(Lt.qx=null,Lt.qy=null),Vt==="H")gn=["L",lt[1],Ae];else if(Vt==="V")gn=["L",le,lt[1]];else if(Vt==="S"){var yn=le*2-ir,Vn=Ae*2-cr;Lt.x1=yn,Lt.y1=Vn,gn=["C",yn,Vn].concat(Gr)}else if(Vt==="T"){var aa=le*2-Lt.qx,Zn=Ae*2-Lt.qy;Lt.qx=aa,Lt.qy=Zn,gn=["Q",aa,Zn].concat(Gr)}else if(Vt==="Q"){var La=Gr[0],Qa=Gr[1];Lt.qx=La,Lt.qy=Qa}return gn}function Wt(lt){if(q(lt))return rt(lt);for(var Lt=ne(lt),Vt=(0,xt.__assign)({},pt),le=0;le<Lt.length;le+=1){Lt[le]=pe(Lt[le],Vt);var Ae=Lt[le],ir=Ae.length;Vt.x1=+Ae[ir-2],Vt.y1=+Ae[ir-1],Vt.x2=+Ae[ir-4]||Vt.x1,Vt.y2=+Ae[ir-3]||Vt.y1}return Lt}function ae(lt){return q(lt)&&lt.every(function(Lt){var Vt=Lt[0];return"MC".includes(Vt)})}function Se(lt,Lt,Vt){var le=lt*Math.cos(Vt)-Lt*Math.sin(Vt),Ae=lt*Math.sin(Vt)+Lt*Math.cos(Vt);return{x:le,y:Ae}}function be(lt,Lt,Vt,le,Ae,ir,cr,Gr,gn,yn){var Vn=lt,aa=Lt,Zn=Vt,La=le,Qa=Gr,Ra=gn,Ca=Math.PI*120/180,Ga=Math.PI/180*(+Ae||0),va=[],Ka,Ua,ma,ai,xi;if(yn)Ua=yn[0],ma=yn[1],ai=yn[2],xi=yn[3];else{Ka=Se(Vn,aa,-Ga),Vn=Ka.x,aa=Ka.y,Ka=Se(Qa,Ra,-Ga),Qa=Ka.x,Ra=Ka.y;var Ji=(Vn-Qa)/2,_i=(aa-Ra)/2,hi=Ji*Ji/(Zn*Zn)+_i*_i/(La*La);hi>1&&(hi=Math.sqrt(hi),Zn*=hi,La*=hi);var lo=Zn*Zn,wo=La*La,ho=(ir===cr?-1:1)*Math.sqrt(Math.abs((lo*wo-lo*_i*_i-wo*Ji*Ji)/(lo*_i*_i+wo*Ji*Ji)));ai=ho*Zn*_i/La+(Vn+Qa)/2,xi=ho*-La*Ji/Zn+(aa+Ra)/2,Ua=Math.asin(((aa-xi)/La*Math.pow(10,9)>>0)/Math.pow(10,9)),ma=Math.asin(((Ra-xi)/La*Math.pow(10,9)>>0)/Math.pow(10,9)),Ua=Vn<ai?Math.PI-Ua:Ua,ma=Qa<ai?Math.PI-ma:ma,Ua<0&&(Ua=Math.PI*2+Ua),ma<0&&(ma=Math.PI*2+ma),cr&&Ua>ma&&(Ua-=Math.PI*2),!cr&&ma>Ua&&(ma-=Math.PI*2)}var Us=ma-Ua;if(Math.abs(Us)>Ca){var iu=ma,Ps=Qa,As=Ra;ma=Ua+Ca*(cr&&ma>Ua?1:-1),Qa=ai+Zn*Math.cos(ma),Ra=xi+La*Math.sin(ma),va=be(Qa,Ra,Zn,La,Ae,0,cr,Ps,As,[ma,iu,ai,xi])}Us=ma-Ua;var Vu=Math.cos(Ua),Js=Math.sin(Ua),Wc=Math.cos(ma),ul=Math.sin(ma),Hu=Math.tan(Us/4),uc=4/3*Zn*Hu,wf=4/3*La*Hu,Iu=[Vn,aa],hu=[Vn+uc*Js,aa-wf*Vu],Sf=[Qa+uc*ul,Ra-wf*Wc],Yc=[Qa,Ra];if(hu[0]=2*Iu[0]-hu[0],hu[1]=2*Iu[1]-hu[1],yn)return hu.concat(Sf,Yc,va);va=hu.concat(Sf,Yc,va);for(var Xc=[],Ns=0,Ou=va.length;Ns<Ou;Ns+=1)Xc[Ns]=Ns%2?Se(va[Ns-1],va[Ns],Ga).y:Se(va[Ns],va[Ns+1],Ga).x;return Xc}function Qt(lt,Lt,Vt,le,Ae,ir){var cr=.3333333333333333,Gr=2/3;return[cr*lt+Gr*Vt,cr*Lt+Gr*le,cr*Ae+Gr*Vt,cr*ir+Gr*le,Ae,ir]}function we(lt,Lt,Vt){var le=lt[0],Ae=lt[1],ir=Lt[0],cr=Lt[1];return[le+(ir-le)*Vt,Ae+(cr-Ae)*Vt]}function Tt(lt,Lt){return Math.sqrt((lt[0]-Lt[0])*(lt[0]-Lt[0])+(lt[1]-Lt[1])*(lt[1]-Lt[1]))}function Le(lt,Lt,Vt,le,Ae){var ir=Tt([lt,Lt],[Vt,le]),cr={x:0,y:0};if(typeof Ae=="number")if(Ae<=0)cr={x:lt,y:Lt};else if(Ae>=ir)cr={x:Vt,y:le};else{var Gr=we([lt,Lt],[Vt,le],Ae/ir),gn=Gr[0],yn=Gr[1];cr={x:gn,y:yn}}return{length:ir,point:cr,min:{x:Math.min(lt,Vt),y:Math.min(Lt,le)},max:{x:Math.max(lt,Vt),y:Math.max(Lt,le)}}}function Mr(lt,Lt,Vt,le){var Ae=.5,ir=[lt,Lt],cr=[Vt,le],Gr=we(ir,cr,Ae),gn=we(cr,Gr,Ae),yn=we(Gr,gn,Ae),Vn=we(gn,yn,Ae),aa=we(yn,Vn,Ae),Zn=Le(ir[0],ir[1],Gr[0],Gr[1],yn[0]).point,La=Le(aa[0],aa[1],Vn[0],Vn[1],gn[0]).point;return[Zn.x,Zn.y,La.x,La.y,Vt,le]}function Ar(lt,Lt){var Vt=lt[0],le=lt.slice(1).map(Number),Ae=le[0],ir=le[1],cr,Gr=Lt.x1,gn=Lt.y1,yn=Lt.x,Vn=Lt.y;switch("TQ".includes(Vt)||(Lt.qx=null,Lt.qy=null),Vt){case"M":return Lt.x=Ae,Lt.y=ir,lt;case"A":return cr=[Gr,gn].concat(le),["C"].concat(be(cr[0],cr[1],cr[2],cr[3],cr[4],cr[5],cr[6],cr[7],cr[8],cr[9]));case"Q":return Lt.qx=Ae,Lt.qy=ir,cr=[Gr,gn].concat(le),["C"].concat(Qt(cr[0],cr[1],cr[2],cr[3],cr[4],cr[5]));case"L":return["C"].concat(Mr(Gr,gn,Ae,ir));case"Z":return Gr===yn&&gn===Vn?["C",Gr,gn,yn,Vn,yn,Vn]:["C"].concat(Mr(Gr,gn,yn,Vn));default:}return lt}function Ir(lt,Lt){if(Lt===void 0&&(Lt=!1),ae(lt)){var Vt=rt(lt);return Lt?[Vt,[]]:Vt}for(var le=Wt(lt),Ae=(0,xt.__assign)({},pt),ir=[],cr="",Gr=le.length,gn,yn,Vn=[],aa=0;aa<Gr;aa+=1){le[aa]&&(cr=le[aa][0]),ir[aa]=cr;var Zn=Ar(le[aa],Ae);le[aa]=Zn,Xt(le,ir,aa),Gr=le.length,cr==="Z"&&Vn.push(aa),gn=le[aa],yn=gn.length,Ae.x1=+gn[yn-2],Ae.y1=+gn[yn-1],Ae.x2=+gn[yn-4]||Ae.x1,Ae.y2=+gn[yn-3]||Ae.y1}return Lt?[le,Vn]:le}function Br(lt){var Lt=lt.slice(1).map(function(Vt,le,Ae){return le?Ae[le-1].slice(-2).concat(Vt.slice(1)):lt[0].slice(1).concat(Vt.slice(1))}).map(function(Vt){return Vt.map(function(le,Ae){return Vt[Vt.length-Ae-2*(1-Ae%2)]})}).reverse();return[["M"].concat(Lt[0].slice(0,2))].concat(Lt.map(function(Vt){return["C"].concat(Vt.slice(2))}))}function dn(lt,Lt){var Vt=lt.x,le=lt.y,Ae=Lt.x,ir=Lt.y,cr=Vt*Ae+le*ir,Gr=Math.sqrt((Math.pow(Vt,2)+Math.pow(le,2))*(Math.pow(Ae,2)+Math.pow(ir,2))),gn=Vt*ir-le*Ae<0?-1:1,yn=gn*Math.acos(cr/Gr);return yn}function an(lt,Lt,Vt,le,Ae,ir,cr,Gr,gn,yn){var Vn=Math.abs,aa=Math.sin,Zn=Math.cos,La=Math.sqrt,Qa=Math.PI,Ra=Vn(Vt),Ca=Vn(le),Ga=(Ae%360+360)%360,va=Ga*(Qa/180);if(lt===Gr&&Lt===gn)return{x:lt,y:Lt};if(Ra===0||Ca===0)return Le(lt,Lt,Gr,gn,yn).point;var Ka=(lt-Gr)/2,Ua=(Lt-gn)/2,ma={x:Zn(va)*Ka+aa(va)*Ua,y:-aa(va)*Ka+Zn(va)*Ua},ai=Math.pow(ma.x,2)/Math.pow(Ra,2)+Math.pow(ma.y,2)/Math.pow(Ca,2);ai>1&&(Ra*=La(ai),Ca*=La(ai));var xi=Math.pow(Ra,2)*Math.pow(Ca,2)-Math.pow(Ra,2)*Math.pow(ma.y,2)-Math.pow(Ca,2)*Math.pow(ma.x,2),Ji=Math.pow(Ra,2)*Math.pow(ma.y,2)+Math.pow(Ca,2)*Math.pow(ma.x,2),_i=xi/Ji;_i=_i<0?0:_i;var hi=(ir!==cr?1:-1)*La(_i),lo={x:hi*(Ra*ma.y/Ca),y:hi*(-(Ca*ma.x)/Ra)},wo={x:Zn(va)*lo.x-aa(va)*lo.y+(lt+Gr)/2,y:aa(va)*lo.x+Zn(va)*lo.y+(Lt+gn)/2},ho={x:(ma.x-lo.x)/Ra,y:(ma.y-lo.y)/Ca},Us=dn({x:1,y:0},ho),iu={x:(-ma.x-lo.x)/Ra,y:(-ma.y-lo.y)/Ca},Ps=dn(ho,iu);!cr&&Ps>0?Ps-=2*Qa:cr&&Ps<0&&(Ps+=2*Qa),Ps%=2*Qa;var As=Us+Ps*yn,Vu=Ra*Zn(As),Js=Ca*aa(As),Wc={x:Zn(va)*Vu-aa(va)*Js+wo.x,y:aa(va)*Vu+Zn(va)*Js+wo.y};return Wc}function Ln(lt,Lt,Vt,le,Ae,ir,cr,Gr,gn,yn,Vn){var aa,Zn=Vn.bbox,La=Zn===void 0?!0:Zn,Qa=Vn.length,Ra=Qa===void 0?!0:Qa,Ca=Vn.sampleSize,Ga=Ca===void 0?30:Ca,va=typeof yn=="number",Ka=lt,Ua=Lt,ma=0,ai=[Ka,Ua,ma],xi=[Ka,Ua],Ji=0,_i={x:0,y:0},hi=[{x:Ka,y:Ua}];va&&yn<=0&&(_i={x:Ka,y:Ua});for(var lo=0;lo<=Ga;lo+=1){if(Ji=lo/Ga,aa=an(lt,Lt,Vt,le,Ae,ir,cr,Gr,gn,Ji),Ka=aa.x,Ua=aa.y,La&&hi.push({x:Ka,y:Ua}),Ra&&(ma+=Tt(xi,[Ka,Ua])),xi=[Ka,Ua],va&&ma>=yn&&yn>ai[2]){var wo=(ma-yn)/(ma-ai[2]);_i={x:xi[0]*(1-wo)+ai[0]*wo,y:xi[1]*(1-wo)+ai[1]*wo}}ai=[Ka,Ua,ma]}return va&&yn>=ma&&(_i={x:Gr,y:gn}),{length:ma,point:_i,min:{x:Math.min.apply(null,hi.map(function(ho){return ho.x})),y:Math.min.apply(null,hi.map(function(ho){return ho.y}))},max:{x:Math.max.apply(null,hi.map(function(ho){return ho.x})),y:Math.max.apply(null,hi.map(function(ho){return ho.y}))}}}function Un(lt,Lt,Vt,le,Ae,ir,cr,Gr,gn){var yn=1-gn;return{x:Math.pow(yn,3)*lt+3*Math.pow(yn,2)*gn*Vt+3*yn*Math.pow(gn,2)*Ae+Math.pow(gn,3)*cr,y:Math.pow(yn,3)*Lt+3*Math.pow(yn,2)*gn*le+3*yn*Math.pow(gn,2)*ir+Math.pow(gn,3)*Gr}}function Yn(lt,Lt,Vt,le,Ae,ir,cr,Gr,gn,yn){var Vn,aa=yn.bbox,Zn=aa===void 0?!0:aa,La=yn.length,Qa=La===void 0?!0:La,Ra=yn.sampleSize,Ca=Ra===void 0?10:Ra,Ga=typeof gn=="number",va=lt,Ka=Lt,Ua=0,ma=[va,Ka,Ua],ai=[va,Ka],xi=0,Ji={x:0,y:0},_i=[{x:va,y:Ka}];Ga&&gn<=0&&(Ji={x:va,y:Ka});for(var hi=0;hi<=Ca;hi+=1){if(xi=hi/Ca,Vn=Un(lt,Lt,Vt,le,Ae,ir,cr,Gr,xi),va=Vn.x,Ka=Vn.y,Zn&&_i.push({x:va,y:Ka}),Qa&&(Ua+=Tt(ai,[va,Ka])),ai=[va,Ka],Ga&&Ua>=gn&&gn>ma[2]){var lo=(Ua-gn)/(Ua-ma[2]);Ji={x:ai[0]*(1-lo)+ma[0]*lo,y:ai[1]*(1-lo)+ma[1]*lo}}ma=[va,Ka,Ua]}return Ga&&gn>=Ua&&(Ji={x:cr,y:Gr}),{length:Ua,point:Ji,min:{x:Math.min.apply(null,_i.map(function(wo){return wo.x})),y:Math.min.apply(null,_i.map(function(wo){return wo.y}))},max:{x:Math.max.apply(null,_i.map(function(wo){return wo.x})),y:Math.max.apply(null,_i.map(function(wo){return wo.y}))}}}function xr(lt,Lt,Vt,le,Ae,ir,cr){var Gr=1-cr;return{x:Math.pow(Gr,2)*lt+2*Gr*cr*Vt+Math.pow(cr,2)*Ae,y:Math.pow(Gr,2)*Lt+2*Gr*cr*le+Math.pow(cr,2)*ir}}function qe(lt,Lt,Vt,le,Ae,ir,cr,Gr){var gn,yn=Gr.bbox,Vn=yn===void 0?!0:yn,aa=Gr.length,Zn=aa===void 0?!0:aa,La=Gr.sampleSize,Qa=La===void 0?10:La,Ra=typeof cr=="number",Ca=lt,Ga=Lt,va=0,Ka=[Ca,Ga,va],Ua=[Ca,Ga],ma=0,ai={x:0,y:0},xi=[{x:Ca,y:Ga}];Ra&&cr<=0&&(ai={x:Ca,y:Ga});for(var Ji=0;Ji<=Qa;Ji+=1){if(ma=Ji/Qa,gn=xr(lt,Lt,Vt,le,Ae,ir,ma),Ca=gn.x,Ga=gn.y,Vn&&xi.push({x:Ca,y:Ga}),Zn&&(va+=Tt(Ua,[Ca,Ga])),Ua=[Ca,Ga],Ra&&va>=cr&&cr>Ka[2]){var _i=(va-cr)/(va-Ka[2]);ai={x:Ua[0]*(1-_i)+Ka[0]*_i,y:Ua[1]*(1-_i)+Ka[1]*_i}}Ka=[Ca,Ga,va]}return Ra&&cr>=va&&(ai={x:Ae,y:ir}),{length:va,point:ai,min:{x:Math.min.apply(null,xi.map(function(hi){return hi.x})),y:Math.min.apply(null,xi.map(function(hi){return hi.y}))},max:{x:Math.max.apply(null,xi.map(function(hi){return hi.x})),y:Math.max.apply(null,xi.map(function(hi){return hi.y}))}}}function Cr(lt,Lt,Vt){for(var le,Ae,ir,cr,Gr,gn,yn=Wt(lt),Vn=typeof Lt=="number",aa,Zn=[],La,Qa=0,Ra=0,Ca=0,Ga=0,va,Ka=[],Ua=[],ma=0,ai={x:0,y:0},xi=ai,Ji=ai,_i=ai,hi=0,lo=0,wo=yn.length;lo<wo;lo+=1)va=yn[lo],La=va[0],aa=La==="M",Zn=aa?Zn:[Qa,Ra].concat(va.slice(1)),aa?(Ca=va[1],Ga=va[2],ai={x:Ca,y:Ga},xi=ai,ma=0,Vn&&Lt<.001&&(_i=ai)):La==="L"?(le=Le(Zn[0],Zn[1],Zn[2],Zn[3],(Lt||0)-hi),ma=le.length,ai=le.min,xi=le.max,Ji=le.point):La==="A"?(Ae=Ln(Zn[0],Zn[1],Zn[2],Zn[3],Zn[4],Zn[5],Zn[6],Zn[7],Zn[8],(Lt||0)-hi,Vt||{}),ma=Ae.length,ai=Ae.min,xi=Ae.max,Ji=Ae.point):La==="C"?(ir=Yn(Zn[0],Zn[1],Zn[2],Zn[3],Zn[4],Zn[5],Zn[6],Zn[7],(Lt||0)-hi,Vt||{}),ma=ir.length,ai=ir.min,xi=ir.max,Ji=ir.point):La==="Q"?(cr=qe(Zn[0],Zn[1],Zn[2],Zn[3],Zn[4],Zn[5],(Lt||0)-hi,Vt||{}),ma=cr.length,ai=cr.min,xi=cr.max,Ji=cr.point):La==="Z"&&(Zn=[Qa,Ra,Ca,Ga],Gr=Le(Zn[0],Zn[1],Zn[2],Zn[3],(Lt||0)-hi),ma=Gr.length,ai=Gr.min,xi=Gr.max,Ji=Gr.point),Vn&&hi<Lt&&hi+ma>=Lt&&(_i=Ji),Ua.push(xi),Ka.push(ai),hi+=ma,gn=La!=="Z"?va.slice(-2):[Ca,Ga],Qa=gn[0],Ra=gn[1];return Vn&&Lt>=hi&&(_i={x:Qa,y:Ra}),{length:hi,point:_i,min:{x:Math.min.apply(null,Ka.map(function(ho){return ho.x})),y:Math.min.apply(null,Ka.map(function(ho){return ho.y}))},max:{x:Math.max.apply(null,Ua.map(function(ho){return ho.x})),y:Math.max.apply(null,Ua.map(function(ho){return ho.y}))}}}function tn(lt,Lt){if(!lt)return{x:0,y:0,width:0,height:0,x2:0,y2:0,cx:0,cy:0,cz:0};var Vt=Cr(lt,void 0,(0,xt.__assign)((0,xt.__assign)({},Lt),{length:!1})),le=Vt.min,Ae=le.x,ir=le.y,cr=Vt.max,Gr=cr.x,gn=cr.y,yn=Gr-Ae,Vn=gn-ir;return{width:yn,height:Vn,x:Ae,y:ir,x2:Gr,y2:gn,cx:Ae+yn/2,cy:ir+Vn/2,cz:Math.max(yn,Vn)+Math.min(yn,Vn)/2}}function vn(lt,Lt){return Cr(lt,void 0,(0,xt.__assign)((0,xt.__assign)({},Lt),{bbox:!1,length:!0})).length}function _n(lt,Lt){if(!lt)return{length:0,x:0,y:0,width:0,height:0,x2:0,y2:0,cx:0,cy:0,cz:0};var Vt=Cr(lt,void 0,(0,xt.__assign)((0,xt.__assign)({},Lt),{bbox:!0,length:!0})),le=Vt.length,Ae=Vt.min,ir=Ae.x,cr=Ae.y,Gr=Vt.max,gn=Gr.x,yn=Gr.y,Vn=gn-ir,aa=yn-cr;return{length:le,width:Vn,height:aa,x:ir,y:cr,x2:gn,y2:yn,cx:ir+Vn/2,cy:cr+aa/2,cz:Math.max(Vn,aa)+Math.min(Vn,aa)/2}}function Pn(lt){var Lt=lt.length,Vt=Lt-1;return lt.map(function(le,Ae){return lt.map(function(ir,cr){var Gr=Ae+cr,gn;return cr===0||lt[Gr]&&lt[Gr][0]==="M"?(gn=lt[Gr],["M"].concat(gn.slice(-2))):(Gr>=Lt&&(Gr-=Vt),lt[Gr])})})}function _r(lt,Lt){var Vt=lt.length-1,le=[],Ae=0,ir=0,cr=Pn(lt);return cr.forEach(function(Gr,gn){lt.slice(1).forEach(function(yn,Vn){ir+=Tt(lt[(gn+Vn)%Vt].slice(-2),Lt[Vn%Vt].slice(-2))}),le[gn]=ir,ir=0}),Ae=le.indexOf(Math.min.apply(null,le)),cr[Ae]}function un(lt,Lt,Vt,le,Ae,ir,cr,Gr){return 3*((Gr-Lt)*(Vt+Ae)-(cr-lt)*(le+ir)+le*(lt-Ae)-Vt*(Lt-ir)+Gr*(Ae+lt/3)-cr*(ir+Lt/3))/20}function An(lt){var Lt=0,Vt=0,le=0;return Ir(lt).map(function(Ae){var ir;switch(Ae[0]){case"M":return Lt=Ae[1],Vt=Ae[2],0;default:var cr=Ae.slice(1),Gr=cr[0],gn=cr[1],yn=cr[2],Vn=cr[3],aa=cr[4],Zn=cr[5];return le=un(Lt,Vt,Gr,gn,yn,Vn,aa,Zn),ir=Ae.slice(-2),Lt=ir[0],Vt=ir[1],le}}).reduce(function(Ae,ir){return Ae+ir},0)}function on(lt){return An(lt)>=0}function Wn(lt,Lt,Vt){return Cr(lt,Lt,(0,xt.__assign)((0,xt.__assign)({},Vt),{bbox:!1,length:!0})).point}function Cn(lt,Lt){var Vt=Dt(lt);if(typeof Vt=="string")throw TypeError(Vt);var le=Vt.slice(),Ae=vn(le),ir=le.length-1,cr=0,Gr=0,gn=Vt[0],yn=gn.slice(-2),Vn=yn[0],aa=yn[1],Zn={x:Vn,y:aa};if(ir<=0||!Lt||!Number.isFinite(Lt))return{segment:gn,index:0,length:Gr,point:Zn,lengthAtSegment:cr};if(Lt>=Ae)return le=Vt.slice(0,-1),cr=vn(le),Gr=Ae-cr,{segment:Vt[ir],index:ir,length:Gr,lengthAtSegment:cr};for(var La=[];ir>0;)gn=le[ir],le=le.slice(0,-1),cr=vn(le),Gr=Ae-cr,Ae=cr,La.push({segment:gn,index:ir,length:Gr,lengthAtSegment:cr}),ir-=1;return La.find(function(Qa){var Ra=Qa.lengthAtSegment;return Ra<=Lt})}function On(lt,Lt){for(var Vt=Dt(lt),le=Wt(Vt),Ae=vn(Vt),ir=function(ma){var ai=ma.x-Lt.x,xi=ma.y-Lt.y;return ai*ai+xi*xi},cr=8,Gr,gn=0,yn,Vn=0,aa=1/0,Zn=0;Zn<=Ae;Zn+=cr)Gr=Wn(le,Zn),gn=ir(Gr),gn<aa&&(yn=Gr,Vn=Zn,aa=gn);cr/=2;for(var La,Qa,Ra=0,Ca=0,Ga=0,va=0;cr>.5;)Ra=Vn-cr,La=Wn(le,Ra),Ga=ir(La),Ca=Vn+cr,Qa=Wn(le,Ca),va=ir(Qa),Ra>=0&&Ga<aa?(yn=La,Vn=Ra,aa=Ga):Ca<=Ae&&va<aa?(yn=Qa,Vn=Ca,aa=va):cr/=2;var Ka=Cn(Vt,Vn),Ua=Math.sqrt(aa);return{closest:yn,distance:Ua,segment:Ka}}function jn(lt,Lt){var Vt=On(lt,Lt).distance;return Math.abs(Vt)<.001}function at(lt,Lt){Lt===void 0&&(Lt=.5);var Vt=lt.slice(0,2),le=lt.slice(2,4),Ae=lt.slice(4,6),ir=lt.slice(6,8),cr=we(Vt,le,Lt),Gr=we(le,Ae,Lt),gn=we(Ae,ir,Lt),yn=we(cr,Gr,Lt),Vn=we(Gr,gn,Lt),aa=we(yn,Vn,Lt);return[["C"].concat(cr,yn,aa),["C"].concat(Vn,gn,ir)]}function Ze(lt){return lt.map(function(Lt,Vt,le){var Ae=Vt&&le[Vt-1].slice(-2).concat(Lt.slice(1)),ir=Vt?Yn(Ae[0],Ae[1],Ae[2],Ae[3],Ae[4],Ae[5],Ae[6],Ae[7],Ae[8],{bbox:!1}).length:0,cr;return Vt?cr=ir?at(Ae):[Lt,Lt]:cr=[Lt],{s:Lt,ss:cr,l:ir}})}function qt(lt,Lt,Vt){var le=Ze(lt),Ae=Ze(Lt),ir=le.length,cr=Ae.length,Gr=le.filter(function(Ca){return Ca.l}).length,gn=Ae.filter(function(Ca){return Ca.l}).length,yn=le.filter(function(Ca){return Ca.l}).reduce(function(Ca,Ga){var va=Ga.l;return Ca+va},0)/Gr||0,Vn=Ae.filter(function(Ca){return Ca.l}).reduce(function(Ca,Ga){var va=Ga.l;return Ca+va},0)/gn||0,aa=Vt||Math.max(ir,cr),Zn=[yn,Vn],La=[aa-ir,aa-cr],Qa=0,Ra=[le,Ae].map(function(Ca,Ga){return Ca.l===aa?Ca.map(function(va){return va.s}):Ca.map(function(va,Ka){return Qa=Ka&&La[Ga]&&va.l>=Zn[Ga],La[Ga]-=Qa?1:0,Qa?va.ss:[va.s]}).flat()});return Ra[0].length===Ra[1].length?Ra:qt(Ra[0],Ra[1],aa)}var Jt=function(lt){return lt!==null&&typeof lt!="function"&&isFinite(lt.length)},St=Jt,Ce=function(lt,Lt){return St(lt)?lt.indexOf(Lt)>-1:!1},kt=Ce,Kt=function(lt,Lt){if(!St(lt))return lt;for(var Vt=[],le=0;le<lt.length;le++){var Ae=lt[le];Lt(Ae,le)&&Vt.push(Ae)}return Vt},dt=Kt,Ut=function(lt,Lt){return Lt===void 0&&(Lt=[]),dt(lt,function(Vt){return!kt(Lt,Vt)})},J=Ut,it=function(lt){return typeof lt=="function"},R=function(lt){return lt==null},M=R,O={}.toString,X=function(lt,Lt){return O.call(lt)==="[object "+Lt+"]"},mt=X,Ft=function(lt){return Array.isArray?Array.isArray(lt):mt(lt,"Array")},Bt=function(lt){var Lt=typeof lt;return lt!==null&&Lt==="object"||Lt==="function"};function re(lt,Lt){if(lt){var Vt;if(Ft(lt))for(var le=0,Ae=lt.length;le<Ae&&(Vt=Lt(lt[le],le),Vt!==!1);le++);else if(Bt(lt)){for(var ir in lt)if(lt.hasOwnProperty(ir)&&(Vt=Lt(lt[ir],ir),Vt===!1))break}}}var De=re,me=Object.keys?function(lt){return Object.keys(lt)}:function(lt){var Lt=[];return De(lt,function(Vt,le){it(lt)&&le==="prototype"||Lt.push(le)}),Lt},Xe=me;function hr(lt,Lt){var Vt=Xe(Lt),le=Vt.length;if(M(lt))return!le;for(var Ae=0;Ae<le;Ae+=1){var ir=Vt[Ae];if(Lt[ir]!==lt[ir]||!(ir in lt))return!1}return!0}var Ke=hr,Lr=function(lt){return typeof lt=="object"&&lt!==null},cn=Lr,$e=function(lt){if(!cn(lt)||!mt(lt,"Object"))return!1;if(Object.getPrototypeOf(lt)===null)return!0;for(var Lt=lt;Object.getPrototypeOf(Lt)!==null;)Lt=Object.getPrototypeOf(Lt);return Object.getPrototypeOf(lt)===Lt},lr=$e;function Pr(lt,Lt){if(!Ft(lt))return null;var Vt;if(it(Lt)&&(Vt=Lt),lr(Lt)&&(Vt=function(Ae){return Ke(Ae,Lt)}),Vt){for(var le=0;le<lt.length;le+=1)if(Vt(lt[le]))return lt[le]}return null}var Dr=Pr;function fe(lt,Lt,Vt){Vt===void 0&&(Vt=0);for(var le=Vt;le<lt.length;le++)if(Lt(lt[le],le))return le;return-1}var jt=fe,ve=function(lt,Lt){for(var Vt=null,le=0;le<lt.length;le++){var Ae=lt[le],ir=Ae[Lt];if(!M(ir)){Ft(ir)?Vt=ir[0]:Vt=ir;break}}return Vt},Ie=ve,ye=function(lt){if(!Ft(lt))return[];for(var Lt=[],Vt=0;Vt<lt.length;Vt++)Lt=Lt.concat(lt[Vt]);return Lt},ze=ye,sr=function(lt,Lt){if(Lt===void 0&&(Lt=[]),!Ft(lt))Lt.push(lt);else for(var Vt=0;Vt<lt.length;Vt+=1)sr(lt[Vt],Lt);return Lt},pr=sr,en=function(lt){if(Ft(lt))return lt.reduce(function(Lt,Vt){return Math.max(Lt,Vt)},lt[0])},Fn=function(lt){if(Ft(lt))return lt.reduce(function(Lt,Vt){return Math.min(Lt,Vt)},lt[0])},ln=function(lt){var Lt=lt.filter(function(cr){return!isNaN(cr)});if(!Lt.length)return{min:0,max:0};if(Ft(lt[0])){for(var Vt=[],le=0;le<lt.length;le++)Vt=Vt.concat(lt[le]);Lt=Vt}var Ae=en(Lt),ir=Fn(Lt);return{min:ir,max:Ae}},ea=ln,fn=Array.prototype,Hn=fn.splice,la=fn.indexOf,xa=function(lt){for(var Lt=[],Vt=1;Vt<arguments.length;Vt++)Lt[Vt-1]=arguments[Vt];for(var le=0;le<Lt.length;le++)for(var Ae=Lt[le],ir=-1;(ir=la.call(lt,Ae))>-1;)Hn.call(lt,ir,1);return lt},ba=xa,Wi=Array.prototype.splice,ri=function(Lt,Vt){if(!St(Lt))return[];for(var le=Lt?Vt.length:0,Ae=le-1;le--;){var ir=void 0,cr=Vt[le];(le===Ae||cr!==ir)&&(ir=cr,Wi.call(Lt,cr,1))}return Lt},ti=ri,Si=function(lt,Lt,Vt){if(!Ft(lt)&&!lr(lt))return lt;var le=Vt;return De(lt,function(Ae,ir){le=Lt(le,Ae,ir)}),le},Xi=Si,io=function(lt,Lt){var Vt=[];if(!St(lt))return Vt;for(var le=-1,Ae=[],ir=lt.length;++le<ir;){var cr=lt[le];Lt(cr,le,lt)&&(Vt.push(cr),Ae.push(le))}return ti(lt,Ae),Vt},oo=io,Ea=function(lt){return mt(lt,"String")};function so(lt,Lt){var Vt;if(it(Lt))Vt=function(Ae,ir){return Lt(Ae)-Lt(ir)};else{var le=[];Ea(Lt)?le.push(Lt):Ft(Lt)&&(le=Lt),Vt=function(Ae,ir){for(var cr=0;cr<le.length;cr+=1){var Gr=le[cr];if(Ae[Gr]>ir[Gr])return 1;if(Ae[Gr]<ir[Gr])return-1}return 0}}return lt.sort(Vt),lt}var Io=so;function ii(lt,Lt){Lt===void 0&&(Lt=new Map);var Vt=[];if(Array.isArray(lt))for(var le=0,Ae=lt.length;le<Ae;le++){var ir=lt[le];Lt.has(ir)||(Vt.push(ir),Lt.set(ir,!0))}return Vt}var Yi=function(){for(var lt=[],Lt=0;Lt<arguments.length;Lt++)lt[Lt]=arguments[Lt];return ii([].concat.apply([],lt))},uo=Yi,Wo=function(lt,Lt){for(var Vt=[],le={},Ae=0;Ae<lt.length;Ae++){var ir=lt[Ae],cr=ir[Lt];if(!M(cr)){Ft(cr)||(cr=[cr]);for(var Gr=0;Gr<cr.length;Gr++){var gn=cr[Gr];le[gn]||(Vt.push(gn),le[gn]=!0)}}}return Vt};function ro(lt){if(St(lt))return lt[0]}function go(lt){if(St(lt)){var Lt=lt;return Lt[Lt.length-1]}}function Oo(lt,Lt){return Ft(lt)||Ea(lt)?lt[0]===Lt:!1}var Yo=Oo;function Ai(lt,Lt){return Ft(lt)||Ea(lt)?lt[lt.length-1]===Lt:!1}var $i=Ai,oa=function(lt,Lt){for(var Vt=0;Vt<lt.length;Vt++)if(!Lt(lt[Vt],Vt))return!1;return!0},ee=oa,de=function(lt,Lt){for(var Vt=0;Vt<lt.length;Vt++)if(Lt(lt[Vt],Vt))return!0;return!1},Be=de,or=Object.prototype.hasOwnProperty;function Rr(lt,Lt){if(!Lt||!Ft(lt))return{};for(var Vt={},le=it(Lt)?Lt:function(Gr){return Gr[Lt]},Ae,ir=0;ir<lt.length;ir++){var cr=lt[ir];Ae=le(cr),or.call(Vt,Ae)?Vt[Ae].push(cr):Vt[Ae]=[cr]}return Vt}var Nr=Rr;function Sr(lt,Lt){if(!Lt)return{0:lt};if(!it(Lt)){var Vt=Ft(Lt)?Lt:Lt.replace(/\s+/g,"").split("*");Lt=function(le){for(var Ae="_",ir=0,cr=Vt.length;ir<cr;ir++)Ae+=le[Vt[ir]]&&le[Vt[ir]].toString();return Ae}}return Nr(lt,Lt)}var qr=function(lt,Lt){if(!Lt)return[lt];var Vt=Sr(lt,Lt),le=[];for(var Ae in Vt)le.push(Vt[Ae]);return le};function hn(lt,Lt){return lt["_wrap_"+Lt]}var Dn=hn;function sa(lt,Lt){if(lt["_wrap_"+Lt])return lt["_wrap_"+Lt];var Vt=function(le){lt[Lt](le)};return lt["_wrap_"+Lt]=Vt,Vt}var qn=sa,ga={};function ya(lt){var Lt=ga[lt];if(!Lt){for(var Vt=lt.toString(16),le=Vt.length;le<6;le++)Vt="0"+Vt;Lt="#"+Vt,ga[lt]=Lt}return Lt}var di=ya;function Ma(lt){var Lt=0,Vt=0,le=0,Ae=0;return Ft(lt)?lt.length===1?Lt=Vt=le=Ae=lt[0]:lt.length===2?(Lt=le=lt[0],Vt=Ae=lt[1]):lt.length===3?(Lt=lt[0],Vt=Ae=lt[1],le=lt[2]):(Lt=lt[0],Vt=lt[1],le=lt[2],Ae=lt[3]):Lt=Vt=le=Ae=lt,{r1:Lt,r2:Vt,r3:le,r4:Ae}}var ua=Ma,ci=function(lt,Lt,Vt){return lt<Lt?Lt:lt>Vt?Vt:lt},ei=ci,Fa=function(lt,Lt){var Vt=Lt.toString(),le=Vt.indexOf(".");if(le===-1)return Math.round(lt);var Ae=Vt.substr(le+1).length;return Ae>20&&(Ae=20),parseFloat(lt.toFixed(Ae))},Di=Fa,yi=function(lt){return mt(lt,"Number")},ka=yi,ja=function(lt){return ka(lt)&&lt%1!==0},Oa=ja,Ni=function(lt){return ka(lt)&&lt%2===0},Mi=Ni,Ri=Number.isInteger?Number.isInteger:function(lt){return ka(lt)&&lt%1===0},co=Ri,qi=function(lt){return ka(lt)&&lt<0},mo=qi,ts=1e-5;function es(lt,Lt,Vt){return Vt===void 0&&(Vt=ts),Math.abs(lt-Lt)<Vt}var no=function(lt){return ka(lt)&&lt%2!==0},ni=no,Fi=function(lt){return ka(lt)&&lt>0},fo=Fi,Ya=function(lt,Lt){if(Ft(lt)){for(var Vt,le=-1/0,Ae=0;Ae<lt.length;Ae++){var ir=lt[Ae],cr=it(Lt)?Lt(ir):ir[Lt];cr>le&&(Vt=ir,le=cr)}return Vt}},yo=function(lt,Lt){if(Ft(lt)){for(var Vt,le=1/0,Ae=0;Ae<lt.length;Ae++){var ir=lt[Ae],cr=it(Lt)?Lt(ir):ir[Lt];cr<le&&(Vt=ir,le=cr)}return Vt}},ko=function(lt,Lt){return(lt%Lt+Lt)%Lt},ji=ko,is=180/Math.PI,zi=function(lt){return is*lt},Bo=zi,cs=parseInt,Cs=Math.PI/180,xo=function(lt){return Cs*lt},fs=xo,ls=De,Ds=function(lt,Lt){return lt.hasOwnProperty(Lt)},Aa=Ds,Yt=Object.values?function(lt){return Object.values(lt)}:function(lt){var Lt=[];return De(lt,function(Vt,le){it(lt)&&le==="prototype"||Lt.push(Vt)}),Lt},Ge=Yt,nr=function(lt,Lt){return kt(Ge(lt),Lt)},gr=function(lt){return M(lt)?"":lt.toString()},Zr=function(lt){return gr(lt).toLowerCase()},pn=Zr,$n=function(lt){var Lt=gr(lt);return Lt.charAt(0).toLowerCase()+Lt.substring(1)},qa=$n;function ki(lt,Lt){return!lt||!Lt?lt:lt.replace(/\\?\{([^{}]+)\}/g,function(Vt,le){return Vt.charAt(0)==="\\"?Vt.slice(1):Lt[le]===void 0?"":Lt[le]})}var Do=ki,Ho=function(lt){return gr(lt).toUpperCase()},ks=Ho,Qi=function(lt){var Lt=gr(lt);return Lt.charAt(0).toUpperCase()+Lt.substring(1)},Lo=Qi,ds={}.toString,Bs=function(lt){return ds.call(lt).replace(/^\[object /,"").replace(/]$/,"")},ps=Bs,Vs=function(lt){return mt(lt,"Arguments")},qs=Vs,Hs=function(lt){return mt(lt,"Boolean")},fu=Hs,gs=function(lt){return mt(lt,"Date")},Ls=gs,Fs=function(lt){return mt(lt,"Error")},os=Fs;function _u(lt){return ka(lt)&&isFinite(lt)}var Cu=function(lt){return lt===null},bo=Cu,Zo=Object.prototype,ss=function(lt){var Lt=lt&&lt.constructor,Vt=typeof Lt=="function"&&Lt.prototype||Zo;return lt===Vt},d=ss,G=function(lt){return mt(lt,"RegExp")},wt=G,Gt=function(lt){return lt===void 0},te=Gt,he=function(lt){return lt instanceof Element||lt instanceof HTMLDocument},ge=he;function Oe(lt){var Lt=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(Vt){return setTimeout(Vt,16)};return Lt(lt)}function Fe(lt){var Lt=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout;Lt(lt)}function He(lt,Lt){for(var Vt in Lt)Lt.hasOwnProperty(Vt)&&Vt!=="constructor"&&Lt[Vt]!==void 0&&(lt[Vt]=Lt[Vt])}function ur(lt,Lt,Vt,le){return Lt&&He(lt,Lt),Vt&&He(lt,Vt),le&&He(lt,le),lt}var Ur=function(){for(var lt=[],Lt=0;Lt<arguments.length;Lt++)lt[Lt]=arguments[Lt];for(var Vt=lt[0],le=1;le<lt.length;le++){var Ae=lt[le];it(Ae)&&(Ae=Ae.prototype),ur(Vt.prototype,Ae)}},jr=Ur,Wr=function(lt){if(typeof lt!="object"||lt===null)return lt;var Lt;if(Ft(lt)){Lt=[];for(var Vt=0,le=lt.length;Vt<le;Vt++)typeof lt[Vt]=="object"&&lt[Vt]!=null?Lt[Vt]=Wr(lt[Vt]):Lt[Vt]=lt[Vt]}else{Lt={};for(var Ae in lt)typeof lt[Ae]=="object"&&lt[Ae]!=null?Lt[Ae]=Wr(lt[Ae]):Lt[Ae]=lt[Ae]}return Lt},mn=Wr;function Bn(lt,Lt,Vt){var le;return function(){var Ae=this,ir=arguments,cr=function(){le=null,Vt||lt.apply(Ae,ir)},Gr=Vt&&!le;clearTimeout(le),le=setTimeout(cr,Lt),Gr&&lt.apply(Ae,ir)}}var Qr=Bn,na=function(lt,Lt){if(!it(lt))throw new TypeError("Expected a function");var Vt=function(){for(var le=[],Ae=0;Ae<arguments.length;Ae++)le[Ae]=arguments[Ae];var ir=Lt?Lt.apply(this,le):le[0],cr=Vt.cache;if(cr.has(ir))return cr.get(ir);var Gr=lt.apply(this,le);return cr.set(ir,Gr),Gr};return Vt.cache=new Map,Vt},Va=5;function Ha(lt,Lt,Vt,le){Vt=Vt||0,le=le||Va;for(var Ae in Lt)if(Lt.hasOwnProperty(Ae)){var ir=Lt[Ae];ir!==null&&lr(ir)?(lr(lt[Ae])||(lt[Ae]={}),Vt<le?Ha(lt[Ae],ir,Vt+1,le):lt[Ae]=Lt[Ae]):Ft(ir)?(lt[Ae]=[],lt[Ae]=lt[Ae].concat(ir)):ir!==void 0&&(lt[Ae]=ir)}}var za=function(lt){for(var Lt=[],Vt=1;Vt<arguments.length;Vt++)Lt[Vt-1]=arguments[Vt];for(var le=0;le<Lt.length;le+=1)Ha(lt,Lt[le]);return lt},_a=za,Na=function(lt,Lt,Vt,le){it(Lt)||(Vt=Lt,Lt=lt,lt=function(){});var Ae=Object.create?function(cr,Gr){return Object.create(cr,{constructor:{value:Gr}})}:function(cr,Gr){function gn(){}gn.prototype=cr;var yn=new gn;return yn.constructor=Gr,yn},ir=Ae(Lt.prototype,lt);return lt.prototype=ur(ir,lt.prototype),lt.superclass=Ae(Lt.prototype,Lt),ur(ir,Vt),ur(lt,le),lt},Po=Na,Mo=function(lt,Lt){if(!St(lt))return-1;var Vt=Array.prototype.indexOf;if(Vt)return Vt.call(lt,Lt);for(var le=-1,Ae=0;Ae<lt.length;Ae++)if(lt[Ae]===Lt){le=Ae;break}return le},Eo=Mo,_o=Object.prototype.hasOwnProperty;function Co(lt){if(M(lt))return!0;if(St(lt))return!lt.length;var Lt=ps(lt);if(Lt==="Map"||Lt==="Set")return!lt.size;if(d(lt))return!Object.keys(lt).length;for(var Vt in lt)if(_o.call(lt,Vt))return!1;return!0}var Fo=Co,zo=function(lt,Lt){if(lt===Lt)return!0;if(!lt||!Lt||Ea(lt)||Ea(Lt))return!1;if(St(lt)||St(Lt)){if(lt.length!==Lt.length)return!1;for(var Vt=!0,le=0;le<lt.length&&(Vt=zo(lt[le],Lt[le]),!!Vt);le++);return Vt}if(cn(lt)||cn(Lt)){var Ae=Object.keys(lt),ir=Object.keys(Lt);if(Ae.length!==ir.length)return!1;for(var Vt=!0,le=0;le<Ae.length&&(Vt=zo(lt[Ae[le]],Lt[Ae[le]]),!!Vt);le++);return Vt}return!1},fi=zo,Bi=function(lt,Lt,Vt){return it(Vt)?!!Vt(lt,Lt):fi(lt,Lt)},Qs=function(lt,Lt){if(!St(lt))return lt;for(var Vt=[],le=0;le<lt.length;le++){var Ae=lt[le];Vt.push(Lt(Ae,le))}return Vt},zs=Qs,Ts=function(lt){return lt},lu=function(lt,Lt){Lt===void 0&&(Lt=Ts);var Vt={};return Bt(lt)&&!M(lt)&&Object.keys(lt).forEach(function(le){Vt[le]=Lt(lt[le],le)}),Vt},Rc=function(lt,Lt,Vt){for(var le=0,Ae=Ea(Lt)?Lt.split("."):Lt;lt&&le<Ae.length;)lt=lt[Ae[le++]];return lt===void 0||le<Ae.length?Vt:lt},mf=function(lt,Lt,Vt){var le=lt,Ae=Ea(Lt)?Lt.split("."):Lt;return Ae.forEach(function(ir,cr){cr<Ae.length-1?(Bt(le[ir])||(le[ir]=ka(Ae[cr+1])?[]:{}),le=le[ir]):le[ir]=Vt}),lt},yf=Object.prototype.hasOwnProperty,kc=function(lt,Lt){if(lt===null||!lr(lt))return{};var Vt={};return De(Lt,function(le){yf.call(lt,le)&&(Vt[le]=lt[le])}),Vt},ol=function(lt,Lt){return Xi(lt,function(Vt,le,Ae){return Lt.includes(Ae)||(Vt[Ae]=le),Vt},{})},Bc=function(lt,Lt,Vt){var le,Ae,ir,cr,Gr=0;Vt||(Vt={});var gn=function(){Gr=Vt.leading===!1?0:Date.now(),le=null,cr=lt.apply(Ae,ir),le||(Ae=ir=null)},yn=function(){var Vn=Date.now();!Gr&&Vt.leading===!1&&(Gr=Vn);var aa=Lt-(Vn-Gr);return Ae=this,ir=arguments,aa<=0||aa>Lt?(le&&(clearTimeout(le),le=null),Gr=Vn,cr=lt.apply(Ae,ir),le||(Ae=ir=null)):!le&&Vt.trailing!==!1&&(le=setTimeout(gn,aa)),cr};return yn.cancel=function(){clearTimeout(le),Gr=0,le=Ae=ir=null},yn},Xu=function(lt){return St(lt)?Array.prototype.slice.call(lt):[]},ju={},Fc=function(lt){return lt=lt||"g",ju[lt]?ju[lt]+=1:ju[lt]=1,lt+ju[lt]},xf=function(){},sl=function(lt){return lt};function du(lt){return M(lt)?0:St(lt)?lt.length:Object.keys(lt).length}var bf=function(){function lt(){this.map={}}return lt.prototype.has=function(Lt){return this.map[Lt]!==void 0},lt.prototype.get=function(Lt,Vt){var le=this.map[Lt];return le===void 0?Vt:le},lt.prototype.set=function(Lt,Vt){this.map[Lt]=Vt},lt.prototype.clear=function(){this.map={}},lt.prototype.delete=function(Lt){delete this.map[Lt]},lt.prototype.size=function(){return Object.keys(this.map).length},lt}(),ta=bf,Tu=1e-6;function ui(lt){return Math.abs(lt)<Tu?0:lt<0?-1:1}function zc(lt,Lt,Vt){return(Vt[0]-lt[0])*(Lt[1]-lt[1])===(Lt[0]-lt[0])*(Vt[1]-lt[1])&&Math.min(lt[0],Lt[0])<=Vt[0]&&Vt[0]<=Math.max(lt[0],Lt[0])&&Math.min(lt[1],Lt[1])<=Vt[1]&&Vt[1]<=Math.max(lt[1],Lt[1])}function Au(lt,Lt,Vt){var le=!1,Ae=lt.length;if(Ae<=2)return!1;for(var ir=0;ir<Ae;ir++){var cr=lt[ir],Gr=lt[(ir+1)%Ae];if(zc(cr,Gr,[Lt,Vt]))return!0;ui(cr[1]-Vt)>0!=ui(Gr[1]-Vt)>0&&ui(Lt-(Vt-cr[1])*(cr[0]-Gr[0])/(cr[1]-Gr[1])-cr[0])<0&&(le=!le)}return le}var au=function(lt,Lt,Vt){return lt>=Lt&&lt<=Vt};function Gc(lt,Lt,Vt,le){var Ae=.001,ir={x:Vt.x-lt.x,y:Vt.y-lt.y},cr={x:Lt.x-lt.x,y:Lt.y-lt.y},Gr={x:le.x-Vt.x,y:le.y-Vt.y},gn=cr.x*Gr.y-cr.y*Gr.x,yn=gn*gn,Vn=cr.x*cr.x+cr.y*cr.y,aa=Gr.x*Gr.x+Gr.y*Gr.y,Zn=null;if(yn>Ae*Vn*aa){var La=(ir.x*Gr.y-ir.y*Gr.x)/gn,Qa=(ir.x*cr.y-ir.y*cr.x)/gn;au(La,0,1)&&au(Qa,0,1)&&(Zn={x:lt.x+La*cr.x,y:lt.y+La*cr.y})}return Zn}function oc(lt){for(var Lt=[],Vt=lt.length,le=0;le<Vt-1;le++){var Ae=lt[le],ir=lt[le+1];Lt.push({from:{x:Ae[0],y:Ae[1]},to:{x:ir[0],y:ir[1]}})}if(Lt.length>1){var cr=lt[0],Gr=lt[Vt-1];Lt.push({from:{x:Gr[0],y:Gr[1]},to:{x:cr[0],y:cr[1]}})}return Lt}function sc(lt,Lt){var Vt=!1;return lt.forEach(function(le){if(Gc(le.from,le.to,Lt.from,Lt.to))return Vt=!0,!1}),Vt}function Uc(lt){var Lt=lt.map(function(le){return le[0]}),Vt=lt.map(function(le){return le[1]});return{minX:Math.min.apply(null,Lt),maxX:Math.max.apply(null,Lt),minY:Math.min.apply(null,Vt),maxY:Math.max.apply(null,Vt)}}function Ef(lt,Lt){return!(Lt.minX>lt.maxX||Lt.maxX<lt.minX||Lt.minY>lt.maxY||Lt.maxY<lt.minY)}function Gs(lt,Lt){if(lt.length<2||Lt.length<2)return!1;var Vt=Uc(lt),le=Uc(Lt);if(!Ef(Vt,le))return!1;var Ae=!1;if(Lt.forEach(function(gn){if(Au(lt,gn[0],gn[1]))return Ae=!0,!1}),Ae||(lt.forEach(function(gn){if(Au(Lt,gn[0],gn[1]))return Ae=!0,!1}),Ae))return!0;var ir=oc(lt),cr=oc(Lt),Gr=!1;return cr.forEach(function(gn){if(sc(ir,gn))return Gr=!0,!1}),Gr}},731278:function(Ve,z,C){"use strict";var b;b={value:!0};var k=C(858204);function w(g,A,E){var D=[0,0,0,0,0,0,0,0,0];return k.mat3.fromTranslation(D,E),k.mat3.multiply(g,D,A)}b=w;function T(g,A,E){var D=[0,0,0,0,0,0,0,0,0];return k.mat3.fromRotation(D,E),k.mat3.multiply(g,D,A)}b=T;function L(g,A,E){var D=[0,0,0,0,0,0,0,0,0];return k.mat3.fromScaling(D,E),k.mat3.multiply(g,D,A)}b=L;function P(g,A,E){return k.mat3.multiply(g,E,A)}function p(g,A){for(var E=g?[].concat(g):[1,0,0,0,1,0,0,0,1],D=0,F=A.length;D<F;D++){var y=A[D];switch(y[0]){case"t":w(E,E,[y[1],y[2]]);break;case"s":L(E,E,[y[1],y[2]]);break;case"r":T(E,E,y[1]);break;case"m":P(E,E,y[1]);break;default:break}}return E}z.vs=p;function m(g,A){return g[0]*A[1]-A[0]*g[1]}b=m;function S(g,A,E){var D=k.vec2.angle(g,A),F=m(g,A)>=0;return E?F?Math.PI*2-D:D:F?D:Math.PI*2-D}b=S;function x(g,A,E){return E?(g[0]=A[1],g[1]=-1*A[0]):(g[0]=-1*A[1],g[1]=A[0]),g}b=x},413810:function(Ve,z,C){"use strict";C.r(z),C.d(z,{Cache:function(){return Aa},assign:function(){return qr},augment:function(){return Dn},clamp:function(){return Jt},clearAnimationFrame:function(){return Nr},clone:function(){return qn},contains:function(){return T},debounce:function(){return ya},deepMix:function(){return ei},difference:function(){return m},each:function(){return Y},endsWith:function(){return Un},every:function(){return xr},extend:function(){return Di},filter:function(){return P},find:function(){return ot},findIndex:function(){return pt},firstValue:function(){return Ct},fixedBase:function(){return Ce},flatten:function(){return Z},flattenDeep:function(){return bt},forIn:function(){return ve},get:function(){return no},getEllipsisText:function(){return ls},getRange:function(){return It},getType:function(){return Xi},getWrapBehavior:function(){return An},group:function(){return _r},groupBy:function(){return _n},groupToMap:function(){return Pn},has:function(){return Ie},hasKey:function(){return ye},hasValue:function(){return pr},head:function(){return Ir},identity:function(){return Bo},includes:function(){return T},indexOf:function(){return ka},isArguments:function(){return oo},isArray:function(){return F},isArrayLike:function(){return k},isBoolean:function(){return so},isDate:function(){return ii},isDecimal:function(){return Ut},isElement:function(){return or},isEmpty:function(){return Ni},isEqual:function(){return Ri},isEqualWith:function(){return co},isError:function(){return uo},isEven:function(){return it},isFinite:function(){return Wo},isFunction:function(){return A},isInteger:function(){return M},isMatch:function(){return V},isNegative:function(){return X},isNil:function(){return D},isNull:function(){return go},isNumber:function(){return Kt},isNumberEqual:function(){return Ft},isObject:function(){return y},isObjectLike:function(){return Q},isOdd:function(){return re},isPlainObject:function(){return rt},isPositive:function(){return me},isPrototype:function(){return Ai},isRegExp:function(){return oa},isString:function(){return be},isType:function(){return g},isUndefined:function(){return de},keys:function(){return U},last:function(){return Br},lowerCase:function(){return ln},lowerFirst:function(){return fn},map:function(){return mo},mapValues:function(){return es},max:function(){return _t},maxBy:function(){return Xe},measureTextWidth:function(){return fs},memoize:function(){return di},min:function(){return nt},minBy:function(){return hr},mix:function(){return qr},mod:function(){return Lr},noop:function(){return zi},number2color:function(){return jn},omit:function(){return Ya},parseRadius:function(){return Ze},pick:function(){return fo},pull:function(){return ue},pullAt:function(){return ne},reduce:function(){return Wt},remove:function(){return Se},requestAnimationFrame:function(){return Rr},set:function(){return ni},size:function(){return cs},some:function(){return Cr},sortBy:function(){return we},startsWith:function(){return an},substitute:function(){return la},throttle:function(){return yo},toArray:function(){return ko},toDegree:function(){return lr},toInteger:function(){return Pr},toRadian:function(){return jt},toString:function(){return en},union:function(){return Mr},uniq:function(){return Tt},uniqueId:function(){return is},upperCase:function(){return ba},upperFirst:function(){return ri},values:function(){return sr},valuesOfKey:function(){return Ar},wrapBehavior:function(){return Wn}});var b=function(Yt){return Yt!==null&&typeof Yt!="function"&&isFinite(Yt.length)},k=b,w=function(Yt,Ge){return k(Yt)?Yt.indexOf(Ge)>-1:!1},T=w,L=function(Yt,Ge){if(!k(Yt))return Yt;for(var nr=[],gr=0;gr<Yt.length;gr++){var Zr=Yt[gr];Ge(Zr,gr)&&nr.push(Zr)}return nr},P=L,p=function(Yt,Ge){return Ge===void 0&&(Ge=[]),P(Yt,function(nr){return!T(Ge,nr)})},m=p,S={}.toString,x=function(Yt,Ge){return S.call(Yt)==="[object "+Ge+"]"},g=x,A=function(Yt){return g(Yt,"Function")},E=function(Yt){return Yt==null},D=E,F=function(Yt){return Array.isArray?Array.isArray(Yt):g(Yt,"Array")},y=function(Yt){var Ge=typeof Yt;return Yt!==null&&Ge==="object"||Ge==="function"};function h(Yt,Ge){if(Yt){var nr;if(F(Yt))for(var gr=0,Zr=Yt.length;gr<Zr&&(nr=Ge(Yt[gr],gr),nr!==!1);gr++);else if(y(Yt)){for(var pn in Yt)if(Yt.hasOwnProperty(pn)&&(nr=Ge(Yt[pn],pn),nr===!1))break}}}var Y=h,$=Object.keys?function(Yt){return Object.keys(Yt)}:function(Yt){var Ge=[];return Y(Yt,function(nr,gr){A(Yt)&&gr==="prototype"||Ge.push(gr)}),Ge},U=$;function W(Yt,Ge){var nr=U(Ge),gr=nr.length;if(D(Yt))return!gr;for(var Zr=0;Zr<gr;Zr+=1){var pn=nr[Zr];if(Ge[pn]!==Yt[pn]||!(pn in Yt))return!1}return!0}var V=W,H=function(Yt){return typeof Yt=="object"&&Yt!==null},Q=H,tt=function(Yt){if(!Q(Yt)||!g(Yt,"Object"))return!1;if(Object.getPrototypeOf(Yt)===null)return!0;for(var Ge=Yt;Object.getPrototypeOf(Ge)!==null;)Ge=Object.getPrototypeOf(Ge);return Object.getPrototypeOf(Yt)===Ge},rt=tt;function ct(Yt,Ge){if(!F(Yt))return null;var nr;if(A(Ge)&&(nr=Ge),rt(Ge)&&(nr=function(Zr){return V(Zr,Ge)}),nr){for(var gr=0;gr<Yt.length;gr+=1)if(nr(Yt[gr]))return Yt[gr]}return null}var ot=ct;function xt(Yt,Ge,nr){nr===void 0&&(nr=0);for(var gr=nr;gr<Yt.length;gr++)if(Ge(Yt[gr],gr))return gr;return-1}var pt=xt,Xt=function(Yt,Ge){for(var nr=null,gr=0;gr<Yt.length;gr++){var Zr=Yt[gr],pn=Zr[Ge];if(!D(pn)){F(pn)?nr=pn[0]:nr=pn;break}}return nr},Ct=Xt,At=function(Yt){if(!F(Yt))return[];for(var Ge=[],nr=0;nr<Yt.length;nr++)Ge=Ge.concat(Yt[nr]);return Ge},Z=At,q=function(Yt,Ge){if(Ge===void 0&&(Ge=[]),!F(Yt))Ge.push(Yt);else for(var nr=0;nr<Yt.length;nr+=1)q(Yt[nr],Ge);return Ge},bt=q,_t=function(Yt){if(F(Yt))return Yt.reduce(function(Ge,nr){return Math.max(Ge,nr)},Yt[0])},nt=function(Yt){if(F(Yt))return Yt.reduce(function(Ge,nr){return Math.min(Ge,nr)},Yt[0])},vt=function(Yt){var Ge=Yt.filter(function($n){return!isNaN($n)});if(!Ge.length)return{min:0,max:0};if(F(Yt[0])){for(var nr=[],gr=0;gr<Yt.length;gr++)nr=nr.concat(Yt[gr]);Ge=nr}var Zr=_t(Ge),pn=nt(Ge);return{min:pn,max:Zr}},It=vt,Pt=Array.prototype,Et=Pt.splice,Nt=Pt.indexOf,$t=function(Yt){for(var Ge=[],nr=1;nr<arguments.length;nr++)Ge[nr-1]=arguments[nr];for(var gr=0;gr<Ge.length;gr++)for(var Zr=Ge[gr],pn=-1;(pn=Nt.call(Yt,Zr))>-1;)Et.call(Yt,pn,1);return Yt},ue=$t,ie=Array.prototype.splice,Dt=function(Ge,nr){if(!k(Ge))return[];for(var gr=Ge?nr.length:0,Zr=gr-1;gr--;){var pn=void 0,$n=nr[gr];(gr===Zr||$n!==pn)&&(pn=$n,ie.call(Ge,$n,1))}return Ge},ne=Dt,pe=function(Yt,Ge,nr){if(!F(Yt)&&!rt(Yt))return Yt;var gr=nr;return Y(Yt,function(Zr,pn){gr=Ge(gr,Zr,pn)}),gr},Wt=pe,ae=function(Yt,Ge){var nr=[];if(!k(Yt))return nr;for(var gr=-1,Zr=[],pn=Yt.length;++gr<pn;){var $n=Yt[gr];Ge($n,gr,Yt)&&(nr.push($n),Zr.push(gr))}return ne(Yt,Zr),nr},Se=ae,be=function(Yt){return g(Yt,"String")};function Qt(Yt,Ge){var nr;if(A(Ge))nr=function(Zr,pn){return Ge(Zr)-Ge(pn)};else{var gr=[];be(Ge)?gr.push(Ge):F(Ge)&&(gr=Ge),nr=function(Zr,pn){for(var $n=0;$n<gr.length;$n+=1){var qa=gr[$n];if(Zr[qa]>pn[qa])return 1;if(Zr[qa]<pn[qa])return-1}return 0}}return Yt.sort(nr),Yt}var we=Qt;function Tt(Yt,Ge){Ge===void 0&&(Ge=new Map);var nr=[];if(Array.isArray(Yt))for(var gr=0,Zr=Yt.length;gr<Zr;gr++){var pn=Yt[gr];Ge.has(pn)||(nr.push(pn),Ge.set(pn,!0))}return nr}var Le=function(){for(var Yt=[],Ge=0;Ge<arguments.length;Ge++)Yt[Ge]=arguments[Ge];return Tt([].concat.apply([],Yt))},Mr=Le,Ar=function(Yt,Ge){for(var nr=[],gr={},Zr=0;Zr<Yt.length;Zr++){var pn=Yt[Zr],$n=pn[Ge];if(!D($n)){F($n)||($n=[$n]);for(var qa=0;qa<$n.length;qa++){var ki=$n[qa];gr[ki]||(nr.push(ki),gr[ki]=!0)}}}return nr};function Ir(Yt){if(k(Yt))return Yt[0]}function Br(Yt){if(k(Yt)){var Ge=Yt;return Ge[Ge.length-1]}}function dn(Yt,Ge){return F(Yt)||be(Yt)?Yt[0]===Ge:!1}var an=dn;function Ln(Yt,Ge){return F(Yt)||be(Yt)?Yt[Yt.length-1]===Ge:!1}var Un=Ln,Yn=function(Yt,Ge){for(var nr=0;nr<Yt.length;nr++)if(!Ge(Yt[nr],nr))return!1;return!0},xr=Yn,qe=function(Yt,Ge){for(var nr=0;nr<Yt.length;nr++)if(Ge(Yt[nr],nr))return!0;return!1},Cr=qe,tn=Object.prototype.hasOwnProperty;function vn(Yt,Ge){if(!Ge||!F(Yt))return{};for(var nr={},gr=A(Ge)?Ge:function(qa){return qa[Ge]},Zr,pn=0;pn<Yt.length;pn++){var $n=Yt[pn];Zr=gr($n),tn.call(nr,Zr)?nr[Zr].push($n):nr[Zr]=[$n]}return nr}var _n=vn;function Pn(Yt,Ge){if(!Ge)return{0:Yt};if(!A(Ge)){var nr=F(Ge)?Ge:Ge.replace(/\s+/g,"").split("*");Ge=function(gr){for(var Zr="_",pn=0,$n=nr.length;pn<$n;pn++)Zr+=gr[nr[pn]]&&gr[nr[pn]].toString();return Zr}}return _n(Yt,Ge)}var _r=function(Yt,Ge){if(!Ge)return[Yt];var nr=Pn(Yt,Ge),gr=[];for(var Zr in nr)gr.push(nr[Zr]);return gr};function un(Yt,Ge){return Yt["_wrap_"+Ge]}var An=un;function on(Yt,Ge){if(Yt["_wrap_"+Ge])return Yt["_wrap_"+Ge];var nr=function(gr){Yt[Ge](gr)};return Yt["_wrap_"+Ge]=nr,nr}var Wn=on,Cn={};function On(Yt){var Ge=Cn[Yt];if(!Ge){for(var nr=Yt.toString(16),gr=nr.length;gr<6;gr++)nr="0"+nr;Ge="#"+nr,Cn[Yt]=Ge}return Ge}var jn=On;function at(Yt){var Ge=0,nr=0,gr=0,Zr=0;return F(Yt)?Yt.length===1?Ge=nr=gr=Zr=Yt[0]:Yt.length===2?(Ge=gr=Yt[0],nr=Zr=Yt[1]):Yt.length===3?(Ge=Yt[0],nr=Zr=Yt[1],gr=Yt[2]):(Ge=Yt[0],nr=Yt[1],gr=Yt[2],Zr=Yt[3]):Ge=nr=gr=Zr=Yt,{r1:Ge,r2:nr,r3:gr,r4:Zr}}var Ze=at,qt=function(Yt,Ge,nr){return Yt<Ge?Ge:Yt>nr?nr:Yt},Jt=qt,St=function(Yt,Ge){var nr=Ge.toString(),gr=nr.indexOf(".");if(gr===-1)return Math.round(Yt);var Zr=nr.substr(gr+1).length;return Zr>20&&(Zr=20),parseFloat(Yt.toFixed(Zr))},Ce=St,kt=function(Yt){return g(Yt,"Number")},Kt=kt,dt=function(Yt){return Kt(Yt)&&Yt%1!==0},Ut=dt,J=function(Yt){return Kt(Yt)&&Yt%2===0},it=J,R=Number.isInteger?Number.isInteger:function(Yt){return Kt(Yt)&&Yt%1===0},M=R,O=function(Yt){return Kt(Yt)&&Yt<0},X=O,mt=1e-5;function Ft(Yt,Ge,nr){return nr===void 0&&(nr=mt),Math.abs(Yt-Ge)<nr}var Bt=function(Yt){return Kt(Yt)&&Yt%2!==0},re=Bt,De=function(Yt){return Kt(Yt)&&Yt>0},me=De,Xe=function(Yt,Ge){if(F(Yt)){for(var nr,gr=-1/0,Zr=0;Zr<Yt.length;Zr++){var pn=Yt[Zr],$n=A(Ge)?Ge(pn):pn[Ge];$n>gr&&(nr=pn,gr=$n)}return nr}},hr=function(Yt,Ge){if(F(Yt)){for(var nr,gr=1/0,Zr=0;Zr<Yt.length;Zr++){var pn=Yt[Zr],$n=A(Ge)?Ge(pn):pn[Ge];$n<gr&&(nr=pn,gr=$n)}return nr}},Ke=function(Yt,Ge){return(Yt%Ge+Ge)%Ge},Lr=Ke,cn=180/Math.PI,$e=function(Yt){return cn*Yt},lr=$e,Pr=parseInt,Dr=Math.PI/180,fe=function(Yt){return Dr*Yt},jt=fe,ve=Y,Ie=function(Yt,Ge){return Yt.hasOwnProperty(Ge)},ye=Ie,ze=Object.values?function(Yt){return Object.values(Yt)}:function(Yt){var Ge=[];return Y(Yt,function(nr,gr){A(Yt)&&gr==="prototype"||Ge.push(nr)}),Ge},sr=ze,pr=function(Yt,Ge){return T(sr(Yt),Ge)},en=function(Yt){return D(Yt)?"":Yt.toString()},Fn=function(Yt){return en(Yt).toLowerCase()},ln=Fn,ea=function(Yt){var Ge=en(Yt);return Ge.charAt(0).toLowerCase()+Ge.substring(1)},fn=ea;function Hn(Yt,Ge){return!Yt||!Ge?Yt:Yt.replace(/\\?\{([^{}]+)\}/g,function(nr,gr){return nr.charAt(0)==="\\"?nr.slice(1):Ge[gr]===void 0?"":Ge[gr]})}var la=Hn,xa=function(Yt){return en(Yt).toUpperCase()},ba=xa,Wi=function(Yt){var Ge=en(Yt);return Ge.charAt(0).toUpperCase()+Ge.substring(1)},ri=Wi,ti={}.toString,Si=function(Yt){return ti.call(Yt).replace(/^\[object /,"").replace(/]$/,"")},Xi=Si,io=function(Yt){return g(Yt,"Arguments")},oo=io,Ea=function(Yt){return g(Yt,"Boolean")},so=Ea,Io=function(Yt){return g(Yt,"Date")},ii=Io,Yi=function(Yt){return g(Yt,"Error")},uo=Yi;function Wo(Yt){return Kt(Yt)&&isFinite(Yt)}var ro=function(Yt){return Yt===null},go=ro,Oo=Object.prototype,Yo=function(Yt){var Ge=Yt&&Yt.constructor,nr=typeof Ge=="function"&&Ge.prototype||Oo;return Yt===nr},Ai=Yo,$i=function(Yt){return g(Yt,"RegExp")},oa=$i,ee=function(Yt){return Yt===void 0},de=ee,Be=function(Yt){return Yt instanceof Element||Yt instanceof HTMLDocument},or=Be;function Rr(Yt){var Ge=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(nr){return setTimeout(nr,16)};return Ge(Yt)}function Nr(Yt){var Ge=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout;Ge(Yt)}function Sr(Yt,Ge){for(var nr in Ge)Ge.hasOwnProperty(nr)&&nr!=="constructor"&&Ge[nr]!==void 0&&(Yt[nr]=Ge[nr])}function qr(Yt,Ge,nr,gr){return Ge&&Sr(Yt,Ge),nr&&Sr(Yt,nr),gr&&Sr(Yt,gr),Yt}var hn=function(){for(var Yt=[],Ge=0;Ge<arguments.length;Ge++)Yt[Ge]=arguments[Ge];for(var nr=Yt[0],gr=1;gr<Yt.length;gr++){var Zr=Yt[gr];A(Zr)&&(Zr=Zr.prototype),qr(nr.prototype,Zr)}},Dn=hn,sa=function(Yt){if(typeof Yt!="object"||Yt===null)return Yt;var Ge;if(F(Yt)){Ge=[];for(var nr=0,gr=Yt.length;nr<gr;nr++)typeof Yt[nr]=="object"&&Yt[nr]!=null?Ge[nr]=sa(Yt[nr]):Ge[nr]=Yt[nr]}else{Ge={};for(var Zr in Yt)typeof Yt[Zr]=="object"&&Yt[Zr]!=null?Ge[Zr]=sa(Yt[Zr]):Ge[Zr]=Yt[Zr]}return Ge},qn=sa;function ga(Yt,Ge,nr){var gr;return function(){var Zr=this,pn=arguments,$n=function(){gr=null,nr||Yt.apply(Zr,pn)},qa=nr&&!gr;clearTimeout(gr),gr=setTimeout($n,Ge),qa&&Yt.apply(Zr,pn)}}var ya=ga,di=function(Yt,Ge){if(!A(Yt))throw new TypeError("Expected a function");var nr=function(){for(var gr=[],Zr=0;Zr<arguments.length;Zr++)gr[Zr]=arguments[Zr];var pn=Ge?Ge.apply(this,gr):gr[0],$n=nr.cache;if($n.has(pn))return $n.get(pn);var qa=Yt.apply(this,gr);return $n.set(pn,qa),qa};return nr.cache=new Map,nr},Ma=5;function ua(Yt,Ge,nr,gr){nr=nr||0,gr=gr||Ma;for(var Zr in Ge)if(Ge.hasOwnProperty(Zr)){var pn=Ge[Zr];pn!==null&&rt(pn)?(rt(Yt[Zr])||(Yt[Zr]={}),nr<gr?ua(Yt[Zr],pn,nr+1,gr):Yt[Zr]=Ge[Zr]):F(pn)?(Yt[Zr]=[],Yt[Zr]=Yt[Zr].concat(pn)):pn!==void 0&&(Yt[Zr]=pn)}}var ci=function(Yt){for(var Ge=[],nr=1;nr<arguments.length;nr++)Ge[nr-1]=arguments[nr];for(var gr=0;gr<Ge.length;gr+=1)ua(Yt,Ge[gr]);return Yt},ei=ci,Fa=function(Yt,Ge,nr,gr){A(Ge)||(nr=Ge,Ge=Yt,Yt=function(){});var Zr=Object.create?function($n,qa){return Object.create($n,{constructor:{value:qa}})}:function($n,qa){function ki(){}ki.prototype=$n;var Do=new ki;return Do.constructor=qa,Do},pn=Zr(Ge.prototype,Yt);return Yt.prototype=qr(pn,Yt.prototype),Yt.superclass=Zr(Ge.prototype,Ge),qr(pn,nr),qr(Yt,gr),Yt},Di=Fa,yi=function(Yt,Ge){if(!k(Yt))return-1;var nr=Array.prototype.indexOf;if(nr)return nr.call(Yt,Ge);for(var gr=-1,Zr=0;Zr<Yt.length;Zr++)if(Yt[Zr]===Ge){gr=Zr;break}return gr},ka=yi,ja=Object.prototype.hasOwnProperty;function Oa(Yt){if(D(Yt))return!0;if(k(Yt))return!Yt.length;var Ge=Xi(Yt);if(Ge==="Map"||Ge==="Set")return!Yt.size;if(Ai(Yt))return!Object.keys(Yt).length;for(var nr in Yt)if(ja.call(Yt,nr))return!1;return!0}var Ni=Oa,Mi=function(Yt,Ge){if(Yt===Ge)return!0;if(!Yt||!Ge||be(Yt)||be(Ge))return!1;if(k(Yt)||k(Ge)){if(Yt.length!==Ge.length)return!1;for(var nr=!0,gr=0;gr<Yt.length&&(nr=Mi(Yt[gr],Ge[gr]),!!nr);gr++);return nr}if(Q(Yt)||Q(Ge)){var Zr=Object.keys(Yt),pn=Object.keys(Ge);if(Zr.length!==pn.length)return!1;for(var nr=!0,gr=0;gr<Zr.length&&(nr=Mi(Yt[Zr[gr]],Ge[Zr[gr]]),!!nr);gr++);return nr}return!1},Ri=Mi,co=function(Yt,Ge,nr){return A(nr)?!!nr(Yt,Ge):Ri(Yt,Ge)},qi=function(Yt,Ge){if(!k(Yt))return Yt;for(var nr=[],gr=0;gr<Yt.length;gr++){var Zr=Yt[gr];nr.push(Ge(Zr,gr))}return nr},mo=qi,ts=function(Yt){return Yt},es=function(Yt,Ge){Ge===void 0&&(Ge=ts);var nr={};return y(Yt)&&!D(Yt)&&Object.keys(Yt).forEach(function(gr){nr[gr]=Ge(Yt[gr],gr)}),nr},no=function(Yt,Ge,nr){for(var gr=0,Zr=be(Ge)?Ge.split("."):Ge;Yt&&gr<Zr.length;)Yt=Yt[Zr[gr++]];return Yt===void 0||gr<Zr.length?nr:Yt},ni=function(Yt,Ge,nr){var gr=Yt,Zr=be(Ge)?Ge.split("."):Ge;return Zr.forEach(function(pn,$n){$n<Zr.length-1?(y(gr[pn])||(gr[pn]=Kt(Zr[$n+1])?[]:{}),gr=gr[pn]):gr[pn]=nr}),Yt},Fi=Object.prototype.hasOwnProperty,fo=function(Yt,Ge){if(Yt===null||!rt(Yt))return{};var nr={};return Y(Ge,function(gr){Fi.call(Yt,gr)&&(nr[gr]=Yt[gr])}),nr},Ya=function(Yt,Ge){return Wt(Yt,function(nr,gr,Zr){return Ge.includes(Zr)||(nr[Zr]=gr),nr},{})},yo=function(Yt,Ge,nr){var gr,Zr,pn,$n,qa=0;nr||(nr={});var ki=function(){qa=nr.leading===!1?0:Date.now(),gr=null,$n=Yt.apply(Zr,pn),gr||(Zr=pn=null)},Do=function(){var Ho=Date.now();!qa&&nr.leading===!1&&(qa=Ho);var ks=Ge-(Ho-qa);return Zr=this,pn=arguments,ks<=0||ks>Ge?(gr&&(clearTimeout(gr),gr=null),qa=Ho,$n=Yt.apply(Zr,pn),gr||(Zr=pn=null)):!gr&&nr.trailing!==!1&&(gr=setTimeout(ki,ks)),$n};return Do.cancel=function(){clearTimeout(gr),qa=0,gr=Zr=pn=null},Do},ko=function(Yt){return k(Yt)?Array.prototype.slice.call(Yt):[]},ji={},is=function(Yt){return Yt=Yt||"g",ji[Yt]?ji[Yt]+=1:ji[Yt]=1,Yt+ji[Yt]},zi=function(){},Bo=function(Yt){return Yt};function cs(Yt){return D(Yt)?0:k(Yt)?Yt.length:Object.keys(Yt).length}var Cs=C(197582),xo,fs=di(function(Yt,Ge){Ge===void 0&&(Ge={});var nr=Ge.fontSize,gr=Ge.fontFamily,Zr=Ge.fontWeight,pn=Ge.fontStyle,$n=Ge.fontVariant;return xo||(xo=document.createElement("canvas").getContext("2d")),xo.font=[pn,$n,Zr,nr+"px",gr].join(" "),xo.measureText(be(Yt)?Yt:"").width},function(Yt,Ge){return Ge===void 0&&(Ge={}),(0,Cs.__spreadArrays)([Yt],sr(Ge)).join("")}),ls=function(Yt,Ge,nr,gr){gr===void 0&&(gr="...");var Zr=16,pn=fs(gr,nr),$n=be(Yt)?Yt:en(Yt),qa=Ge,ki=[],Do,Ho;if(fs(Yt,nr)<=Ge)return Yt;for(;Do=$n.substr(0,Zr),Ho=fs(Do,nr),!(Ho+pn>qa&&Ho>qa);)if(ki.push(Do),qa-=Ho,$n=$n.substr(Zr),!$n)return ki.join("");for(;Do=$n.substr(0,1),Ho=fs(Do,nr),!(Ho+pn>qa);)if(ki.push(Do),qa-=Ho,$n=$n.substr(1),!$n)return ki.join("");return""+ki.join("")+gr},Ds=function(){function Yt(){this.map={}}return Yt.prototype.has=function(Ge){return this.map[Ge]!==void 0},Yt.prototype.get=function(Ge,nr){var gr=this.map[Ge];return gr===void 0?nr:gr},Yt.prototype.set=function(Ge,nr){this.map[Ge]=nr},Yt.prototype.clear=function(){this.map={}},Yt.prototype.delete=function(Ge){delete this.map[Ge]},Yt.prototype.size=function(){return Object.keys(this.map).length},Yt}(),Aa=Ds},960887:function(Ve,z,C){"use strict";C.d(z,{LB:function(){return xa},g4:function(){return Cr},we:function(){return on},pE:function(){return ct},VK:function(){return It},Cj:function(){return Si},O1:function(){return ti},Zj:function(){return oo},VT:function(){return h},Dy:function(){return Y}});var b=C(667294),k=C(973935),w=C(724285);const T={display:"none"};function L(ee){let{id:de,value:Be}=ee;return b.createElement("div",{id:de,style:T},Be)}const P={position:"fixed",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};function p(ee){let{id:de,announcement:Be}=ee;return b.createElement("div",{id:de,style:P,role:"status","aria-live":"assertive","aria-atomic":!0},Be)}function m(){const[ee,de]=(0,b.useState)("");return{announce:(0,b.useCallback)(or=>{or!=null&&de(or)},[]),announcement:ee}}const S=(0,b.createContext)(null);function x(ee){const de=(0,b.useContext)(S);(0,b.useEffect)(()=>{if(!de)throw new Error("useDndMonitor must be used within a children of <DndContext>");return de(ee)},[ee,de])}function g(){const[ee]=(0,b.useState)(()=>new Set),de=(0,b.useCallback)(or=>(ee.add(or),()=>ee.delete(or)),[ee]);return[(0,b.useCallback)(or=>{let{type:Rr,event:Nr}=or;ee.forEach(Sr=>{var qr;return(qr=Sr[Rr])==null?void 0:qr.call(Sr,Nr)})},[ee]),de]}const A={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},E={onDragStart(ee){let{active:de}=ee;return"Picked up draggable item "+de.id+"."},onDragOver(ee){let{active:de,over:Be}=ee;return Be?"Draggable item "+de.id+" was moved over droppable area "+Be.id+".":"Draggable item "+de.id+" is no longer over a droppable area."},onDragEnd(ee){let{active:de,over:Be}=ee;return Be?"Draggable item "+de.id+" was dropped over droppable area "+Be.id:"Draggable item "+de.id+" was dropped."},onDragCancel(ee){let{active:de}=ee;return"Dragging was cancelled. Draggable item "+de.id+" was dropped."}};function D(ee){let{announcements:de=E,container:Be,hiddenTextDescribedById:or,screenReaderInstructions:Rr=A}=ee;const{announce:Nr,announcement:Sr}=m(),qr=(0,w.Ld)("DndLiveRegion"),[hn,Dn]=(0,b.useState)(!1);if((0,b.useEffect)(()=>{Dn(!0)},[]),x((0,b.useMemo)(()=>({onDragStart(qn){let{active:ga}=qn;Nr(de.onDragStart({active:ga}))},onDragMove(qn){let{active:ga,over:ya}=qn;de.onDragMove&&Nr(de.onDragMove({active:ga,over:ya}))},onDragOver(qn){let{active:ga,over:ya}=qn;Nr(de.onDragOver({active:ga,over:ya}))},onDragEnd(qn){let{active:ga,over:ya}=qn;Nr(de.onDragEnd({active:ga,over:ya}))},onDragCancel(qn){let{active:ga,over:ya}=qn;Nr(de.onDragCancel({active:ga,over:ya}))}}),[Nr,de])),!hn)return null;const sa=b.createElement(b.Fragment,null,b.createElement(L,{id:or,value:Rr.draggable}),b.createElement(p,{id:qr,announcement:Sr}));return Be?(0,k.createPortal)(sa,Be):sa}var F;(function(ee){ee.DragStart="dragStart",ee.DragMove="dragMove",ee.DragEnd="dragEnd",ee.DragCancel="dragCancel",ee.DragOver="dragOver",ee.RegisterDroppable="registerDroppable",ee.SetDroppableDisabled="setDroppableDisabled",ee.UnregisterDroppable="unregisterDroppable"})(F||(F={}));function y(){}function h(ee,de){return(0,b.useMemo)(()=>({sensor:ee,options:de!=null?de:{}}),[ee,de])}function Y(){for(var ee=arguments.length,de=new Array(ee),Be=0;Be<ee;Be++)de[Be]=arguments[Be];return(0,b.useMemo)(()=>[...de].filter(or=>or!=null),[...de])}const $=Object.freeze({x:0,y:0});function U(ee,de){return Math.sqrt(Math.pow(ee.x-de.x,2)+Math.pow(ee.y-de.y,2))}function W(ee,de){const Be=getEventCoordinates(ee);if(!Be)return"0 0";const or={x:(Be.x-de.left)/de.width*100,y:(Be.y-de.top)/de.height*100};return or.x+"% "+or.y+"%"}function V(ee,de){let{data:{value:Be}}=ee,{data:{value:or}}=de;return Be-or}function H(ee,de){let{data:{value:Be}}=ee,{data:{value:or}}=de;return or-Be}function Q(ee){let{left:de,top:Be,height:or,width:Rr}=ee;return[{x:de,y:Be},{x:de+Rr,y:Be},{x:de,y:Be+or},{x:de+Rr,y:Be+or}]}function tt(ee,de){if(!ee||ee.length===0)return null;const[Be]=ee;return de?Be[de]:Be}function rt(ee,de,Be){return de===void 0&&(de=ee.left),Be===void 0&&(Be=ee.top),{x:de+ee.width*.5,y:Be+ee.height*.5}}const ct=ee=>{let{collisionRect:de,droppableRects:Be,droppableContainers:or}=ee;const Rr=rt(de,de.left,de.top),Nr=[];for(const Sr of or){const{id:qr}=Sr,hn=Be.get(qr);if(hn){const Dn=U(rt(hn),Rr);Nr.push({id:qr,data:{droppableContainer:Sr,value:Dn}})}}return Nr.sort(V)},ot=ee=>{let{collisionRect:de,droppableRects:Be,droppableContainers:or}=ee;const Rr=Q(de),Nr=[];for(const Sr of or){const{id:qr}=Sr,hn=Be.get(qr);if(hn){const Dn=Q(hn),sa=Rr.reduce((ga,ya,di)=>ga+U(Dn[di],ya),0),qn=Number((sa/4).toFixed(4));Nr.push({id:qr,data:{droppableContainer:Sr,value:qn}})}}return Nr.sort(V)};function xt(ee,de){const Be=Math.max(de.top,ee.top),or=Math.max(de.left,ee.left),Rr=Math.min(de.left+de.width,ee.left+ee.width),Nr=Math.min(de.top+de.height,ee.top+ee.height),Sr=Rr-or,qr=Nr-Be;if(or<Rr&&Be<Nr){const hn=de.width*de.height,Dn=ee.width*ee.height,sa=Sr*qr,qn=sa/(hn+Dn-sa);return Number(qn.toFixed(4))}return 0}const pt=ee=>{let{collisionRect:de,droppableRects:Be,droppableContainers:or}=ee;const Rr=[];for(const Nr of or){const{id:Sr}=Nr,qr=Be.get(Sr);if(qr){const hn=xt(qr,de);hn>0&&Rr.push({id:Sr,data:{droppableContainer:Nr,value:hn}})}}return Rr.sort(H)};function Xt(ee,de){const{top:Be,left:or,bottom:Rr,right:Nr}=de;return Be<=ee.y&&ee.y<=Rr&&or<=ee.x&&ee.x<=Nr}const Ct=ee=>{let{droppableContainers:de,droppableRects:Be,pointerCoordinates:or}=ee;if(!or)return[];const Rr=[];for(const Nr of de){const{id:Sr}=Nr,qr=Be.get(Sr);if(qr&&Xt(or,qr)){const Dn=Q(qr).reduce((qn,ga)=>qn+U(or,ga),0),sa=Number((Dn/4).toFixed(4));Rr.push({id:Sr,data:{droppableContainer:Nr,value:sa}})}}return Rr.sort(V)};function At(ee,de,Be){return So(Pa({},ee),{scaleX:de&&Be?de.width/Be.width:1,scaleY:de&&Be?de.height/Be.height:1})}function Z(ee,de){return ee&&de?{x:ee.left-de.left,y:ee.top-de.top}:$}function q(ee){return function(Be){for(var or=arguments.length,Rr=new Array(or>1?or-1:0),Nr=1;Nr<or;Nr++)Rr[Nr-1]=arguments[Nr];return Rr.reduce((Sr,qr)=>So(Pa({},Sr),{top:Sr.top+ee*qr.y,bottom:Sr.bottom+ee*qr.y,left:Sr.left+ee*qr.x,right:Sr.right+ee*qr.x}),Pa({},Be))}}const bt=q(1);function _t(ee){if(ee.startsWith("matrix3d(")){const de=ee.slice(9,-1).split(/, /);return{x:+de[12],y:+de[13],scaleX:+de[0],scaleY:+de[5]}}else if(ee.startsWith("matrix(")){const de=ee.slice(7,-1).split(/, /);return{x:+de[4],y:+de[5],scaleX:+de[0],scaleY:+de[3]}}return null}function nt(ee,de,Be){const or=_t(de);if(!or)return ee;const{scaleX:Rr,scaleY:Nr,x:Sr,y:qr}=or,hn=ee.left-Sr-(1-Rr)*parseFloat(Be),Dn=ee.top-qr-(1-Nr)*parseFloat(Be.slice(Be.indexOf(" ")+1)),sa=Rr?ee.width/Rr:ee.width,qn=Nr?ee.height/Nr:ee.height;return{width:sa,height:qn,top:Dn,right:hn+sa,bottom:Dn+qn,left:hn}}const vt={ignoreTransform:!1};function It(ee,de){de===void 0&&(de=vt);let Be=ee.getBoundingClientRect();if(de.ignoreTransform){const{transform:Dn,transformOrigin:sa}=(0,w.Jj)(ee).getComputedStyle(ee);Dn&&(Be=nt(Be,Dn,sa))}const{top:or,left:Rr,width:Nr,height:Sr,bottom:qr,right:hn}=Be;return{top:or,left:Rr,width:Nr,height:Sr,bottom:qr,right:hn}}function Pt(ee){return It(ee,{ignoreTransform:!0})}function Et(ee){const de=ee.innerWidth,Be=ee.innerHeight;return{top:0,left:0,right:de,bottom:Be,width:de,height:Be}}function Nt(ee,de){return de===void 0&&(de=(0,w.Jj)(ee).getComputedStyle(ee)),de.position==="fixed"}function $t(ee,de){de===void 0&&(de=(0,w.Jj)(ee).getComputedStyle(ee));const Be=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(Rr=>{const Nr=de[Rr];return typeof Nr=="string"?Be.test(Nr):!1})}function ue(ee,de){const Be=[];function or(Rr){if(de!=null&&Be.length>=de||!Rr)return Be;if((0,w.qk)(Rr)&&Rr.scrollingElement!=null&&!Be.includes(Rr.scrollingElement))return Be.push(Rr.scrollingElement),Be;if(!(0,w.Re)(Rr)||(0,w.vZ)(Rr)||Be.includes(Rr))return Be;const Nr=(0,w.Jj)(ee).getComputedStyle(Rr);return Rr!==ee&&$t(Rr,Nr)&&Be.push(Rr),Nt(Rr,Nr)?Be:or(Rr.parentNode)}return ee?or(ee):Be}function ie(ee){const[de]=ue(ee,1);return de!=null?de:null}function Dt(ee){return!w.Nq||!ee?null:(0,w.FJ)(ee)?ee:(0,w.UG)(ee)?(0,w.qk)(ee)||ee===(0,w.r3)(ee).scrollingElement?window:(0,w.Re)(ee)?ee:null:null}function ne(ee){return(0,w.FJ)(ee)?ee.scrollX:ee.scrollLeft}function pe(ee){return(0,w.FJ)(ee)?ee.scrollY:ee.scrollTop}function Wt(ee){return{x:ne(ee),y:pe(ee)}}var ae;(function(ee){ee[ee.Forward=1]="Forward",ee[ee.Backward=-1]="Backward"})(ae||(ae={}));function Se(ee){return!w.Nq||!ee?!1:ee===document.scrollingElement}function be(ee){const de={x:0,y:0},Be=Se(ee)?{height:window.innerHeight,width:window.innerWidth}:{height:ee.clientHeight,width:ee.clientWidth},or={x:ee.scrollWidth-Be.width,y:ee.scrollHeight-Be.height},Rr=ee.scrollTop<=de.y,Nr=ee.scrollLeft<=de.x,Sr=ee.scrollTop>=or.y,qr=ee.scrollLeft>=or.x;return{isTop:Rr,isLeft:Nr,isBottom:Sr,isRight:qr,maxScroll:or,minScroll:de}}const Qt={x:.2,y:.2};function we(ee,de,Be,or,Rr){let{top:Nr,left:Sr,right:qr,bottom:hn}=Be;or===void 0&&(or=10),Rr===void 0&&(Rr=Qt);const{isTop:Dn,isBottom:sa,isLeft:qn,isRight:ga}=be(ee),ya={x:0,y:0},di={x:0,y:0},Ma={height:de.height*Rr.y,width:de.width*Rr.x};return!Dn&&Nr<=de.top+Ma.height?(ya.y=ae.Backward,di.y=or*Math.abs((de.top+Ma.height-Nr)/Ma.height)):!sa&&hn>=de.bottom-Ma.height&&(ya.y=ae.Forward,di.y=or*Math.abs((de.bottom-Ma.height-hn)/Ma.height)),!ga&&qr>=de.right-Ma.width?(ya.x=ae.Forward,di.x=or*Math.abs((de.right-Ma.width-qr)/Ma.width)):!qn&&Sr<=de.left+Ma.width&&(ya.x=ae.Backward,di.x=or*Math.abs((de.left+Ma.width-Sr)/Ma.width)),{direction:ya,speed:di}}function Tt(ee){if(ee===document.scrollingElement){const{innerWidth:Nr,innerHeight:Sr}=window;return{top:0,left:0,right:Nr,bottom:Sr,width:Nr,height:Sr}}const{top:de,left:Be,right:or,bottom:Rr}=ee.getBoundingClientRect();return{top:de,left:Be,right:or,bottom:Rr,width:ee.clientWidth,height:ee.clientHeight}}function Le(ee){return ee.reduce((de,Be)=>(0,w.IH)(de,Wt(Be)),$)}function Mr(ee){return ee.reduce((de,Be)=>de+ne(Be),0)}function Ar(ee){return ee.reduce((de,Be)=>de+pe(Be),0)}function Ir(ee,de){if(de===void 0&&(de=It),!ee)return;const{top:Be,left:or,bottom:Rr,right:Nr}=de(ee);ie(ee)&&(Rr<=0||Nr<=0||Be>=window.innerHeight||or>=window.innerWidth)&&ee.scrollIntoView({block:"center",inline:"center"})}const Br=[["x",["left","right"],Mr],["y",["top","bottom"],Ar]];class dn{constructor(de,Be){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const or=ue(Be),Rr=Le(or);this.rect=Pa({},de),this.width=de.width,this.height=de.height;for(const[Nr,Sr,qr]of Br)for(const hn of Sr)Object.defineProperty(this,hn,{get:()=>{const Dn=qr(or),sa=Rr[Nr]-Dn;return this.rect[hn]+sa},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class an{constructor(de){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(Be=>{var or;return(or=this.target)==null?void 0:or.removeEventListener(...Be)})},this.target=de}add(de,Be,or){var Rr;(Rr=this.target)==null||Rr.addEventListener(de,Be,or),this.listeners.push([de,Be,or])}}function Ln(ee){const{EventTarget:de}=(0,w.Jj)(ee);return ee instanceof de?ee:(0,w.r3)(ee)}function Un(ee,de){const Be=Math.abs(ee.x),or=Math.abs(ee.y);return typeof de=="number"?Math.sqrt(Av(Be,2)+Av(or,2))>de:"x"in de&&"y"in de?Be>de.x&&or>de.y:"x"in de?Be>de.x:"y"in de?or>de.y:!1}var Yn;(function(ee){ee.Click="click",ee.DragStart="dragstart",ee.Keydown="keydown",ee.ContextMenu="contextmenu",ee.Resize="resize",ee.SelectionChange="selectionchange",ee.VisibilityChange="visibilitychange"})(Yn||(Yn={}));function xr(ee){ee.preventDefault()}function qe(ee){ee.stopPropagation()}var Cr;(function(ee){ee.Space="Space",ee.Down="ArrowDown",ee.Right="ArrowRight",ee.Left="ArrowLeft",ee.Up="ArrowUp",ee.Esc="Escape",ee.Enter="Enter"})(Cr||(Cr={}));const tn={start:[Cr.Space,Cr.Enter],cancel:[Cr.Esc],end:[Cr.Space,Cr.Enter]},vn=(ee,de)=>{let{currentCoordinates:Be}=de;switch(ee.code){case Cr.Right:return So(Pa({},Be),{x:Be.x+25});case Cr.Left:return So(Pa({},Be),{x:Be.x-25});case Cr.Down:return So(Pa({},Be),{y:Be.y+25});case Cr.Up:return So(Pa({},Be),{y:Be.y-25})}};class _n{constructor(de){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=de;const{event:{target:Be}}=de;this.props=de,this.listeners=new an((0,w.r3)(Be)),this.windowListeners=new an((0,w.Jj)(Be)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Yn.Resize,this.handleCancel),this.windowListeners.add(Yn.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Yn.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:de,onStart:Be}=this.props,or=de.node.current;or&&Ir(or),Be($)}handleKeyDown(de){if((0,w.vd)(de)){const{active:Be,context:or,options:Rr}=this.props,{keyboardCodes:Nr=tn,coordinateGetter:Sr=vn,scrollBehavior:qr="smooth"}=Rr,{code:hn}=de;if(Nr.end.includes(hn)){this.handleEnd(de);return}if(Nr.cancel.includes(hn)){this.handleCancel(de);return}const{collisionRect:Dn}=or.current,sa=Dn?{x:Dn.left,y:Dn.top}:$;this.referenceCoordinates||(this.referenceCoordinates=sa);const qn=Sr(de,{active:Be,context:or.current,currentCoordinates:sa});if(qn){const ga=(0,w.$X)(qn,sa),ya={x:0,y:0},{scrollableAncestors:di}=or.current;for(const Ma of di){const ua=de.code,{isTop:ci,isRight:ei,isLeft:Fa,isBottom:Di,maxScroll:yi,minScroll:ka}=be(Ma),ja=Tt(Ma),Oa={x:Math.min(ua===Cr.Right?ja.right-ja.width/2:ja.right,Math.max(ua===Cr.Right?ja.left:ja.left+ja.width/2,qn.x)),y:Math.min(ua===Cr.Down?ja.bottom-ja.height/2:ja.bottom,Math.max(ua===Cr.Down?ja.top:ja.top+ja.height/2,qn.y))},Ni=ua===Cr.Right&&!ei||ua===Cr.Left&&!Fa,Mi=ua===Cr.Down&&!Di||ua===Cr.Up&&!ci;if(Ni&&Oa.x!==qn.x){const Ri=Ma.scrollLeft+ga.x,co=ua===Cr.Right&&Ri<=yi.x||ua===Cr.Left&&Ri>=ka.x;if(co&&!ga.y){Ma.scrollTo({left:Ri,behavior:qr});return}co?ya.x=Ma.scrollLeft-Ri:ya.x=ua===Cr.Right?Ma.scrollLeft-yi.x:Ma.scrollLeft-ka.x,ya.x&&Ma.scrollBy({left:-ya.x,behavior:qr});break}else if(Mi&&Oa.y!==qn.y){const Ri=Ma.scrollTop+ga.y,co=ua===Cr.Down&&Ri<=yi.y||ua===Cr.Up&&Ri>=ka.y;if(co&&!ga.x){Ma.scrollTo({top:Ri,behavior:qr});return}co?ya.y=Ma.scrollTop-Ri:ya.y=ua===Cr.Down?Ma.scrollTop-yi.y:Ma.scrollTop-ka.y,ya.y&&Ma.scrollBy({top:-ya.y,behavior:qr});break}}this.handleMove(de,(0,w.IH)((0,w.$X)(qn,this.referenceCoordinates),ya))}}}handleMove(de,Be){const{onMove:or}=this.props;de.preventDefault(),or(Be)}handleEnd(de){const{onEnd:Be}=this.props;de.preventDefault(),this.detach(),Be()}handleCancel(de){const{onCancel:Be}=this.props;de.preventDefault(),this.detach(),Be()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}_n.activators=[{eventName:"onKeyDown",handler:(ee,de,Be)=>{let{keyboardCodes:or=tn,onActivation:Rr}=de,{active:Nr}=Be;const{code:Sr}=ee.nativeEvent;if(or.start.includes(Sr)){const qr=Nr.activatorNode.current;return qr&&ee.target!==qr?!1:(ee.preventDefault(),Rr==null||Rr({event:ee.nativeEvent}),!0)}return!1}}];function Pn(ee){return!!(ee&&"distance"in ee)}function _r(ee){return!!(ee&&"delay"in ee)}class un{constructor(de,Be,or){var Rr;or===void 0&&(or=Ln(de.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=de,this.events=Be;const{event:Nr}=de,{target:Sr}=Nr;this.props=de,this.events=Be,this.document=(0,w.r3)(Sr),this.documentListeners=new an(this.document),this.listeners=new an(or),this.windowListeners=new an((0,w.Jj)(Sr)),this.initialCoordinates=(Rr=(0,w.DC)(Nr))!=null?Rr:$,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:de,props:{options:{activationConstraint:Be}}}=this;if(this.listeners.add(de.move.name,this.handleMove,{passive:!1}),this.listeners.add(de.end.name,this.handleEnd),this.windowListeners.add(Yn.Resize,this.handleCancel),this.windowListeners.add(Yn.DragStart,xr),this.windowListeners.add(Yn.VisibilityChange,this.handleCancel),this.windowListeners.add(Yn.ContextMenu,xr),this.documentListeners.add(Yn.Keydown,this.handleKeydown),Be){if(Pn(Be))return;if(_r(Be)){this.timeoutId=setTimeout(this.handleStart,Be.delay);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handleStart(){const{initialCoordinates:de}=this,{onStart:Be}=this.props;de&&(this.activated=!0,this.documentListeners.add(Yn.Click,qe,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Yn.SelectionChange,this.removeTextSelection),Be(de))}handleMove(de){var Be;const{activated:or,initialCoordinates:Rr,props:Nr}=this,{onMove:Sr,options:{activationConstraint:qr}}=Nr;if(!Rr)return;const hn=(Be=(0,w.DC)(de))!=null?Be:$,Dn=(0,w.$X)(Rr,hn);if(!or&&qr){if(_r(qr))return Un(Dn,qr.tolerance)?this.handleCancel():void 0;if(Pn(qr))return qr.tolerance!=null&&Un(Dn,qr.tolerance)?this.handleCancel():Un(Dn,qr.distance)?this.handleStart():void 0}de.cancelable&&de.preventDefault(),Sr(hn)}handleEnd(){const{onEnd:de}=this.props;this.detach(),de()}handleCancel(){const{onCancel:de}=this.props;this.detach(),de()}handleKeydown(de){de.code===Cr.Esc&&this.handleCancel()}removeTextSelection(){var de;(de=this.document.getSelection())==null||de.removeAllRanges()}}const An={move:{name:"pointermove"},end:{name:"pointerup"}};class on extends un{constructor(de){const{event:Be}=de,or=(0,w.r3)(Be.target);super(de,An,or)}}on.activators=[{eventName:"onPointerDown",handler:(ee,de)=>{let{nativeEvent:Be}=ee,{onActivation:or}=de;return!Be.isPrimary||Be.button!==0?!1:(or==null||or({event:Be}),!0)}}];const Wn={move:{name:"mousemove"},end:{name:"mouseup"}};var Cn;(function(ee){ee[ee.RightClick=2]="RightClick"})(Cn||(Cn={}));class On extends un{constructor(de){super(de,Wn,(0,w.r3)(de.event.target))}}On.activators=[{eventName:"onMouseDown",handler:(ee,de)=>{let{nativeEvent:Be}=ee,{onActivation:or}=de;return Be.button===Cn.RightClick?!1:(or==null||or({event:Be}),!0)}}];const jn={move:{name:"touchmove"},end:{name:"touchend"}};class at extends un{constructor(de){super(de,jn)}static setup(){return window.addEventListener(jn.move.name,de,{capture:!1,passive:!1}),function(){window.removeEventListener(jn.move.name,de)};function de(){}}}at.activators=[{eventName:"onTouchStart",handler:(ee,de)=>{let{nativeEvent:Be}=ee,{onActivation:or}=de;const{touches:Rr}=Be;return Rr.length>1?!1:(or==null||or({event:Be}),!0)}}];var Ze;(function(ee){ee[ee.Pointer=0]="Pointer",ee[ee.DraggableRect=1]="DraggableRect"})(Ze||(Ze={}));var qt;(function(ee){ee[ee.TreeOrder=0]="TreeOrder",ee[ee.ReversedTreeOrder=1]="ReversedTreeOrder"})(qt||(qt={}));function Jt(ee){let{acceleration:de,activator:Be=Ze.Pointer,canScroll:or,draggingRect:Rr,enabled:Nr,interval:Sr=5,order:qr=qt.TreeOrder,pointerCoordinates:hn,scrollableAncestors:Dn,scrollableAncestorRects:sa,delta:qn,threshold:ga}=ee;const ya=Ce({delta:qn,disabled:!Nr}),[di,Ma]=(0,w.Yz)(),ua=(0,b.useRef)({x:0,y:0}),ci=(0,b.useRef)({x:0,y:0}),ei=(0,b.useMemo)(()=>{switch(Be){case Ze.Pointer:return hn?{top:hn.y,bottom:hn.y,left:hn.x,right:hn.x}:null;case Ze.DraggableRect:return Rr}},[Be,Rr,hn]),Fa=(0,b.useRef)(null),Di=(0,b.useCallback)(()=>{const ka=Fa.current;if(!ka)return;const ja=ua.current.x*ci.current.x,Oa=ua.current.y*ci.current.y;ka.scrollBy(ja,Oa)},[]),yi=(0,b.useMemo)(()=>qr===qt.TreeOrder?[...Dn].reverse():Dn,[qr,Dn]);(0,b.useEffect)(()=>{if(!Nr||!Dn.length||!ei){Ma();return}for(const ka of yi){if((or==null?void 0:or(ka))===!1)continue;const ja=Dn.indexOf(ka),Oa=sa[ja];if(!Oa)continue;const{direction:Ni,speed:Mi}=we(ka,Oa,ei,de,ga);for(const Ri of["x","y"])ya[Ri][Ni[Ri]]||(Mi[Ri]=0,Ni[Ri]=0);if(Mi.x>0||Mi.y>0){Ma(),Fa.current=ka,di(Di,Sr),ua.current=Mi,ci.current=Ni;return}}ua.current={x:0,y:0},ci.current={x:0,y:0},Ma()},[de,Di,or,Ma,Nr,Sr,JSON.stringify(ei),JSON.stringify(ya),di,Dn,yi,sa,JSON.stringify(ga)])}const St={x:{[ae.Backward]:!1,[ae.Forward]:!1},y:{[ae.Backward]:!1,[ae.Forward]:!1}};function Ce(ee){let{delta:de,disabled:Be}=ee;const or=(0,w.D9)(de);return(0,w.Gj)(Rr=>{if(Be||!or||!Rr)return St;const Nr={x:Math.sign(de.x-or.x),y:Math.sign(de.y-or.y)};return{x:{[ae.Backward]:Rr.x[ae.Backward]||Nr.x===-1,[ae.Forward]:Rr.x[ae.Forward]||Nr.x===1},y:{[ae.Backward]:Rr.y[ae.Backward]||Nr.y===-1,[ae.Forward]:Rr.y[ae.Forward]||Nr.y===1}}},[Be,de,or])}function kt(ee,de){const Be=de!==null?ee.get(de):void 0,or=Be?Be.node.current:null;return(0,w.Gj)(Rr=>{var Nr;return de===null?null:(Nr=or!=null?or:Rr)!=null?Nr:null},[or,de])}function Kt(ee,de){return(0,b.useMemo)(()=>ee.reduce((Be,or)=>{const{sensor:Rr}=or,Nr=Rr.activators.map(Sr=>({eventName:Sr.eventName,handler:de(Sr.handler,or)}));return[...Be,...Nr]},[]),[ee,de])}var dt;(function(ee){ee[ee.Always=0]="Always",ee[ee.BeforeDragging=1]="BeforeDragging",ee[ee.WhileDragging=2]="WhileDragging"})(dt||(dt={}));var Ut;(function(ee){ee.Optimized="optimized"})(Ut||(Ut={}));const J=new Map;function it(ee,de){let{dragging:Be,dependencies:or,config:Rr}=de;const[Nr,Sr]=(0,b.useState)(null),{frequency:qr,measure:hn,strategy:Dn}=Rr,sa=(0,b.useRef)(ee),qn=ua(),ga=(0,w.Ey)(qn),ya=(0,b.useCallback)(function(ci){ci===void 0&&(ci=[]),!ga.current&&Sr(ei=>ei===null?ci:ei.concat(ci.filter(Fa=>!ei.includes(Fa))))},[ga]),di=(0,b.useRef)(null),Ma=(0,w.Gj)(ci=>{if(qn&&!Be)return J;if(!ci||ci===J||sa.current!==ee||Nr!=null){const ei=new Map;for(let Fa of ee){if(!Fa)continue;if(Nr&&Nr.length>0&&!Nr.includes(Fa.id)&&Fa.rect.current){ei.set(Fa.id,Fa.rect.current);continue}const Di=Fa.node.current,yi=Di?new dn(hn(Di),Di):null;Fa.rect.current=yi,yi&&ei.set(Fa.id,yi)}return ei}return ci},[ee,Nr,Be,qn,hn]);return(0,b.useEffect)(()=>{sa.current=ee},[ee]),(0,b.useEffect)(()=>{qn||ya()},[Be,qn]),(0,b.useEffect)(()=>{Nr&&Nr.length>0&&Sr(null)},[JSON.stringify(Nr)]),(0,b.useEffect)(()=>{qn||typeof qr!="number"||di.current!==null||(di.current=setTimeout(()=>{ya(),di.current=null},qr))},[qr,qn,ya,...or]),{droppableRects:Ma,measureDroppableContainers:ya,measuringScheduled:Nr!=null};function ua(){switch(Dn){case dt.Always:return!1;case dt.BeforeDragging:return Be;default:return!Be}}}function R(ee,de){return(0,w.Gj)(Be=>ee?Be||(typeof de=="function"?de(ee):ee):null,[de,ee])}function M(ee,de){return R(ee,de)}function O(ee){let{callback:de,disabled:Be}=ee;const or=(0,w.zX)(de),Rr=(0,b.useMemo)(()=>{if(Be||typeof window=="undefined"||typeof window.MutationObserver=="undefined")return;const{MutationObserver:Nr}=window;return new Nr(or)},[or,Be]);return(0,b.useEffect)(()=>()=>Rr==null?void 0:Rr.disconnect(),[Rr]),Rr}function X(ee){let{callback:de,disabled:Be}=ee;const or=(0,w.zX)(de),Rr=(0,b.useMemo)(()=>{if(Be||typeof window=="undefined"||typeof window.ResizeObserver=="undefined")return;const{ResizeObserver:Nr}=window;return new Nr(or)},[Be]);return(0,b.useEffect)(()=>()=>Rr==null?void 0:Rr.disconnect(),[Rr]),Rr}function mt(ee){return new dn(It(ee),ee)}function Ft(ee,de,Be){de===void 0&&(de=mt);const[or,Rr]=(0,b.useReducer)(qr,null),Nr=O({callback(hn){if(ee)for(const Dn of hn){const{type:sa,target:qn}=Dn;if(sa==="childList"&&qn instanceof HTMLElement&&qn.contains(ee)){Rr();break}}}}),Sr=X({callback:Rr});return(0,w.LI)(()=>{Rr(),ee?(Sr==null||Sr.observe(ee),Nr==null||Nr.observe(document.body,{childList:!0,subtree:!0})):(Sr==null||Sr.disconnect(),Nr==null||Nr.disconnect())},[ee]),or;function qr(hn){if(!ee)return null;if(ee.isConnected===!1){var Dn;return(Dn=hn!=null?hn:Be)!=null?Dn:null}const sa=de(ee);return JSON.stringify(hn)===JSON.stringify(sa)?hn:sa}}function Bt(ee){const de=R(ee);return Z(ee,de)}const re=[];function De(ee){const de=(0,b.useRef)(ee),Be=(0,w.Gj)(or=>ee?or&&or!==re&&ee&&de.current&&ee.parentNode===de.current.parentNode?or:ue(ee):re,[ee]);return(0,b.useEffect)(()=>{de.current=ee},[ee]),Be}function me(ee){const[de,Be]=(0,b.useState)(null),or=(0,b.useRef)(ee),Rr=(0,b.useCallback)(Nr=>{const Sr=Dt(Nr.target);Sr&&Be(qr=>qr?(qr.set(Sr,Wt(Sr)),new Map(qr)):null)},[]);return(0,b.useEffect)(()=>{const Nr=or.current;if(ee!==Nr){Sr(Nr);const qr=ee.map(hn=>{const Dn=Dt(hn);return Dn?(Dn.addEventListener("scroll",Rr,{passive:!0}),[Dn,Wt(Dn)]):null}).filter(hn=>hn!=null);Be(qr.length?new Map(qr):null),or.current=ee}return()=>{Sr(ee),Sr(Nr)};function Sr(qr){qr.forEach(hn=>{const Dn=Dt(hn);Dn==null||Dn.removeEventListener("scroll",Rr)})}},[Rr,ee]),(0,b.useMemo)(()=>ee.length?de?Array.from(de.values()).reduce((Nr,Sr)=>(0,w.IH)(Nr,Sr),$):Le(ee):$,[ee,de])}function Xe(ee,de){de===void 0&&(de=[]);const Be=(0,b.useRef)(null);return(0,b.useEffect)(()=>{Be.current=null},de),(0,b.useEffect)(()=>{const or=ee!==$;or&&!Be.current&&(Be.current=ee),!or&&Be.current&&(Be.current=null)},[ee]),Be.current?(0,w.$X)(ee,Be.current):$}function hr(ee){(0,b.useEffect)(()=>{if(!w.Nq)return;const de=ee.map(Be=>{let{sensor:or}=Be;return or.setup==null?void 0:or.setup()});return()=>{for(const Be of de)Be==null||Be()}},ee.map(de=>{let{sensor:Be}=de;return Be}))}function Ke(ee,de){return(0,b.useMemo)(()=>ee.reduce((Be,or)=>{let{eventName:Rr,handler:Nr}=or;return Be[Rr]=Sr=>{Nr(Sr,de)},Be},{}),[ee,de])}function Lr(ee){return(0,b.useMemo)(()=>ee?Et(ee):null,[ee])}const cn=[];function $e(ee,de){de===void 0&&(de=It);const[Be]=ee,or=Lr(Be?(0,w.Jj)(Be):null),[Rr,Nr]=(0,b.useReducer)(qr,cn),Sr=X({callback:Nr});return ee.length>0&&Rr===cn&&Nr(),(0,w.LI)(()=>{ee.length?ee.forEach(hn=>Sr==null?void 0:Sr.observe(hn)):(Sr==null||Sr.disconnect(),Nr())},[ee]),Rr;function qr(){return ee.length?ee.map(hn=>Se(hn)?or:new dn(de(hn),hn)):cn}}function lr(ee){if(!ee)return null;if(ee.children.length>1)return ee;const de=ee.children[0];return(0,w.Re)(de)?de:ee}function Pr(ee){let{measure:de}=ee;const[Be,or]=(0,b.useState)(null),Rr=(0,b.useCallback)(Dn=>{for(const{target:sa}of Dn)if((0,w.Re)(sa)){or(qn=>{const ga=de(sa);return qn?So(Pa({},qn),{width:ga.width,height:ga.height}):ga});break}},[de]),Nr=X({callback:Rr}),Sr=(0,b.useCallback)(Dn=>{const sa=lr(Dn);Nr==null||Nr.disconnect(),sa&&(Nr==null||Nr.observe(sa)),or(sa?de(sa):null)},[de,Nr]),[qr,hn]=(0,w.wm)(Sr);return(0,b.useMemo)(()=>({nodeRef:qr,rect:Be,setRef:hn}),[Be,qr,hn])}const Dr=[{sensor:on,options:{}},{sensor:_n,options:{}}],fe={current:{}},jt={draggable:{measure:Pt},droppable:{measure:Pt,strategy:dt.WhileDragging,frequency:Ut.Optimized},dragOverlay:{measure:It}};class ve extends Map{get(de){var Be;return de!=null&&(Be=super.get(de))!=null?Be:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(de=>{let{disabled:Be}=de;return!Be})}getNodeFor(de){var Be,or;return(Be=(or=this.get(de))==null?void 0:or.node.current)!=null?Be:void 0}}const Ie={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new ve,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:y},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:jt,measureDroppableContainers:y,windowRect:null,measuringScheduled:!1},ye={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:y,draggableNodes:new Map,over:null,measureDroppableContainers:y},ze=(0,b.createContext)(ye),sr=(0,b.createContext)(Ie);function pr(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new ve}}}function en(ee,de){switch(de.type){case F.DragStart:return So(Pa({},ee),{draggable:So(Pa({},ee.draggable),{initialCoordinates:de.initialCoordinates,active:de.active})});case F.DragMove:return ee.draggable.active?So(Pa({},ee),{draggable:So(Pa({},ee.draggable),{translate:{x:de.coordinates.x-ee.draggable.initialCoordinates.x,y:de.coordinates.y-ee.draggable.initialCoordinates.y}})}):ee;case F.DragEnd:case F.DragCancel:return So(Pa({},ee),{draggable:So(Pa({},ee.draggable),{active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}})});case F.RegisterDroppable:{const{element:Be}=de,{id:or}=Be,Rr=new ve(ee.droppable.containers);return Rr.set(or,Be),So(Pa({},ee),{droppable:So(Pa({},ee.droppable),{containers:Rr})})}case F.SetDroppableDisabled:{const{id:Be,key:or,disabled:Rr}=de,Nr=ee.droppable.containers.get(Be);if(!Nr||or!==Nr.key)return ee;const Sr=new ve(ee.droppable.containers);return Sr.set(Be,So(Pa({},Nr),{disabled:Rr})),So(Pa({},ee),{droppable:So(Pa({},ee.droppable),{containers:Sr})})}case F.UnregisterDroppable:{const{id:Be,key:or}=de,Rr=ee.droppable.containers.get(Be);if(!Rr||or!==Rr.key)return ee;const Nr=new ve(ee.droppable.containers);return Nr.delete(Be),So(Pa({},ee),{droppable:So(Pa({},ee.droppable),{containers:Nr})})}default:return ee}}function Fn(ee){let{disabled:de}=ee;const{active:Be,activatorEvent:or,draggableNodes:Rr}=(0,b.useContext)(ze),Nr=(0,w.D9)(or),Sr=(0,w.D9)(Be==null?void 0:Be.id);return(0,b.useEffect)(()=>{if(!de&&!or&&Nr&&Sr!=null){if(!(0,w.vd)(Nr)||document.activeElement===Nr.target)return;const qr=Rr.get(Sr);if(!qr)return;const{activatorNode:hn,node:Dn}=qr;if(!hn.current&&!Dn.current)return;requestAnimationFrame(()=>{for(const sa of[hn.current,Dn.current]){if(!sa)continue;const qn=(0,w.so)(sa);if(qn){qn.focus();break}}})}},[or,de,Rr,Sr,Nr]),null}function ln(ee,de){let Rr=de,{transform:Be}=Rr,or=_h(Rr,["transform"]);return ee!=null&&ee.length?ee.reduce((Nr,Sr)=>Sr(Pa({transform:Nr},or)),Be):Be}function ea(ee){return(0,b.useMemo)(()=>({draggable:Pa(Pa({},jt.draggable),ee==null?void 0:ee.draggable),droppable:Pa(Pa({},jt.droppable),ee==null?void 0:ee.droppable),dragOverlay:Pa(Pa({},jt.dragOverlay),ee==null?void 0:ee.dragOverlay)}),[ee==null?void 0:ee.draggable,ee==null?void 0:ee.droppable,ee==null?void 0:ee.dragOverlay])}function fn(ee){let{activeNode:de,measure:Be,initialRect:or,config:Rr=!0}=ee;const Nr=(0,b.useRef)(!1),{x:Sr,y:qr}=typeof Rr=="boolean"?{x:Rr,y:Rr}:Rr;(0,w.LI)(()=>{if(!Sr&&!qr||!de){Nr.current=!1;return}if(Nr.current||!or)return;const Dn=de==null?void 0:de.node.current;if(!Dn||Dn.isConnected===!1)return;const sa=Be(Dn),qn=Z(sa,or);if(Sr||(qn.x=0),qr||(qn.y=0),Nr.current=!0,Math.abs(qn.x)>0||Math.abs(qn.y)>0){const ga=ie(Dn);ga&&ga.scrollBy({top:qn.y,left:qn.x})}},[de,Sr,qr,or,Be])}const Hn=(0,b.createContext)(So(Pa({},$),{scaleX:1,scaleY:1}));var la;(function(ee){ee[ee.Uninitialized=0]="Uninitialized",ee[ee.Initializing=1]="Initializing",ee[ee.Initialized=2]="Initialized"})(la||(la={}));const xa=(0,b.memo)(function(de){var Be,or,Rr,Nr;let Cu=de,{id:Sr,accessibility:qr,autoScroll:hn=!0,children:Dn,sensors:sa=Dr,collisionDetection:qn=pt,measuring:ga,modifiers:ya}=Cu,di=_h(Cu,["id","accessibility","autoScroll","children","sensors","collisionDetection","measuring","modifiers"]);const Ma=(0,b.useReducer)(en,void 0,pr),[ua,ci]=Ma,[ei,Fa]=g(),[Di,yi]=(0,b.useState)(la.Uninitialized),ka=Di===la.Initialized,{draggable:{active:ja,nodes:Oa,translate:Ni},droppable:{containers:Mi}}=ua,Ri=ja?Oa.get(ja):null,co=(0,b.useRef)({initial:null,translated:null}),qi=(0,b.useMemo)(()=>{var bo;return ja!=null?{id:ja,data:(bo=Ri==null?void 0:Ri.data)!=null?bo:fe,rect:co}:null},[ja,Ri]),mo=(0,b.useRef)(null),[ts,es]=(0,b.useState)(null),[no,ni]=(0,b.useState)(null),Fi=(0,w.Ey)(di,Object.values(di)),fo=(0,w.Ld)("DndDescribedBy",Sr),Ya=(0,b.useMemo)(()=>Mi.getEnabled(),[Mi]),yo=ea(ga),{droppableRects:ko,measureDroppableContainers:ji,measuringScheduled:is}=it(Ya,{dragging:ka,dependencies:[Ni.x,Ni.y],config:yo.droppable}),zi=kt(Oa,ja),Bo=(0,b.useMemo)(()=>no?(0,w.DC)(no):null,[no]),cs=_u(),Cs=M(zi,yo.draggable.measure);fn({activeNode:ja?Oa.get(ja):null,config:cs.layoutShiftCompensation,initialRect:Cs,measure:yo.draggable.measure});const xo=Ft(zi,yo.draggable.measure,Cs),fs=Ft(zi?zi.parentElement:null),ls=(0,b.useRef)({activatorEvent:null,active:null,activeNode:zi,collisionRect:null,collisions:null,droppableRects:ko,draggableNodes:Oa,draggingNode:null,draggingNodeRect:null,droppableContainers:Mi,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Ds=Mi.getNodeFor((Be=ls.current.over)==null?void 0:Be.id),Aa=Pr({measure:yo.dragOverlay.measure}),Yt=(or=Aa.nodeRef.current)!=null?or:zi,Ge=ka?(Rr=Aa.rect)!=null?Rr:xo:null,nr=!!(Aa.nodeRef.current&&Aa.rect),gr=Bt(nr?null:xo),Zr=Lr(Yt?(0,w.Jj)(Yt):null),pn=De(ka?Ds!=null?Ds:zi:null),$n=$e(pn),qa=ln(ya,{transform:{x:Ni.x-gr.x,y:Ni.y-gr.y,scaleX:1,scaleY:1},activatorEvent:no,active:qi,activeNodeRect:xo,containerNodeRect:fs,draggingNodeRect:Ge,over:ls.current.over,overlayNodeRect:Aa.rect,scrollableAncestors:pn,scrollableAncestorRects:$n,windowRect:Zr}),ki=Bo?(0,w.IH)(Bo,Ni):null,Do=me(pn),Ho=Xe(Do),ks=Xe(Do,[xo]),Qi=(0,w.IH)(qa,Ho),Lo=Ge?bt(Ge,qa):null,ds=qi&&Lo?qn({active:qi,collisionRect:Lo,droppableRects:ko,droppableContainers:Ya,pointerCoordinates:ki}):null,Bs=tt(ds,"id"),[ps,Vs]=(0,b.useState)(null),qs=nr?qa:(0,w.IH)(qa,ks),Hs=At(qs,(Nr=ps==null?void 0:ps.rect)!=null?Nr:null,xo),fu=(0,b.useCallback)((bo,Zo)=>{let{sensor:ss,options:d}=Zo;if(mo.current==null)return;const G=Oa.get(mo.current);if(!G)return;const wt=bo.nativeEvent,Gt=new ss({active:mo.current,activeNode:G,event:wt,options:d,context:ls,onStart(he){const ge=mo.current;if(ge==null)return;const Oe=Oa.get(ge);if(!Oe)return;const{onDragStart:Fe}=Fi.current,He={active:{id:ge,data:Oe.data,rect:co}};(0,k.unstable_batchedUpdates)(()=>{Fe==null||Fe(He),yi(la.Initializing),ci({type:F.DragStart,initialCoordinates:he,active:ge}),ei({type:"onDragStart",event:He})})},onMove(he){ci({type:F.DragMove,coordinates:he})},onEnd:te(F.DragEnd),onCancel:te(F.DragCancel)});(0,k.unstable_batchedUpdates)(()=>{es(Gt),ni(bo.nativeEvent)});function te(he){return function(){return B0(this,null,function*(){const{active:Oe,collisions:Fe,over:He,scrollAdjustedTranslate:ur}=ls.current;let Ur=null;if(Oe&&ur){const{cancelDrop:jr}=Fi.current;Ur={activatorEvent:wt,active:Oe,collisions:Fe,delta:ur,over:He},he===F.DragEnd&&typeof jr=="function"&&(yield Promise.resolve(jr(Ur)))&&(he=F.DragCancel)}mo.current=null,(0,k.unstable_batchedUpdates)(()=>{ci({type:he}),yi(la.Uninitialized),Vs(null),es(null),ni(null);const jr=he===F.DragEnd?"onDragEnd":"onDragCancel";if(Ur){const Wr=Fi.current[jr];Wr==null||Wr(Ur),ei({type:jr,event:Ur})}})})}}},[Oa]),gs=(0,b.useCallback)((bo,Zo)=>(ss,d)=>{const G=ss.nativeEvent,wt=Oa.get(d);if(mo.current!==null||!wt||G.dndKit||G.defaultPrevented)return;const Gt={active:wt};bo(ss,Zo.options,Gt)===!0&&(G.dndKit={capturedBy:Zo.sensor},mo.current=d,fu(ss,Zo))},[Oa,fu]),Ls=Kt(sa,gs);hr(sa),(0,w.LI)(()=>{xo&&Di===la.Initializing&&yi(la.Initialized)},[xo,Di]),(0,b.useEffect)(()=>{const{onDragMove:bo}=Fi.current,{active:Zo,activatorEvent:ss,collisions:d,over:G}=ls.current;if(!Zo||!ss)return;const wt={active:Zo,activatorEvent:ss,collisions:d,delta:{x:Qi.x,y:Qi.y},over:G};(0,k.unstable_batchedUpdates)(()=>{bo==null||bo(wt),ei({type:"onDragMove",event:wt})})},[Qi.x,Qi.y]),(0,b.useEffect)(()=>{const{active:bo,activatorEvent:Zo,collisions:ss,droppableContainers:d,scrollAdjustedTranslate:G}=ls.current;if(!bo||mo.current==null||!Zo||!G)return;const{onDragOver:wt}=Fi.current,Gt=d.get(Bs),te=Gt&&Gt.rect.current?{id:Gt.id,rect:Gt.rect.current,data:Gt.data,disabled:Gt.disabled}:null,he={active:bo,activatorEvent:Zo,collisions:ss,delta:{x:G.x,y:G.y},over:te};(0,k.unstable_batchedUpdates)(()=>{Vs(te),wt==null||wt(he),ei({type:"onDragOver",event:he})})},[Bs]),(0,w.LI)(()=>{ls.current={activatorEvent:no,active:qi,activeNode:zi,collisionRect:Lo,collisions:ds,droppableRects:ko,draggableNodes:Oa,draggingNode:Yt,draggingNodeRect:Ge,droppableContainers:Mi,over:ps,scrollableAncestors:pn,scrollAdjustedTranslate:Qi},co.current={initial:Ge,translated:Lo}},[qi,zi,ds,Lo,Oa,Yt,Ge,ko,Mi,ps,pn,Qi]),Jt(So(Pa({},cs),{delta:Ni,draggingRect:Lo,pointerCoordinates:ki,scrollableAncestors:pn,scrollableAncestorRects:$n}));const Fs=(0,b.useMemo)(()=>({active:qi,activeNode:zi,activeNodeRect:xo,activatorEvent:no,collisions:ds,containerNodeRect:fs,dragOverlay:Aa,draggableNodes:Oa,droppableContainers:Mi,droppableRects:ko,over:ps,measureDroppableContainers:ji,scrollableAncestors:pn,scrollableAncestorRects:$n,measuringConfiguration:yo,measuringScheduled:is,windowRect:Zr}),[qi,zi,xo,no,ds,fs,Aa,Oa,Mi,ko,ps,ji,pn,$n,yo,is,Zr]),os=(0,b.useMemo)(()=>({activatorEvent:no,activators:Ls,active:qi,activeNodeRect:xo,ariaDescribedById:{draggable:fo},dispatch:ci,draggableNodes:Oa,over:ps,measureDroppableContainers:ji}),[no,Ls,qi,xo,ci,fo,Oa,ps,ji]);return b.createElement(S.Provider,{value:Fa},b.createElement(ze.Provider,{value:os},b.createElement(sr.Provider,{value:Fs},b.createElement(Hn.Provider,{value:Hs},Dn)),b.createElement(Fn,{disabled:(qr==null?void 0:qr.restoreFocus)===!1})),b.createElement(D,So(Pa({},qr),{hiddenTextDescribedById:fo})));function _u(){const bo=(ts==null?void 0:ts.autoScrollEnabled)===!1,Zo=typeof hn=="object"?hn.enabled===!1:hn===!1,ss=ka&&!bo&&!Zo;return typeof hn=="object"?So(Pa({},hn),{enabled:ss}):{enabled:ss}}}),ba=(0,b.createContext)(null),Wi="button",ri="Droppable";function ti(ee){let{id:de,data:Be,disabled:or=!1,attributes:Rr}=ee;const Nr=(0,w.Ld)(ri),{activators:Sr,activatorEvent:qr,active:hn,activeNodeRect:Dn,ariaDescribedById:sa,draggableNodes:qn,over:ga}=(0,b.useContext)(ze),{role:ya=Wi,roleDescription:di="draggable",tabIndex:Ma=0}=Rr!=null?Rr:{},ua=(hn==null?void 0:hn.id)===de,ci=(0,b.useContext)(ua?Hn:ba),[ei,Fa]=(0,w.wm)(),[Di,yi]=(0,w.wm)(),ka=Ke(Sr,de),ja=(0,w.Ey)(Be);(0,w.LI)(()=>(qn.set(de,{id:de,key:Nr,node:ei,activatorNode:Di,data:ja}),()=>{const Ni=qn.get(de);Ni&&Ni.key===Nr&&qn.delete(de)}),[qn,de]);const Oa=(0,b.useMemo)(()=>({role:ya,tabIndex:Ma,"aria-disabled":or,"aria-pressed":ua&&ya===Wi?!0:void 0,"aria-roledescription":di,"aria-describedby":sa.draggable}),[or,ya,Ma,ua,di,sa.draggable]);return{active:hn,activatorEvent:qr,activeNodeRect:Dn,attributes:Oa,isDragging:ua,listeners:or?void 0:ka,node:ei,over:ga,setNodeRef:Fa,setActivatorNodeRef:yi,transform:ci}}function Si(){return(0,b.useContext)(sr)}const Xi="Droppable",io={timeout:25};function oo(ee){let{data:de,disabled:Be=!1,id:or,resizeObserverConfig:Rr}=ee;const Nr=(0,w.Ld)(Xi),{active:Sr,dispatch:qr,over:hn,measureDroppableContainers:Dn}=(0,b.useContext)(ze),sa=(0,b.useRef)({disabled:Be}),qn=(0,b.useRef)(!1),ga=(0,b.useRef)(null),ya=(0,b.useRef)(null),{disabled:di,updateMeasurementsFor:Ma,timeout:ua}=Pa(Pa({},io),Rr),ci=(0,w.Ey)(Ma!=null?Ma:or),ei=(0,b.useCallback)(()=>{if(!qn.current){qn.current=!0;return}ya.current!=null&&clearTimeout(ya.current),ya.current=setTimeout(()=>{Dn(Array.isArray(ci.current)?ci.current:[ci.current]),ya.current=null},ua)},[ua]),Fa=X({callback:ei,disabled:di||!Sr}),Di=(0,b.useCallback)((Oa,Ni)=>{Fa&&(Ni&&(Fa.unobserve(Ni),qn.current=!1),Oa&&Fa.observe(Oa))},[Fa]),[yi,ka]=(0,w.wm)(Di),ja=(0,w.Ey)(de);return(0,b.useEffect)(()=>{!Fa||!yi.current||(Fa.disconnect(),qn.current=!1,Fa.observe(yi.current))},[yi,Fa]),(0,w.LI)(()=>(qr({type:F.RegisterDroppable,element:{id:or,key:Nr,disabled:Be,node:yi,rect:ga,data:ja}}),()=>qr({type:F.UnregisterDroppable,key:Nr,id:or})),[or]),(0,b.useEffect)(()=>{Be!==sa.current.disabled&&(qr({type:F.SetDroppableDisabled,id:or,key:Nr,disabled:Be}),sa.current.disabled=Be)},[or,Nr,Be,qr]),{active:Sr,rect:ga,isOver:(hn==null?void 0:hn.id)===or,node:yi,over:hn,setNodeRef:ka}}function Ea(ee){let{animation:de,children:Be}=ee;const[or,Rr]=useState(null),[Nr,Sr]=useState(null),qr=usePrevious(Be);return!Be&&!or&&qr&&Rr(qr),useIsomorphicLayoutEffect(()=>{if(!Nr)return;const hn=or==null?void 0:or.key,Dn=or==null?void 0:or.props.id;if(hn==null||Dn==null){Rr(null);return}Promise.resolve(de(Dn,Nr)).then(()=>{Rr(null)})},[de,or,Nr]),React.createElement(React.Fragment,null,Be,or?cloneElement(or,{ref:Sr}):null)}const so={x:0,y:0,scaleX:1,scaleY:1};function Io(ee){let{children:de}=ee;return React.createElement(ze.Provider,{value:ye},React.createElement(Hn.Provider,{value:so},de))}const ii={position:"fixed",touchAction:"none"},Yi=ee=>isKeyboardEvent(ee)?"transform 250ms ease":void 0,uo=null,go={duration:250,easing:"ease",keyframes:ee=>{let{transform:{initial:de,final:Be}}=ee;return[{transform:w.ux.Transform.toString(de)},{transform:w.ux.Transform.toString(Be)}]},sideEffects:(ee=>de=>{let{active:Be,dragOverlay:or}=de;const Rr={},{styles:Nr,className:Sr}=ee;if(Nr!=null&&Nr.active)for(const[qr,hn]of Object.entries(Nr.active))hn!==void 0&&(Rr[qr]=Be.node.style.getPropertyValue(qr),Be.node.style.setProperty(qr,hn));if(Nr!=null&&Nr.dragOverlay)for(const[qr,hn]of Object.entries(Nr.dragOverlay))hn!==void 0&&or.node.style.setProperty(qr,hn);return Sr!=null&&Sr.active&&Be.node.classList.add(Sr.active),Sr!=null&&Sr.dragOverlay&&or.node.classList.add(Sr.dragOverlay),function(){for(const[hn,Dn]of Object.entries(Rr))Be.node.style.setProperty(hn,Dn);Sr!=null&&Sr.active&&Be.node.classList.remove(Sr.active)}})({styles:{active:{opacity:"0"}}})};function Oo(ee){let{config:de,draggableNodes:Be,droppableContainers:or,measuringConfiguration:Rr}=ee;return useEvent((Nr,Sr)=>{if(de===null)return;const qr=Be.get(Nr);if(!qr)return;const hn=qr.node.current;if(!hn)return;const Dn=lr(Sr);if(!Dn)return;const{transform:sa}=getWindow(Sr).getComputedStyle(Sr),qn=_t(sa);if(!qn)return;const ga=typeof de=="function"?de:Yo(de);return Ir(hn,Rr.draggable.measure),ga({active:{id:Nr,data:qr.data,node:hn,rect:Rr.draggable.measure(hn)},draggableNodes:Be,dragOverlay:{node:Sr,rect:Rr.dragOverlay.measure(Dn)},droppableContainers:or,measuringConfiguration:Rr,transform:qn})})}function Yo(ee){const{duration:de,easing:Be,sideEffects:or,keyframes:Rr}=Pa(Pa({},go),ee);return Nr=>{let ei=Nr,{active:Sr,dragOverlay:qr,transform:hn}=ei,Dn=_h(ei,["active","dragOverlay","transform"]);if(!de)return;const sa={x:qr.rect.left-Sr.rect.left,y:qr.rect.top-Sr.rect.top},qn={scaleX:hn.scaleX!==1?Sr.rect.width*hn.scaleX/qr.rect.width:1,scaleY:hn.scaleY!==1?Sr.rect.height*hn.scaleY/qr.rect.height:1},ga=Pa({x:hn.x-sa.x,y:hn.y-sa.y},qn),ya=Rr(So(Pa({},Dn),{active:Sr,dragOverlay:qr,transform:{initial:hn,final:ga}})),[di]=ya,Ma=ya[ya.length-1];if(JSON.stringify(di)===JSON.stringify(Ma))return;const ua=or==null?void 0:or(Pa({active:Sr,dragOverlay:qr},Dn)),ci=qr.node.animate(ya,{duration:de,easing:Be,fill:"forwards"});return new Promise(Fa=>{ci.onfinish=()=>{ua==null||ua(),Fa()}})}}let Ai=0;function $i(ee){return useMemo(()=>{if(ee!=null)return Ai++,Ai},[ee])}const oa=null},332339:function(Ve,z,C){"use strict";C.d(z,{DL:function(){return p}});var b=C(724285);function k(x){return g=>{let{transform:A}=g;return So(Pa({},A),{x:Math.ceil(A.x/x)*x,y:Math.ceil(A.y/x)*x})}}const w=x=>{let{transform:g}=x;return So(Pa({},g),{y:0})};function T(x,g,A){const E=Pa({},x);return g.top+x.y<=A.top?E.y=A.top-g.top:g.bottom+x.y>=A.top+A.height&&(E.y=A.top+A.height-g.bottom),g.left+x.x<=A.left?E.x=A.left-g.left:g.right+x.x>=A.left+A.width&&(E.x=A.left+A.width-g.right),E}const L=x=>{let{containerNodeRect:g,draggingNodeRect:A,transform:E}=x;return!A||!g?E:T(E,A,g)},P=x=>{let{draggingNodeRect:g,transform:A,scrollableAncestorRects:E}=x;const D=E[0];return!g||!D?A:T(A,g,D)},p=x=>{let{transform:g}=x;return So(Pa({},g),{x:0})},m=x=>{let{transform:g,draggingNodeRect:A,windowRect:E}=x;return!A||!E?g:T(g,A,E)},S=x=>{let{activatorEvent:g,draggingNodeRect:A,transform:E}=x;if(A&&g){const D=getEventCoordinates(g);if(!D)return E;const F=D.x-A.left,y=D.y-A.top;return So(Pa({},E),{x:E.x+F-A.width/2,y:E.y+y-A.height/2})}return E}},245587:function(Ve,z,C){"use strict";C.d(z,{Fo:function(){return U},PG:function(){return g},Rp:function(){return T},nB:function(){return ot},qw:function(){return y}});var b=C(667294),k=C(960887),w=C(724285);function T(q,bt,_t){const nt=q.slice();return nt.splice(_t<0?nt.length+_t:_t,0,nt.splice(bt,1)[0]),nt}function L(q,bt,_t){const nt=q.slice();return nt[bt]=q[_t],nt[_t]=q[bt],nt}function P(q,bt){return q.reduce((_t,nt,vt)=>{const It=bt.get(nt);return It&&(_t[vt]=It),_t},Array(q.length))}function p(q){return q!==null&&q>=0}function m(q,bt){if(q===bt)return!0;if(q.length!==bt.length)return!1;for(let _t=0;_t<q.length;_t++)if(q[_t]!==bt[_t])return!1;return!0}function S(q){return typeof q=="boolean"?{draggable:q,droppable:q}:q}const x={scaleX:1,scaleY:1},g=q=>{var bt;let{rects:_t,activeNodeRect:nt,activeIndex:vt,overIndex:It,index:Pt}=q;const Et=(bt=_t[vt])!=null?bt:nt;if(!Et)return null;const Nt=A(_t,Pt,vt);if(Pt===vt){const $t=_t[It];return $t?Pa({x:vt<It?$t.left+$t.width-(Et.left+Et.width):$t.left-Et.left,y:0},x):null}return Pt>vt&&Pt<=It?Pa({x:-Et.width-Nt,y:0},x):Pt<vt&&Pt>=It?Pa({x:Et.width+Nt,y:0},x):Pa({x:0,y:0},x)};function A(q,bt,_t){const nt=q[bt],vt=q[bt-1],It=q[bt+1];return!nt||!vt&&!It?0:_t<bt?vt?nt.left-(vt.left+vt.width):It.left-(nt.left+nt.width):It?It.left-(nt.left+nt.width):nt.left-(vt.left+vt.width)}const E=q=>{let{rects:bt,activeIndex:_t,overIndex:nt,index:vt}=q;const It=T(bt,nt,_t),Pt=bt[vt],Et=It[vt];return!Et||!Pt?null:{x:Et.left-Pt.left,y:Et.top-Pt.top,scaleX:Et.width/Pt.width,scaleY:Et.height/Pt.height}},D=q=>{let{activeIndex:bt,index:_t,rects:nt,overIndex:vt}=q,It,Pt;return _t===bt&&(It=nt[_t],Pt=nt[vt]),_t===vt&&(It=nt[_t],Pt=nt[bt]),!Pt||!It?null:{x:Pt.left-It.left,y:Pt.top-It.top,scaleX:Pt.width/It.width,scaleY:Pt.height/It.height}},F={scaleX:1,scaleY:1},y=q=>{var bt;let{activeIndex:_t,activeNodeRect:nt,index:vt,rects:It,overIndex:Pt}=q;const Et=(bt=It[_t])!=null?bt:nt;if(!Et)return null;if(vt===_t){const $t=It[Pt];return $t?Pa({x:0,y:_t<Pt?$t.top+$t.height-(Et.top+Et.height):$t.top-Et.top},F):null}const Nt=h(It,vt,_t);return vt>_t&&vt<=Pt?Pa({x:0,y:-Et.height-Nt},F):vt<_t&&vt>=Pt?Pa({x:0,y:Et.height+Nt},F):Pa({x:0,y:0},F)};function h(q,bt,_t){const nt=q[bt],vt=q[bt-1],It=q[bt+1];return nt?_t<bt?vt?nt.top-(vt.top+vt.height):It?It.top-(nt.top+nt.height):0:It?It.top-(nt.top+nt.height):vt?nt.top-(vt.top+vt.height):0:0}const Y="Sortable",$=b.createContext({activeIndex:-1,containerId:Y,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:E,disabled:{draggable:!1,droppable:!1}});function U(q){let{children:bt,id:_t,items:nt,strategy:vt=E,disabled:It=!1}=q;const{active:Pt,dragOverlay:Et,droppableRects:Nt,over:$t,measureDroppableContainers:ue}=(0,k.Cj)(),ie=(0,w.Ld)(Y,_t),Dt=Et.rect!==null,ne=(0,b.useMemo)(()=>nt.map(Le=>typeof Le=="object"&&"id"in Le?Le.id:Le),[nt]),pe=Pt!=null,Wt=Pt?ne.indexOf(Pt.id):-1,ae=$t?ne.indexOf($t.id):-1,Se=(0,b.useRef)(ne),be=!m(ne,Se.current),Qt=ae!==-1&&Wt===-1||be,we=S(It);(0,w.LI)(()=>{be&&pe&&ue(ne)},[be,ne,pe,ue]),(0,b.useEffect)(()=>{Se.current=ne},[ne]);const Tt=(0,b.useMemo)(()=>({activeIndex:Wt,containerId:ie,disabled:we,disableTransforms:Qt,items:ne,overIndex:ae,useDragOverlay:Dt,sortedRects:P(ne,Nt),strategy:vt}),[Wt,ie,we.draggable,we.droppable,Qt,ne,ae,Nt,Dt,vt]);return b.createElement($.Provider,{value:Tt},bt)}const W=q=>{let{id:bt,items:_t,activeIndex:nt,overIndex:vt}=q;return T(_t,nt,vt).indexOf(bt)},V=q=>{let{containerId:bt,isSorting:_t,wasDragging:nt,index:vt,items:It,newIndex:Pt,previousItems:Et,previousContainerId:Nt,transition:$t}=q;return!$t||!nt||Et!==It&&vt===Pt?!1:_t?!0:Pt!==vt&&bt===Nt},H={duration:200,easing:"ease"},Q="transform",tt=w.ux.Transition.toString({property:Q,duration:0,easing:"linear"}),rt={roleDescription:"sortable"};function ct(q){let{disabled:bt,index:_t,node:nt,rect:vt}=q;const[It,Pt]=(0,b.useState)(null),Et=(0,b.useRef)(_t);return(0,w.LI)(()=>{if(!bt&&_t!==Et.current&&nt.current){const Nt=vt.current;if(Nt){const $t=(0,k.VK)(nt.current,{ignoreTransform:!0}),ue={x:Nt.left-$t.left,y:Nt.top-$t.top,scaleX:Nt.width/$t.width,scaleY:Nt.height/$t.height};(ue.x||ue.y)&&Pt(ue)}}_t!==Et.current&&(Et.current=_t)},[bt,_t,nt,vt]),(0,b.useEffect)(()=>{It&&Pt(null)},[It]),It}function ot(q){let{animateLayoutChanges:bt=V,attributes:_t,disabled:nt,data:vt,getNewIndex:It=W,id:Pt,strategy:Et,resizeObserverConfig:Nt,transition:$t=H}=q;const{items:ue,containerId:ie,activeIndex:Dt,disabled:ne,disableTransforms:pe,sortedRects:Wt,overIndex:ae,useDragOverlay:Se,strategy:be}=(0,b.useContext)($),Qt=xt(nt,ne),we=ue.indexOf(Pt),Tt=(0,b.useMemo)(()=>Pa({sortable:{containerId:ie,index:we,items:ue}},vt),[ie,vt,we,ue]),Le=(0,b.useMemo)(()=>ue.slice(ue.indexOf(Pt)),[ue,Pt]),{rect:Mr,node:Ar,isOver:Ir,setNodeRef:Br}=(0,k.Zj)({id:Pt,data:Tt,disabled:Qt.droppable,resizeObserverConfig:Pa({updateMeasurementsFor:Le},Nt)}),{active:dn,activatorEvent:an,activeNodeRect:Ln,attributes:Un,setNodeRef:Yn,listeners:xr,isDragging:qe,over:Cr,setActivatorNodeRef:tn,transform:vn}=(0,k.O1)({id:Pt,data:Tt,attributes:Pa(Pa({},rt),_t),disabled:Qt.draggable}),_n=(0,w.HB)(Br,Yn),Pn=!!dn,_r=Pn&&!pe&&p(Dt)&&p(ae),un=!Se&&qe,An=un&&_r?vn:null,on=Et!=null?Et:be,Wn=_r?An!=null?An:on({rects:Wt,activeNodeRect:Ln,activeIndex:Dt,overIndex:ae,index:we}):null,Cn=p(Dt)&&p(ae)?It({id:Pt,items:ue,activeIndex:Dt,overIndex:ae}):we,On=dn==null?void 0:dn.id,jn=(0,b.useRef)({activeId:On,items:ue,newIndex:Cn,containerId:ie}),at=ue!==jn.current.items,Ze=bt({active:dn,containerId:ie,isDragging:qe,isSorting:Pn,id:Pt,index:we,items:ue,newIndex:jn.current.newIndex,previousItems:jn.current.items,previousContainerId:jn.current.containerId,transition:$t,wasDragging:jn.current.activeId!=null}),qt=ct({disabled:!Ze,index:we,node:Ar,rect:Mr});return(0,b.useEffect)(()=>{Pn&&jn.current.newIndex!==Cn&&(jn.current.newIndex=Cn),ie!==jn.current.containerId&&(jn.current.containerId=ie),ue!==jn.current.items&&(jn.current.items=ue)},[Pn,Cn,ie,ue]),(0,b.useEffect)(()=>{if(On===jn.current.activeId)return;if(On&&!jn.current.activeId){jn.current.activeId=On;return}const St=setTimeout(()=>{jn.current.activeId=On},50);return()=>clearTimeout(St)},[On]),{active:dn,activeIndex:Dt,attributes:Un,data:Tt,rect:Mr,index:we,newIndex:Cn,items:ue,isOver:Ir,isSorting:Pn,isDragging:qe,listeners:xr,node:Ar,overIndex:ae,over:Cr,setNodeRef:_n,setActivatorNodeRef:tn,setDroppableNodeRef:Br,setDraggableNodeRef:Yn,transform:qt!=null?qt:Wn,transition:Jt()};function Jt(){if(qt||at&&jn.current.newIndex===we)return tt;if(!(un&&!(0,w.vd)(an)||!$t)&&(Pn||Ze))return w.ux.Transition.toString(So(Pa({},$t),{property:Q}))}}function xt(q,bt){var _t,nt;return typeof q=="boolean"?{draggable:q,droppable:!1}:{draggable:(_t=q==null?void 0:q.draggable)!=null?_t:bt.draggable,droppable:(nt=q==null?void 0:q.droppable)!=null?nt:bt.droppable}}function pt(q){if(!q)return!1;const bt=q.data.current;return!!(bt&&"sortable"in bt&&typeof bt.sortable=="object"&&"containerId"in bt.sortable&&"items"in bt.sortable&&"index"in bt.sortable)}const Xt=[k.g4.Down,k.g4.Right,k.g4.Up,k.g4.Left],Ct=(q,bt)=>{let{context:{active:_t,collisionRect:nt,droppableRects:vt,droppableContainers:It,over:Pt,scrollableAncestors:Et}}=bt;if(Xt.includes(q.code)){if(q.preventDefault(),!_t||!nt)return;const Nt=[];It.getEnabled().forEach(ie=>{if(!ie||ie!=null&&ie.disabled)return;const Dt=vt.get(ie.id);if(Dt)switch(q.code){case KeyboardCode.Down:nt.top<Dt.top&&Nt.push(ie);break;case KeyboardCode.Up:nt.top>Dt.top&&Nt.push(ie);break;case KeyboardCode.Left:nt.left>Dt.left&&Nt.push(ie);break;case KeyboardCode.Right:nt.left<Dt.left&&Nt.push(ie);break}});const $t=closestCorners({active:_t,collisionRect:nt,droppableRects:vt,droppableContainers:Nt,pointerCoordinates:null});let ue=getFirstCollision($t,"id");if(ue===(Pt==null?void 0:Pt.id)&&$t.length>1&&(ue=$t[1].id),ue!=null){const ie=It.get(_t.id),Dt=It.get(ue),ne=Dt?vt.get(Dt.id):null,pe=Dt==null?void 0:Dt.node.current;if(pe&&ne&&ie&&Dt){const ae=getScrollableAncestors(pe).some((Le,Mr)=>Et[Mr]!==Le),Se=At(ie,Dt),be=Z(ie,Dt),Qt=ae||!Se?{x:0,y:0}:{x:be?nt.width-ne.width:0,y:be?nt.height-ne.height:0},we={x:ne.left,y:ne.top};return Qt.x&&Qt.y?we:subtract(we,Qt)}}}};function At(q,bt){return!pt(q)||!pt(bt)?!1:q.data.current.sortable.containerId===bt.data.current.sortable.containerId}function Z(q,bt){return!pt(q)||!pt(bt)||!At(q,bt)?!1:q.data.current.sortable.index<bt.data.current.sortable.index}},724285:function(Ve,z,C){"use strict";C.d(z,{$X:function(){return V},D9:function(){return h},DC:function(){return rt},Ey:function(){return D},FJ:function(){return T},Gj:function(){return F},HB:function(){return k},IH:function(){return W},Jj:function(){return P},LI:function(){return g},Ld:function(){return $},Nq:function(){return w},Re:function(){return m},UG:function(){return L},Yz:function(){return E},qk:function(){return p},r3:function(){return x},so:function(){return xt},ux:function(){return ct},vZ:function(){return S},vd:function(){return Q},wm:function(){return y},zX:function(){return A}});var b=C(667294);function k(){for(var pt=arguments.length,Xt=new Array(pt),Ct=0;Ct<pt;Ct++)Xt[Ct]=arguments[Ct];return(0,b.useMemo)(()=>At=>{Xt.forEach(Z=>Z(At))},Xt)}const w=typeof window!="undefined"&&typeof window.document!="undefined"&&typeof window.document.createElement!="undefined";function T(pt){const Xt=Object.prototype.toString.call(pt);return Xt==="[object Window]"||Xt==="[object global]"}function L(pt){return"nodeType"in pt}function P(pt){var Xt,Ct;return pt?T(pt)?pt:L(pt)&&(Xt=(Ct=pt.ownerDocument)==null?void 0:Ct.defaultView)!=null?Xt:window:window}function p(pt){const{Document:Xt}=P(pt);return pt instanceof Xt}function m(pt){return T(pt)?!1:pt instanceof P(pt).HTMLElement}function S(pt){return pt instanceof P(pt).SVGElement}function x(pt){return pt?T(pt)?pt.document:L(pt)?p(pt)?pt:m(pt)?pt.ownerDocument:document:document:document}const g=w?b.useLayoutEffect:b.useEffect;function A(pt){const Xt=(0,b.useRef)(pt);return g(()=>{Xt.current=pt}),(0,b.useCallback)(function(){for(var Ct=arguments.length,At=new Array(Ct),Z=0;Z<Ct;Z++)At[Z]=arguments[Z];return Xt.current==null?void 0:Xt.current(...At)},[])}function E(){const pt=(0,b.useRef)(null),Xt=(0,b.useCallback)((At,Z)=>{pt.current=setInterval(At,Z)},[]),Ct=(0,b.useCallback)(()=>{pt.current!==null&&(clearInterval(pt.current),pt.current=null)},[]);return[Xt,Ct]}function D(pt,Xt){Xt===void 0&&(Xt=[pt]);const Ct=(0,b.useRef)(pt);return g(()=>{Ct.current!==pt&&(Ct.current=pt)},Xt),Ct}function F(pt,Xt){const Ct=(0,b.useRef)();return(0,b.useMemo)(()=>{const At=pt(Ct.current);return Ct.current=At,At},[...Xt])}function y(pt){const Xt=A(pt),Ct=(0,b.useRef)(null),At=(0,b.useCallback)(Z=>{Z!==Ct.current&&(Xt==null||Xt(Z,Ct.current)),Ct.current=Z},[]);return[Ct,At]}function h(pt){const Xt=(0,b.useRef)();return(0,b.useEffect)(()=>{Xt.current=pt},[pt]),Xt.current}let Y={};function $(pt,Xt){return(0,b.useMemo)(()=>{if(Xt)return Xt;const Ct=Y[pt]==null?0:Y[pt]+1;return Y[pt]=Ct,pt+"-"+Ct},[pt,Xt])}function U(pt){return function(Xt){for(var Ct=arguments.length,At=new Array(Ct>1?Ct-1:0),Z=1;Z<Ct;Z++)At[Z-1]=arguments[Z];return At.reduce((q,bt)=>{const _t=Object.entries(bt);for(const[nt,vt]of _t){const It=q[nt];It!=null&&(q[nt]=It+pt*vt)}return q},Pa({},Xt))}}const W=U(1),V=U(-1);function H(pt){return"clientX"in pt&&"clientY"in pt}function Q(pt){if(!pt)return!1;const{KeyboardEvent:Xt}=P(pt.target);return Xt&&pt instanceof Xt}function tt(pt){if(!pt)return!1;const{TouchEvent:Xt}=P(pt.target);return Xt&&pt instanceof Xt}function rt(pt){if(tt(pt)){if(pt.touches&&pt.touches.length){const{clientX:Xt,clientY:Ct}=pt.touches[0];return{x:Xt,y:Ct}}else if(pt.changedTouches&&pt.changedTouches.length){const{clientX:Xt,clientY:Ct}=pt.changedTouches[0];return{x:Xt,y:Ct}}}return H(pt)?{x:pt.clientX,y:pt.clientY}:null}const ct=Object.freeze({Translate:{toString(pt){if(!pt)return;const{x:Xt,y:Ct}=pt;return"translate3d("+(Xt?Math.round(Xt):0)+"px, "+(Ct?Math.round(Ct):0)+"px, 0)"}},Scale:{toString(pt){if(!pt)return;const{scaleX:Xt,scaleY:Ct}=pt;return"scaleX("+Xt+") scaleY("+Ct+")"}},Transform:{toString(pt){if(pt)return[ct.Translate.toString(pt),ct.Scale.toString(pt)].join(" ")}},Transition:{toString(pt){let{property:Xt,duration:Ct,easing:At}=pt;return Xt+" "+Ct+"ms "+At}}}),ot="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function xt(pt){return pt.matches(ot)?pt:pt.querySelector(ot)}},971497:function(Ve,z,C){"use strict";C.r(z),C.d(z,{forceCenter:function(){return b},forceCollide:function(){return p},forceLink:function(){return A},forceManyBody:function(){return pt},forceRadial:function(){return Xt},forceSimulation:function(){return xt},forceX:function(){return Ct},forceY:function(){return At}});function b(Z,q){var bt,_t=1;Z==null&&(Z=0),q==null&&(q=0);function nt(){var vt,It=bt.length,Pt,Et=0,Nt=0;for(vt=0;vt<It;++vt)Pt=bt[vt],Et+=Pt.x,Nt+=Pt.y;for(Et=(Et/It-Z)*_t,Nt=(Nt/It-q)*_t,vt=0;vt<It;++vt)Pt=bt[vt],Pt.x-=Et,Pt.y-=Nt}return nt.initialize=function(vt){bt=vt},nt.x=function(vt){return arguments.length?(Z=+vt,nt):Z},nt.y=function(vt){return arguments.length?(q=+vt,nt):q},nt.strength=function(vt){return arguments.length?(_t=+vt,nt):_t},nt}var k=C(547148);function w(Z){return function(){return Z}}function T(Z){return(Z()-.5)*1e-6}function L(Z){return Z.x+Z.vx}function P(Z){return Z.y+Z.vy}function p(Z){var q,bt,_t,nt=1,vt=1;typeof Z!="function"&&(Z=w(Z==null?1:+Z));function It(){for(var Nt,$t=q.length,ue,ie,Dt,ne,pe,Wt,ae=0;ae<vt;++ae)for(ue=(0,k.Z)(q,L,P).visitAfter(Pt),Nt=0;Nt<$t;++Nt)ie=q[Nt],pe=bt[ie.index],Wt=pe*pe,Dt=ie.x+ie.vx,ne=ie.y+ie.vy,ue.visit(Se);function Se(be,Qt,we,Tt,Le){var Mr=be.data,Ar=be.r,Ir=pe+Ar;if(Mr){if(Mr.index>ie.index){var Br=Dt-Mr.x-Mr.vx,dn=ne-Mr.y-Mr.vy,an=Br*Br+dn*dn;an<Ir*Ir&&(Br===0&&(Br=T(_t),an+=Br*Br),dn===0&&(dn=T(_t),an+=dn*dn),an=(Ir-(an=Math.sqrt(an)))/an*nt,ie.vx+=(Br*=an)*(Ir=(Ar*=Ar)/(Wt+Ar)),ie.vy+=(dn*=an)*Ir,Mr.vx-=Br*(Ir=1-Ir),Mr.vy-=dn*Ir)}return}return Qt>Dt+Ir||Tt<Dt-Ir||we>ne+Ir||Le<ne-Ir}}function Pt(Nt){if(Nt.data)return Nt.r=bt[Nt.data.index];for(var $t=Nt.r=0;$t<4;++$t)Nt[$t]&&Nt[$t].r>Nt.r&&(Nt.r=Nt[$t].r)}function Et(){if(q){var Nt,$t=q.length,ue;for(bt=new Array($t),Nt=0;Nt<$t;++Nt)ue=q[Nt],bt[ue.index]=+Z(ue,Nt,q)}}return It.initialize=function(Nt,$t){q=Nt,_t=$t,Et()},It.iterations=function(Nt){return arguments.length?(vt=+Nt,It):vt},It.strength=function(Nt){return arguments.length?(nt=+Nt,It):nt},It.radius=function(Nt){return arguments.length?(Z=typeof Nt=="function"?Nt:w(+Nt),Et(),It):Z},It}var m=C(952677),S=C.n(m);function x(Z){return Z.index}function g(Z,q){var bt=Z.get(q);if(!bt)throw new Error("node not found: "+q);return bt}function A(Z){var q=x,bt=ue,_t,nt=w(30),vt,It,Pt,Et,Nt,$t=1;Z==null&&(Z=[]);function ue(Wt){return 1/Math.min(Pt[Wt.source.index],Pt[Wt.target.index])}function ie(Wt){for(var ae=0,Se=Z.length;ae<$t;++ae)for(var be=0,Qt,we,Tt,Le,Mr,Ar,Ir;be<Se;++be)Qt=Z[be],we=Qt.source,Tt=Qt.target,Le=Tt.x+Tt.vx-we.x-we.vx||T(Nt),Mr=Tt.y+Tt.vy-we.y-we.vy||T(Nt),Ar=Math.sqrt(Le*Le+Mr*Mr),Ar=(Ar-vt[be])/Ar*Wt*_t[be],Le*=Ar,Mr*=Ar,Tt.vx-=Le*(Ir=Et[be]),Tt.vy-=Mr*Ir,we.vx+=Le*(Ir=1-Ir),we.vy+=Mr*Ir}function Dt(){if(It){var Wt,ae=It.length,Se=Z.length,be=new Map(It.map(function(we,Tt){return[q(we,Tt,It),we]})),Qt;for(Wt=0,Pt=new Array(ae);Wt<Se;++Wt)Qt=Z[Wt],Qt.index=Wt,S()(Qt.source)!=="object"&&(Qt.source=g(be,Qt.source)),S()(Qt.target)!=="object"&&(Qt.target=g(be,Qt.target)),Pt[Qt.source.index]=(Pt[Qt.source.index]||0)+1,Pt[Qt.target.index]=(Pt[Qt.target.index]||0)+1;for(Wt=0,Et=new Array(Se);Wt<Se;++Wt)Qt=Z[Wt],Et[Wt]=Pt[Qt.source.index]/(Pt[Qt.source.index]+Pt[Qt.target.index]);_t=new Array(Se),ne(),vt=new Array(Se),pe()}}function ne(){if(It)for(var Wt=0,ae=Z.length;Wt<ae;++Wt)_t[Wt]=+bt(Z[Wt],Wt,Z)}function pe(){if(It)for(var Wt=0,ae=Z.length;Wt<ae;++Wt)vt[Wt]=+nt(Z[Wt],Wt,Z)}return ie.initialize=function(Wt,ae){It=Wt,Nt=ae,Dt()},ie.links=function(Wt){return arguments.length?(Z=Wt,Dt(),ie):Z},ie.id=function(Wt){return arguments.length?(q=Wt,ie):q},ie.iterations=function(Wt){return arguments.length?($t=+Wt,ie):$t},ie.strength=function(Wt){return arguments.length?(bt=typeof Wt=="function"?Wt:w(+Wt),ne(),ie):bt},ie.distance=function(Wt){return arguments.length?(nt=typeof Wt=="function"?Wt:w(+Wt),pe(),ie):nt},ie}var E={value:function(){}};function D(){for(var Z=0,q=arguments.length,bt={},_t;Z<q;++Z){if(!(_t=arguments[Z]+"")||_t in bt||/[\s.]/.test(_t))throw new Error("illegal type: "+_t);bt[_t]=[]}return new F(bt)}function F(Z){this._=Z}function y(Z,q){return Z.trim().split(/^|\s+/).map(function(bt){var _t="",nt=bt.indexOf(".");if(nt>=0&&(_t=bt.slice(nt+1),bt=bt.slice(0,nt)),bt&&!q.hasOwnProperty(bt))throw new Error("unknown type: "+bt);return{type:bt,name:_t}})}F.prototype=D.prototype={constructor:F,on:function(q,bt){var _t=this._,nt=y(q+"",_t),vt,It=-1,Pt=nt.length;if(arguments.length<2){for(;++It<Pt;)if((vt=(q=nt[It]).type)&&(vt=h(_t[vt],q.name)))return vt;return}if(bt!=null&&typeof bt!="function")throw new Error("invalid callback: "+bt);for(;++It<Pt;)if(vt=(q=nt[It]).type)_t[vt]=Y(_t[vt],q.name,bt);else if(bt==null)for(vt in _t)_t[vt]=Y(_t[vt],q.name,null);return this},copy:function(){var q={},bt=this._;for(var _t in bt)q[_t]=bt[_t].slice();return new F(q)},call:function(q,bt){if((vt=arguments.length-2)>0)for(var _t=new Array(vt),nt=0,vt,It;nt<vt;++nt)_t[nt]=arguments[nt+2];if(!this._.hasOwnProperty(q))throw new Error("unknown type: "+q);for(It=this._[q],nt=0,vt=It.length;nt<vt;++nt)It[nt].value.apply(bt,_t)},apply:function(q,bt,_t){if(!this._.hasOwnProperty(q))throw new Error("unknown type: "+q);for(var nt=this._[q],vt=0,It=nt.length;vt<It;++vt)nt[vt].value.apply(bt,_t)}};function h(Z,q){for(var bt=0,_t=Z.length,nt;bt<_t;++bt)if((nt=Z[bt]).name===q)return nt.value}function Y(Z,q,bt){for(var _t=0,nt=Z.length;_t<nt;++_t)if(Z[_t].name===q){Z[_t]=E,Z=Z.slice(0,_t).concat(Z.slice(_t+1));break}return bt!=null&&Z.push({name:q,value:bt}),Z}var $=D,U=C(235374),W=1664525,V=1013904223,H=4294967296;function Q(){var Z=1;return function(){return(Z=(W*Z+V)%H)/H}}function tt(Z){return Z.x}function rt(Z){return Z.y}var ct=10,ot=Math.PI*(3-Math.sqrt(5));function xt(Z){var q,bt=1,_t=.001,nt=1-Math.pow(_t,1/300),vt=0,It=.6,Pt=new Map,Et=(0,U.HT)(ue),Nt=$("tick","end"),$t=Q();Z==null&&(Z=[]);function ue(){ie(),Nt.call("tick",q),bt<_t&&(Et.stop(),Nt.call("end",q))}function ie(pe){var Wt,ae=Z.length,Se;pe===void 0&&(pe=1);for(var be=0;be<pe;++be)for(bt+=(vt-bt)*nt,Pt.forEach(function(Qt){Qt(bt)}),Wt=0;Wt<ae;++Wt)Se=Z[Wt],Se.fx==null?Se.x+=Se.vx*=It:(Se.x=Se.fx,Se.vx=0),Se.fy==null?Se.y+=Se.vy*=It:(Se.y=Se.fy,Se.vy=0);return q}function Dt(){for(var pe=0,Wt=Z.length,ae;pe<Wt;++pe){if(ae=Z[pe],ae.index=pe,ae.fx!=null&&(ae.x=ae.fx),ae.fy!=null&&(ae.y=ae.fy),isNaN(ae.x)||isNaN(ae.y)){var Se=ct*Math.sqrt(.5+pe),be=pe*ot;ae.x=Se*Math.cos(be),ae.y=Se*Math.sin(be)}(isNaN(ae.vx)||isNaN(ae.vy))&&(ae.vx=ae.vy=0)}}function ne(pe){return pe.initialize&&pe.initialize(Z,$t),pe}return Dt(),q={tick:ie,restart:function(){return Et.restart(ue),q},stop:function(){return Et.stop(),q},nodes:function(Wt){return arguments.length?(Z=Wt,Dt(),Pt.forEach(ne),q):Z},alpha:function(Wt){return arguments.length?(bt=+Wt,q):bt},alphaMin:function(Wt){return arguments.length?(_t=+Wt,q):_t},alphaDecay:function(Wt){return arguments.length?(nt=+Wt,q):+nt},alphaTarget:function(Wt){return arguments.length?(vt=+Wt,q):vt},velocityDecay:function(Wt){return arguments.length?(It=1-Wt,q):1-It},randomSource:function(Wt){return arguments.length?($t=Wt,Pt.forEach(ne),q):$t},force:function(Wt,ae){return arguments.length>1?(ae==null?Pt.delete(Wt):Pt.set(Wt,ne(ae)),q):Pt.get(Wt)},find:function(Wt,ae,Se){var be=0,Qt=Z.length,we,Tt,Le,Mr,Ar;for(Se==null?Se=1/0:Se*=Se,be=0;be<Qt;++be)Mr=Z[be],we=Wt-Mr.x,Tt=ae-Mr.y,Le=we*we+Tt*Tt,Le<Se&&(Ar=Mr,Se=Le);return Ar},on:function(Wt,ae){return arguments.length>1?(Nt.on(Wt,ae),q):Nt.on(Wt)}}}function pt(){var Z,q,bt,_t,nt=w(-30),vt,It=1,Pt=1/0,Et=.81;function Nt(Dt){var ne,pe=Z.length,Wt=(0,k.Z)(Z,tt,rt).visitAfter(ue);for(_t=Dt,ne=0;ne<pe;++ne)q=Z[ne],Wt.visit(ie)}function $t(){if(Z){var Dt,ne=Z.length,pe;for(vt=new Array(ne),Dt=0;Dt<ne;++Dt)pe=Z[Dt],vt[pe.index]=+nt(pe,Dt,Z)}}function ue(Dt){var ne=0,pe,Wt,ae=0,Se,be,Qt;if(Dt.length){for(Se=be=Qt=0;Qt<4;++Qt)(pe=Dt[Qt])&&(Wt=Math.abs(pe.value))&&(ne+=pe.value,ae+=Wt,Se+=Wt*pe.x,be+=Wt*pe.y);Dt.x=Se/ae,Dt.y=be/ae}else{pe=Dt,pe.x=pe.data.x,pe.y=pe.data.y;do ne+=vt[pe.data.index];while(pe=pe.next)}Dt.value=ne}function ie(Dt,ne,pe,Wt){if(!Dt.value)return!0;var ae=Dt.x-q.x,Se=Dt.y-q.y,be=Wt-ne,Qt=ae*ae+Se*Se;if(be*be/Et<Qt)return Qt<Pt&&(ae===0&&(ae=T(bt),Qt+=ae*ae),Se===0&&(Se=T(bt),Qt+=Se*Se),Qt<It&&(Qt=Math.sqrt(It*Qt)),q.vx+=ae*Dt.value*_t/Qt,q.vy+=Se*Dt.value*_t/Qt),!0;if(Dt.length||Qt>=Pt)return;(Dt.data!==q||Dt.next)&&(ae===0&&(ae=T(bt),Qt+=ae*ae),Se===0&&(Se=T(bt),Qt+=Se*Se),Qt<It&&(Qt=Math.sqrt(It*Qt)));do Dt.data!==q&&(be=vt[Dt.data.index]*_t/Qt,q.vx+=ae*be,q.vy+=Se*be);while(Dt=Dt.next)}return Nt.initialize=function(Dt,ne){Z=Dt,bt=ne,$t()},Nt.strength=function(Dt){return arguments.length?(nt=typeof Dt=="function"?Dt:w(+Dt),$t(),Nt):nt},Nt.distanceMin=function(Dt){return arguments.length?(It=Dt*Dt,Nt):Math.sqrt(It)},Nt.distanceMax=function(Dt){return arguments.length?(Pt=Dt*Dt,Nt):Math.sqrt(Pt)},Nt.theta=function(Dt){return arguments.length?(Et=Dt*Dt,Nt):Math.sqrt(Et)},Nt}function Xt(Z,q,bt){var _t,nt=w(.1),vt,It;typeof Z!="function"&&(Z=w(+Z)),q==null&&(q=0),bt==null&&(bt=0);function Pt(Nt){for(var $t=0,ue=_t.length;$t<ue;++$t){var ie=_t[$t],Dt=ie.x-q||1e-6,ne=ie.y-bt||1e-6,pe=Math.sqrt(Dt*Dt+ne*ne),Wt=(It[$t]-pe)*vt[$t]*Nt/pe;ie.vx+=Dt*Wt,ie.vy+=ne*Wt}}function Et(){if(_t){var Nt,$t=_t.length;for(vt=new Array($t),It=new Array($t),Nt=0;Nt<$t;++Nt)It[Nt]=+Z(_t[Nt],Nt,_t),vt[Nt]=isNaN(It[Nt])?0:+nt(_t[Nt],Nt,_t)}}return Pt.initialize=function(Nt){_t=Nt,Et()},Pt.strength=function(Nt){return arguments.length?(nt=typeof Nt=="function"?Nt:w(+Nt),Et(),Pt):nt},Pt.radius=function(Nt){return arguments.length?(Z=typeof Nt=="function"?Nt:w(+Nt),Et(),Pt):Z},Pt.x=function(Nt){return arguments.length?(q=+Nt,Pt):q},Pt.y=function(Nt){return arguments.length?(bt=+Nt,Pt):bt},Pt}function Ct(Z){var q=w(.1),bt,_t,nt;typeof Z!="function"&&(Z=w(Z==null?0:+Z));function vt(Pt){for(var Et=0,Nt=bt.length,$t;Et<Nt;++Et)$t=bt[Et],$t.vx+=(nt[Et]-$t.x)*_t[Et]*Pt}function It(){if(bt){var Pt,Et=bt.length;for(_t=new Array(Et),nt=new Array(Et),Pt=0;Pt<Et;++Pt)_t[Pt]=isNaN(nt[Pt]=+Z(bt[Pt],Pt,bt))?0:+q(bt[Pt],Pt,bt)}}return vt.initialize=function(Pt){bt=Pt,It()},vt.strength=function(Pt){return arguments.length?(q=typeof Pt=="function"?Pt:w(+Pt),It(),vt):q},vt.x=function(Pt){return arguments.length?(Z=typeof Pt=="function"?Pt:w(+Pt),It(),vt):Z},vt}function At(Z){var q=w(.1),bt,_t,nt;typeof Z!="function"&&(Z=w(Z==null?0:+Z));function vt(Pt){for(var Et=0,Nt=bt.length,$t;Et<Nt;++Et)$t=bt[Et],$t.vy+=(nt[Et]-$t.y)*_t[Et]*Pt}function It(){if(bt){var Pt,Et=bt.length;for(_t=new Array(Et),nt=new Array(Et),Pt=0;Pt<Et;++Pt)_t[Pt]=isNaN(nt[Pt]=+Z(bt[Pt],Pt,bt))?0:+q(bt[Pt],Pt,bt)}}return vt.initialize=function(Pt){bt=Pt,It()},vt.strength=function(Pt){return arguments.length?(q=typeof Pt=="function"?Pt:w(+Pt),It(),vt):q},vt.y=function(Pt){return arguments.length?(Z=typeof Pt=="function"?Pt:w(+Pt),It(),vt):Z},vt}},405237:function(Ve,z,C){"use strict";C.r(z),C.d(z,{AbstractMatrix:function(){return Qt},CHO:function(){return dt},CholeskyDecomposition:function(){return dt},EVD:function(){return qt},EigenvalueDecomposition:function(){return qt},LU:function(){return vn},LuDecomposition:function(){return vn},Matrix:function(){return Le},MatrixColumnSelectionView:function(){return Ir},MatrixColumnView:function(){return Ar},MatrixFlipColumnView:function(){return Br},MatrixFlipRowView:function(){return dn},MatrixRowSelectionView:function(){return Ln},MatrixRowView:function(){return an},MatrixSelectionView:function(){return Un},MatrixSubView:function(){return Yn},MatrixTransposeView:function(){return xr},NIPALS:function(){return Ut},Nipals:function(){return Ut},QR:function(){return Pn},QrDecomposition:function(){return Pn},SVD:function(){return _r},SingularValueDecomposition:function(){return _r},WrapperMatrix1D:function(){return qe},WrapperMatrix2D:function(){return Cr},correlation:function(){return Ze},covariance:function(){return at},default:function(){return Le},determinant:function(){return on},inverse:function(){return un},linearDependencies:function(){return On},pseudoInverse:function(){return jn},solve:function(){return An},wrap:function(){return tn}});var b=C(273408),k=C.n(b),w=C(731996),T=C.n(w),L=C(626037),P=C.n(L),p=C(952677),m=C.n(p),S=C(912444),x=C.n(S),g=C(272004),A=C.n(g);const E=Object.prototype.toString;function D(J){const it=E.call(J);return it.endsWith("Array]")&&!it.includes("Big")}function F(J){var it=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!D(J))throw new TypeError("input must be an array");if(J.length===0)throw new TypeError("input must not be empty");var R=it.fromIndex,M=R===void 0?0:R,O=it.toIndex,X=O===void 0?J.length:O;if(M<0||M>=J.length||!Number.isInteger(M))throw new Error("fromIndex must be a positive integer smaller than length");if(X<=M||X>J.length||!Number.isInteger(X))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var mt=J[M],Ft=M+1;Ft<X;Ft++)J[Ft]>mt&&(mt=J[Ft]);return mt}function y(J){var it=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!D(J))throw new TypeError("input must be an array");if(J.length===0)throw new TypeError("input must not be empty");var R=it.fromIndex,M=R===void 0?0:R,O=it.toIndex,X=O===void 0?J.length:O;if(M<0||M>=J.length||!Number.isInteger(M))throw new Error("fromIndex must be a positive integer smaller than length");if(X<=M||X>J.length||!Number.isInteger(X))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var mt=J[M],Ft=M+1;Ft<X;Ft++)J[Ft]<mt&&(mt=J[Ft]);return mt}function h(J){var it=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(D(J)){if(J.length===0)throw new TypeError("input must not be empty")}else throw new TypeError("input must be an array");var R;if(it.output!==void 0){if(!D(it.output))throw new TypeError("output option must be an array if specified");R=it.output}else R=new Array(J.length);var M=y(J),O=F(J);if(M===O)throw new RangeError("minimum and maximum input values are equal. Cannot rescale a constant array");var X=it.min,mt=X===void 0?it.autoMinMax?M:0:X,Ft=it.max,Bt=Ft===void 0?it.autoMinMax?O:1:Ft;if(mt>=Bt)throw new RangeError("min option must be smaller than max option");for(var re=(Bt-mt)/(O-M),De=0;De<J.length;De++)R[De]=(J[De]-M)*re+mt;return R}var Y=" ".repeat(2),$=" ".repeat(4);function U(){return W(this)}function W(J){var it=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},R=it.maxRows,M=R===void 0?15:R,O=it.maxColumns,X=O===void 0?10:O,mt=it.maxNumSize,Ft=mt===void 0?8:mt,Bt=it.padMinus,re=Bt===void 0?"auto":Bt;return"".concat(J.constructor.name,` {
`).concat(Y,`[
`).concat($).concat(V(J,M,X,Ft,re),`
`).concat(Y,`]
`).concat(Y,"rows: ").concat(J.rows,`
`).concat(Y,"columns: ").concat(J.columns,`
}`)}function V(J,it,R,M,O){var X=J.rows,mt=J.columns,Ft=Math.min(X,it),Bt=Math.min(mt,R),re=[];if(O==="auto"){O=!1;t:for(var De=0;De<Ft;De++)for(var me=0;me<Bt;me++)if(J.get(De,me)<0){O=!0;break t}}for(var Xe=0;Xe<Ft;Xe++){for(var hr=[],Ke=0;Ke<Bt;Ke++)hr.push(H(J.get(Xe,Ke),M,O));re.push("".concat(hr.join(" ")))}return Bt!==mt&&(re[re.length-1]+=" ... ".concat(mt-R," more columns")),Ft!==X&&re.push("... ".concat(X-it," more rows")),re.join(`
`.concat($))}function H(J,it,R){return(J>=0&&R?" ".concat(Q(J,it-1)):Q(J,it)).padEnd(it)}function Q(J,it){var R=J.toString();if(R.length<=it)return R;var M=J.toFixed(it);if(M.length>it&&(M=J.toFixed(Math.max(0,it-(M.length-it)))),M.length<=it&&!M.startsWith("0.000")&&!M.startsWith("-0.000"))return M;var O=J.toExponential(it);return O.length>it&&(O=J.toExponential(Math.max(0,it-(O.length-it)))),O.slice(0)}function tt(J,it){J.prototype.add=function(M){return typeof M=="number"?this.addS(M):this.addM(M)},J.prototype.addS=function(M){for(var O=0;O<this.rows;O++)for(var X=0;X<this.columns;X++)this.set(O,X,this.get(O,X)+M);return this},J.prototype.addM=function(M){if(M=it.checkMatrix(M),this.rows!==M.rows||this.columns!==M.columns)throw new RangeError("Matrices dimensions must be equal");for(var O=0;O<this.rows;O++)for(var X=0;X<this.columns;X++)this.set(O,X,this.get(O,X)+M.get(O,X));return this},J.add=function(M,O){var X=new it(M);return X.add(O)},J.prototype.sub=function(M){return typeof M=="number"?this.subS(M):this.subM(M)},J.prototype.subS=function(M){for(var O=0;O<this.rows;O++)for(var X=0;X<this.columns;X++)this.set(O,X,this.get(O,X)-M);return this},J.prototype.subM=function(M){if(M=it.checkMatrix(M),this.rows!==M.rows||this.columns!==M.columns)throw new RangeError("Matrices dimensions must be equal");for(var O=0;O<this.rows;O++)for(var X=0;X<this.columns;X++)this.set(O,X,this.get(O,X)-M.get(O,X));return this},J.sub=function(M,O){var X=new it(M);return X.sub(O)},J.prototype.subtract=J.prototype.sub,J.prototype.subtractS=J.prototype.subS,J.prototype.subtractM=J.prototype.subM,J.subtract=J.sub,J.prototype.mul=function(M){return typeof M=="number"?this.mulS(M):this.mulM(M)},J.prototype.mulS=function(M){for(var O=0;O<this.rows;O++)for(var X=0;X<this.columns;X++)this.set(O,X,this.get(O,X)*M);return this},J.prototype.mulM=function(M){if(M=it.checkMatrix(M),this.rows!==M.rows||this.columns!==M.columns)throw new RangeError("Matrices dimensions must be equal");for(var O=0;O<this.rows;O++)for(var X=0;X<this.columns;X++)this.set(O,X,this.get(O,X)*M.get(O,X));return this},J.mul=function(M,O){var X=new it(M);return X.mul(O)},J.prototype.multiply=J.prototype.mul,J.prototype.multiplyS=J.prototype.mulS,J.prototype.multiplyM=J.prototype.mulM,J.multiply=J.mul,J.prototype.div=function(M){return typeof M=="number"?this.divS(M):this.divM(M)},J.prototype.divS=function(M){for(var O=0;O<this.rows;O++)for(var X=0;X<this.columns;X++)this.set(O,X,this.get(O,X)/M);return this},J.prototype.divM=function(M){if(M=it.checkMatrix(M),this.rows!==M.rows||this.columns!==M.columns)throw new RangeError("Matrices dimensions must be equal");for(var O=0;O<this.rows;O++)for(var X=0;X<this.columns;X++)this.set(O,X,this.get(O,X)/M.get(O,X));return this},J.div=function(M,O){var X=new it(M);return X.div(O)},J.prototype.divide=J.prototype.div,J.prototype.divideS=J.prototype.divS,J.prototype.divideM=J.prototype.divM,J.divide=J.div,J.prototype.mod=function(M){return typeof M=="number"?this.modS(M):this.modM(M)},J.prototype.modS=function(M){for(var O=0;O<this.rows;O++)for(var X=0;X<this.columns;X++)this.set(O,X,this.get(O,X)%M);return this},J.prototype.modM=function(M){if(M=it.checkMatrix(M),this.rows!==M.rows||this.columns!==M.columns)throw new RangeError("Matrices dimensions must be equal");for(var O=0;O<this.rows;O++)for(var X=0;X<this.columns;X++)this.set(O,X,this.get(O,X)%M.get(O,X));return this},J.mod=function(M,O){var X=new it(M);return X.mod(O)},J.prototype.modulus=J.prototype.mod,J.prototype.modulusS=J.prototype.modS,J.prototype.modulusM=J.prototype.modM,J.modulus=J.mod,J.prototype.and=function(M){return typeof M=="number"?this.andS(M):this.andM(M)},J.prototype.andS=function(M){for(var O=0;O<this.rows;O++)for(var X=0;X<this.columns;X++)this.set(O,X,this.get(O,X)&M);return this},J.prototype.andM=function(M){if(M=it.checkMatrix(M),this.rows!==M.rows||this.columns!==M.columns)throw new RangeError("Matrices dimensions must be equal");for(var O=0;O<this.rows;O++)for(var X=0;X<this.columns;X++)this.set(O,X,this.get(O,X)&M.get(O,X));return this},J.and=function(M,O){var X=new it(M);return X.and(O)},J.prototype.or=function(M){return typeof M=="number"?this.orS(M):this.orM(M)},J.prototype.orS=function(M){for(var O=0;O<this.rows;O++)for(var X=0;X<this.columns;X++)this.set(O,X,this.get(O,X)|M);return this},J.prototype.orM=function(M){if(M=it.checkMatrix(M),this.rows!==M.rows||this.columns!==M.columns)throw new RangeError("Matrices dimensions must be equal");for(var O=0;O<this.rows;O++)for(var X=0;X<this.columns;X++)this.set(O,X,this.get(O,X)|M.get(O,X));return this},J.or=function(M,O){var X=new it(M);return X.or(O)},J.prototype.xor=function(M){return typeof M=="number"?this.xorS(M):this.xorM(M)},J.prototype.xorS=function(M){for(var O=0;O<this.rows;O++)for(var X=0;X<this.columns;X++)this.set(O,X,this.get(O,X)^M);return this},J.prototype.xorM=function(M){if(M=it.checkMatrix(M),this.rows!==M.rows||this.columns!==M.columns)throw new RangeError("Matrices dimensions must be equal");for(var O=0;O<this.rows;O++)for(var X=0;X<this.columns;X++)this.set(O,X,this.get(O,X)^M.get(O,X));return this},J.xor=function(M,O){var X=new it(M);return X.xor(O)},J.prototype.leftShift=function(M){return typeof M=="number"?this.leftShiftS(M):this.leftShiftM(M)},J.prototype.leftShiftS=function(M){for(var O=0;O<this.rows;O++)for(var X=0;X<this.columns;X++)this.set(O,X,this.get(O,X)<<M);return this},J.prototype.leftShiftM=function(M){if(M=it.checkMatrix(M),this.rows!==M.rows||this.columns!==M.columns)throw new RangeError("Matrices dimensions must be equal");for(var O=0;O<this.rows;O++)for(var X=0;X<this.columns;X++)this.set(O,X,this.get(O,X)<<M.get(O,X));return this},J.leftShift=function(M,O){var X=new it(M);return X.leftShift(O)},J.prototype.signPropagatingRightShift=function(M){return typeof M=="number"?this.signPropagatingRightShiftS(M):this.signPropagatingRightShiftM(M)},J.prototype.signPropagatingRightShiftS=function(M){for(var O=0;O<this.rows;O++)for(var X=0;X<this.columns;X++)this.set(O,X,this.get(O,X)>>M);return this},J.prototype.signPropagatingRightShiftM=function(M){if(M=it.checkMatrix(M),this.rows!==M.rows||this.columns!==M.columns)throw new RangeError("Matrices dimensions must be equal");for(var O=0;O<this.rows;O++)for(var X=0;X<this.columns;X++)this.set(O,X,this.get(O,X)>>M.get(O,X));return this},J.signPropagatingRightShift=function(M,O){var X=new it(M);return X.signPropagatingRightShift(O)},J.prototype.rightShift=function(M){return typeof M=="number"?this.rightShiftS(M):this.rightShiftM(M)},J.prototype.rightShiftS=function(M){for(var O=0;O<this.rows;O++)for(var X=0;X<this.columns;X++)this.set(O,X,this.get(O,X)>>>M);return this},J.prototype.rightShiftM=function(M){if(M=it.checkMatrix(M),this.rows!==M.rows||this.columns!==M.columns)throw new RangeError("Matrices dimensions must be equal");for(var O=0;O<this.rows;O++)for(var X=0;X<this.columns;X++)this.set(O,X,this.get(O,X)>>>M.get(O,X));return this},J.rightShift=function(M,O){var X=new it(M);return X.rightShift(O)},J.prototype.zeroFillRightShift=J.prototype.rightShift,J.prototype.zeroFillRightShiftS=J.prototype.rightShiftS,J.prototype.zeroFillRightShiftM=J.prototype.rightShiftM,J.zeroFillRightShift=J.rightShift,J.prototype.not=function(){for(var M=0;M<this.rows;M++)for(var O=0;O<this.columns;O++)this.set(M,O,~this.get(M,O));return this},J.not=function(M){var O=new it(M);return O.not()},J.prototype.abs=function(){for(var M=0;M<this.rows;M++)for(var O=0;O<this.columns;O++)this.set(M,O,Math.abs(this.get(M,O)));return this},J.abs=function(M){var O=new it(M);return O.abs()},J.prototype.acos=function(){for(var M=0;M<this.rows;M++)for(var O=0;O<this.columns;O++)this.set(M,O,Math.acos(this.get(M,O)));return this},J.acos=function(M){var O=new it(M);return O.acos()},J.prototype.acosh=function(){for(var M=0;M<this.rows;M++)for(var O=0;O<this.columns;O++)this.set(M,O,Math.acosh(this.get(M,O)));return this},J.acosh=function(M){var O=new it(M);return O.acosh()},J.prototype.asin=function(){for(var M=0;M<this.rows;M++)for(var O=0;O<this.columns;O++)this.set(M,O,Math.asin(this.get(M,O)));return this},J.asin=function(M){var O=new it(M);return O.asin()},J.prototype.asinh=function(){for(var M=0;M<this.rows;M++)for(var O=0;O<this.columns;O++)this.set(M,O,Math.asinh(this.get(M,O)));return this},J.asinh=function(M){var O=new it(M);return O.asinh()},J.prototype.atan=function(){for(var M=0;M<this.rows;M++)for(var O=0;O<this.columns;O++)this.set(M,O,Math.atan(this.get(M,O)));return this},J.atan=function(M){var O=new it(M);return O.atan()},J.prototype.atanh=function(){for(var M=0;M<this.rows;M++)for(var O=0;O<this.columns;O++)this.set(M,O,Math.atanh(this.get(M,O)));return this},J.atanh=function(M){var O=new it(M);return O.atanh()},J.prototype.cbrt=function(){for(var M=0;M<this.rows;M++)for(var O=0;O<this.columns;O++)this.set(M,O,Math.cbrt(this.get(M,O)));return this},J.cbrt=function(M){var O=new it(M);return O.cbrt()},J.prototype.ceil=function(){for(var M=0;M<this.rows;M++)for(var O=0;O<this.columns;O++)this.set(M,O,Math.ceil(this.get(M,O)));return this},J.ceil=function(M){var O=new it(M);return O.ceil()},J.prototype.clz32=function(){for(var M=0;M<this.rows;M++)for(var O=0;O<this.columns;O++)this.set(M,O,Math.clz32(this.get(M,O)));return this},J.clz32=function(M){var O=new it(M);return O.clz32()},J.prototype.cos=function(){for(var M=0;M<this.rows;M++)for(var O=0;O<this.columns;O++)this.set(M,O,Math.cos(this.get(M,O)));return this},J.cos=function(M){var O=new it(M);return O.cos()},J.prototype.cosh=function(){for(var M=0;M<this.rows;M++)for(var O=0;O<this.columns;O++)this.set(M,O,Math.cosh(this.get(M,O)));return this},J.cosh=function(M){var O=new it(M);return O.cosh()},J.prototype.exp=function(){for(var M=0;M<this.rows;M++)for(var O=0;O<this.columns;O++)this.set(M,O,Math.exp(this.get(M,O)));return this},J.exp=function(M){var O=new it(M);return O.exp()},J.prototype.expm1=function(){for(var M=0;M<this.rows;M++)for(var O=0;O<this.columns;O++)this.set(M,O,Math.expm1(this.get(M,O)));return this},J.expm1=function(M){var O=new it(M);return O.expm1()},J.prototype.floor=function(){for(var M=0;M<this.rows;M++)for(var O=0;O<this.columns;O++)this.set(M,O,Math.floor(this.get(M,O)));return this},J.floor=function(M){var O=new it(M);return O.floor()},J.prototype.fround=function(){for(var M=0;M<this.rows;M++)for(var O=0;O<this.columns;O++)this.set(M,O,Math.fround(this.get(M,O)));return this},J.fround=function(M){var O=new it(M);return O.fround()},J.prototype.log=function(){for(var M=0;M<this.rows;M++)for(var O=0;O<this.columns;O++)this.set(M,O,Math.log(this.get(M,O)));return this},J.log=function(M){var O=new it(M);return O.log()},J.prototype.log1p=function(){for(var M=0;M<this.rows;M++)for(var O=0;O<this.columns;O++)this.set(M,O,Math.log1p(this.get(M,O)));return this},J.log1p=function(M){var O=new it(M);return O.log1p()},J.prototype.log10=function(){for(var M=0;M<this.rows;M++)for(var O=0;O<this.columns;O++)this.set(M,O,Math.log10(this.get(M,O)));return this},J.log10=function(M){var O=new it(M);return O.log10()},J.prototype.log2=function(){for(var M=0;M<this.rows;M++)for(var O=0;O<this.columns;O++)this.set(M,O,Math.log2(this.get(M,O)));return this},J.log2=function(M){var O=new it(M);return O.log2()},J.prototype.round=function(){for(var M=0;M<this.rows;M++)for(var O=0;O<this.columns;O++)this.set(M,O,Math.round(this.get(M,O)));return this},J.round=function(M){var O=new it(M);return O.round()},J.prototype.sign=function(){for(var M=0;M<this.rows;M++)for(var O=0;O<this.columns;O++)this.set(M,O,Math.sign(this.get(M,O)));return this},J.sign=function(M){var O=new it(M);return O.sign()},J.prototype.sin=function(){for(var M=0;M<this.rows;M++)for(var O=0;O<this.columns;O++)this.set(M,O,Math.sin(this.get(M,O)));return this},J.sin=function(M){var O=new it(M);return O.sin()},J.prototype.sinh=function(){for(var M=0;M<this.rows;M++)for(var O=0;O<this.columns;O++)this.set(M,O,Math.sinh(this.get(M,O)));return this},J.sinh=function(M){var O=new it(M);return O.sinh()},J.prototype.sqrt=function(){for(var M=0;M<this.rows;M++)for(var O=0;O<this.columns;O++)this.set(M,O,Math.sqrt(this.get(M,O)));return this},J.sqrt=function(M){var O=new it(M);return O.sqrt()},J.prototype.tan=function(){for(var M=0;M<this.rows;M++)for(var O=0;O<this.columns;O++)this.set(M,O,Math.tan(this.get(M,O)));return this},J.tan=function(M){var O=new it(M);return O.tan()},J.prototype.tanh=function(){for(var M=0;M<this.rows;M++)for(var O=0;O<this.columns;O++)this.set(M,O,Math.tanh(this.get(M,O)));return this},J.tanh=function(M){var O=new it(M);return O.tanh()},J.prototype.trunc=function(){for(var M=0;M<this.rows;M++)for(var O=0;O<this.columns;O++)this.set(M,O,Math.trunc(this.get(M,O)));return this},J.trunc=function(M){var O=new it(M);return O.trunc()},J.pow=function(M,O){var X=new it(M);return X.pow(O)},J.prototype.pow=function(M){return typeof M=="number"?this.powS(M):this.powM(M)},J.prototype.powS=function(M){for(var O=0;O<this.rows;O++)for(var X=0;X<this.columns;X++)this.set(O,X,Math.pow(this.get(O,X),M));return this},J.prototype.powM=function(M){if(M=it.checkMatrix(M),this.rows!==M.rows||this.columns!==M.columns)throw new RangeError("Matrices dimensions must be equal");for(var O=0;O<this.rows;O++)for(var X=0;X<this.columns;X++)this.set(O,X,Math.pow(this.get(O,X),M.get(O,X)));return this}}function rt(J,it,R){var M=R?J.rows:J.rows-1;if(it<0||it>M)throw new RangeError("Row index out of range")}function ct(J,it,R){var M=R?J.columns:J.columns-1;if(it<0||it>M)throw new RangeError("Column index out of range")}function ot(J,it){if(it.to1DArray&&(it=it.to1DArray()),it.length!==J.columns)throw new RangeError("vector size must be the same as the number of columns");return it}function xt(J,it){if(it.to1DArray&&(it=it.to1DArray()),it.length!==J.rows)throw new RangeError("vector size must be the same as the number of rows");return it}function pt(J,it){if(!D(it))throw new TypeError("row indices must be an array");for(var R=0;R<it.length;R++)if(it[R]<0||it[R]>=J.rows)throw new RangeError("row indices are out of range")}function Xt(J,it){if(!D(it))throw new TypeError("column indices must be an array");for(var R=0;R<it.length;R++)if(it[R]<0||it[R]>=J.columns)throw new RangeError("column indices are out of range")}function Ct(J,it,R,M,O){if(arguments.length!==5)throw new RangeError("expected 4 arguments");if(Z("startRow",it),Z("endRow",R),Z("startColumn",M),Z("endColumn",O),it>R||M>O||it<0||it>=J.rows||R<0||R>=J.rows||M<0||M>=J.columns||O<0||O>=J.columns)throw new RangeError("Submatrix indices are out of range")}function At(J){for(var it=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,R=[],M=0;M<J;M++)R.push(it);return R}function Z(J,it){if(typeof it!="number")throw new TypeError("".concat(J," must be a number"))}function q(J){if(J.isEmpty())throw new Error("Empty matrix has no elements to index")}function bt(J){for(var it=At(J.rows),R=0;R<J.rows;++R)for(var M=0;M<J.columns;++M)it[R]+=J.get(R,M);return it}function _t(J){for(var it=At(J.columns),R=0;R<J.rows;++R)for(var M=0;M<J.columns;++M)it[M]+=J.get(R,M);return it}function nt(J){for(var it=0,R=0;R<J.rows;R++)for(var M=0;M<J.columns;M++)it+=J.get(R,M);return it}function vt(J){for(var it=At(J.rows,1),R=0;R<J.rows;++R)for(var M=0;M<J.columns;++M)it[R]*=J.get(R,M);return it}function It(J){for(var it=At(J.columns,1),R=0;R<J.rows;++R)for(var M=0;M<J.columns;++M)it[M]*=J.get(R,M);return it}function Pt(J){for(var it=1,R=0;R<J.rows;R++)for(var M=0;M<J.columns;M++)it*=J.get(R,M);return it}function Et(J,it,R){for(var M=J.rows,O=J.columns,X=[],mt=0;mt<M;mt++){for(var Ft=0,Bt=0,re=0,De=0;De<O;De++)re=J.get(mt,De)-R[mt],Ft+=re,Bt+=re*re;it?X.push((Bt-Ft*Ft/O)/(O-1)):X.push((Bt-Ft*Ft/O)/O)}return X}function Nt(J,it,R){for(var M=J.rows,O=J.columns,X=[],mt=0;mt<O;mt++){for(var Ft=0,Bt=0,re=0,De=0;De<M;De++)re=J.get(De,mt)-R[mt],Ft+=re,Bt+=re*re;it?X.push((Bt-Ft*Ft/M)/(M-1)):X.push((Bt-Ft*Ft/M)/M)}return X}function $t(J,it,R){for(var M=J.rows,O=J.columns,X=M*O,mt=0,Ft=0,Bt=0,re=0;re<M;re++)for(var De=0;De<O;De++)Bt=J.get(re,De)-R,mt+=Bt,Ft+=Bt*Bt;return it?(Ft-mt*mt/X)/(X-1):(Ft-mt*mt/X)/X}function ue(J,it){for(var R=0;R<J.rows;R++)for(var M=0;M<J.columns;M++)J.set(R,M,J.get(R,M)-it[R])}function ie(J,it){for(var R=0;R<J.rows;R++)for(var M=0;M<J.columns;M++)J.set(R,M,J.get(R,M)-it[M])}function Dt(J,it){for(var R=0;R<J.rows;R++)for(var M=0;M<J.columns;M++)J.set(R,M,J.get(R,M)-it)}function ne(J){for(var it=[],R=0;R<J.rows;R++){for(var M=0,O=0;O<J.columns;O++)M+=Math.pow(J.get(R,O),2)/(J.columns-1);it.push(Math.sqrt(M))}return it}function pe(J,it){for(var R=0;R<J.rows;R++)for(var M=0;M<J.columns;M++)J.set(R,M,J.get(R,M)/it[R])}function Wt(J){for(var it=[],R=0;R<J.columns;R++){for(var M=0,O=0;O<J.rows;O++)M+=Math.pow(J.get(O,R),2)/(J.rows-1);it.push(Math.sqrt(M))}return it}function ae(J,it){for(var R=0;R<J.rows;R++)for(var M=0;M<J.columns;M++)J.set(R,M,J.get(R,M)/it[M])}function Se(J){for(var it=J.size-1,R=0,M=0;M<J.columns;M++)for(var O=0;O<J.rows;O++)R+=Math.pow(J.get(O,M),2)/it;return Math.sqrt(R)}function be(J,it){for(var R=0;R<J.rows;R++)for(var M=0;M<J.columns;M++)J.set(R,M,J.get(R,M)/it)}var Qt=function(){function J(){x()(this,J)}return A()(J,[{key:"size",get:function(){return this.rows*this.columns}},{key:"apply",value:function(R){if(typeof R!="function")throw new TypeError("callback must be a function");for(var M=0;M<this.rows;M++)for(var O=0;O<this.columns;O++)R.call(this,M,O);return this}},{key:"to1DArray",value:function(){for(var R=[],M=0;M<this.rows;M++)for(var O=0;O<this.columns;O++)R.push(this.get(M,O));return R}},{key:"to2DArray",value:function(){for(var R=[],M=0;M<this.rows;M++){R.push([]);for(var O=0;O<this.columns;O++)R[M].push(this.get(M,O))}return R}},{key:"toJSON",value:function(){return this.to2DArray()}},{key:"isRowVector",value:function(){return this.rows===1}},{key:"isColumnVector",value:function(){return this.columns===1}},{key:"isVector",value:function(){return this.rows===1||this.columns===1}},{key:"isSquare",value:function(){return this.rows===this.columns}},{key:"isEmpty",value:function(){return this.rows===0||this.columns===0}},{key:"isSymmetric",value:function(){if(this.isSquare()){for(var R=0;R<this.rows;R++)for(var M=0;M<=R;M++)if(this.get(R,M)!==this.get(M,R))return!1;return!0}return!1}},{key:"isEchelonForm",value:function(){for(var R=0,M=0,O=-1,X=!0,mt=!1;R<this.rows&&X;){for(M=0,mt=!1;M<this.columns&&mt===!1;)this.get(R,M)===0?M++:this.get(R,M)===1&&M>O?(mt=!0,O=M):(X=!1,mt=!0);R++}return X}},{key:"isReducedEchelonForm",value:function(){for(var R=0,M=0,O=-1,X=!0,mt=!1;R<this.rows&&X;){for(M=0,mt=!1;M<this.columns&&mt===!1;)this.get(R,M)===0?M++:this.get(R,M)===1&&M>O?(mt=!0,O=M):(X=!1,mt=!0);for(var Ft=M+1;Ft<this.rows;Ft++)this.get(R,Ft)!==0&&(X=!1);R++}return X}},{key:"echelonForm",value:function(){for(var R=this.clone(),M=0,O=0;M<R.rows&&O<R.columns;){for(var X=M,mt=M;mt<R.rows;mt++)R.get(mt,O)>R.get(X,O)&&(X=mt);if(R.get(X,O)===0)O++;else{R.swapRows(M,X);for(var Ft=R.get(M,O),Bt=O;Bt<R.columns;Bt++)R.set(M,Bt,R.get(M,Bt)/Ft);for(var re=M+1;re<R.rows;re++){var De=R.get(re,O)/R.get(M,O);R.set(re,O,0);for(var me=O+1;me<R.columns;me++)R.set(re,me,R.get(re,me)-R.get(M,me)*De)}M++,O++}}return R}},{key:"reducedEchelonForm",value:function(){for(var R=this.echelonForm(),M=R.columns,O=R.rows,X=O-1;X>=0;)if(R.maxRow(X)===0)X--;else{for(var mt=0,Ft=!1;mt<O&&Ft===!1;)R.get(X,mt)===1?Ft=!0:mt++;for(var Bt=0;Bt<X;Bt++)for(var re=R.get(Bt,mt),De=mt;De<M;De++){var me=R.get(Bt,De)-re*R.get(X,De);R.set(Bt,De,me)}X--}return R}},{key:"set",value:function(){throw new Error("set method is unimplemented")}},{key:"get",value:function(){throw new Error("get method is unimplemented")}},{key:"repeat",value:function(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(m()(R)!=="object")throw new TypeError("options must be an object");var M=R.rows,O=M===void 0?1:M,X=R.columns,mt=X===void 0?1:X;if(!Number.isInteger(O)||O<=0)throw new TypeError("rows must be a positive integer");if(!Number.isInteger(mt)||mt<=0)throw new TypeError("columns must be a positive integer");for(var Ft=new Le(this.rows*O,this.columns*mt),Bt=0;Bt<O;Bt++)for(var re=0;re<mt;re++)Ft.setSubMatrix(this,this.rows*Bt,this.columns*re);return Ft}},{key:"fill",value:function(R){for(var M=0;M<this.rows;M++)for(var O=0;O<this.columns;O++)this.set(M,O,R);return this}},{key:"neg",value:function(){return this.mulS(-1)}},{key:"getRow",value:function(R){rt(this,R);for(var M=[],O=0;O<this.columns;O++)M.push(this.get(R,O));return M}},{key:"getRowVector",value:function(R){return Le.rowVector(this.getRow(R))}},{key:"setRow",value:function(R,M){rt(this,R),M=ot(this,M);for(var O=0;O<this.columns;O++)this.set(R,O,M[O]);return this}},{key:"swapRows",value:function(R,M){rt(this,R),rt(this,M);for(var O=0;O<this.columns;O++){var X=this.get(R,O);this.set(R,O,this.get(M,O)),this.set(M,O,X)}return this}},{key:"getColumn",value:function(R){ct(this,R);for(var M=[],O=0;O<this.rows;O++)M.push(this.get(O,R));return M}},{key:"getColumnVector",value:function(R){return Le.columnVector(this.getColumn(R))}},{key:"setColumn",value:function(R,M){ct(this,R),M=xt(this,M);for(var O=0;O<this.rows;O++)this.set(O,R,M[O]);return this}},{key:"swapColumns",value:function(R,M){ct(this,R),ct(this,M);for(var O=0;O<this.rows;O++){var X=this.get(O,R);this.set(O,R,this.get(O,M)),this.set(O,M,X)}return this}},{key:"addRowVector",value:function(R){R=ot(this,R);for(var M=0;M<this.rows;M++)for(var O=0;O<this.columns;O++)this.set(M,O,this.get(M,O)+R[O]);return this}},{key:"subRowVector",value:function(R){R=ot(this,R);for(var M=0;M<this.rows;M++)for(var O=0;O<this.columns;O++)this.set(M,O,this.get(M,O)-R[O]);return this}},{key:"mulRowVector",value:function(R){R=ot(this,R);for(var M=0;M<this.rows;M++)for(var O=0;O<this.columns;O++)this.set(M,O,this.get(M,O)*R[O]);return this}},{key:"divRowVector",value:function(R){R=ot(this,R);for(var M=0;M<this.rows;M++)for(var O=0;O<this.columns;O++)this.set(M,O,this.get(M,O)/R[O]);return this}},{key:"addColumnVector",value:function(R){R=xt(this,R);for(var M=0;M<this.rows;M++)for(var O=0;O<this.columns;O++)this.set(M,O,this.get(M,O)+R[M]);return this}},{key:"subColumnVector",value:function(R){R=xt(this,R);for(var M=0;M<this.rows;M++)for(var O=0;O<this.columns;O++)this.set(M,O,this.get(M,O)-R[M]);return this}},{key:"mulColumnVector",value:function(R){R=xt(this,R);for(var M=0;M<this.rows;M++)for(var O=0;O<this.columns;O++)this.set(M,O,this.get(M,O)*R[M]);return this}},{key:"divColumnVector",value:function(R){R=xt(this,R);for(var M=0;M<this.rows;M++)for(var O=0;O<this.columns;O++)this.set(M,O,this.get(M,O)/R[M]);return this}},{key:"mulRow",value:function(R,M){rt(this,R);for(var O=0;O<this.columns;O++)this.set(R,O,this.get(R,O)*M);return this}},{key:"mulColumn",value:function(R,M){ct(this,R);for(var O=0;O<this.rows;O++)this.set(O,R,this.get(O,R)*M);return this}},{key:"max",value:function(R){if(this.isEmpty())return NaN;switch(R){case"row":{for(var M=new Array(this.rows).fill(Number.NEGATIVE_INFINITY),O=0;O<this.rows;O++)for(var X=0;X<this.columns;X++)this.get(O,X)>M[O]&&(M[O]=this.get(O,X));return M}case"column":{for(var mt=new Array(this.columns).fill(Number.NEGATIVE_INFINITY),Ft=0;Ft<this.rows;Ft++)for(var Bt=0;Bt<this.columns;Bt++)this.get(Ft,Bt)>mt[Bt]&&(mt[Bt]=this.get(Ft,Bt));return mt}case void 0:{for(var re=this.get(0,0),De=0;De<this.rows;De++)for(var me=0;me<this.columns;me++)this.get(De,me)>re&&(re=this.get(De,me));return re}default:throw new Error("invalid option: ".concat(R))}}},{key:"maxIndex",value:function(){q(this);for(var R=this.get(0,0),M=[0,0],O=0;O<this.rows;O++)for(var X=0;X<this.columns;X++)this.get(O,X)>R&&(R=this.get(O,X),M[0]=O,M[1]=X);return M}},{key:"min",value:function(R){if(this.isEmpty())return NaN;switch(R){case"row":{for(var M=new Array(this.rows).fill(Number.POSITIVE_INFINITY),O=0;O<this.rows;O++)for(var X=0;X<this.columns;X++)this.get(O,X)<M[O]&&(M[O]=this.get(O,X));return M}case"column":{for(var mt=new Array(this.columns).fill(Number.POSITIVE_INFINITY),Ft=0;Ft<this.rows;Ft++)for(var Bt=0;Bt<this.columns;Bt++)this.get(Ft,Bt)<mt[Bt]&&(mt[Bt]=this.get(Ft,Bt));return mt}case void 0:{for(var re=this.get(0,0),De=0;De<this.rows;De++)for(var me=0;me<this.columns;me++)this.get(De,me)<re&&(re=this.get(De,me));return re}default:throw new Error("invalid option: ".concat(R))}}},{key:"minIndex",value:function(){q(this);for(var R=this.get(0,0),M=[0,0],O=0;O<this.rows;O++)for(var X=0;X<this.columns;X++)this.get(O,X)<R&&(R=this.get(O,X),M[0]=O,M[1]=X);return M}},{key:"maxRow",value:function(R){if(rt(this,R),this.isEmpty())return NaN;for(var M=this.get(R,0),O=1;O<this.columns;O++)this.get(R,O)>M&&(M=this.get(R,O));return M}},{key:"maxRowIndex",value:function(R){rt(this,R),q(this);for(var M=this.get(R,0),O=[R,0],X=1;X<this.columns;X++)this.get(R,X)>M&&(M=this.get(R,X),O[1]=X);return O}},{key:"minRow",value:function(R){if(rt(this,R),this.isEmpty())return NaN;for(var M=this.get(R,0),O=1;O<this.columns;O++)this.get(R,O)<M&&(M=this.get(R,O));return M}},{key:"minRowIndex",value:function(R){rt(this,R),q(this);for(var M=this.get(R,0),O=[R,0],X=1;X<this.columns;X++)this.get(R,X)<M&&(M=this.get(R,X),O[1]=X);return O}},{key:"maxColumn",value:function(R){if(ct(this,R),this.isEmpty())return NaN;for(var M=this.get(0,R),O=1;O<this.rows;O++)this.get(O,R)>M&&(M=this.get(O,R));return M}},{key:"maxColumnIndex",value:function(R){ct(this,R),q(this);for(var M=this.get(0,R),O=[0,R],X=1;X<this.rows;X++)this.get(X,R)>M&&(M=this.get(X,R),O[0]=X);return O}},{key:"minColumn",value:function(R){if(ct(this,R),this.isEmpty())return NaN;for(var M=this.get(0,R),O=1;O<this.rows;O++)this.get(O,R)<M&&(M=this.get(O,R));return M}},{key:"minColumnIndex",value:function(R){ct(this,R),q(this);for(var M=this.get(0,R),O=[0,R],X=1;X<this.rows;X++)this.get(X,R)<M&&(M=this.get(X,R),O[0]=X);return O}},{key:"diag",value:function(){for(var R=Math.min(this.rows,this.columns),M=[],O=0;O<R;O++)M.push(this.get(O,O));return M}},{key:"norm",value:function(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"frobenius",M=0;if(R==="max")return this.max();if(R==="frobenius"){for(var O=0;O<this.rows;O++)for(var X=0;X<this.columns;X++)M=M+this.get(O,X)*this.get(O,X);return Math.sqrt(M)}else throw new RangeError("unknown norm type: ".concat(R))}},{key:"cumulativeSum",value:function(){for(var R=0,M=0;M<this.rows;M++)for(var O=0;O<this.columns;O++)R+=this.get(M,O),this.set(M,O,R);return this}},{key:"dot",value:function(R){J.isMatrix(R)&&(R=R.to1DArray());var M=this.to1DArray();if(M.length!==R.length)throw new RangeError("vectors do not have the same size");for(var O=0,X=0;X<M.length;X++)O+=M[X]*R[X];return O}},{key:"mmul",value:function(R){R=Le.checkMatrix(R);for(var M=this.rows,O=this.columns,X=R.columns,mt=new Le(M,X),Ft=new Float64Array(O),Bt=0;Bt<X;Bt++){for(var re=0;re<O;re++)Ft[re]=R.get(re,Bt);for(var De=0;De<M;De++){for(var me=0,Xe=0;Xe<O;Xe++)me+=this.get(De,Xe)*Ft[Xe];mt.set(De,Bt,me)}}return mt}},{key:"strassen2x2",value:function(R){R=Le.checkMatrix(R);var M=new Le(2,2),O=this.get(0,0),X=R.get(0,0),mt=this.get(0,1),Ft=R.get(0,1),Bt=this.get(1,0),re=R.get(1,0),De=this.get(1,1),me=R.get(1,1),Xe=(O+De)*(X+me),hr=(Bt+De)*X,Ke=O*(Ft-me),Lr=De*(re-X),cn=(O+mt)*me,$e=(Bt-O)*(X+Ft),lr=(mt-De)*(re+me),Pr=Xe+Lr-cn+lr,Dr=Ke+cn,fe=hr+Lr,jt=Xe-hr+Ke+$e;return M.set(0,0,Pr),M.set(0,1,Dr),M.set(1,0,fe),M.set(1,1,jt),M}},{key:"strassen3x3",value:function(R){R=Le.checkMatrix(R);var M=new Le(3,3),O=this.get(0,0),X=this.get(0,1),mt=this.get(0,2),Ft=this.get(1,0),Bt=this.get(1,1),re=this.get(1,2),De=this.get(2,0),me=this.get(2,1),Xe=this.get(2,2),hr=R.get(0,0),Ke=R.get(0,1),Lr=R.get(0,2),cn=R.get(1,0),$e=R.get(1,1),lr=R.get(1,2),Pr=R.get(2,0),Dr=R.get(2,1),fe=R.get(2,2),jt=(O+X+mt-Ft-Bt-me-Xe)*$e,ve=(O-Ft)*(-Ke+$e),Ie=Bt*(-hr+Ke+cn-$e-lr-Pr+fe),ye=(-O+Ft+Bt)*(hr-Ke+$e),ze=(Ft+Bt)*(-hr+Ke),sr=O*hr,pr=(-O+De+me)*(hr-Lr+lr),en=(-O+De)*(Lr-lr),Fn=(De+me)*(-hr+Lr),ln=(O+X+mt-Bt-re-De-me)*lr,ea=me*(-hr+Lr+cn-$e-lr-Pr+Dr),fn=(-mt+me+Xe)*($e+Pr-Dr),Hn=(mt-Xe)*($e-Dr),la=mt*Pr,xa=(me+Xe)*(-Pr+Dr),ba=(-mt+Bt+re)*(lr+Pr-fe),Wi=(mt-re)*(lr-fe),ri=(Bt+re)*(-Pr+fe),ti=X*cn,Si=re*Dr,Xi=Ft*Lr,io=De*Ke,oo=Xe*fe,Ea=sr+la+ti,so=jt+ye+ze+sr+fn+la+xa,Io=sr+pr+Fn+ln+la+ba+ri,ii=ve+Ie+ye+sr+la+ba+Wi,Yi=ve+ye+ze+sr+Si,uo=la+ba+Wi+ri+Xi,Wo=sr+pr+en+ea+fn+Hn+la,ro=fn+Hn+la+xa+io,go=sr+pr+en+Fn+oo;return M.set(0,0,Ea),M.set(0,1,so),M.set(0,2,Io),M.set(1,0,ii),M.set(1,1,Yi),M.set(1,2,uo),M.set(2,0,Wo),M.set(2,1,ro),M.set(2,2,go),M}},{key:"mmulStrassen",value:function(R){R=Le.checkMatrix(R);var M=this.clone(),O=M.rows,X=M.columns,mt=R.rows,Ft=R.columns;X!==mt&&console.warn("Multiplying ".concat(O," x ").concat(X," and ").concat(mt," x ").concat(Ft," matrix: dimensions do not match."));function Bt(Xe,hr,Ke){var Lr=Xe.rows,cn=Xe.columns;if(Lr===hr&&cn===Ke)return Xe;var $e=J.zeros(hr,Ke);return $e=$e.setSubMatrix(Xe,0,0),$e}var re=Math.max(O,mt),De=Math.max(X,Ft);M=Bt(M,re,De),R=Bt(R,re,De);function me(Xe,hr,Ke,Lr){if(Ke<=512||Lr<=512)return Xe.mmul(hr);Ke%2===1&&Lr%2===1?(Xe=Bt(Xe,Ke+1,Lr+1),hr=Bt(hr,Ke+1,Lr+1)):Ke%2===1?(Xe=Bt(Xe,Ke+1,Lr),hr=Bt(hr,Ke+1,Lr)):Lr%2===1&&(Xe=Bt(Xe,Ke,Lr+1),hr=Bt(hr,Ke,Lr+1));var cn=parseInt(Xe.rows/2,10),$e=parseInt(Xe.columns/2,10),lr=Xe.subMatrix(0,cn-1,0,$e-1),Pr=hr.subMatrix(0,cn-1,0,$e-1),Dr=Xe.subMatrix(0,cn-1,$e,Xe.columns-1),fe=hr.subMatrix(0,cn-1,$e,hr.columns-1),jt=Xe.subMatrix(cn,Xe.rows-1,0,$e-1),ve=hr.subMatrix(cn,hr.rows-1,0,$e-1),Ie=Xe.subMatrix(cn,Xe.rows-1,$e,Xe.columns-1),ye=hr.subMatrix(cn,hr.rows-1,$e,hr.columns-1),ze=me(J.add(lr,Ie),J.add(Pr,ye),cn,$e),sr=me(J.add(jt,Ie),Pr,cn,$e),pr=me(lr,J.sub(fe,ye),cn,$e),en=me(Ie,J.sub(ve,Pr),cn,$e),Fn=me(J.add(lr,Dr),ye,cn,$e),ln=me(J.sub(jt,lr),J.add(Pr,fe),cn,$e),ea=me(J.sub(Dr,Ie),J.add(ve,ye),cn,$e),fn=J.add(ze,en);fn.sub(Fn),fn.add(ea);var Hn=J.add(pr,Fn),la=J.add(sr,en),xa=J.sub(ze,sr);xa.add(pr),xa.add(ln);var ba=J.zeros(2*fn.rows,2*fn.columns);return ba=ba.setSubMatrix(fn,0,0),ba=ba.setSubMatrix(Hn,fn.rows,0),ba=ba.setSubMatrix(la,0,fn.columns),ba=ba.setSubMatrix(xa,fn.rows,fn.columns),ba.subMatrix(0,Ke-1,0,Lr-1)}return me(M,R,re,De)}},{key:"scaleRows",value:function(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(m()(R)!=="object")throw new TypeError("options must be an object");var M=R.min,O=M===void 0?0:M,X=R.max,mt=X===void 0?1:X;if(!Number.isFinite(O))throw new TypeError("min must be a number");if(!Number.isFinite(mt))throw new TypeError("max must be a number");if(O>=mt)throw new RangeError("min must be smaller than max");for(var Ft=new Le(this.rows,this.columns),Bt=0;Bt<this.rows;Bt++){var re=this.getRow(Bt);re.length>0&&h(re,{min:O,max:mt,output:re}),Ft.setRow(Bt,re)}return Ft}},{key:"scaleColumns",value:function(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(m()(R)!=="object")throw new TypeError("options must be an object");var M=R.min,O=M===void 0?0:M,X=R.max,mt=X===void 0?1:X;if(!Number.isFinite(O))throw new TypeError("min must be a number");if(!Number.isFinite(mt))throw new TypeError("max must be a number");if(O>=mt)throw new RangeError("min must be smaller than max");for(var Ft=new Le(this.rows,this.columns),Bt=0;Bt<this.columns;Bt++){var re=this.getColumn(Bt);re.length&&h(re,{min:O,max:mt,output:re}),Ft.setColumn(Bt,re)}return Ft}},{key:"flipRows",value:function(){for(var R=Math.ceil(this.columns/2),M=0;M<this.rows;M++)for(var O=0;O<R;O++){var X=this.get(M,O),mt=this.get(M,this.columns-1-O);this.set(M,O,mt),this.set(M,this.columns-1-O,X)}return this}},{key:"flipColumns",value:function(){for(var R=Math.ceil(this.rows/2),M=0;M<this.columns;M++)for(var O=0;O<R;O++){var X=this.get(O,M),mt=this.get(this.rows-1-O,M);this.set(O,M,mt),this.set(this.rows-1-O,M,X)}return this}},{key:"kroneckerProduct",value:function(R){R=Le.checkMatrix(R);for(var M=this.rows,O=this.columns,X=R.rows,mt=R.columns,Ft=new Le(M*X,O*mt),Bt=0;Bt<M;Bt++)for(var re=0;re<O;re++)for(var De=0;De<X;De++)for(var me=0;me<mt;me++)Ft.set(X*Bt+De,mt*re+me,this.get(Bt,re)*R.get(De,me));return Ft}},{key:"kroneckerSum",value:function(R){if(R=Le.checkMatrix(R),!this.isSquare()||!R.isSquare())throw new Error("Kronecker Sum needs two Square Matrices");var M=this.rows,O=R.rows,X=this.kroneckerProduct(Le.eye(O,O)),mt=Le.eye(M,M).kroneckerProduct(R);return X.add(mt)}},{key:"transpose",value:function(){for(var R=new Le(this.columns,this.rows),M=0;M<this.rows;M++)for(var O=0;O<this.columns;O++)R.set(O,M,this.get(M,O));return R}},{key:"sortRows",value:function(){for(var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:we,M=0;M<this.rows;M++)this.setRow(M,this.getRow(M).sort(R));return this}},{key:"sortColumns",value:function(){for(var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:we,M=0;M<this.columns;M++)this.setColumn(M,this.getColumn(M).sort(R));return this}},{key:"subMatrix",value:function(R,M,O,X){Ct(this,R,M,O,X);for(var mt=new Le(M-R+1,X-O+1),Ft=R;Ft<=M;Ft++)for(var Bt=O;Bt<=X;Bt++)mt.set(Ft-R,Bt-O,this.get(Ft,Bt));return mt}},{key:"subMatrixRow",value:function(R,M,O){if(M===void 0&&(M=0),O===void 0&&(O=this.columns-1),M>O||M<0||M>=this.columns||O<0||O>=this.columns)throw new RangeError("Argument out of range");for(var X=new Le(R.length,O-M+1),mt=0;mt<R.length;mt++)for(var Ft=M;Ft<=O;Ft++){if(R[mt]<0||R[mt]>=this.rows)throw new RangeError("Row index out of range: ".concat(R[mt]));X.set(mt,Ft-M,this.get(R[mt],Ft))}return X}},{key:"subMatrixColumn",value:function(R,M,O){if(M===void 0&&(M=0),O===void 0&&(O=this.rows-1),M>O||M<0||M>=this.rows||O<0||O>=this.rows)throw new RangeError("Argument out of range");for(var X=new Le(O-M+1,R.length),mt=0;mt<R.length;mt++)for(var Ft=M;Ft<=O;Ft++){if(R[mt]<0||R[mt]>=this.columns)throw new RangeError("Column index out of range: ".concat(R[mt]));X.set(Ft-M,mt,this.get(Ft,R[mt]))}return X}},{key:"setSubMatrix",value:function(R,M,O){if(R=Le.checkMatrix(R),R.isEmpty())return this;var X=M+R.rows-1,mt=O+R.columns-1;Ct(this,M,X,O,mt);for(var Ft=0;Ft<R.rows;Ft++)for(var Bt=0;Bt<R.columns;Bt++)this.set(M+Ft,O+Bt,R.get(Ft,Bt));return this}},{key:"selection",value:function(R,M){pt(this,R),Xt(this,M);for(var O=new Le(R.length,M.length),X=0;X<R.length;X++)for(var mt=R[X],Ft=0;Ft<M.length;Ft++){var Bt=M[Ft];O.set(X,Ft,this.get(mt,Bt))}return O}},{key:"trace",value:function(){for(var R=Math.min(this.rows,this.columns),M=0,O=0;O<R;O++)M+=this.get(O,O);return M}},{key:"clone",value:function(){for(var R=new Le(this.rows,this.columns),M=0;M<this.rows;M++)for(var O=0;O<this.columns;O++)R.set(M,O,this.get(M,O));return R}},{key:"sum",value:function(R){switch(R){case"row":return bt(this);case"column":return _t(this);case void 0:return nt(this);default:throw new Error("invalid option: ".concat(R))}}},{key:"product",value:function(R){switch(R){case"row":return vt(this);case"column":return It(this);case void 0:return Pt(this);default:throw new Error("invalid option: ".concat(R))}}},{key:"mean",value:function(R){var M=this.sum(R);switch(R){case"row":{for(var O=0;O<this.rows;O++)M[O]/=this.columns;return M}case"column":{for(var X=0;X<this.columns;X++)M[X]/=this.rows;return M}case void 0:return M/this.size;default:throw new Error("invalid option: ".concat(R))}}},{key:"variance",value:function(R){var M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(m()(R)==="object"&&(M=R,R=void 0),m()(M)!=="object")throw new TypeError("options must be an object");var O=M,X=O.unbiased,mt=X===void 0?!0:X,Ft=O.mean,Bt=Ft===void 0?this.mean(R):Ft;if(typeof mt!="boolean")throw new TypeError("unbiased must be a boolean");switch(R){case"row":{if(!D(Bt))throw new TypeError("mean must be an array");return Et(this,mt,Bt)}case"column":{if(!D(Bt))throw new TypeError("mean must be an array");return Nt(this,mt,Bt)}case void 0:{if(typeof Bt!="number")throw new TypeError("mean must be a number");return $t(this,mt,Bt)}default:throw new Error("invalid option: ".concat(R))}}},{key:"standardDeviation",value:function(R,M){m()(R)==="object"&&(M=R,R=void 0);var O=this.variance(R,M);if(R===void 0)return Math.sqrt(O);for(var X=0;X<O.length;X++)O[X]=Math.sqrt(O[X]);return O}},{key:"center",value:function(R){var M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(m()(R)==="object"&&(M=R,R=void 0),m()(M)!=="object")throw new TypeError("options must be an object");var O=M,X=O.center,mt=X===void 0?this.mean(R):X;switch(R){case"row":{if(!D(mt))throw new TypeError("center must be an array");return ue(this,mt),this}case"column":{if(!D(mt))throw new TypeError("center must be an array");return ie(this,mt),this}case void 0:{if(typeof mt!="number")throw new TypeError("center must be a number");return Dt(this,mt),this}default:throw new Error("invalid option: ".concat(R))}}},{key:"scale",value:function(R){var M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(m()(R)==="object"&&(M=R,R=void 0),m()(M)!=="object")throw new TypeError("options must be an object");var O=M.scale;switch(R){case"row":{if(O===void 0)O=ne(this);else if(!D(O))throw new TypeError("scale must be an array");return pe(this,O),this}case"column":{if(O===void 0)O=Wt(this);else if(!D(O))throw new TypeError("scale must be an array");return ae(this,O),this}case void 0:{if(O===void 0)O=Se(this);else if(typeof O!="number")throw new TypeError("scale must be a number");return be(this,O),this}default:throw new Error("invalid option: ".concat(R))}}},{key:"toString",value:function(R){return W(this,R)}}],[{key:"from1DArray",value:function(R,M,O){var X=R*M;if(X!==O.length)throw new RangeError("data length does not match given dimensions");for(var mt=new Le(R,M),Ft=0;Ft<R;Ft++)for(var Bt=0;Bt<M;Bt++)mt.set(Ft,Bt,O[Ft*M+Bt]);return mt}},{key:"rowVector",value:function(R){for(var M=new Le(1,R.length),O=0;O<R.length;O++)M.set(0,O,R[O]);return M}},{key:"columnVector",value:function(R){for(var M=new Le(R.length,1),O=0;O<R.length;O++)M.set(O,0,R[O]);return M}},{key:"zeros",value:function(R,M){return new Le(R,M)}},{key:"ones",value:function(R,M){return new Le(R,M).fill(1)}},{key:"rand",value:function(R,M){var O=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(m()(O)!=="object")throw new TypeError("options must be an object");for(var X=O.random,mt=X===void 0?Math.random:X,Ft=new Le(R,M),Bt=0;Bt<R;Bt++)for(var re=0;re<M;re++)Ft.set(Bt,re,mt());return Ft}},{key:"randInt",value:function(R,M){var O=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(m()(O)!=="object")throw new TypeError("options must be an object");var X=O.min,mt=X===void 0?0:X,Ft=O.max,Bt=Ft===void 0?1e3:Ft,re=O.random,De=re===void 0?Math.random:re;if(!Number.isInteger(mt))throw new TypeError("min must be an integer");if(!Number.isInteger(Bt))throw new TypeError("max must be an integer");if(mt>=Bt)throw new RangeError("min must be smaller than max");for(var me=Bt-mt,Xe=new Le(R,M),hr=0;hr<R;hr++)for(var Ke=0;Ke<M;Ke++){var Lr=mt+Math.round(De()*me);Xe.set(hr,Ke,Lr)}return Xe}},{key:"eye",value:function(R,M,O){M===void 0&&(M=R),O===void 0&&(O=1);for(var X=Math.min(R,M),mt=this.zeros(R,M),Ft=0;Ft<X;Ft++)mt.set(Ft,Ft,O);return mt}},{key:"diag",value:function(R,M,O){var X=R.length;M===void 0&&(M=X),O===void 0&&(O=M);for(var mt=Math.min(X,M,O),Ft=this.zeros(M,O),Bt=0;Bt<mt;Bt++)Ft.set(Bt,Bt,R[Bt]);return Ft}},{key:"min",value:function(R,M){R=this.checkMatrix(R),M=this.checkMatrix(M);for(var O=R.rows,X=R.columns,mt=new Le(O,X),Ft=0;Ft<O;Ft++)for(var Bt=0;Bt<X;Bt++)mt.set(Ft,Bt,Math.min(R.get(Ft,Bt),M.get(Ft,Bt)));return mt}},{key:"max",value:function(R,M){R=this.checkMatrix(R),M=this.checkMatrix(M);for(var O=R.rows,X=R.columns,mt=new this(O,X),Ft=0;Ft<O;Ft++)for(var Bt=0;Bt<X;Bt++)mt.set(Ft,Bt,Math.max(R.get(Ft,Bt),M.get(Ft,Bt)));return mt}},{key:"checkMatrix",value:function(R){return J.isMatrix(R)?R:new Le(R)}},{key:"isMatrix",value:function(R){return R!=null&&R.klass==="Matrix"}}]),J}();Qt.prototype.klass="Matrix",typeof Symbol!="undefined"&&(Qt.prototype[Symbol.for("nodejs.util.inspect.custom")]=U);function we(J,it){return J-it}function Tt(J){return J.every(function(it){return typeof it=="number"})}Qt.random=Qt.rand,Qt.randomInt=Qt.randInt,Qt.diagonal=Qt.diag,Qt.prototype.diagonal=Qt.prototype.diag,Qt.identity=Qt.eye,Qt.prototype.negate=Qt.prototype.neg,Qt.prototype.tensorProduct=Qt.prototype.kroneckerProduct;var Le=function(J){T()(R,J);var it=P()(R);function R(M,O){var X;if(x()(this,R),X=it.call(this),R.isMatrix(M))return k()(X,M.clone());if(Number.isInteger(M)&&M>=0)if(X.data=[],Number.isInteger(O)&&O>=0)for(var mt=0;mt<M;mt++)X.data.push(new Float64Array(O));else throw new TypeError("nColumns must be a positive integer");else if(D(M)){var Ft=M;if(M=Ft.length,O=M?Ft[0].length:0,typeof O!="number")throw new TypeError("Data must be a 2D array with at least one element");X.data=[];for(var Bt=0;Bt<M;Bt++){if(Ft[Bt].length!==O)throw new RangeError("Inconsistent array dimensions");if(!Tt(Ft[Bt]))throw new TypeError("Input data contains non-numeric values");X.data.push(Float64Array.from(Ft[Bt]))}}else throw new TypeError("First argument must be a positive number or an array");return X.rows=M,X.columns=O,X}return A()(R,[{key:"set",value:function(O,X,mt){return this.data[O][X]=mt,this}},{key:"get",value:function(O,X){return this.data[O][X]}},{key:"removeRow",value:function(O){return rt(this,O),this.data.splice(O,1),this.rows-=1,this}},{key:"addRow",value:function(O,X){return X===void 0&&(X=O,O=this.rows),rt(this,O,!0),X=Float64Array.from(ot(this,X)),this.data.splice(O,0,X),this.rows+=1,this}},{key:"removeColumn",value:function(O){ct(this,O);for(var X=0;X<this.rows;X++){for(var mt=new Float64Array(this.columns-1),Ft=0;Ft<O;Ft++)mt[Ft]=this.data[X][Ft];for(var Bt=O+1;Bt<this.columns;Bt++)mt[Bt-1]=this.data[X][Bt];this.data[X]=mt}return this.columns-=1,this}},{key:"addColumn",value:function(O,X){typeof X=="undefined"&&(X=O,O=this.columns),ct(this,O,!0),X=xt(this,X);for(var mt=0;mt<this.rows;mt++){for(var Ft=new Float64Array(this.columns+1),Bt=0;Bt<O;Bt++)Ft[Bt]=this.data[mt][Bt];for(Ft[Bt++]=X[mt];Bt<this.columns+1;Bt++)Ft[Bt]=this.data[mt][Bt-1];this.data[mt]=Ft}return this.columns+=1,this}}]),R}(Qt);tt(Qt,Le);var Mr=function(J){T()(R,J);var it=P()(R);function R(M,O,X){var mt;return x()(this,R),mt=it.call(this),mt.matrix=M,mt.rows=O,mt.columns=X,mt}return A()(R)}(Qt),Ar=function(J){T()(R,J);var it=P()(R);function R(M,O){var X;return x()(this,R),ct(M,O),X=it.call(this,M,M.rows,1),X.column=O,X}return A()(R,[{key:"set",value:function(O,X,mt){return this.matrix.set(O,this.column,mt),this}},{key:"get",value:function(O){return this.matrix.get(O,this.column)}}]),R}(Mr),Ir=function(J){T()(R,J);var it=P()(R);function R(M,O){var X;return x()(this,R),Xt(M,O),X=it.call(this,M,M.rows,O.length),X.columnIndices=O,X}return A()(R,[{key:"set",value:function(O,X,mt){return this.matrix.set(O,this.columnIndices[X],mt),this}},{key:"get",value:function(O,X){return this.matrix.get(O,this.columnIndices[X])}}]),R}(Mr),Br=function(J){T()(R,J);var it=P()(R);function R(M){return x()(this,R),it.call(this,M,M.rows,M.columns)}return A()(R,[{key:"set",value:function(O,X,mt){return this.matrix.set(O,this.columns-X-1,mt),this}},{key:"get",value:function(O,X){return this.matrix.get(O,this.columns-X-1)}}]),R}(Mr),dn=function(J){T()(R,J);var it=P()(R);function R(M){return x()(this,R),it.call(this,M,M.rows,M.columns)}return A()(R,[{key:"set",value:function(O,X,mt){return this.matrix.set(this.rows-O-1,X,mt),this}},{key:"get",value:function(O,X){return this.matrix.get(this.rows-O-1,X)}}]),R}(Mr),an=function(J){T()(R,J);var it=P()(R);function R(M,O){var X;return x()(this,R),rt(M,O),X=it.call(this,M,1,M.columns),X.row=O,X}return A()(R,[{key:"set",value:function(O,X,mt){return this.matrix.set(this.row,X,mt),this}},{key:"get",value:function(O,X){return this.matrix.get(this.row,X)}}]),R}(Mr),Ln=function(J){T()(R,J);var it=P()(R);function R(M,O){var X;return x()(this,R),pt(M,O),X=it.call(this,M,O.length,M.columns),X.rowIndices=O,X}return A()(R,[{key:"set",value:function(O,X,mt){return this.matrix.set(this.rowIndices[O],X,mt),this}},{key:"get",value:function(O,X){return this.matrix.get(this.rowIndices[O],X)}}]),R}(Mr),Un=function(J){T()(R,J);var it=P()(R);function R(M,O,X){var mt;return x()(this,R),pt(M,O),Xt(M,X),mt=it.call(this,M,O.length,X.length),mt.rowIndices=O,mt.columnIndices=X,mt}return A()(R,[{key:"set",value:function(O,X,mt){return this.matrix.set(this.rowIndices[O],this.columnIndices[X],mt),this}},{key:"get",value:function(O,X){return this.matrix.get(this.rowIndices[O],this.columnIndices[X])}}]),R}(Mr),Yn=function(J){T()(R,J);var it=P()(R);function R(M,O,X,mt,Ft){var Bt;return x()(this,R),Ct(M,O,X,mt,Ft),Bt=it.call(this,M,X-O+1,Ft-mt+1),Bt.startRow=O,Bt.startColumn=mt,Bt}return A()(R,[{key:"set",value:function(O,X,mt){return this.matrix.set(this.startRow+O,this.startColumn+X,mt),this}},{key:"get",value:function(O,X){return this.matrix.get(this.startRow+O,this.startColumn+X)}}]),R}(Mr),xr=function(J){T()(R,J);var it=P()(R);function R(M){return x()(this,R),it.call(this,M,M.columns,M.rows)}return A()(R,[{key:"set",value:function(O,X,mt){return this.matrix.set(X,O,mt),this}},{key:"get",value:function(O,X){return this.matrix.get(X,O)}}]),R}(Mr),qe=function(J){T()(R,J);var it=P()(R);function R(M){var O,X=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};x()(this,R);var mt=X.rows,Ft=mt===void 0?1:mt;if(M.length%Ft!==0)throw new Error("the data length is not divisible by the number of rows");return O=it.call(this),O.rows=Ft,O.columns=M.length/Ft,O.data=M,O}return A()(R,[{key:"set",value:function(O,X,mt){var Ft=this._calculateIndex(O,X);return this.data[Ft]=mt,this}},{key:"get",value:function(O,X){var mt=this._calculateIndex(O,X);return this.data[mt]}},{key:"_calculateIndex",value:function(O,X){return O*this.columns+X}}]),R}(Qt),Cr=function(J){T()(R,J);var it=P()(R);function R(M){var O;return x()(this,R),O=it.call(this),O.data=M,O.rows=M.length,O.columns=M[0].length,O}return A()(R,[{key:"set",value:function(O,X,mt){return this.data[O][X]=mt,this}},{key:"get",value:function(O,X){return this.data[O][X]}}]),R}(Qt);function tn(J,it){if(D(J))return J[0]&&D(J[0])?new Cr(J):new qe(J,it);throw new Error("the argument is not an array")}var vn=function(){function J(it){x()(this,J),it=Cr.checkMatrix(it);var R=it.clone(),M=R.rows,O=R.columns,X=new Float64Array(M),mt=1,Ft,Bt,re,De,me,Xe,hr,Ke,Lr;for(Ft=0;Ft<M;Ft++)X[Ft]=Ft;for(Ke=new Float64Array(M),Bt=0;Bt<O;Bt++){for(Ft=0;Ft<M;Ft++)Ke[Ft]=R.get(Ft,Bt);for(Ft=0;Ft<M;Ft++){for(Lr=Math.min(Ft,Bt),me=0,re=0;re<Lr;re++)me+=R.get(Ft,re)*Ke[re];Ke[Ft]-=me,R.set(Ft,Bt,Ke[Ft])}for(De=Bt,Ft=Bt+1;Ft<M;Ft++)Math.abs(Ke[Ft])>Math.abs(Ke[De])&&(De=Ft);if(De!==Bt){for(re=0;re<O;re++)Xe=R.get(De,re),R.set(De,re,R.get(Bt,re)),R.set(Bt,re,Xe);hr=X[De],X[De]=X[Bt],X[Bt]=hr,mt=-mt}if(Bt<M&&R.get(Bt,Bt)!==0)for(Ft=Bt+1;Ft<M;Ft++)R.set(Ft,Bt,R.get(Ft,Bt)/R.get(Bt,Bt))}this.LU=R,this.pivotVector=X,this.pivotSign=mt}return A()(J,[{key:"isSingular",value:function(){for(var R=this.LU,M=R.columns,O=0;O<M;O++)if(R.get(O,O)===0)return!0;return!1}},{key:"solve",value:function(R){R=Le.checkMatrix(R);var M=this.LU,O=M.rows;if(O!==R.rows)throw new Error("Invalid matrix dimensions");if(this.isSingular())throw new Error("LU matrix is singular");var X=R.columns,mt=R.subMatrixRow(this.pivotVector,0,X-1),Ft=M.columns,Bt,re,De;for(De=0;De<Ft;De++)for(Bt=De+1;Bt<Ft;Bt++)for(re=0;re<X;re++)mt.set(Bt,re,mt.get(Bt,re)-mt.get(De,re)*M.get(Bt,De));for(De=Ft-1;De>=0;De--){for(re=0;re<X;re++)mt.set(De,re,mt.get(De,re)/M.get(De,De));for(Bt=0;Bt<De;Bt++)for(re=0;re<X;re++)mt.set(Bt,re,mt.get(Bt,re)-mt.get(De,re)*M.get(Bt,De))}return mt}},{key:"determinant",get:function(){var R=this.LU;if(!R.isSquare())throw new Error("Matrix must be square");for(var M=this.pivotSign,O=R.columns,X=0;X<O;X++)M*=R.get(X,X);return M}},{key:"lowerTriangularMatrix",get:function(){for(var R=this.LU,M=R.rows,O=R.columns,X=new Le(M,O),mt=0;mt<M;mt++)for(var Ft=0;Ft<O;Ft++)mt>Ft?X.set(mt,Ft,R.get(mt,Ft)):mt===Ft?X.set(mt,Ft,1):X.set(mt,Ft,0);return X}},{key:"upperTriangularMatrix",get:function(){for(var R=this.LU,M=R.rows,O=R.columns,X=new Le(M,O),mt=0;mt<M;mt++)for(var Ft=0;Ft<O;Ft++)mt<=Ft?X.set(mt,Ft,R.get(mt,Ft)):X.set(mt,Ft,0);return X}},{key:"pivotPermutationVector",get:function(){return Array.from(this.pivotVector)}}]),J}();function _n(J,it){var R=0;return Math.abs(J)>Math.abs(it)?(R=it/J,Math.abs(J)*Math.sqrt(1+R*R)):it!==0?(R=J/it,Math.abs(it)*Math.sqrt(1+R*R)):0}var Pn=function(){function J(it){x()(this,J),it=Cr.checkMatrix(it);var R=it.clone(),M=it.rows,O=it.columns,X=new Float64Array(O),mt,Ft,Bt,re;for(Bt=0;Bt<O;Bt++){var De=0;for(mt=Bt;mt<M;mt++)De=_n(De,R.get(mt,Bt));if(De!==0){for(R.get(Bt,Bt)<0&&(De=-De),mt=Bt;mt<M;mt++)R.set(mt,Bt,R.get(mt,Bt)/De);for(R.set(Bt,Bt,R.get(Bt,Bt)+1),Ft=Bt+1;Ft<O;Ft++){for(re=0,mt=Bt;mt<M;mt++)re+=R.get(mt,Bt)*R.get(mt,Ft);for(re=-re/R.get(Bt,Bt),mt=Bt;mt<M;mt++)R.set(mt,Ft,R.get(mt,Ft)+re*R.get(mt,Bt))}}X[Bt]=-De}this.QR=R,this.Rdiag=X}return A()(J,[{key:"solve",value:function(R){R=Le.checkMatrix(R);var M=this.QR,O=M.rows;if(R.rows!==O)throw new Error("Matrix row dimensions must agree");if(!this.isFullRank())throw new Error("Matrix is rank deficient");var X=R.columns,mt=R.clone(),Ft=M.columns,Bt,re,De,me;for(De=0;De<Ft;De++)for(re=0;re<X;re++){for(me=0,Bt=De;Bt<O;Bt++)me+=M.get(Bt,De)*mt.get(Bt,re);for(me=-me/M.get(De,De),Bt=De;Bt<O;Bt++)mt.set(Bt,re,mt.get(Bt,re)+me*M.get(Bt,De))}for(De=Ft-1;De>=0;De--){for(re=0;re<X;re++)mt.set(De,re,mt.get(De,re)/this.Rdiag[De]);for(Bt=0;Bt<De;Bt++)for(re=0;re<X;re++)mt.set(Bt,re,mt.get(Bt,re)-mt.get(De,re)*M.get(Bt,De))}return mt.subMatrix(0,Ft-1,0,X-1)}},{key:"isFullRank",value:function(){for(var R=this.QR.columns,M=0;M<R;M++)if(this.Rdiag[M]===0)return!1;return!0}},{key:"upperTriangularMatrix",get:function(){var R=this.QR,M=R.columns,O=new Le(M,M),X,mt;for(X=0;X<M;X++)for(mt=0;mt<M;mt++)X<mt?O.set(X,mt,R.get(X,mt)):X===mt?O.set(X,mt,this.Rdiag[X]):O.set(X,mt,0);return O}},{key:"orthogonalMatrix",get:function(){var R=this.QR,M=R.rows,O=R.columns,X=new Le(M,O),mt,Ft,Bt,re;for(Bt=O-1;Bt>=0;Bt--){for(mt=0;mt<M;mt++)X.set(mt,Bt,0);for(X.set(Bt,Bt,1),Ft=Bt;Ft<O;Ft++)if(R.get(Bt,Bt)!==0){for(re=0,mt=Bt;mt<M;mt++)re+=R.get(mt,Bt)*X.get(mt,Ft);for(re=-re/R.get(Bt,Bt),mt=Bt;mt<M;mt++)X.set(mt,Ft,X.get(mt,Ft)+re*R.get(mt,Bt))}}return X}}]),J}(),_r=function(){function J(it){var R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(x()(this,J),it=Cr.checkMatrix(it),it.isEmpty())throw new Error("Matrix must be non-empty");var M=it.rows,O=it.columns,X=R.computeLeftSingularVectors,mt=X===void 0?!0:X,Ft=R.computeRightSingularVectors,Bt=Ft===void 0?!0:Ft,re=R.autoTranspose,De=re===void 0?!1:re,me=!!mt,Xe=!!Bt,hr=!1,Ke;if(M<O)if(!De)Ke=it.clone(),console.warn("Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose");else{Ke=it.transpose(),M=Ke.rows,O=Ke.columns,hr=!0;var Lr=me;me=Xe,Xe=Lr}else Ke=it.clone();for(var cn=Math.min(M,O),$e=Math.min(M+1,O),lr=new Float64Array($e),Pr=new Le(M,cn),Dr=new Le(O,O),fe=new Float64Array(O),jt=new Float64Array(M),ve=new Float64Array($e),Ie=0;Ie<$e;Ie++)ve[Ie]=Ie;for(var ye=Math.min(M-1,O),ze=Math.max(0,Math.min(O-2,M)),sr=Math.max(ye,ze),pr=0;pr<sr;pr++){if(pr<ye){lr[pr]=0;for(var en=pr;en<M;en++)lr[pr]=_n(lr[pr],Ke.get(en,pr));if(lr[pr]!==0){Ke.get(pr,pr)<0&&(lr[pr]=-lr[pr]);for(var Fn=pr;Fn<M;Fn++)Ke.set(Fn,pr,Ke.get(Fn,pr)/lr[pr]);Ke.set(pr,pr,Ke.get(pr,pr)+1)}lr[pr]=-lr[pr]}for(var ln=pr+1;ln<O;ln++){if(pr<ye&&lr[pr]!==0){for(var ea=0,fn=pr;fn<M;fn++)ea+=Ke.get(fn,pr)*Ke.get(fn,ln);ea=-ea/Ke.get(pr,pr);for(var Hn=pr;Hn<M;Hn++)Ke.set(Hn,ln,Ke.get(Hn,ln)+ea*Ke.get(Hn,pr))}fe[ln]=Ke.get(pr,ln)}if(me&&pr<ye)for(var la=pr;la<M;la++)Pr.set(la,pr,Ke.get(la,pr));if(pr<ze){fe[pr]=0;for(var xa=pr+1;xa<O;xa++)fe[pr]=_n(fe[pr],fe[xa]);if(fe[pr]!==0){fe[pr+1]<0&&(fe[pr]=0-fe[pr]);for(var ba=pr+1;ba<O;ba++)fe[ba]/=fe[pr];fe[pr+1]+=1}if(fe[pr]=-fe[pr],pr+1<M&&fe[pr]!==0){for(var Wi=pr+1;Wi<M;Wi++)jt[Wi]=0;for(var ri=pr+1;ri<M;ri++)for(var ti=pr+1;ti<O;ti++)jt[ri]+=fe[ti]*Ke.get(ri,ti);for(var Si=pr+1;Si<O;Si++)for(var Xi=-fe[Si]/fe[pr+1],io=pr+1;io<M;io++)Ke.set(io,Si,Ke.get(io,Si)+Xi*jt[io])}if(Xe)for(var oo=pr+1;oo<O;oo++)Dr.set(oo,pr,fe[oo])}}var Ea=Math.min(O,M+1);if(ye<O&&(lr[ye]=Ke.get(ye,ye)),M<Ea&&(lr[Ea-1]=0),ze+1<Ea&&(fe[ze]=Ke.get(ze,Ea-1)),fe[Ea-1]=0,me){for(var so=ye;so<cn;so++){for(var Io=0;Io<M;Io++)Pr.set(Io,so,0);Pr.set(so,so,1)}for(var ii=ye-1;ii>=0;ii--)if(lr[ii]!==0){for(var Yi=ii+1;Yi<cn;Yi++){for(var uo=0,Wo=ii;Wo<M;Wo++)uo+=Pr.get(Wo,ii)*Pr.get(Wo,Yi);uo=-uo/Pr.get(ii,ii);for(var ro=ii;ro<M;ro++)Pr.set(ro,Yi,Pr.get(ro,Yi)+uo*Pr.get(ro,ii))}for(var go=ii;go<M;go++)Pr.set(go,ii,-Pr.get(go,ii));Pr.set(ii,ii,1+Pr.get(ii,ii));for(var Oo=0;Oo<ii-1;Oo++)Pr.set(Oo,ii,0)}else{for(var Yo=0;Yo<M;Yo++)Pr.set(Yo,ii,0);Pr.set(ii,ii,1)}}if(Xe)for(var Ai=O-1;Ai>=0;Ai--){if(Ai<ze&&fe[Ai]!==0)for(var $i=Ai+1;$i<O;$i++){for(var oa=0,ee=Ai+1;ee<O;ee++)oa+=Dr.get(ee,Ai)*Dr.get(ee,$i);oa=-oa/Dr.get(Ai+1,Ai);for(var de=Ai+1;de<O;de++)Dr.set(de,$i,Dr.get(de,$i)+oa*Dr.get(de,Ai))}for(var Be=0;Be<O;Be++)Dr.set(Be,Ai,0);Dr.set(Ai,Ai,1)}for(var or=Ea-1,Rr=0,Nr=Number.EPSILON;Ea>0;){var Sr=void 0,qr=void 0;for(Sr=Ea-2;Sr>=-1&&Sr!==-1;Sr--){var hn=Number.MIN_VALUE+Nr*Math.abs(lr[Sr]+Math.abs(lr[Sr+1]));if(Math.abs(fe[Sr])<=hn||Number.isNaN(fe[Sr])){fe[Sr]=0;break}}if(Sr===Ea-2)qr=4;else{var Dn=void 0;for(Dn=Ea-1;Dn>=Sr&&Dn!==Sr;Dn--){var sa=(Dn!==Ea?Math.abs(fe[Dn]):0)+(Dn!==Sr+1?Math.abs(fe[Dn-1]):0);if(Math.abs(lr[Dn])<=Nr*sa){lr[Dn]=0;break}}Dn===Sr?qr=3:Dn===Ea-1?qr=1:(qr=2,Sr=Dn)}switch(Sr++,qr){case 1:{var qn=fe[Ea-2];fe[Ea-2]=0;for(var ga=Ea-2;ga>=Sr;ga--){var ya=_n(lr[ga],qn),di=lr[ga]/ya,Ma=qn/ya;if(lr[ga]=ya,ga!==Sr&&(qn=-Ma*fe[ga-1],fe[ga-1]=di*fe[ga-1]),Xe)for(var ua=0;ua<O;ua++)ya=di*Dr.get(ua,ga)+Ma*Dr.get(ua,Ea-1),Dr.set(ua,Ea-1,-Ma*Dr.get(ua,ga)+di*Dr.get(ua,Ea-1)),Dr.set(ua,ga,ya)}break}case 2:{var ci=fe[Sr-1];fe[Sr-1]=0;for(var ei=Sr;ei<Ea;ei++){var Fa=_n(lr[ei],ci),Di=lr[ei]/Fa,yi=ci/Fa;if(lr[ei]=Fa,ci=-yi*fe[ei],fe[ei]=Di*fe[ei],me)for(var ka=0;ka<M;ka++)Fa=Di*Pr.get(ka,ei)+yi*Pr.get(ka,Sr-1),Pr.set(ka,Sr-1,-yi*Pr.get(ka,ei)+Di*Pr.get(ka,Sr-1)),Pr.set(ka,ei,Fa)}break}case 3:{var ja=Math.max(Math.abs(lr[Ea-1]),Math.abs(lr[Ea-2]),Math.abs(fe[Ea-2]),Math.abs(lr[Sr]),Math.abs(fe[Sr])),Oa=lr[Ea-1]/ja,Ni=lr[Ea-2]/ja,Mi=fe[Ea-2]/ja,Ri=lr[Sr]/ja,co=fe[Sr]/ja,qi=((Ni+Oa)*(Ni-Oa)+Mi*Mi)/2,mo=Oa*Mi*(Oa*Mi),ts=0;(qi!==0||mo!==0)&&(qi<0?ts=0-Math.sqrt(qi*qi+mo):ts=Math.sqrt(qi*qi+mo),ts=mo/(qi+ts));for(var es=(Ri+Oa)*(Ri-Oa)+ts,no=Ri*co,ni=Sr;ni<Ea-1;ni++){var Fi=_n(es,no);Fi===0&&(Fi=Number.MIN_VALUE);var fo=es/Fi,Ya=no/Fi;if(ni!==Sr&&(fe[ni-1]=Fi),es=fo*lr[ni]+Ya*fe[ni],fe[ni]=fo*fe[ni]-Ya*lr[ni],no=Ya*lr[ni+1],lr[ni+1]=fo*lr[ni+1],Xe)for(var yo=0;yo<O;yo++)Fi=fo*Dr.get(yo,ni)+Ya*Dr.get(yo,ni+1),Dr.set(yo,ni+1,-Ya*Dr.get(yo,ni)+fo*Dr.get(yo,ni+1)),Dr.set(yo,ni,Fi);if(Fi=_n(es,no),Fi===0&&(Fi=Number.MIN_VALUE),fo=es/Fi,Ya=no/Fi,lr[ni]=Fi,es=fo*fe[ni]+Ya*lr[ni+1],lr[ni+1]=-Ya*fe[ni]+fo*lr[ni+1],no=Ya*fe[ni+1],fe[ni+1]=fo*fe[ni+1],me&&ni<M-1)for(var ko=0;ko<M;ko++)Fi=fo*Pr.get(ko,ni)+Ya*Pr.get(ko,ni+1),Pr.set(ko,ni+1,-Ya*Pr.get(ko,ni)+fo*Pr.get(ko,ni+1)),Pr.set(ko,ni,Fi)}fe[Ea-2]=es,Rr=Rr+1;break}case 4:{if(lr[Sr]<=0&&(lr[Sr]=lr[Sr]<0?-lr[Sr]:0,Xe))for(var ji=0;ji<=or;ji++)Dr.set(ji,Sr,-Dr.get(ji,Sr));for(;Sr<or&&!(lr[Sr]>=lr[Sr+1]);){var is=lr[Sr];if(lr[Sr]=lr[Sr+1],lr[Sr+1]=is,Xe&&Sr<O-1)for(var zi=0;zi<O;zi++)is=Dr.get(zi,Sr+1),Dr.set(zi,Sr+1,Dr.get(zi,Sr)),Dr.set(zi,Sr,is);if(me&&Sr<M-1)for(var Bo=0;Bo<M;Bo++)is=Pr.get(Bo,Sr+1),Pr.set(Bo,Sr+1,Pr.get(Bo,Sr)),Pr.set(Bo,Sr,is);Sr++}Rr=0,Ea--;break}}}if(hr){var cs=Dr;Dr=Pr,Pr=cs}this.m=M,this.n=O,this.s=lr,this.U=Pr,this.V=Dr}return A()(J,[{key:"solve",value:function(R){for(var M=R,O=this.threshold,X=this.s.length,mt=Le.zeros(X,X),Ft=0;Ft<X;Ft++)Math.abs(this.s[Ft])<=O?mt.set(Ft,Ft,0):mt.set(Ft,Ft,1/this.s[Ft]);for(var Bt=this.U,re=this.rightSingularVectors,De=re.mmul(mt),me=re.rows,Xe=Bt.rows,hr=Le.zeros(me,Xe),Ke=0;Ke<me;Ke++)for(var Lr=0;Lr<Xe;Lr++){for(var cn=0,$e=0;$e<X;$e++)cn+=De.get(Ke,$e)*Bt.get(Lr,$e);hr.set(Ke,Lr,cn)}return hr.mmul(M)}},{key:"solveForDiagonal",value:function(R){return this.solve(Le.diag(R))}},{key:"inverse",value:function(){for(var R=this.V,M=this.threshold,O=R.rows,X=R.columns,mt=new Le(O,this.s.length),Ft=0;Ft<O;Ft++)for(var Bt=0;Bt<X;Bt++)Math.abs(this.s[Bt])>M&&mt.set(Ft,Bt,R.get(Ft,Bt)/this.s[Bt]);for(var re=this.U,De=re.rows,me=re.columns,Xe=new Le(O,De),hr=0;hr<O;hr++)for(var Ke=0;Ke<De;Ke++){for(var Lr=0,cn=0;cn<me;cn++)Lr+=mt.get(hr,cn)*re.get(Ke,cn);Xe.set(hr,Ke,Lr)}return Xe}},{key:"condition",get:function(){return this.s[0]/this.s[Math.min(this.m,this.n)-1]}},{key:"norm2",get:function(){return this.s[0]}},{key:"rank",get:function(){for(var R=Math.max(this.m,this.n)*this.s[0]*Number.EPSILON,M=0,O=this.s,X=0,mt=O.length;X<mt;X++)O[X]>R&&M++;return M}},{key:"diagonal",get:function(){return Array.from(this.s)}},{key:"threshold",get:function(){return Number.EPSILON/2*Math.max(this.m,this.n)*this.s[0]}},{key:"leftSingularVectors",get:function(){return this.U}},{key:"rightSingularVectors",get:function(){return this.V}},{key:"diagonalMatrix",get:function(){return Le.diag(this.s)}}]),J}();function un(J){var it=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return J=Cr.checkMatrix(J),it?new _r(J).inverse():An(J,Le.eye(J.rows))}function An(J,it){var R=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return J=Cr.checkMatrix(J),it=Cr.checkMatrix(it),R?new _r(J).solve(it):J.isSquare()?new vn(J).solve(it):new Pn(J).solve(it)}function on(J){if(J=Le.checkMatrix(J),J.isSquare()){if(J.columns===0)return 1;var it,R,M,O;if(J.columns===2)return it=J.get(0,0),R=J.get(0,1),M=J.get(1,0),O=J.get(1,1),it*O-R*M;if(J.columns===3){var X,mt,Ft;return X=new Un(J,[1,2],[1,2]),mt=new Un(J,[1,2],[0,2]),Ft=new Un(J,[1,2],[0,1]),it=J.get(0,0),R=J.get(0,1),M=J.get(0,2),it*on(X)-R*on(mt)+M*on(Ft)}else return new vn(J).determinant}else throw Error("determinant can only be calculated for a square matrix")}function Wn(J,it){for(var R=[],M=0;M<J;M++)M!==it&&R.push(M);return R}function Cn(J,it,R){var M=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1e-9,O=arguments.length>4&&arguments[4]!==void 0?arguments[4]:1e-9;if(J>O)return new Array(it.rows+1).fill(0);for(var X=it.addRow(R,[0]),mt=0;mt<X.rows;mt++)Math.abs(X.get(mt,0))<M&&X.set(mt,0,0);return X.to1DArray()}function On(J){var it=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},R=it.thresholdValue,M=R===void 0?1e-9:R,O=it.thresholdError,X=O===void 0?1e-9:O;J=Le.checkMatrix(J);for(var mt=J.rows,Ft=new Le(mt,mt),Bt=0;Bt<mt;Bt++){var re=Le.columnVector(J.getRow(Bt)),De=J.subMatrixRow(Wn(mt,Bt)).transpose(),me=new _r(De),Xe=me.solve(re),hr=Le.sub(re,De.mmul(Xe)).abs().max();Ft.setRow(Bt,Cn(hr,Xe,Bt,M,X))}return Ft}function jn(J){var it=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.EPSILON;if(J=Le.checkMatrix(J),J.isEmpty())return J.transpose();for(var R=new _r(J,{autoTranspose:!0}),M=R.leftSingularVectors,O=R.rightSingularVectors,X=R.diagonal,mt=0;mt<X.length;mt++)Math.abs(X[mt])>it?X[mt]=1/X[mt]:X[mt]=0;return O.mmul(Le.diag(X).mmul(M.transpose()))}function at(J){var it=arguments.length>1&&arguments[1]!==void 0?arguments[1]:J,R=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};J=new Le(J);var M=!1;if(m()(it)==="object"&&!Le.isMatrix(it)&&!D(it)?(R=it,it=J,M=!0):it=new Le(it),J.rows!==it.rows)throw new TypeError("Both matrices must have the same number of rows");var O=R,X=O.center,mt=X===void 0?!0:X;mt&&(J=J.center("column"),M||(it=it.center("column")));for(var Ft=J.transpose().mmul(it),Bt=0;Bt<Ft.rows;Bt++)for(var re=0;re<Ft.columns;re++)Ft.set(Bt,re,Ft.get(Bt,re)*(1/(J.rows-1)));return Ft}function Ze(J){var it=arguments.length>1&&arguments[1]!==void 0?arguments[1]:J,R=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};J=new Le(J);var M=!1;if(m()(it)==="object"&&!Le.isMatrix(it)&&!D(it)?(R=it,it=J,M=!0):it=new Le(it),J.rows!==it.rows)throw new TypeError("Both matrices must have the same number of rows");var O=R,X=O.center,mt=X===void 0?!0:X,Ft=O.scale,Bt=Ft===void 0?!0:Ft;mt&&(J.center("column"),M||it.center("column")),Bt&&(J.scale("column"),M||it.scale("column"));for(var re=J.standardDeviation("column",{unbiased:!0}),De=M?re:it.standardDeviation("column",{unbiased:!0}),me=J.transpose().mmul(it),Xe=0;Xe<me.rows;Xe++)for(var hr=0;hr<me.columns;hr++)me.set(Xe,hr,me.get(Xe,hr)*(1/(re[Xe]*De[hr]))*(1/(J.rows-1)));return me}var qt=function(){function J(it){var R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};x()(this,J);var M=R.assumeSymmetric,O=M===void 0?!1:M;if(it=Cr.checkMatrix(it),!it.isSquare())throw new Error("Matrix is not a square matrix");if(it.isEmpty())throw new Error("Matrix must be non-empty");var X=it.columns,mt=new Le(X,X),Ft=new Float64Array(X),Bt=new Float64Array(X),re=it,De,me,Xe=!1;if(O?Xe=!0:Xe=it.isSymmetric(),Xe){for(De=0;De<X;De++)for(me=0;me<X;me++)mt.set(De,me,re.get(De,me));Jt(X,Bt,Ft,mt),St(X,Bt,Ft,mt)}else{var hr=new Le(X,X),Ke=new Float64Array(X);for(me=0;me<X;me++)for(De=0;De<X;De++)hr.set(De,me,re.get(De,me));Ce(X,hr,Ke,mt),kt(X,Bt,Ft,mt,hr)}this.n=X,this.e=Bt,this.d=Ft,this.V=mt}return A()(J,[{key:"realEigenvalues",get:function(){return Array.from(this.d)}},{key:"imaginaryEigenvalues",get:function(){return Array.from(this.e)}},{key:"eigenvectorMatrix",get:function(){return this.V}},{key:"diagonalMatrix",get:function(){var R=this.n,M=this.e,O=this.d,X=new Le(R,R),mt,Ft;for(mt=0;mt<R;mt++){for(Ft=0;Ft<R;Ft++)X.set(mt,Ft,0);X.set(mt,mt,O[mt]),M[mt]>0?X.set(mt,mt+1,M[mt]):M[mt]<0&&X.set(mt,mt-1,M[mt])}return X}}]),J}();function Jt(J,it,R,M){var O,X,mt,Ft,Bt,re,De,me;for(Bt=0;Bt<J;Bt++)R[Bt]=M.get(J-1,Bt);for(Ft=J-1;Ft>0;Ft--){for(me=0,mt=0,re=0;re<Ft;re++)me=me+Math.abs(R[re]);if(me===0)for(it[Ft]=R[Ft-1],Bt=0;Bt<Ft;Bt++)R[Bt]=M.get(Ft-1,Bt),M.set(Ft,Bt,0),M.set(Bt,Ft,0);else{for(re=0;re<Ft;re++)R[re]/=me,mt+=R[re]*R[re];for(O=R[Ft-1],X=Math.sqrt(mt),O>0&&(X=-X),it[Ft]=me*X,mt=mt-O*X,R[Ft-1]=O-X,Bt=0;Bt<Ft;Bt++)it[Bt]=0;for(Bt=0;Bt<Ft;Bt++){for(O=R[Bt],M.set(Bt,Ft,O),X=it[Bt]+M.get(Bt,Bt)*O,re=Bt+1;re<=Ft-1;re++)X+=M.get(re,Bt)*R[re],it[re]+=M.get(re,Bt)*O;it[Bt]=X}for(O=0,Bt=0;Bt<Ft;Bt++)it[Bt]/=mt,O+=it[Bt]*R[Bt];for(De=O/(mt+mt),Bt=0;Bt<Ft;Bt++)it[Bt]-=De*R[Bt];for(Bt=0;Bt<Ft;Bt++){for(O=R[Bt],X=it[Bt],re=Bt;re<=Ft-1;re++)M.set(re,Bt,M.get(re,Bt)-(O*it[re]+X*R[re]));R[Bt]=M.get(Ft-1,Bt),M.set(Ft,Bt,0)}}R[Ft]=mt}for(Ft=0;Ft<J-1;Ft++){if(M.set(J-1,Ft,M.get(Ft,Ft)),M.set(Ft,Ft,1),mt=R[Ft+1],mt!==0){for(re=0;re<=Ft;re++)R[re]=M.get(re,Ft+1)/mt;for(Bt=0;Bt<=Ft;Bt++){for(X=0,re=0;re<=Ft;re++)X+=M.get(re,Ft+1)*M.get(re,Bt);for(re=0;re<=Ft;re++)M.set(re,Bt,M.get(re,Bt)-X*R[re])}}for(re=0;re<=Ft;re++)M.set(re,Ft+1,0)}for(Bt=0;Bt<J;Bt++)R[Bt]=M.get(J-1,Bt),M.set(J-1,Bt,0);M.set(J-1,J-1,1),it[0]=0}function St(J,it,R,M){var O,X,mt,Ft,Bt,re,De,me,Xe,hr,Ke,Lr,cn,$e,lr,Pr,Dr;for(mt=1;mt<J;mt++)it[mt-1]=it[mt];it[J-1]=0;var fe=0,jt=0,ve=Number.EPSILON;for(re=0;re<J;re++){for(jt=Math.max(jt,Math.abs(R[re])+Math.abs(it[re])),De=re;De<J&&!(Math.abs(it[De])<=ve*jt);)De++;if(De>re){Dr=0;do{for(Dr=Dr+1,O=R[re],me=(R[re+1]-O)/(2*it[re]),Xe=_n(me,1),me<0&&(Xe=-Xe),R[re]=it[re]/(me+Xe),R[re+1]=it[re]*(me+Xe),hr=R[re+1],X=O-R[re],mt=re+2;mt<J;mt++)R[mt]-=X;for(fe=fe+X,me=R[De],Ke=1,Lr=Ke,cn=Ke,$e=it[re+1],lr=0,Pr=0,mt=De-1;mt>=re;mt--)for(cn=Lr,Lr=Ke,Pr=lr,O=Ke*it[mt],X=Ke*me,Xe=_n(me,it[mt]),it[mt+1]=lr*Xe,lr=it[mt]/Xe,Ke=me/Xe,me=Ke*R[mt]-lr*O,R[mt+1]=X+lr*(Ke*O+lr*R[mt]),Bt=0;Bt<J;Bt++)X=M.get(Bt,mt+1),M.set(Bt,mt+1,lr*M.get(Bt,mt)+Ke*X),M.set(Bt,mt,Ke*M.get(Bt,mt)-lr*X);me=-lr*Pr*cn*$e*it[re]/hr,it[re]=lr*me,R[re]=Ke*me}while(Math.abs(it[re])>ve*jt)}R[re]=R[re]+fe,it[re]=0}for(mt=0;mt<J-1;mt++){for(Bt=mt,me=R[mt],Ft=mt+1;Ft<J;Ft++)R[Ft]<me&&(Bt=Ft,me=R[Ft]);if(Bt!==mt)for(R[Bt]=R[mt],R[mt]=me,Ft=0;Ft<J;Ft++)me=M.get(Ft,mt),M.set(Ft,mt,M.get(Ft,Bt)),M.set(Ft,Bt,me)}}function Ce(J,it,R,M){var O=0,X=J-1,mt,Ft,Bt,re,De,me,Xe;for(me=O+1;me<=X-1;me++){for(Xe=0,re=me;re<=X;re++)Xe=Xe+Math.abs(it.get(re,me-1));if(Xe!==0){for(Bt=0,re=X;re>=me;re--)R[re]=it.get(re,me-1)/Xe,Bt+=R[re]*R[re];for(Ft=Math.sqrt(Bt),R[me]>0&&(Ft=-Ft),Bt=Bt-R[me]*Ft,R[me]=R[me]-Ft,De=me;De<J;De++){for(mt=0,re=X;re>=me;re--)mt+=R[re]*it.get(re,De);for(mt=mt/Bt,re=me;re<=X;re++)it.set(re,De,it.get(re,De)-mt*R[re])}for(re=0;re<=X;re++){for(mt=0,De=X;De>=me;De--)mt+=R[De]*it.get(re,De);for(mt=mt/Bt,De=me;De<=X;De++)it.set(re,De,it.get(re,De)-mt*R[De])}R[me]=Xe*R[me],it.set(me,me-1,Xe*Ft)}}for(re=0;re<J;re++)for(De=0;De<J;De++)M.set(re,De,re===De?1:0);for(me=X-1;me>=O+1;me--)if(it.get(me,me-1)!==0){for(re=me+1;re<=X;re++)R[re]=it.get(re,me-1);for(De=me;De<=X;De++){for(Ft=0,re=me;re<=X;re++)Ft+=R[re]*M.get(re,De);for(Ft=Ft/R[me]/it.get(me,me-1),re=me;re<=X;re++)M.set(re,De,M.get(re,De)+Ft*R[re])}}}function kt(J,it,R,M,O){var X=J-1,mt=0,Ft=J-1,Bt=Number.EPSILON,re=0,De=0,me=0,Xe=0,hr=0,Ke=0,Lr=0,cn=0,$e,lr,Pr,Dr,fe,jt,ve,Ie,ye,ze,sr,pr,en,Fn,ln;for($e=0;$e<J;$e++)for(($e<mt||$e>Ft)&&(R[$e]=O.get($e,$e),it[$e]=0),lr=Math.max($e-1,0);lr<J;lr++)De=De+Math.abs(O.get($e,lr));for(;X>=mt;){for(Dr=X;Dr>mt&&(Ke=Math.abs(O.get(Dr-1,Dr-1))+Math.abs(O.get(Dr,Dr)),Ke===0&&(Ke=De),!(Math.abs(O.get(Dr,Dr-1))<Bt*Ke));)Dr--;if(Dr===X)O.set(X,X,O.get(X,X)+re),R[X]=O.get(X,X),it[X]=0,X--,cn=0;else if(Dr===X-1){if(ve=O.get(X,X-1)*O.get(X-1,X),me=(O.get(X-1,X-1)-O.get(X,X))/2,Xe=me*me+ve,Lr=Math.sqrt(Math.abs(Xe)),O.set(X,X,O.get(X,X)+re),O.set(X-1,X-1,O.get(X-1,X-1)+re),Ie=O.get(X,X),Xe>=0){for(Lr=me>=0?me+Lr:me-Lr,R[X-1]=Ie+Lr,R[X]=R[X-1],Lr!==0&&(R[X]=Ie-ve/Lr),it[X-1]=0,it[X]=0,Ie=O.get(X,X-1),Ke=Math.abs(Ie)+Math.abs(Lr),me=Ie/Ke,Xe=Lr/Ke,hr=Math.sqrt(me*me+Xe*Xe),me=me/hr,Xe=Xe/hr,lr=X-1;lr<J;lr++)Lr=O.get(X-1,lr),O.set(X-1,lr,Xe*Lr+me*O.get(X,lr)),O.set(X,lr,Xe*O.get(X,lr)-me*Lr);for($e=0;$e<=X;$e++)Lr=O.get($e,X-1),O.set($e,X-1,Xe*Lr+me*O.get($e,X)),O.set($e,X,Xe*O.get($e,X)-me*Lr);for($e=mt;$e<=Ft;$e++)Lr=M.get($e,X-1),M.set($e,X-1,Xe*Lr+me*M.get($e,X)),M.set($e,X,Xe*M.get($e,X)-me*Lr)}else R[X-1]=Ie+me,R[X]=Ie+me,it[X-1]=Lr,it[X]=-Lr;X=X-2,cn=0}else{if(Ie=O.get(X,X),ye=0,ve=0,Dr<X&&(ye=O.get(X-1,X-1),ve=O.get(X,X-1)*O.get(X-1,X)),cn===10){for(re+=Ie,$e=mt;$e<=X;$e++)O.set($e,$e,O.get($e,$e)-Ie);Ke=Math.abs(O.get(X,X-1))+Math.abs(O.get(X-1,X-2)),Ie=ye=.75*Ke,ve=-.4375*Ke*Ke}if(cn===30&&(Ke=(ye-Ie)/2,Ke=Ke*Ke+ve,Ke>0)){for(Ke=Math.sqrt(Ke),ye<Ie&&(Ke=-Ke),Ke=Ie-ve/((ye-Ie)/2+Ke),$e=mt;$e<=X;$e++)O.set($e,$e,O.get($e,$e)-Ke);re+=Ke,Ie=ye=ve=.964}for(cn=cn+1,fe=X-2;fe>=Dr&&(Lr=O.get(fe,fe),hr=Ie-Lr,Ke=ye-Lr,me=(hr*Ke-ve)/O.get(fe+1,fe)+O.get(fe,fe+1),Xe=O.get(fe+1,fe+1)-Lr-hr-Ke,hr=O.get(fe+2,fe+1),Ke=Math.abs(me)+Math.abs(Xe)+Math.abs(hr),me=me/Ke,Xe=Xe/Ke,hr=hr/Ke,!(fe===Dr||Math.abs(O.get(fe,fe-1))*(Math.abs(Xe)+Math.abs(hr))<Bt*(Math.abs(me)*(Math.abs(O.get(fe-1,fe-1))+Math.abs(Lr)+Math.abs(O.get(fe+1,fe+1))))));)fe--;for($e=fe+2;$e<=X;$e++)O.set($e,$e-2,0),$e>fe+2&&O.set($e,$e-3,0);for(Pr=fe;Pr<=X-1&&(Fn=Pr!==X-1,Pr!==fe&&(me=O.get(Pr,Pr-1),Xe=O.get(Pr+1,Pr-1),hr=Fn?O.get(Pr+2,Pr-1):0,Ie=Math.abs(me)+Math.abs(Xe)+Math.abs(hr),Ie!==0&&(me=me/Ie,Xe=Xe/Ie,hr=hr/Ie)),Ie!==0);Pr++)if(Ke=Math.sqrt(me*me+Xe*Xe+hr*hr),me<0&&(Ke=-Ke),Ke!==0){for(Pr!==fe?O.set(Pr,Pr-1,-Ke*Ie):Dr!==fe&&O.set(Pr,Pr-1,-O.get(Pr,Pr-1)),me=me+Ke,Ie=me/Ke,ye=Xe/Ke,Lr=hr/Ke,Xe=Xe/me,hr=hr/me,lr=Pr;lr<J;lr++)me=O.get(Pr,lr)+Xe*O.get(Pr+1,lr),Fn&&(me=me+hr*O.get(Pr+2,lr),O.set(Pr+2,lr,O.get(Pr+2,lr)-me*Lr)),O.set(Pr,lr,O.get(Pr,lr)-me*Ie),O.set(Pr+1,lr,O.get(Pr+1,lr)-me*ye);for($e=0;$e<=Math.min(X,Pr+3);$e++)me=Ie*O.get($e,Pr)+ye*O.get($e,Pr+1),Fn&&(me=me+Lr*O.get($e,Pr+2),O.set($e,Pr+2,O.get($e,Pr+2)-me*hr)),O.set($e,Pr,O.get($e,Pr)-me),O.set($e,Pr+1,O.get($e,Pr+1)-me*Xe);for($e=mt;$e<=Ft;$e++)me=Ie*M.get($e,Pr)+ye*M.get($e,Pr+1),Fn&&(me=me+Lr*M.get($e,Pr+2),M.set($e,Pr+2,M.get($e,Pr+2)-me*hr)),M.set($e,Pr,M.get($e,Pr)-me),M.set($e,Pr+1,M.get($e,Pr+1)-me*Xe)}}}if(De!==0){for(X=J-1;X>=0;X--)if(me=R[X],Xe=it[X],Xe===0)for(Dr=X,O.set(X,X,1),$e=X-1;$e>=0;$e--){for(ve=O.get($e,$e)-me,hr=0,lr=Dr;lr<=X;lr++)hr=hr+O.get($e,lr)*O.get(lr,X);if(it[$e]<0)Lr=ve,Ke=hr;else if(Dr=$e,it[$e]===0?O.set($e,X,ve!==0?-hr/ve:-hr/(Bt*De)):(Ie=O.get($e,$e+1),ye=O.get($e+1,$e),Xe=(R[$e]-me)*(R[$e]-me)+it[$e]*it[$e],jt=(Ie*Ke-Lr*hr)/Xe,O.set($e,X,jt),O.set($e+1,X,Math.abs(Ie)>Math.abs(Lr)?(-hr-ve*jt)/Ie:(-Ke-ye*jt)/Lr)),jt=Math.abs(O.get($e,X)),Bt*jt*jt>1)for(lr=$e;lr<=X;lr++)O.set(lr,X,O.get(lr,X)/jt)}else if(Xe<0)for(Dr=X-1,Math.abs(O.get(X,X-1))>Math.abs(O.get(X-1,X))?(O.set(X-1,X-1,Xe/O.get(X,X-1)),O.set(X-1,X,-(O.get(X,X)-me)/O.get(X,X-1))):(ln=Kt(0,-O.get(X-1,X),O.get(X-1,X-1)-me,Xe),O.set(X-1,X-1,ln[0]),O.set(X-1,X,ln[1])),O.set(X,X-1,0),O.set(X,X,1),$e=X-2;$e>=0;$e--){for(ze=0,sr=0,lr=Dr;lr<=X;lr++)ze=ze+O.get($e,lr)*O.get(lr,X-1),sr=sr+O.get($e,lr)*O.get(lr,X);if(ve=O.get($e,$e)-me,it[$e]<0)Lr=ve,hr=ze,Ke=sr;else if(Dr=$e,it[$e]===0?(ln=Kt(-ze,-sr,ve,Xe),O.set($e,X-1,ln[0]),O.set($e,X,ln[1])):(Ie=O.get($e,$e+1),ye=O.get($e+1,$e),pr=(R[$e]-me)*(R[$e]-me)+it[$e]*it[$e]-Xe*Xe,en=(R[$e]-me)*2*Xe,pr===0&&en===0&&(pr=Bt*De*(Math.abs(ve)+Math.abs(Xe)+Math.abs(Ie)+Math.abs(ye)+Math.abs(Lr))),ln=Kt(Ie*hr-Lr*ze+Xe*sr,Ie*Ke-Lr*sr-Xe*ze,pr,en),O.set($e,X-1,ln[0]),O.set($e,X,ln[1]),Math.abs(Ie)>Math.abs(Lr)+Math.abs(Xe)?(O.set($e+1,X-1,(-ze-ve*O.get($e,X-1)+Xe*O.get($e,X))/Ie),O.set($e+1,X,(-sr-ve*O.get($e,X)-Xe*O.get($e,X-1))/Ie)):(ln=Kt(-hr-ye*O.get($e,X-1),-Ke-ye*O.get($e,X),Lr,Xe),O.set($e+1,X-1,ln[0]),O.set($e+1,X,ln[1]))),jt=Math.max(Math.abs(O.get($e,X-1)),Math.abs(O.get($e,X))),Bt*jt*jt>1)for(lr=$e;lr<=X;lr++)O.set(lr,X-1,O.get(lr,X-1)/jt),O.set(lr,X,O.get(lr,X)/jt)}for($e=0;$e<J;$e++)if($e<mt||$e>Ft)for(lr=$e;lr<J;lr++)M.set($e,lr,O.get($e,lr));for(lr=J-1;lr>=mt;lr--)for($e=mt;$e<=Ft;$e++){for(Lr=0,Pr=mt;Pr<=Math.min(lr,Ft);Pr++)Lr=Lr+M.get($e,Pr)*O.get(Pr,lr);M.set($e,lr,Lr)}}}function Kt(J,it,R,M){var O,X;return Math.abs(R)>Math.abs(M)?(O=M/R,X=R+O*M,[(J+O*it)/X,(it-O*J)/X]):(O=R/M,X=M+O*R,[(O*J+it)/X,(O*it-J)/X])}var dt=function(){function J(it){if(x()(this,J),it=Cr.checkMatrix(it),!it.isSymmetric())throw new Error("Matrix is not symmetric");var R=it,M=R.rows,O=new Le(M,M),X=!0,mt,Ft,Bt;for(Ft=0;Ft<M;Ft++){var re=0;for(Bt=0;Bt<Ft;Bt++){var De=0;for(mt=0;mt<Bt;mt++)De+=O.get(Bt,mt)*O.get(Ft,mt);De=(R.get(Ft,Bt)-De)/O.get(Bt,Bt),O.set(Ft,Bt,De),re=re+De*De}for(re=R.get(Ft,Ft)-re,X&=re>0,O.set(Ft,Ft,Math.sqrt(Math.max(re,0))),Bt=Ft+1;Bt<M;Bt++)O.set(Ft,Bt,0)}this.L=O,this.positiveDefinite=!!X}return A()(J,[{key:"isPositiveDefinite",value:function(){return this.positiveDefinite}},{key:"solve",value:function(R){R=Cr.checkMatrix(R);var M=this.L,O=M.rows;if(R.rows!==O)throw new Error("Matrix dimensions do not match");if(this.isPositiveDefinite()===!1)throw new Error("Matrix is not positive definite");var X=R.columns,mt=R.clone(),Ft,Bt,re;for(re=0;re<O;re++)for(Bt=0;Bt<X;Bt++){for(Ft=0;Ft<re;Ft++)mt.set(re,Bt,mt.get(re,Bt)-mt.get(Ft,Bt)*M.get(re,Ft));mt.set(re,Bt,mt.get(re,Bt)/M.get(re,re))}for(re=O-1;re>=0;re--)for(Bt=0;Bt<X;Bt++){for(Ft=re+1;Ft<O;Ft++)mt.set(re,Bt,mt.get(re,Bt)-mt.get(Ft,Bt)*M.get(Ft,re));mt.set(re,Bt,mt.get(re,Bt)/M.get(re,re))}return mt}},{key:"lowerTriangularMatrix",get:function(){return this.L}}]),J}(),Ut=A()(function J(it){var R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};x()(this,J),it=Cr.checkMatrix(it);var M=R.Y,O=R.scaleScores,X=O===void 0?!1:O,mt=R.maxIterations,Ft=mt===void 0?1e3:mt,Bt=R.terminationCriteria,re=Bt===void 0?1e-10:Bt,De;if(M){if(D(M)&&typeof M[0]=="number"?M=Le.columnVector(M):M=Cr.checkMatrix(M),M.rows!==it.rows)throw new Error("Y should have the same number of rows as X");De=M.getColumnVector(0)}else De=it.getColumnVector(0);for(var me=1,Xe,hr,Ke,Lr,cn=0;cn<Ft&&me>re;cn++)Ke=it.transpose().mmul(De).div(De.transpose().mmul(De).get(0,0)),Ke=Ke.div(Ke.norm()),Xe=it.mmul(Ke).div(Ke.transpose().mmul(Ke).get(0,0)),cn>0&&(me=Xe.clone().sub(Lr).pow(2).sum()),Lr=Xe.clone(),M?(hr=M.transpose().mmul(Xe).div(Xe.transpose().mmul(Xe).get(0,0)),hr=hr.div(hr.norm()),De=M.mmul(hr).div(hr.transpose().mmul(hr).get(0,0))):De=Xe;if(M){var $e=it.transpose().mmul(Xe).div(Xe.transpose().mmul(Xe).get(0,0));$e=$e.div($e.norm());var lr=it.clone().sub(Xe.clone().mmul($e.transpose())),Pr=De.transpose().mmul(Xe).div(Xe.transpose().mmul(Xe).get(0,0)),Dr=M.clone().sub(Xe.clone().mulS(Pr.get(0,0)).mmul(hr.transpose()));this.t=Xe,this.p=$e.transpose(),this.w=Ke.transpose(),this.q=hr,this.u=De,this.s=Xe.transpose().mmul(Xe),this.xResidual=lr,this.yResidual=Dr,this.betas=Pr}else this.w=Ke.transpose(),this.s=Xe.transpose().mmul(Xe).sqrt(),X?this.t=Xe.clone().div(this.s.get(0,0)):this.t=Xe,this.xResidual=it.sub(Xe.mmul(Ke.transpose()))})},988824:function(Ve,z,C){"use strict";C.d(z,{Z:function(){return Ce}});var b=C(197582),k=C(785893),w=C(667294),T=C(513669),L=C(98651),P=C(82538);const p=(kt,Kt)=>{const dt=A(kt),Ut=A(Kt),J=dt.pop(),it=Ut.pop(),R=h(dt,Ut);return R!==0?R:J&&it?h(J.split("."),it.split(".")):J||it?J?-1:1:0},m=kt=>typeof kt=="string"&&/^[v\d]/.test(kt)&&g.test(kt),S=(kt,Kt,dt)=>{U(dt);const Ut=p(kt,Kt);return Y[dt].includes(Ut)},x=(kt,Kt)=>{if(Kt.includes("||"))return Kt.split("||").some(Xe=>x(kt,Xe));if(Kt.includes(" "))return Kt.trim().replace(/\s{2,}/g," ").split(" ").every(Xe=>x(kt,Xe));const dt=Kt.match(/^([<>=~^]+)/),Ut=dt?dt[1]:"=";if(Ut!=="^"&&Ut!=="~")return S(kt,Kt,Ut);const[J,it,R,,M]=A(kt),[O,X,mt,,Ft]=A(Kt),Bt=[J,it,R],re=[O,X!=null?X:"x",mt!=null?mt:"x"];if(Ft&&(!M||h(Bt,re)!==0||h(M.split("."),Ft.split("."))===-1))return!1;const De=re.findIndex(Xe=>Xe!=="0")+1,me=Ut==="~"?2:De>1?De:1;return!(h(Bt.slice(0,me),re.slice(0,me))!==0||h(Bt.slice(me),re.slice(me))===-1)},g=/^[v^~<>=]*?(\d+)(?:\.([x*]|\d+)(?:\.([x*]|\d+)(?:\.([x*]|\d+))?(?:-([\da-z\-]+(?:\.[\da-z\-]+)*))?(?:\+[\da-z\-]+(?:\.[\da-z\-]+)*)?)?)?$/i,A=kt=>{if(typeof kt!="string")throw new TypeError("Invalid argument expected string");const Kt=kt.match(g);if(!Kt)throw new Error(`Invalid argument not valid semver ('${kt}' received)`);return Kt.shift(),Kt},E=kt=>kt==="*"||kt==="x"||kt==="X",D=kt=>{const Kt=parseInt(kt,10);return isNaN(Kt)?kt:Kt},F=(kt,Kt)=>typeof kt!=typeof Kt?[String(kt),String(Kt)]:[kt,Kt],y=(kt,Kt)=>{if(E(kt)||E(Kt))return 0;const[dt,Ut]=F(D(kt),D(Kt));return dt>Ut?1:dt<Ut?-1:0},h=(kt,Kt)=>{for(let dt=0;dt<Math.max(kt.length,Kt.length);dt++){const Ut=y(kt[dt]||"0",Kt[dt]||"0");if(Ut!==0)return Ut}return 0},Y={">":[1],">=":[0,1],"=":[0],"<=":[-1,0],"<":[-1]},$=Object.keys(Y),U=kt=>{if(typeof kt!="string")throw new TypeError(`Invalid operator type, expected string but got ${typeof kt}`);if($.indexOf(kt)===-1)throw new Error(`Invalid operator, expected one of ${$.join("|")}`)};var W=function(kt,Kt){return W=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(dt,Ut){dt.__proto__=Ut}||function(dt,Ut){for(var J in Ut)Object.prototype.hasOwnProperty.call(Ut,J)&&(dt[J]=Ut[J])},W(kt,Kt)};function V(kt,Kt){W(kt,Kt);function dt(){this.constructor=kt}kt.prototype=Kt===null?Object.create(Kt):(dt.prototype=Kt.prototype,new dt)}var H=function(){return H=Object.assign||function(Kt){for(var dt,Ut=1,J=arguments.length;Ut<J;Ut++){dt=arguments[Ut];for(var it in dt)Object.prototype.hasOwnProperty.call(dt,it)&&(Kt[it]=dt[it])}return Kt},H.apply(this,arguments)};function Q(kt,Kt){var dt={};for(var Ut in kt)Object.prototype.hasOwnProperty.call(kt,Ut)&&Kt.indexOf(Ut)<0&&(dt[Ut]=kt[Ut]);if(kt!=null&&typeof Object.getOwnPropertySymbols=="function")for(var J=0,Ut=Object.getOwnPropertySymbols(kt);J<Ut.length;J++)Kt.indexOf(Ut[J])<0&&Object.prototype.propertyIsEnumerable.call(kt,Ut[J])&&(dt[Ut[J]]=kt[Ut[J]]);return dt}function tt(kt,Kt,dt,Ut){var J=arguments.length,it=J<3?Kt:Ut===null?Ut=Object.getOwnPropertyDescriptor(Kt,dt):Ut,R;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")it=Reflect.decorate(kt,Kt,dt,Ut);else for(var M=kt.length-1;M>=0;M--)(R=kt[M])&&(it=(J<3?R(it):J>3?R(Kt,dt,it):R(Kt,dt))||it);return J>3&&it&&Object.defineProperty(Kt,dt,it),it}function rt(kt,Kt){return function(dt,Ut){Kt(dt,Ut,kt)}}function ct(kt,Kt){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(kt,Kt)}function ot(kt,Kt,dt,Ut){function J(it){return it instanceof dt?it:new dt(function(R){R(it)})}return new(dt||(dt=Promise))(function(it,R){function M(mt){try{X(Ut.next(mt))}catch(Ft){R(Ft)}}function O(mt){try{X(Ut.throw(mt))}catch(Ft){R(Ft)}}function X(mt){mt.done?it(mt.value):J(mt.value).then(M,O)}X((Ut=Ut.apply(kt,Kt||[])).next())})}function xt(kt,Kt){var dt={label:0,sent:function(){if(it[0]&1)throw it[1];return it[1]},trys:[],ops:[]},Ut,J,it,R;return R={next:M(0),throw:M(1),return:M(2)},typeof Symbol=="function"&&(R[Symbol.iterator]=function(){return this}),R;function M(X){return function(mt){return O([X,mt])}}function O(X){if(Ut)throw new TypeError("Generator is already executing.");for(;dt;)try{if(Ut=1,J&&(it=X[0]&2?J.return:X[0]?J.throw||((it=J.return)&&it.call(J),0):J.next)&&!(it=it.call(J,X[1])).done)return it;switch(J=0,it&&(X=[X[0]&2,it.value]),X[0]){case 0:case 1:it=X;break;case 4:return dt.label++,{value:X[1],done:!1};case 5:dt.label++,J=X[1],X=[0];continue;case 7:X=dt.ops.pop(),dt.trys.pop();continue;default:if(it=dt.trys,!(it=it.length>0&&it[it.length-1])&&(X[0]===6||X[0]===2)){dt=0;continue}if(X[0]===3&&(!it||X[1]>it[0]&&X[1]<it[3])){dt.label=X[1];break}if(X[0]===6&&dt.label<it[1]){dt.label=it[1],it=X;break}if(it&&dt.label<it[2]){dt.label=it[2],dt.ops.push(X);break}it[2]&&dt.ops.pop(),dt.trys.pop();continue}X=Kt.call(kt,dt)}catch(mt){X=[6,mt],J=0}finally{Ut=it=0}if(X[0]&5)throw X[1];return{value:X[0]?X[1]:void 0,done:!0}}}var pt=Object.create?function(kt,Kt,dt,Ut){Ut===void 0&&(Ut=dt),Object.defineProperty(kt,Ut,{enumerable:!0,get:function(){return Kt[dt]}})}:function(kt,Kt,dt,Ut){Ut===void 0&&(Ut=dt),kt[Ut]=Kt[dt]};function Xt(kt,Kt){for(var dt in kt)dt!=="default"&&!Object.prototype.hasOwnProperty.call(Kt,dt)&&pt(Kt,kt,dt)}function Ct(kt){var Kt=typeof Symbol=="function"&&Symbol.iterator,dt=Kt&&kt[Kt],Ut=0;if(dt)return dt.call(kt);if(kt&&typeof kt.length=="number")return{next:function(){return kt&&Ut>=kt.length&&(kt=void 0),{value:kt&&kt[Ut++],done:!kt}}};throw new TypeError(Kt?"Object is not iterable.":"Symbol.iterator is not defined.")}function At(kt,Kt){var dt=typeof Symbol=="function"&&kt[Symbol.iterator];if(!dt)return kt;var Ut=dt.call(kt),J,it=[],R;try{for(;(Kt===void 0||Kt-- >0)&&!(J=Ut.next()).done;)it.push(J.value)}catch(M){R={error:M}}finally{try{J&&!J.done&&(dt=Ut.return)&&dt.call(Ut)}finally{if(R)throw R.error}}return it}function Z(){for(var kt=[],Kt=0;Kt<arguments.length;Kt++)kt=kt.concat(At(arguments[Kt]));return kt}function q(){for(var kt=0,Kt=0,dt=arguments.length;Kt<dt;Kt++)kt+=arguments[Kt].length;for(var Ut=Array(kt),J=0,Kt=0;Kt<dt;Kt++)for(var it=arguments[Kt],R=0,M=it.length;R<M;R++,J++)Ut[J]=it[R];return Ut}function bt(kt){return this instanceof bt?(this.v=kt,this):new bt(kt)}function _t(kt,Kt,dt){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ut=dt.apply(kt,Kt||[]),J,it=[];return J={},R("next"),R("throw"),R("return"),J[Symbol.asyncIterator]=function(){return this},J;function R(Bt){Ut[Bt]&&(J[Bt]=function(re){return new Promise(function(De,me){it.push([Bt,re,De,me])>1||M(Bt,re)})})}function M(Bt,re){try{O(Ut[Bt](re))}catch(De){Ft(it[0][3],De)}}function O(Bt){Bt.value instanceof bt?Promise.resolve(Bt.value.v).then(X,mt):Ft(it[0][2],Bt)}function X(Bt){M("next",Bt)}function mt(Bt){M("throw",Bt)}function Ft(Bt,re){Bt(re),it.shift(),it.length&&M(it[0][0],it[0][1])}}function nt(kt){var Kt,dt;return Kt={},Ut("next"),Ut("throw",function(J){throw J}),Ut("return"),Kt[Symbol.iterator]=function(){return this},Kt;function Ut(J,it){Kt[J]=kt[J]?function(R){return(dt=!dt)?{value:bt(kt[J](R)),done:J==="return"}:it?it(R):R}:it}}function vt(kt){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Kt=kt[Symbol.asyncIterator],dt;return Kt?Kt.call(kt):(kt=typeof Ct=="function"?Ct(kt):kt[Symbol.iterator](),dt={},Ut("next"),Ut("throw"),Ut("return"),dt[Symbol.asyncIterator]=function(){return this},dt);function Ut(it){dt[it]=kt[it]&&function(R){return new Promise(function(M,O){R=kt[it](R),J(M,O,R.done,R.value)})}}function J(it,R,M,O){Promise.resolve(O).then(function(X){it({value:X,done:M})},R)}}function It(kt,Kt){return Object.defineProperty?Object.defineProperty(kt,"raw",{value:Kt}):kt.raw=Kt,kt}var Pt=Object.create?function(kt,Kt){Object.defineProperty(kt,"default",{enumerable:!0,value:Kt})}:function(kt,Kt){kt.default=Kt};function Et(kt){if(kt&&kt.__esModule)return kt;var Kt={};if(kt!=null)for(var dt in kt)dt!=="default"&&Object.prototype.hasOwnProperty.call(kt,dt)&&pt(Kt,kt,dt);return Pt(Kt,kt),Kt}function Nt(kt){return kt&&kt.__esModule?kt:{default:kt}}function $t(kt,Kt){if(!Kt.has(kt))throw new TypeError("attempted to get private field on non-instance");return Kt.get(kt)}function ue(kt,Kt,dt){if(!Kt.has(kt))throw new TypeError("attempted to set private field on non-instance");return Kt.set(kt,dt),dt}var ie=C(252796),Dt=C.n(ie);function ne(kt,Kt,dt,Ut,J,it){it===void 0&&(it=0);var R=dn(kt,Kt,it),M=R.width,O=R.height,X=Math.min(M,dt),mt=Math.min(O,Ut);return X>mt*J?{width:mt*J,height:mt}:{width:X,height:X/J}}function pe(kt){return kt.width>kt.height?kt.width/kt.naturalWidth:kt.height/kt.naturalHeight}function Wt(kt,Kt,dt,Ut,J){J===void 0&&(J=0);var it=dn(Kt.width,Kt.height,J),R=it.width,M=it.height;return{x:ae(kt.x,R,dt.width,Ut),y:ae(kt.y,M,dt.height,Ut)}}function ae(kt,Kt,dt,Ut){var J=Kt*Ut/2-dt/2;return an(kt,-J,J)}function Se(kt,Kt){return Math.sqrt(Math.pow(kt.y-Kt.y,2)+Math.pow(kt.x-Kt.x,2))}function be(kt,Kt){return Math.atan2(Kt.y-kt.y,Kt.x-kt.x)*180/Math.PI}function Qt(kt,Kt,dt,Ut,J,it,R){it===void 0&&(it=0),R===void 0&&(R=!0);var M=R?we:Tt,O=dn(Kt.width,Kt.height,it),X=dn(Kt.naturalWidth,Kt.naturalHeight,it),mt={x:M(100,((O.width-dt.width/J)/2-kt.x/J)/O.width*100),y:M(100,((O.height-dt.height/J)/2-kt.y/J)/O.height*100),width:M(100,dt.width/O.width*100/J),height:M(100,dt.height/O.height*100/J)},Ft=Math.round(M(X.width,mt.width*X.width/100)),Bt=Math.round(M(X.height,mt.height*X.height/100)),re=X.width>=X.height*Ut,De=re?{width:Math.round(Bt*Ut),height:Bt}:{width:Ft,height:Math.round(Ft/Ut)},me=H(H({},De),{x:Math.round(M(X.width-De.width,mt.x*X.width/100)),y:Math.round(M(X.height-De.height,mt.y*X.height/100))});return{croppedAreaPercentages:mt,croppedAreaPixels:me}}function we(kt,Kt){return Math.min(kt,Math.max(0,Kt))}function Tt(kt,Kt){return Kt}function Le(kt,Kt,dt,Ut,J,it){var R=dn(Kt.width,Kt.height,dt),M=an(Ut.width/R.width*(100/kt.width),J,it),O={x:M*R.width/2-Ut.width/2-R.width*M*(kt.x/100),y:M*R.height/2-Ut.height/2-R.height*M*(kt.y/100)};return{crop:O,zoom:M}}function Mr(kt,Kt,dt){var Ut=pe(Kt);return dt.height>dt.width?dt.height/(kt.height*Ut):dt.width/(kt.width*Ut)}function Ar(kt,Kt,dt,Ut,J,it){dt===void 0&&(dt=0);var R=dn(Kt.naturalWidth,Kt.naturalHeight,dt),M=an(Mr(kt,Kt,Ut),J,it),O=Ut.height>Ut.width?Ut.height/kt.height:Ut.width/kt.width,X={x:((R.width-kt.width)/2-kt.x)*O,y:((R.height-kt.height)/2-kt.y)*O};return{crop:X,zoom:M}}function Ir(kt,Kt){return{x:(Kt.x+kt.x)/2,y:(Kt.y+kt.y)/2}}function Br(kt){return kt*Math.PI/180}function dn(kt,Kt,dt){var Ut=Br(dt);return{width:Math.abs(Math.cos(Ut)*kt)+Math.abs(Math.sin(Ut)*Kt),height:Math.abs(Math.sin(Ut)*kt)+Math.abs(Math.cos(Ut)*Kt)}}function an(kt,Kt,dt){return Math.min(Math.max(kt,Kt),dt)}function Ln(){for(var kt=[],Kt=0;Kt<arguments.length;Kt++)kt[Kt]=arguments[Kt];return kt.filter(function(dt){return typeof dt=="string"&&dt.length>0}).join(" ").trim()}var Un=`.reactEasyCrop_Container {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  overflow: hidden;
  user-select: none;
  touch-action: none;
  cursor: move;
  display: flex;
  justify-content: center;
  align-items: center;
}

.reactEasyCrop_Image,
.reactEasyCrop_Video {
  will-change: transform; /* this improves performances and prevent painting issues on iOS Chrome */
}

.reactEasyCrop_Contain {
  max-width: 100%;
  max-height: 100%;
  margin: auto;
  position: absolute;
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;
}
.reactEasyCrop_Cover_Horizontal {
  width: 100%;
  height: auto;
}
.reactEasyCrop_Cover_Vertical {
  width: auto;
  height: 100%;
}

.reactEasyCrop_CropArea {
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  border: 1px solid rgba(255, 255, 255, 0.5);
  box-sizing: border-box;
  box-shadow: 0 0 0 9999em;
  color: rgba(0, 0, 0, 0.5);
  overflow: hidden;
}

.reactEasyCrop_CropAreaRound {
  border-radius: 50%;
}

.reactEasyCrop_CropAreaGrid::before {
  content: ' ';
  box-sizing: border-box;
  position: absolute;
  border: 1px solid rgba(255, 255, 255, 0.5);
  top: 0;
  bottom: 0;
  left: 33.33%;
  right: 33.33%;
  border-top: 0;
  border-bottom: 0;
}

.reactEasyCrop_CropAreaGrid::after {
  content: ' ';
  box-sizing: border-box;
  position: absolute;
  border: 1px solid rgba(255, 255, 255, 0.5);
  top: 33.33%;
  bottom: 33.33%;
  left: 0;
  right: 0;
  border-left: 0;
  border-right: 0;
}
`,Yn=1,xr=3,qe=function(kt){V(Kt,kt);function Kt(){var dt=kt!==null&&kt.apply(this,arguments)||this;return dt.imageRef=w.createRef(),dt.videoRef=w.createRef(),dt.containerRef=null,dt.styleRef=null,dt.containerRect=null,dt.mediaSize={width:0,height:0,naturalWidth:0,naturalHeight:0},dt.dragStartPosition={x:0,y:0},dt.dragStartCrop={x:0,y:0},dt.gestureZoomStart=0,dt.gestureRotationStart=0,dt.isTouching=!1,dt.lastPinchDistance=0,dt.lastPinchRotation=0,dt.rafDragTimeout=null,dt.rafPinchTimeout=null,dt.wheelTimer=null,dt.currentDoc=typeof document!="undefined"?document:null,dt.currentWindow=typeof window!="undefined"?window:null,dt.resizeObserver=null,dt.state={cropSize:null,hasWheelJustStarted:!1},dt.initResizeObserver=function(){if(!(typeof window.ResizeObserver=="undefined"||!dt.containerRef)){var Ut=!0;dt.resizeObserver=new window.ResizeObserver(function(J){if(Ut){Ut=!1;return}dt.computeSizes()}),dt.resizeObserver.observe(dt.containerRef)}},dt.preventZoomSafari=function(Ut){return Ut.preventDefault()},dt.cleanEvents=function(){dt.currentDoc&&(dt.currentDoc.removeEventListener("mousemove",dt.onMouseMove),dt.currentDoc.removeEventListener("mouseup",dt.onDragStopped),dt.currentDoc.removeEventListener("touchmove",dt.onTouchMove),dt.currentDoc.removeEventListener("touchend",dt.onDragStopped),dt.currentDoc.removeEventListener("gesturemove",dt.onGestureMove),dt.currentDoc.removeEventListener("gestureend",dt.onGestureEnd))},dt.clearScrollEvent=function(){dt.containerRef&&dt.containerRef.removeEventListener("wheel",dt.onWheel),dt.wheelTimer&&clearTimeout(dt.wheelTimer)},dt.onMediaLoad=function(){var Ut=dt.computeSizes();Ut&&(dt.emitCropData(),dt.setInitialCrop(Ut)),dt.props.onMediaLoaded&&dt.props.onMediaLoaded(dt.mediaSize)},dt.setInitialCrop=function(Ut){if(dt.props.initialCroppedAreaPercentages){var J=Le(dt.props.initialCroppedAreaPercentages,dt.mediaSize,dt.props.rotation,Ut,dt.props.minZoom,dt.props.maxZoom),it=J.crop,R=J.zoom;dt.props.onCropChange(it),dt.props.onZoomChange&&dt.props.onZoomChange(R)}else if(dt.props.initialCroppedAreaPixels){var M=Ar(dt.props.initialCroppedAreaPixels,dt.mediaSize,dt.props.rotation,Ut,dt.props.minZoom,dt.props.maxZoom),it=M.crop,R=M.zoom;dt.props.onCropChange(it),dt.props.onZoomChange&&dt.props.onZoomChange(R)}},dt.computeSizes=function(){var Ut,J,it,R,M,O,X=dt.imageRef.current||dt.videoRef.current;if(X&&dt.containerRef){dt.containerRect=dt.containerRef.getBoundingClientRect();var mt=dt.containerRect.width/dt.containerRect.height,Ft=((Ut=dt.imageRef.current)===null||Ut===void 0?void 0:Ut.naturalWidth)||((J=dt.videoRef.current)===null||J===void 0?void 0:J.videoWidth)||0,Bt=((it=dt.imageRef.current)===null||it===void 0?void 0:it.naturalHeight)||((R=dt.videoRef.current)===null||R===void 0?void 0:R.videoHeight)||0,re=X.offsetWidth<Ft||X.offsetHeight<Bt,De=Ft/Bt,me=void 0;if(re)switch(dt.props.objectFit){default:case"contain":me=mt>De?{width:dt.containerRect.height*De,height:dt.containerRect.height}:{width:dt.containerRect.width,height:dt.containerRect.width/De};break;case"horizontal-cover":me={width:dt.containerRect.width,height:dt.containerRect.width/De};break;case"vertical-cover":me={width:dt.containerRect.height*De,height:dt.containerRect.height};break;case"auto-cover":me=Ft>Bt?{width:dt.containerRect.width,height:dt.containerRect.width/De}:{width:dt.containerRect.height*De,height:dt.containerRect.height};break}else me={width:X.offsetWidth,height:X.offsetHeight};dt.mediaSize=H(H({},me),{naturalWidth:Ft,naturalHeight:Bt}),dt.props.setMediaSize&&dt.props.setMediaSize(dt.mediaSize);var Xe=dt.props.cropSize?dt.props.cropSize:ne(dt.mediaSize.width,dt.mediaSize.height,dt.containerRect.width,dt.containerRect.height,dt.props.aspect,dt.props.rotation);return(((M=dt.state.cropSize)===null||M===void 0?void 0:M.height)!==Xe.height||((O=dt.state.cropSize)===null||O===void 0?void 0:O.width)!==Xe.width)&&dt.props.onCropSizeChange&&dt.props.onCropSizeChange(Xe),dt.setState({cropSize:Xe},dt.recomputeCropPosition),dt.props.setCropSize&&dt.props.setCropSize(Xe),Xe}},dt.onMouseDown=function(Ut){dt.currentDoc&&(Ut.preventDefault(),dt.currentDoc.addEventListener("mousemove",dt.onMouseMove),dt.currentDoc.addEventListener("mouseup",dt.onDragStopped),dt.onDragStart(Kt.getMousePoint(Ut)))},dt.onMouseMove=function(Ut){return dt.onDrag(Kt.getMousePoint(Ut))},dt.onTouchStart=function(Ut){dt.currentDoc&&(dt.isTouching=!0,!(dt.props.onTouchRequest&&!dt.props.onTouchRequest(Ut))&&(dt.currentDoc.addEventListener("touchmove",dt.onTouchMove,{passive:!1}),dt.currentDoc.addEventListener("touchend",dt.onDragStopped),Ut.touches.length===2?dt.onPinchStart(Ut):Ut.touches.length===1&&dt.onDragStart(Kt.getTouchPoint(Ut.touches[0]))))},dt.onTouchMove=function(Ut){Ut.preventDefault(),Ut.touches.length===2?dt.onPinchMove(Ut):Ut.touches.length===1&&dt.onDrag(Kt.getTouchPoint(Ut.touches[0]))},dt.onGestureStart=function(Ut){dt.currentDoc&&(Ut.preventDefault(),dt.currentDoc.addEventListener("gesturechange",dt.onGestureMove),dt.currentDoc.addEventListener("gestureend",dt.onGestureEnd),dt.gestureZoomStart=dt.props.zoom,dt.gestureRotationStart=dt.props.rotation)},dt.onGestureMove=function(Ut){if(Ut.preventDefault(),!dt.isTouching){var J=Kt.getMousePoint(Ut),it=dt.gestureZoomStart-1+Ut.scale;if(dt.setNewZoom(it,J,{shouldUpdatePosition:!0}),dt.props.onRotationChange){var R=dt.gestureRotationStart+Ut.rotation;dt.props.onRotationChange(R)}}},dt.onGestureEnd=function(Ut){dt.cleanEvents()},dt.onDragStart=function(Ut){var J,it,R=Ut.x,M=Ut.y;dt.dragStartPosition={x:R,y:M},dt.dragStartCrop=H({},dt.props.crop),(it=(J=dt.props).onInteractionStart)===null||it===void 0||it.call(J)},dt.onDrag=function(Ut){var J=Ut.x,it=Ut.y;dt.currentWindow&&(dt.rafDragTimeout&&dt.currentWindow.cancelAnimationFrame(dt.rafDragTimeout),dt.rafDragTimeout=dt.currentWindow.requestAnimationFrame(function(){if(dt.state.cropSize&&!(J===void 0||it===void 0)){var R=J-dt.dragStartPosition.x,M=it-dt.dragStartPosition.y,O={x:dt.dragStartCrop.x+R,y:dt.dragStartCrop.y+M},X=dt.props.restrictPosition?Wt(O,dt.mediaSize,dt.state.cropSize,dt.props.zoom,dt.props.rotation):O;dt.props.onCropChange(X)}}))},dt.onDragStopped=function(){var Ut,J;dt.isTouching=!1,dt.cleanEvents(),dt.emitCropData(),(J=(Ut=dt.props).onInteractionEnd)===null||J===void 0||J.call(Ut)},dt.onWheel=function(Ut){if(dt.currentWindow&&!(dt.props.onWheelRequest&&!dt.props.onWheelRequest(Ut))){Ut.preventDefault();var J=Kt.getMousePoint(Ut),it=Dt()(Ut).pixelY,R=dt.props.zoom-it*dt.props.zoomSpeed/200;dt.setNewZoom(R,J,{shouldUpdatePosition:!0}),dt.state.hasWheelJustStarted||dt.setState({hasWheelJustStarted:!0},function(){var M,O;return(O=(M=dt.props).onInteractionStart)===null||O===void 0?void 0:O.call(M)}),dt.wheelTimer&&clearTimeout(dt.wheelTimer),dt.wheelTimer=dt.currentWindow.setTimeout(function(){return dt.setState({hasWheelJustStarted:!1},function(){var M,O;return(O=(M=dt.props).onInteractionEnd)===null||O===void 0?void 0:O.call(M)})},250)}},dt.getPointOnContainer=function(Ut){var J=Ut.x,it=Ut.y;if(!dt.containerRect)throw new Error("The Cropper is not mounted");return{x:dt.containerRect.width/2-(J-dt.containerRect.left),y:dt.containerRect.height/2-(it-dt.containerRect.top)}},dt.getPointOnMedia=function(Ut){var J=Ut.x,it=Ut.y,R=dt.props,M=R.crop,O=R.zoom;return{x:(J+M.x)/O,y:(it+M.y)/O}},dt.setNewZoom=function(Ut,J,it){var R=it===void 0?{}:it,M=R.shouldUpdatePosition,O=M===void 0?!0:M;if(!(!dt.state.cropSize||!dt.props.onZoomChange)){var X=an(Ut,dt.props.minZoom,dt.props.maxZoom);if(O){var mt=dt.getPointOnContainer(J),Ft=dt.getPointOnMedia(mt),Bt={x:Ft.x*X-mt.x,y:Ft.y*X-mt.y},re=dt.props.restrictPosition?Wt(Bt,dt.mediaSize,dt.state.cropSize,X,dt.props.rotation):Bt;dt.props.onCropChange(re)}dt.props.onZoomChange(X)}},dt.getCropData=function(){if(!dt.state.cropSize)return null;var Ut=dt.props.restrictPosition?Wt(dt.props.crop,dt.mediaSize,dt.state.cropSize,dt.props.zoom,dt.props.rotation):dt.props.crop;return Qt(Ut,dt.mediaSize,dt.state.cropSize,dt.getAspect(),dt.props.zoom,dt.props.rotation,dt.props.restrictPosition)},dt.emitCropData=function(){var Ut=dt.getCropData();if(Ut){var J=Ut.croppedAreaPercentages,it=Ut.croppedAreaPixels;dt.props.onCropComplete&&dt.props.onCropComplete(J,it),dt.props.onCropAreaChange&&dt.props.onCropAreaChange(J,it)}},dt.emitCropAreaChange=function(){var Ut=dt.getCropData();if(Ut){var J=Ut.croppedAreaPercentages,it=Ut.croppedAreaPixels;dt.props.onCropAreaChange&&dt.props.onCropAreaChange(J,it)}},dt.recomputeCropPosition=function(){if(dt.state.cropSize){var Ut=dt.props.restrictPosition?Wt(dt.props.crop,dt.mediaSize,dt.state.cropSize,dt.props.zoom,dt.props.rotation):dt.props.crop;dt.props.onCropChange(Ut),dt.emitCropData()}},dt}return Kt.prototype.componentDidMount=function(){!this.currentDoc||!this.currentWindow||(this.containerRef&&(this.containerRef.ownerDocument&&(this.currentDoc=this.containerRef.ownerDocument),this.currentDoc.defaultView&&(this.currentWindow=this.currentDoc.defaultView),this.initResizeObserver(),typeof window.ResizeObserver=="undefined"&&this.currentWindow.addEventListener("resize",this.computeSizes),this.props.zoomWithScroll&&this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}),this.containerRef.addEventListener("gesturestart",this.onGestureStart)),this.props.disableAutomaticStylesInjection||(this.styleRef=this.currentDoc.createElement("style"),this.styleRef.setAttribute("type","text/css"),this.props.nonce&&this.styleRef.setAttribute("nonce",this.props.nonce),this.styleRef.innerHTML=Un,this.currentDoc.head.appendChild(this.styleRef)),this.imageRef.current&&this.imageRef.current.complete&&this.onMediaLoad(),this.props.setImageRef&&this.props.setImageRef(this.imageRef),this.props.setVideoRef&&this.props.setVideoRef(this.videoRef))},Kt.prototype.componentWillUnmount=function(){var dt,Ut;!this.currentDoc||!this.currentWindow||(typeof window.ResizeObserver=="undefined"&&this.currentWindow.removeEventListener("resize",this.computeSizes),(dt=this.resizeObserver)===null||dt===void 0||dt.disconnect(),this.containerRef&&this.containerRef.removeEventListener("gesturestart",this.preventZoomSafari),this.styleRef&&((Ut=this.styleRef.parentNode)===null||Ut===void 0||Ut.removeChild(this.styleRef)),this.cleanEvents(),this.props.zoomWithScroll&&this.clearScrollEvent())},Kt.prototype.componentDidUpdate=function(dt){var Ut,J,it,R,M,O,X,mt,Ft;dt.rotation!==this.props.rotation?(this.computeSizes(),this.recomputeCropPosition()):dt.aspect!==this.props.aspect?this.computeSizes():dt.zoom!==this.props.zoom?this.recomputeCropPosition():((Ut=dt.cropSize)===null||Ut===void 0?void 0:Ut.height)!==((J=this.props.cropSize)===null||J===void 0?void 0:J.height)||((it=dt.cropSize)===null||it===void 0?void 0:it.width)!==((R=this.props.cropSize)===null||R===void 0?void 0:R.width)?this.computeSizes():(((M=dt.crop)===null||M===void 0?void 0:M.x)!==((O=this.props.crop)===null||O===void 0?void 0:O.x)||((X=dt.crop)===null||X===void 0?void 0:X.y)!==((mt=this.props.crop)===null||mt===void 0?void 0:mt.y))&&this.emitCropAreaChange(),dt.zoomWithScroll!==this.props.zoomWithScroll&&this.containerRef&&(this.props.zoomWithScroll?this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}):this.clearScrollEvent()),dt.video!==this.props.video&&((Ft=this.videoRef.current)===null||Ft===void 0||Ft.load())},Kt.prototype.getAspect=function(){var dt=this.props,Ut=dt.cropSize,J=dt.aspect;return Ut?Ut.width/Ut.height:J},Kt.prototype.onPinchStart=function(dt){var Ut=Kt.getTouchPoint(dt.touches[0]),J=Kt.getTouchPoint(dt.touches[1]);this.lastPinchDistance=Se(Ut,J),this.lastPinchRotation=be(Ut,J),this.onDragStart(Ir(Ut,J))},Kt.prototype.onPinchMove=function(dt){var Ut=this;if(!(!this.currentDoc||!this.currentWindow)){var J=Kt.getTouchPoint(dt.touches[0]),it=Kt.getTouchPoint(dt.touches[1]),R=Ir(J,it);this.onDrag(R),this.rafPinchTimeout&&this.currentWindow.cancelAnimationFrame(this.rafPinchTimeout),this.rafPinchTimeout=this.currentWindow.requestAnimationFrame(function(){var M=Se(J,it),O=Ut.props.zoom*(M/Ut.lastPinchDistance);Ut.setNewZoom(O,R,{shouldUpdatePosition:!1}),Ut.lastPinchDistance=M;var X=be(J,it),mt=Ut.props.rotation+(X-Ut.lastPinchRotation);Ut.props.onRotationChange&&Ut.props.onRotationChange(mt),Ut.lastPinchRotation=X})}},Kt.prototype.render=function(){var dt=this,Ut=this.props,J=Ut.image,it=Ut.video,R=Ut.mediaProps,M=Ut.transform,O=Ut.crop,X=O.x,mt=O.y,Ft=Ut.rotation,Bt=Ut.zoom,re=Ut.cropShape,De=Ut.showGrid,me=Ut.style,Xe=me.containerStyle,hr=me.cropAreaStyle,Ke=me.mediaStyle,Lr=Ut.classes,cn=Lr.containerClassName,$e=Lr.cropAreaClassName,lr=Lr.mediaClassName,Pr=Ut.objectFit;return w.createElement("div",{onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart,ref:function(fe){return dt.containerRef=fe},"data-testid":"container",style:Xe,className:Ln("reactEasyCrop_Container",cn)},J?w.createElement("img",H({alt:"",className:Ln("reactEasyCrop_Image",Pr==="contain"&&"reactEasyCrop_Contain",Pr==="horizontal-cover"&&"reactEasyCrop_Cover_Horizontal",Pr==="vertical-cover"&&"reactEasyCrop_Cover_Vertical",Pr==="auto-cover"&&(this.mediaSize.naturalWidth>this.mediaSize.naturalHeight?"reactEasyCrop_Cover_Horizontal":"reactEasyCrop_Cover_Vertical"),lr)},R,{src:J,ref:this.imageRef,style:H(H({},Ke),{transform:M||"translate(".concat(X,"px, ").concat(mt,"px) rotate(").concat(Ft,"deg) scale(").concat(Bt,")")}),onLoad:this.onMediaLoad})):it&&w.createElement("video",H({autoPlay:!0,loop:!0,muted:!0,className:Ln("reactEasyCrop_Video",Pr==="contain"&&"reactEasyCrop_Contain",Pr==="horizontal-cover"&&"reactEasyCrop_Cover_Horizontal",Pr==="vertical-cover"&&"reactEasyCrop_Cover_Vertical",Pr==="auto-cover"&&(this.mediaSize.naturalWidth>this.mediaSize.naturalHeight?"reactEasyCrop_Cover_Horizontal":"reactEasyCrop_Cover_Vertical"),lr)},R,{ref:this.videoRef,onLoadedMetadata:this.onMediaLoad,style:H(H({},Ke),{transform:M||"translate(".concat(X,"px, ").concat(mt,"px) rotate(").concat(Ft,"deg) scale(").concat(Bt,")")}),controls:!1}),(Array.isArray(it)?it:[{src:it}]).map(function(Dr){return w.createElement("source",H({key:Dr.src},Dr))})),this.state.cropSize&&w.createElement("div",{style:H(H({},hr),{width:this.state.cropSize.width,height:this.state.cropSize.height}),"data-testid":"cropper",className:Ln("reactEasyCrop_CropArea",re==="round"&&"reactEasyCrop_CropAreaRound",De&&"reactEasyCrop_CropAreaGrid",$e)}))},Kt.defaultProps={zoom:1,rotation:0,aspect:4/3,maxZoom:xr,minZoom:Yn,cropShape:"rect",objectFit:"contain",showGrid:!0,style:{},classes:{},mediaProps:{},zoomSpeed:1,restrictPosition:!0,zoomWithScroll:!0},Kt.getMousePoint=function(dt){return{x:Number(dt.clientX),y:Number(dt.clientY)}},Kt.getTouchPoint=function(dt){return{x:Number(dt.clientX),y:Number(dt.clientY)}},Kt}(w.Component),Cr=C(905303),tn=C(591607);const vn="img-crop",_n=1,Pn=.1,_r=0,un=-180,An=180,on=1,Wn=.5,Cn=2,On=.01,jn=(0,w.forwardRef)((kt,Kt)=>{const{cropperRef:dt,zoomSlider:Ut,rotationSlider:J,aspectSlider:it,showReset:R,resetBtnText:M,modalImage:O,aspect:X,minZoom:mt,maxZoom:Ft,cropShape:Bt,showGrid:re,cropperProps:De}=kt,[me,Xe]=(0,w.useState)(_n),[hr,Ke]=(0,w.useState)(_r),[Lr,cn]=(0,w.useState)(X),$e=me!==_n||hr!==_r||Lr!==X,lr=()=>{Xe(_n),Ke(_r),cn(X)},[Pr,Dr]=(0,w.useState)({x:0,y:0}),fe=(0,w.useRef)({width:0,height:0,x:0,y:0}),jt=(0,w.useCallback)((ze,sr)=>{fe.current=sr},[]);(0,w.useImperativeHandle)(Kt,()=>({rotation:hr,cropPixelsRef:fe,onReset:lr}));const ve="[display:flex] [align-items:center] [width:60%] [margin-inline:auto]",Ie="[display:flex] [align-items:center] [justify-content:center] [height:32px] [width:32px] [background:transparent] [border:0] [font-family:inherit] [font-size:18px] [cursor:pointer] disabled:[opacity:20%] disabled:[cursor:default]",ye="[flex:1]";return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(qe,Object.assign({},De,{ref:dt,image:O,crop:Pr,zoom:me,rotation:hr,aspect:Lr,minZoom:mt,maxZoom:Ft,zoomWithScroll:Ut,cropShape:Bt,showGrid:re,onCropChange:Dr,onZoomChange:Xe,onRotationChange:Ke,onCropComplete:jt,classes:{containerClassName:`${vn}-container ![position:relative] [width:100%] [height:40vh] [&~section:first-of-type]:[margin-top:16px] [&~section:last-of-type]:[margin-bottom:16px]`,mediaClassName:`${vn}-media`}})),Ut&&(0,k.jsxs)("section",Object.assign({className:`${vn}-control ${vn}-control-zoom ${ve}`},{children:[(0,k.jsx)("button",Object.assign({className:Ie,onClick:()=>Xe(me-Pn),disabled:me-Pn<mt},{children:"\uFF0D"})),(0,k.jsx)(tn.Z,{className:ye,min:mt,max:Ft,step:Pn,value:me,onChange:Xe}),(0,k.jsx)("button",Object.assign({className:Ie,onClick:()=>Xe(me+Pn),disabled:me+Pn>Ft},{children:"\uFF0B"}))]})),J&&(0,k.jsxs)("section",Object.assign({className:`${vn}-control ${vn}-control-rotation ${ve}`},{children:[(0,k.jsx)("button",Object.assign({className:`${Ie} [font-size:16px]`,onClick:()=>Ke(hr-on),disabled:hr===un},{children:"\u21BA"})),(0,k.jsx)(tn.Z,{className:ye,min:un,max:An,step:on,value:hr,onChange:Ke}),(0,k.jsx)("button",Object.assign({className:`${Ie} [font-size:16px]`,onClick:()=>Ke(hr+on),disabled:hr===An},{children:"\u21BB"}))]})),it&&(0,k.jsxs)("section",Object.assign({className:`${vn}-control ${vn}-control-aspect ${ve}`},{children:[(0,k.jsx)("button",Object.assign({className:Ie,onClick:()=>cn(Lr-On),disabled:Lr-On<Wn},{children:"\u2195\uFE0F"})),(0,k.jsx)(tn.Z,{className:ye,min:Wn,max:Cn,step:On,value:Lr,onChange:cn}),(0,k.jsx)("button",Object.assign({className:Ie,onClick:()=>cn(Lr+On),disabled:Lr+On>Cn},{children:"\u2194\uFE0F"}))]})),R&&(Ut||J||it)&&(0,k.jsx)(Cr.ZP,Object.assign({className:"[bottom:20px] [position:absolute]",style:$e?{}:{opacity:.3,pointerEvents:"none"},onClick:lr},{children:M}))]})});var at=(0,w.memo)(jn);function Ze(kt,Kt){Kt===void 0&&(Kt={});var dt=Kt.insertAt;if(!(!kt||typeof document=="undefined")){var Ut=document.head||document.getElementsByTagName("head")[0],J=document.createElement("style");J.type="text/css",dt==="top"&&Ut.firstChild?Ut.insertBefore(J,Ut.firstChild):Ut.appendChild(J),J.styleSheet?J.styleSheet.cssText=kt:J.appendChild(document.createTextNode(kt))}}var qt=".container{width:100%}@media (min-width:640px){.container{max-width:640px}}@media (min-width:768px){.container{max-width:768px}}@media (min-width:1024px){.container{max-width:1024px}}@media (min-width:1280px){.container{max-width:1280px}}@media (min-width:1536px){.container{max-width:1536px}}.visible{visibility:visible}.grid{display:grid}.\\!\\[position\\:relative\\]{position:relative!important}.\\[align-items\\:center\\]{align-items:center}.\\[background\\:transparent\\]{background:transparent}.\\[border\\:0\\]{border:0}.\\[bottom\\:20px\\]{bottom:20px}.\\[cursor\\:pointer\\]{cursor:pointer}.\\[display\\:flex\\]{display:flex}.\\[flex\\:1\\]{flex:1}.\\[font-family\\:inherit\\]{font-family:inherit}.\\[font-size\\:16px\\]{font-size:16px}.\\[font-size\\:18px\\]{font-size:18px}.\\[height\\:32px\\]{height:32px}.\\[height\\:40vh\\]{height:40vh}.\\[justify-content\\:center\\]{justify-content:center}.\\[margin-inline\\:auto\\]{margin-inline:auto}.\\[position\\:absolute\\]{position:absolute}.\\[width\\:100\\%\\]{width:100%}.\\[width\\:32px\\]{width:32px}.\\[width\\:60\\%\\]{width:60%}.disabled\\:\\[cursor\\:default\\]:disabled{cursor:default}.disabled\\:\\[opacity\\:20\\%\\]:disabled{opacity:20%}.\\[\\&\\~section\\:first-of-type\\]\\:\\[margin-top\\:16px\\]~section:first-of-type{margin-top:16px}.\\[\\&\\~section\\:last-of-type\\]\\:\\[margin-bottom\\:16px\\]~section:last-of-type{margin-bottom:16px}";Ze(qt);const Jt=p(T.version,"4.23.0")===-1?"visible":"open",St=(kt,Kt,dt)=>Kt in kt?(console.error(`\`${Kt}\` is deprecated, please use \`${dt}\` instead`),kt[Kt]):kt[dt],Ce=(0,w.forwardRef)((kt,Kt)=>{const{quality:dt=.4,fillColor:Ut="white",zoomSlider:J=!0,rotationSlider:it=!1,aspectSlider:R=!1,showReset:M=!1,resetText:O,aspect:X=1,minZoom:mt=1,maxZoom:Ft=3,cropShape:Bt="rect",showGrid:re=!1,cropperProps:De,modalClassName:me,modalTitle:Xe,modalWidth:hr,modalOk:Ke,modalCancel:Lr,onModalOk:cn,onModalCancel:$e,modalProps:lr,beforeCrop:Pr,children:Dr}=kt,fe=St(kt,"zoom","zoomSlider")||!0,jt=St(kt,"rotate","rotationSlider")||!1,ve=St(kt,"shape","cropShape")||"rect",Ie=St(kt,"grid","showGrid")||!1;"onUploadFail"in kt&&console.error("`onUploadFail` is removed, because the only way it is called, is when the file is rejected by beforeUpload"),St(kt,"modalMaskTransitionName","modalProps.maskTransitionName"),St(kt,"modalTransitionName","modalProps.transitionName");const ye=(0,w.useRef)({});ye.current.onModalOk=cn,ye.current.onModalCancel=$e,ye.current.beforeCrop=Pr;const ze=(0,w.useRef)(null),sr=(0,w.useCallback)(ri=>{var ti;const Si=document.createElement("canvas"),Xi=Si.getContext("2d"),oo=(((ti=ri==null?void 0:ri.getRootNode)===null||ti===void 0?void 0:ti.call(ri))||document).querySelector(`.${vn}-media`),{width:Ea,height:so,x:Io,y:ii}=ze.current.cropPixelsRef.current;if(jt&&ze.current.rotation!==_r){const{naturalWidth:Yi,naturalHeight:uo}=oo,Wo=ze.current.rotation*(Math.PI/180),ro=Math.abs(Math.sin(Wo)),go=Math.abs(Math.cos(Wo)),Oo=Yi*go+uo*ro,Yo=uo*go+Yi*ro;Si.width=Oo,Si.height=Yo,Xi.fillStyle=Ut,Xi.fillRect(0,0,Oo,Yo);const Ai=Oo/2,$i=Yo/2;Xi.translate(Ai,$i),Xi.rotate(Wo),Xi.translate(-Ai,-$i);const oa=(Oo-Yi)/2,ee=(Yo-uo)/2;Xi.drawImage(oo,0,0,Yi,uo,oa,ee,Yi,uo);const de=Xi.getImageData(0,0,Oo,Yo);Si.width=Ea,Si.height=so,Xi.putImageData(de,-Io,-ii)}else Si.width=Ea,Si.height=so,Xi.fillStyle=Ut,Xi.fillRect(0,0,Ea,so),Xi.drawImage(oo,Io,ii,Ea,so,0,0,Ea,so);return Si},[Ut,jt]),[pr,en]=(0,w.useState)(""),Fn=(0,w.useRef)(),ln=(0,w.useRef)(),ea=(0,w.useMemo)(()=>{const ri=Array.isArray(Dr)?Dr[0]:Dr,ti=ri.props,{beforeUpload:Si,accept:Xi}=ti,io=(0,b.__rest)(ti,["beforeUpload","accept"]),oo=(Ea,so)=>new Promise(Io=>(0,b.__awaiter)(void 0,void 0,void 0,function*(){if(typeof ye.current.beforeCrop=="function")try{const Yi=yield ye.current.beforeCrop(Ea,so);if(Yi!==!0)return Io(Yi)}catch(Yi){return Io(Yi)}const ii=new FileReader;ii.addEventListener("load",()=>{typeof ii.result=="string"&&en(ii.result)}),ii.readAsDataURL(Ea),Fn.current=()=>{var Yi,uo;en(""),ze.current.onReset(),Io(P.Z.LIST_IGNORE),(uo=(Yi=ye.current).onModalCancel)===null||uo===void 0||uo.call(Yi)},ln.current=Yi=>(0,b.__awaiter)(void 0,void 0,void 0,function*(){en(""),ze.current.onReset();const uo=sr(Yi.target),{type:Wo,name:ro,uid:go}=Ea;uo.toBlob(Oo=>(0,b.__awaiter)(void 0,void 0,void 0,function*(){var Yo,Ai,$i,oa,ee,de;const Be=new File([Oo],ro,{type:Wo});if(Object.assign(Be,{uid:go}),typeof Si!="function"){Io(Be),(Ai=(Yo=ye.current).onModalOk)===null||Ai===void 0||Ai.call(Yo,Be);return}try{const or=yield Si(Be,[Be]),Rr=or===!0?Be:or;Io(Rr),(oa=($i=ye.current).onModalOk)===null||oa===void 0||oa.call($i,Rr)}catch(or){Io(or),(de=(ee=ye.current).onModalOk)===null||de===void 0||de.call(ee,or)}}),Wo,dt)})}));return Object.assign(Object.assign({},ri),{props:Object.assign(Object.assign({},io),{accept:Xi||"image/*",beforeUpload:oo})})},[Dr,sr,dt]),fn=(0,w.useMemo)(()=>{const ri={};return hr!==void 0&&(ri.width=hr),Ke!==void 0&&(ri.okText=Ke),Lr!==void 0&&(ri.cancelText=Lr),ri},[Lr,Ke,hr]),Hn=`${vn}-modal${me?` ${me}`:""}`,xa=(typeof window=="undefined"?"":window.navigator.language)==="zh-CN",ba=Xe||(xa?"\u7F16\u8F91\u56FE\u7247":"Edit image"),Wi=O||(xa?"\u91CD\u7F6E":"Reset");return(0,k.jsxs)(k.Fragment,{children:[ea,pr&&(0,k.jsx)(L.Z,Object.assign({},lr,fn,{[Jt]:!0},{title:ba,onCancel:Fn.current,onOk:ln.current,wrapClassName:Hn,maskClosable:!1,destroyOnClose:!0},{children:(0,k.jsx)(at,{ref:ze,cropperRef:Kt,zoomSlider:fe,rotationSlider:jt,aspectSlider:R,showReset:M,resetBtnText:Wi,modalImage:pr,aspect:X,minZoom:mt,maxZoom:Ft,cropShape:ve,showGrid:Ie,cropperProps:De})}))]})})},386010:function(Ve,z,C){"use strict";C.r(z),C.d(z,{clsx:function(){return k}});function b(w){var T,L,P="";if(typeof w=="string"||typeof w=="number")P+=w;else if(typeof w=="object")if(Array.isArray(w))for(T=0;T<w.length;T++)w[T]&&(L=b(w[T]))&&(P&&(P+=" "),P+=L);else for(T in w)w[T]&&(P&&(P+=" "),P+=T);return P}function k(){for(var w,T,L=0,P="";L<arguments.length;)(w=arguments[L++])&&(T=b(w))&&(P&&(P+=" "),P+=T);return P}z.default=k},308273:function(Ve,z,C){"use strict";C.r(z),C.d(z,{CountUp:function(){return k}});var b=function(){return b=Object.assign||function(w){for(var T,L=1,P=arguments.length;L<P;L++)for(var p in T=arguments[L])Object.prototype.hasOwnProperty.call(T,p)&&(w[p]=T[p]);return w},b.apply(this,arguments)},k=function(){function w(T,L,P){var p=this;this.endVal=L,this.options=P,this.version="2.6.2",this.defaults={startVal:0,decimalPlaces:0,duration:2,useEasing:!0,useGrouping:!0,useIndianSeparators:!1,smartEasingThreshold:999,smartEasingAmount:333,separator:",",decimal:".",prefix:"",suffix:"",enableScrollSpy:!1,scrollSpyDelay:200,scrollSpyOnce:!1},this.finalEndVal=null,this.useEasing=!0,this.countDown=!1,this.error="",this.startVal=0,this.paused=!0,this.once=!1,this.count=function(m){p.startTime||(p.startTime=m);var S=m-p.startTime;p.remaining=p.duration-S,p.useEasing?p.countDown?p.frameVal=p.startVal-p.easingFn(S,0,p.startVal-p.endVal,p.duration):p.frameVal=p.easingFn(S,p.startVal,p.endVal-p.startVal,p.duration):p.frameVal=p.startVal+(p.endVal-p.startVal)*(S/p.duration);var x=p.countDown?p.frameVal<p.endVal:p.frameVal>p.endVal;p.frameVal=x?p.endVal:p.frameVal,p.frameVal=Number(p.frameVal.toFixed(p.options.decimalPlaces)),p.printValue(p.frameVal),S<p.duration?p.rAF=requestAnimationFrame(p.count):p.finalEndVal!==null?p.update(p.finalEndVal):p.options.onCompleteCallback&&p.options.onCompleteCallback()},this.formatNumber=function(m){var S,x,g,A,E=m<0?"-":"";S=Math.abs(m).toFixed(p.options.decimalPlaces);var D=(S+="").split(".");if(x=D[0],g=D.length>1?p.options.decimal+D[1]:"",p.options.useGrouping){A="";for(var F=3,y=0,h=0,Y=x.length;h<Y;++h)p.options.useIndianSeparators&&h===4&&(F=2,y=1),h!==0&&y%F==0&&(A=p.options.separator+A),y++,A=x[Y-h-1]+A;x=A}return p.options.numerals&&p.options.numerals.length&&(x=x.replace(/[0-9]/g,function($){return p.options.numerals[+$]}),g=g.replace(/[0-9]/g,function($){return p.options.numerals[+$]})),E+p.options.prefix+x+g+p.options.suffix},this.easeOutExpo=function(m,S,x,g){return x*(1-Math.pow(2,-10*m/g))*1024/1023+S},this.options=b(b({},this.defaults),P),this.formattingFn=this.options.formattingFn?this.options.formattingFn:this.formatNumber,this.easingFn=this.options.easingFn?this.options.easingFn:this.easeOutExpo,this.startVal=this.validateValue(this.options.startVal),this.frameVal=this.startVal,this.endVal=this.validateValue(L),this.options.decimalPlaces=Math.max(this.options.decimalPlaces),this.resetDuration(),this.options.separator=String(this.options.separator),this.useEasing=this.options.useEasing,this.options.separator===""&&(this.options.useGrouping=!1),this.el=typeof T=="string"?document.getElementById(T):T,this.el?this.printValue(this.startVal):this.error="[CountUp] target is null or undefined",typeof window!="undefined"&&this.options.enableScrollSpy&&(this.error?console.error(this.error,T):(window.onScrollFns=window.onScrollFns||[],window.onScrollFns.push(function(){return p.handleScroll(p)}),window.onscroll=function(){window.onScrollFns.forEach(function(m){return m()})},this.handleScroll(this)))}return w.prototype.handleScroll=function(T){if(T&&window&&!T.once){var L=window.innerHeight+window.scrollY,P=T.el.getBoundingClientRect(),p=P.top+window.pageYOffset,m=P.top+P.height+window.pageYOffset;m<L&&m>window.scrollY&&T.paused?(T.paused=!1,setTimeout(function(){return T.start()},T.options.scrollSpyDelay),T.options.scrollSpyOnce&&(T.once=!0)):(window.scrollY>m||p>L)&&!T.paused&&T.reset()}},w.prototype.determineDirectionAndSmartEasing=function(){var T=this.finalEndVal?this.finalEndVal:this.endVal;this.countDown=this.startVal>T;var L=T-this.startVal;if(Math.abs(L)>this.options.smartEasingThreshold&&this.options.useEasing){this.finalEndVal=T;var P=this.countDown?1:-1;this.endVal=T+P*this.options.smartEasingAmount,this.duration=this.duration/2}else this.endVal=T,this.finalEndVal=null;this.finalEndVal!==null?this.useEasing=!1:this.useEasing=this.options.useEasing},w.prototype.start=function(T){this.error||(T&&(this.options.onCompleteCallback=T),this.duration>0?(this.determineDirectionAndSmartEasing(),this.paused=!1,this.rAF=requestAnimationFrame(this.count)):this.printValue(this.endVal))},w.prototype.pauseResume=function(){this.paused?(this.startTime=null,this.duration=this.remaining,this.startVal=this.frameVal,this.determineDirectionAndSmartEasing(),this.rAF=requestAnimationFrame(this.count)):cancelAnimationFrame(this.rAF),this.paused=!this.paused},w.prototype.reset=function(){cancelAnimationFrame(this.rAF),this.paused=!0,this.resetDuration(),this.startVal=this.validateValue(this.options.startVal),this.frameVal=this.startVal,this.printValue(this.startVal)},w.prototype.update=function(T){cancelAnimationFrame(this.rAF),this.startTime=null,this.endVal=this.validateValue(T),this.endVal!==this.frameVal&&(this.startVal=this.frameVal,this.finalEndVal==null&&this.resetDuration(),this.finalEndVal=null,this.determineDirectionAndSmartEasing(),this.rAF=requestAnimationFrame(this.count))},w.prototype.printValue=function(T){var L;if(this.el){var P=this.formattingFn(T);!((L=this.options.plugin)===null||L===void 0)&&L.render?this.options.plugin.render(this.el,P):this.el.tagName==="INPUT"?this.el.value=P:this.el.tagName==="text"||this.el.tagName==="tspan"?this.el.textContent=P:this.el.innerHTML=P}},w.prototype.ensureNumber=function(T){return typeof T=="number"&&!isNaN(T)},w.prototype.validateValue=function(T){var L=Number(T);return this.ensureNumber(L)?L:(this.error="[CountUp] invalid start or end value: ".concat(T),null)},w.prototype.resetDuration=function(){this.startTime=null,this.duration=1e3*Number(this.options.duration),this.remaining=this.duration},w}()},971829:function(Ve,z,C){"use strict";C.r(z),C.d(z,{quadtree:function(){return b.Z}});var b=C(547148)},547148:function(Ve,z,C){"use strict";C.d(z,{Z:function(){return $}});function b(H){const Q=+this._x.call(null,H),tt=+this._y.call(null,H);return k(this.cover(Q,tt),Q,tt,H)}function k(H,Q,tt,rt){if(isNaN(Q)||isNaN(tt))return H;var ct,ot=H._root,xt={data:rt},pt=H._x0,Xt=H._y0,Ct=H._x1,At=H._y1,Z,q,bt,_t,nt,vt,It,Pt;if(!ot)return H._root=xt,H;for(;ot.length;)if((nt=Q>=(Z=(pt+Ct)/2))?pt=Z:Ct=Z,(vt=tt>=(q=(Xt+At)/2))?Xt=q:At=q,ct=ot,!(ot=ot[It=vt<<1|nt]))return ct[It]=xt,H;if(bt=+H._x.call(null,ot.data),_t=+H._y.call(null,ot.data),Q===bt&&tt===_t)return xt.next=ot,ct?ct[It]=xt:H._root=xt,H;do ct=ct?ct[It]=new Array(4):H._root=new Array(4),(nt=Q>=(Z=(pt+Ct)/2))?pt=Z:Ct=Z,(vt=tt>=(q=(Xt+At)/2))?Xt=q:At=q;while((It=vt<<1|nt)===(Pt=(_t>=q)<<1|bt>=Z));return ct[Pt]=ot,ct[It]=xt,H}function w(H){var Q,tt,rt=H.length,ct,ot,xt=new Array(rt),pt=new Array(rt),Xt=1/0,Ct=1/0,At=-1/0,Z=-1/0;for(tt=0;tt<rt;++tt)isNaN(ct=+this._x.call(null,Q=H[tt]))||isNaN(ot=+this._y.call(null,Q))||(xt[tt]=ct,pt[tt]=ot,ct<Xt&&(Xt=ct),ct>At&&(At=ct),ot<Ct&&(Ct=ot),ot>Z&&(Z=ot));if(Xt>At||Ct>Z)return this;for(this.cover(Xt,Ct).cover(At,Z),tt=0;tt<rt;++tt)k(this,xt[tt],pt[tt],H[tt]);return this}function T(H,Q){if(isNaN(H=+H)||isNaN(Q=+Q))return this;var tt=this._x0,rt=this._y0,ct=this._x1,ot=this._y1;if(isNaN(tt))ct=(tt=Math.floor(H))+1,ot=(rt=Math.floor(Q))+1;else{for(var xt=ct-tt||1,pt=this._root,Xt,Ct;tt>H||H>=ct||rt>Q||Q>=ot;)switch(Ct=(Q<rt)<<1|H<tt,Xt=new Array(4),Xt[Ct]=pt,pt=Xt,xt*=2,Ct){case 0:ct=tt+xt,ot=rt+xt;break;case 1:tt=ct-xt,ot=rt+xt;break;case 2:ct=tt+xt,rt=ot-xt;break;case 3:tt=ct-xt,rt=ot-xt;break}this._root&&this._root.length&&(this._root=pt)}return this._x0=tt,this._y0=rt,this._x1=ct,this._y1=ot,this}function L(){var H=[];return this.visit(function(Q){if(!Q.length)do H.push(Q.data);while(Q=Q.next)}),H}function P(H){return arguments.length?this.cover(+H[0][0],+H[0][1]).cover(+H[1][0],+H[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function p(H,Q,tt,rt,ct){this.node=H,this.x0=Q,this.y0=tt,this.x1=rt,this.y1=ct}function m(H,Q,tt){var rt,ct=this._x0,ot=this._y0,xt,pt,Xt,Ct,At=this._x1,Z=this._y1,q=[],bt=this._root,_t,nt;for(bt&&q.push(new p(bt,ct,ot,At,Z)),tt==null?tt=1/0:(ct=H-tt,ot=Q-tt,At=H+tt,Z=Q+tt,tt*=tt);_t=q.pop();)if(!(!(bt=_t.node)||(xt=_t.x0)>At||(pt=_t.y0)>Z||(Xt=_t.x1)<ct||(Ct=_t.y1)<ot))if(bt.length){var vt=(xt+Xt)/2,It=(pt+Ct)/2;q.push(new p(bt[3],vt,It,Xt,Ct),new p(bt[2],xt,It,vt,Ct),new p(bt[1],vt,pt,Xt,It),new p(bt[0],xt,pt,vt,It)),(nt=(Q>=It)<<1|H>=vt)&&(_t=q[q.length-1],q[q.length-1]=q[q.length-1-nt],q[q.length-1-nt]=_t)}else{var Pt=H-+this._x.call(null,bt.data),Et=Q-+this._y.call(null,bt.data),Nt=Pt*Pt+Et*Et;if(Nt<tt){var $t=Math.sqrt(tt=Nt);ct=H-$t,ot=Q-$t,At=H+$t,Z=Q+$t,rt=bt.data}}return rt}function S(H){if(isNaN(At=+this._x.call(null,H))||isNaN(Z=+this._y.call(null,H)))return this;var Q,tt=this._root,rt,ct,ot,xt=this._x0,pt=this._y0,Xt=this._x1,Ct=this._y1,At,Z,q,bt,_t,nt,vt,It;if(!tt)return this;if(tt.length)for(;;){if((_t=At>=(q=(xt+Xt)/2))?xt=q:Xt=q,(nt=Z>=(bt=(pt+Ct)/2))?pt=bt:Ct=bt,Q=tt,!(tt=tt[vt=nt<<1|_t]))return this;if(!tt.length)break;(Q[vt+1&3]||Q[vt+2&3]||Q[vt+3&3])&&(rt=Q,It=vt)}for(;tt.data!==H;)if(ct=tt,!(tt=tt.next))return this;return(ot=tt.next)&&delete tt.next,ct?(ot?ct.next=ot:delete ct.next,this):Q?(ot?Q[vt]=ot:delete Q[vt],(tt=Q[0]||Q[1]||Q[2]||Q[3])&&tt===(Q[3]||Q[2]||Q[1]||Q[0])&&!tt.length&&(rt?rt[It]=tt:this._root=tt),this):(this._root=ot,this)}function x(H){for(var Q=0,tt=H.length;Q<tt;++Q)this.remove(H[Q]);return this}function g(){return this._root}function A(){var H=0;return this.visit(function(Q){if(!Q.length)do++H;while(Q=Q.next)}),H}function E(H){var Q=[],tt,rt=this._root,ct,ot,xt,pt,Xt;for(rt&&Q.push(new p(rt,this._x0,this._y0,this._x1,this._y1));tt=Q.pop();)if(!H(rt=tt.node,ot=tt.x0,xt=tt.y0,pt=tt.x1,Xt=tt.y1)&&rt.length){var Ct=(ot+pt)/2,At=(xt+Xt)/2;(ct=rt[3])&&Q.push(new p(ct,Ct,At,pt,Xt)),(ct=rt[2])&&Q.push(new p(ct,ot,At,Ct,Xt)),(ct=rt[1])&&Q.push(new p(ct,Ct,xt,pt,At)),(ct=rt[0])&&Q.push(new p(ct,ot,xt,Ct,At))}return this}function D(H){var Q=[],tt=[],rt;for(this._root&&Q.push(new p(this._root,this._x0,this._y0,this._x1,this._y1));rt=Q.pop();){var ct=rt.node;if(ct.length){var ot,xt=rt.x0,pt=rt.y0,Xt=rt.x1,Ct=rt.y1,At=(xt+Xt)/2,Z=(pt+Ct)/2;(ot=ct[0])&&Q.push(new p(ot,xt,pt,At,Z)),(ot=ct[1])&&Q.push(new p(ot,At,pt,Xt,Z)),(ot=ct[2])&&Q.push(new p(ot,xt,Z,At,Ct)),(ot=ct[3])&&Q.push(new p(ot,At,Z,Xt,Ct))}tt.push(rt)}for(;rt=tt.pop();)H(rt.node,rt.x0,rt.y0,rt.x1,rt.y1);return this}function F(H){return H[0]}function y(H){return arguments.length?(this._x=H,this):this._x}function h(H){return H[1]}function Y(H){return arguments.length?(this._y=H,this):this._y}function $(H,Q,tt){var rt=new U(Q==null?F:Q,tt==null?h:tt,NaN,NaN,NaN,NaN);return H==null?rt:rt.addAll(H)}function U(H,Q,tt,rt,ct,ot){this._x=H,this._y=Q,this._x0=tt,this._y0=rt,this._x1=ct,this._y1=ot,this._root=void 0}function W(H){for(var Q={data:H.data},tt=Q;H=H.next;)tt=tt.next={data:H.data};return Q}var V=$.prototype=U.prototype;V.copy=function(){var H=new U(this._x,this._y,this._x0,this._y0,this._x1,this._y1),Q=this._root,tt,rt;if(!Q)return H;if(!Q.length)return H._root=W(Q),H;for(tt=[{source:Q,target:H._root=new Array(4)}];Q=tt.pop();)for(var ct=0;ct<4;++ct)(rt=Q.source[ct])&&(rt.length?tt.push({source:rt,target:Q.target[ct]=new Array(4)}):Q.target[ct]=W(rt));return H},V.add=b,V.addAll=w,V.cover=T,V.data=L,V.extent=P,V.find=m,V.remove=S,V.removeAll=x,V.root=g,V.size=A,V.visit=E,V.visitAfter=D,V.x=y,V.y=Y},235374:function(Ve,z,C){"use strict";C.d(z,{HT:function(){return F}});var b=0,k=0,w=0,T=1e3,L,P,p=0,m=0,S=0,x=typeof performance=="object"&&performance.now?performance:Date,g=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(W){setTimeout(W,17)};function A(){return m||(g(E),m=x.now()+S)}function E(){m=0}function D(){this._call=this._time=this._next=null}D.prototype=F.prototype={constructor:D,restart:function(W,V,H){if(typeof W!="function")throw new TypeError("callback is not a function");H=(H==null?A():+H)+(V==null?0:+V),!this._next&&P!==this&&(P?P._next=this:L=this,P=this),this._call=W,this._time=H,U()},stop:function(){this._call&&(this._call=null,this._time=1/0,U())}};function F(W,V,H){var Q=new D;return Q.restart(W,V,H),Q}function y(){A(),++b;for(var W=L,V;W;)(V=m-W._time)>=0&&W._call.call(null,V),W=W._next;--b}function h(){m=(p=x.now())+S,b=k=0;try{y()}finally{b=0,$(),m=0}}function Y(){var W=x.now(),V=W-p;V>T&&(S-=V,p=W)}function $(){for(var W,V=L,H,Q=1/0;V;)V._call?(Q>V._time&&(Q=V._time),W=V,V=V._next):(H=V._next,V._next=null,V=W?W._next=H:L=H);P=W,U(Q)}function U(W){if(!b){k&&(k=clearTimeout(k));var V=W-m;V>24?(W<1/0&&(k=setTimeout(h,W-x.now()-S)),w&&(w=clearInterval(w))):(w||(p=x.now(),w=setInterval(Y,T)),b=1,g(h))}}},631969:function(Ve,z,C){"use strict";C.r(z),C.d(z,{BRIDGE_GRAPH_NAME:function(){return L},GraphType:function(){return m},HierarchyNodeType:function(){return S},InclusionType:function(){return p},LAYOUT_CONFIG:function(){return b},NodeType:function(){return P},ROOT_NAME:function(){return T},buildGraph:function(){return Xr},flatGraph:function(){return bn},getEdges:function(){return wn},mergeConfig:function(){return k}});const b={graph:{meta:{rankDir:"TB",nodeSep:50,rankSep:50,edgeSep:5,align:void 0}},subScene:{meta:{paddingTop:20,paddingBottom:20,paddingLeft:20,paddingRight:20,labelHeight:20}},nodeSize:{meta:{width:100,maxLabelWidth:0,height:20},node:{width:80,height:20,labelOffset:10,maxLabelWidth:40},bridge:{width:5,height:5,radius:2,labelOffset:0}}};function k(v={},N=b){var K,st,ht,yt;const Ot=JSON.parse(JSON.stringify(N)),zt=((K=v==null?void 0:v.graph)===null||K===void 0?void 0:K.meta)||{},Zt=((st=v==null?void 0:v.subScene)===null||st===void 0?void 0:st.meta)||{},ce=((ht=v==null?void 0:v.nodeSize)===null||ht===void 0?void 0:ht.meta)||{},Me=((yt=v==null?void 0:v.nodeSize)===null||yt===void 0?void 0:yt.node)||{},xe=Ot.nodeSize.bridge;return{graph:{meta:Object.assign(Ot.graph.meta,zt)},subScene:{meta:Object.assign(Ot.subScene.meta,Zt)},nodeSize:{meta:Object.assign(Ot.nodeSize.meta,ce),node:Object.assign(Ot.nodeSize.node,Me),bridge:xe}}}function w(v){return`\u25EC${v}\u25EC`}const T=w("ROOT"),L=w("BRIDGE_GRAPH");var P,p,m,S;(function(v){v[v.META=0]="META",v[v.NODE=1]="NODE",v[v.BRIDGE=2]="BRIDGE"})(P||(P={})),function(v){v[v.INCLUDE=0]="INCLUDE",v[v.EXCLUDE=1]="EXCLUDE",v[v.UNSPECIFIED=2]="UNSPECIFIED"}(p||(p={})),function(v){v[v.META=0]="META",v[v.CORE=1]="CORE",v[v.BRIDGE=2]="BRIDGE"}(m||(m={})),function(v){v[v.META=0]="META",v[v.OP=1]="OP",v[v.SERIES=2]="SERIES"}(S||(S={}));var x=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof C.g!="undefined"?C.g:typeof self!="undefined"?self:{};function g(v,N){return v(N={exports:{}},N.exports),N.exports}var A=function(){this.__data__=[],this.size=0},E=function(v,N){return v===N||v!=v&&N!=N},D=function(v,N){for(var K=v.length;K--;)if(E(v[K][0],N))return K;return-1},F=Array.prototype.splice,y=function(v){var N=this.__data__,K=D(N,v);return!(K<0)&&(K==N.length-1?N.pop():F.call(N,K,1),--this.size,!0)},h=function(v){var N=this.__data__,K=D(N,v);return K<0?void 0:N[K][1]},Y=function(v){return D(this.__data__,v)>-1},$=function(v,N){var K=this.__data__,st=D(K,v);return st<0?(++this.size,K.push([v,N])):K[st][1]=N,this};function U(v){var N=-1,K=v==null?0:v.length;for(this.clear();++N<K;){var st=v[N];this.set(st[0],st[1])}}U.prototype.clear=A,U.prototype.delete=y,U.prototype.get=h,U.prototype.has=Y,U.prototype.set=$;var W=U,V=function(){this.__data__=new W,this.size=0},H=function(v){var N=this.__data__,K=N.delete(v);return this.size=N.size,K},Q=function(v){return this.__data__.get(v)},tt=function(v){return this.__data__.has(v)},rt=typeof x=="object"&&x&&x.Object===Object&&x,ct=typeof self=="object"&&self&&self.Object===Object&&self,ot=rt||ct||Function("return this")(),xt=ot.Symbol,pt=Object.prototype,Xt=pt.hasOwnProperty,Ct=pt.toString,At=xt?xt.toStringTag:void 0,Z=function(v){var N=Xt.call(v,At),K=v[At];try{v[At]=void 0;var st=!0}catch(yt){}var ht=Ct.call(v);return st&&(N?v[At]=K:delete v[At]),ht},q=Object.prototype.toString,bt=function(v){return q.call(v)},_t=xt?xt.toStringTag:void 0,nt=function(v){return v==null?v===void 0?"[object Undefined]":"[object Null]":_t&&_t in Object(v)?Z(v):bt(v)},vt=function(v){var N=typeof v;return v!=null&&(N=="object"||N=="function")},It,Pt=function(v){if(!vt(v))return!1;var N=nt(v);return N=="[object Function]"||N=="[object GeneratorFunction]"||N=="[object AsyncFunction]"||N=="[object Proxy]"},Et=ot["__core-js_shared__"],Nt=(It=/[^.]+$/.exec(Et&&Et.keys&&Et.keys.IE_PROTO||""))?"Symbol(src)_1."+It:"",$t=function(v){return!!Nt&&Nt in v},ue=Function.prototype.toString,ie=function(v){if(v!=null){try{return ue.call(v)}catch(N){}try{return v+""}catch(N){}}return""},Dt=/^\[object .+?Constructor\]$/,ne=Function.prototype,pe=Object.prototype,Wt=ne.toString,ae=pe.hasOwnProperty,Se=RegExp("^"+Wt.call(ae).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),be=function(v){return!(!vt(v)||$t(v))&&(Pt(v)?Se:Dt).test(ie(v))},Qt=function(v,N){return v==null?void 0:v[N]},we=function(v,N){var K=Qt(v,N);return be(K)?K:void 0},Tt=we(ot,"Map"),Le=we(Object,"create"),Mr=function(){this.__data__=Le?Le(null):{},this.size=0},Ar=function(v){var N=this.has(v)&&delete this.__data__[v];return this.size-=N?1:0,N},Ir=Object.prototype.hasOwnProperty,Br=function(v){var N=this.__data__;if(Le){var K=N[v];return K==="__lodash_hash_undefined__"?void 0:K}return Ir.call(N,v)?N[v]:void 0},dn=Object.prototype.hasOwnProperty,an=function(v){var N=this.__data__;return Le?N[v]!==void 0:dn.call(N,v)},Ln=function(v,N){var K=this.__data__;return this.size+=this.has(v)?0:1,K[v]=Le&&N===void 0?"__lodash_hash_undefined__":N,this};function Un(v){var N=-1,K=v==null?0:v.length;for(this.clear();++N<K;){var st=v[N];this.set(st[0],st[1])}}Un.prototype.clear=Mr,Un.prototype.delete=Ar,Un.prototype.get=Br,Un.prototype.has=an,Un.prototype.set=Ln;var Yn=Un,xr=function(){this.size=0,this.__data__={hash:new Yn,map:new(Tt||W),string:new Yn}},qe=function(v){var N=typeof v;return N=="string"||N=="number"||N=="symbol"||N=="boolean"?v!=="__proto__":v===null},Cr=function(v,N){var K=v.__data__;return qe(N)?K[typeof N=="string"?"string":"hash"]:K.map},tn=function(v){var N=Cr(this,v).delete(v);return this.size-=N?1:0,N},vn=function(v){return Cr(this,v).get(v)},_n=function(v){return Cr(this,v).has(v)},Pn=function(v,N){var K=Cr(this,v),st=K.size;return K.set(v,N),this.size+=K.size==st?0:1,this};function _r(v){var N=-1,K=v==null?0:v.length;for(this.clear();++N<K;){var st=v[N];this.set(st[0],st[1])}}_r.prototype.clear=xr,_r.prototype.delete=tn,_r.prototype.get=vn,_r.prototype.has=_n,_r.prototype.set=Pn;var un=_r,An=function(v,N){var K=this.__data__;if(K instanceof W){var st=K.__data__;if(!Tt||st.length<199)return st.push([v,N]),this.size=++K.size,this;K=this.__data__=new un(st)}return K.set(v,N),this.size=K.size,this};function on(v){var N=this.__data__=new W(v);this.size=N.size}on.prototype.clear=V,on.prototype.delete=H,on.prototype.get=Q,on.prototype.has=tt,on.prototype.set=An;var Wn=on,Cn=function(v,N){for(var K=-1,st=v==null?0:v.length;++K<st&&N(v[K],K,v)!==!1;);return v},On=function(){try{var v=we(Object,"defineProperty");return v({},"",{}),v}catch(N){}}(),jn=function(v,N,K){N=="__proto__"&&On?On(v,N,{configurable:!0,enumerable:!0,value:K,writable:!0}):v[N]=K},at=Object.prototype.hasOwnProperty,Ze=function(v,N,K){var st=v[N];at.call(v,N)&&E(st,K)&&(K!==void 0||N in v)||jn(v,N,K)},qt=function(v,N,K,st){var ht=!K;K||(K={});for(var yt=-1,Ot=N.length;++yt<Ot;){var zt=N[yt],Zt=st?st(K[zt],v[zt],zt,K,v):void 0;Zt===void 0&&(Zt=v[zt]),ht?jn(K,zt,Zt):Ze(K,zt,Zt)}return K},Jt=function(v,N){for(var K=-1,st=Array(v);++K<v;)st[K]=N(K);return st},St=function(v){return v!=null&&typeof v=="object"},Ce=function(v){return St(v)&&nt(v)=="[object Arguments]"},kt=Object.prototype,Kt=kt.hasOwnProperty,dt=kt.propertyIsEnumerable,Ut=Ce(function(){return arguments}())?Ce:function(v){return St(v)&&Kt.call(v,"callee")&&!dt.call(v,"callee")},J=Array.isArray,it=function(){return!1},R=g(function(v,N){var K=N&&!N.nodeType&&N,st=K&&v&&!v.nodeType&&v,ht=st&&st.exports===K?ot.Buffer:void 0,yt=(ht?ht.isBuffer:void 0)||it;v.exports=yt}),M=/^(?:0|[1-9]\d*)$/,O=function(v,N){var K=typeof v;return!!(N=N==null?9007199254740991:N)&&(K=="number"||K!="symbol"&&M.test(v))&&v>-1&&v%1==0&&v<N},X=function(v){return typeof v=="number"&&v>-1&&v%1==0&&v<=9007199254740991},mt={};mt["[object Float32Array]"]=mt["[object Float64Array]"]=mt["[object Int8Array]"]=mt["[object Int16Array]"]=mt["[object Int32Array]"]=mt["[object Uint8Array]"]=mt["[object Uint8ClampedArray]"]=mt["[object Uint16Array]"]=mt["[object Uint32Array]"]=!0,mt["[object Arguments]"]=mt["[object Array]"]=mt["[object ArrayBuffer]"]=mt["[object Boolean]"]=mt["[object DataView]"]=mt["[object Date]"]=mt["[object Error]"]=mt["[object Function]"]=mt["[object Map]"]=mt["[object Number]"]=mt["[object Object]"]=mt["[object RegExp]"]=mt["[object Set]"]=mt["[object String]"]=mt["[object WeakMap]"]=!1;var Ft=function(v){return St(v)&&X(v.length)&&!!mt[nt(v)]},Bt=function(v){return function(N){return v(N)}},re=g(function(v,N){var K=N&&!N.nodeType&&N,st=K&&v&&!v.nodeType&&v,ht=st&&st.exports===K&&rt.process,yt=function(){try{var Ot=st&&st.require&&st.require("util").types;return Ot||ht&&ht.binding&&ht.binding("util")}catch(zt){}}();v.exports=yt}),De=re&&re.isTypedArray,me=De?Bt(De):Ft,Xe=Object.prototype.hasOwnProperty,hr=function(v,N){var K=J(v),st=!K&&Ut(v),ht=!K&&!st&&R(v),yt=!K&&!st&&!ht&&me(v),Ot=K||st||ht||yt,zt=Ot?Jt(v.length,String):[],Zt=zt.length;for(var ce in v)!N&&!Xe.call(v,ce)||Ot&&(ce=="length"||ht&&(ce=="offset"||ce=="parent")||yt&&(ce=="buffer"||ce=="byteLength"||ce=="byteOffset")||O(ce,Zt))||zt.push(ce);return zt},Ke=Object.prototype,Lr=function(v){var N=v&&v.constructor;return v===(typeof N=="function"&&N.prototype||Ke)},cn=function(v,N){return function(K){return v(N(K))}},$e=cn(Object.keys,Object),lr=Object.prototype.hasOwnProperty,Pr=function(v){if(!Lr(v))return $e(v);var N=[];for(var K in Object(v))lr.call(v,K)&&K!="constructor"&&N.push(K);return N},Dr=function(v){return v!=null&&X(v.length)&&!Pt(v)},fe=function(v){return Dr(v)?hr(v):Pr(v)},jt=function(v,N){return v&&qt(N,fe(N),v)},ve=function(v){var N=[];if(v!=null)for(var K in Object(v))N.push(K);return N},Ie=Object.prototype.hasOwnProperty,ye=function(v){if(!vt(v))return ve(v);var N=Lr(v),K=[];for(var st in v)(st!="constructor"||!N&&Ie.call(v,st))&&K.push(st);return K},ze=function(v){return Dr(v)?hr(v,!0):ye(v)},sr=function(v,N){return v&&qt(N,ze(N),v)},pr=g(function(v,N){var K=N&&!N.nodeType&&N,st=K&&v&&!v.nodeType&&v,ht=st&&st.exports===K?ot.Buffer:void 0,yt=ht?ht.allocUnsafe:void 0;v.exports=function(Ot,zt){if(zt)return Ot.slice();var Zt=Ot.length,ce=yt?yt(Zt):new Ot.constructor(Zt);return Ot.copy(ce),ce}}),en=function(v,N){var K=-1,st=v.length;for(N||(N=Array(st));++K<st;)N[K]=v[K];return N},Fn=function(v,N){for(var K=-1,st=v==null?0:v.length,ht=0,yt=[];++K<st;){var Ot=v[K];N(Ot,K,v)&&(yt[ht++]=Ot)}return yt},ln=function(){return[]},ea=Object.prototype.propertyIsEnumerable,fn=Object.getOwnPropertySymbols,Hn=fn?function(v){return v==null?[]:(v=Object(v),Fn(fn(v),function(N){return ea.call(v,N)}))}:ln,la=function(v,N){return qt(v,Hn(v),N)},xa=function(v,N){for(var K=-1,st=N.length,ht=v.length;++K<st;)v[ht+K]=N[K];return v},ba=cn(Object.getPrototypeOf,Object),Wi=Object.getOwnPropertySymbols?function(v){for(var N=[];v;)xa(N,Hn(v)),v=ba(v);return N}:ln,ri=function(v,N){return qt(v,Wi(v),N)},ti=function(v,N,K){var st=N(v);return J(v)?st:xa(st,K(v))},Si=function(v){return ti(v,fe,Hn)},Xi=function(v){return ti(v,ze,Wi)},io=we(ot,"DataView"),oo=we(ot,"Promise"),Ea=we(ot,"Set"),so=we(ot,"WeakMap"),Io=ie(io),ii=ie(Tt),Yi=ie(oo),uo=ie(Ea),Wo=ie(so),ro=nt;(io&&ro(new io(new ArrayBuffer(1)))!="[object DataView]"||Tt&&ro(new Tt)!="[object Map]"||oo&&ro(oo.resolve())!="[object Promise]"||Ea&&ro(new Ea)!="[object Set]"||so&&ro(new so)!="[object WeakMap]")&&(ro=function(v){var N=nt(v),K=N=="[object Object]"?v.constructor:void 0,st=K?ie(K):"";if(st)switch(st){case Io:return"[object DataView]";case ii:return"[object Map]";case Yi:return"[object Promise]";case uo:return"[object Set]";case Wo:return"[object WeakMap]"}return N});var go=ro,Oo=Object.prototype.hasOwnProperty,Yo=function(v){var N=v.length,K=new v.constructor(N);return N&&typeof v[0]=="string"&&Oo.call(v,"index")&&(K.index=v.index,K.input=v.input),K},Ai=ot.Uint8Array,$i=function(v){var N=new v.constructor(v.byteLength);return new Ai(N).set(new Ai(v)),N},oa=function(v,N){var K=N?$i(v.buffer):v.buffer;return new v.constructor(K,v.byteOffset,v.byteLength)},ee=/\w*$/,de=function(v){var N=new v.constructor(v.source,ee.exec(v));return N.lastIndex=v.lastIndex,N},Be=xt?xt.prototype:void 0,or=Be?Be.valueOf:void 0,Rr=function(v){return or?Object(or.call(v)):{}},Nr=function(v,N){var K=N?$i(v.buffer):v.buffer;return new v.constructor(K,v.byteOffset,v.length)},Sr=function(v,N,K){var st=v.constructor;switch(N){case"[object ArrayBuffer]":return $i(v);case"[object Boolean]":case"[object Date]":return new st(+v);case"[object DataView]":return oa(v,K);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return Nr(v,K);case"[object Map]":return new st;case"[object Number]":case"[object String]":return new st(v);case"[object RegExp]":return de(v);case"[object Set]":return new st;case"[object Symbol]":return Rr(v)}},qr=Object.create,hn=function(){function v(){}return function(N){if(!vt(N))return{};if(qr)return qr(N);v.prototype=N;var K=new v;return v.prototype=void 0,K}}(),Dn=function(v){return typeof v.constructor!="function"||Lr(v)?{}:hn(ba(v))},sa=function(v){return St(v)&&go(v)=="[object Map]"},qn=re&&re.isMap,ga=qn?Bt(qn):sa,ya=function(v){return St(v)&&go(v)=="[object Set]"},di=re&&re.isSet,Ma=di?Bt(di):ya,ua={};ua["[object Arguments]"]=ua["[object Array]"]=ua["[object ArrayBuffer]"]=ua["[object DataView]"]=ua["[object Boolean]"]=ua["[object Date]"]=ua["[object Float32Array]"]=ua["[object Float64Array]"]=ua["[object Int8Array]"]=ua["[object Int16Array]"]=ua["[object Int32Array]"]=ua["[object Map]"]=ua["[object Number]"]=ua["[object Object]"]=ua["[object RegExp]"]=ua["[object Set]"]=ua["[object String]"]=ua["[object Symbol]"]=ua["[object Uint8Array]"]=ua["[object Uint8ClampedArray]"]=ua["[object Uint16Array]"]=ua["[object Uint32Array]"]=!0,ua["[object Error]"]=ua["[object Function]"]=ua["[object WeakMap]"]=!1;var ci=function v(N,K,st,ht,yt,Ot){var zt,Zt=1&K,ce=2&K,Me=4&K;if(st&&(zt=yt?st(N,ht,yt,Ot):st(N)),zt!==void 0)return zt;if(!vt(N))return N;var xe=J(N);if(xe){if(zt=Yo(N),!Zt)return en(N,zt)}else{var Ye=go(N),fr=Ye=="[object Function]"||Ye=="[object GeneratorFunction]";if(R(N))return pr(N,Zt);if(Ye=="[object Object]"||Ye=="[object Arguments]"||fr&&!yt){if(zt=ce||fr?{}:Dn(N),!Zt)return ce?ri(N,sr(zt,N)):la(N,jt(zt,N))}else{if(!ua[Ye])return yt?N:{};zt=Sr(N,Ye,Zt)}}Ot||(Ot=new Wn);var Vr=Ot.get(N);if(Vr)return Vr;Ot.set(N,zt),Ma(N)?N.forEach(function(br){zt.add(v(br,K,st,br,N,Ot))}):ga(N)&&N.forEach(function(br,Er){zt.set(Er,v(br,K,st,Er,N,Ot))});var mr=xe?void 0:(Me?ce?Xi:Si:ce?ze:fe)(N);return Cn(mr||N,function(br,Er){mr&&(br=N[Er=br]),Ze(zt,Er,v(br,K,st,Er,N,Ot))}),zt},ei=function(v){return ci(v,4)},Fa=function(v){return function(){return v}},Di=function(v){return function(N,K,st){for(var ht=-1,yt=Object(N),Ot=st(N),zt=Ot.length;zt--;){var Zt=Ot[v?zt:++ht];if(K(yt[Zt],Zt,yt)===!1)break}return N}}(),yi=function(v,N){return v&&Di(v,N,fe)},ka=function(v,N){return function(K,st){if(K==null)return K;if(!Dr(K))return v(K,st);for(var ht=K.length,yt=N?ht:-1,Ot=Object(K);(N?yt--:++yt<ht)&&st(Ot[yt],yt,Ot)!==!1;);return K}}(yi),ja=function(v){return v},Oa=function(v){return typeof v=="function"?v:ja},Ni=function(v,N){return(J(v)?Cn:ka)(v,Oa(N))},Mi=Ni,Ri=function(v,N){var K=[];return ka(v,function(st,ht,yt){N(st,ht,yt)&&K.push(st)}),K},co=function(v){return this.__data__.set(v,"__lodash_hash_undefined__"),this},qi=function(v){return this.__data__.has(v)};function mo(v){var N=-1,K=v==null?0:v.length;for(this.__data__=new un;++N<K;)this.add(v[N])}mo.prototype.add=mo.prototype.push=co,mo.prototype.has=qi;var ts=mo,es=function(v,N){for(var K=-1,st=v==null?0:v.length;++K<st;)if(N(v[K],K,v))return!0;return!1},no=function(v,N){return v.has(N)},ni=function(v,N,K,st,ht,yt){var Ot=1&K,zt=v.length,Zt=N.length;if(zt!=Zt&&!(Ot&&Zt>zt))return!1;var ce=yt.get(v),Me=yt.get(N);if(ce&&Me)return ce==N&&Me==v;var xe=-1,Ye=!0,fr=2&K?new ts:void 0;for(yt.set(v,N),yt.set(N,v);++xe<zt;){var Vr=v[xe],mr=N[xe];if(st)var br=Ot?st(mr,Vr,xe,N,v,yt):st(Vr,mr,xe,v,N,yt);if(br!==void 0){if(br)continue;Ye=!1;break}if(fr){if(!es(N,function(Er,Mn){if(!no(fr,Mn)&&(Vr===Er||ht(Vr,Er,K,st,yt)))return fr.push(Mn)})){Ye=!1;break}}else if(Vr!==mr&&!ht(Vr,mr,K,st,yt)){Ye=!1;break}}return yt.delete(v),yt.delete(N),Ye},Fi=function(v){var N=-1,K=Array(v.size);return v.forEach(function(st,ht){K[++N]=[ht,st]}),K},fo=function(v){var N=-1,K=Array(v.size);return v.forEach(function(st){K[++N]=st}),K},Ya=xt?xt.prototype:void 0,yo=Ya?Ya.valueOf:void 0,ko=function(v,N,K,st,ht,yt,Ot){switch(K){case"[object DataView]":if(v.byteLength!=N.byteLength||v.byteOffset!=N.byteOffset)return!1;v=v.buffer,N=N.buffer;case"[object ArrayBuffer]":return!(v.byteLength!=N.byteLength||!yt(new Ai(v),new Ai(N)));case"[object Boolean]":case"[object Date]":case"[object Number]":return E(+v,+N);case"[object Error]":return v.name==N.name&&v.message==N.message;case"[object RegExp]":case"[object String]":return v==N+"";case"[object Map]":var zt=Fi;case"[object Set]":var Zt=1&st;if(zt||(zt=fo),v.size!=N.size&&!Zt)return!1;var ce=Ot.get(v);if(ce)return ce==N;st|=2,Ot.set(v,N);var Me=ni(zt(v),zt(N),st,ht,yt,Ot);return Ot.delete(v),Me;case"[object Symbol]":if(yo)return yo.call(v)==yo.call(N)}return!1},ji=Object.prototype.hasOwnProperty,is=function(v,N,K,st,ht,yt){var Ot=1&K,zt=Si(v),Zt=zt.length;if(Zt!=Si(N).length&&!Ot)return!1;for(var ce=Zt;ce--;){var Me=zt[ce];if(!(Ot?Me in N:ji.call(N,Me)))return!1}var xe=yt.get(v),Ye=yt.get(N);if(xe&&Ye)return xe==N&&Ye==v;var fr=!0;yt.set(v,N),yt.set(N,v);for(var Vr=Ot;++ce<Zt;){var mr=v[Me=zt[ce]],br=N[Me];if(st)var Er=Ot?st(br,mr,Me,N,v,yt):st(mr,br,Me,v,N,yt);if(!(Er===void 0?mr===br||ht(mr,br,K,st,yt):Er)){fr=!1;break}Vr||(Vr=Me=="constructor")}if(fr&&!Vr){var Mn=v.constructor,Xn=N.constructor;Mn==Xn||!("constructor"in v)||!("constructor"in N)||typeof Mn=="function"&&Mn instanceof Mn&&typeof Xn=="function"&&Xn instanceof Xn||(fr=!1)}return yt.delete(v),yt.delete(N),fr},zi=Object.prototype.hasOwnProperty,Bo=function(v,N,K,st,ht,yt){var Ot=J(v),zt=J(N),Zt=Ot?"[object Array]":go(v),ce=zt?"[object Array]":go(N),Me=(Zt=Zt=="[object Arguments]"?"[object Object]":Zt)=="[object Object]",xe=(ce=ce=="[object Arguments]"?"[object Object]":ce)=="[object Object]",Ye=Zt==ce;if(Ye&&R(v)){if(!R(N))return!1;Ot=!0,Me=!1}if(Ye&&!Me)return yt||(yt=new Wn),Ot||me(v)?ni(v,N,K,st,ht,yt):ko(v,N,Zt,K,st,ht,yt);if(!(1&K)){var fr=Me&&zi.call(v,"__wrapped__"),Vr=xe&&zi.call(N,"__wrapped__");if(fr||Vr){var mr=fr?v.value():v,br=Vr?N.value():N;return yt||(yt=new Wn),ht(mr,br,K,st,yt)}}return!!Ye&&(yt||(yt=new Wn),is(v,N,K,st,ht,yt))},cs=function v(N,K,st,ht,yt){return N===K||(N==null||K==null||!St(N)&&!St(K)?N!=N&&K!=K:Bo(N,K,st,ht,v,yt))},Cs=function(v,N,K,st){var ht=K.length,yt=ht,Ot=!st;if(v==null)return!yt;for(v=Object(v);ht--;){var zt=K[ht];if(Ot&&zt[2]?zt[1]!==v[zt[0]]:!(zt[0]in v))return!1}for(;++ht<yt;){var Zt=(zt=K[ht])[0],ce=v[Zt],Me=zt[1];if(Ot&&zt[2]){if(ce===void 0&&!(Zt in v))return!1}else{var xe=new Wn;if(st)var Ye=st(ce,Me,Zt,v,N,xe);if(!(Ye===void 0?cs(Me,ce,3,st,xe):Ye))return!1}}return!0},xo=function(v){return v==v&&!vt(v)},fs=function(v){for(var N=fe(v),K=N.length;K--;){var st=N[K],ht=v[st];N[K]=[st,ht,xo(ht)]}return N},ls=function(v,N){return function(K){return K!=null&&K[v]===N&&(N!==void 0||v in Object(K))}},Ds=function(v){var N=fs(v);return N.length==1&&N[0][2]?ls(N[0][0],N[0][1]):function(K){return K===v||Cs(K,v,N)}},Aa=function(v){return typeof v=="symbol"||St(v)&&nt(v)=="[object Symbol]"},Yt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ge=/^\w*$/,nr=function(v,N){if(J(v))return!1;var K=typeof v;return!(K!="number"&&K!="symbol"&&K!="boolean"&&v!=null&&!Aa(v))||Ge.test(v)||!Yt.test(v)||N!=null&&v in Object(N)};function gr(v,N){if(typeof v!="function"||N!=null&&typeof N!="function")throw new TypeError("Expected a function");var K=function(){var st=arguments,ht=N?N.apply(this,st):st[0],yt=K.cache;if(yt.has(ht))return yt.get(ht);var Ot=v.apply(this,st);return K.cache=yt.set(ht,Ot)||yt,Ot};return K.cache=new(gr.Cache||un),K}gr.Cache=un;var Zr=gr,pn=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,$n=/\\(\\)?/g,qa=function(v){var N=Zr(v,function(st){return K.size===500&&K.clear(),st}),K=N.cache;return N}(function(v){var N=[];return v.charCodeAt(0)===46&&N.push(""),v.replace(pn,function(K,st,ht,yt){N.push(ht?yt.replace($n,"$1"):st||K)}),N}),ki=function(v,N){for(var K=-1,st=v==null?0:v.length,ht=Array(st);++K<st;)ht[K]=N(v[K],K,v);return ht},Do=xt?xt.prototype:void 0,Ho=Do?Do.toString:void 0,ks=function v(N){if(typeof N=="string")return N;if(J(N))return ki(N,v)+"";if(Aa(N))return Ho?Ho.call(N):"";var K=N+"";return K=="0"&&1/N==-1/0?"-0":K},Qi=function(v){return v==null?"":ks(v)},Lo=function(v,N){return J(v)?v:nr(v,N)?[v]:qa(Qi(v))},ds=function(v){if(typeof v=="string"||Aa(v))return v;var N=v+"";return N=="0"&&1/v==-1/0?"-0":N},Bs=function(v,N){for(var K=0,st=(N=Lo(N,v)).length;v!=null&&K<st;)v=v[ds(N[K++])];return K&&K==st?v:void 0},ps=function(v,N,K){var st=v==null?void 0:Bs(v,N);return st===void 0?K:st},Vs=function(v,N){return v!=null&&N in Object(v)},qs=function(v,N,K){for(var st=-1,ht=(N=Lo(N,v)).length,yt=!1;++st<ht;){var Ot=ds(N[st]);if(!(yt=v!=null&&K(v,Ot)))break;v=v[Ot]}return yt||++st!=ht?yt:!!(ht=v==null?0:v.length)&&X(ht)&&O(Ot,ht)&&(J(v)||Ut(v))},Hs=function(v,N){return v!=null&&qs(v,N,Vs)},fu=function(v,N){return nr(v)&&xo(N)?ls(ds(v),N):function(K){var st=ps(K,v);return st===void 0&&st===N?Hs(K,v):cs(N,st,3)}},gs=function(v){return function(N){return N==null?void 0:N[v]}},Ls=function(v){return function(N){return Bs(N,v)}},Fs=function(v){return nr(v)?gs(ds(v)):Ls(v)},os=function(v){return typeof v=="function"?v:v==null?ja:typeof v=="object"?J(v)?fu(v[0],v[1]):Ds(v):Fs(v)},_u=function(v,N){return(J(v)?Fn:Ri)(v,os(N))},Cu=Object.prototype.hasOwnProperty,bo=function(v,N){return v!=null&&Cu.call(v,N)},Zo=function(v,N){return v!=null&&qs(v,N,bo)},ss=Object.prototype.hasOwnProperty,d=function(v){if(v==null)return!0;if(Dr(v)&&(J(v)||typeof v=="string"||typeof v.splice=="function"||R(v)||me(v)||Ut(v)))return!v.length;var N=go(v);if(N=="[object Map]"||N=="[object Set]")return!v.size;if(Lr(v))return!Pr(v).length;for(var K in v)if(ss.call(v,K))return!1;return!0},G=function(v){return v===void 0},wt=function(v,N){var K=-1,st=Dr(v)?Array(v.length):[];return ka(v,function(ht,yt,Ot){st[++K]=N(ht,yt,Ot)}),st},Gt=function(v,N){return(J(v)?ki:wt)(v,os(N))},te=function(v,N,K,st){var ht=-1,yt=v==null?0:v.length;for(st&&yt&&(K=v[++ht]);++ht<yt;)K=N(K,v[ht],ht,v);return K},he=function(v,N,K,st,ht){return ht(v,function(yt,Ot,zt){K=st?(st=!1,yt):N(K,yt,Ot,zt)}),K},ge=function(v,N,K){var st=J(v)?te:he,ht=arguments.length<3;return st(v,os(N),K,ht,ka)},Oe=function(v){return typeof v=="string"||!J(v)&&St(v)&&nt(v)=="[object String]"},Fe=gs("length"),He=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]"),ur=function(v){return He.test(v)},Ur="[\\ud800-\\udfff]",jr="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",Wr="\\ud83c[\\udffb-\\udfff]",mn="[^\\ud800-\\udfff]",Bn="(?:\\ud83c[\\udde6-\\uddff]){2}",Qr="[\\ud800-\\udbff][\\udc00-\\udfff]",na="(?:"+jr+"|"+Wr+")?",Va="[\\ufe0e\\ufe0f]?"+na+("(?:\\u200d(?:"+[mn,Bn,Qr].join("|")+")[\\ufe0e\\ufe0f]?"+na+")*"),Ha="(?:"+[mn+jr+"?",jr,Bn,Qr,Ur].join("|")+")",za=RegExp(Wr+"(?="+Wr+")|"+Ha+Va,"g"),_a=function(v){for(var N=za.lastIndex=0;za.test(v);)++N;return N},Na=function(v){return ur(v)?_a(v):Fe(v)},Po=function(v){if(v==null)return 0;if(Dr(v))return Oe(v)?Na(v):v.length;var N=go(v);return N=="[object Map]"||N=="[object Set]"?v.size:Pr(v).length},Mo=function(v,N,K){var st=J(v),ht=st||R(v)||me(v);if(N=os(N),K==null){var yt=v&&v.constructor;K=ht?st?new yt:[]:vt(v)&&Pt(yt)?hn(ba(v)):{}}return(ht?Cn:yi)(v,function(Ot,zt,Zt){return N(K,Ot,zt,Zt)}),K},Eo=xt?xt.isConcatSpreadable:void 0,_o=function(v){return J(v)||Ut(v)||!!(Eo&&v&&v[Eo])},Co=function v(N,K,st,ht,yt){var Ot=-1,zt=N.length;for(st||(st=_o),yt||(yt=[]);++Ot<zt;){var Zt=N[Ot];K>0&&st(Zt)?K>1?v(Zt,K-1,st,ht,yt):xa(yt,Zt):ht||(yt[yt.length]=Zt)}return yt},Fo=function(v,N,K){switch(K.length){case 0:return v.call(N);case 1:return v.call(N,K[0]);case 2:return v.call(N,K[0],K[1]);case 3:return v.call(N,K[0],K[1],K[2])}return v.apply(N,K)},zo=Math.max,fi=function(v,N,K){return N=zo(N===void 0?v.length-1:N,0),function(){for(var st=arguments,ht=-1,yt=zo(st.length-N,0),Ot=Array(yt);++ht<yt;)Ot[ht]=st[N+ht];ht=-1;for(var zt=Array(N+1);++ht<N;)zt[ht]=st[ht];return zt[N]=K(Ot),Fo(v,this,zt)}},Bi=On?function(v,N){return On(v,"toString",{configurable:!0,enumerable:!1,value:Fa(N),writable:!0})}:ja,Qs=Date.now,zs=function(v){var N=0,K=0;return function(){var st=Qs(),ht=16-(st-K);if(K=st,ht>0){if(++N>=800)return arguments[0]}else N=0;return v.apply(void 0,arguments)}}(Bi),Ts=function(v,N){return zs(fi(v,N,ja),v+"")},lu=function(v,N,K,st){for(var ht=v.length,yt=K+(st?1:-1);st?yt--:++yt<ht;)if(N(v[yt],yt,v))return yt;return-1},Rc=function(v){return v!=v},mf=function(v,N,K){for(var st=K-1,ht=v.length;++st<ht;)if(v[st]===N)return st;return-1},yf=function(v,N,K){return N==N?mf(v,N,K):lu(v,Rc,K)},kc=function(v,N){return!!(v!=null&&v.length)&&yf(v,N,0)>-1},ol=function(v,N,K){for(var st=-1,ht=v==null?0:v.length;++st<ht;)if(K(N,v[st]))return!0;return!1},Bc=function(){},Xu=Ea&&1/fo(new Ea([,-0]))[1]==1/0?function(v){return new Ea(v)}:Bc,ju=function(v,N,K){var st=-1,ht=kc,yt=v.length,Ot=!0,zt=[],Zt=zt;if(K)Ot=!1,ht=ol;else if(yt>=200){var ce=N?null:Xu(v);if(ce)return fo(ce);Ot=!1,ht=no,Zt=new ts}else Zt=N?[]:zt;t:for(;++st<yt;){var Me=v[st],xe=N?N(Me):Me;if(Me=K||Me!==0?Me:0,Ot&&xe==xe){for(var Ye=Zt.length;Ye--;)if(Zt[Ye]===xe)continue t;N&&Zt.push(xe),zt.push(Me)}else ht(Zt,xe,K)||(Zt!==zt&&Zt.push(xe),zt.push(Me))}return zt},Fc=function(v){return St(v)&&Dr(v)},xf=Ts(function(v){return ju(Co(v,1,Fc,!0))}),sl=function(v,N){return ki(N,function(K){return v[K]})},du,bf=function(v){return v==null?[]:sl(v,fe(v))};try{du={clone:ei,constant:Fa,each:Mi,filter:_u,has:Zo,isArray:J,isEmpty:d,isFunction:Pt,isUndefined:G,keys:fe,map:Gt,reduce:ge,size:Po,transform:Mo,union:xf,values:bf}}catch(v){}du||(du=window._);var ta=du,Tu=ui;function ui(v){this._isDirected=!ta.has(v,"directed")||v.directed,this._isMultigraph=!!ta.has(v,"multigraph")&&v.multigraph,this._isCompound=!!ta.has(v,"compound")&&v.compound,this._label=void 0,this._defaultNodeLabelFn=ta.constant(void 0),this._defaultEdgeLabelFn=ta.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children["\0"]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}function zc(v,N){v[N]?v[N]++:v[N]=1}function Au(v,N){--v[N]||delete v[N]}function au(v,N,K,st){var ht=""+N,yt=""+K;if(!v&&ht>yt){var Ot=ht;ht=yt,yt=Ot}return ht+""+yt+""+(ta.isUndefined(st)?"\0":st)}function Gc(v,N,K,st){var ht=""+N,yt=""+K;if(!v&&ht>yt){var Ot=ht;ht=yt,yt=Ot}var zt={v:ht,w:yt};return st&&(zt.name=st),zt}function oc(v,N){return au(v,N.v,N.w,N.name)}ui.prototype._nodeCount=0,ui.prototype._edgeCount=0,ui.prototype.isDirected=function(){return this._isDirected},ui.prototype.isMultigraph=function(){return this._isMultigraph},ui.prototype.isCompound=function(){return this._isCompound},ui.prototype.setGraph=function(v){return this._label=v,this},ui.prototype.graph=function(){return this._label},ui.prototype.setDefaultNodeLabel=function(v){return ta.isFunction(v)||(v=ta.constant(v)),this._defaultNodeLabelFn=v,this},ui.prototype.nodeCount=function(){return this._nodeCount},ui.prototype.nodes=function(){return ta.keys(this._nodes)},ui.prototype.sources=function(){var v=this;return ta.filter(this.nodes(),function(N){return ta.isEmpty(v._in[N])})},ui.prototype.sinks=function(){var v=this;return ta.filter(this.nodes(),function(N){return ta.isEmpty(v._out[N])})},ui.prototype.setNodes=function(v,N){var K=arguments,st=this;return ta.each(v,function(ht){K.length>1?st.setNode(ht,N):st.setNode(ht)}),this},ui.prototype.setNode=function(v,N){return ta.has(this._nodes,v)?(arguments.length>1&&(this._nodes[v]=N),this):(this._nodes[v]=arguments.length>1?N:this._defaultNodeLabelFn(v),this._isCompound&&(this._parent[v]="\0",this._children[v]={},this._children["\0"][v]=!0),this._in[v]={},this._preds[v]={},this._out[v]={},this._sucs[v]={},++this._nodeCount,this)},ui.prototype.node=function(v){return this._nodes[v]},ui.prototype.hasNode=function(v){return ta.has(this._nodes,v)},ui.prototype.removeNode=function(v){var N=this;if(ta.has(this._nodes,v)){var K=function(st){N.removeEdge(N._edgeObjs[st])};delete this._nodes[v],this._isCompound&&(this._removeFromParentsChildList(v),delete this._parent[v],ta.each(this.children(v),function(st){N.setParent(st)}),delete this._children[v]),ta.each(ta.keys(this._in[v]),K),delete this._in[v],delete this._preds[v],ta.each(ta.keys(this._out[v]),K),delete this._out[v],delete this._sucs[v],--this._nodeCount}return this},ui.prototype.setParent=function(v,N){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(ta.isUndefined(N))N="\0";else{for(var K=N+="";!ta.isUndefined(K);K=this.parent(K))if(K===v)throw new Error("Setting "+N+" as parent of "+v+" would create a cycle");this.setNode(N)}return this.setNode(v),this._removeFromParentsChildList(v),this._parent[v]=N,this._children[N][v]=!0,this},ui.prototype._removeFromParentsChildList=function(v){delete this._children[this._parent[v]][v]},ui.prototype.parent=function(v){if(this._isCompound){var N=this._parent[v];if(N!=="\0")return N}},ui.prototype.children=function(v){if(ta.isUndefined(v)&&(v="\0"),this._isCompound){var N=this._children[v];if(N)return ta.keys(N)}else{if(v==="\0")return this.nodes();if(this.hasNode(v))return[]}},ui.prototype.predecessors=function(v){var N=this._preds[v];if(N)return ta.keys(N)},ui.prototype.successors=function(v){var N=this._sucs[v];if(N)return ta.keys(N)},ui.prototype.neighbors=function(v){var N=this.predecessors(v);if(N)return ta.union(N,this.successors(v))},ui.prototype.isLeaf=function(v){return(this.isDirected()?this.successors(v):this.neighbors(v)).length===0},ui.prototype.filterNodes=function(v){var N=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});N.setGraph(this.graph());var K=this;ta.each(this._nodes,function(yt,Ot){v(Ot)&&N.setNode(Ot,yt)}),ta.each(this._edgeObjs,function(yt){N.hasNode(yt.v)&&N.hasNode(yt.w)&&N.setEdge(yt,K.edge(yt))});var st={};function ht(yt){var Ot=K.parent(yt);return Ot===void 0||N.hasNode(Ot)?(st[yt]=Ot,Ot):Ot in st?st[Ot]:ht(Ot)}return this._isCompound&&ta.each(N.nodes(),function(yt){N.setParent(yt,ht(yt))}),N},ui.prototype.setDefaultEdgeLabel=function(v){return ta.isFunction(v)||(v=ta.constant(v)),this._defaultEdgeLabelFn=v,this},ui.prototype.edgeCount=function(){return this._edgeCount},ui.prototype.edges=function(){return ta.values(this._edgeObjs)},ui.prototype.setPath=function(v,N){var K=this,st=arguments;return ta.reduce(v,function(ht,yt){return st.length>1?K.setEdge(ht,yt,N):K.setEdge(ht,yt),yt}),this},ui.prototype.setEdge=function(){var v,N,K,st,ht=!1,yt=arguments[0];typeof yt=="object"&&yt!==null&&"v"in yt?(v=yt.v,N=yt.w,K=yt.name,arguments.length===2&&(st=arguments[1],ht=!0)):(v=yt,N=arguments[1],K=arguments[3],arguments.length>2&&(st=arguments[2],ht=!0)),v=""+v,N=""+N,ta.isUndefined(K)||(K=""+K);var Ot=au(this._isDirected,v,N,K);if(ta.has(this._edgeLabels,Ot))return ht&&(this._edgeLabels[Ot]=st),this;if(!ta.isUndefined(K)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(v),this.setNode(N),this._edgeLabels[Ot]=ht?st:this._defaultEdgeLabelFn(v,N,K);var zt=Gc(this._isDirected,v,N,K);return v=zt.v,N=zt.w,Object.freeze(zt),this._edgeObjs[Ot]=zt,zc(this._preds[N],v),zc(this._sucs[v],N),this._in[N][Ot]=zt,this._out[v][Ot]=zt,this._edgeCount++,this},ui.prototype.edge=function(v,N,K){var st=arguments.length===1?oc(this._isDirected,arguments[0]):au(this._isDirected,v,N,K);return this._edgeLabels[st]},ui.prototype.hasEdge=function(v,N,K){var st=arguments.length===1?oc(this._isDirected,arguments[0]):au(this._isDirected,v,N,K);return ta.has(this._edgeLabels,st)},ui.prototype.removeEdge=function(v,N,K){var st=arguments.length===1?oc(this._isDirected,arguments[0]):au(this._isDirected,v,N,K),ht=this._edgeObjs[st];return ht&&(v=ht.v,N=ht.w,delete this._edgeLabels[st],delete this._edgeObjs[st],Au(this._preds[N],v),Au(this._sucs[v],N),delete this._in[N][st],delete this._out[v][st],this._edgeCount--),this},ui.prototype.inEdges=function(v,N){var K=this._in[v];if(K){var st=ta.values(K);return N?ta.filter(st,function(ht){return ht.v===N}):st}},ui.prototype.outEdges=function(v,N){var K=this._out[v];if(K){var st=ta.values(K);return N?ta.filter(st,function(ht){return ht.w===N}):st}},ui.prototype.nodeEdges=function(v,N){var K=this.inEdges(v,N);if(K)return K.concat(this.outEdges(v,N))};var sc={Graph:Tu,version:"2.1.8"},Uc={write:function(v){var N={options:{directed:v.isDirected(),multigraph:v.isMultigraph(),compound:v.isCompound()},nodes:Ef(v),edges:Gs(v)};return ta.isUndefined(v.graph())||(N.value=ta.clone(v.graph())),N},read:function(v){var N=new Tu(v.options).setGraph(v.value);return ta.each(v.nodes,function(K){N.setNode(K.v,K.value),K.parent&&N.setParent(K.v,K.parent)}),ta.each(v.edges,function(K){N.setEdge({v:K.v,w:K.w,name:K.name},K.value)}),N}};function Ef(v){return ta.map(v.nodes(),function(N){var K=v.node(N),st=v.parent(N),ht={v:N};return ta.isUndefined(K)||(ht.value=K),ta.isUndefined(st)||(ht.parent=st),ht})}function Gs(v){return ta.map(v.edges(),function(N){var K=v.edge(N),st={v:N.v,w:N.w};return ta.isUndefined(N.name)||(st.name=N.name),ta.isUndefined(K)||(st.value=K),st})}var lt=function(v){var N,K={},st=[];function ht(yt){ta.has(K,yt)||(K[yt]=!0,N.push(yt),ta.each(v.successors(yt),ht),ta.each(v.predecessors(yt),ht))}return ta.each(v.nodes(),function(yt){N=[],ht(yt),N.length&&st.push(N)}),st},Lt=Vt;function Vt(){this._arr=[],this._keyIndices={}}Vt.prototype.size=function(){return this._arr.length},Vt.prototype.keys=function(){return this._arr.map(function(v){return v.key})},Vt.prototype.has=function(v){return ta.has(this._keyIndices,v)},Vt.prototype.priority=function(v){var N=this._keyIndices[v];if(N!==void 0)return this._arr[N].priority},Vt.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},Vt.prototype.add=function(v,N){var K=this._keyIndices;if(v=String(v),!ta.has(K,v)){var st=this._arr,ht=st.length;return K[v]=ht,st.push({key:v,priority:N}),this._decrease(ht),!0}return!1},Vt.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var v=this._arr.pop();return delete this._keyIndices[v.key],this._heapify(0),v.key},Vt.prototype.decrease=function(v,N){var K=this._keyIndices[v];if(N>this._arr[K].priority)throw new Error("New priority is greater than current priority. Key: "+v+" Old: "+this._arr[K].priority+" New: "+N);this._arr[K].priority=N,this._decrease(K)},Vt.prototype._heapify=function(v){var N=this._arr,K=2*v,st=K+1,ht=v;K<N.length&&(ht=N[K].priority<N[ht].priority?K:ht,st<N.length&&(ht=N[st].priority<N[ht].priority?st:ht),ht!==v&&(this._swap(v,ht),this._heapify(ht)))},Vt.prototype._decrease=function(v){for(var N,K=this._arr,st=K[v].priority;v!==0&&!(K[N=v>>1].priority<st);)this._swap(v,N),v=N},Vt.prototype._swap=function(v,N){var K=this._arr,st=this._keyIndices,ht=K[v],yt=K[N];K[v]=yt,K[N]=ht,st[yt.key]=v,st[ht.key]=N};var le=function(v,N,K,st){return function(ht,yt,Ot,zt){var Zt,ce,Me={},xe=new Lt,Ye=function(fr){var Vr=fr.v!==Zt?fr.v:fr.w,mr=Me[Vr],br=Ot(fr),Er=ce.distance+br;if(br<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+fr+" Weight: "+br);Er<mr.distance&&(mr.distance=Er,mr.predecessor=Zt,xe.decrease(Vr,Er))};for(ht.nodes().forEach(function(fr){var Vr=fr===yt?0:Number.POSITIVE_INFINITY;Me[fr]={distance:Vr},xe.add(fr,Vr)});xe.size()>0&&(Zt=xe.removeMin(),(ce=Me[Zt]).distance!==Number.POSITIVE_INFINITY);)zt(Zt).forEach(Ye);return Me}(v,String(N),K||Ae,st||function(ht){return v.outEdges(ht)})},Ae=ta.constant(1),ir=function(v,N,K){return ta.transform(v.nodes(),function(st,ht){st[ht]=le(v,ht,N,K)},{})},cr=function(v){var N=0,K=[],st={},ht=[];function yt(Ot){var zt=st[Ot]={onStack:!0,lowlink:N,index:N++};if(K.push(Ot),v.successors(Ot).forEach(function(Me){ta.has(st,Me)?st[Me].onStack&&(zt.lowlink=Math.min(zt.lowlink,st[Me].index)):(yt(Me),zt.lowlink=Math.min(zt.lowlink,st[Me].lowlink))}),zt.lowlink===zt.index){var Zt,ce=[];do Zt=K.pop(),st[Zt].onStack=!1,ce.push(Zt);while(Ot!==Zt);ht.push(ce)}}return v.nodes().forEach(function(Ot){ta.has(st,Ot)||yt(Ot)}),ht},Gr=function(v){return ta.filter(cr(v),function(N){return N.length>1||N.length===1&&v.hasEdge(N[0],N[0])})},gn=function(v,N,K){return function(st,ht,yt){var Ot={},zt=st.nodes();return zt.forEach(function(Zt){Ot[Zt]={},Ot[Zt][Zt]={distance:0},zt.forEach(function(ce){Zt!==ce&&(Ot[Zt][ce]={distance:Number.POSITIVE_INFINITY})}),yt(Zt).forEach(function(ce){var Me=ce.v===Zt?ce.w:ce.v,xe=ht(ce);Ot[Zt][Me]={distance:xe,predecessor:Zt}})}),zt.forEach(function(Zt){var ce=Ot[Zt];zt.forEach(function(Me){var xe=Ot[Me];zt.forEach(function(Ye){var fr=xe[Zt],Vr=ce[Ye],mr=xe[Ye],br=fr.distance+Vr.distance;br<mr.distance&&(mr.distance=br,mr.predecessor=Vr.predecessor)})})}),Ot}(v,N||yn,K||function(st){return v.outEdges(st)})},yn=ta.constant(1),Vn=aa;function aa(v){var N={},K={},st=[];if(ta.each(v.sinks(),function ht(yt){if(ta.has(K,yt))throw new Zn;ta.has(N,yt)||(K[yt]=!0,N[yt]=!0,ta.each(v.predecessors(yt),ht),delete K[yt],st.push(yt))}),ta.size(N)!==v.nodeCount())throw new Zn;return st}function Zn(){}aa.CycleException=Zn,Zn.prototype=new Error;var La=function(v,N,K){ta.isArray(N)||(N=[N]);var st=(v.isDirected()?v.successors:v.neighbors).bind(v),ht=[],yt={};return ta.each(N,function(Ot){if(!v.hasNode(Ot))throw new Error("Graph does not have node: "+Ot);Qa(v,Ot,K==="post",yt,st,ht)}),ht};function Qa(v,N,K,st,ht,yt){ta.has(st,N)||(st[N]=!0,K||yt.push(N),ta.each(ht(N),function(Ot){Qa(v,Ot,K,st,ht,yt)}),K&&yt.push(N))}var Ra,Ca={Graph:sc.Graph,json:Uc,alg:{components:lt,dijkstra:le,dijkstraAll:ir,findCycles:Gr,floydWarshall:gn,isAcyclic:function(v){try{Vn(v)}catch(N){if(N instanceof Vn.CycleException)return!1;throw N}return!0},postorder:function(v,N){return La(v,N,"post")},preorder:function(v,N){return La(v,N,"pre")},prim:function(v,N){var K,st=new Tu,ht={},yt=new Lt;function Ot(Zt){var ce=Zt.v===K?Zt.w:Zt.v,Me=yt.priority(ce);if(Me!==void 0){var xe=N(Zt);xe<Me&&(ht[ce]=K,yt.decrease(ce,xe))}}if(v.nodeCount()===0)return st;ta.each(v.nodes(),function(Zt){yt.add(Zt,Number.POSITIVE_INFINITY),st.setNode(Zt)}),yt.decrease(v.nodes()[0],0);for(var zt=!1;yt.size()>0;){if(K=yt.removeMin(),ta.has(ht,K))st.setEdge(K,ht[K]);else{if(zt)throw new Error("Input graph is not connected: "+v);zt=!0}v.nodeEdges(K).forEach(Ot)}return st},tarjan:cr,topsort:Vn},version:sc.version};try{Ra=Ca}catch(v){}Ra||(Ra=window.graphlib);var Ga=Ra,va=function(v){return ci(v,5)},Ka=function(v,N,K){if(!vt(K))return!1;var st=typeof N;return!!(st=="number"?Dr(K)&&O(N,K.length):st=="string"&&N in K)&&E(K[N],v)},Ua=Object.prototype,ma=Ua.hasOwnProperty,ai=Ts(function(v,N){v=Object(v);var K=-1,st=N.length,ht=st>2?N[2]:void 0;for(ht&&Ka(N[0],N[1],ht)&&(st=1);++K<st;)for(var yt=N[K],Ot=ze(yt),zt=-1,Zt=Ot.length;++zt<Zt;){var ce=Ot[zt],Me=v[ce];(Me===void 0||E(Me,Ua[ce])&&!ma.call(v,ce))&&(v[ce]=yt[ce])}return v}),xi=function(v){return function(N,K,st){var ht=Object(N);if(!Dr(N)){var yt=os(K);N=fe(N),K=function(zt){return yt(ht[zt],zt,ht)}}var Ot=v(N,K,st);return Ot>-1?ht[yt?N[Ot]:Ot]:void 0}},Ji=/^\s+|\s+$/g,_i=/^[-+]0x[0-9a-f]+$/i,hi=/^0b[01]+$/i,lo=/^0o[0-7]+$/i,wo=parseInt,ho=function(v){if(typeof v=="number")return v;if(Aa(v))return NaN;if(vt(v)){var N=typeof v.valueOf=="function"?v.valueOf():v;v=vt(N)?N+"":N}if(typeof v!="string")return v===0?v:+v;v=v.replace(Ji,"");var K=hi.test(v);return K||lo.test(v)?wo(v.slice(2),K?2:8):_i.test(v)?NaN:+v},Us=function(v){return v?(v=ho(v))===1/0||v===-1/0?17976931348623157e292*(v<0?-1:1):v==v?v:0:v===0?v:0},iu=function(v){var N=Us(v),K=N%1;return N==N?K?N-K:N:0},Ps=Math.max,As=xi(function(v,N,K){var st=v==null?0:v.length;if(!st)return-1;var ht=K==null?0:iu(K);return ht<0&&(ht=Ps(st+ht,0)),lu(v,os(N),ht)}),Vu=function(v){return v!=null&&v.length?Co(v,1):[]},Js=function(v,N){return v==null?v:Di(v,Oa(N),ze)},Wc=function(v){var N=v==null?0:v.length;return N?v[N-1]:void 0},ul=function(v,N){var K={};return N=os(N),yi(v,function(st,ht,yt){jn(K,ht,N(st,ht,yt))}),K},Hu=function(v,N,K){for(var st=-1,ht=v.length;++st<ht;){var yt=v[st],Ot=N(yt);if(Ot!=null&&(zt===void 0?Ot==Ot&&!Aa(Ot):K(Ot,zt)))var zt=Ot,Zt=yt}return Zt},uc=function(v,N){return v>N},wf=function(v){return v&&v.length?Hu(v,ja,uc):void 0},Iu=function(v,N,K){(K!==void 0&&!E(v[N],K)||K===void 0&&!(N in v))&&jn(v,N,K)},hu=Function.prototype,Sf=Object.prototype,Yc=hu.toString,Xc=Sf.hasOwnProperty,Ns=Yc.call(Object),Ou=function(v){if(!St(v)||nt(v)!="[object Object]")return!1;var N=ba(v);if(N===null)return!0;var K=Xc.call(N,"constructor")&&N.constructor;return typeof K=="function"&&K instanceof K&&Yc.call(K)==Ns},cc=function(v,N){if((N!=="constructor"||typeof v[N]!="function")&&N!="__proto__")return v[N]},Mf=function(v){return qt(v,ze(v))},_f=function(v,N,K,st,ht,yt,Ot){var zt=cc(v,K),Zt=cc(N,K),ce=Ot.get(Zt);if(ce)Iu(v,K,ce);else{var Me=yt?yt(zt,Zt,K+"",v,N,Ot):void 0,xe=Me===void 0;if(xe){var Ye=J(Zt),fr=!Ye&&R(Zt),Vr=!Ye&&!fr&&me(Zt);Me=Zt,Ye||fr||Vr?J(zt)?Me=zt:Fc(zt)?Me=en(zt):fr?(xe=!1,Me=pr(Zt,!0)):Vr?(xe=!1,Me=Nr(Zt,!0)):Me=[]:Ou(Zt)||Ut(Zt)?(Me=zt,Ut(zt)?Me=Mf(zt):vt(zt)&&!Pt(zt)||(Me=Dn(Zt))):xe=!1}xe&&(Ot.set(Zt,Me),ht(Me,Zt,st,yt,Ot),Ot.delete(Zt)),Iu(v,K,Me)}},us=function v(N,K,st,ht,yt){N!==K&&Di(K,function(Ot,zt){if(yt||(yt=new Wn),vt(Ot))_f(N,K,zt,st,v,ht,yt);else{var Zt=ht?ht(cc(N,zt),Ot,zt+"",N,K,yt):void 0;Zt===void 0&&(Zt=Ot),Iu(N,zt,Zt)}},ze)},Zu=function(v){return Ts(function(N,K){var st=-1,ht=K.length,yt=ht>1?K[ht-1]:void 0,Ot=ht>2?K[2]:void 0;for(yt=v.length>3&&typeof yt=="function"?(ht--,yt):void 0,Ot&&Ka(K[0],K[1],Ot)&&(yt=ht<3?void 0:yt,ht=1),N=Object(N);++st<ht;){var zt=K[st];zt&&v(N,zt,st,yt)}return N})}(function(v,N,K){us(v,N,K)}),Pl=function(v,N){return v<N},Ku=function(v){return v&&v.length?Hu(v,ja,Pl):void 0},jc=function(v,N){return v&&v.length?Hu(v,os(N),Pl):void 0},Zs=function(){return ot.Date.now()},vu=function(v,N,K,st){if(!vt(v))return v;for(var ht=-1,yt=(N=Lo(N,v)).length,Ot=yt-1,zt=v;zt!=null&&++ht<yt;){var Zt=ds(N[ht]),ce=K;if(Zt==="__proto__"||Zt==="constructor"||Zt==="prototype")return v;if(ht!=Ot){var Me=zt[Zt];(ce=st?st(Me,Zt,zt):void 0)===void 0&&(ce=vt(Me)?Me:O(N[ht+1])?[]:{})}Ze(zt,Zt,ce),zt=zt[Zt]}return v},Cf=function(v,N,K){for(var st=-1,ht=N.length,yt={};++st<ht;){var Ot=N[st],zt=Bs(v,Ot);K(zt,Ot)&&vu(yt,Lo(Ot,v),zt)}return yt},Tf=function(v,N){return Cf(v,N,function(K,st){return Hs(v,st)})},cl=function(v){return zs(fi(v,void 0,Vu),v+"")}(function(v,N){return v==null?{}:Tf(v,N)}),Ws=Math.ceil,Vc=Math.max,Hc=function(v,N,K,st){for(var ht=-1,yt=Vc(Ws((N-v)/(K||1)),0),Ot=Array(yt);yt--;)Ot[st?yt:++ht]=v,v+=K;return Ot},Af=function(v){return function(N,K,st){return st&&typeof st!="number"&&Ka(N,K,st)&&(K=st=void 0),N=Us(N),K===void 0?(K=N,N=0):K=Us(K),st=st===void 0?N<K?1:-1:Us(st),Hc(N,K,st,v)}}(),fl=function(v,N){var K=v.length;for(v.sort(N);K--;)v[K]=v[K].value;return v},Nl=function(v,N){if(v!==N){var K=v!==void 0,st=v===null,ht=v==v,yt=Aa(v),Ot=N!==void 0,zt=N===null,Zt=N==N,ce=Aa(N);if(!zt&&!ce&&!yt&&v>N||yt&&Ot&&Zt&&!zt&&!ce||st&&Ot&&Zt||!K&&Zt||!ht)return 1;if(!st&&!yt&&!ce&&v<N||ce&&K&&ht&&!st&&!yt||zt&&K&&ht||!Ot&&ht||!Zt)return-1}return 0},Rl=function(v,N,K){for(var st=-1,ht=v.criteria,yt=N.criteria,Ot=ht.length,zt=K.length;++st<Ot;){var Zt=Nl(ht[st],yt[st]);if(Zt)return st>=zt?Zt:Zt*(K[st]=="desc"?-1:1)}return v.index-N.index},Zc=function(v,N,K){N=N.length?ki(N,function(yt){return J(yt)?function(Ot){return Bs(Ot,yt.length===1?yt[0]:yt)}:yt}):[ja];var st=-1;N=ki(N,Bt(os));var ht=wt(v,function(yt,Ot,zt){return{criteria:ki(N,function(Zt){return Zt(yt)}),index:++st,value:yt}});return fl(ht,function(yt,Ot){return Rl(yt,Ot,K)})},If=Ts(function(v,N){if(v==null)return[];var K=N.length;return K>1&&Ka(v,N[0],N[1])?N=[]:K>2&&Ka(N[0],N[1],N[2])&&(N=[N[0]]),Zc(v,Co(N,1),[])}),kl=0,fd=function(v){var N=++kl;return Qi(v)+N},Bl=function(v,N,K){for(var st=-1,ht=v.length,yt=N.length,Ot={};++st<ht;){var zt=st<yt?N[st]:void 0;K(Ot,v[st],zt)}return Ot},fc,Of=function(v,N){return Bl(v||[],N||[],Ze)};try{fc={cloneDeep:va,constant:Fa,defaults:ai,each:Mi,filter:_u,find:As,flatten:Vu,forEach:Ni,forIn:Js,has:Zo,isUndefined:G,last:Wc,map:Gt,mapValues:ul,max:wf,merge:Zu,min:Ku,minBy:jc,now:Zs,pick:cl,range:Af,reduce:ge,sortBy:If,uniqueId:fd,values:bf,zipObject:Of}}catch(v){}fc||(fc=window._);var er=fc,ld=Kc;function Kc(){var v={};v._next=v._prev=v,this._sentinel=v}function $c(v){v._prev._next=v._next,v._next._prev=v._prev,delete v._next,delete v._prev}function ll(v,N){if(v!=="_next"&&v!=="_prev")return N}Kc.prototype.dequeue=function(){var v=this._sentinel,N=v._prev;if(N!==v)return $c(N),N},Kc.prototype.enqueue=function(v){var N=this._sentinel;v._prev&&v._next&&$c(v),v._next=N._next,N._next._prev=v,N._next=v,v._prev=N},Kc.prototype.toString=function(){for(var v=[],N=this._sentinel,K=N._prev;K!==N;)v.push(JSON.stringify(K,ll)),K=K._prev;return"["+v.join(", ")+"]"};var dl=Ga.Graph,hl=function(v,N){if(v.nodeCount()<=1)return[];var K=function(ht,yt){var Ot=new dl,zt=0,Zt=0;er.forEach(ht.nodes(),function(xe){Ot.setNode(xe,{v:xe,in:0,out:0})}),er.forEach(ht.edges(),function(xe){var Ye=Ot.edge(xe.v,xe.w)||0,fr=yt(xe),Vr=Ye+fr;Ot.setEdge(xe.v,xe.w,Vr),Zt=Math.max(Zt,Ot.node(xe.v).out+=fr),zt=Math.max(zt,Ot.node(xe.w).in+=fr)});var ce=er.range(Zt+zt+3).map(function(){return new ld}),Me=zt+1;return er.forEach(Ot.nodes(),function(xe){Df(ce,Me,Ot.node(xe))}),{graph:Ot,buckets:ce,zeroIdx:Me}}(v,N||Fl),st=function(ht,yt,Ot){for(var zt,Zt=[],ce=yt[yt.length-1],Me=yt[0];ht.nodeCount();){for(;zt=Me.dequeue();)$u(ht,yt,Ot,zt);for(;zt=ce.dequeue();)$u(ht,yt,Ot,zt);if(ht.nodeCount()){for(var xe=yt.length-2;xe>0;--xe)if(zt=yt[xe].dequeue()){Zt=Zt.concat($u(ht,yt,Ot,zt,!0));break}}}return Zt}(K.graph,K.buckets,K.zeroIdx);return er.flatten(er.map(st,function(ht){return v.outEdges(ht.v,ht.w)}),!0)},Fl=er.constant(1);function $u(v,N,K,st,ht){var yt=ht?[]:void 0;return er.forEach(v.inEdges(st.v),function(Ot){var zt=v.edge(Ot),Zt=v.node(Ot.v);ht&&yt.push({v:Ot.v,w:Ot.w}),Zt.out-=zt,Df(N,K,Zt)}),er.forEach(v.outEdges(st.v),function(Ot){var zt=v.edge(Ot),Zt=Ot.w,ce=v.node(Zt);ce.in-=zt,Df(N,K,ce)}),v.removeNode(st.v),yt}function Df(v,N,K){K.out?K.in?v[K.out-K.in+N].enqueue(K):v[v.length-1].enqueue(K):v[0].enqueue(K)}var qc={run:function(v){var N=v.graph().acyclicer==="greedy"?hl(v,function(K){return function(st){return K.edge(st).weight}}(v)):function(K){var st=[],ht={},yt={};function Ot(zt){er.has(yt,zt)||(yt[zt]=!0,ht[zt]=!0,er.forEach(K.outEdges(zt),function(Zt){er.has(ht,Zt.w)?st.push(Zt):Ot(Zt.w)}),delete ht[zt])}return er.forEach(K.nodes(),Ot),st}(v);er.forEach(N,function(K){var st=v.edge(K);v.removeEdge(K),st.forwardName=K.name,st.reversed=!0,v.setEdge(K.w,K.v,st,er.uniqueId("rev"))})},undo:function(v){er.forEach(v.edges(),function(N){var K=v.edge(N);if(K.reversed){v.removeEdge(N);var st=K.forwardName;delete K.reversed,delete K.forwardName,v.setEdge(N.w,N.v,K,st)}})}},lc=Ga.Graph,rs={addDummyNode:dc,simplify:function(v){var N=new lc().setGraph(v.graph());return er.forEach(v.nodes(),function(K){N.setNode(K,v.node(K))}),er.forEach(v.edges(),function(K){var st=N.edge(K.v,K.w)||{weight:0,minlen:1},ht=v.edge(K);N.setEdge(K.v,K.w,{weight:st.weight+ht.weight,minlen:Math.max(st.minlen,ht.minlen)})}),N},asNonCompoundGraph:function(v){var N=new lc({multigraph:v.isMultigraph()}).setGraph(v.graph());return er.forEach(v.nodes(),function(K){v.children(K).length||N.setNode(K,v.node(K))}),er.forEach(v.edges(),function(K){N.setEdge(K,v.edge(K))}),N},successorWeights:function(v){var N=er.map(v.nodes(),function(K){var st={};return er.forEach(v.outEdges(K),function(ht){st[ht.w]=(st[ht.w]||0)+v.edge(ht).weight}),st});return er.zipObject(v.nodes(),N)},predecessorWeights:function(v){var N=er.map(v.nodes(),function(K){var st={};return er.forEach(v.inEdges(K),function(ht){st[ht.v]=(st[ht.v]||0)+v.edge(ht).weight}),st});return er.zipObject(v.nodes(),N)},intersectRect:function(v,N){var K,st,ht=v.x,yt=v.y,Ot=N.x-ht,zt=N.y-yt,Zt=v.width/2,ce=v.height/2;if(!Ot&&!zt)throw new Error("Not possible to find intersection inside of the rectangle");return Math.abs(zt)*Zt>Math.abs(Ot)*ce?(zt<0&&(ce=-ce),K=ce*Ot/zt,st=ce):(Ot<0&&(Zt=-Zt),K=Zt,st=Zt*zt/Ot),{x:ht+K,y:yt+st}},buildLayerMatrix:function(v){var N=er.map(er.range(vl(v)+1),function(){return[]});return er.forEach(v.nodes(),function(K){var st=v.node(K),ht=st.rank;er.isUndefined(ht)||(N[ht][st.order]=K)}),N},normalizeRanks:function(v){var N=er.min(er.map(v.nodes(),function(K){return v.node(K).rank}));er.forEach(v.nodes(),function(K){var st=v.node(K);er.has(st,"rank")&&(st.rank-=N)})},removeEmptyRanks:function(v){var N=er.min(er.map(v.nodes(),function(yt){return v.node(yt).rank})),K=[];er.forEach(v.nodes(),function(yt){var Ot=v.node(yt).rank-N;K[Ot]||(K[Ot]=[]),K[Ot].push(yt)});var st=0,ht=v.graph().nodeRankFactor;er.forEach(K,function(yt,Ot){er.isUndefined(yt)&&Ot%ht!=0?--st:st&&er.forEach(yt,function(zt){v.node(zt).rank+=st})})},addBorderNode:function(v,N,K,st){var ht={width:0,height:0};return arguments.length>=4&&(ht.rank=K,ht.order=st),dc(v,"border",ht,N)},maxRank:vl,partition:function(v,N){var K={lhs:[],rhs:[]};return er.forEach(v,function(st){N(st)?K.lhs.push(st):K.rhs.push(st)}),K},time:function(v,N){var K=er.now();try{return N()}finally{console.log(v+" time: "+(er.now()-K)+"ms")}},notime:function(v,N){return N()}};function dc(v,N,K,st){var ht;do ht=er.uniqueId(st);while(v.hasNode(ht));return K.dummy=N,v.setNode(ht,K),ht}function vl(v){return er.max(er.map(v.nodes(),function(N){var K=v.node(N).rank;if(!er.isUndefined(K))return K}))}var Du={run:function(v){v.graph().dummyChains=[],er.forEach(v.edges(),function(N){(function(K,st){var ht,yt,Ot,zt=st.v,Zt=K.node(zt).rank,ce=st.w,Me=K.node(ce).rank,xe=st.name,Ye=K.edge(st),fr=Ye.labelRank;if(Me!==Zt+1){for(K.removeEdge(st),Ot=0,++Zt;Zt<Me;++Ot,++Zt)Ye.points=[],yt={width:0,height:0,edgeLabel:Ye,edgeObj:st,rank:Zt},ht=rs.addDummyNode(K,"edge",yt,"_d"),Zt===fr&&(yt.width=Ye.width,yt.height=Ye.height,yt.dummy="edge-label",yt.labelpos=Ye.labelpos),K.setEdge(zt,ht,{weight:Ye.weight},xe),Ot===0&&K.graph().dummyChains.push(ht),zt=ht;K.setEdge(zt,ce,{weight:Ye.weight},xe)}})(v,N)})},undo:function(v){er.forEach(v.graph().dummyChains,function(N){var K,st=v.node(N),ht=st.edgeLabel;for(v.setEdge(st.edgeObj,ht);st.dummy;)K=v.successors(N)[0],v.removeNode(N),ht.points.push({x:st.x,y:st.y}),st.dummy==="edge-label"&&(ht.x=st.x,ht.y=st.y,ht.width=st.width,ht.height=st.height),N=K,st=v.node(N)})}},ou=function(v){var N={};er.forEach(v.sources(),function K(st){var ht=v.node(st);if(er.has(N,st))return ht.rank;N[st]=!0;var yt=er.min(er.map(v.outEdges(st),function(Ot){return K(Ot.w)-v.edge(Ot).minlen}));return yt!==Number.POSITIVE_INFINITY&&yt!=null||(yt=0),ht.rank=yt})},hc=function(v,N){return v.node(N.w).rank-v.node(N.v).rank-v.edge(N).minlen},qu=Ga.Graph,pu=hc,vc=function(v){var N,K,st=new qu({directed:!1}),ht=v.nodes()[0],yt=v.nodeCount();for(st.setNode(ht,{});Qu(st,v)<yt;)N=Lu(st,v),K=st.hasNode(N.v)?pu(v,N):-pu(v,N),gu(st,v,K);return st};function Qu(v,N){return er.forEach(v.nodes(),function K(st){er.forEach(N.nodeEdges(st),function(ht){var yt=ht.v,Ot=st===yt?ht.w:yt;v.hasNode(Ot)||pu(N,ht)||(v.setNode(Ot,{}),v.setEdge(st,Ot,{}),K(Ot))})}),v.nodeCount()}function Lu(v,N){return er.minBy(N.edges(),function(K){if(v.hasNode(K.v)!==v.hasNode(K.w))return pu(N,K)})}function gu(v,N,K){er.forEach(v.nodes(),function(st){N.node(st).rank+=K})}var Lf=hc,Pf=ou,pc=Ga.alg.preorder,Nf=Ga.alg.postorder,Rf=rs.simplify,gc=Ks;function Ks(v){v=Rf(v),Pf(v);var N,K=vc(v);for(Bf(K),kf(K,v);N=Ff(K);)Ju(K,v,N,zl(K,v,N))}function kf(v,N){var K=Nf(v,v.nodes());K=K.slice(0,K.length-1),er.forEach(K,function(st){(function(ht,yt,Ot){var zt=ht.node(Ot).parent;ht.edge(Ot,zt).cutvalue=mu(ht,yt,Ot)})(v,N,st)})}function mu(v,N,K){var st=v.node(K).parent,ht=!0,yt=N.edge(K,st),Ot=0;return yt||(ht=!1,yt=N.edge(st,K)),Ot=yt.weight,er.forEach(N.nodeEdges(K),function(zt){var Zt,ce,Me=zt.v===K,xe=Me?zt.w:zt.v;if(xe!==st){var Ye=Me===ht,fr=N.edge(zt).weight;if(Ot+=Ye?fr:-fr,Zt=K,ce=xe,v.hasEdge(Zt,ce)){var Vr=v.edge(K,xe).cutvalue;Ot+=Ye?-Vr:Vr}}}),Ot}function Bf(v,N){arguments.length<2&&(N=v.nodes()[0]),pl(v,{},1,N)}function pl(v,N,K,st,ht){var yt=K,Ot=v.node(st);return N[st]=!0,er.forEach(v.neighbors(st),function(zt){er.has(N,zt)||(K=pl(v,N,K,zt,st))}),Ot.low=yt,Ot.lim=K++,ht?Ot.parent=ht:delete Ot.parent,K}function Ff(v){return er.find(v.edges(),function(N){return v.edge(N).cutvalue<0})}function zl(v,N,K){var st=K.v,ht=K.w;N.hasEdge(st,ht)||(st=K.w,ht=K.v);var yt=v.node(st),Ot=v.node(ht),zt=yt,Zt=!1;yt.lim>Ot.lim&&(zt=Ot,Zt=!0);var ce=er.filter(N.edges(),function(Me){return Zt===gl(v,v.node(Me.v),zt)&&Zt!==gl(v,v.node(Me.w),zt)});return er.minBy(ce,function(Me){return Lf(N,Me)})}function Ju(v,N,K,st){var ht=K.v,yt=K.w;v.removeEdge(ht,yt),v.setEdge(st.v,st.w,{}),Bf(v),kf(v,N),function(Ot,zt){var Zt=er.find(Ot.nodes(),function(Me){return!zt.node(Me).parent}),ce=pc(Ot,Zt);ce=ce.slice(1),er.forEach(ce,function(Me){var xe=Ot.node(Me).parent,Ye=zt.edge(Me,xe),fr=!1;Ye||(Ye=zt.edge(xe,Me),fr=!0),zt.node(Me).rank=zt.node(xe).rank+(fr?Ye.minlen:-Ye.minlen)})}(v,N)}function gl(v,N,K){return K.low<=N.lim&&N.lim<=K.lim}Ks.initLowLimValues=Bf,Ks.initCutValues=kf,Ks.calcCutValue=mu,Ks.leaveEdge=Ff,Ks.enterEdge=zl,Ks.exchangeEdges=Ju;var zf=ou,dd=function(v){switch(v.graph().ranker){case"network-simplex":Ul(v);break;case"tight-tree":(function(N){zf(N),vc(N)})(v);break;case"longest-path":Gl(v);break;default:Ul(v)}},Gl=zf;function Ul(v){gc(v)}var hd=function(v){var N=function(K){var st={},ht=0;function yt(Ot){var zt=ht;er.forEach(K.children(Ot),yt),st[Ot]={low:zt,lim:ht++}}return er.forEach(K.children(),yt),st}(v);er.forEach(v.graph().dummyChains,function(K){for(var st=v.node(K),ht=st.edgeObj,yt=function(xe,Ye,fr,Vr){var mr,br,Er=[],Mn=[],Xn=Math.min(Ye[fr].low,Ye[Vr].low),Rn=Math.max(Ye[fr].lim,Ye[Vr].lim);mr=fr;do mr=xe.parent(mr),Er.push(mr);while(mr&&(Ye[mr].low>Xn||Rn>Ye[mr].lim));for(br=mr,mr=Vr;(mr=xe.parent(mr))!==br;)Mn.push(mr);return{path:Er.concat(Mn.reverse()),lca:br}}(v,N,ht.v,ht.w),Ot=yt.path,zt=yt.lca,Zt=0,ce=Ot[Zt],Me=!0;K!==ht.w;){if(st=v.node(K),Me){for(;(ce=Ot[Zt])!==zt&&v.node(ce).maxRank<st.rank;)Zt++;ce===zt&&(Me=!1)}if(!Me){for(;Zt<Ot.length-1&&v.node(ce=Ot[Zt+1]).minRank<=st.rank;)Zt++;ce=Ot[Zt]}v.setParent(K,ce),K=v.successors(K)[0]}})},Wl={run:function(v){var N=rs.addDummyNode(v,"root",{},"_root"),K=function(Ot){var zt={};function Zt(ce,Me){var xe=Ot.children(ce);xe&&xe.length&&er.forEach(xe,function(Ye){Zt(Ye,Me+1)}),zt[ce]=Me}return er.forEach(Ot.children(),function(ce){Zt(ce,1)}),zt}(v),st=er.max(er.values(K))-1,ht=2*st+1;v.graph().nestingRoot=N,er.forEach(v.edges(),function(Ot){v.edge(Ot).minlen*=ht});var yt=function(Ot){return er.reduce(Ot.edges(),function(zt,Zt){return zt+Ot.edge(Zt).weight},0)}(v)+1;er.forEach(v.children(),function(Ot){Yl(v,N,ht,yt,st,K,Ot)}),v.graph().nodeRankFactor=ht},cleanup:function(v){var N=v.graph();v.removeNode(N.nestingRoot),delete N.nestingRoot,er.forEach(v.edges(),function(K){v.edge(K).nestingEdge&&v.removeEdge(K)})}};function Yl(v,N,K,st,ht,yt,Ot){var zt=v.children(Ot);if(zt.length){var Zt=rs.addBorderNode(v,"_bt"),ce=rs.addBorderNode(v,"_bb"),Me=v.node(Ot);v.setParent(Zt,Ot),Me.borderTop=Zt,v.setParent(ce,Ot),Me.borderBottom=ce,er.forEach(zt,function(xe){Yl(v,N,K,st,ht,yt,xe);var Ye=v.node(xe),fr=Ye.borderTop?Ye.borderTop:xe,Vr=Ye.borderBottom?Ye.borderBottom:xe,mr=Ye.borderTop?st:2*st,br=fr!==Vr?1:ht-yt[Ot]+1;v.setEdge(Zt,fr,{weight:mr,minlen:br,nestingEdge:!0}),v.setEdge(Vr,ce,{weight:mr,minlen:br,nestingEdge:!0})}),v.parent(Ot)||v.setEdge(N,Zt,{weight:0,minlen:ht+yt[Ot]})}else Ot!==N&&v.setEdge(N,Ot,{weight:0,minlen:K})}var vd=function(v){er.forEach(v.children(),function N(K){var st=v.children(K),ht=v.node(K);if(st.length&&er.forEach(st,N),er.has(ht,"minRank")){ht.borderLeft=[],ht.borderRight=[];for(var yt=ht.minRank,Ot=ht.maxRank+1;yt<Ot;++yt)Xl(v,"borderLeft","_bl",K,ht,yt),Xl(v,"borderRight","_br",K,ht,yt)}})};function Xl(v,N,K,st,ht,yt){var Ot={width:0,height:0,rank:yt,borderType:N},zt=ht[N][yt-1],Zt=rs.addDummyNode(v,"border",Ot,K);ht[N][yt]=Zt,v.setParent(Zt,st),zt&&v.setEdge(zt,Zt,{weight:1})}var Qc={adjust:function(v){var N=v.graph().rankdir.toLowerCase();N!=="lr"&&N!=="rl"||jl(v)},undo:function(v){var N=v.graph().rankdir.toLowerCase();N!=="bt"&&N!=="rl"||function(K){er.forEach(K.nodes(),function(st){ml(K.node(st))}),er.forEach(K.edges(),function(st){var ht=K.edge(st);er.forEach(ht.points,ml),er.has(ht,"y")&&ml(ht)})}(v),N!=="lr"&&N!=="rl"||(function(K){er.forEach(K.nodes(),function(st){tc(K.node(st))}),er.forEach(K.edges(),function(st){var ht=K.edge(st);er.forEach(ht.points,tc),er.has(ht,"x")&&tc(ht)})}(v),jl(v))}};function jl(v){er.forEach(v.nodes(),function(N){mc(v.node(N))}),er.forEach(v.edges(),function(N){mc(v.edge(N))})}function mc(v){var N=v.width;v.width=v.height,v.height=N}function ml(v){v.y=-v.y}function tc(v){var N=v.x;v.x=v.y,v.y=N}var Gf=function(v){var N={},K=er.filter(v.nodes(),function(zt){return!v.children(zt).length}),st=er.max(er.map(K,function(zt){return v.node(zt).rank})),ht=er.map(er.range(st+1),function(){return[]});function yt(zt){if(!er.has(N,zt)){N[zt]=!0;var Zt=v.node(zt);ht[Zt.rank].push(zt),er.forEach(v.successors(zt),yt)}}var Ot=er.sortBy(K,function(zt){return v.node(zt).rank});return er.forEach(Ot,yt),ht},Uf=function(v,N){for(var K=0,st=1;st<N.length;++st)K+=Jc(v,N[st-1],N[st]);return K};function Jc(v,N,K){for(var st=er.zipObject(K,er.map(K,function(ce,Me){return Me})),ht=er.flatten(er.map(N,function(ce){return er.sortBy(er.map(v.outEdges(ce),function(Me){return{pos:st[Me.w],weight:v.edge(Me).weight}}),"pos")}),!0),yt=1;yt<K.length;)yt<<=1;var Ot=2*yt-1;yt-=1;var zt=er.map(new Array(Ot),function(){return 0}),Zt=0;return er.forEach(ht.forEach(function(ce){var Me=ce.pos+yt;zt[Me]+=ce.weight;for(var xe=0;Me>0;)Me%2&&(xe+=zt[Me+1]),zt[Me=Me-1>>1]+=ce.weight;Zt+=ce.weight*xe})),Zt}var Pu=function(v,N){return er.map(N,function(K){var st=v.inEdges(K);if(st.length){var ht=er.reduce(st,function(yt,Ot){var zt=v.edge(Ot),Zt=v.node(Ot.v);return{sum:yt.sum+zt.weight*Zt.order,weight:yt.weight+zt.weight}},{sum:0,weight:0});return{v:K,barycenter:ht.sum/ht.weight,weight:ht.weight}}return{v:K}})},yc=function(v,N){var K={};return er.forEach(v,function(st,ht){var yt=K[st.v]={indegree:0,in:[],out:[],vs:[st.v],i:ht};er.isUndefined(st.barycenter)||(yt.barycenter=st.barycenter,yt.weight=st.weight)}),er.forEach(N.edges(),function(st){var ht=K[st.v],yt=K[st.w];er.isUndefined(ht)||er.isUndefined(yt)||(yt.indegree++,ht.out.push(K[st.w]))}),function(st){var ht=[];function yt(Zt){return function(ce){ce.merged||(er.isUndefined(ce.barycenter)||er.isUndefined(Zt.barycenter)||ce.barycenter>=Zt.barycenter)&&function(Me,xe){var Ye=0,fr=0;Me.weight&&(Ye+=Me.barycenter*Me.weight,fr+=Me.weight),xe.weight&&(Ye+=xe.barycenter*xe.weight,fr+=xe.weight),Me.vs=xe.vs.concat(Me.vs),Me.barycenter=Ye/fr,Me.weight=fr,Me.i=Math.min(xe.i,Me.i),xe.merged=!0}(Zt,ce)}}function Ot(Zt){return function(ce){ce.in.push(Zt),--ce.indegree==0&&st.push(ce)}}for(;st.length;){var zt=st.pop();ht.push(zt),er.forEach(zt.in.reverse(),yt(zt)),er.forEach(zt.out,Ot(zt))}return er.map(er.filter(ht,function(Zt){return!Zt.merged}),function(Zt){return er.pick(Zt,["vs","i","barycenter","weight"])})}(er.filter(K,function(st){return!st.indegree}))},xc=function(v,N){var K=rs.partition(v,function(xe){return er.has(xe,"barycenter")}),st=K.lhs,ht=er.sortBy(K.rhs,function(xe){return-xe.i}),yt=[],Ot=0,zt=0,Zt=0;st.sort((ce=!!N,function(xe,Ye){return xe.barycenter<Ye.barycenter?-1:xe.barycenter>Ye.barycenter?1:ce?Ye.i-xe.i:xe.i-Ye.i})),Zt=tf(yt,ht,Zt),er.forEach(st,function(xe){Zt+=xe.vs.length,yt.push(xe.vs),Ot+=xe.barycenter*xe.weight,zt+=xe.weight,Zt=tf(yt,ht,Zt)});var ce,Me={vs:er.flatten(yt,!0)};return zt&&(Me.barycenter=Ot/zt,Me.weight=zt),Me};function tf(v,N,K){for(var st;N.length&&(st=er.last(N)).i<=K;)N.pop(),v.push(st.vs),K++;return K}var Wf=function v(N,K,st,ht){var yt=N.children(K),Ot=N.node(K),zt=Ot?Ot.borderLeft:void 0,Zt=Ot?Ot.borderRight:void 0,ce={};zt&&(yt=er.filter(yt,function(mr){return mr!==zt&&mr!==Zt}));var Me=Pu(N,yt);er.forEach(Me,function(mr){if(N.children(mr.v).length){var br=v(N,mr.v,st,ht);ce[mr.v]=br,er.has(br,"barycenter")&&(Er=mr,Mn=br,er.isUndefined(Er.barycenter)?(Er.barycenter=Mn.barycenter,Er.weight=Mn.weight):(Er.barycenter=(Er.barycenter*Er.weight+Mn.barycenter*Mn.weight)/(Er.weight+Mn.weight),Er.weight+=Mn.weight))}var Er,Mn});var xe=yc(Me,st);(function(mr,br){er.forEach(mr,function(Er){Er.vs=er.flatten(Er.vs.map(function(Mn){return br[Mn]?br[Mn].vs:Mn}),!0)})})(xe,ce);var Ye=xc(xe,ht);if(zt&&(Ye.vs=er.flatten([zt,Ye.vs,Zt],!0),N.predecessors(zt).length)){var fr=N.node(N.predecessors(zt)[0]),Vr=N.node(N.predecessors(Zt)[0]);er.has(Ye,"barycenter")||(Ye.barycenter=0,Ye.weight=0),Ye.barycenter=(Ye.barycenter*Ye.weight+fr.order+Vr.order)/(Ye.weight+2),Ye.weight+=2}return Ye},Yf=Ga.Graph,ef=function(v,N,K){var st=function(yt){for(var Ot;yt.hasNode(Ot=er.uniqueId("_root")););return Ot}(v),ht=new Yf({compound:!0}).setGraph({root:st}).setDefaultNodeLabel(function(yt){return v.node(yt)});return er.forEach(v.nodes(),function(yt){var Ot=v.node(yt),zt=v.parent(yt);(Ot.rank===N||Ot.minRank<=N&&N<=Ot.maxRank)&&(ht.setNode(yt),ht.setParent(yt,zt||st),er.forEach(v[K](yt),function(Zt){var ce=Zt.v===yt?Zt.w:Zt.v,Me=ht.edge(ce,yt),xe=er.isUndefined(Me)?0:Me.weight;ht.setEdge(ce,yt,{weight:v.edge(Zt).weight+xe})}),er.has(Ot,"minRank")&&ht.setNode(yt,{borderLeft:Ot.borderLeft[N],borderRight:Ot.borderRight[N]}))}),ht},Xf=function(v,N,K){var st,ht={};er.forEach(K,function(yt){for(var Ot,zt,Zt=v.parent(yt);Zt;){if((Ot=v.parent(Zt))?(zt=ht[Ot],ht[Ot]=Zt):(zt=st,st=Zt),zt&&zt!==Zt)return void N.setEdge(zt,Zt);Zt=Ot}})},jf=Ga.Graph,rf=function(v){var N=rs.maxRank(v),K=bc(v,er.range(1,N+1),"inEdges"),st=bc(v,er.range(N-1,-1,-1),"outEdges"),ht=Gf(v);wc(v,ht);for(var yt,Ot=Number.POSITIVE_INFINITY,zt=0,Zt=0;Zt<4;++zt,++Zt){Ec(zt%2?K:st,zt%4>=2),ht=rs.buildLayerMatrix(v);var ce=Uf(v,ht);ce<Ot&&(Zt=0,yt=er.cloneDeep(ht),Ot=ce)}wc(v,yt)};function bc(v,N,K){return er.map(N,function(st){return ef(v,st,K)})}function Ec(v,N){var K=new jf;er.forEach(v,function(st){var ht=st.graph().root,yt=Wf(st,ht,K,N);er.forEach(yt.vs,function(Ot,zt){st.node(Ot).order=zt}),Xf(st,K,yt.vs)})}function wc(v,N){er.forEach(N,function(K){er.forEach(K,function(st,ht){v.node(st).order=ht})})}var Vl=Ga.Graph,nf=function(v){var N,K=rs.buildLayerMatrix(v),st=er.merge(ec(v,K),Hl(v,K)),ht={};er.forEach(["u","d"],function(Ot){N=Ot==="u"?K:er.values(K).reverse(),er.forEach(["l","r"],function(zt){zt==="r"&&(N=er.map(N,function(xe){return er.values(xe).reverse()}));var Zt=(Ot==="u"?v.predecessors:v.successors).bind(v),ce=Zl(v,N,st,Zt),Me=Ud(v,N,ce.root,ce.align,zt==="r");zt==="r"&&(Me=er.mapValues(Me,function(xe){return-xe})),ht[Ot+zt]=Me})});var yt=yu(v,ht);return Kl(ht,yt),$l(ht,v.graph().align)};function ec(v,N){var K={};return er.reduce(N,function(st,ht){var yt=0,Ot=0,zt=st.length,Zt=er.last(ht);return er.forEach(ht,function(ce,Me){var xe=function(fr,Vr){if(fr.node(Vr).dummy)return er.find(fr.predecessors(Vr),function(mr){return fr.node(mr).dummy})}(v,ce),Ye=xe?v.node(xe).order:zt;(xe||ce===Zt)&&(er.forEach(ht.slice(Ot,Me+1),function(fr){er.forEach(v.predecessors(fr),function(Vr){var mr=v.node(Vr),br=mr.order;!(br<yt||Ye<br)||mr.dummy&&v.node(fr).dummy||af(K,Vr,fr)})}),Ot=Me+1,yt=Ye)}),ht}),K}function Hl(v,N){var K={};function st(ht,yt,Ot,zt,Zt){var ce;er.forEach(er.range(yt,Ot),function(Me){ce=ht[Me],v.node(ce).dummy&&er.forEach(v.predecessors(ce),function(xe){var Ye=v.node(xe);Ye.dummy&&(Ye.order<zt||Ye.order>Zt)&&af(K,xe,ce)})})}return er.reduce(N,function(ht,yt){var Ot,zt=-1,Zt=0;return er.forEach(yt,function(ce,Me){if(v.node(ce).dummy==="border"){var xe=v.predecessors(ce);xe.length&&(Ot=v.node(xe[0]).order,st(yt,Zt,Me,zt,Ot),Zt=Me,zt=Ot)}st(yt,Zt,yt.length,Ot,ht.length)}),yt}),K}function af(v,N,K){if(N>K){var st=N;N=K,K=st}var ht=v[N];ht||(v[N]=ht={}),ht[K]=!0}function pd(v,N,K){if(N>K){var st=N;N=K,K=st}return er.has(v[N],K)}function Zl(v,N,K,st){var ht={},yt={},Ot={};return er.forEach(N,function(zt){er.forEach(zt,function(Zt,ce){ht[Zt]=Zt,yt[Zt]=Zt,Ot[Zt]=ce})}),er.forEach(N,function(zt){var Zt=-1;er.forEach(zt,function(ce){var Me=st(ce);if(Me.length)for(var xe=((Me=er.sortBy(Me,function(mr){return Ot[mr]})).length-1)/2,Ye=Math.floor(xe),fr=Math.ceil(xe);Ye<=fr;++Ye){var Vr=Me[Ye];yt[ce]===ce&&Zt<Ot[Vr]&&!pd(K,ce,Vr)&&(yt[Vr]=ce,yt[ce]=ht[ce]=ht[Vr],Zt=Ot[Vr])}})}),{root:ht,align:yt}}function Ud(v,N,K,st,ht){var yt={},Ot=function(ce,Me,xe,Ye){var fr=new Vl,Vr=ce.graph(),mr=function(br,Er,Mn){return function(Xn,Rn,da){var fa,wa=Xn.node(Rn),Ba=Xn.node(da),Da=0;if(Da+=wa.width/2,er.has(wa,"labelpos"))switch(wa.labelpos.toLowerCase()){case"l":fa=-wa.width/2;break;case"r":fa=wa.width/2}if(fa&&(Da+=Mn?fa:-fa),fa=0,Da+=(wa.dummy?Er:br)/2,Da+=(Ba.dummy?Er:br)/2,Da+=Ba.width/2,er.has(Ba,"labelpos"))switch(Ba.labelpos.toLowerCase()){case"l":fa=Ba.width/2;break;case"r":fa=-Ba.width/2}return fa&&(Da+=Mn?fa:-fa),fa=0,Da}}(Vr.nodesep,Vr.edgesep,Ye);return er.forEach(Me,function(br){var Er;er.forEach(br,function(Mn){var Xn=xe[Mn];if(fr.setNode(Xn),Er){var Rn=xe[Er],da=fr.edge(Rn,Xn);fr.setEdge(Rn,Xn,Math.max(mr(ce,Mn,Er),da||0))}Er=Mn})}),fr}(v,N,K,ht),zt=ht?"borderLeft":"borderRight";function Zt(ce,Me){for(var xe=Ot.nodes(),Ye=xe.pop(),fr={};Ye;)fr[Ye]?ce(Ye):(fr[Ye]=!0,xe.push(Ye),xe=xe.concat(Me(Ye))),Ye=xe.pop()}return Zt(function(ce){yt[ce]=Ot.inEdges(ce).reduce(function(Me,xe){return Math.max(Me,yt[xe.v]+Ot.edge(xe))},0)},Ot.predecessors.bind(Ot)),Zt(function(ce){var Me=Ot.outEdges(ce).reduce(function(Ye,fr){return Math.min(Ye,yt[fr.w]-Ot.edge(fr))},Number.POSITIVE_INFINITY),xe=v.node(ce);Me!==Number.POSITIVE_INFINITY&&xe.borderType!==zt&&(yt[ce]=Math.max(yt[ce],Me))},Ot.successors.bind(Ot)),er.forEach(st,function(ce){yt[ce]=yt[K[ce]]}),yt}function yu(v,N){return er.minBy(er.values(N),function(K){var st=Number.NEGATIVE_INFINITY,ht=Number.POSITIVE_INFINITY;return er.forIn(K,function(yt,Ot){var zt=function(Zt,ce){return Zt.node(ce).width}(v,Ot)/2;st=Math.max(yt+zt,st),ht=Math.min(yt-zt,ht)}),st-ht})}function Kl(v,N){var K=er.values(N),st=er.min(K),ht=er.max(K);er.forEach(["u","d"],function(yt){er.forEach(["l","r"],function(Ot){var zt,Zt=yt+Ot,ce=v[Zt];if(ce!==N){var Me=er.values(ce);(zt=Ot==="l"?st-er.min(Me):ht-er.max(Me))&&(v[Zt]=er.mapValues(ce,function(xe){return xe+zt}))}})})}function $l(v,N){return er.mapValues(v.ul,function(K,st){if(N)return v[N.toLowerCase()][st];var ht=er.sortBy(er.map(v,st));return(ht[1]+ht[2])/2})}var ql=nf,Ql=function(v){(function(N){var K=rs.buildLayerMatrix(N),st=N.graph().ranksep,ht=0;er.forEach(K,function(yt){var Ot=er.max(er.map(yt,function(zt){return N.node(zt).height}));er.forEach(yt,function(zt){N.node(zt).y=ht+Ot/2}),ht+=Ot+st})})(v=rs.asNonCompoundGraph(v)),er.forEach(ql(v),function(N,K){v.node(K).x=N})},yl=rs.normalizeRanks,gd=rs.removeEmptyRanks,ms=rs,xl=Ga.Graph,Sc=function(v,N){var K=N&&N.debugTiming?ms.time:ms.notime;K("layout",function(){var st=K("  buildLayoutGraph",function(){return function(ht){var yt=new xl({multigraph:!0,compound:!0}),Ot=rc(ht.graph());return yt.setGraph(er.merge({},Jl,Vi(Ot,xu),er.pick(Ot,Vf))),er.forEach(ht.nodes(),function(zt){var Zt=rc(ht.node(zt));yt.setNode(zt,er.defaults(Vi(Zt,of),tu)),yt.setParent(zt,ht.parent(zt))}),er.forEach(ht.edges(),function(zt){var Zt=rc(ht.edge(zt));yt.setEdge(zt,er.merge({},bu,Vi(Zt,Es),er.pick(Zt,Xo)))}),yt}(v)});K("  runLayout",function(){(function(ht,yt){yt("    makeSpaceForEdgeLabels",function(){(function(Ot){var zt=Ot.graph();zt.ranksep/=2,er.forEach(Ot.edges(),function(Zt){var ce=Ot.edge(Zt);ce.minlen*=2,ce.labelpos.toLowerCase()!=="c"&&(zt.rankdir==="TB"||zt.rankdir==="BT"?ce.width+=ce.labeloffset:ce.height+=ce.labeloffset)})})(ht)}),yt("    removeSelfEdges",function(){(function(Ot){er.forEach(Ot.edges(),function(zt){if(zt.v===zt.w){var Zt=Ot.node(zt.v);Zt.selfEdges||(Zt.selfEdges=[]),Zt.selfEdges.push({e:zt,label:Ot.edge(zt)}),Ot.removeEdge(zt)}})})(ht)}),yt("    acyclic",function(){qc.run(ht)}),yt("    nestingGraph.run",function(){Wl.run(ht)}),yt("    rank",function(){dd(ms.asNonCompoundGraph(ht))}),yt("    injectEdgeLabelProxies",function(){(function(Ot){er.forEach(Ot.edges(),function(zt){var Zt=Ot.edge(zt);if(Zt.width&&Zt.height){var ce=Ot.node(zt.v),Me={rank:(Ot.node(zt.w).rank-ce.rank)/2+ce.rank,e:zt};ms.addDummyNode(Ot,"edge-proxy",Me,"_ep")}})})(ht)}),yt("    removeEmptyRanks",function(){gd(ht)}),yt("    nestingGraph.cleanup",function(){Wl.cleanup(ht)}),yt("    normalizeRanks",function(){yl(ht)}),yt("    assignRankMinMax",function(){(function(Ot){var zt=0;er.forEach(Ot.nodes(),function(Zt){var ce=Ot.node(Zt);ce.borderTop&&(ce.minRank=Ot.node(ce.borderTop).rank,ce.maxRank=Ot.node(ce.borderBottom).rank,zt=er.max(zt,ce.maxRank))}),Ot.graph().maxRank=zt})(ht)}),yt("    removeEdgeLabelProxies",function(){(function(Ot){er.forEach(Ot.nodes(),function(zt){var Zt=Ot.node(zt);Zt.dummy==="edge-proxy"&&(Ot.edge(Zt.e).labelRank=Zt.rank,Ot.removeNode(zt))})})(ht)}),yt("    normalize.run",function(){Du.run(ht)}),yt("    parentDummyChains",function(){hd(ht)}),yt("    addBorderSegments",function(){vd(ht)}),yt("    order",function(){rf(ht)}),yt("    insertSelfEdges",function(){(function(Ot){var zt=ms.buildLayerMatrix(Ot);er.forEach(zt,function(Zt){var ce=0;er.forEach(Zt,function(Me,xe){var Ye=Ot.node(Me);Ye.order=xe+ce,er.forEach(Ye.selfEdges,function(fr){ms.addDummyNode(Ot,"selfedge",{width:fr.label.width,height:fr.label.height,rank:Ye.rank,order:xe+ ++ce,e:fr.e,label:fr.label},"_se")}),delete Ye.selfEdges})})})(ht)}),yt("    adjustCoordinateSystem",function(){Qc.adjust(ht)}),yt("    position",function(){Ql(ht)}),yt("    positionSelfEdges",function(){(function(Ot){er.forEach(Ot.nodes(),function(zt){var Zt=Ot.node(zt);if(Zt.dummy==="selfedge"){var ce=Ot.node(Zt.e.v),Me=ce.x+ce.width/2,xe=ce.y,Ye=Zt.x-Me,fr=ce.height/2;Ot.setEdge(Zt.e,Zt.label),Ot.removeNode(zt),Zt.label.points=[{x:Me+2*Ye/3,y:xe-fr},{x:Me+5*Ye/6,y:xe-fr},{x:Me+Ye,y:xe},{x:Me+5*Ye/6,y:xe+fr},{x:Me+2*Ye/3,y:xe+fr}],Zt.label.x=Zt.x,Zt.label.y=Zt.y}})})(ht)}),yt("    removeBorderNodes",function(){(function(Ot){er.forEach(Ot.nodes(),function(zt){if(Ot.children(zt).length){var Zt=Ot.node(zt),ce=Ot.node(Zt.borderTop),Me=Ot.node(Zt.borderBottom),xe=Ot.node(er.last(Zt.borderLeft)),Ye=Ot.node(er.last(Zt.borderRight));Zt.width=Math.abs(Ye.x-xe.x),Zt.height=Math.abs(Me.y-ce.y),Zt.x=xe.x+Zt.width/2,Zt.y=ce.y+Zt.height/2}}),er.forEach(Ot.nodes(),function(zt){Ot.node(zt).dummy==="border"&&Ot.removeNode(zt)})})(ht)}),yt("    normalize.undo",function(){Du.undo(ht)}),yt("    fixupEdgeLabelCoords",function(){(function(Ot){er.forEach(Ot.edges(),function(zt){var Zt=Ot.edge(zt);if(er.has(Zt,"x"))switch(Zt.labelpos!=="l"&&Zt.labelpos!=="r"||(Zt.width-=Zt.labeloffset),Zt.labelpos){case"l":Zt.x-=Zt.width/2+Zt.labeloffset;break;case"r":Zt.x+=Zt.width/2+Zt.labeloffset}})})(ht)}),yt("    undoCoordinateSystem",function(){Qc.undo(ht)}),yt("    translateGraph",function(){(function(Ot){var zt=Number.POSITIVE_INFINITY,Zt=0,ce=Number.POSITIVE_INFINITY,Me=0,xe=Ot.graph(),Ye=xe.marginx||0,fr=xe.marginy||0;function Vr(mr){var br=mr.x,Er=mr.y,Mn=mr.width,Xn=mr.height;zt=Math.min(zt,br-Mn/2),Zt=Math.max(Zt,br+Mn/2),ce=Math.min(ce,Er-Xn/2),Me=Math.max(Me,Er+Xn/2)}er.forEach(Ot.nodes(),function(mr){Vr(Ot.node(mr))}),er.forEach(Ot.edges(),function(mr){var br=Ot.edge(mr);er.has(br,"x")&&Vr(br)}),zt-=Ye,ce-=fr,er.forEach(Ot.nodes(),function(mr){var br=Ot.node(mr);br.x-=zt,br.y-=ce}),er.forEach(Ot.edges(),function(mr){var br=Ot.edge(mr);er.forEach(br.points,function(Er){Er.x-=zt,Er.y-=ce}),er.has(br,"x")&&(br.x-=zt),er.has(br,"y")&&(br.y-=ce)}),xe.width=Zt-zt+Ye,xe.height=Me-ce+fr})(ht)}),yt("    assignNodeIntersects",function(){(function(Ot){er.forEach(Ot.edges(),function(zt){var Zt,ce,Me=Ot.edge(zt),xe=Ot.node(zt.v),Ye=Ot.node(zt.w);Me.points?(Zt=Me.points[0],ce=Me.points[Me.points.length-1]):(Me.points=[],Zt=Ye,ce=xe),Me.points.unshift(ms.intersectRect(xe,Zt)),Me.points.push(ms.intersectRect(Ye,ce))})})(ht)}),yt("    reversePoints",function(){(function(Ot){er.forEach(Ot.edges(),function(zt){var Zt=Ot.edge(zt);Zt.reversed&&Zt.points.reverse()})})(ht)}),yt("    acyclic.undo",function(){qc.undo(ht)})})(st,K)}),K("  updateInputGraph",function(){(function(ht,yt){er.forEach(ht.nodes(),function(Ot){var zt=ht.node(Ot),Zt=yt.node(Ot);zt&&(zt.x=Zt.x,zt.y=Zt.y,yt.children(Ot).length&&(zt.width=Zt.width,zt.height=Zt.height))}),er.forEach(ht.edges(),function(Ot){var zt=ht.edge(Ot),Zt=yt.edge(Ot);zt.points=Zt.points,er.has(Zt,"x")&&(zt.x=Zt.x,zt.y=Zt.y)}),ht.graph().width=yt.graph().width,ht.graph().height=yt.graph().height})(v,st)})})},xu=["nodesep","edgesep","ranksep","marginx","marginy"],Jl={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},Vf=["acyclicer","ranker","rankdir","align"],of=["width","height"],tu={width:0,height:0},Es=["minlen","weight","width","height","labeloffset"],bu={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},Xo=["labelpos"];function Vi(v,N){return er.mapValues(er.pick(v,N),Number)}function rc(v){var N={};return er.forEach(v,function(K,st){N[st.toLowerCase()]=K}),N}var Mc=Ga.Graph,md={graphlib:Ga,layout:Sc,debug:{debugOrdering:function(v){var N=rs.buildLayerMatrix(v),K=new Mc({compound:!0,multigraph:!0}).setGraph({});return er.forEach(v.nodes(),function(st){K.setNode(st,{label:st}),K.setParent(st,"layer"+v.node(st).rank)}),er.forEach(v.edges(),function(st){K.setEdge(st.v,st.w,{},st.name)}),er.forEach(N,function(st,ht){var yt="layer"+ht;K.setNode(yt,{rank:"same"}),er.reduce(st,function(Ot,zt){return K.setEdge(Ot,zt,{style:"invis"}),zt})}),K}},util:{time:rs.time,notime:rs.notime},version:"0.8.5"},Hf=md.graphlib,hs=md.layout;class td{constructor(N){this.cardinality=1,this.include=p.UNSPECIFIED,this.isGroupNode=!1,this.parentNode=null,this.type=P.NODE,this.name=N.name,this.attr=N.attr||{},this.inputs=N.inputs,this.path=N.path||[],this.width=N.width,this.height=N.height}}class ed{constructor(){this.nodes={},this.edges=[],this.nodes={},this.edges=[]}}function yd(v){const N=new ed;return v.nodes.map(K=>new td(K)).forEach(K=>{N.nodes[K.name]=K,K.inputs.forEach(st=>{(function(ht,yt,Ot){Ot.name!==yt.name&&ht.edges.push(Object.assign(Object.assign({},Ot.attr),{v:Ot.name,w:yt.name}))})(N,K,st)})}),N}class Nu{constructor(N,K={}){this.attr=null,this.bridgeGraph=null,this.cardinality=0,this.depth=1,this.include=p.UNSPECIFIED,this.isGroupNode=!0,this.parentNode=null,this.type=P.META,this.path=[],this.name=N,this.metaGraph=_c(N,m.META,K)}getFirstChild(){return this.metaGraph.node(this.metaGraph.nodes()[0])}getChildren(){return this.metaGraph.nodes().map(N=>this.metaGraph.node(N))}leaves(){let N,K=[],st=[this];for(;st.length;){let ht=st.shift();ht.isGroupNode?(N=ht.metaGraph,N.nodes().forEach(yt=>st.push(N.node(yt)))):K.push(ht.name)}return K}}class rd{constructor(N,K){this.v=N,this.w=K,this.baseEdgeList=[],this.inbound=null,this.name=null}addBaseEdge(N,K){this.baseEdgeList.push(N)}}function bl(v,N={}){return new Nu(v,N)}function Zf(v,N){return new rd(v,N)}function _c(v,N,K){const st=K||{},ht=new Hf.Graph(st);return ht.setGraph({name:v,rankdir:st.rankdir,type:N,align:st.align}),ht}class El{constructor(N={}){this.graphOptions=N,this.index={},this.graphOptions.compound=!0,this.root=bl(T,this.graphOptions),this.index[T]=this.root}getNodeMap(){return this.index}node(N){return this.index[N]}setNode(N,K){this.index[N]=K}getBridgeGraph(N){const K=this.index[N];if(!K)throw Error("Could not find node in hierarchy: "+N);if(!("metaGraph"in K))return null;const st=K;if(st.bridgeGraph)return st.bridgeGraph;const ht=_c(L,m.BRIDGE,this.graphOptions);if(st.bridgeGraph=ht,!K.parentNode||!("metaGraph"in K.parentNode))return ht;const yt=K.parentNode;return[yt.metaGraph,this.getBridgeGraph(yt.name)].forEach(Ot=>{Ot.edges().filter(zt=>zt.v===N||zt.w===N).forEach(zt=>{const Zt=zt.w===N;Ot.edge(zt).baseEdgeList.forEach(ce=>{const[Me,xe]=Zt?[ce.w,zt.v]:[ce.v,zt.w],Ye=this.getChildName(N,Me),fr={v:Zt?xe:Ye,w:Zt?Ye:xe};let Vr=ht.edge(fr);Vr||(Vr=Zf(fr.v,fr.w),Vr.inbound=Zt,ht.setEdge(fr.v,fr.w,Vr)),Vr.addBaseEdge(ce,this)})})}),ht}getChildName(N,K){let st=this.index[K];for(;st;){if(st.parentNode&&st.parentNode.name===N)return st.name;st=st.parentNode}throw Error("Could not find immediate child for descendant: "+K)}getPredecessors(N){const K=this.index[N];if(!K)throw Error("Could not find node with name: "+N);return this.getOneWayEdges(K,!0)}getSuccessors(N){const K=this.index[N];if(!K)throw Error("Could not find node with name: "+N);return this.getOneWayEdges(K,!1)}getOneWayEdges(N,K){const st=[];if(!N.parentNode||!N.parentNode.isGroupNode)return st;const ht=N.parentNode,yt=ht.metaGraph,Ot=this.getBridgeGraph(ht.name);return wl(yt,N,K,st),wl(Ot,N,K,st),st}}function Ru(v,N){const{rankDirection:K,align:st}=N,ht=new El({rankdir:K,align:st});return function(yt,Ot){Object.keys(Ot.nodes).forEach(zt=>{const Zt=Ot.nodes[zt],ce=Zt.path;let Me=yt.root;Me.depth=Math.max(ce.length,Me.depth);for(let xe=0;xe<ce.length&&(Me.depth=Math.max(Me.depth,ce.length-xe),Me.cardinality+=Zt.cardinality,xe!==ce.length-1);xe++){const Ye=ce[xe];let fr=yt.node(Ye);fr||(fr=bl(Ye,yt.graphOptions),fr.path=Zt.path.slice(0,xe+1),fr.parentNode=Me,yt.setNode(Ye,fr),Me.metaGraph.setNode(Ye,fr)),Me=fr}yt.setNode(Zt.name,Zt),Zt.parentNode=Me,Me.metaGraph.setNode(Zt.name,Zt)})}(ht,v),function(yt,Ot){const zt=yt.getNodeMap();let Zt=[],ce=[];const Me=(xe,Ye)=>{let fr=0;for(;xe;)Ye[fr++]=xe.name,xe=xe.parentNode;return fr-1};Ot.edges.forEach(xe=>{Zt=[],ce=[];let Ye=Me(Ot.nodes[xe.v],Zt),fr=Me(Ot.nodes[xe.w],ce);for(;Zt[Ye]===ce[fr];)if(Ye--,fr--,Ye<0||fr<0)throw Error("No difference found between ancestor paths.");const Vr=zt[Zt[Ye+1]],mr=Zt[Ye],br=ce[fr];let Er=Vr.metaGraph.edge(mr,br);Er||(Er=Zf(mr,br),Vr.metaGraph.setEdge(mr,br,Er)),Er.addBaseEdge(xe,yt)})}(ht,v),ht}function wl(v,N,K,st){(K?v.inEdges(N.name):v.outEdges(N.name)).forEach(ht=>{const yt=v.edge(ht);st.push(yt)})}class Kf{constructor(N){this.hierarchy=N,this.index={},this.hasSubHierarchy={},this.root=new Te(this.hierarchy.root,this.hierarchy.graphOptions),this.index[N.root.name]=this.root,this.buildSubHierarchy(N.root.name),this.root.expanded=!0}getRenderInfoNodes(){return Object.values(this.index)}getSubHierarchy(){return this.hasSubHierarchy}buildSubHierarchy(N){if(N in this.hasSubHierarchy)return;this.hasSubHierarchy[N]=!0;const K=this.index[N];if(K.node.type!==P.META)return;const st=K,ht=st.node.metaGraph,yt=st.coreGraph;ht.nodes().forEach(Me=>{const xe=this.getOrCreateRenderNodeByName(Me);yt.setNode(Me,xe)}),ht.edges().forEach(Me=>{const xe=ht.edge(Me),Ye=new Rt(xe);yt.setEdge(Me.v,Me.w,Ye)});const Ot=st.node.parentNode;if(!Ot)return;const zt=this.getRenderNodeByName(Ot.name),Zt=(Me,...xe)=>xe.concat([Me?"IN":"OUT"]).join("~~"),ce=this.hierarchy.getBridgeGraph(N);ce.edges().forEach(Me=>{const xe=ce.edge(Me),Ye=!!ht.node(Me.w),[fr,Vr]=Ye?[Me.w,Me.v]:[Me.v,Me.w],mr=da=>{const fa=Ye?{v:da,w:N}:{v:N,w:da};return zt.coreGraph.edge(fa)};let br=mr(Vr);br||(br=mr(Zt(Ye,Vr,Ot.name)));const Er=Zt(Ye,N),Mn=Zt(Ye,Vr,N);let Xn=yt.node(Mn);if(!Xn){let da=yt.node(Er);if(!da){const wa={name:Er,type:P.BRIDGE,isGroupNode:!1,cardinality:0,parentNode:null,include:p.UNSPECIFIED,inbound:Ye,attr:{}};da=new sf(wa),this.index[Er]=da,yt.setNode(Er,da)}const fa={name:Mn,type:P.BRIDGE,isGroupNode:!1,cardinality:1,parentNode:null,include:p.UNSPECIFIED,inbound:Ye,attr:{}};Xn=new sf(fa),this.index[Mn]=Xn,yt.setNode(Mn,Xn),yt.setParent(Mn,Er),da.node.cardinality++}const Rn=new Rt(xe);Rn.adjoiningMetaEdge=br,Ye?yt.setEdge(Mn,fr,Rn):yt.setEdge(fr,Mn,Rn)})}getOrCreateRenderNodeByName(N){if(!N)return null;if(N in this.index)return this.index[N];const K=this.getNodeByName(N);return K?(this.index[N]=K.isGroupNode?new Te(K,this.hierarchy.graphOptions):new sf(K),this.index[N]):null}getRenderNodeByName(N){return this.index[N]}getNodeByName(N){return this.hierarchy.node(N)}}class sf{constructor(N){this.node=N,this.expanded=!1,this.x=0,this.y=0,this.coreBox={width:0,height:0},this.outboxWidth=0,this.labelOffset=0,this.radius=0,this.labelHeight=0,this.paddingTop=0,this.paddingLeft=0,this.paddingRight=0,this.paddingBottom=0,this.width=N.width||0,this.height=N.height||0,this.displayName=N.name,this.attr=N.attr}}class Rt{constructor(N){this.metaEdge=N,this.adjoiningMetaEdge=null,this.weight=1,this.points=[]}}class Te extends sf{constructor(N,K){super(N);const st=N.metaGraph.graph();K.compound=!0,this.coreGraph=_c(st.name,m.CORE,K)}}function je(v,N){v.node.isGroupNode&&function(K,st){const ht=k(st);K.coreGraph.nodes().map(yt=>K.coreGraph.node(yt)).forEach(yt=>{var Ot,zt,Zt,ce,Me,xe;const{height:Ye,width:fr}=yt;switch(yt.node.type){case P.NODE:Object.assign(yt,ht.nodeSize.node),yt.height=Ye||ht.nodeSize.node.height,yt.width=fr||ht.nodeSize.node.width;break;case P.BRIDGE:Object.assign(yt,ht.nodeSize.bridge);break;case P.META:yt.expanded?je(yt,st):(Object.assign(yt,ht.nodeSize.meta),yt.height=ht.nodeSize.meta.height,yt.width=ht.nodeSize.meta.width);break;default:throw Error("Unrecognized node type: "+yt.node.type)}if(!yt.expanded){const Vr=yt.attr;(function(mr,br=!1){if(mr.coreBox.width=mr.width,mr.coreBox.height=mr.height,!br){const Er=`${mr.displayName}`.length,Mn=3;mr.width=Math.max(mr.coreBox.width,Er*Mn)}})(yt,st&&(yt.node.type===0&&!!(!((zt=(Ot=st==null?void 0:st.nodeSize)===null||Ot===void 0?void 0:Ot.meta)===null||zt===void 0)&&zt.width)||yt.node.type===1&&(!!(!((ce=(Zt=st==null?void 0:st.nodeSize)===null||Zt===void 0?void 0:Zt.node)===null||ce===void 0)&&ce.width)||!!Vr.width)||yt.node.type===2&&!!(!((xe=(Me=st==null?void 0:st.nodeSize)===null||Me===void 0?void 0:Me.bridge)===null||xe===void 0)&&xe.width)))}})}(v,N),v.node.type===P.META&&function(K,st){const ht=k(st),yt=ht.subScene.meta;Object.assign(K,yt);const{nodeSep:Ot,rankSep:zt,edgeSep:Zt,align:ce}=ht.graph.meta,Me={nodesep:Ot,ranksep:zt,edgesep:Zt,align:ce};Object.assign(K.coreBox,function(fr,Vr){const{ranksep:mr,nodesep:br,edgesep:Er,align:Mn}=Vr;Object.assign(fr.graph(),{ranksep:mr,nodesep:br,edgesep:Er,align:Mn});const Xn=[];if(fr.nodes().forEach(Ba=>{fr.node(Ba).node.type!==P.BRIDGE&&Xn.push(Ba)}),!Xn.length)return{width:0,height:0};hs(fr);let Rn=1/0,da=1/0,fa=-1/0,wa=-1/0;return Xn.forEach(Ba=>{const Da=fr.node(Ba),vo=.5*Da.width,Wa=Da.x-vo,Go=Da.x+vo;Rn=Wa<Rn?Wa:Rn,fa=Go>fa?Go:fa;const Hi=.5*Da.height,vi=Da.y-Hi,ao=Da.y+Hi;da=vi<da?vi:da,wa=ao>wa?ao:wa}),fr.edges().forEach(Ba=>{const Da=fr.edge(Ba),vo=fr.node(Da.metaEdge.v),Wa=fr.node(Da.metaEdge.w);if(Da.points.length===3&&function(vi){let ao=zr(vi[0],vi[1]);for(let Uo=1;Uo<vi.length-1;Uo++){const ns=zr(vi[Uo],vi[Uo+1]);if(Math.abs(ns-ao)>1)return!1;ao=ns}return!0}(Da.points)){if(vo!=null){const vi=vo.expanded?vo.x:rn(vo);Da.points[0].x=vi}if(Wa!=null){const vi=Wa.expanded?Wa.x:rn(Wa);Da.points[2].x=vi}Da.points=[Da.points[0],Da.points[1]]}const Go=Da.points[Da.points.length-2];Wa!=null&&(Da.points[Da.points.length-1]=Fr(Go,Wa));const Hi=Da.points[1];vo!=null&&(Da.points[0]=Fr(Hi,vo)),Da.points.forEach(vi=>{Rn=vi.x<Rn?vi.x:Rn,fa=vi.x>fa?vi.x:fa,da=vi.y<da?vi.y:da,wa=vi.y>wa?vi.y:wa})}),fr.nodes().forEach(Ba=>{const Da=fr.node(Ba);Da.x-=Rn,Da.y-=da}),fr.edges().forEach(Ba=>{fr.edge(Ba).points.forEach(Da=>{Da.x-=Rn,Da.y-=da})}),{width:fa-Rn,height:wa-da}}(K.coreGraph,Me));let xe=0;K.coreGraph.nodeCount()>0&&xe++;const Ye=xe<=1?0:xe;K.coreBox.width+=Ye+Ye,K.coreBox.height=yt.labelHeight+K.coreBox.height,K.width=K.coreBox.width+yt.paddingLeft+yt.paddingRight,K.height=K.paddingTop+K.coreBox.height+K.paddingBottom}(v,N)}function zr(v,N){const K=N.x-v.x,st=N.y-v.y;return 180*Math.atan(st/K)/Math.PI}function rn(v){return v.expanded?v.x:v.x-v.width/2+0+v.coreBox.width/2}function Fr(v,N){const K=N.expanded?N.x:rn(N),st=N.y,ht=v.x-K,yt=v.y-st;let Ot,zt,Zt=N.expanded?N.width:N.coreBox.width,ce=N.expanded?N.height:N.coreBox.height;return Math.abs(yt)*Zt/2>Math.abs(ht)*ce/2?(yt<0&&(ce=-ce),Ot=yt===0?0:ce/2*ht/yt,zt=ce/2):(ht<0&&(Zt=-Zt),Ot=Zt/2,zt=ht===0?0:Zt/2*yt/ht),{x:K+Ot,y:st+zt}}function Xr(v,N,K){var st,ht,yt,Ot;const zt=v.nodes.filter((xe,Ye,fr)=>fr.findIndex(Vr=>Vr.id===xe.id)!==Ye).map(xe=>xe.id);if(zt.length)throw new Error(`Duplicated ids found: ${zt.join(", ")}`);const Zt=function(xe){const Ye={nodes:[]},fr=xe.compound,Vr=Object.keys(fr||{}),mr=new Map,br=(Mn,Xn=[])=>{if(mr.has(Mn))return mr.get(Mn);for(let Rn=0;Rn<Vr.length;Rn++){let da=Vr[Rn];if(fr&&fr[da].indexOf(Mn)!==-1)return Xn.unshift(da),br(da,Xn)}return Xn.length===0&&mr.set(Mn,Xn),Xn},Er=Mn=>xe.edges.filter(Xn=>Xn.w===Mn).map(Xn=>({name:Xn.v}));return xe.nodes.forEach(Mn=>{const Xn=Mn.id,Rn=[...br(Xn),Xn];let da=Er(Xn);Ye.nodes.push({name:Xn,path:Rn,inputs:da,width:Mn.width,height:Mn.height,attr:Object.assign({},Mn)})}),Ye}(v),ce=function(xe,Ye){const fr=(mr,br)=>{for(let Er of br.values())if(Er.includes(mr))return!0;return!1},Vr=(mr,br=[])=>{if(Object.keys(mr).length===0)return[...new Set(br)];const Er=new Map(Object.keys(mr).map(Xn=>[Xn,mr[Xn]])),Mn={};for(let[Xn,Rn]of Er)fr(Xn,Er)?Mn[Xn]=Rn:br=br.concat(Xn,Rn);return Vr(Mn,br)};return Vr(xe).filter(mr=>Ye.includes(mr))}(v.compound||{},(N==null?void 0:N.expanded)||[]),Me=function(xe,Ye){return function(fr){return new Kf(fr)}(Ru(yd(xe),Ye))}(Zt,{rankDirection:((ht=(st=K==null?void 0:K.graph)===null||st===void 0?void 0:st.meta)===null||ht===void 0?void 0:ht.rankDir)||(N==null?void 0:N.rankDirection)||b.graph.meta.rankDir,align:((Ot=(yt=K==null?void 0:K.graph)===null||yt===void 0?void 0:yt.meta)===null||Ot===void 0?void 0:Ot.align)||b.graph.meta.align});return function(xe,Ye){Ye.forEach(fr=>{const Vr=xe.getRenderInfoNodes().find(Er=>Er.displayName===fr);let mr=Vr&&Vr.node&&Vr.node.name||"";const br=xe.getRenderNodeByName(mr);if(!br)throw new Error(`No nodes found: ${mr}`);br.expanded=!0,xe.buildSubHierarchy(mr)})}(Me,ce),je(Me.root,K),Tn(Me.root)}function bn(v,N=!1){const K=JSON.parse(JSON.stringify(v)),st={nodes:[K],edges:[...K.edges]};return K.nodes.forEach(function ht(yt){(yt.type===0||yt.type===1)&&st.nodes.push(yt),yt.type===0&&(st.edges=st.edges.concat(yt.edges)),Array.isArray(yt.nodes)&&yt.nodes.forEach(ht)}),N&&st.nodes.forEach(ht=>{const yt=st.nodes.find(Ot=>Ot.id===ht.parentNodeName);if(yt){const Ot=yt.x-yt.width/2+yt.paddingLeft,zt=yt.y-yt.height/2+yt.labelHeight+yt.paddingTop;yt.id!==T&&(ht.x+=Ot,ht.y+=zt),ht.type===0&&ht.edges.forEach(Zt=>{Zt.points.forEach(ce=>{ce.x+=ht.x-ht.width/2+ht.paddingLeft,ce.y+=ht.y-ht.height/2+ht.labelHeight+ht.paddingTop})})}}),st}function wn(v,N,K,st){var ht,yt;let Ot=[];const zt=((ht=K.find(xe=>xe.id===v))===null||ht===void 0?void 0:ht.path)||[],Zt=((yt=K.find(xe=>xe.id===N))===null||yt===void 0?void 0:yt.path)||[],ce=[T,...zt].slice(0,zt.length).reverse(),Me=[T,...Zt].slice(0,Zt.length);return ce.forEach(xe=>{const Ye=K.find(fr=>fr.id===xe);Ot=Ot.concat(Ye.edges.filter(fr=>fr.baseEdgeList.some(Vr=>Vr.v===((st==null?void 0:st.v)||v)&&Vr.w===((st==null?void 0:st.w)||N))))}),Me.filter(xe=>!ce.includes(xe)).forEach(xe=>{const Ye=K.find(fr=>fr.id===xe);Ot=Ot.concat(Ye.edges.filter(fr=>fr.baseEdgeList.some(Vr=>Vr.v===((st==null?void 0:st.v)||v)&&Vr.w===((st==null?void 0:st.w)||N))))}),Ot}function Tn(v){const N=v.coreGraph.nodes().map(st=>v.coreGraph.node(st));return Object.assign(Object.assign({},Sn(v)),{expanded:v.expanded,nodes:v.expanded?(K=N,K.map(st=>st.node.type===P.META?Tn(st):Sn(st))):[],edges:v.expanded?Nn(v):[]});var K}function Sn(v){return{id:v.node.name,name:v.node.name,type:v.node.type,cardinality:v.node.cardinality,attr:v.attr,parentNodeName:v.node.parentNode?v.node.parentNode.name:null,coreBox:Object.assign({},v.coreBox),x:v.x,y:v.y,width:v.width,height:v.height,radius:v.radius,labelHeight:v.labelHeight,labelOffset:v.labelOffset,outboxWidth:v.outboxWidth,paddingLeft:v.paddingLeft,paddingTop:v.paddingTop,paddingRight:v.paddingRight,paddingBottom:v.paddingBottom,path:v.node.path}}function Nn(v){return v.coreGraph.edges().map(N=>({renderInfoEdge:v.coreGraph.edge(N),edge:N})).filter(({renderInfoEdge:N})=>N.metaEdge).map(({edge:N,renderInfoEdge:K})=>{const st=function(ht,yt){const Ot=yt.points.map(zt=>Object.assign({},zt));if(yt.adjoiningMetaEdge){const zt=yt.adjoiningMetaEdge.points,Zt=yt.metaEdge.inbound,ce=Zt?zt[zt.length-1]:zt[0],Me=Ot[Zt?0:Ot.length-1],xe=ht.x-ht.width/2,Ye=ht.y-ht.height/2,fr=ce.x-xe,Vr=ce.y-Ye,mr=-ht.paddingLeft,br=-(ht.paddingTop+ht.labelHeight);Me.x=fr+mr,Me.y=Vr+br}return Ot}(v,K);return{adjoiningEdge:K.adjoiningMetaEdge?{w:K.adjoiningMetaEdge.metaEdge.w,v:K.adjoiningMetaEdge.metaEdge.v}:null,inbound:K.metaEdge.inbound,w:N.w,v:N.v,points:st,weight:K.weight,baseEdgeList:K.metaEdge.baseEdgeList,parentNodeName:v.node.name}})}},533852:function(Ve,z,C){(function(b,k){Ve.exports=k(C(727484))})(this,function(b){"use strict";function k(L){return L&&typeof L=="object"&&"default"in L?L:{default:L}}var w=k(b),T={name:"zh-cn",weekdays:"\u661F\u671F\u65E5_\u661F\u671F\u4E00_\u661F\u671F\u4E8C_\u661F\u671F\u4E09_\u661F\u671F\u56DB_\u661F\u671F\u4E94_\u661F\u671F\u516D".split("_"),weekdaysShort:"\u5468\u65E5_\u5468\u4E00_\u5468\u4E8C_\u5468\u4E09_\u5468\u56DB_\u5468\u4E94_\u5468\u516D".split("_"),weekdaysMin:"\u65E5_\u4E00_\u4E8C_\u4E09_\u56DB_\u4E94_\u516D".split("_"),months:"\u4E00\u6708_\u4E8C\u6708_\u4E09\u6708_\u56DB\u6708_\u4E94\u6708_\u516D\u6708_\u4E03\u6708_\u516B\u6708_\u4E5D\u6708_\u5341\u6708_\u5341\u4E00\u6708_\u5341\u4E8C\u6708".split("_"),monthsShort:"1\u6708_2\u6708_3\u6708_4\u6708_5\u6708_6\u6708_7\u6708_8\u6708_9\u6708_10\u6708_11\u6708_12\u6708".split("_"),ordinal:function(L,P){return P==="W"?L+"\u5468":L+"\u65E5"},weekStart:1,yearStart:4,formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYY\u5E74M\u6708D\u65E5",LLL:"YYYY\u5E74M\u6708D\u65E5Ah\u70B9mm\u5206",LLLL:"YYYY\u5E74M\u6708D\u65E5ddddAh\u70B9mm\u5206",l:"YYYY/M/D",ll:"YYYY\u5E74M\u6708D\u65E5",lll:"YYYY\u5E74M\u6708D\u65E5 HH:mm",llll:"YYYY\u5E74M\u6708D\u65E5dddd HH:mm"},relativeTime:{future:"%s\u5185",past:"%s\u524D",s:"\u51E0\u79D2",m:"1 \u5206\u949F",mm:"%d \u5206\u949F",h:"1 \u5C0F\u65F6",hh:"%d \u5C0F\u65F6",d:"1 \u5929",dd:"%d \u5929",M:"1 \u4E2A\u6708",MM:"%d \u4E2A\u6708",y:"1 \u5E74",yy:"%d \u5E74"},meridiem:function(L,P){var p=100*L+P;return p<600?"\u51CC\u6668":p<900?"\u65E9\u4E0A":p<1100?"\u4E0A\u5348":p<1300?"\u4E2D\u5348":p<1800?"\u4E0B\u5348":"\u665A\u4E0A"}};return w.default.locale(T,null,!0),T})},414144:function(Ve,z){var C,b,k;(function(w,T){if(!0)b=[z,Ve],C=T,k=typeof C=="function"?C.apply(z,b):C,k!==void 0&&(Ve.exports=k);else var L})(this,function(w,T){"use strict";var L={timeout:5e3,jsonpCallback:"callback",jsonpCallbackFunction:null};function P(){return"jsonp_"+Date.now()+"_"+Math.ceil(Math.random()*1e5)}function p(x){try{delete window[x]}catch(g){window[x]=void 0}}function m(x){var g=document.getElementById(x);g&&document.getElementsByTagName("head")[0].removeChild(g)}function S(x){var g=arguments.length<=1||arguments[1]===void 0?{}:arguments[1],A=x,E=g.timeout||L.timeout,D=g.jsonpCallback||L.jsonpCallback,F=void 0;return new Promise(function(y,h){var Y=g.jsonpCallbackFunction||P(),$=D+"_"+Y;window[Y]=function(W){y({ok:!0,json:function(){return Promise.resolve(W)}}),F&&clearTimeout(F),m($),p(Y)},A+=A.indexOf("?")===-1?"?":"&";var U=document.createElement("script");U.setAttribute("src",""+A+D+"="+Y),g.charset&&U.setAttribute("charset",g.charset),g.nonce&&U.setAttribute("nonce",g.nonce),g.referrerPolicy&&U.setAttribute("referrerPolicy",g.referrerPolicy),U.id=$,document.getElementsByTagName("head")[0].appendChild(U),F=setTimeout(function(){h(new Error("JSONP request to "+x+" timed out")),p(Y),m($),window[Y]=function(){p(Y)}},E),U.onerror=function(){h(new Error("JSONP request to "+x+" failed")),p(Y),m($),F&&clearTimeout(F)}})}T.exports=S})},73633:function(Ve,z,C){"use strict";C.r(z),C.d(z,{ARRAY_TYPE:function(){return k},EPSILON:function(){return b},RANDOM:function(){return w},equals:function(){return p},setMatrixArrayType:function(){return T},toRadian:function(){return P}});var b=1e-6,k=typeof Float32Array!="undefined"?Float32Array:Array,w=Math.random;function T(m){k=m}var L=Math.PI/180;function P(m){return m*L}function p(m,S){return Math.abs(m-S)<=b*Math.max(1,Math.abs(m),Math.abs(S))}Math.hypot||(Math.hypot=function(){for(var m=0,S=arguments.length;S--;)m+=arguments[S]*arguments[S];return Math.sqrt(m)})},858204:function(Ve,z,C){"use strict";C.r(z),C.d(z,{glMatrix:function(){return p},mat2:function(){return b},mat2d:function(){return k},mat3:function(){return Ar},mat4:function(){return w},quat:function(){return L},quat2:function(){return P},vec2:function(){return ss},vec3:function(){return Pr},vec4:function(){return T}});var b={};C.r(b),C.d(b,{LDU:function(){return tt},add:function(){return rt},adjoint:function(){return y},clone:function(){return S},copy:function(){return x},create:function(){return m},determinant:function(){return h},equals:function(){return xt},exactEquals:function(){return ot},frob:function(){return Q},fromRotation:function(){return W},fromScaling:function(){return V},fromValues:function(){return A},identity:function(){return g},invert:function(){return F},mul:function(){return Ct},multiply:function(){return Y},multiplyScalar:function(){return pt},multiplyScalarAndAdd:function(){return Xt},rotate:function(){return $},scale:function(){return U},set:function(){return E},str:function(){return H},sub:function(){return At},subtract:function(){return ct},transpose:function(){return D}});var k={};C.r(k),C.d(k,{add:function(){return ae},clone:function(){return q},copy:function(){return bt},create:function(){return Z},determinant:function(){return Pt},equals:function(){return Tt},exactEquals:function(){return we},frob:function(){return Wt},fromRotation:function(){return ie},fromScaling:function(){return Dt},fromTranslation:function(){return ne},fromValues:function(){return nt},identity:function(){return _t},invert:function(){return It},mul:function(){return Le},multiply:function(){return Et},multiplyScalar:function(){return be},multiplyScalarAndAdd:function(){return Qt},rotate:function(){return Nt},scale:function(){return $t},set:function(){return vt},str:function(){return pe},sub:function(){return Mr},subtract:function(){return Se},translate:function(){return ue}});var w={};C.r(w),C.d(w,{add:function(){return me},adjoint:function(){return qe},clone:function(){return Br},copy:function(){return dn},create:function(){return Ir},determinant:function(){return Cr},equals:function(){return cn},exactEquals:function(){return Lr},frob:function(){return De},fromQuat:function(){return dt},fromQuat2:function(){return qt},fromRotation:function(){return Cn},fromRotationTranslation:function(){return Ze},fromRotationTranslationScale:function(){return kt},fromRotationTranslationScaleOrigin:function(){return Kt},fromScaling:function(){return Wn},fromTranslation:function(){return on},fromValues:function(){return an},fromXRotation:function(){return On},fromYRotation:function(){return jn},fromZRotation:function(){return at},frustum:function(){return Ut},getRotation:function(){return Ce},getScaling:function(){return St},getTranslation:function(){return Jt},identity:function(){return Un},invert:function(){return xr},lookAt:function(){return Ft},mul:function(){return $e},multiply:function(){return tn},multiplyScalar:function(){return hr},multiplyScalarAndAdd:function(){return Ke},ortho:function(){return X},orthoNO:function(){return O},orthoZO:function(){return mt},perspective:function(){return it},perspectiveFromFieldOfView:function(){return M},perspectiveNO:function(){return J},perspectiveZO:function(){return R},rotate:function(){return Pn},rotateX:function(){return _r},rotateY:function(){return un},rotateZ:function(){return An},scale:function(){return _n},set:function(){return Ln},str:function(){return re},sub:function(){return lr},subtract:function(){return Xe},targetTo:function(){return Bt},translate:function(){return vn},transpose:function(){return Yn}});var T={};C.r(T),C.d(T,{add:function(){return ye},ceil:function(){return en},clone:function(){return fe},copy:function(){return ve},create:function(){return Dr},cross:function(){return oo},dist:function(){return Ai},distance:function(){return xa},div:function(){return Yo},divide:function(){return pr},dot:function(){return io},equals:function(){return ro},exactEquals:function(){return Wo},floor:function(){return Fn},forEach:function(){return de},fromValues:function(){return jt},inverse:function(){return Si},len:function(){return oa},length:function(){return Wi},lerp:function(){return Ea},max:function(){return ea},min:function(){return ln},mul:function(){return Oo},multiply:function(){return sr},negate:function(){return ti},normalize:function(){return Xi},random:function(){return so},round:function(){return fn},scale:function(){return Hn},scaleAndAdd:function(){return la},set:function(){return Ie},sqrDist:function(){return $i},sqrLen:function(){return ee},squaredDistance:function(){return ba},squaredLength:function(){return ri},str:function(){return uo},sub:function(){return go},subtract:function(){return ze},transformMat4:function(){return Io},transformQuat:function(){return ii},zero:function(){return Yi}});var L={};C.r(L),C.d(L,{add:function(){return Mi},calculateW:function(){return qn},clone:function(){return ka},conjugate:function(){return ei},copy:function(){return Oa},create:function(){return Be},dot:function(){return qi},equals:function(){return Ya},exactEquals:function(){return fo},exp:function(){return ga},fromEuler:function(){return Di},fromMat3:function(){return Fa},fromValues:function(){return ja},getAngle:function(){return Sr},getAxisAngle:function(){return Nr},identity:function(){return or},invert:function(){return ci},len:function(){return es},length:function(){return ts},lerp:function(){return mo},ln:function(){return ya},mul:function(){return Ri},multiply:function(){return qr},normalize:function(){return Fi},pow:function(){return di},random:function(){return ua},rotateX:function(){return hn},rotateY:function(){return Dn},rotateZ:function(){return sa},rotationTo:function(){return yo},scale:function(){return co},set:function(){return Ni},setAxes:function(){return ji},setAxisAngle:function(){return Rr},slerp:function(){return Ma},sqlerp:function(){return ko},sqrLen:function(){return ni},squaredLength:function(){return no},str:function(){return yi}});var P={};C.r(P),C.d(P,{add:function(){return Lo},clone:function(){return zi},conjugate:function(){return fu},copy:function(){return Ds},create:function(){return is},dot:function(){return Vs},equals:function(){return Zo},exactEquals:function(){return bo},fromMat4:function(){return ls},fromRotation:function(){return fs},fromRotationTranslation:function(){return Cs},fromRotationTranslationValues:function(){return cs},fromTranslation:function(){return xo},fromValues:function(){return Bo},getDual:function(){return nr},getReal:function(){return Ge},getTranslation:function(){return pn},identity:function(){return Aa},invert:function(){return Hs},len:function(){return Ls},length:function(){return gs},lerp:function(){return qs},mul:function(){return Bs},multiply:function(){return ds},normalize:function(){return _u},rotateAroundAxis:function(){return Qi},rotateByQuatAppend:function(){return Ho},rotateByQuatPrepend:function(){return ks},rotateX:function(){return qa},rotateY:function(){return ki},rotateZ:function(){return Do},scale:function(){return ps},set:function(){return Yt},setDual:function(){return Zr},setReal:function(){return gr},sqrLen:function(){return os},squaredLength:function(){return Fs},str:function(){return Cu},translate:function(){return $n}});var p=C(73633);function m(){var d=new p.ARRAY_TYPE(4);return p.ARRAY_TYPE!=Float32Array&&(d[1]=0,d[2]=0),d[0]=1,d[3]=1,d}function S(d){var G=new p.ARRAY_TYPE(4);return G[0]=d[0],G[1]=d[1],G[2]=d[2],G[3]=d[3],G}function x(d,G){return d[0]=G[0],d[1]=G[1],d[2]=G[2],d[3]=G[3],d}function g(d){return d[0]=1,d[1]=0,d[2]=0,d[3]=1,d}function A(d,G,wt,Gt){var te=new p.ARRAY_TYPE(4);return te[0]=d,te[1]=G,te[2]=wt,te[3]=Gt,te}function E(d,G,wt,Gt,te){return d[0]=G,d[1]=wt,d[2]=Gt,d[3]=te,d}function D(d,G){if(d===G){var wt=G[1];d[1]=G[2],d[2]=wt}else d[0]=G[0],d[1]=G[2],d[2]=G[1],d[3]=G[3];return d}function F(d,G){var wt=G[0],Gt=G[1],te=G[2],he=G[3],ge=wt*he-te*Gt;return ge?(ge=1/ge,d[0]=he*ge,d[1]=-Gt*ge,d[2]=-te*ge,d[3]=wt*ge,d):null}function y(d,G){var wt=G[0];return d[0]=G[3],d[1]=-G[1],d[2]=-G[2],d[3]=wt,d}function h(d){return d[0]*d[3]-d[2]*d[1]}function Y(d,G,wt){var Gt=G[0],te=G[1],he=G[2],ge=G[3],Oe=wt[0],Fe=wt[1],He=wt[2],ur=wt[3];return d[0]=Gt*Oe+he*Fe,d[1]=te*Oe+ge*Fe,d[2]=Gt*He+he*ur,d[3]=te*He+ge*ur,d}function $(d,G,wt){var Gt=G[0],te=G[1],he=G[2],ge=G[3],Oe=Math.sin(wt),Fe=Math.cos(wt);return d[0]=Gt*Fe+he*Oe,d[1]=te*Fe+ge*Oe,d[2]=Gt*-Oe+he*Fe,d[3]=te*-Oe+ge*Fe,d}function U(d,G,wt){var Gt=G[0],te=G[1],he=G[2],ge=G[3],Oe=wt[0],Fe=wt[1];return d[0]=Gt*Oe,d[1]=te*Oe,d[2]=he*Fe,d[3]=ge*Fe,d}function W(d,G){var wt=Math.sin(G),Gt=Math.cos(G);return d[0]=Gt,d[1]=wt,d[2]=-wt,d[3]=Gt,d}function V(d,G){return d[0]=G[0],d[1]=0,d[2]=0,d[3]=G[1],d}function H(d){return"mat2("+d[0]+", "+d[1]+", "+d[2]+", "+d[3]+")"}function Q(d){return Math.hypot(d[0],d[1],d[2],d[3])}function tt(d,G,wt,Gt){return d[2]=Gt[2]/Gt[0],wt[0]=Gt[0],wt[1]=Gt[1],wt[3]=Gt[3]-d[2]*wt[1],[d,G,wt]}function rt(d,G,wt){return d[0]=G[0]+wt[0],d[1]=G[1]+wt[1],d[2]=G[2]+wt[2],d[3]=G[3]+wt[3],d}function ct(d,G,wt){return d[0]=G[0]-wt[0],d[1]=G[1]-wt[1],d[2]=G[2]-wt[2],d[3]=G[3]-wt[3],d}function ot(d,G){return d[0]===G[0]&&d[1]===G[1]&&d[2]===G[2]&&d[3]===G[3]}function xt(d,G){var wt=d[0],Gt=d[1],te=d[2],he=d[3],ge=G[0],Oe=G[1],Fe=G[2],He=G[3];return Math.abs(wt-ge)<=p.EPSILON*Math.max(1,Math.abs(wt),Math.abs(ge))&&Math.abs(Gt-Oe)<=p.EPSILON*Math.max(1,Math.abs(Gt),Math.abs(Oe))&&Math.abs(te-Fe)<=p.EPSILON*Math.max(1,Math.abs(te),Math.abs(Fe))&&Math.abs(he-He)<=p.EPSILON*Math.max(1,Math.abs(he),Math.abs(He))}function pt(d,G,wt){return d[0]=G[0]*wt,d[1]=G[1]*wt,d[2]=G[2]*wt,d[3]=G[3]*wt,d}function Xt(d,G,wt,Gt){return d[0]=G[0]+wt[0]*Gt,d[1]=G[1]+wt[1]*Gt,d[2]=G[2]+wt[2]*Gt,d[3]=G[3]+wt[3]*Gt,d}var Ct=Y,At=ct;function Z(){var d=new p.ARRAY_TYPE(6);return p.ARRAY_TYPE!=Float32Array&&(d[1]=0,d[2]=0,d[4]=0,d[5]=0),d[0]=1,d[3]=1,d}function q(d){var G=new p.ARRAY_TYPE(6);return G[0]=d[0],G[1]=d[1],G[2]=d[2],G[3]=d[3],G[4]=d[4],G[5]=d[5],G}function bt(d,G){return d[0]=G[0],d[1]=G[1],d[2]=G[2],d[3]=G[3],d[4]=G[4],d[5]=G[5],d}function _t(d){return d[0]=1,d[1]=0,d[2]=0,d[3]=1,d[4]=0,d[5]=0,d}function nt(d,G,wt,Gt,te,he){var ge=new p.ARRAY_TYPE(6);return ge[0]=d,ge[1]=G,ge[2]=wt,ge[3]=Gt,ge[4]=te,ge[5]=he,ge}function vt(d,G,wt,Gt,te,he,ge){return d[0]=G,d[1]=wt,d[2]=Gt,d[3]=te,d[4]=he,d[5]=ge,d}function It(d,G){var wt=G[0],Gt=G[1],te=G[2],he=G[3],ge=G[4],Oe=G[5],Fe=wt*he-Gt*te;return Fe?(Fe=1/Fe,d[0]=he*Fe,d[1]=-Gt*Fe,d[2]=-te*Fe,d[3]=wt*Fe,d[4]=(te*Oe-he*ge)*Fe,d[5]=(Gt*ge-wt*Oe)*Fe,d):null}function Pt(d){return d[0]*d[3]-d[1]*d[2]}function Et(d,G,wt){var Gt=G[0],te=G[1],he=G[2],ge=G[3],Oe=G[4],Fe=G[5],He=wt[0],ur=wt[1],Ur=wt[2],jr=wt[3],Wr=wt[4],mn=wt[5];return d[0]=Gt*He+he*ur,d[1]=te*He+ge*ur,d[2]=Gt*Ur+he*jr,d[3]=te*Ur+ge*jr,d[4]=Gt*Wr+he*mn+Oe,d[5]=te*Wr+ge*mn+Fe,d}function Nt(d,G,wt){var Gt=G[0],te=G[1],he=G[2],ge=G[3],Oe=G[4],Fe=G[5],He=Math.sin(wt),ur=Math.cos(wt);return d[0]=Gt*ur+he*He,d[1]=te*ur+ge*He,d[2]=Gt*-He+he*ur,d[3]=te*-He+ge*ur,d[4]=Oe,d[5]=Fe,d}function $t(d,G,wt){var Gt=G[0],te=G[1],he=G[2],ge=G[3],Oe=G[4],Fe=G[5],He=wt[0],ur=wt[1];return d[0]=Gt*He,d[1]=te*He,d[2]=he*ur,d[3]=ge*ur,d[4]=Oe,d[5]=Fe,d}function ue(d,G,wt){var Gt=G[0],te=G[1],he=G[2],ge=G[3],Oe=G[4],Fe=G[5],He=wt[0],ur=wt[1];return d[0]=Gt,d[1]=te,d[2]=he,d[3]=ge,d[4]=Gt*He+he*ur+Oe,d[5]=te*He+ge*ur+Fe,d}function ie(d,G){var wt=Math.sin(G),Gt=Math.cos(G);return d[0]=Gt,d[1]=wt,d[2]=-wt,d[3]=Gt,d[4]=0,d[5]=0,d}function Dt(d,G){return d[0]=G[0],d[1]=0,d[2]=0,d[3]=G[1],d[4]=0,d[5]=0,d}function ne(d,G){return d[0]=1,d[1]=0,d[2]=0,d[3]=1,d[4]=G[0],d[5]=G[1],d}function pe(d){return"mat2d("+d[0]+", "+d[1]+", "+d[2]+", "+d[3]+", "+d[4]+", "+d[5]+")"}function Wt(d){return Math.hypot(d[0],d[1],d[2],d[3],d[4],d[5],1)}function ae(d,G,wt){return d[0]=G[0]+wt[0],d[1]=G[1]+wt[1],d[2]=G[2]+wt[2],d[3]=G[3]+wt[3],d[4]=G[4]+wt[4],d[5]=G[5]+wt[5],d}function Se(d,G,wt){return d[0]=G[0]-wt[0],d[1]=G[1]-wt[1],d[2]=G[2]-wt[2],d[3]=G[3]-wt[3],d[4]=G[4]-wt[4],d[5]=G[5]-wt[5],d}function be(d,G,wt){return d[0]=G[0]*wt,d[1]=G[1]*wt,d[2]=G[2]*wt,d[3]=G[3]*wt,d[4]=G[4]*wt,d[5]=G[5]*wt,d}function Qt(d,G,wt,Gt){return d[0]=G[0]+wt[0]*Gt,d[1]=G[1]+wt[1]*Gt,d[2]=G[2]+wt[2]*Gt,d[3]=G[3]+wt[3]*Gt,d[4]=G[4]+wt[4]*Gt,d[5]=G[5]+wt[5]*Gt,d}function we(d,G){return d[0]===G[0]&&d[1]===G[1]&&d[2]===G[2]&&d[3]===G[3]&&d[4]===G[4]&&d[5]===G[5]}function Tt(d,G){var wt=d[0],Gt=d[1],te=d[2],he=d[3],ge=d[4],Oe=d[5],Fe=G[0],He=G[1],ur=G[2],Ur=G[3],jr=G[4],Wr=G[5];return Math.abs(wt-Fe)<=p.EPSILON*Math.max(1,Math.abs(wt),Math.abs(Fe))&&Math.abs(Gt-He)<=p.EPSILON*Math.max(1,Math.abs(Gt),Math.abs(He))&&Math.abs(te-ur)<=p.EPSILON*Math.max(1,Math.abs(te),Math.abs(ur))&&Math.abs(he-Ur)<=p.EPSILON*Math.max(1,Math.abs(he),Math.abs(Ur))&&Math.abs(ge-jr)<=p.EPSILON*Math.max(1,Math.abs(ge),Math.abs(jr))&&Math.abs(Oe-Wr)<=p.EPSILON*Math.max(1,Math.abs(Oe),Math.abs(Wr))}var Le=Et,Mr=Se,Ar=C(935600);function Ir(){var d=new p.ARRAY_TYPE(16);return p.ARRAY_TYPE!=Float32Array&&(d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[6]=0,d[7]=0,d[8]=0,d[9]=0,d[11]=0,d[12]=0,d[13]=0,d[14]=0),d[0]=1,d[5]=1,d[10]=1,d[15]=1,d}function Br(d){var G=new p.ARRAY_TYPE(16);return G[0]=d[0],G[1]=d[1],G[2]=d[2],G[3]=d[3],G[4]=d[4],G[5]=d[5],G[6]=d[6],G[7]=d[7],G[8]=d[8],G[9]=d[9],G[10]=d[10],G[11]=d[11],G[12]=d[12],G[13]=d[13],G[14]=d[14],G[15]=d[15],G}function dn(d,G){return d[0]=G[0],d[1]=G[1],d[2]=G[2],d[3]=G[3],d[4]=G[4],d[5]=G[5],d[6]=G[6],d[7]=G[7],d[8]=G[8],d[9]=G[9],d[10]=G[10],d[11]=G[11],d[12]=G[12],d[13]=G[13],d[14]=G[14],d[15]=G[15],d}function an(d,G,wt,Gt,te,he,ge,Oe,Fe,He,ur,Ur,jr,Wr,mn,Bn){var Qr=new p.ARRAY_TYPE(16);return Qr[0]=d,Qr[1]=G,Qr[2]=wt,Qr[3]=Gt,Qr[4]=te,Qr[5]=he,Qr[6]=ge,Qr[7]=Oe,Qr[8]=Fe,Qr[9]=He,Qr[10]=ur,Qr[11]=Ur,Qr[12]=jr,Qr[13]=Wr,Qr[14]=mn,Qr[15]=Bn,Qr}function Ln(d,G,wt,Gt,te,he,ge,Oe,Fe,He,ur,Ur,jr,Wr,mn,Bn,Qr){return d[0]=G,d[1]=wt,d[2]=Gt,d[3]=te,d[4]=he,d[5]=ge,d[6]=Oe,d[7]=Fe,d[8]=He,d[9]=ur,d[10]=Ur,d[11]=jr,d[12]=Wr,d[13]=mn,d[14]=Bn,d[15]=Qr,d}function Un(d){return d[0]=1,d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[5]=1,d[6]=0,d[7]=0,d[8]=0,d[9]=0,d[10]=1,d[11]=0,d[12]=0,d[13]=0,d[14]=0,d[15]=1,d}function Yn(d,G){if(d===G){var wt=G[1],Gt=G[2],te=G[3],he=G[6],ge=G[7],Oe=G[11];d[1]=G[4],d[2]=G[8],d[3]=G[12],d[4]=wt,d[6]=G[9],d[7]=G[13],d[8]=Gt,d[9]=he,d[11]=G[14],d[12]=te,d[13]=ge,d[14]=Oe}else d[0]=G[0],d[1]=G[4],d[2]=G[8],d[3]=G[12],d[4]=G[1],d[5]=G[5],d[6]=G[9],d[7]=G[13],d[8]=G[2],d[9]=G[6],d[10]=G[10],d[11]=G[14],d[12]=G[3],d[13]=G[7],d[14]=G[11],d[15]=G[15];return d}function xr(d,G){var wt=G[0],Gt=G[1],te=G[2],he=G[3],ge=G[4],Oe=G[5],Fe=G[6],He=G[7],ur=G[8],Ur=G[9],jr=G[10],Wr=G[11],mn=G[12],Bn=G[13],Qr=G[14],na=G[15],Va=wt*Oe-Gt*ge,Ha=wt*Fe-te*ge,za=wt*He-he*ge,_a=Gt*Fe-te*Oe,Na=Gt*He-he*Oe,Po=te*He-he*Fe,Mo=ur*Bn-Ur*mn,Eo=ur*Qr-jr*mn,_o=ur*na-Wr*mn,Co=Ur*Qr-jr*Bn,Fo=Ur*na-Wr*Bn,zo=jr*na-Wr*Qr,fi=Va*zo-Ha*Fo+za*Co+_a*_o-Na*Eo+Po*Mo;return fi?(fi=1/fi,d[0]=(Oe*zo-Fe*Fo+He*Co)*fi,d[1]=(te*Fo-Gt*zo-he*Co)*fi,d[2]=(Bn*Po-Qr*Na+na*_a)*fi,d[3]=(jr*Na-Ur*Po-Wr*_a)*fi,d[4]=(Fe*_o-ge*zo-He*Eo)*fi,d[5]=(wt*zo-te*_o+he*Eo)*fi,d[6]=(Qr*za-mn*Po-na*Ha)*fi,d[7]=(ur*Po-jr*za+Wr*Ha)*fi,d[8]=(ge*Fo-Oe*_o+He*Mo)*fi,d[9]=(Gt*_o-wt*Fo-he*Mo)*fi,d[10]=(mn*Na-Bn*za+na*Va)*fi,d[11]=(Ur*za-ur*Na-Wr*Va)*fi,d[12]=(Oe*Eo-ge*Co-Fe*Mo)*fi,d[13]=(wt*Co-Gt*Eo+te*Mo)*fi,d[14]=(Bn*Ha-mn*_a-Qr*Va)*fi,d[15]=(ur*_a-Ur*Ha+jr*Va)*fi,d):null}function qe(d,G){var wt=G[0],Gt=G[1],te=G[2],he=G[3],ge=G[4],Oe=G[5],Fe=G[6],He=G[7],ur=G[8],Ur=G[9],jr=G[10],Wr=G[11],mn=G[12],Bn=G[13],Qr=G[14],na=G[15];return d[0]=Oe*(jr*na-Wr*Qr)-Ur*(Fe*na-He*Qr)+Bn*(Fe*Wr-He*jr),d[1]=-(Gt*(jr*na-Wr*Qr)-Ur*(te*na-he*Qr)+Bn*(te*Wr-he*jr)),d[2]=Gt*(Fe*na-He*Qr)-Oe*(te*na-he*Qr)+Bn*(te*He-he*Fe),d[3]=-(Gt*(Fe*Wr-He*jr)-Oe*(te*Wr-he*jr)+Ur*(te*He-he*Fe)),d[4]=-(ge*(jr*na-Wr*Qr)-ur*(Fe*na-He*Qr)+mn*(Fe*Wr-He*jr)),d[5]=wt*(jr*na-Wr*Qr)-ur*(te*na-he*Qr)+mn*(te*Wr-he*jr),d[6]=-(wt*(Fe*na-He*Qr)-ge*(te*na-he*Qr)+mn*(te*He-he*Fe)),d[7]=wt*(Fe*Wr-He*jr)-ge*(te*Wr-he*jr)+ur*(te*He-he*Fe),d[8]=ge*(Ur*na-Wr*Bn)-ur*(Oe*na-He*Bn)+mn*(Oe*Wr-He*Ur),d[9]=-(wt*(Ur*na-Wr*Bn)-ur*(Gt*na-he*Bn)+mn*(Gt*Wr-he*Ur)),d[10]=wt*(Oe*na-He*Bn)-ge*(Gt*na-he*Bn)+mn*(Gt*He-he*Oe),d[11]=-(wt*(Oe*Wr-He*Ur)-ge*(Gt*Wr-he*Ur)+ur*(Gt*He-he*Oe)),d[12]=-(ge*(Ur*Qr-jr*Bn)-ur*(Oe*Qr-Fe*Bn)+mn*(Oe*jr-Fe*Ur)),d[13]=wt*(Ur*Qr-jr*Bn)-ur*(Gt*Qr-te*Bn)+mn*(Gt*jr-te*Ur),d[14]=-(wt*(Oe*Qr-Fe*Bn)-ge*(Gt*Qr-te*Bn)+mn*(Gt*Fe-te*Oe)),d[15]=wt*(Oe*jr-Fe*Ur)-ge*(Gt*jr-te*Ur)+ur*(Gt*Fe-te*Oe),d}function Cr(d){var G=d[0],wt=d[1],Gt=d[2],te=d[3],he=d[4],ge=d[5],Oe=d[6],Fe=d[7],He=d[8],ur=d[9],Ur=d[10],jr=d[11],Wr=d[12],mn=d[13],Bn=d[14],Qr=d[15],na=G*ge-wt*he,Va=G*Oe-Gt*he,Ha=G*Fe-te*he,za=wt*Oe-Gt*ge,_a=wt*Fe-te*ge,Na=Gt*Fe-te*Oe,Po=He*mn-ur*Wr,Mo=He*Bn-Ur*Wr,Eo=He*Qr-jr*Wr,_o=ur*Bn-Ur*mn,Co=ur*Qr-jr*mn,Fo=Ur*Qr-jr*Bn;return na*Fo-Va*Co+Ha*_o+za*Eo-_a*Mo+Na*Po}function tn(d,G,wt){var Gt=G[0],te=G[1],he=G[2],ge=G[3],Oe=G[4],Fe=G[5],He=G[6],ur=G[7],Ur=G[8],jr=G[9],Wr=G[10],mn=G[11],Bn=G[12],Qr=G[13],na=G[14],Va=G[15],Ha=wt[0],za=wt[1],_a=wt[2],Na=wt[3];return d[0]=Ha*Gt+za*Oe+_a*Ur+Na*Bn,d[1]=Ha*te+za*Fe+_a*jr+Na*Qr,d[2]=Ha*he+za*He+_a*Wr+Na*na,d[3]=Ha*ge+za*ur+_a*mn+Na*Va,Ha=wt[4],za=wt[5],_a=wt[6],Na=wt[7],d[4]=Ha*Gt+za*Oe+_a*Ur+Na*Bn,d[5]=Ha*te+za*Fe+_a*jr+Na*Qr,d[6]=Ha*he+za*He+_a*Wr+Na*na,d[7]=Ha*ge+za*ur+_a*mn+Na*Va,Ha=wt[8],za=wt[9],_a=wt[10],Na=wt[11],d[8]=Ha*Gt+za*Oe+_a*Ur+Na*Bn,d[9]=Ha*te+za*Fe+_a*jr+Na*Qr,d[10]=Ha*he+za*He+_a*Wr+Na*na,d[11]=Ha*ge+za*ur+_a*mn+Na*Va,Ha=wt[12],za=wt[13],_a=wt[14],Na=wt[15],d[12]=Ha*Gt+za*Oe+_a*Ur+Na*Bn,d[13]=Ha*te+za*Fe+_a*jr+Na*Qr,d[14]=Ha*he+za*He+_a*Wr+Na*na,d[15]=Ha*ge+za*ur+_a*mn+Na*Va,d}function vn(d,G,wt){var Gt=wt[0],te=wt[1],he=wt[2],ge,Oe,Fe,He,ur,Ur,jr,Wr,mn,Bn,Qr,na;return G===d?(d[12]=G[0]*Gt+G[4]*te+G[8]*he+G[12],d[13]=G[1]*Gt+G[5]*te+G[9]*he+G[13],d[14]=G[2]*Gt+G[6]*te+G[10]*he+G[14],d[15]=G[3]*Gt+G[7]*te+G[11]*he+G[15]):(ge=G[0],Oe=G[1],Fe=G[2],He=G[3],ur=G[4],Ur=G[5],jr=G[6],Wr=G[7],mn=G[8],Bn=G[9],Qr=G[10],na=G[11],d[0]=ge,d[1]=Oe,d[2]=Fe,d[3]=He,d[4]=ur,d[5]=Ur,d[6]=jr,d[7]=Wr,d[8]=mn,d[9]=Bn,d[10]=Qr,d[11]=na,d[12]=ge*Gt+ur*te+mn*he+G[12],d[13]=Oe*Gt+Ur*te+Bn*he+G[13],d[14]=Fe*Gt+jr*te+Qr*he+G[14],d[15]=He*Gt+Wr*te+na*he+G[15]),d}function _n(d,G,wt){var Gt=wt[0],te=wt[1],he=wt[2];return d[0]=G[0]*Gt,d[1]=G[1]*Gt,d[2]=G[2]*Gt,d[3]=G[3]*Gt,d[4]=G[4]*te,d[5]=G[5]*te,d[6]=G[6]*te,d[7]=G[7]*te,d[8]=G[8]*he,d[9]=G[9]*he,d[10]=G[10]*he,d[11]=G[11]*he,d[12]=G[12],d[13]=G[13],d[14]=G[14],d[15]=G[15],d}function Pn(d,G,wt,Gt){var te=Gt[0],he=Gt[1],ge=Gt[2],Oe=Math.hypot(te,he,ge),Fe,He,ur,Ur,jr,Wr,mn,Bn,Qr,na,Va,Ha,za,_a,Na,Po,Mo,Eo,_o,Co,Fo,zo,fi,Bi;return Oe<p.EPSILON?null:(Oe=1/Oe,te*=Oe,he*=Oe,ge*=Oe,Fe=Math.sin(wt),He=Math.cos(wt),ur=1-He,Ur=G[0],jr=G[1],Wr=G[2],mn=G[3],Bn=G[4],Qr=G[5],na=G[6],Va=G[7],Ha=G[8],za=G[9],_a=G[10],Na=G[11],Po=te*te*ur+He,Mo=he*te*ur+ge*Fe,Eo=ge*te*ur-he*Fe,_o=te*he*ur-ge*Fe,Co=he*he*ur+He,Fo=ge*he*ur+te*Fe,zo=te*ge*ur+he*Fe,fi=he*ge*ur-te*Fe,Bi=ge*ge*ur+He,d[0]=Ur*Po+Bn*Mo+Ha*Eo,d[1]=jr*Po+Qr*Mo+za*Eo,d[2]=Wr*Po+na*Mo+_a*Eo,d[3]=mn*Po+Va*Mo+Na*Eo,d[4]=Ur*_o+Bn*Co+Ha*Fo,d[5]=jr*_o+Qr*Co+za*Fo,d[6]=Wr*_o+na*Co+_a*Fo,d[7]=mn*_o+Va*Co+Na*Fo,d[8]=Ur*zo+Bn*fi+Ha*Bi,d[9]=jr*zo+Qr*fi+za*Bi,d[10]=Wr*zo+na*fi+_a*Bi,d[11]=mn*zo+Va*fi+Na*Bi,G!==d&&(d[12]=G[12],d[13]=G[13],d[14]=G[14],d[15]=G[15]),d)}function _r(d,G,wt){var Gt=Math.sin(wt),te=Math.cos(wt),he=G[4],ge=G[5],Oe=G[6],Fe=G[7],He=G[8],ur=G[9],Ur=G[10],jr=G[11];return G!==d&&(d[0]=G[0],d[1]=G[1],d[2]=G[2],d[3]=G[3],d[12]=G[12],d[13]=G[13],d[14]=G[14],d[15]=G[15]),d[4]=he*te+He*Gt,d[5]=ge*te+ur*Gt,d[6]=Oe*te+Ur*Gt,d[7]=Fe*te+jr*Gt,d[8]=He*te-he*Gt,d[9]=ur*te-ge*Gt,d[10]=Ur*te-Oe*Gt,d[11]=jr*te-Fe*Gt,d}function un(d,G,wt){var Gt=Math.sin(wt),te=Math.cos(wt),he=G[0],ge=G[1],Oe=G[2],Fe=G[3],He=G[8],ur=G[9],Ur=G[10],jr=G[11];return G!==d&&(d[4]=G[4],d[5]=G[5],d[6]=G[6],d[7]=G[7],d[12]=G[12],d[13]=G[13],d[14]=G[14],d[15]=G[15]),d[0]=he*te-He*Gt,d[1]=ge*te-ur*Gt,d[2]=Oe*te-Ur*Gt,d[3]=Fe*te-jr*Gt,d[8]=he*Gt+He*te,d[9]=ge*Gt+ur*te,d[10]=Oe*Gt+Ur*te,d[11]=Fe*Gt+jr*te,d}function An(d,G,wt){var Gt=Math.sin(wt),te=Math.cos(wt),he=G[0],ge=G[1],Oe=G[2],Fe=G[3],He=G[4],ur=G[5],Ur=G[6],jr=G[7];return G!==d&&(d[8]=G[8],d[9]=G[9],d[10]=G[10],d[11]=G[11],d[12]=G[12],d[13]=G[13],d[14]=G[14],d[15]=G[15]),d[0]=he*te+He*Gt,d[1]=ge*te+ur*Gt,d[2]=Oe*te+Ur*Gt,d[3]=Fe*te+jr*Gt,d[4]=He*te-he*Gt,d[5]=ur*te-ge*Gt,d[6]=Ur*te-Oe*Gt,d[7]=jr*te-Fe*Gt,d}function on(d,G){return d[0]=1,d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[5]=1,d[6]=0,d[7]=0,d[8]=0,d[9]=0,d[10]=1,d[11]=0,d[12]=G[0],d[13]=G[1],d[14]=G[2],d[15]=1,d}function Wn(d,G){return d[0]=G[0],d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[5]=G[1],d[6]=0,d[7]=0,d[8]=0,d[9]=0,d[10]=G[2],d[11]=0,d[12]=0,d[13]=0,d[14]=0,d[15]=1,d}function Cn(d,G,wt){var Gt=wt[0],te=wt[1],he=wt[2],ge=Math.hypot(Gt,te,he),Oe,Fe,He;return ge<p.EPSILON?null:(ge=1/ge,Gt*=ge,te*=ge,he*=ge,Oe=Math.sin(G),Fe=Math.cos(G),He=1-Fe,d[0]=Gt*Gt*He+Fe,d[1]=te*Gt*He+he*Oe,d[2]=he*Gt*He-te*Oe,d[3]=0,d[4]=Gt*te*He-he*Oe,d[5]=te*te*He+Fe,d[6]=he*te*He+Gt*Oe,d[7]=0,d[8]=Gt*he*He+te*Oe,d[9]=te*he*He-Gt*Oe,d[10]=he*he*He+Fe,d[11]=0,d[12]=0,d[13]=0,d[14]=0,d[15]=1,d)}function On(d,G){var wt=Math.sin(G),Gt=Math.cos(G);return d[0]=1,d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[5]=Gt,d[6]=wt,d[7]=0,d[8]=0,d[9]=-wt,d[10]=Gt,d[11]=0,d[12]=0,d[13]=0,d[14]=0,d[15]=1,d}function jn(d,G){var wt=Math.sin(G),Gt=Math.cos(G);return d[0]=Gt,d[1]=0,d[2]=-wt,d[3]=0,d[4]=0,d[5]=1,d[6]=0,d[7]=0,d[8]=wt,d[9]=0,d[10]=Gt,d[11]=0,d[12]=0,d[13]=0,d[14]=0,d[15]=1,d}function at(d,G){var wt=Math.sin(G),Gt=Math.cos(G);return d[0]=Gt,d[1]=wt,d[2]=0,d[3]=0,d[4]=-wt,d[5]=Gt,d[6]=0,d[7]=0,d[8]=0,d[9]=0,d[10]=1,d[11]=0,d[12]=0,d[13]=0,d[14]=0,d[15]=1,d}function Ze(d,G,wt){var Gt=G[0],te=G[1],he=G[2],ge=G[3],Oe=Gt+Gt,Fe=te+te,He=he+he,ur=Gt*Oe,Ur=Gt*Fe,jr=Gt*He,Wr=te*Fe,mn=te*He,Bn=he*He,Qr=ge*Oe,na=ge*Fe,Va=ge*He;return d[0]=1-(Wr+Bn),d[1]=Ur+Va,d[2]=jr-na,d[3]=0,d[4]=Ur-Va,d[5]=1-(ur+Bn),d[6]=mn+Qr,d[7]=0,d[8]=jr+na,d[9]=mn-Qr,d[10]=1-(ur+Wr),d[11]=0,d[12]=wt[0],d[13]=wt[1],d[14]=wt[2],d[15]=1,d}function qt(d,G){var wt=new p.ARRAY_TYPE(3),Gt=-G[0],te=-G[1],he=-G[2],ge=G[3],Oe=G[4],Fe=G[5],He=G[6],ur=G[7],Ur=Gt*Gt+te*te+he*he+ge*ge;return Ur>0?(wt[0]=(Oe*ge+ur*Gt+Fe*he-He*te)*2/Ur,wt[1]=(Fe*ge+ur*te+He*Gt-Oe*he)*2/Ur,wt[2]=(He*ge+ur*he+Oe*te-Fe*Gt)*2/Ur):(wt[0]=(Oe*ge+ur*Gt+Fe*he-He*te)*2,wt[1]=(Fe*ge+ur*te+He*Gt-Oe*he)*2,wt[2]=(He*ge+ur*he+Oe*te-Fe*Gt)*2),Ze(d,G,wt),d}function Jt(d,G){return d[0]=G[12],d[1]=G[13],d[2]=G[14],d}function St(d,G){var wt=G[0],Gt=G[1],te=G[2],he=G[4],ge=G[5],Oe=G[6],Fe=G[8],He=G[9],ur=G[10];return d[0]=Math.hypot(wt,Gt,te),d[1]=Math.hypot(he,ge,Oe),d[2]=Math.hypot(Fe,He,ur),d}function Ce(d,G){var wt=new p.ARRAY_TYPE(3);St(wt,G);var Gt=1/wt[0],te=1/wt[1],he=1/wt[2],ge=G[0]*Gt,Oe=G[1]*te,Fe=G[2]*he,He=G[4]*Gt,ur=G[5]*te,Ur=G[6]*he,jr=G[8]*Gt,Wr=G[9]*te,mn=G[10]*he,Bn=ge+ur+mn,Qr=0;return Bn>0?(Qr=Math.sqrt(Bn+1)*2,d[3]=.25*Qr,d[0]=(Ur-Wr)/Qr,d[1]=(jr-Fe)/Qr,d[2]=(Oe-He)/Qr):ge>ur&&ge>mn?(Qr=Math.sqrt(1+ge-ur-mn)*2,d[3]=(Ur-Wr)/Qr,d[0]=.25*Qr,d[1]=(Oe+He)/Qr,d[2]=(jr+Fe)/Qr):ur>mn?(Qr=Math.sqrt(1+ur-ge-mn)*2,d[3]=(jr-Fe)/Qr,d[0]=(Oe+He)/Qr,d[1]=.25*Qr,d[2]=(Ur+Wr)/Qr):(Qr=Math.sqrt(1+mn-ge-ur)*2,d[3]=(Oe-He)/Qr,d[0]=(jr+Fe)/Qr,d[1]=(Ur+Wr)/Qr,d[2]=.25*Qr),d}function kt(d,G,wt,Gt){var te=G[0],he=G[1],ge=G[2],Oe=G[3],Fe=te+te,He=he+he,ur=ge+ge,Ur=te*Fe,jr=te*He,Wr=te*ur,mn=he*He,Bn=he*ur,Qr=ge*ur,na=Oe*Fe,Va=Oe*He,Ha=Oe*ur,za=Gt[0],_a=Gt[1],Na=Gt[2];return d[0]=(1-(mn+Qr))*za,d[1]=(jr+Ha)*za,d[2]=(Wr-Va)*za,d[3]=0,d[4]=(jr-Ha)*_a,d[5]=(1-(Ur+Qr))*_a,d[6]=(Bn+na)*_a,d[7]=0,d[8]=(Wr+Va)*Na,d[9]=(Bn-na)*Na,d[10]=(1-(Ur+mn))*Na,d[11]=0,d[12]=wt[0],d[13]=wt[1],d[14]=wt[2],d[15]=1,d}function Kt(d,G,wt,Gt,te){var he=G[0],ge=G[1],Oe=G[2],Fe=G[3],He=he+he,ur=ge+ge,Ur=Oe+Oe,jr=he*He,Wr=he*ur,mn=he*Ur,Bn=ge*ur,Qr=ge*Ur,na=Oe*Ur,Va=Fe*He,Ha=Fe*ur,za=Fe*Ur,_a=Gt[0],Na=Gt[1],Po=Gt[2],Mo=te[0],Eo=te[1],_o=te[2],Co=(1-(Bn+na))*_a,Fo=(Wr+za)*_a,zo=(mn-Ha)*_a,fi=(Wr-za)*Na,Bi=(1-(jr+na))*Na,Qs=(Qr+Va)*Na,zs=(mn+Ha)*Po,Ts=(Qr-Va)*Po,lu=(1-(jr+Bn))*Po;return d[0]=Co,d[1]=Fo,d[2]=zo,d[3]=0,d[4]=fi,d[5]=Bi,d[6]=Qs,d[7]=0,d[8]=zs,d[9]=Ts,d[10]=lu,d[11]=0,d[12]=wt[0]+Mo-(Co*Mo+fi*Eo+zs*_o),d[13]=wt[1]+Eo-(Fo*Mo+Bi*Eo+Ts*_o),d[14]=wt[2]+_o-(zo*Mo+Qs*Eo+lu*_o),d[15]=1,d}function dt(d,G){var wt=G[0],Gt=G[1],te=G[2],he=G[3],ge=wt+wt,Oe=Gt+Gt,Fe=te+te,He=wt*ge,ur=Gt*ge,Ur=Gt*Oe,jr=te*ge,Wr=te*Oe,mn=te*Fe,Bn=he*ge,Qr=he*Oe,na=he*Fe;return d[0]=1-Ur-mn,d[1]=ur+na,d[2]=jr-Qr,d[3]=0,d[4]=ur-na,d[5]=1-He-mn,d[6]=Wr+Bn,d[7]=0,d[8]=jr+Qr,d[9]=Wr-Bn,d[10]=1-He-Ur,d[11]=0,d[12]=0,d[13]=0,d[14]=0,d[15]=1,d}function Ut(d,G,wt,Gt,te,he,ge){var Oe=1/(wt-G),Fe=1/(te-Gt),He=1/(he-ge);return d[0]=he*2*Oe,d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[5]=he*2*Fe,d[6]=0,d[7]=0,d[8]=(wt+G)*Oe,d[9]=(te+Gt)*Fe,d[10]=(ge+he)*He,d[11]=-1,d[12]=0,d[13]=0,d[14]=ge*he*2*He,d[15]=0,d}function J(d,G,wt,Gt,te){var he=1/Math.tan(G/2),ge;return d[0]=he/wt,d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[5]=he,d[6]=0,d[7]=0,d[8]=0,d[9]=0,d[11]=-1,d[12]=0,d[13]=0,d[15]=0,te!=null&&te!==1/0?(ge=1/(Gt-te),d[10]=(te+Gt)*ge,d[14]=2*te*Gt*ge):(d[10]=-1,d[14]=-2*Gt),d}var it=J;function R(d,G,wt,Gt,te){var he=1/Math.tan(G/2),ge;return d[0]=he/wt,d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[5]=he,d[6]=0,d[7]=0,d[8]=0,d[9]=0,d[11]=-1,d[12]=0,d[13]=0,d[15]=0,te!=null&&te!==1/0?(ge=1/(Gt-te),d[10]=te*ge,d[14]=te*Gt*ge):(d[10]=-1,d[14]=-Gt),d}function M(d,G,wt,Gt){var te=Math.tan(G.upDegrees*Math.PI/180),he=Math.tan(G.downDegrees*Math.PI/180),ge=Math.tan(G.leftDegrees*Math.PI/180),Oe=Math.tan(G.rightDegrees*Math.PI/180),Fe=2/(ge+Oe),He=2/(te+he);return d[0]=Fe,d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[5]=He,d[6]=0,d[7]=0,d[8]=-((ge-Oe)*Fe*.5),d[9]=(te-he)*He*.5,d[10]=Gt/(wt-Gt),d[11]=-1,d[12]=0,d[13]=0,d[14]=Gt*wt/(wt-Gt),d[15]=0,d}function O(d,G,wt,Gt,te,he,ge){var Oe=1/(G-wt),Fe=1/(Gt-te),He=1/(he-ge);return d[0]=-2*Oe,d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[5]=-2*Fe,d[6]=0,d[7]=0,d[8]=0,d[9]=0,d[10]=2*He,d[11]=0,d[12]=(G+wt)*Oe,d[13]=(te+Gt)*Fe,d[14]=(ge+he)*He,d[15]=1,d}var X=O;function mt(d,G,wt,Gt,te,he,ge){var Oe=1/(G-wt),Fe=1/(Gt-te),He=1/(he-ge);return d[0]=-2*Oe,d[1]=0,d[2]=0,d[3]=0,d[4]=0,d[5]=-2*Fe,d[6]=0,d[7]=0,d[8]=0,d[9]=0,d[10]=He,d[11]=0,d[12]=(G+wt)*Oe,d[13]=(te+Gt)*Fe,d[14]=he*He,d[15]=1,d}function Ft(d,G,wt,Gt){var te,he,ge,Oe,Fe,He,ur,Ur,jr,Wr,mn=G[0],Bn=G[1],Qr=G[2],na=Gt[0],Va=Gt[1],Ha=Gt[2],za=wt[0],_a=wt[1],Na=wt[2];return Math.abs(mn-za)<p.EPSILON&&Math.abs(Bn-_a)<p.EPSILON&&Math.abs(Qr-Na)<p.EPSILON?Un(d):(ur=mn-za,Ur=Bn-_a,jr=Qr-Na,Wr=1/Math.hypot(ur,Ur,jr),ur*=Wr,Ur*=Wr,jr*=Wr,te=Va*jr-Ha*Ur,he=Ha*ur-na*jr,ge=na*Ur-Va*ur,Wr=Math.hypot(te,he,ge),Wr?(Wr=1/Wr,te*=Wr,he*=Wr,ge*=Wr):(te=0,he=0,ge=0),Oe=Ur*ge-jr*he,Fe=jr*te-ur*ge,He=ur*he-Ur*te,Wr=Math.hypot(Oe,Fe,He),Wr?(Wr=1/Wr,Oe*=Wr,Fe*=Wr,He*=Wr):(Oe=0,Fe=0,He=0),d[0]=te,d[1]=Oe,d[2]=ur,d[3]=0,d[4]=he,d[5]=Fe,d[6]=Ur,d[7]=0,d[8]=ge,d[9]=He,d[10]=jr,d[11]=0,d[12]=-(te*mn+he*Bn+ge*Qr),d[13]=-(Oe*mn+Fe*Bn+He*Qr),d[14]=-(ur*mn+Ur*Bn+jr*Qr),d[15]=1,d)}function Bt(d,G,wt,Gt){var te=G[0],he=G[1],ge=G[2],Oe=Gt[0],Fe=Gt[1],He=Gt[2],ur=te-wt[0],Ur=he-wt[1],jr=ge-wt[2],Wr=ur*ur+Ur*Ur+jr*jr;Wr>0&&(Wr=1/Math.sqrt(Wr),ur*=Wr,Ur*=Wr,jr*=Wr);var mn=Fe*jr-He*Ur,Bn=He*ur-Oe*jr,Qr=Oe*Ur-Fe*ur;return Wr=mn*mn+Bn*Bn+Qr*Qr,Wr>0&&(Wr=1/Math.sqrt(Wr),mn*=Wr,Bn*=Wr,Qr*=Wr),d[0]=mn,d[1]=Bn,d[2]=Qr,d[3]=0,d[4]=Ur*Qr-jr*Bn,d[5]=jr*mn-ur*Qr,d[6]=ur*Bn-Ur*mn,d[7]=0,d[8]=ur,d[9]=Ur,d[10]=jr,d[11]=0,d[12]=te,d[13]=he,d[14]=ge,d[15]=1,d}function re(d){return"mat4("+d[0]+", "+d[1]+", "+d[2]+", "+d[3]+", "+d[4]+", "+d[5]+", "+d[6]+", "+d[7]+", "+d[8]+", "+d[9]+", "+d[10]+", "+d[11]+", "+d[12]+", "+d[13]+", "+d[14]+", "+d[15]+")"}function De(d){return Math.hypot(d[0],d[1],d[2],d[3],d[4],d[5],d[6],d[7],d[8],d[9],d[10],d[11],d[12],d[13],d[14],d[15])}function me(d,G,wt){return d[0]=G[0]+wt[0],d[1]=G[1]+wt[1],d[2]=G[2]+wt[2],d[3]=G[3]+wt[3],d[4]=G[4]+wt[4],d[5]=G[5]+wt[5],d[6]=G[6]+wt[6],d[7]=G[7]+wt[7],d[8]=G[8]+wt[8],d[9]=G[9]+wt[9],d[10]=G[10]+wt[10],d[11]=G[11]+wt[11],d[12]=G[12]+wt[12],d[13]=G[13]+wt[13],d[14]=G[14]+wt[14],d[15]=G[15]+wt[15],d}function Xe(d,G,wt){return d[0]=G[0]-wt[0],d[1]=G[1]-wt[1],d[2]=G[2]-wt[2],d[3]=G[3]-wt[3],d[4]=G[4]-wt[4],d[5]=G[5]-wt[5],d[6]=G[6]-wt[6],d[7]=G[7]-wt[7],d[8]=G[8]-wt[8],d[9]=G[9]-wt[9],d[10]=G[10]-wt[10],d[11]=G[11]-wt[11],d[12]=G[12]-wt[12],d[13]=G[13]-wt[13],d[14]=G[14]-wt[14],d[15]=G[15]-wt[15],d}function hr(d,G,wt){return d[0]=G[0]*wt,d[1]=G[1]*wt,d[2]=G[2]*wt,d[3]=G[3]*wt,d[4]=G[4]*wt,d[5]=G[5]*wt,d[6]=G[6]*wt,d[7]=G[7]*wt,d[8]=G[8]*wt,d[9]=G[9]*wt,d[10]=G[10]*wt,d[11]=G[11]*wt,d[12]=G[12]*wt,d[13]=G[13]*wt,d[14]=G[14]*wt,d[15]=G[15]*wt,d}function Ke(d,G,wt,Gt){return d[0]=G[0]+wt[0]*Gt,d[1]=G[1]+wt[1]*Gt,d[2]=G[2]+wt[2]*Gt,d[3]=G[3]+wt[3]*Gt,d[4]=G[4]+wt[4]*Gt,d[5]=G[5]+wt[5]*Gt,d[6]=G[6]+wt[6]*Gt,d[7]=G[7]+wt[7]*Gt,d[8]=G[8]+wt[8]*Gt,d[9]=G[9]+wt[9]*Gt,d[10]=G[10]+wt[10]*Gt,d[11]=G[11]+wt[11]*Gt,d[12]=G[12]+wt[12]*Gt,d[13]=G[13]+wt[13]*Gt,d[14]=G[14]+wt[14]*Gt,d[15]=G[15]+wt[15]*Gt,d}function Lr(d,G){return d[0]===G[0]&&d[1]===G[1]&&d[2]===G[2]&&d[3]===G[3]&&d[4]===G[4]&&d[5]===G[5]&&d[6]===G[6]&&d[7]===G[7]&&d[8]===G[8]&&d[9]===G[9]&&d[10]===G[10]&&d[11]===G[11]&&d[12]===G[12]&&d[13]===G[13]&&d[14]===G[14]&&d[15]===G[15]}function cn(d,G){var wt=d[0],Gt=d[1],te=d[2],he=d[3],ge=d[4],Oe=d[5],Fe=d[6],He=d[7],ur=d[8],Ur=d[9],jr=d[10],Wr=d[11],mn=d[12],Bn=d[13],Qr=d[14],na=d[15],Va=G[0],Ha=G[1],za=G[2],_a=G[3],Na=G[4],Po=G[5],Mo=G[6],Eo=G[7],_o=G[8],Co=G[9],Fo=G[10],zo=G[11],fi=G[12],Bi=G[13],Qs=G[14],zs=G[15];return Math.abs(wt-Va)<=p.EPSILON*Math.max(1,Math.abs(wt),Math.abs(Va))&&Math.abs(Gt-Ha)<=p.EPSILON*Math.max(1,Math.abs(Gt),Math.abs(Ha))&&Math.abs(te-za)<=p.EPSILON*Math.max(1,Math.abs(te),Math.abs(za))&&Math.abs(he-_a)<=p.EPSILON*Math.max(1,Math.abs(he),Math.abs(_a))&&Math.abs(ge-Na)<=p.EPSILON*Math.max(1,Math.abs(ge),Math.abs(Na))&&Math.abs(Oe-Po)<=p.EPSILON*Math.max(1,Math.abs(Oe),Math.abs(Po))&&Math.abs(Fe-Mo)<=p.EPSILON*Math.max(1,Math.abs(Fe),Math.abs(Mo))&&Math.abs(He-Eo)<=p.EPSILON*Math.max(1,Math.abs(He),Math.abs(Eo))&&Math.abs(ur-_o)<=p.EPSILON*Math.max(1,Math.abs(ur),Math.abs(_o))&&Math.abs(Ur-Co)<=p.EPSILON*Math.max(1,Math.abs(Ur),Math.abs(Co))&&Math.abs(jr-Fo)<=p.EPSILON*Math.max(1,Math.abs(jr),Math.abs(Fo))&&Math.abs(Wr-zo)<=p.EPSILON*Math.max(1,Math.abs(Wr),Math.abs(zo))&&Math.abs(mn-fi)<=p.EPSILON*Math.max(1,Math.abs(mn),Math.abs(fi))&&Math.abs(Bn-Bi)<=p.EPSILON*Math.max(1,Math.abs(Bn),Math.abs(Bi))&&Math.abs(Qr-Qs)<=p.EPSILON*Math.max(1,Math.abs(Qr),Math.abs(Qs))&&Math.abs(na-zs)<=p.EPSILON*Math.max(1,Math.abs(na),Math.abs(zs))}var $e=tn,lr=Xe,Pr=C(277160);function Dr(){var d=new p.ARRAY_TYPE(4);return p.ARRAY_TYPE!=Float32Array&&(d[0]=0,d[1]=0,d[2]=0,d[3]=0),d}function fe(d){var G=new p.ARRAY_TYPE(4);return G[0]=d[0],G[1]=d[1],G[2]=d[2],G[3]=d[3],G}function jt(d,G,wt,Gt){var te=new p.ARRAY_TYPE(4);return te[0]=d,te[1]=G,te[2]=wt,te[3]=Gt,te}function ve(d,G){return d[0]=G[0],d[1]=G[1],d[2]=G[2],d[3]=G[3],d}function Ie(d,G,wt,Gt,te){return d[0]=G,d[1]=wt,d[2]=Gt,d[3]=te,d}function ye(d,G,wt){return d[0]=G[0]+wt[0],d[1]=G[1]+wt[1],d[2]=G[2]+wt[2],d[3]=G[3]+wt[3],d}function ze(d,G,wt){return d[0]=G[0]-wt[0],d[1]=G[1]-wt[1],d[2]=G[2]-wt[2],d[3]=G[3]-wt[3],d}function sr(d,G,wt){return d[0]=G[0]*wt[0],d[1]=G[1]*wt[1],d[2]=G[2]*wt[2],d[3]=G[3]*wt[3],d}function pr(d,G,wt){return d[0]=G[0]/wt[0],d[1]=G[1]/wt[1],d[2]=G[2]/wt[2],d[3]=G[3]/wt[3],d}function en(d,G){return d[0]=Math.ceil(G[0]),d[1]=Math.ceil(G[1]),d[2]=Math.ceil(G[2]),d[3]=Math.ceil(G[3]),d}function Fn(d,G){return d[0]=Math.floor(G[0]),d[1]=Math.floor(G[1]),d[2]=Math.floor(G[2]),d[3]=Math.floor(G[3]),d}function ln(d,G,wt){return d[0]=Math.min(G[0],wt[0]),d[1]=Math.min(G[1],wt[1]),d[2]=Math.min(G[2],wt[2]),d[3]=Math.min(G[3],wt[3]),d}function ea(d,G,wt){return d[0]=Math.max(G[0],wt[0]),d[1]=Math.max(G[1],wt[1]),d[2]=Math.max(G[2],wt[2]),d[3]=Math.max(G[3],wt[3]),d}function fn(d,G){return d[0]=Math.round(G[0]),d[1]=Math.round(G[1]),d[2]=Math.round(G[2]),d[3]=Math.round(G[3]),d}function Hn(d,G,wt){return d[0]=G[0]*wt,d[1]=G[1]*wt,d[2]=G[2]*wt,d[3]=G[3]*wt,d}function la(d,G,wt,Gt){return d[0]=G[0]+wt[0]*Gt,d[1]=G[1]+wt[1]*Gt,d[2]=G[2]+wt[2]*Gt,d[3]=G[3]+wt[3]*Gt,d}function xa(d,G){var wt=G[0]-d[0],Gt=G[1]-d[1],te=G[2]-d[2],he=G[3]-d[3];return Math.hypot(wt,Gt,te,he)}function ba(d,G){var wt=G[0]-d[0],Gt=G[1]-d[1],te=G[2]-d[2],he=G[3]-d[3];return wt*wt+Gt*Gt+te*te+he*he}function Wi(d){var G=d[0],wt=d[1],Gt=d[2],te=d[3];return Math.hypot(G,wt,Gt,te)}function ri(d){var G=d[0],wt=d[1],Gt=d[2],te=d[3];return G*G+wt*wt+Gt*Gt+te*te}function ti(d,G){return d[0]=-G[0],d[1]=-G[1],d[2]=-G[2],d[3]=-G[3],d}function Si(d,G){return d[0]=1/G[0],d[1]=1/G[1],d[2]=1/G[2],d[3]=1/G[3],d}function Xi(d,G){var wt=G[0],Gt=G[1],te=G[2],he=G[3],ge=wt*wt+Gt*Gt+te*te+he*he;return ge>0&&(ge=1/Math.sqrt(ge)),d[0]=wt*ge,d[1]=Gt*ge,d[2]=te*ge,d[3]=he*ge,d}function io(d,G){return d[0]*G[0]+d[1]*G[1]+d[2]*G[2]+d[3]*G[3]}function oo(d,G,wt,Gt){var te=wt[0]*Gt[1]-wt[1]*Gt[0],he=wt[0]*Gt[2]-wt[2]*Gt[0],ge=wt[0]*Gt[3]-wt[3]*Gt[0],Oe=wt[1]*Gt[2]-wt[2]*Gt[1],Fe=wt[1]*Gt[3]-wt[3]*Gt[1],He=wt[2]*Gt[3]-wt[3]*Gt[2],ur=G[0],Ur=G[1],jr=G[2],Wr=G[3];return d[0]=Ur*He-jr*Fe+Wr*Oe,d[1]=-(ur*He)+jr*ge-Wr*he,d[2]=ur*Fe-Ur*ge+Wr*te,d[3]=-(ur*Oe)+Ur*he-jr*te,d}function Ea(d,G,wt,Gt){var te=G[0],he=G[1],ge=G[2],Oe=G[3];return d[0]=te+Gt*(wt[0]-te),d[1]=he+Gt*(wt[1]-he),d[2]=ge+Gt*(wt[2]-ge),d[3]=Oe+Gt*(wt[3]-Oe),d}function so(d,G){G=G||1;var wt,Gt,te,he,ge,Oe;do wt=p.RANDOM()*2-1,Gt=p.RANDOM()*2-1,ge=wt*wt+Gt*Gt;while(ge>=1);do te=p.RANDOM()*2-1,he=p.RANDOM()*2-1,Oe=te*te+he*he;while(Oe>=1);var Fe=Math.sqrt((1-ge)/Oe);return d[0]=G*wt,d[1]=G*Gt,d[2]=G*te*Fe,d[3]=G*he*Fe,d}function Io(d,G,wt){var Gt=G[0],te=G[1],he=G[2],ge=G[3];return d[0]=wt[0]*Gt+wt[4]*te+wt[8]*he+wt[12]*ge,d[1]=wt[1]*Gt+wt[5]*te+wt[9]*he+wt[13]*ge,d[2]=wt[2]*Gt+wt[6]*te+wt[10]*he+wt[14]*ge,d[3]=wt[3]*Gt+wt[7]*te+wt[11]*he+wt[15]*ge,d}function ii(d,G,wt){var Gt=G[0],te=G[1],he=G[2],ge=wt[0],Oe=wt[1],Fe=wt[2],He=wt[3],ur=He*Gt+Oe*he-Fe*te,Ur=He*te+Fe*Gt-ge*he,jr=He*he+ge*te-Oe*Gt,Wr=-ge*Gt-Oe*te-Fe*he;return d[0]=ur*He+Wr*-ge+Ur*-Fe-jr*-Oe,d[1]=Ur*He+Wr*-Oe+jr*-ge-ur*-Fe,d[2]=jr*He+Wr*-Fe+ur*-Oe-Ur*-ge,d[3]=G[3],d}function Yi(d){return d[0]=0,d[1]=0,d[2]=0,d[3]=0,d}function uo(d){return"vec4("+d[0]+", "+d[1]+", "+d[2]+", "+d[3]+")"}function Wo(d,G){return d[0]===G[0]&&d[1]===G[1]&&d[2]===G[2]&&d[3]===G[3]}function ro(d,G){var wt=d[0],Gt=d[1],te=d[2],he=d[3],ge=G[0],Oe=G[1],Fe=G[2],He=G[3];return Math.abs(wt-ge)<=p.EPSILON*Math.max(1,Math.abs(wt),Math.abs(ge))&&Math.abs(Gt-Oe)<=p.EPSILON*Math.max(1,Math.abs(Gt),Math.abs(Oe))&&Math.abs(te-Fe)<=p.EPSILON*Math.max(1,Math.abs(te),Math.abs(Fe))&&Math.abs(he-He)<=p.EPSILON*Math.max(1,Math.abs(he),Math.abs(He))}var go=ze,Oo=sr,Yo=pr,Ai=xa,$i=ba,oa=Wi,ee=ri,de=function(){var d=Dr();return function(G,wt,Gt,te,he,ge){var Oe,Fe;for(wt||(wt=4),Gt||(Gt=0),te?Fe=Math.min(te*wt+Gt,G.length):Fe=G.length,Oe=Gt;Oe<Fe;Oe+=wt)d[0]=G[Oe],d[1]=G[Oe+1],d[2]=G[Oe+2],d[3]=G[Oe+3],he(d,d,ge),G[Oe]=d[0],G[Oe+1]=d[1],G[Oe+2]=d[2],G[Oe+3]=d[3];return G}}();function Be(){var d=new p.ARRAY_TYPE(4);return p.ARRAY_TYPE!=Float32Array&&(d[0]=0,d[1]=0,d[2]=0),d[3]=1,d}function or(d){return d[0]=0,d[1]=0,d[2]=0,d[3]=1,d}function Rr(d,G,wt){wt=wt*.5;var Gt=Math.sin(wt);return d[0]=Gt*G[0],d[1]=Gt*G[1],d[2]=Gt*G[2],d[3]=Math.cos(wt),d}function Nr(d,G){var wt=Math.acos(G[3])*2,Gt=Math.sin(wt/2);return Gt>p.EPSILON?(d[0]=G[0]/Gt,d[1]=G[1]/Gt,d[2]=G[2]/Gt):(d[0]=1,d[1]=0,d[2]=0),wt}function Sr(d,G){var wt=qi(d,G);return Math.acos(2*wt*wt-1)}function qr(d,G,wt){var Gt=G[0],te=G[1],he=G[2],ge=G[3],Oe=wt[0],Fe=wt[1],He=wt[2],ur=wt[3];return d[0]=Gt*ur+ge*Oe+te*He-he*Fe,d[1]=te*ur+ge*Fe+he*Oe-Gt*He,d[2]=he*ur+ge*He+Gt*Fe-te*Oe,d[3]=ge*ur-Gt*Oe-te*Fe-he*He,d}function hn(d,G,wt){wt*=.5;var Gt=G[0],te=G[1],he=G[2],ge=G[3],Oe=Math.sin(wt),Fe=Math.cos(wt);return d[0]=Gt*Fe+ge*Oe,d[1]=te*Fe+he*Oe,d[2]=he*Fe-te*Oe,d[3]=ge*Fe-Gt*Oe,d}function Dn(d,G,wt){wt*=.5;var Gt=G[0],te=G[1],he=G[2],ge=G[3],Oe=Math.sin(wt),Fe=Math.cos(wt);return d[0]=Gt*Fe-he*Oe,d[1]=te*Fe+ge*Oe,d[2]=he*Fe+Gt*Oe,d[3]=ge*Fe-te*Oe,d}function sa(d,G,wt){wt*=.5;var Gt=G[0],te=G[1],he=G[2],ge=G[3],Oe=Math.sin(wt),Fe=Math.cos(wt);return d[0]=Gt*Fe+te*Oe,d[1]=te*Fe-Gt*Oe,d[2]=he*Fe+ge*Oe,d[3]=ge*Fe-he*Oe,d}function qn(d,G){var wt=G[0],Gt=G[1],te=G[2];return d[0]=wt,d[1]=Gt,d[2]=te,d[3]=Math.sqrt(Math.abs(1-wt*wt-Gt*Gt-te*te)),d}function ga(d,G){var wt=G[0],Gt=G[1],te=G[2],he=G[3],ge=Math.sqrt(wt*wt+Gt*Gt+te*te),Oe=Math.exp(he),Fe=ge>0?Oe*Math.sin(ge)/ge:0;return d[0]=wt*Fe,d[1]=Gt*Fe,d[2]=te*Fe,d[3]=Oe*Math.cos(ge),d}function ya(d,G){var wt=G[0],Gt=G[1],te=G[2],he=G[3],ge=Math.sqrt(wt*wt+Gt*Gt+te*te),Oe=ge>0?Math.atan2(ge,he)/ge:0;return d[0]=wt*Oe,d[1]=Gt*Oe,d[2]=te*Oe,d[3]=.5*Math.log(wt*wt+Gt*Gt+te*te+he*he),d}function di(d,G,wt){return ya(d,G),co(d,d,wt),ga(d,d),d}function Ma(d,G,wt,Gt){var te=G[0],he=G[1],ge=G[2],Oe=G[3],Fe=wt[0],He=wt[1],ur=wt[2],Ur=wt[3],jr,Wr,mn,Bn,Qr;return Wr=te*Fe+he*He+ge*ur+Oe*Ur,Wr<0&&(Wr=-Wr,Fe=-Fe,He=-He,ur=-ur,Ur=-Ur),1-Wr>p.EPSILON?(jr=Math.acos(Wr),mn=Math.sin(jr),Bn=Math.sin((1-Gt)*jr)/mn,Qr=Math.sin(Gt*jr)/mn):(Bn=1-Gt,Qr=Gt),d[0]=Bn*te+Qr*Fe,d[1]=Bn*he+Qr*He,d[2]=Bn*ge+Qr*ur,d[3]=Bn*Oe+Qr*Ur,d}function ua(d){var G=p.RANDOM(),wt=p.RANDOM(),Gt=p.RANDOM(),te=Math.sqrt(1-G),he=Math.sqrt(G);return d[0]=te*Math.sin(2*Math.PI*wt),d[1]=te*Math.cos(2*Math.PI*wt),d[2]=he*Math.sin(2*Math.PI*Gt),d[3]=he*Math.cos(2*Math.PI*Gt),d}function ci(d,G){var wt=G[0],Gt=G[1],te=G[2],he=G[3],ge=wt*wt+Gt*Gt+te*te+he*he,Oe=ge?1/ge:0;return d[0]=-wt*Oe,d[1]=-Gt*Oe,d[2]=-te*Oe,d[3]=he*Oe,d}function ei(d,G){return d[0]=-G[0],d[1]=-G[1],d[2]=-G[2],d[3]=G[3],d}function Fa(d,G){var wt=G[0]+G[4]+G[8],Gt;if(wt>0)Gt=Math.sqrt(wt+1),d[3]=.5*Gt,Gt=.5/Gt,d[0]=(G[5]-G[7])*Gt,d[1]=(G[6]-G[2])*Gt,d[2]=(G[1]-G[3])*Gt;else{var te=0;G[4]>G[0]&&(te=1),G[8]>G[te*3+te]&&(te=2);var he=(te+1)%3,ge=(te+2)%3;Gt=Math.sqrt(G[te*3+te]-G[he*3+he]-G[ge*3+ge]+1),d[te]=.5*Gt,Gt=.5/Gt,d[3]=(G[he*3+ge]-G[ge*3+he])*Gt,d[he]=(G[he*3+te]+G[te*3+he])*Gt,d[ge]=(G[ge*3+te]+G[te*3+ge])*Gt}return d}function Di(d,G,wt,Gt){var te=.5*Math.PI/180;G*=te,wt*=te,Gt*=te;var he=Math.sin(G),ge=Math.cos(G),Oe=Math.sin(wt),Fe=Math.cos(wt),He=Math.sin(Gt),ur=Math.cos(Gt);return d[0]=he*Fe*ur-ge*Oe*He,d[1]=ge*Oe*ur+he*Fe*He,d[2]=ge*Fe*He-he*Oe*ur,d[3]=ge*Fe*ur+he*Oe*He,d}function yi(d){return"quat("+d[0]+", "+d[1]+", "+d[2]+", "+d[3]+")"}var ka=fe,ja=jt,Oa=ve,Ni=Ie,Mi=ye,Ri=qr,co=Hn,qi=io,mo=Ea,ts=Wi,es=ts,no=ri,ni=no,Fi=Xi,fo=Wo,Ya=ro,yo=function(){var d=Pr.create(),G=Pr.fromValues(1,0,0),wt=Pr.fromValues(0,1,0);return function(Gt,te,he){var ge=Pr.dot(te,he);return ge<-.999999?(Pr.cross(d,G,te),Pr.len(d)<1e-6&&Pr.cross(d,wt,te),Pr.normalize(d,d),Rr(Gt,d,Math.PI),Gt):ge>.999999?(Gt[0]=0,Gt[1]=0,Gt[2]=0,Gt[3]=1,Gt):(Pr.cross(d,te,he),Gt[0]=d[0],Gt[1]=d[1],Gt[2]=d[2],Gt[3]=1+ge,Fi(Gt,Gt))}}(),ko=function(){var d=Be(),G=Be();return function(wt,Gt,te,he,ge,Oe){return Ma(d,Gt,ge,Oe),Ma(G,te,he,Oe),Ma(wt,d,G,2*Oe*(1-Oe)),wt}}(),ji=function(){var d=Ar.create();return function(G,wt,Gt,te){return d[0]=Gt[0],d[3]=Gt[1],d[6]=Gt[2],d[1]=te[0],d[4]=te[1],d[7]=te[2],d[2]=-wt[0],d[5]=-wt[1],d[8]=-wt[2],Fi(G,Fa(G,d))}}();function is(){var d=new p.ARRAY_TYPE(8);return p.ARRAY_TYPE!=Float32Array&&(d[0]=0,d[1]=0,d[2]=0,d[4]=0,d[5]=0,d[6]=0,d[7]=0),d[3]=1,d}function zi(d){var G=new p.ARRAY_TYPE(8);return G[0]=d[0],G[1]=d[1],G[2]=d[2],G[3]=d[3],G[4]=d[4],G[5]=d[5],G[6]=d[6],G[7]=d[7],G}function Bo(d,G,wt,Gt,te,he,ge,Oe){var Fe=new p.ARRAY_TYPE(8);return Fe[0]=d,Fe[1]=G,Fe[2]=wt,Fe[3]=Gt,Fe[4]=te,Fe[5]=he,Fe[6]=ge,Fe[7]=Oe,Fe}function cs(d,G,wt,Gt,te,he,ge){var Oe=new p.ARRAY_TYPE(8);Oe[0]=d,Oe[1]=G,Oe[2]=wt,Oe[3]=Gt;var Fe=te*.5,He=he*.5,ur=ge*.5;return Oe[4]=Fe*Gt+He*wt-ur*G,Oe[5]=He*Gt+ur*d-Fe*wt,Oe[6]=ur*Gt+Fe*G-He*d,Oe[7]=-Fe*d-He*G-ur*wt,Oe}function Cs(d,G,wt){var Gt=wt[0]*.5,te=wt[1]*.5,he=wt[2]*.5,ge=G[0],Oe=G[1],Fe=G[2],He=G[3];return d[0]=ge,d[1]=Oe,d[2]=Fe,d[3]=He,d[4]=Gt*He+te*Fe-he*Oe,d[5]=te*He+he*ge-Gt*Fe,d[6]=he*He+Gt*Oe-te*ge,d[7]=-Gt*ge-te*Oe-he*Fe,d}function xo(d,G){return d[0]=0,d[1]=0,d[2]=0,d[3]=1,d[4]=G[0]*.5,d[5]=G[1]*.5,d[6]=G[2]*.5,d[7]=0,d}function fs(d,G){return d[0]=G[0],d[1]=G[1],d[2]=G[2],d[3]=G[3],d[4]=0,d[5]=0,d[6]=0,d[7]=0,d}function ls(d,G){var wt=Be();Ce(wt,G);var Gt=new p.ARRAY_TYPE(3);return Jt(Gt,G),Cs(d,wt,Gt),d}function Ds(d,G){return d[0]=G[0],d[1]=G[1],d[2]=G[2],d[3]=G[3],d[4]=G[4],d[5]=G[5],d[6]=G[6],d[7]=G[7],d}function Aa(d){return d[0]=0,d[1]=0,d[2]=0,d[3]=1,d[4]=0,d[5]=0,d[6]=0,d[7]=0,d}function Yt(d,G,wt,Gt,te,he,ge,Oe,Fe){return d[0]=G,d[1]=wt,d[2]=Gt,d[3]=te,d[4]=he,d[5]=ge,d[6]=Oe,d[7]=Fe,d}var Ge=Oa;function nr(d,G){return d[0]=G[4],d[1]=G[5],d[2]=G[6],d[3]=G[7],d}var gr=Oa;function Zr(d,G){return d[4]=G[0],d[5]=G[1],d[6]=G[2],d[7]=G[3],d}function pn(d,G){var wt=G[4],Gt=G[5],te=G[6],he=G[7],ge=-G[0],Oe=-G[1],Fe=-G[2],He=G[3];return d[0]=(wt*He+he*ge+Gt*Fe-te*Oe)*2,d[1]=(Gt*He+he*Oe+te*ge-wt*Fe)*2,d[2]=(te*He+he*Fe+wt*Oe-Gt*ge)*2,d}function $n(d,G,wt){var Gt=G[0],te=G[1],he=G[2],ge=G[3],Oe=wt[0]*.5,Fe=wt[1]*.5,He=wt[2]*.5,ur=G[4],Ur=G[5],jr=G[6],Wr=G[7];return d[0]=Gt,d[1]=te,d[2]=he,d[3]=ge,d[4]=ge*Oe+te*He-he*Fe+ur,d[5]=ge*Fe+he*Oe-Gt*He+Ur,d[6]=ge*He+Gt*Fe-te*Oe+jr,d[7]=-Gt*Oe-te*Fe-he*He+Wr,d}function qa(d,G,wt){var Gt=-G[0],te=-G[1],he=-G[2],ge=G[3],Oe=G[4],Fe=G[5],He=G[6],ur=G[7],Ur=Oe*ge+ur*Gt+Fe*he-He*te,jr=Fe*ge+ur*te+He*Gt-Oe*he,Wr=He*ge+ur*he+Oe*te-Fe*Gt,mn=ur*ge-Oe*Gt-Fe*te-He*he;return hn(d,G,wt),Gt=d[0],te=d[1],he=d[2],ge=d[3],d[4]=Ur*ge+mn*Gt+jr*he-Wr*te,d[5]=jr*ge+mn*te+Wr*Gt-Ur*he,d[6]=Wr*ge+mn*he+Ur*te-jr*Gt,d[7]=mn*ge-Ur*Gt-jr*te-Wr*he,d}function ki(d,G,wt){var Gt=-G[0],te=-G[1],he=-G[2],ge=G[3],Oe=G[4],Fe=G[5],He=G[6],ur=G[7],Ur=Oe*ge+ur*Gt+Fe*he-He*te,jr=Fe*ge+ur*te+He*Gt-Oe*he,Wr=He*ge+ur*he+Oe*te-Fe*Gt,mn=ur*ge-Oe*Gt-Fe*te-He*he;return Dn(d,G,wt),Gt=d[0],te=d[1],he=d[2],ge=d[3],d[4]=Ur*ge+mn*Gt+jr*he-Wr*te,d[5]=jr*ge+mn*te+Wr*Gt-Ur*he,d[6]=Wr*ge+mn*he+Ur*te-jr*Gt,d[7]=mn*ge-Ur*Gt-jr*te-Wr*he,d}function Do(d,G,wt){var Gt=-G[0],te=-G[1],he=-G[2],ge=G[3],Oe=G[4],Fe=G[5],He=G[6],ur=G[7],Ur=Oe*ge+ur*Gt+Fe*he-He*te,jr=Fe*ge+ur*te+He*Gt-Oe*he,Wr=He*ge+ur*he+Oe*te-Fe*Gt,mn=ur*ge-Oe*Gt-Fe*te-He*he;return sa(d,G,wt),Gt=d[0],te=d[1],he=d[2],ge=d[3],d[4]=Ur*ge+mn*Gt+jr*he-Wr*te,d[5]=jr*ge+mn*te+Wr*Gt-Ur*he,d[6]=Wr*ge+mn*he+Ur*te-jr*Gt,d[7]=mn*ge-Ur*Gt-jr*te-Wr*he,d}function Ho(d,G,wt){var Gt=wt[0],te=wt[1],he=wt[2],ge=wt[3],Oe=G[0],Fe=G[1],He=G[2],ur=G[3];return d[0]=Oe*ge+ur*Gt+Fe*he-He*te,d[1]=Fe*ge+ur*te+He*Gt-Oe*he,d[2]=He*ge+ur*he+Oe*te-Fe*Gt,d[3]=ur*ge-Oe*Gt-Fe*te-He*he,Oe=G[4],Fe=G[5],He=G[6],ur=G[7],d[4]=Oe*ge+ur*Gt+Fe*he-He*te,d[5]=Fe*ge+ur*te+He*Gt-Oe*he,d[6]=He*ge+ur*he+Oe*te-Fe*Gt,d[7]=ur*ge-Oe*Gt-Fe*te-He*he,d}function ks(d,G,wt){var Gt=G[0],te=G[1],he=G[2],ge=G[3],Oe=wt[0],Fe=wt[1],He=wt[2],ur=wt[3];return d[0]=Gt*ur+ge*Oe+te*He-he*Fe,d[1]=te*ur+ge*Fe+he*Oe-Gt*He,d[2]=he*ur+ge*He+Gt*Fe-te*Oe,d[3]=ge*ur-Gt*Oe-te*Fe-he*He,Oe=wt[4],Fe=wt[5],He=wt[6],ur=wt[7],d[4]=Gt*ur+ge*Oe+te*He-he*Fe,d[5]=te*ur+ge*Fe+he*Oe-Gt*He,d[6]=he*ur+ge*He+Gt*Fe-te*Oe,d[7]=ge*ur-Gt*Oe-te*Fe-he*He,d}function Qi(d,G,wt,Gt){if(Math.abs(Gt)<p.EPSILON)return Ds(d,G);var te=Math.hypot(wt[0],wt[1],wt[2]);Gt=Gt*.5;var he=Math.sin(Gt),ge=he*wt[0]/te,Oe=he*wt[1]/te,Fe=he*wt[2]/te,He=Math.cos(Gt),ur=G[0],Ur=G[1],jr=G[2],Wr=G[3];d[0]=ur*He+Wr*ge+Ur*Fe-jr*Oe,d[1]=Ur*He+Wr*Oe+jr*ge-ur*Fe,d[2]=jr*He+Wr*Fe+ur*Oe-Ur*ge,d[3]=Wr*He-ur*ge-Ur*Oe-jr*Fe;var mn=G[4],Bn=G[5],Qr=G[6],na=G[7];return d[4]=mn*He+na*ge+Bn*Fe-Qr*Oe,d[5]=Bn*He+na*Oe+Qr*ge-mn*Fe,d[6]=Qr*He+na*Fe+mn*Oe-Bn*ge,d[7]=na*He-mn*ge-Bn*Oe-Qr*Fe,d}function Lo(d,G,wt){return d[0]=G[0]+wt[0],d[1]=G[1]+wt[1],d[2]=G[2]+wt[2],d[3]=G[3]+wt[3],d[4]=G[4]+wt[4],d[5]=G[5]+wt[5],d[6]=G[6]+wt[6],d[7]=G[7]+wt[7],d}function ds(d,G,wt){var Gt=G[0],te=G[1],he=G[2],ge=G[3],Oe=wt[4],Fe=wt[5],He=wt[6],ur=wt[7],Ur=G[4],jr=G[5],Wr=G[6],mn=G[7],Bn=wt[0],Qr=wt[1],na=wt[2],Va=wt[3];return d[0]=Gt*Va+ge*Bn+te*na-he*Qr,d[1]=te*Va+ge*Qr+he*Bn-Gt*na,d[2]=he*Va+ge*na+Gt*Qr-te*Bn,d[3]=ge*Va-Gt*Bn-te*Qr-he*na,d[4]=Gt*ur+ge*Oe+te*He-he*Fe+Ur*Va+mn*Bn+jr*na-Wr*Qr,d[5]=te*ur+ge*Fe+he*Oe-Gt*He+jr*Va+mn*Qr+Wr*Bn-Ur*na,d[6]=he*ur+ge*He+Gt*Fe-te*Oe+Wr*Va+mn*na+Ur*Qr-jr*Bn,d[7]=ge*ur-Gt*Oe-te*Fe-he*He+mn*Va-Ur*Bn-jr*Qr-Wr*na,d}var Bs=ds;function ps(d,G,wt){return d[0]=G[0]*wt,d[1]=G[1]*wt,d[2]=G[2]*wt,d[3]=G[3]*wt,d[4]=G[4]*wt,d[5]=G[5]*wt,d[6]=G[6]*wt,d[7]=G[7]*wt,d}var Vs=qi;function qs(d,G,wt,Gt){var te=1-Gt;return Vs(G,wt)<0&&(Gt=-Gt),d[0]=G[0]*te+wt[0]*Gt,d[1]=G[1]*te+wt[1]*Gt,d[2]=G[2]*te+wt[2]*Gt,d[3]=G[3]*te+wt[3]*Gt,d[4]=G[4]*te+wt[4]*Gt,d[5]=G[5]*te+wt[5]*Gt,d[6]=G[6]*te+wt[6]*Gt,d[7]=G[7]*te+wt[7]*Gt,d}function Hs(d,G){var wt=Fs(G);return d[0]=-G[0]/wt,d[1]=-G[1]/wt,d[2]=-G[2]/wt,d[3]=G[3]/wt,d[4]=-G[4]/wt,d[5]=-G[5]/wt,d[6]=-G[6]/wt,d[7]=G[7]/wt,d}function fu(d,G){return d[0]=-G[0],d[1]=-G[1],d[2]=-G[2],d[3]=G[3],d[4]=-G[4],d[5]=-G[5],d[6]=-G[6],d[7]=G[7],d}var gs=ts,Ls=gs,Fs=no,os=Fs;function _u(d,G){var wt=Fs(G);if(wt>0){wt=Math.sqrt(wt);var Gt=G[0]/wt,te=G[1]/wt,he=G[2]/wt,ge=G[3]/wt,Oe=G[4],Fe=G[5],He=G[6],ur=G[7],Ur=Gt*Oe+te*Fe+he*He+ge*ur;d[0]=Gt,d[1]=te,d[2]=he,d[3]=ge,d[4]=(Oe-Gt*Ur)/wt,d[5]=(Fe-te*Ur)/wt,d[6]=(He-he*Ur)/wt,d[7]=(ur-ge*Ur)/wt}return d}function Cu(d){return"quat2("+d[0]+", "+d[1]+", "+d[2]+", "+d[3]+", "+d[4]+", "+d[5]+", "+d[6]+", "+d[7]+")"}function bo(d,G){return d[0]===G[0]&&d[1]===G[1]&&d[2]===G[2]&&d[3]===G[3]&&d[4]===G[4]&&d[5]===G[5]&&d[6]===G[6]&&d[7]===G[7]}function Zo(d,G){var wt=d[0],Gt=d[1],te=d[2],he=d[3],ge=d[4],Oe=d[5],Fe=d[6],He=d[7],ur=G[0],Ur=G[1],jr=G[2],Wr=G[3],mn=G[4],Bn=G[5],Qr=G[6],na=G[7];return Math.abs(wt-ur)<=p.EPSILON*Math.max(1,Math.abs(wt),Math.abs(ur))&&Math.abs(Gt-Ur)<=p.EPSILON*Math.max(1,Math.abs(Gt),Math.abs(Ur))&&Math.abs(te-jr)<=p.EPSILON*Math.max(1,Math.abs(te),Math.abs(jr))&&Math.abs(he-Wr)<=p.EPSILON*Math.max(1,Math.abs(he),Math.abs(Wr))&&Math.abs(ge-mn)<=p.EPSILON*Math.max(1,Math.abs(ge),Math.abs(mn))&&Math.abs(Oe-Bn)<=p.EPSILON*Math.max(1,Math.abs(Oe),Math.abs(Bn))&&Math.abs(Fe-Qr)<=p.EPSILON*Math.max(1,Math.abs(Fe),Math.abs(Qr))&&Math.abs(He-na)<=p.EPSILON*Math.max(1,Math.abs(He),Math.abs(na))}var ss=C(631437)},935600:function(Ve,z,C){"use strict";C.r(z),C.d(z,{add:function(){return rt},adjoint:function(){return g},clone:function(){return T},copy:function(){return L},create:function(){return k},determinant:function(){return A},equals:function(){return Xt},exactEquals:function(){return pt},frob:function(){return tt},fromMat2d:function(){return U},fromMat4:function(){return w},fromQuat:function(){return W},fromRotation:function(){return Y},fromScaling:function(){return $},fromTranslation:function(){return h},fromValues:function(){return P},identity:function(){return m},invert:function(){return x},mul:function(){return Ct},multiply:function(){return E},multiplyScalar:function(){return ot},multiplyScalarAndAdd:function(){return xt},normalFromMat4:function(){return V},projection:function(){return H},rotate:function(){return F},scale:function(){return y},set:function(){return p},str:function(){return Q},sub:function(){return At},subtract:function(){return ct},translate:function(){return D},transpose:function(){return S}});var b=C(73633);function k(){var Z=new b.ARRAY_TYPE(9);return b.ARRAY_TYPE!=Float32Array&&(Z[1]=0,Z[2]=0,Z[3]=0,Z[5]=0,Z[6]=0,Z[7]=0),Z[0]=1,Z[4]=1,Z[8]=1,Z}function w(Z,q){return Z[0]=q[0],Z[1]=q[1],Z[2]=q[2],Z[3]=q[4],Z[4]=q[5],Z[5]=q[6],Z[6]=q[8],Z[7]=q[9],Z[8]=q[10],Z}function T(Z){var q=new b.ARRAY_TYPE(9);return q[0]=Z[0],q[1]=Z[1],q[2]=Z[2],q[3]=Z[3],q[4]=Z[4],q[5]=Z[5],q[6]=Z[6],q[7]=Z[7],q[8]=Z[8],q}function L(Z,q){return Z[0]=q[0],Z[1]=q[1],Z[2]=q[2],Z[3]=q[3],Z[4]=q[4],Z[5]=q[5],Z[6]=q[6],Z[7]=q[7],Z[8]=q[8],Z}function P(Z,q,bt,_t,nt,vt,It,Pt,Et){var Nt=new b.ARRAY_TYPE(9);return Nt[0]=Z,Nt[1]=q,Nt[2]=bt,Nt[3]=_t,Nt[4]=nt,Nt[5]=vt,Nt[6]=It,Nt[7]=Pt,Nt[8]=Et,Nt}function p(Z,q,bt,_t,nt,vt,It,Pt,Et,Nt){return Z[0]=q,Z[1]=bt,Z[2]=_t,Z[3]=nt,Z[4]=vt,Z[5]=It,Z[6]=Pt,Z[7]=Et,Z[8]=Nt,Z}function m(Z){return Z[0]=1,Z[1]=0,Z[2]=0,Z[3]=0,Z[4]=1,Z[5]=0,Z[6]=0,Z[7]=0,Z[8]=1,Z}function S(Z,q){if(Z===q){var bt=q[1],_t=q[2],nt=q[5];Z[1]=q[3],Z[2]=q[6],Z[3]=bt,Z[5]=q[7],Z[6]=_t,Z[7]=nt}else Z[0]=q[0],Z[1]=q[3],Z[2]=q[6],Z[3]=q[1],Z[4]=q[4],Z[5]=q[7],Z[6]=q[2],Z[7]=q[5],Z[8]=q[8];return Z}function x(Z,q){var bt=q[0],_t=q[1],nt=q[2],vt=q[3],It=q[4],Pt=q[5],Et=q[6],Nt=q[7],$t=q[8],ue=$t*It-Pt*Nt,ie=-$t*vt+Pt*Et,Dt=Nt*vt-It*Et,ne=bt*ue+_t*ie+nt*Dt;return ne?(ne=1/ne,Z[0]=ue*ne,Z[1]=(-$t*_t+nt*Nt)*ne,Z[2]=(Pt*_t-nt*It)*ne,Z[3]=ie*ne,Z[4]=($t*bt-nt*Et)*ne,Z[5]=(-Pt*bt+nt*vt)*ne,Z[6]=Dt*ne,Z[7]=(-Nt*bt+_t*Et)*ne,Z[8]=(It*bt-_t*vt)*ne,Z):null}function g(Z,q){var bt=q[0],_t=q[1],nt=q[2],vt=q[3],It=q[4],Pt=q[5],Et=q[6],Nt=q[7],$t=q[8];return Z[0]=It*$t-Pt*Nt,Z[1]=nt*Nt-_t*$t,Z[2]=_t*Pt-nt*It,Z[3]=Pt*Et-vt*$t,Z[4]=bt*$t-nt*Et,Z[5]=nt*vt-bt*Pt,Z[6]=vt*Nt-It*Et,Z[7]=_t*Et-bt*Nt,Z[8]=bt*It-_t*vt,Z}function A(Z){var q=Z[0],bt=Z[1],_t=Z[2],nt=Z[3],vt=Z[4],It=Z[5],Pt=Z[6],Et=Z[7],Nt=Z[8];return q*(Nt*vt-It*Et)+bt*(-Nt*nt+It*Pt)+_t*(Et*nt-vt*Pt)}function E(Z,q,bt){var _t=q[0],nt=q[1],vt=q[2],It=q[3],Pt=q[4],Et=q[5],Nt=q[6],$t=q[7],ue=q[8],ie=bt[0],Dt=bt[1],ne=bt[2],pe=bt[3],Wt=bt[4],ae=bt[5],Se=bt[6],be=bt[7],Qt=bt[8];return Z[0]=ie*_t+Dt*It+ne*Nt,Z[1]=ie*nt+Dt*Pt+ne*$t,Z[2]=ie*vt+Dt*Et+ne*ue,Z[3]=pe*_t+Wt*It+ae*Nt,Z[4]=pe*nt+Wt*Pt+ae*$t,Z[5]=pe*vt+Wt*Et+ae*ue,Z[6]=Se*_t+be*It+Qt*Nt,Z[7]=Se*nt+be*Pt+Qt*$t,Z[8]=Se*vt+be*Et+Qt*ue,Z}function D(Z,q,bt){var _t=q[0],nt=q[1],vt=q[2],It=q[3],Pt=q[4],Et=q[5],Nt=q[6],$t=q[7],ue=q[8],ie=bt[0],Dt=bt[1];return Z[0]=_t,Z[1]=nt,Z[2]=vt,Z[3]=It,Z[4]=Pt,Z[5]=Et,Z[6]=ie*_t+Dt*It+Nt,Z[7]=ie*nt+Dt*Pt+$t,Z[8]=ie*vt+Dt*Et+ue,Z}function F(Z,q,bt){var _t=q[0],nt=q[1],vt=q[2],It=q[3],Pt=q[4],Et=q[5],Nt=q[6],$t=q[7],ue=q[8],ie=Math.sin(bt),Dt=Math.cos(bt);return Z[0]=Dt*_t+ie*It,Z[1]=Dt*nt+ie*Pt,Z[2]=Dt*vt+ie*Et,Z[3]=Dt*It-ie*_t,Z[4]=Dt*Pt-ie*nt,Z[5]=Dt*Et-ie*vt,Z[6]=Nt,Z[7]=$t,Z[8]=ue,Z}function y(Z,q,bt){var _t=bt[0],nt=bt[1];return Z[0]=_t*q[0],Z[1]=_t*q[1],Z[2]=_t*q[2],Z[3]=nt*q[3],Z[4]=nt*q[4],Z[5]=nt*q[5],Z[6]=q[6],Z[7]=q[7],Z[8]=q[8],Z}function h(Z,q){return Z[0]=1,Z[1]=0,Z[2]=0,Z[3]=0,Z[4]=1,Z[5]=0,Z[6]=q[0],Z[7]=q[1],Z[8]=1,Z}function Y(Z,q){var bt=Math.sin(q),_t=Math.cos(q);return Z[0]=_t,Z[1]=bt,Z[2]=0,Z[3]=-bt,Z[4]=_t,Z[5]=0,Z[6]=0,Z[7]=0,Z[8]=1,Z}function $(Z,q){return Z[0]=q[0],Z[1]=0,Z[2]=0,Z[3]=0,Z[4]=q[1],Z[5]=0,Z[6]=0,Z[7]=0,Z[8]=1,Z}function U(Z,q){return Z[0]=q[0],Z[1]=q[1],Z[2]=0,Z[3]=q[2],Z[4]=q[3],Z[5]=0,Z[6]=q[4],Z[7]=q[5],Z[8]=1,Z}function W(Z,q){var bt=q[0],_t=q[1],nt=q[2],vt=q[3],It=bt+bt,Pt=_t+_t,Et=nt+nt,Nt=bt*It,$t=_t*It,ue=_t*Pt,ie=nt*It,Dt=nt*Pt,ne=nt*Et,pe=vt*It,Wt=vt*Pt,ae=vt*Et;return Z[0]=1-ue-ne,Z[3]=$t-ae,Z[6]=ie+Wt,Z[1]=$t+ae,Z[4]=1-Nt-ne,Z[7]=Dt-pe,Z[2]=ie-Wt,Z[5]=Dt+pe,Z[8]=1-Nt-ue,Z}function V(Z,q){var bt=q[0],_t=q[1],nt=q[2],vt=q[3],It=q[4],Pt=q[5],Et=q[6],Nt=q[7],$t=q[8],ue=q[9],ie=q[10],Dt=q[11],ne=q[12],pe=q[13],Wt=q[14],ae=q[15],Se=bt*Pt-_t*It,be=bt*Et-nt*It,Qt=bt*Nt-vt*It,we=_t*Et-nt*Pt,Tt=_t*Nt-vt*Pt,Le=nt*Nt-vt*Et,Mr=$t*pe-ue*ne,Ar=$t*Wt-ie*ne,Ir=$t*ae-Dt*ne,Br=ue*Wt-ie*pe,dn=ue*ae-Dt*pe,an=ie*ae-Dt*Wt,Ln=Se*an-be*dn+Qt*Br+we*Ir-Tt*Ar+Le*Mr;return Ln?(Ln=1/Ln,Z[0]=(Pt*an-Et*dn+Nt*Br)*Ln,Z[1]=(Et*Ir-It*an-Nt*Ar)*Ln,Z[2]=(It*dn-Pt*Ir+Nt*Mr)*Ln,Z[3]=(nt*dn-_t*an-vt*Br)*Ln,Z[4]=(bt*an-nt*Ir+vt*Ar)*Ln,Z[5]=(_t*Ir-bt*dn-vt*Mr)*Ln,Z[6]=(pe*Le-Wt*Tt+ae*we)*Ln,Z[7]=(Wt*Qt-ne*Le-ae*be)*Ln,Z[8]=(ne*Tt-pe*Qt+ae*Se)*Ln,Z):null}function H(Z,q,bt){return Z[0]=2/q,Z[1]=0,Z[2]=0,Z[3]=0,Z[4]=-2/bt,Z[5]=0,Z[6]=-1,Z[7]=1,Z[8]=1,Z}function Q(Z){return"mat3("+Z[0]+", "+Z[1]+", "+Z[2]+", "+Z[3]+", "+Z[4]+", "+Z[5]+", "+Z[6]+", "+Z[7]+", "+Z[8]+")"}function tt(Z){return Math.hypot(Z[0],Z[1],Z[2],Z[3],Z[4],Z[5],Z[6],Z[7],Z[8])}function rt(Z,q,bt){return Z[0]=q[0]+bt[0],Z[1]=q[1]+bt[1],Z[2]=q[2]+bt[2],Z[3]=q[3]+bt[3],Z[4]=q[4]+bt[4],Z[5]=q[5]+bt[5],Z[6]=q[6]+bt[6],Z[7]=q[7]+bt[7],Z[8]=q[8]+bt[8],Z}function ct(Z,q,bt){return Z[0]=q[0]-bt[0],Z[1]=q[1]-bt[1],Z[2]=q[2]-bt[2],Z[3]=q[3]-bt[3],Z[4]=q[4]-bt[4],Z[5]=q[5]-bt[5],Z[6]=q[6]-bt[6],Z[7]=q[7]-bt[7],Z[8]=q[8]-bt[8],Z}function ot(Z,q,bt){return Z[0]=q[0]*bt,Z[1]=q[1]*bt,Z[2]=q[2]*bt,Z[3]=q[3]*bt,Z[4]=q[4]*bt,Z[5]=q[5]*bt,Z[6]=q[6]*bt,Z[7]=q[7]*bt,Z[8]=q[8]*bt,Z}function xt(Z,q,bt,_t){return Z[0]=q[0]+bt[0]*_t,Z[1]=q[1]+bt[1]*_t,Z[2]=q[2]+bt[2]*_t,Z[3]=q[3]+bt[3]*_t,Z[4]=q[4]+bt[4]*_t,Z[5]=q[5]+bt[5]*_t,Z[6]=q[6]+bt[6]*_t,Z[7]=q[7]+bt[7]*_t,Z[8]=q[8]+bt[8]*_t,Z}function pt(Z,q){return Z[0]===q[0]&&Z[1]===q[1]&&Z[2]===q[2]&&Z[3]===q[3]&&Z[4]===q[4]&&Z[5]===q[5]&&Z[6]===q[6]&&Z[7]===q[7]&&Z[8]===q[8]}function Xt(Z,q){var bt=Z[0],_t=Z[1],nt=Z[2],vt=Z[3],It=Z[4],Pt=Z[5],Et=Z[6],Nt=Z[7],$t=Z[8],ue=q[0],ie=q[1],Dt=q[2],ne=q[3],pe=q[4],Wt=q[5],ae=q[6],Se=q[7],be=q[8];return Math.abs(bt-ue)<=b.EPSILON*Math.max(1,Math.abs(bt),Math.abs(ue))&&Math.abs(_t-ie)<=b.EPSILON*Math.max(1,Math.abs(_t),Math.abs(ie))&&Math.abs(nt-Dt)<=b.EPSILON*Math.max(1,Math.abs(nt),Math.abs(Dt))&&Math.abs(vt-ne)<=b.EPSILON*Math.max(1,Math.abs(vt),Math.abs(ne))&&Math.abs(It-pe)<=b.EPSILON*Math.max(1,Math.abs(It),Math.abs(pe))&&Math.abs(Pt-Wt)<=b.EPSILON*Math.max(1,Math.abs(Pt),Math.abs(Wt))&&Math.abs(Et-ae)<=b.EPSILON*Math.max(1,Math.abs(Et),Math.abs(ae))&&Math.abs(Nt-Se)<=b.EPSILON*Math.max(1,Math.abs(Nt),Math.abs(Se))&&Math.abs($t-be)<=b.EPSILON*Math.max(1,Math.abs($t),Math.abs(be))}var Ct=E,At=ct},631437:function(Ve,z,C){"use strict";C.r(z),C.d(z,{add:function(){return p},angle:function(){return Z},ceil:function(){return g},clone:function(){return w},copy:function(){return L},create:function(){return k},cross:function(){return rt},dist:function(){return Nt},distance:function(){return Y},div:function(){return Et},divide:function(){return x},dot:function(){return tt},equals:function(){return nt},exactEquals:function(){return _t},floor:function(){return A},forEach:function(){return ie},fromValues:function(){return T},inverse:function(){return H},len:function(){return vt},length:function(){return U},lerp:function(){return ct},max:function(){return D},min:function(){return E},mul:function(){return Pt},multiply:function(){return S},negate:function(){return V},normalize:function(){return Q},random:function(){return ot},rotate:function(){return At},round:function(){return F},scale:function(){return y},scaleAndAdd:function(){return h},set:function(){return P},sqrDist:function(){return $t},sqrLen:function(){return ue},squaredDistance:function(){return $},squaredLength:function(){return W},str:function(){return bt},sub:function(){return It},subtract:function(){return m},transformMat2:function(){return xt},transformMat2d:function(){return pt},transformMat3:function(){return Xt},transformMat4:function(){return Ct},zero:function(){return q}});var b=C(73633);function k(){var Dt=new b.ARRAY_TYPE(2);return b.ARRAY_TYPE!=Float32Array&&(Dt[0]=0,Dt[1]=0),Dt}function w(Dt){var ne=new b.ARRAY_TYPE(2);return ne[0]=Dt[0],ne[1]=Dt[1],ne}function T(Dt,ne){var pe=new b.ARRAY_TYPE(2);return pe[0]=Dt,pe[1]=ne,pe}function L(Dt,ne){return Dt[0]=ne[0],Dt[1]=ne[1],Dt}function P(Dt,ne,pe){return Dt[0]=ne,Dt[1]=pe,Dt}function p(Dt,ne,pe){return Dt[0]=ne[0]+pe[0],Dt[1]=ne[1]+pe[1],Dt}function m(Dt,ne,pe){return Dt[0]=ne[0]-pe[0],Dt[1]=ne[1]-pe[1],Dt}function S(Dt,ne,pe){return Dt[0]=ne[0]*pe[0],Dt[1]=ne[1]*pe[1],Dt}function x(Dt,ne,pe){return Dt[0]=ne[0]/pe[0],Dt[1]=ne[1]/pe[1],Dt}function g(Dt,ne){return Dt[0]=Math.ceil(ne[0]),Dt[1]=Math.ceil(ne[1]),Dt}function A(Dt,ne){return Dt[0]=Math.floor(ne[0]),Dt[1]=Math.floor(ne[1]),Dt}function E(Dt,ne,pe){return Dt[0]=Math.min(ne[0],pe[0]),Dt[1]=Math.min(ne[1],pe[1]),Dt}function D(Dt,ne,pe){return Dt[0]=Math.max(ne[0],pe[0]),Dt[1]=Math.max(ne[1],pe[1]),Dt}function F(Dt,ne){return Dt[0]=Math.round(ne[0]),Dt[1]=Math.round(ne[1]),Dt}function y(Dt,ne,pe){return Dt[0]=ne[0]*pe,Dt[1]=ne[1]*pe,Dt}function h(Dt,ne,pe,Wt){return Dt[0]=ne[0]+pe[0]*Wt,Dt[1]=ne[1]+pe[1]*Wt,Dt}function Y(Dt,ne){var pe=ne[0]-Dt[0],Wt=ne[1]-Dt[1];return Math.hypot(pe,Wt)}function $(Dt,ne){var pe=ne[0]-Dt[0],Wt=ne[1]-Dt[1];return pe*pe+Wt*Wt}function U(Dt){var ne=Dt[0],pe=Dt[1];return Math.hypot(ne,pe)}function W(Dt){var ne=Dt[0],pe=Dt[1];return ne*ne+pe*pe}function V(Dt,ne){return Dt[0]=-ne[0],Dt[1]=-ne[1],Dt}function H(Dt,ne){return Dt[0]=1/ne[0],Dt[1]=1/ne[1],Dt}function Q(Dt,ne){var pe=ne[0],Wt=ne[1],ae=pe*pe+Wt*Wt;return ae>0&&(ae=1/Math.sqrt(ae)),Dt[0]=ne[0]*ae,Dt[1]=ne[1]*ae,Dt}function tt(Dt,ne){return Dt[0]*ne[0]+Dt[1]*ne[1]}function rt(Dt,ne,pe){var Wt=ne[0]*pe[1]-ne[1]*pe[0];return Dt[0]=Dt[1]=0,Dt[2]=Wt,Dt}function ct(Dt,ne,pe,Wt){var ae=ne[0],Se=ne[1];return Dt[0]=ae+Wt*(pe[0]-ae),Dt[1]=Se+Wt*(pe[1]-Se),Dt}function ot(Dt,ne){ne=ne||1;var pe=b.RANDOM()*2*Math.PI;return Dt[0]=Math.cos(pe)*ne,Dt[1]=Math.sin(pe)*ne,Dt}function xt(Dt,ne,pe){var Wt=ne[0],ae=ne[1];return Dt[0]=pe[0]*Wt+pe[2]*ae,Dt[1]=pe[1]*Wt+pe[3]*ae,Dt}function pt(Dt,ne,pe){var Wt=ne[0],ae=ne[1];return Dt[0]=pe[0]*Wt+pe[2]*ae+pe[4],Dt[1]=pe[1]*Wt+pe[3]*ae+pe[5],Dt}function Xt(Dt,ne,pe){var Wt=ne[0],ae=ne[1];return Dt[0]=pe[0]*Wt+pe[3]*ae+pe[6],Dt[1]=pe[1]*Wt+pe[4]*ae+pe[7],Dt}function Ct(Dt,ne,pe){var Wt=ne[0],ae=ne[1];return Dt[0]=pe[0]*Wt+pe[4]*ae+pe[12],Dt[1]=pe[1]*Wt+pe[5]*ae+pe[13],Dt}function At(Dt,ne,pe,Wt){var ae=ne[0]-pe[0],Se=ne[1]-pe[1],be=Math.sin(Wt),Qt=Math.cos(Wt);return Dt[0]=ae*Qt-Se*be+pe[0],Dt[1]=ae*be+Se*Qt+pe[1],Dt}function Z(Dt,ne){var pe=Dt[0],Wt=Dt[1],ae=ne[0],Se=ne[1],be=Math.sqrt(pe*pe+Wt*Wt)*Math.sqrt(ae*ae+Se*Se),Qt=be&&(pe*ae+Wt*Se)/be;return Math.acos(Math.min(Math.max(Qt,-1),1))}function q(Dt){return Dt[0]=0,Dt[1]=0,Dt}function bt(Dt){return"vec2("+Dt[0]+", "+Dt[1]+")"}function _t(Dt,ne){return Dt[0]===ne[0]&&Dt[1]===ne[1]}function nt(Dt,ne){var pe=Dt[0],Wt=Dt[1],ae=ne[0],Se=ne[1];return Math.abs(pe-ae)<=b.EPSILON*Math.max(1,Math.abs(pe),Math.abs(ae))&&Math.abs(Wt-Se)<=b.EPSILON*Math.max(1,Math.abs(Wt),Math.abs(Se))}var vt=U,It=m,Pt=S,Et=x,Nt=Y,$t=$,ue=W,ie=function(){var Dt=k();return function(ne,pe,Wt,ae,Se,be){var Qt,we;for(pe||(pe=2),Wt||(Wt=0),ae?we=Math.min(ae*pe+Wt,ne.length):we=ne.length,Qt=Wt;Qt<we;Qt+=pe)Dt[0]=ne[Qt],Dt[1]=ne[Qt+1],Se(Dt,Dt,be),ne[Qt]=Dt[0],ne[Qt+1]=Dt[1];return ne}}()},277160:function(Ve,z,C){"use strict";C.r(z),C.d(z,{add:function(){return m},angle:function(){return _t},bezier:function(){return xt},ceil:function(){return A},clone:function(){return w},copy:function(){return P},create:function(){return k},cross:function(){return rt},dist:function(){return ue},distance:function(){return $},div:function(){return $t},divide:function(){return g},dot:function(){return tt},equals:function(){return Pt},exactEquals:function(){return It},floor:function(){return E},forEach:function(){return pe},fromValues:function(){return L},hermite:function(){return ot},inverse:function(){return H},len:function(){return Dt},length:function(){return T},lerp:function(){return ct},max:function(){return F},min:function(){return D},mul:function(){return Nt},multiply:function(){return x},negate:function(){return V},normalize:function(){return Q},random:function(){return pt},rotateX:function(){return Z},rotateY:function(){return q},rotateZ:function(){return bt},round:function(){return y},scale:function(){return h},scaleAndAdd:function(){return Y},set:function(){return p},sqrDist:function(){return ie},sqrLen:function(){return ne},squaredDistance:function(){return U},squaredLength:function(){return W},str:function(){return vt},sub:function(){return Et},subtract:function(){return S},transformMat3:function(){return Ct},transformMat4:function(){return Xt},transformQuat:function(){return At},zero:function(){return nt}});var b=C(73633);function k(){var Wt=new b.ARRAY_TYPE(3);return b.ARRAY_TYPE!=Float32Array&&(Wt[0]=0,Wt[1]=0,Wt[2]=0),Wt}function w(Wt){var ae=new b.ARRAY_TYPE(3);return ae[0]=Wt[0],ae[1]=Wt[1],ae[2]=Wt[2],ae}function T(Wt){var ae=Wt[0],Se=Wt[1],be=Wt[2];return Math.hypot(ae,Se,be)}function L(Wt,ae,Se){var be=new b.ARRAY_TYPE(3);return be[0]=Wt,be[1]=ae,be[2]=Se,be}function P(Wt,ae){return Wt[0]=ae[0],Wt[1]=ae[1],Wt[2]=ae[2],Wt}function p(Wt,ae,Se,be){return Wt[0]=ae,Wt[1]=Se,Wt[2]=be,Wt}function m(Wt,ae,Se){return Wt[0]=ae[0]+Se[0],Wt[1]=ae[1]+Se[1],Wt[2]=ae[2]+Se[2],Wt}function S(Wt,ae,Se){return Wt[0]=ae[0]-Se[0],Wt[1]=ae[1]-Se[1],Wt[2]=ae[2]-Se[2],Wt}function x(Wt,ae,Se){return Wt[0]=ae[0]*Se[0],Wt[1]=ae[1]*Se[1],Wt[2]=ae[2]*Se[2],Wt}function g(Wt,ae,Se){return Wt[0]=ae[0]/Se[0],Wt[1]=ae[1]/Se[1],Wt[2]=ae[2]/Se[2],Wt}function A(Wt,ae){return Wt[0]=Math.ceil(ae[0]),Wt[1]=Math.ceil(ae[1]),Wt[2]=Math.ceil(ae[2]),Wt}function E(Wt,ae){return Wt[0]=Math.floor(ae[0]),Wt[1]=Math.floor(ae[1]),Wt[2]=Math.floor(ae[2]),Wt}function D(Wt,ae,Se){return Wt[0]=Math.min(ae[0],Se[0]),Wt[1]=Math.min(ae[1],Se[1]),Wt[2]=Math.min(ae[2],Se[2]),Wt}function F(Wt,ae,Se){return Wt[0]=Math.max(ae[0],Se[0]),Wt[1]=Math.max(ae[1],Se[1]),Wt[2]=Math.max(ae[2],Se[2]),Wt}function y(Wt,ae){return Wt[0]=Math.round(ae[0]),Wt[1]=Math.round(ae[1]),Wt[2]=Math.round(ae[2]),Wt}function h(Wt,ae,Se){return Wt[0]=ae[0]*Se,Wt[1]=ae[1]*Se,Wt[2]=ae[2]*Se,Wt}function Y(Wt,ae,Se,be){return Wt[0]=ae[0]+Se[0]*be,Wt[1]=ae[1]+Se[1]*be,Wt[2]=ae[2]+Se[2]*be,Wt}function $(Wt,ae){var Se=ae[0]-Wt[0],be=ae[1]-Wt[1],Qt=ae[2]-Wt[2];return Math.hypot(Se,be,Qt)}function U(Wt,ae){var Se=ae[0]-Wt[0],be=ae[1]-Wt[1],Qt=ae[2]-Wt[2];return Se*Se+be*be+Qt*Qt}function W(Wt){var ae=Wt[0],Se=Wt[1],be=Wt[2];return ae*ae+Se*Se+be*be}function V(Wt,ae){return Wt[0]=-ae[0],Wt[1]=-ae[1],Wt[2]=-ae[2],Wt}function H(Wt,ae){return Wt[0]=1/ae[0],Wt[1]=1/ae[1],Wt[2]=1/ae[2],Wt}function Q(Wt,ae){var Se=ae[0],be=ae[1],Qt=ae[2],we=Se*Se+be*be+Qt*Qt;return we>0&&(we=1/Math.sqrt(we)),Wt[0]=ae[0]*we,Wt[1]=ae[1]*we,Wt[2]=ae[2]*we,Wt}function tt(Wt,ae){return Wt[0]*ae[0]+Wt[1]*ae[1]+Wt[2]*ae[2]}function rt(Wt,ae,Se){var be=ae[0],Qt=ae[1],we=ae[2],Tt=Se[0],Le=Se[1],Mr=Se[2];return Wt[0]=Qt*Mr-we*Le,Wt[1]=we*Tt-be*Mr,Wt[2]=be*Le-Qt*Tt,Wt}function ct(Wt,ae,Se,be){var Qt=ae[0],we=ae[1],Tt=ae[2];return Wt[0]=Qt+be*(Se[0]-Qt),Wt[1]=we+be*(Se[1]-we),Wt[2]=Tt+be*(Se[2]-Tt),Wt}function ot(Wt,ae,Se,be,Qt,we){var Tt=we*we,Le=Tt*(2*we-3)+1,Mr=Tt*(we-2)+we,Ar=Tt*(we-1),Ir=Tt*(3-2*we);return Wt[0]=ae[0]*Le+Se[0]*Mr+be[0]*Ar+Qt[0]*Ir,Wt[1]=ae[1]*Le+Se[1]*Mr+be[1]*Ar+Qt[1]*Ir,Wt[2]=ae[2]*Le+Se[2]*Mr+be[2]*Ar+Qt[2]*Ir,Wt}function xt(Wt,ae,Se,be,Qt,we){var Tt=1-we,Le=Tt*Tt,Mr=we*we,Ar=Le*Tt,Ir=3*we*Le,Br=3*Mr*Tt,dn=Mr*we;return Wt[0]=ae[0]*Ar+Se[0]*Ir+be[0]*Br+Qt[0]*dn,Wt[1]=ae[1]*Ar+Se[1]*Ir+be[1]*Br+Qt[1]*dn,Wt[2]=ae[2]*Ar+Se[2]*Ir+be[2]*Br+Qt[2]*dn,Wt}function pt(Wt,ae){ae=ae||1;var Se=b.RANDOM()*2*Math.PI,be=b.RANDOM()*2-1,Qt=Math.sqrt(1-be*be)*ae;return Wt[0]=Math.cos(Se)*Qt,Wt[1]=Math.sin(Se)*Qt,Wt[2]=be*ae,Wt}function Xt(Wt,ae,Se){var be=ae[0],Qt=ae[1],we=ae[2],Tt=Se[3]*be+Se[7]*Qt+Se[11]*we+Se[15];return Tt=Tt||1,Wt[0]=(Se[0]*be+Se[4]*Qt+Se[8]*we+Se[12])/Tt,Wt[1]=(Se[1]*be+Se[5]*Qt+Se[9]*we+Se[13])/Tt,Wt[2]=(Se[2]*be+Se[6]*Qt+Se[10]*we+Se[14])/Tt,Wt}function Ct(Wt,ae,Se){var be=ae[0],Qt=ae[1],we=ae[2];return Wt[0]=be*Se[0]+Qt*Se[3]+we*Se[6],Wt[1]=be*Se[1]+Qt*Se[4]+we*Se[7],Wt[2]=be*Se[2]+Qt*Se[5]+we*Se[8],Wt}function At(Wt,ae,Se){var be=Se[0],Qt=Se[1],we=Se[2],Tt=Se[3],Le=ae[0],Mr=ae[1],Ar=ae[2],Ir=Qt*Ar-we*Mr,Br=we*Le-be*Ar,dn=be*Mr-Qt*Le,an=Qt*dn-we*Br,Ln=we*Ir-be*dn,Un=be*Br-Qt*Ir,Yn=Tt*2;return Ir*=Yn,Br*=Yn,dn*=Yn,an*=2,Ln*=2,Un*=2,Wt[0]=Le+Ir+an,Wt[1]=Mr+Br+Ln,Wt[2]=Ar+dn+Un,Wt}function Z(Wt,ae,Se,be){var Qt=[],we=[];return Qt[0]=ae[0]-Se[0],Qt[1]=ae[1]-Se[1],Qt[2]=ae[2]-Se[2],we[0]=Qt[0],we[1]=Qt[1]*Math.cos(be)-Qt[2]*Math.sin(be),we[2]=Qt[1]*Math.sin(be)+Qt[2]*Math.cos(be),Wt[0]=we[0]+Se[0],Wt[1]=we[1]+Se[1],Wt[2]=we[2]+Se[2],Wt}function q(Wt,ae,Se,be){var Qt=[],we=[];return Qt[0]=ae[0]-Se[0],Qt[1]=ae[1]-Se[1],Qt[2]=ae[2]-Se[2],we[0]=Qt[2]*Math.sin(be)+Qt[0]*Math.cos(be),we[1]=Qt[1],we[2]=Qt[2]*Math.cos(be)-Qt[0]*Math.sin(be),Wt[0]=we[0]+Se[0],Wt[1]=we[1]+Se[1],Wt[2]=we[2]+Se[2],Wt}function bt(Wt,ae,Se,be){var Qt=[],we=[];return Qt[0]=ae[0]-Se[0],Qt[1]=ae[1]-Se[1],Qt[2]=ae[2]-Se[2],we[0]=Qt[0]*Math.cos(be)-Qt[1]*Math.sin(be),we[1]=Qt[0]*Math.sin(be)+Qt[1]*Math.cos(be),we[2]=Qt[2],Wt[0]=we[0]+Se[0],Wt[1]=we[1]+Se[1],Wt[2]=we[2]+Se[2],Wt}function _t(Wt,ae){var Se=Wt[0],be=Wt[1],Qt=Wt[2],we=ae[0],Tt=ae[1],Le=ae[2],Mr=Math.sqrt(Se*Se+be*be+Qt*Qt),Ar=Math.sqrt(we*we+Tt*Tt+Le*Le),Ir=Mr*Ar,Br=Ir&&tt(Wt,ae)/Ir;return Math.acos(Math.min(Math.max(Br,-1),1))}function nt(Wt){return Wt[0]=0,Wt[1]=0,Wt[2]=0,Wt}function vt(Wt){return"vec3("+Wt[0]+", "+Wt[1]+", "+Wt[2]+")"}function It(Wt,ae){return Wt[0]===ae[0]&&Wt[1]===ae[1]&&Wt[2]===ae[2]}function Pt(Wt,ae){var Se=Wt[0],be=Wt[1],Qt=Wt[2],we=ae[0],Tt=ae[1],Le=ae[2];return Math.abs(Se-we)<=b.EPSILON*Math.max(1,Math.abs(Se),Math.abs(we))&&Math.abs(be-Tt)<=b.EPSILON*Math.max(1,Math.abs(be),Math.abs(Tt))&&Math.abs(Qt-Le)<=b.EPSILON*Math.max(1,Math.abs(Qt),Math.abs(Le))}var Et=S,Nt=x,$t=g,ue=$,ie=U,Dt=T,ne=W,pe=function(){var Wt=k();return function(ae,Se,be,Qt,we,Tt){var Le,Mr;for(Se||(Se=3),be||(be=0),Qt?Mr=Math.min(Qt*Se+be,ae.length):Mr=ae.length,Le=be;Le<Mr;Le+=Se)Wt[0]=ae[Le],Wt[1]=ae[Le+1],Wt[2]=ae[Le+2],we(Wt,Wt,Tt),ae[Le]=Wt[0],ae[Le+1]=Wt[1],ae[Le+2]=Wt[2];return ae}}()},738186:function(Ve){var z=[],C=[],b="insert-css: You need to provide a CSS string. Usage: insertCss(cssString[, options]).";function k(T,L){if(L=L||{},T===void 0)throw new Error(b);var P=L.prepend===!0?"prepend":"append",p=L.container!==void 0?L.container:document.querySelector("head"),m=z.indexOf(p);m===-1&&(m=z.push(p)-1,C[m]={});var S;return C[m]!==void 0&&C[m][P]!==void 0?S=C[m][P]:(S=C[m][P]=w(),P==="prepend"?p.insertBefore(S,p.childNodes[0]):p.appendChild(S)),T.charCodeAt(0)===65279&&(T=T.substr(1,T.length)),S.styleSheet?S.styleSheet.cssText+=T:S.textContent+=T,S}function w(){var T=document.createElement("style");return T.setAttribute("type","text/css"),T}Ve.exports=k,Ve.exports.insertCss=k},896874:function(Ve){function z(C,b,k){switch(k.length){case 0:return C.call(b);case 1:return C.call(b,k[0]);case 2:return C.call(b,k[0],k[1]);case 3:return C.call(b,k[0],k[1],k[2])}return C.apply(b,k)}Ve.exports=z},829932:function(Ve){function z(C,b){for(var k=-1,w=C==null?0:C.length,T=Array(w);++k<w;)T[k]=b(C[k],k,C);return T}Ve.exports=z},920731:function(Ve,z,C){var b=C(288668),k=C(447443),w=C(301196),T=C(829932),L=C(307518),P=C(274757),p=200;function m(S,x,g,A){var E=-1,D=k,F=!0,y=S.length,h=[],Y=x.length;if(!y)return h;g&&(x=T(x,L(g))),A?(D=w,F=!1):x.length>=p&&(D=P,F=!1,x=new b(x));t:for(;++E<y;){var $=S[E],U=g==null?$:g($);if($=A||$!==0?$:0,F&&U===U){for(var W=Y;W--;)if(x[W]===U)continue t;h.push($)}else D(x,U,A)||h.push($)}return h}Ve.exports=m},238749:function(Ve,z,C){var b=C(644239),k=C(541780),w=C(637005),T="[object Arguments]",L="[object Array]",P="[object Boolean]",p="[object Date]",m="[object Error]",S="[object Function]",x="[object Map]",g="[object Number]",A="[object Object]",E="[object RegExp]",D="[object Set]",F="[object String]",y="[object WeakMap]",h="[object ArrayBuffer]",Y="[object DataView]",$="[object Float32Array]",U="[object Float64Array]",W="[object Int8Array]",V="[object Int16Array]",H="[object Int32Array]",Q="[object Uint8Array]",tt="[object Uint8ClampedArray]",rt="[object Uint16Array]",ct="[object Uint32Array]",ot={};ot[$]=ot[U]=ot[W]=ot[V]=ot[H]=ot[Q]=ot[tt]=ot[rt]=ot[ct]=!0,ot[T]=ot[L]=ot[h]=ot[P]=ot[Y]=ot[p]=ot[m]=ot[S]=ot[x]=ot[g]=ot[A]=ot[E]=ot[D]=ot[F]=ot[y]=!1;function xt(pt){return w(pt)&&k(pt.length)&&!!ot[b(pt)]}Ve.exports=xt},105976:function(Ve,z,C){var b=C(406557),k=C(545357),w=C(430061);function T(L,P){return w(k(L,P,b),L+"")}Ve.exports=T},356560:function(Ve,z,C){var b=C(575703),k=C(538777),w=C(406557),T=k?function(L,P){return k(L,"toString",{configurable:!0,enumerable:!1,value:b(P),writable:!0})}:w;Ve.exports=T},307518:function(Ve){function z(C){return function(b){return C(b)}}Ve.exports=z},538777:function(Ve,z,C){var b=C(610852),k=function(){try{var w=b(Object,"defineProperty");return w({},"",{}),w}catch(T){}}();Ve.exports=k},385924:function(Ve,z,C){var b=C(205569),k=b(Object.getPrototypeOf,Object);Ve.exports=k},531167:function(Ve,z,C){Ve=C.nmd(Ve);var b=C(431957),k=z&&!z.nodeType&&z,w=k&&!0&&Ve&&!Ve.nodeType&&Ve,T=w&&w.exports===k,L=T&&b.process,P=function(){try{var p=w&&w.require&&w.require("util").types;return p||L&&L.binding&&L.binding("util")}catch(m){}}();Ve.exports=P},205569:function(Ve){function z(C,b){return function(k){return C(b(k))}}Ve.exports=z},545357:function(Ve,z,C){var b=C(896874),k=Math.max;function w(T,L,P){return L=k(L===void 0?T.length-1:L,0),function(){for(var p=arguments,m=-1,S=k(p.length-L,0),x=Array(S);++m<S;)x[m]=p[L+m];m=-1;for(var g=Array(L+1);++m<L;)g[m]=p[m];return g[L]=P(x),b(T,this,g)}}Ve.exports=w},430061:function(Ve,z,C){var b=C(356560),k=C(521275),w=k(b);Ve.exports=w},521275:function(Ve){var z=800,C=16,b=Date.now;function k(w){var T=0,L=0;return function(){var P=b(),p=C-(P-L);if(L=P,p>0){if(++T>=z)return arguments[0]}else T=0;return w.apply(void 0,arguments)}}Ve.exports=k},575703:function(Ve){function z(C){return function(){return C}}Ve.exports=z},291966:function(Ve,z,C){var b=C(920731),k=C(121078),w=C(105976),T=C(229246),L=w(function(P,p){return T(P)?b(P,k(p,1,T,!0)):[]});Ve.exports=L},406557:function(Ve){function z(C){return C}Ve.exports=z},498612:function(Ve,z,C){var b=C(623560),k=C(541780);function w(T){return T!=null&&k(T.length)&&!b(T)}Ve.exports=w},229246:function(Ve,z,C){var b=C(498612),k=C(637005);function w(T){return k(T)&&b(T)}Ve.exports=w},541780:function(Ve){var z=9007199254740991;function C(b){return typeof b=="number"&&b>-1&&b%1==0&&b<=z}Ve.exports=C},281763:function(Ve,z,C){var b=C(644239),k=C(637005),w="[object Number]";function T(L){return typeof L=="number"||k(L)&&b(L)==w}Ve.exports=T},968630:function(Ve,z,C){var b=C(644239),k=C(385924),w=C(637005),T="[object Object]",L=Function.prototype,P=Object.prototype,p=L.toString,m=P.hasOwnProperty,S=p.call(Object);function x(g){if(!w(g)||b(g)!=T)return!1;var A=k(g);if(A===null)return!0;var E=m.call(A,"constructor")&&A.constructor;return typeof E=="function"&&E instanceof E&&p.call(E)==S}Ve.exports=x},936719:function(Ve,z,C){var b=C(238749),k=C(307518),w=C(531167),T=w&&w.isTypedArray,L=T?k(T):b;Ve.exports=L},252796:function(Ve,z,C){Ve.exports=C(410643)},913264:function(Ve){"use strict";var z=!!(typeof window!="undefined"&&window.document&&window.document.createElement),C={canUseDOM:z,canUseWorkers:typeof Worker!="undefined",canUseEventListeners:z&&!!(window.addEventListener||window.attachEvent),canUseViewport:z&&!!window.screen,isInWorker:!z};Ve.exports=C},784518:function(Ve){var z=!1,C,b,k,w,T,L,P,p,m,S,x,g,A,E,D;function F(){if(!z){z=!0;var h=navigator.userAgent,Y=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(h),$=/(Mac OS X)|(Windows)|(Linux)/.exec(h);if(g=/\b(iPhone|iP[ao]d)/.exec(h),A=/\b(iP[ao]d)/.exec(h),S=/Android/i.exec(h),E=/FBAN\/\w+;/i.exec(h),D=/Mobile/i.exec(h),x=!!/Win64/.exec(h),Y){C=Y[1]?parseFloat(Y[1]):Y[5]?parseFloat(Y[5]):NaN,C&&document&&document.documentMode&&(C=document.documentMode);var U=/(?:Trident\/(\d+.\d+))/.exec(h);L=U?parseFloat(U[1])+4:C,b=Y[2]?parseFloat(Y[2]):NaN,k=Y[3]?parseFloat(Y[3]):NaN,w=Y[4]?parseFloat(Y[4]):NaN,w?(Y=/(?:Chrome\/(\d+\.\d+))/.exec(h),T=Y&&Y[1]?parseFloat(Y[1]):NaN):T=NaN}else C=b=k=T=w=NaN;if($){if($[1]){var W=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(h);P=W?parseFloat(W[1].replace("_",".")):!0}else P=!1;p=!!$[2],m=!!$[3]}else P=p=m=!1}}var y={ie:function(){return F()||C},ieCompatibilityMode:function(){return F()||L>C},ie64:function(){return y.ie()&&x},firefox:function(){return F()||b},opera:function(){return F()||k},webkit:function(){return F()||w},safari:function(){return y.webkit()},chrome:function(){return F()||T},windows:function(){return F()||p},osx:function(){return F()||P},linux:function(){return F()||m},iphone:function(){return F()||g},mobile:function(){return F()||g||A||S||D},nativeApp:function(){return F()||E},android:function(){return F()||S},ipad:function(){return F()||A}};Ve.exports=y},396534:function(Ve,z,C){"use strict";var b=C(913264),k;b.canUseDOM&&(k=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==!0);function w(T,L){if(!b.canUseDOM||L&&!("addEventListener"in document))return!1;var P="on"+T,p=P in document;if(!p){var m=document.createElement("div");m.setAttribute(P,"return;"),p=typeof m[P]=="function"}return!p&&k&&T==="wheel"&&(p=document.implementation.hasFeature("Events.wheel","3.0")),p}Ve.exports=w},410643:function(Ve,z,C){"use strict";var b=C(784518),k=C(396534),w=10,T=40,L=800;function P(p){var m=0,S=0,x=0,g=0;return"detail"in p&&(S=p.detail),"wheelDelta"in p&&(S=-p.wheelDelta/120),"wheelDeltaY"in p&&(S=-p.wheelDeltaY/120),"wheelDeltaX"in p&&(m=-p.wheelDeltaX/120),"axis"in p&&p.axis===p.HORIZONTAL_AXIS&&(m=S,S=0),x=m*w,g=S*w,"deltaY"in p&&(g=p.deltaY),"deltaX"in p&&(x=p.deltaX),(x||g)&&p.deltaMode&&(p.deltaMode==1?(x*=T,g*=T):(x*=L,g*=L)),x&&!m&&(m=x<1?-1:1),g&&!S&&(S=g<1?-1:1),{spinX:m,spinY:S,pixelX:x,pixelY:g}}P.getEventType=function(){return b.firefox()?"DOMMouseScroll":k("wheel")?"wheel":"mousewheel"},Ve.exports=P},75:function(Ve,z,C){var b=C(734155);(function(){var k,w,T,L,P,p;typeof performance!="undefined"&&performance!==null&&performance.now?Ve.exports=function(){return performance.now()}:typeof b!="undefined"&&b!==null&&b.hrtime?(Ve.exports=function(){return(k()-P)/1e6},w=b.hrtime,k=function(){var m;return m=w(),m[0]*1e9+m[1]},L=k(),p=b.uptime()*1e9,P=L-p):Date.now?(Ve.exports=function(){return Date.now()-T},T=Date.now()):(Ve.exports=function(){return new Date().getTime()-T},T=new Date().getTime())}).call(this)},654087:function(Ve,z,C){for(var b=C(75),k=typeof window=="undefined"?C.g:window,w=["moz","webkit"],T="AnimationFrame",L=k["request"+T],P=k["cancel"+T]||k["cancelRequest"+T],p=0;!L&&p<w.length;p++)L=k[w[p]+"Request"+T],P=k[w[p]+"Cancel"+T]||k[w[p]+"CancelRequest"+T];if(!L||!P){var m=0,S=0,x=[],g=1e3/60;L=function(A){if(x.length===0){var E=b(),D=Math.max(0,g-(E-m));m=D+E,setTimeout(function(){var F=x.slice(0);x.length=0;for(var y=0;y<F.length;y++)if(!F[y].cancelled)try{F[y].callback(m)}catch(h){setTimeout(function(){throw h},0)}},Math.round(D))}return x.push({handle:++S,callback:A,cancelled:!1}),S},P=function(A){for(var E=0;E<x.length;E++)x[E].handle===A&&(x[E].cancelled=!0)}}Ve.exports=function(A){return L.call(k,A)},Ve.exports.cancel=function(){P.apply(k,arguments)},Ve.exports.polyfill=function(A){A||(A=k),A.requestAnimationFrame=L,A.cancelAnimationFrame=P}},174219:function(Ve,z){"use strict";var C;C={value:!0},z.Z=void 0;var b={items_per_page:"\u6761/\u9875",jump_to:"\u8DF3\u81F3",jump_to_confirm:"\u786E\u5B9A",page:"\u9875",prev_page:"\u4E0A\u4E00\u9875",next_page:"\u4E0B\u4E00\u9875",prev_5:"\u5411\u524D 5 \u9875",next_5:"\u5411\u540E 5 \u9875",prev_3:"\u5411\u524D 3 \u9875",next_3:"\u5411\u540E 3 \u9875",page_size:"\u9875\u7801"};z.Z=b},585369:function(Ve,z){"use strict";var C;C={value:!0},z.Z=void 0;var b={locale:"zh_CN",today:"\u4ECA\u5929",now:"\u6B64\u523B",backToToday:"\u8FD4\u56DE\u4ECA\u5929",ok:"\u786E\u5B9A",timeSelect:"\u9009\u62E9\u65F6\u95F4",dateSelect:"\u9009\u62E9\u65E5\u671F",weekSelect:"\u9009\u62E9\u5468",clear:"\u6E05\u9664",month:"\u6708",year:"\u5E74",previousMonth:"\u4E0A\u4E2A\u6708 (\u7FFB\u9875\u4E0A\u952E)",nextMonth:"\u4E0B\u4E2A\u6708 (\u7FFB\u9875\u4E0B\u952E)",monthSelect:"\u9009\u62E9\u6708\u4EFD",yearSelect:"\u9009\u62E9\u5E74\u4EFD",decadeSelect:"\u9009\u62E9\u5E74\u4EE3",yearFormat:"YYYY\u5E74",dayFormat:"D\u65E5",dateFormat:"YYYY\u5E74M\u6708D\u65E5",dateTimeFormat:"YYYY\u5E74M\u6708D\u65E5 HH\u65F6mm\u5206ss\u79D2",previousYear:"\u4E0A\u4E00\u5E74 (Control\u952E\u52A0\u5DE6\u65B9\u5411\u952E)",nextYear:"\u4E0B\u4E00\u5E74 (Control\u952E\u52A0\u53F3\u65B9\u5411\u952E)",previousDecade:"\u4E0A\u4E00\u5E74\u4EE3",nextDecade:"\u4E0B\u4E00\u5E74\u4EE3",previousCentury:"\u4E0A\u4E00\u4E16\u7EAA",nextCentury:"\u4E0B\u4E00\u4E16\u7EAA"},k=b;z.Z=k},752376:function(Ve,z,C){"use strict";C.d(z,{Z:function(){return Ze}});var b=C(671002),k=C(601413),w=C(297685),T=C(700091),L=C(667294);function P(qt){var Jt=[];return L.Children.forEach(qt,function(St){Jt.push(St)}),Jt}function p(qt,Jt){var St=null;return qt&&qt.forEach(function(Ce){St||!Ce||Ce.key===Jt&&(St=Ce)}),St}function m(qt,Jt){var St=[],Ce={},kt=[],Kt=null;return qt.forEach(function(dt){dt&&(dt.key&&p(Jt,dt.key)?(kt.length&&(Ce[dt.key]=kt,kt=[]),Kt=dt.key):dt.key&&kt.push(dt))}),Kt||(St=St.concat(kt)),Jt.forEach(function(dt){dt&&(dt.key&&Ce.hasOwnProperty(dt.key)&&(St=St.concat(Ce[dt.key])),St.push(dt),dt.key===Kt&&(St=St.concat(kt)))}),St}function S(qt,Jt,St){var Ce;return typeof qt=="function"?Ce=qt({key:Jt,index:St}):Ce=qt,Ce}function x(qt){return qt&&qt.children}var g=!(typeof window!="undefined"&&window.document&&window.document.createElement),A=g?L.useEffect:L.useLayoutEffect,E=C(974902),D=C(973935),F=C(364687),y=C.n(F),h=C(115861),Y=C(215671),$=C(143144),U=C(952191);function W(){}var V=U.rV,H=/.*shadow$/gi,Q=!(typeof window!="undefined"&&window.document&&window.document.createElement),tt=Date.now;function rt(qt){if(typeof qt=="string"){if(qt.charAt(0).match(/m/i)){var Jt=document.createElementNS("http://www.w3.org/2000/svg","path");return Jt.setAttributeNS(null,"d",qt),Jt}return document.querySelector(qt)}else if(qt.style)return qt;throw new Error("Error while parsing the path")}var ct={type:"to",duration:450,delay:0,repeat:0,repeatDelay:0,appearTo:0,yoyo:!1,ease:"easeInOutQuad",onStart:W,onUpdate:W,onComplete:W,onRepeat:W,startAt:{}},ot={animation:{},paused:!1,reverse:!1,delay:0,repeat:0,repeatDelay:0,yoyo:!1,moment:null,resetStyle:!1,regionStartTime:0,regionEndTime:void 0,onChange:W,onChangeTimeline:W},xt=function(Jt){var St={};return Object.keys(ot).forEach(function(Ce){St[Ce]=typeof Jt[Ce]=="undefined"?ot[Ce]:Jt[Ce]}),St.delay&&(St.delay=Math.round(St.delay)),Jt.repeatDelay&&(St.repeatDelay=Math.round(St.repeatDelay)),St},pt=function(Jt){if(Array.isArray(Jt)||!Jt)return Jt;if(Jt.length){var St=Array.prototype.slice.call(Jt);return St.length?[Jt]:St}return[Jt]},Xt=function(Jt){return Jt.length===1?Jt[0]:Jt},Ct=function(Jt,St){var Ce=St.appearTo,kt=Ce===void 0?0:Ce,Kt=St.delay,dt=Kt===void 0?0:Kt,Ut=St.duration,J=Ut===void 0?450:Ut,it=St.repeat,R=St.repeatDelay;if(typeof kt=="string")return 0;var M,O=0;return typeof Jt.appearTo=="number"?Jt.appearTo:(typeof Jt.appearTo=="string"&&Jt.appearTo.charAt(1)==="="&&(O=parseFloat(Jt.appearTo.replace("=",""))),M=kt+dt+J+O,it===-1?M=Number.MAX_VALUE:it&&(M=kt+dt+J*(it+1)+(R||0)*it+O),M)},At=function(Jt){switch(Jt){case"opacity":case"scaleX":case"scaleY":case"scale":return 1;default:return 0}},Z=function(Jt,St){var Ce=typeof Jt=="string"?parseFloat(Jt):Jt;return q(Ce,St.vars,1,St.count,St.unit)},q=function(Jt,St,Ce){var kt=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"",Kt=arguments.length>4?arguments[4]:void 0;return kt==="+="||kt==="-="?Jt+St*Ce+(Kt||0):(St-Jt)*Ce+Jt+(Kt||0)},bt=function(Jt){if(!Jt)return{};var St=typeof window!="undefined"&&document.defaultView?document.defaultView.getComputedStyle(Jt):{};return St},_t={margin:1,padding:1,borderWidth:1,borderRadius:1};function nt(qt){var Jt=qt.target,St=qt.computedStyle,Ce=qt.style,kt=qt.value,Kt=qt.startUnit,dt=qt.endUnit,Ut=qt.fixed,J=qt.isOriginWidth,it=qt.useCurrentTarget;if(Q)return kt;var R=/(?:Left|Right|Width|X)/i.test(Ce)||J;R=Ce==="padding"||Ce==="marign"?!0:R;var M=Ce.indexOf("border")!==-1||Ce.indexOf("translate")!==-1||Ce==="transformOrigin"||it?Jt:Jt.parentNode||document.body;M=Ut?document.body:M;var O,X,mt;switch(Kt){case"%":O=parseFloat(kt)/100*(R?M.clientWidth:M.clientHeight);break;case"vw":O=parseFloat(kt)*document.body.clientWidth/100;break;case"vh":O=parseFloat(kt)*document.body.clientHeight/100;break;case"em":St?O=parseFloat(kt)*parseFloat(St.fontSize):(mt="em",O=parseFloat(kt));break;case"rem":{St?(X=window.getComputedStyle(document.getElementsByTagName("html")[0]),O=parseFloat(kt)*parseFloat(X.fontSize)):(mt="rem",O=parseFloat(kt));break}default:O=parseFloat(kt);break}switch(dt){case"%":O=O?O*100/(R?M.clientWidth:M.clientHeight):0;break;case"vw":O=parseFloat(kt)/document.body.clientWidth*100;break;case"vh":O=parseFloat(kt)/document.body.clientHeight*100;break;case"em":St?O=parseFloat(kt)/parseFloat(St.fontSize):(mt="em",O=parseFloat(kt));break;case"rem":{St?(X=X||window.getComputedStyle(document.getElementsByTagName("html")[0]),O=parseFloat(kt)/parseFloat(X.fontSize)):(mt="rem",O=parseFloat(kt));break}default:break}return mt&&console.warn("Warning: Element is not 'DOM, can not use '".concat(mt,"', automatically convert to animation units.")),O}function vt(qt){if(typeof qt=="string")return qt;var Jt=qt.perspective,St=qt.rotate,Ce=qt.rotateX,kt=qt.rotateY,Kt=qt.scaleX,dt=qt.scaleY,Ut=qt.scaleZ,J=qt.skewX,it=qt.skewY,R=typeof qt.translateX=="string"?qt.translateX:"".concat(qt.translateX,"px"),M=typeof qt.translateY=="string"?qt.translateY:"".concat(qt.translateY,"px"),O=typeof qt.translateZ=="string"?qt.translateZ:"".concat(qt.translateZ,"px"),X=J||it?"skew(".concat(J,"deg,").concat(it,"deg)"):"",mt=St?"rotate(".concat(St,"deg)"):"",Ft=Kt!==1||dt!==1||Ut!==1?"scale3d(".concat(Kt,",").concat(dt,",").concat(Ut,")"):"",Bt=Ce?"rotateX(".concat(Ce,"deg)"):"",re=kt?"rotateY(".concat(kt,"deg)"):"",De=Jt?"perspective(".concat(Jt,"px)"):"",me=Ft||mt||Bt||re||X?"":"translate(0px, 0px)",Xe=qt.translateZ?"translate3d(".concat(R,",").concat(M,",").concat(O,")"):(qt.translateX||qt.translateY)&&"translate(".concat(R,",").concat(M,")")||me;return"".concat(De," ").concat(Xe," ").concat(Ft," ").concat(mt," ").concat(Bt," ").concat(re," ").concat(X).trim()}var It={brightness:1,saturate:1,contrast:1,grayScale:0,hueRotate:"0deg",sepia:0,invert:0},Pt=(0,$.Z)(function qt(){var Jt=this;(0,Y.Z)(this,qt),this.push=function(St){pt(St).forEach(function(Ce){Jt[Ce.className]=Ce})},this.register=this.push}),Et=new Pt,Nt=/%|vw|vh|em|rem/i,$t=(0,$.Z)(function qt(Jt){var St=this;(0,Y.Z)(this,qt),this.props=void 0,this.computedStyle=void 0,this.root=void 0,this.index=void 0,this.targetIndex=void 0,this.tweenVars={},this.transformName=void 0,this.filterName=void 0,this.target=void 0,this.start={},this.startAt={},this.propsData={data:{},type:{},unit:{},count:{},splitStr:{},isTransform:{}},this.setDefaultData=function(){var Ce=St.props;for(var kt in Ce){var Kt=Ce[kt],dt=Kt.split&&Kt.split(/\s+|,/).length>1||kt.match(/color|fill|stroke/i)||kt.match(/shadow/i),Ut=(kt==="background"||kt==="backgroundImage")&&Kt.match(/[a-z|-]+\(([\s\S]*?)\)/gi);if(Ut){St.propsData.data[kt]={value:Kt,plugin:Et.GradientsPlugin};continue}if(dt){St.propsData.data[kt]={value:Kt,plugin:Et.ArrayPlugin};continue}var J=(0,U.Lo)(kt),it=St.getTweenData(J,Ce[kt]);St.propsData.data[J]=it.data[J],St.propsData.type[J]=it.type[J],St.propsData.unit[J]=it.unit[J],St.propsData.count[J]=it.count[J],St.propsData.isTransform[J]=(0,U.dt)(J)==="transform",it.splitStr[J]&&(St.propsData.splitStr[J]=it.splitStr[J])}},this.getTweenData=function(Ce,kt){var Kt={data:{},isTransform:{},type:{},unit:{},count:{},splitStr:{}},dt=kt;Kt.data[Ce]=dt;var Ut=typeof Kt.data[Ce]=="string";Kt.unit[Ce]=Ut?Kt.data[Ce].replace(/[^a-z|%]/g,""):"",Kt.count[Ce]=Ut?Kt.data[Ce].replace(/[^+|=|-]/g,""):"";var J=Ut?parseFloat(Kt.data[Ce].replace(/[a-z|%|=]/g,"")):Kt.data[Ce];return Kt.data[Ce]=!J&&J!==0?Kt.data[Ce]:J,Kt},this.setStartAtValue=function(Ce,kt){return(0,b.Z)(kt)==="object"?Z(Ce,kt):Ce},this.getAnimStart=function(){var Ce=St.target,kt=St.root,Kt=St.targetIndex,dt=St.propsData,Ut=St.startAt,J=St.start,it=St.tweenVars,R={};for(var M in Ut)R[(0,U.Lo)(M)]=Ut[M];St.computedStyle=St.computedStyle||bt(Ce),it.style=it.style||{};var O,X;for(var mt in dt.data){var Ft,Bt=dt.data[mt];if(Bt.plugin){var re=new Bt.plugin(Bt.value,mt);re.target=Ce,re.root=kt,re.parent=parent,re.index=St.index,re.targetIndex=Kt,re.tweenVars=it,re.startAt=St.startAt,re.computedStyle=St.computedStyle,Bt.plugin=re,J[mt]=re.getAnimStart();continue}var De=(0,U.dt)(mt),me=De==="transform"?St.transformName:De;me=De==="filter"?St.filterName:me;var Xe=it.style[me],hr=Xe!=null?Xe:St.computedStyle[De],Ke=(Ft=R[mt])!==null&&Ft!==void 0?Ft:hr,Lr=dt.unit[mt],cn="";if(De==="transform"){O=O||(Ke===Xe?(0,k.Z)({},Xe):(0,U.Ck)(St.computedStyle[St.transformName]));var $e=O[mt];if(R&&mt in R){var lr,Pr;$e=St.setStartAtValue((lr=(Pr=R[mt].vars)!==null&&Pr!==void 0?Pr:Xe==null?void 0:Xe[mt])!==null&&lr!==void 0?lr:$e,R[mt]),cn=R[mt].unit,mt==="scale"?(O.scaleX=$e,O.scaleY=$e):O[mt]=$e}cn!==Lr&&($e=nt({target:Ce,computedStyle:St.computedStyle,style:De,value:$e,startUnit:cn,endUnit:Lr}),mt==="scale"?(O.scaleX=$e,O.scaleY=$e):O[mt]=$e),J[St.transformName]=O}else if(De==="filter"){var Dr=U._T.filterConvert[mt]||mt;X=X||(Ke===Xe?(0,k.Z)({},Xe):(0,U.GX)(hr)||{}),X[Dr]=X[Dr]||It[Dr];var fe=X[Dr];if(R&&mt in R){var jt;fe=St.setStartAtValue((jt=R[mt].vars)!==null&&jt!==void 0?jt:fe,R[mt]),cn=R[mt].unit,X[Dr]=fe}if(Lr!==cn){var ve;X[Dr]=nt({target:Ce,computedStyle:St.computedStyle,style:De,value:fe,startUnit:cn,endUnit:Lr,fixed:((ve=St.computedStyle)===null||ve===void 0?void 0:ve.position)==="fixed"})}J[St.filterName]=X}else{var Ie;if(Ke=(Ie=R[mt])!==null&&Ie!==void 0?Ie:hr,(!Ke||Ke==="none"||Ke==="auto")&&(Ke=""),Lr=dt.unit[De],cn=(0,b.Z)(Ke)==="object"?Ke.unit:"".concat(Ke).replace(/[^a-z|%]/g,""),Ke=St.setStartAtValue(hr,R[mt]),Lr!==cn){var ye;Ke=nt({target:Ce,computedStyle:St.computedStyle,style:De,value:parseFloat(Ke),startUnit:cn,endUnit:Lr,fixed:((ye=St.computedStyle)===null||ye===void 0?void 0:ye.position)==="fixed"})}var ze=parseFloat(Ke);J[De]=isNaN(ze)?At(De):ze}}return J},this.render=function(Ce){var kt=St.propsData,Kt=St.start,dt=St.tweenVars,Ut=dt.style||{};Kt[St.transformName]&&!Ut[St.transformName]&&(Ut[St.transformName]=(0,k.Z)({},Kt[St.transformName])),Kt[St.filterName]&&!Ut[St.filterName]&&(Ut[St.filterName]=(0,k.Z)({},Kt[St.filterName]));var J=Ut[St.transformName],it=Ut[St.filterName],R=kt.data,M=kt.unit,O=kt.count,X=kt.isTransform;for(var mt in R){var Ft=R[mt];if(Ft.plugin){Ut[mt]=Ft.plugin.render(Ce);continue}var Bt=X[mt],re=Bt?Kt[St.transformName][mt]:Kt[mt],De=M[mt],me=O[mt];if(Bt){if(mt==="scale"){var Xe=Kt[St.transformName].scaleX,hr=Kt[St.transformName].scaleY;me.charAt(1)==="="?(J.scaleX=Xe+Ft*Ce,J.scaleY=hr+Ft*Ce):(J.scaleX=(Ft-Xe)*Ce+Xe,J.scaleY=(Ft-hr)*Ce+hr)}else J[mt]=q(parseFloat(re),Ft,Ce,me,De);J.text=vt(Ut[St.transformName])}else if(U._T.filter.indexOf(mt)>=0){var Ke=U._T.filterConvert[mt]||mt;re=parseFloat(Kt[St.filterName][Ke])||0,it[Ke]=q(re,Ft,Ce,me,De),it.text="";for(var Lr in it)Lr!=="text"&&(it.text="".concat(it.text," ").concat(Lr,"(").concat(it[Lr],")").trim())}else{var cn=(0,U.YJ)(mt,0);cn=typeof cn=="number"?0:cn.replace(/[^a-z|%]/g,""),De=De||cn,typeof Ft=="string"?Ut[mt]=Ft:Ut[mt]=q(re,Ft,Ce,me,De)}}return Ut},this.props=Jt,this.transformName=(0,U.Yf)("transform"),this.filterName=(0,U.Yf)("filter")||"filter",this.setDefaultData()});$t.key="style",$t.className="style";var ue=$t,ie=C(497326),Dt=C(360136),ne=C(973568),pe=(0,$.Z)(function qt(Jt,St){(0,Y.Z)(this,qt),this.value=void 0,this.key=void 0,this.root=void 0,this.index=void 0,this.style={},this.start={},this.startAt={},this.target=void 0,this.value=Jt,this.key=St});pe.className=void 0,pe.key=void 0;var Wt=function(qt){(0,Dt.Z)(St,qt);var Jt=(0,ne.Z)(St);function St(Ce,kt){var Kt;(0,Y.Z)(this,St),Kt=Jt.call(this,Ce,kt),Kt.value=void 0,Kt.key=void 0,Kt.start=[],Kt.tweenVars={},Kt.vars={},Kt.computedStyle=void 0,Kt.propsData={data:[],unit:[],count:[]},Kt.setDefaultData=function(J,it){var R=(0,ie.Z)(Kt),M=R.propsData,O=R.value,X=(0,E.Z)(O);if(J==="color"){var mt;X[3]=(mt=X[3])!==null&&mt!==void 0?mt:1}M.type=J,M.data=X.map(function(Ft){return!parseFloat(Ft)&&parseFloat(Ft)!==0?Ft:parseFloat(Ft)}),M.unit=X.map(function(Ft){return Ft.toString().replace(/[^a-z|%]/g,"")}),M.count=X.map(function(Ft){return Ft.toString().replace(/[^+|=|-]/g,"")}),it&&(M.splitStr=it)},Kt.convertToMarksArray=function(J,it,R,M){var O=(R||"").toString().replace(/[^a-z|%]/g,""),X=typeof M=="number"?J[M]:void 0;return O===X?parseFloat(R):!parseFloat(R)&&parseFloat(R)!==0?R:nt({target:Kt.target,computedStyle:Kt.computedStyle,style:it,value:R,startUnit:O,endUnit:X,isOriginWidth:it==="transformOrigin"&&!M})},Kt.getAnimStart=function(){var J,it,R,M,O=(0,ie.Z)(Kt),X=O.startAt,mt=O.target,Ft=O.key,Bt=O.propsData,re=O.computedStyle,De=O.tweenVars,me=(J=(it=(R=X==null?void 0:X[Ft])!==null&&R!==void 0?R:re?(M=De.style)===null||M===void 0?void 0:M[Ft]:De[Ft])!==null&&it!==void 0?it:(re||mt)[Ft])!==null&&J!==void 0?J:"",Xe=Bt.data.indexOf("inset"),hr;if(Xe!==-1&&!me.match("inset")&&Bt.type==="shadow"&&(hr=me,me=""),(!me||me==="none"||me==="auto")&&(me=""),me=Bt.type==="shadow"?(0,U.hy)(me,Ft):me,me=Bt.type==="color"?(0,U.lu)(me):me,me=Bt.type==="string"?me.split(/[\s|,]/):me,_t[Ft]){var Ke,Lr,cn,$e;me[1]=(Ke=me[1])!==null&&Ke!==void 0?Ke:me[0],me[2]=(Lr=me[2])!==null&&Lr!==void 0?Lr:me[0],me[3]=(cn=($e=me[3])!==null&&$e!==void 0?$e:me[1])!==null&&cn!==void 0?cn:me[0]}var lr=Bt.unit,Pr=me.map(function(Dr,fe){return parseFloat(Dr).toString()==="NaN"?Dr:Kt.convertToMarksArray(lr,Ft,Dr,fe)});return Kt.start=Pr.concat(Xe>=0?"inset":[]),Kt.start.oldShadow=hr,Kt.start},Kt.render=function(J){var it=(0,ie.Z)(Kt),R=it.start,M=it.propsData,O=M.type,X=M.splitStr,mt=M.data,Ft=M.count,Bt=M.unit,re=mt.map(function(Ke,Lr){return typeof Ke=="string"?Ke:q(R[Lr],Ke,J,Ft[Lr],Bt[Lr])});switch(O){case"string":re=re.join(X);break;case"color":re=(0,U.Lq)(re);break;case"shadow":{var De=re.indexOf("inset")>=0,me=De?re.filter(function(Ke){return Ke!=="inset"}):re,Xe=me.slice(0,me.length-4).map(function(Ke){return typeof Ke=="number"?"".concat(Ke,"px"):Ke}),hr=(0,U.Lq)(me.slice(me.length-4,me.length));re="".concat(R.oldShadow?"".concat(R.oldShadow,","):"").concat(Xe.join(" ")," ").concat(hr," ").concat(De?"inset":"").trim();break}default:break}return re},Kt.value=Ce,Kt.key=kt;var dt="",Ut="";return typeof Ce=="string"&&(kt.match(H)?(Kt.value=(0,U.hy)(Ce,kt),dt="shadow"):kt.match(/color|fill|stroke/i)||Ce.match(V)?(Kt.value=(0,U.lu)(Ce),dt="color"):(Ut=Ce.replace(/[^\s|,]/g,"").replace(/\s+/g," "),Kt.value=Ce.split(/[\s|,]/),dt="string")),Kt.setDefaultData(dt,Ut),Kt}return(0,$.Z)(St)}(pe);Wt.className="ArrayPlugin";var ae=Wt,Se={linear:{"to top":"0deg","to top right":"45deg","to right top":"45deg","to right":"90deg","to right bottom":"135deg","to bottom right":"135deg","to bottom":"180deg","to bottom left":"225deg","to left bottom":"225deg","to left":"270deg","to left top":"315deg","to top left":"315deg"},radial:{center:"50% 50%",top:"50% 0%","top right":"100% 0%","right top":"100% 0%",right:"100% 50%","right bottom":"100% 100%","bottom right":"100% 100%",bottom:"50% 100%","bottom left":"0% 100%","left bottom":"0% 100%",left:"0% 50%","left top":"0% 0%","top left":"0% 0%"}},be=["closest-side","closest-corner","farthest-side","farthest-corner"],Qt=function(Jt,St,Ce){console.warn("Warning: The gradient ".concat(Jt,"(").concat(St," => ").concat(Ce,") is different, which has been automatically converted to animation gradient ").concat(Jt,"(").concat(Ce,")."))},we=function(Jt){return Jt==="url"||Jt.indexOf("image")>=0||Jt==="paint"||Jt==="cross-fade"||Jt==="element"},Tt=function(qt){(0,Dt.Z)(St,qt);var Jt=(0,ne.Z)(St);function St(Ce){var kt;return(0,Y.Z)(this,St),kt=Jt.call(this,Ce,"backgroundImage"),kt.value=void 0,kt.tweenVars={},kt.vars=[],kt.computedStyle=void 0,kt.defaultStartVars=[],kt.getPosition=function(Kt){return Kt.map(function(dt){return{data:parseFloat(dt),unit:dt.replace(/[^a-z|%]/g,"")}})},kt.getAngle=function(Kt,dt){var Ut=Kt.replace(/-|gradient|repeating]/g,""),J,it,R,M;switch(Ut){case"linear":{R=kt.getPosition((Se.linear[dt]||dt||Se.linear["to bottom"]).split(" "));break}case"radial":{var O=dt.split(" ");J=O.find(function(re){return be.indexOf(re)>=0})||be[3],it=O.find(function(re){return re==="circle"||re==="ellipse"})||"ellipse";var X=new RegExp("".concat(J,"|").concat(it,"|at"),"g"),mt=dt.replace(X,"").trim();M=kt.getPosition((Se.radial[mt]||mt||Se.radial.center).split(" "));break}case"conic":{var Ft=dt.split("at").map(function(re){return re.trim()}),Bt=(Ft[0]||"").split(" ");it=Bt[0]||"from",R=kt.getPosition([Bt[1]||"0deg"]),M=kt.getPosition((Se.radial[Ft[1]]||Ft[1]||Se.radial.center).split(" "));break}default:break}return{extent:J,shape:it,angle:R,position:M}},kt.valueToIValue=function(Kt){if(!Kt)return[];var dt=Kt.replace(/\),\s+?(url|radial|conic|linear|repeating|image|element|cross|paint)/,")#,#$1").split("#,#");return dt.map(function(Ut){var J=Ut.replace(/([a-z|-]+)\((.*)\)/,"$1").trim();if(J==="url")return{type:J,values:Ut};var it=Ut.replace(/([a-z|-]+)\((.*)\)/,"$2").replace(/#([0-9a-f]{6}|[0-9a-f]{3})|(rgb[a]?|hsl)+\(\d+\,[\s+]?\d+[\%]?\,[\s+]?\d+[\%]?(\,\d+)?\)/gi,function(X){return X.replace(/\s+/g,"")}).replace(/\,([a-z|#|\s+])/g,"#,#$1").split("#,#").map(function(X){return X.trim()}),R=it[0].match(V)?"":it[0];R&&it.splice(0,1);var M=kt.getAngle(J,R),O=it.map(function(X){var mt=X.trim().split(/\s+/),Ft,Bt=(mt[0].match(V),mt[0]);return Bt&&(mt.splice(0,1),Ft=(0,U.lu)(Bt)),{color:Ft,positions:mt.map(function(re){return{data:parseFloat(re),unit:re.toString().replace(/[^a-z|%]/g,"")}})}});return{type:J,angle:M,values:O}})},kt.getAnimStart=function(){var Kt,dt=(0,ie.Z)(kt),Ut=dt.startAt,J=dt.key,it=dt.computedStyle,R=dt.target,M=dt.vars,O=dt.tweenVars,X=(0,k.Z)({},Ut),mt=(Kt=O[J])!==null&&Kt!==void 0?Kt:(it||R)[J];(!mt||mt==="none"||mt==="auto")&&(mt=""),X[J]=X[J]||mt,X[J]=X[J]?kt.valueToIValue(X[J]):kt.defaultStartVars;var Ft=Math.max(M.length,X[J].length),Bt=(Ft===X[J].length?X[J]:M).map(function(re,De){var me,Xe,hr=X[J][De]||kt.defaultStartVars[De],Ke=M[De]||hr;if((!hr||hr.type!==Ke.type)&&(hr.type!==Ke.type&&Qt("type",hr.type,Ke.type),hr=kt.defaultStartVars[De]),we(Ke.type)||typeof Ke.values=="string"||typeof hr.values=="string")return(0,k.Z)({},Ke);if(((me=Ke.angle)===null||me===void 0?void 0:me.extent)!==((Xe=hr.angle)===null||Xe===void 0?void 0:Xe.extent)){var Lr,cn;Qt("extent keyword",(Lr=hr.angle)===null||Lr===void 0?void 0:Lr.extent,(cn=Ke.angle)===null||cn===void 0?void 0:cn.extent)}var $e=Math.max(hr.values.length,Ke.values.length),lr=$e===hr.values.length?hr.values:Ke.values;return hr.values=lr.map(function(Pr,Dr){var fe=hr.values[Dr],jt=Ke.values[Dr]||fe;return(0,k.Z)((0,k.Z)({},fe),{},{positions:(jt||fe).positions.map(function(ve,Ie){var ye=fe?fe.positions[Ie]||fe.positions[fe.positions.length-1]:jt.positions[jt.positions.length-1],ze=ve||ye;return!ye&&fe&&hr.values.length&&(ye={data:100/(hr.values.length-1)*Dr,unit:"%"}),ze.unit!==ye.unit&&Qt("units",ye.unit,ze.unit),{data:ye.data,unit:ze.unit}})})}),hr});return kt.start=Bt,kt.start},kt.render=function(Kt){var dt="",Ut=Math.max(kt.vars.length,kt.start.length);return(Ut===kt.vars.length?kt.vars:kt.start).forEach(function(J,it){var R=kt.start[it],M=kt.vars[it]||R;if(we(M.type)||typeof M.values=="string"||!M.angle){dt+="".concat(dt?",":""," ").concat(M.values).trim();return}var O=Math.max(R.values.length,M.values.length),X=(O===R.values.length?R.values:M.values).map(function(De,me){var Xe=R.values[me],hr=M.values[me];hr||(hr=Xe);var Ke=Xe.color,Lr=Xe.positions;!Ke&&hr.color&&(Ke=(0,E.Z)(hr.color)),Lr||(Lr=hr.positions.map(function(lr){return(0,k.Z)({},lr)}));var cn=hr.color?hr.color.map(function(lr,Pr){return q(Ke[Pr],lr,Kt)}):hr.color,$e=hr.positions.map(function(lr,Pr){return"".concat(q(Lr[Pr].data,lr.data,Kt)).concat(lr.unit)}).join(" ");return"".concat(cn?(0,U.Lq)(cn):cn||""," ").concat($e).trim()}),mt=M.angle,Ft=mt.angle&&mt.angle.map(function(De,me){return"".concat(q(R.angle.angle[me].data,De.data,Kt)).concat(De.unit)}).join(" "),Bt=mt.position&&mt.position.map(function(De,me){return"".concat(q(R.angle.position[me].data,De.data,Kt)).concat(De.unit)}).join(" "),re="".concat(mt.extent||""," ").concat(mt.shape||""," ").concat(Ft||""," ").concat(Bt?"at ".concat(Bt):"").trim();dt+="".concat(dt?",":""," ").concat(M.type,"(").concat(re?"".concat(re,","):"").concat(X.join(","),")").trim()}),dt},kt.value=Ce,kt.vars=kt.valueToIValue(Ce),kt.defaultStartVars=kt.vars.map(function(Kt){return we(Kt.type)||typeof Kt.values=="string"?(0,k.Z)({},Kt):(0,k.Z)((0,k.Z)({},Kt),{},{values:Kt.values.map(function(dt){var Ut;return dt.color&&typeof dt.color!="string"?(Ut=(0,E.Z)(dt.color),Ut[3]=0):Ut=dt.color,{color:Ut,positions:(0,E.Z)(dt.positions)}})})}),kt}return(0,$.Z)(St)}(pe);Tt.className="GradientsPlugin";var Le=C(654087),Mr=C.n(Le),Ar=function(){function qt(){var Jt=this;(0,Y.Z)(this,qt),this.lagThreshold=150,this.adjustedLag=33,this.emptyTime=0,this.elapsed=0,this.frameFPS=1e3/240,this.startTime=0,this.prevTime=0,this.useTimeout=!1,this.lastUpdate=this.startTime,this.nextTime=this.frameFPS,this.req=void 0,this.id=-1,this.tweenId=0,this.tickFn=[],this.state="sleep",this.time=0,this.frame=0,this.removeReq=function(St){return Jt.useTimeout?clearTimeout(St):(0,Le.cancel)(St)},this.tick=function(){var St=Jt.tickFn;Jt.startTime||(Jt.startTime=tt()-Jt.frameFPS,Jt.lastUpdate=Jt.startTime),Jt.elapsed=tt()-Jt.lastUpdate,Jt.elapsed>Jt.lagThreshold&&(Jt.startTime+=Jt.elapsed-Jt.adjustedLag),Jt.lastUpdate+=Jt.elapsed,Jt.time=Jt.lastUpdate-Jt.startTime;var Ce=Jt.time-Jt.nextTime;if(Ce>0){Jt.frame++,Jt.nextTime+=Ce+(Ce>=Jt.frameFPS?4:Jt.frameFPS-Ce);for(var kt=Jt.time-Jt.prevTime,Kt=0;Kt<St.length;Kt++)St[Kt].fn({time:Jt.time,elapsed:kt<Jt.frameFPS?Jt.frameFPS:kt});Jt.prevTime=Jt.time}if(!Jt.tickFn.length&&(Jt.emptyTime||(Jt.emptyTime=Jt.time+500),Jt.time>=Jt.emptyTime)){Jt.emptyTime=0,Jt.sleep();return}Jt.req&&(Jt.id=Jt.req(Jt.tick))},this.wake=function(){Jt.id&&Jt.sleep(),Jt.req=Jt.useTimeout?function(St){return setTimeout(St,Jt.frameFPS)}:Mr(),Jt.tick(),Jt.state="wake"},this.sleep=function(){Jt.removeReq(Jt.id),Jt.id=-1,Jt.req=void 0,Jt.state="sleep"},this.add=function(St){var Ce="TweenOneTicker_".concat(Jt.tweenId);return Jt.tweenId+=1,Jt.tickFn.findIndex(function(kt){return kt.key===Ce})===-1&&Jt.tickFn.push({key:Ce,fn:St}),Jt.emptyTime=0,Jt.req||Jt.wake(),Ce},this.clear=function(St){Jt.tickFn=Jt.tickFn.filter(function(Ce){return Ce.key!==St&&Ce.fn!==St})},this.timeout=function(St,Ce){if(typeof St!="function")return console.warn("not function");var kt=Jt.time,Kt=Jt.add(function(){var dt=Jt.time-kt;dt>=(Ce||0)&&(Jt.clear(Kt),St())});return Kt},this.interval=function(St,Ce){if(typeof St!="function")return console.warn("not function"),null;var kt=Jt.time;return Jt.add(function(){var Kt=Jt.time-kt;Kt>=(Ce||0)&&(kt=Jt.time,St())})}}return(0,$.Z)(qt,[{key:"fps",value:function(St,Ce){this.frameFPS=1e3/(St||240),this.nextTime=this.time+this.frameFPS,this.useTimeout=typeof Ce=="undefined"?this.useTimeout:Ce,this.useTimeout&&(this.req=function(kt){return setTimeout(kt,St)})}}]),qt}(),Ir=new Ar,Br=Ir,dn=function(){function qt(){var Jt=this;(0,Y.Z)(this,qt),this.children=[],this.autoSleep=200,this.tickerKey=void 0,this.startTime=void 0,this.addChild=function(St){Jt.children.indexOf(St)===-1?(Jt.children.push(St),Jt.updateTickerState()):Jt.start()},this.removeChild=function(St){Jt.children=Jt.children.filter(function(Ce){return Ce!==St}),Jt.updateTickerState()},this.kill=function(St){Jt.children=Jt.children.filter(function(Ce){var kt=Ce.root.targets,Kt=kt.map(function(Ut,J){if(St.indexOf(Ut)===-1)return Ut;delete Ut._tweenOneVars});Ce.root.targets=Kt;var dt=!!Kt.filter(function(Ut){return Ut}).length;return dt||Ce.kill(),dt}),Jt.updateTickerState()},this.killAll=function(St){St&&(Jt.children.forEach(function(Ce){Ce==null||Ce.root.targets.forEach(function(kt){kt&&delete kt._tweenOneVars})}),Jt.children=[]),Br.clear(Jt.tickerKey),Jt.tickerKey=void 0},this.getTotalTime=function(){for(var St=0,Ce=0;Ce<Jt.children.length;Ce++){var kt=Jt.children[Ce],Kt=kt.pausedState?0:kt.startTime+kt.totalTime;St?St=Math.max(Kt,St):St=Kt}return St},this.updateTickerState=function(){!Jt.children.length||!Jt.children.some(function(St){return!(St!=null&&St.pausedState)&&(!(St!=null&&St.reverseState)&&St.progressTime<St.totalTime||(St==null?void 0:St.reverseState)&&St.progressTime>0)})?Jt.killAll(!Jt.children.length):Jt.start()},this.start=function(){Jt.tickerKey||(Jt.tickerKey=Br.add(Jt.render))},this.render=function(St){for(var Ce=St.time,kt=St.elapsed,Kt=kt===void 0?0:kt,dt=Jt.children,Ut=dt.length,J=0;J<Ut;J++){var it=dt[J];if(it){var R=it.startTime-Kt,M=it.startTime+it.totalTime+Kt;Ce>R&&Ce<M&&!it.pausedState&&it.render({time:Ce,elapsed:Kt})}}}}return(0,$.Z)(qt,[{key:"totalTime",get:function(){return this.getTotalTime()}}]),qt}(),an=dn,Ln=C(141e3),Un=C.n(Ln);Un().path=function(qt,Jt){var St=Jt||{};if(Q)return"linear";for(var Ce=rt(qt),kt=Ce.getTotalLength(),Kt=St.rect||100,dt=St.lengthPixel||200,Ut=[],J=0;J<dt-1;J++)Ut.push(Ce.getPointAtLength(kt/(dt-1)*J));return Ut.push(Ce.getPointAtLength(dt)),function(R,M,O,X){var mt=Un().linear(R,M,O,X),Ft=Kt*mt,Bt=Ut.filter(function(re){return re.x>=Ft})[0]||Ce.getPointAtLength(mt*kt);return 1-Bt.y/Kt}};var Yn=Un(),xr=function(){function qt(Jt){var St=this;(0,Y.Z)(this,qt),this.item=void 0,this.vars={},this.start=void 0,this.parent=void 0,this.root=void 0,this.startAt={},this.mode=void 0,this.appearTo=0,this.props={},this.index=void 0,this.register=void 0,this.reverseStart=void 0,this.repeatNum=0,this.prevMoment=void 0,this.easing=void 0,this.changeValueToVars=function(dt,Ut,J){var it=(Array.isArray(Ut)||dt.match(/color|fill|stroke/i)||dt.match(H)&&typeof Ut=="string"||typeof Ut=="string"&&Ut.split(/[\s|,]/).length>1)&&!(dt in Et);if(dt in Et||it)return J?Ut:{value:Ut,plugins:[],array:it};var R=parseFloat(Ut.toString().replace(/=/g,"")),M=Ut.toString().replace(/[^a-z|%]/g,""),O=Ut.toString().charAt(1)==="="?Ut.toString().replace(/[^\+\=|\-\=]/gi,""):"";return{vars:R,unit:M,count:O}},this.setEase=function(dt){if(typeof dt=="function"){St.easing=dt;return}else if(dt.match(/,/g)){St.easing=Yn.path(dt);return}St.easing=Yn[dt]},this.getTotalTime=function(){var dt=St.props,Ut=dt.duration,J=Ut===void 0?450:Ut,it=dt.delay,R=it===void 0?0:it,M=dt.repeat,O=M===void 0?0:M,X=dt.repeatDelay,mt=X===void 0?0:X;return O===-1?Number.MAX_VALUE:R+J*(O+1)+mt*O},this.getEaseToRatio=function(dt,Ut){var J=St.props.ease,it=J===void 0?"":J;return(dt===0||dt===1)&&!(typeof it=="function"||it.match(/,/g))?dt:St.easing(Ut?1-dt:dt,Ut?1:0,Ut?0:1,1)},this.setRatioToVars=function(dt){for(var Ut=St.vars,J=St.root,it=0;it<J.targets.length;it++)if(J.targets[it])for(var R in Ut){var M=Ut[R];if(M.plugins){R==="PathMotion"?J.vars[it].style=M.plugins[it].render(dt):J.vars[it][R]=M.plugins[it].render(dt);continue}var O=M.vars,X=M.count,mt=M.unit,Ft=St.start[it][R];J.vars[it][R]=q(Ft,O,dt,X,mt)}},this.onRegisterAnimate=function(){St.register=!0;for(var dt=St.root,Ut=St.parent,J=St.startAt,it=[],R=0;R<dt.targets.length;R++){var M=dt.targets[R],O=dt.vars[R],X={};for(var mt in St.vars){var Ft=St.vars[mt];if(Ft.plugins){var Bt=new Et[Ft.array?"ArrayPlugin":mt](Ft.value,mt);Bt.target=M,Bt.root=dt,Bt.parent=Ut,Bt.targetIndex=R,Bt.tweenVars=O,Bt.index=St.index,Bt.startAt=J,X[mt]=Bt.getAnimStart(),Ft.plugins.push(Bt)}else{var re,De,me=(re=dt.attr?M.getAttribute(mt):O[mt]||M[mt])!==null&&re!==void 0?re:At(mt),Xe=(De=J[mt])!==null&&De!==void 0?De:me,hr=(0,b.Z)(Xe)==="object"&&"vars"in Xe&&"count"in Xe,Ke=hr?Xe.unit:"".concat(Xe).replace(/[^a-z|%]/g,""),Lr=Ft.unit;Ke&&Ke!==Lr&&console.warn("Different units, start unit ".concat(Ke,", to value unit ").concat(Lr,", remove start unit.")),X[mt]=hr?Z(me,Xe):parseFloat(Xe)}}it.push(X)}St.start=it},this.overflowRatio=function(dt){var Ut=dt<0?0:dt,J=St.props.duration;return Ut=Ut>J?J:Ut,Ut},this.render=function(dt){var Ut=dt.moment,J=dt.fps,it=J===void 0?0:J,R=dt.silence,M=dt.render,O=St.parent,X=St.root,mt=St.props,Ft=Xt(X.targets),Bt=O.onChange,re=mt.repeat,De=re===void 0?0:re,me=mt.type,Xe=me===void 0?"to":me,hr=mt.duration,Ke=hr===void 0?450:hr,Lr=mt.delay,cn=Lr===void 0?0:Lr,$e=mt.repeatDelay,lr=$e===void 0?0:$e,Pr=mt.yoyo;De=De===-1?Number.MAX_VALUE:De;var Dr=Ut-cn,fe=Math.floor(Dr/(Ke+lr))||0;fe=fe>De?De:fe,fe=fe<0?0:fe,Dr=Dr-(Ke+lr)*fe;var jt=!!(Pr&&fe%2),ve=Xe==="from",Ie=jt&&ve?!1:jt||ve;Dr=Ie?Ke-Dr:Dr;var ye=ve?0:cn,ze=Ie?1:0;if(!St.register&&Ut>=ye&&(St.onRegisterAnimate(),(Ie&&Dr<=0||!Ie&&Dr>=Ke&&Ke)&&(St.prevMoment=Ut,ze=Ie?0:1),St.setRatioToVars(ze),Bt({index:St.index,vars:X.vars})),St.register&&Ut>cn-it&&Ut<St.totalTime+it){Dr=St.overflowRatio(Dr),ze=Ie?1:0,Ut>=St.totalTime&&St.mode!=="onComplete"&&St.prevMoment!==void 0||St.prevMoment===void 0&&Ut>=St.totalTime&&Ke?(ze=Ie?0:1,St.mode="onComplete",St.props.onComplete&&St.props.onComplete({mode:St.mode,index:St.index,moment:Dr,ratio:ze,targets:Ft,vars:Xt(X.vars)})):St.prevMoment===void 0||Ut<=0&&Ut>-it&&St.mode!=="onStart"&&St.prevMoment>Ut?(St.mode="onStart",St.props.onStart&&St.props.onStart({mode:St.mode,index:St.index,moment:Dr,ratio:ze,targets:Ft,vars:Xt(X.vars)})):(ze=Dr&&Ke?Dr/Ke:0,St.mode="onUpdate",St.props.onUpdate&&St.props.onUpdate({mode:St.mode,index:St.index,moment:Dr,ratio:ze,targets:Ft,vars:Xt(X.vars)})),De&&fe!==St.repeatNum&&Ut&&St.mode==="onUpdate"&&(St.mode="onRepeat",St.props.onRepeat&&St.props.onRepeat({mode:St.mode,index:St.index,moment:Dr,ratio:ze,targets:Ft,vars:Xt(St.root.vars)})),St.setRatioToVars(St.getEaseToRatio(ze,ve)),De&&(St.repeatNum=fe);var sr={mode:St.mode,moment:Dr,repeat:fe,ratio:ze,targets:X.targets,vars:X.vars,index:St.index};R&&(sr.silence=R),M&&(sr.render=M),Bt(sr),St.prevMoment=Ut}},this.item=Jt,this.startAt=(0,k.Z)({},Jt.startAt),Object.keys(this.startAt).forEach(function(dt){St.startAt[dt]=St.changeValueToVars(dt,St.startAt[dt],!0)});var Ce={};for(var kt in Jt){var Kt=Jt[kt];kt in ct?Ce[kt]=Kt:this.vars[kt]=this.changeValueToVars(kt,Kt)}this.props=(0,k.Z)((0,k.Z)({},ct),Ce),this.setEase(this.props.ease)}return(0,$.Z)(qt,[{key:"totalTime",get:function(){return this.getTotalTime()}}]),qt}(),qe=(0,$.Z)(function qt(Jt){var St=this;(0,Y.Z)(this,qt),this.props=void 0,this.id=void 0,this.children=[],this.totalTime=0,this.totalTimeRegion=0,this.childTotalTime=0,this.childRegionTotalTime=0,this.prevMoment=void 0,this.progressTime=0,this.progressMoment=-1,this.startMoment=0,this.startTime=0,this.repeatNum=0,this.mode="onTimelineStart",this.pausedState=void 0,this.reverseState=void 0,this.root=void 0,this.parent=void 0,this.regionStartTime=0,this.regionEndTime=void 0,this.onChangeChild=void 0,this.onChangeTimeline=void 0,this.init=function(){for(var dt=St.props,Ut=dt.reverse,J=dt.animation,it=dt.moment,R=pt(J),M=0;M<R.length;M++){var O=R[M];O.type==="set"&&(O.duration=0);var X=new xr(O);X.index=M;var mt=M?Ct(O,R[M-1]):0;O.appearTo=mt,X.appearTo=mt,St.addChild(X)}St.render({time:(Ut?St.totalTime:0)+St.startTime,elapsed:16.67}),St.totalTime||St.render({time:(Ut?St.totalTime:0)+St.startTime,elapsed:16.67}),it?St.goto(it):St.play()},this.addChild=function(dt){dt.parent=St,dt.root=St.root,St.children.indexOf(dt)===-1&&(St.children.push(dt),St.setTotalTime())},this.setTotalTime=function(){St.childTotalTime=0,St.childRegionTotalTime=0;for(var dt=0;dt<St.children.length;dt++){var Ut=St.children[dt];if(Ut.appearTo!==St.childTotalTime){var J=Ut.appearTo+Ut.totalTime;J>St.childTotalTime&&(St.childTotalTime=J,St.childRegionTotalTime=J)}else St.childTotalTime+=Ut.totalTime,St.childRegionTotalTime+=Ut.totalTime}St.regionStartTime&&(St.childRegionTotalTime-=St.regionStartTime),St.regionEndTime&&(St.childRegionTotalTime=St.regionEndTime-St.regionStartTime);var it=St.props,R=it.repeat,M=R===void 0?0:R,O=it.repeatDelay,X=O===void 0?0:O,mt=it.delay;St.totalTime=M===-1?Number.MAX_VALUE:mt+St.childTotalTime*(M+1)+X*M,St.totalTimeRegion=M===-1?Number.MAX_VALUE:mt+St.childRegionTotalTime*(M+1)+X*M},this.setStartTimeOrMoment=function(dt){St.startTime=Br.time,St.startMoment=dt||St.progressMoment},this.reRenderCall=function(){St.render({time:St.startTime,elapsed:Br.elapsed||Br.frameFPS})},this.play=function(dt){if(dt){var J;(J=St.parent)===null||J===void 0||J.updateTickerState()}else{var Ut;(Ut=St.parent)===null||Ut===void 0||Ut.addChild(St)}},this.paused=function(){var dt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;St.pausedState=dt,St.setStartTimeOrMoment(),St.play(dt)},this.reverse=function(dt){St.reverseState=dt,St.setStartTimeOrMoment(),St.play(St.pausedState)},this.goto=function(dt,Ut){var J=dt-St.regionStartTime;St.startTime=Br.time,St.startMoment=J>St.totalTime?St.totalTime:J,St.progressMoment=St.startMoment,St.progressTime=J,St.play(St.pausedState),St.reRenderCall(),!!Ut!==St.pausedState&&St.paused(Ut)},this.kill=function(dt){if(typeof dt=="number")St.paused(),delete St.children[dt],St.setTotalTime(),St.paused(!1);else{var Ut;St.children=[],(Ut=St.parent)===null||Ut===void 0||Ut.removeChild(St)}},this.onChange=function(dt){dt.timelineMoment=St.progressMoment,St.onChangeChild(dt)},this.render=function(dt){var Ut=dt.time,J=dt.elapsed,it=J||Br.frameFPS||0,R=St.totalTime,M=St.totalTimeRegion,O=St.childTotalTime,X=St.childRegionTotalTime,mt=St.children,Ft=St.props,Bt=St.startTime,re=St.reverseState,De=St.pausedState,me=St.startMoment,Xe=St.onChangeTimeline,hr=St.parent,Ke=St.root,Lr=St.prevMoment,cn=St.regionStartTime,$e=Ft.repeatDelay,lr=$e===void 0?0:$e,Pr=Ft.yoyo,Dr=Ft.delay,fe=Ft.repeat,jt=fe===void 0?0:fe;jt=jt===-1?Number.MAX_VALUE:jt;var ve=Ut-Bt-Dr,Ie=re?me-ve:ve+me;if(!(Ie<-it)){var ye=Ie<0?0:Ie;ye=ye>R?R:ye,ye=me<cn?Ie:ye,ye=me>M?me:ye;var ze=jt?Math.floor(ye/(X+lr)):0;ze=jt&&ze>jt?jt:ze;var sr=ye-(X+lr)*ze,pr=!!(Pr&&ze%2);sr=pr?X-sr:sr,sr=cn+sr;var en=re?!pr:pr;if(St.mode="onTimelineUpdate",typeof Lr!="number"&&(St.mode="onTimelineStart"),ye>=M-Dr&&typeof Lr=="number"&&(St.mode="onTimelineComplete"),ze!==St.repeatNum&&(St.mode="onTimelineRepeat",ye>O*ze&&ye<O*ze+it)){for(var Fn=en?0:mt.length-1;en?Fn<=mt.length-1:Fn>=0;en?Fn++:Fn--){var ln=mt[Fn];en||(ln.prevMoment=void 0),ln.render({moment:en?ln.totalTime:0,fps:it})}Xe({moment:ye,totalTime:R,repeat:ze,mode:St.mode,targets:Ke.targets}),St.mode="onTimelineUpdate"}jt&&(St.repeatNum=ze),St.progressMoment=ye,St.prevMoment=ye,St.progressTime=ve;for(var ea=0;ea<mt.length;ea++){var fn=mt[ea],Hn=fn.totalTime+fn.appearTo,la=sr>=fn.appearTo-it&&sr<Hn+it;if((fn.mode!=="onComplete"&&sr>Hn+it&&!pr&&fn.totalTime||typeof fn.mode=="undefined"&&!fn.totalTime)&&(fn.render({moment:fn.totalTime,fps:it}),fn.prevMoment=void 0),sr<fn.appearTo-it&&fn.mode&&fn.mode!=="onStart"&&(fn.render({moment:fn.appearTo,fps:it,silence:!0}),fn.prevMoment=void 0,fn.mode=void 0),la){var xa=sr<0?0:sr;if(sr>Hn&&fn.mode==="onComplete"&&!pr)return;xa=sr>Hn?Hn:sr,fn.render({moment:xa-fn.appearTo,fps:it}),Hn||(fn.render({moment:fn.totalTime,fps:it,render:!0}),fn.prevMoment=void 0)}}Xe({moment:ye,totalTime:R,repeat:ze,mode:St.mode,targets:Ke.targets}),(De||M&&Ie+Dr>=M&&!re||re&&Ie+Dr<=0||!mt.length)&&(hr==null||hr.removeChild(St))}},this.props=Jt;var Ce=this.props,kt=Ce.paused,Kt=Ce.reverse;this.reverseState=Kt,this.pausedState=kt,this.regionStartTime=Jt.regionStartTime||0,this.regionEndTime=Jt.regionEndTime});Et.push(ae),Et.push(Tt),Et.push(ue);var Cr=0,tn=new an,vn=function(){function qt(Jt,St){var Ce=this;(0,Y.Z)(this,qt),this.targets=void 0,this.props=void 0,this.timeline=void 0,this.animate=void 0,this.$reverse=!1,this.vars=[],this.initTime=void 0,this.attr=void 0,this.init=function(){var kt=(0,h.Z)(y().mark(function Kt(dt){var Ut;return y().wrap(function(it){for(;;)switch(it.prev=it.next){case 0:Ut=xt(dt),Ce.targets[0].tagName&&!Ce.attr&&(Ut.animation=pt(Ut.animation).map(function(R){var M={style:{}};for(var O in R)O in Et||O in ct?M[O]=R[O]:M.style[O]=R[O];return Object.keys(M.style).length||delete M.style,R.duration&&(R.duration=Math.round(R.duration)),R.delay&&(R.delay=Math.round(R.delay)),R.appearTo&&(R.appearTo=Math.round(R.appearTo)),R.repeatDelay&&(R.repeatDelay=Math.round(R.repeatDelay)),M})),Ce.animate=new qe(Ut),Ce.animate.id="TweenOne_".concat(Cr),Cr++,Ce.animate.startTime=Ce.initTime,Ce.animate.onChangeChild=Ce.onChange,Ce.animate.onChangeTimeline=Ce.onChangeTimeline,Ce.animate.root=Ce,Ce.animate.parent=Ce.timeline,Ce.animate.init();case 11:case"end":return it.stop()}},Kt)}));return function(Kt){return kt.apply(this,arguments)}}(),this.renderToDom=function(){for(var kt=0;kt<Ce.vars.length;kt++){var Kt=Ce.vars[kt];for(var dt in Kt){var Ut=Kt[dt],J=Ce.targets[kt];if(J)if(Ce.props.attr&&J.tagName&&J.setAttribute){if(dt==="style")for(var it in Ut)J.style[it]=Ut[dt];J.setAttribute(dt,Ut)}else if(dt in Et){var R=Et[dt].key;if(typeof J[R]=="function")J[R](Ut.attr,Ut.path);else if((0,b.Z)(Ut)==="object"&&(0,b.Z)(J[R])==="object"&&R)for(var M in Ut){var O=Ut[M];R==="__self"?J[M]=O:J[R][M]=(0,b.Z)(O)==="object"&&O.text||O}else J[R||dt]=Ut}else J[dt]=Ut}}},this.onChange=function(kt){kt.mode==="onComplete"&&kt.render&&Ce.renderToDom(),kt.mode&&Ce.props.onChange&&!kt.silence&&(kt.targets=Xt(kt.targets),kt.vars=Xt(kt.vars),Ce.props.onChange(kt))},this.onChangeTimeline=function(kt){if(Ce.renderToDom(),kt.mode==="onTimelineComplete"){var Kt;(Kt=kt.targets)===null||Kt===void 0||Kt.forEach(function(dt){delete dt._tweenOneVars})}kt.mode&&Ce.props.onChangeTimeline&&(kt.targets=Xt(kt.targets),kt.vars=Xt(Ce.vars),Ce.props.onChangeTimeline(kt))},this.goto=function(kt,Kt){Ce.targets.forEach(function(dt){dt&&Object.keys(dt._tweenOneVars||{}).forEach(function(Ut){delete dt._tweenOneVars[Ut]})}),Ce.animate.goto(kt,Kt)},this.kill=function(kt){Ce.animate.kill(kt)},this.targets=Jt,this.props=St,this.timeline=tn,this.initTime=Br.time,this.attr=St.attr,Jt.forEach(function(kt){Ce.vars.push(kt._tweenOneVars)}),this.init(St)}return(0,$.Z)(qt,[{key:"paused",get:function(){return this.animate.pausedState},set:function(St){this.animate.paused(St)}},{key:"reverse",get:function(){return this.$reverse},set:function(St){this.$reverse=St,this.animate.reverse(St)}},{key:"regionStartTime",get:function(){return this.animate.regionStartTime},set:function(St){this.animate.regionStartTime=St,this.animate.setTotalTime()}},{key:"regionEndTime",get:function(){return this.animate.regionEndTime||this.animate.totalTime},set:function(St){this.animate.regionEndTime=St,this.animate.setTotalTime()}}]),qt}(),_n=function(Jt,St){if(!Jt){console.error("Error: targets is undefined.");return}Br.state!=="wake"&&Br.wake();var Ce=pt(Jt).map(function(Ut){return Ut._tweenOneVars=Ut._tweenOneVars||{},Ut}),kt=Ce.filter(function(Ut){return Ut.tagName}),Kt=Ce.filter(function(Ut){return!Ut.tagName}),dt=[];return kt.length&&dt.push(new vn(kt,St)),Kt.length&&dt.push(new vn(Kt,St)),Xt(dt)};_n.kill=function(qt){typeof qt=="undefined"?tn.killAll(!0):tn.kill(pt(qt))},_n.plugins=Et;var Pn=_n,_r=Pn;function un(qt){return!qt&&qt!==0?[]:Array.isArray(qt)?qt:[qt]}function An(qt,Jt){if(!qt||!Jt)return!1;var St=Object.keys(qt),Ce=Object.keys(Jt);return St.length&&Ce.length&&St.length===Ce.length?!St.some(function(kt){var Kt=qt[kt],dt=Jt[kt];if(Array.isArray(Kt)&&Array.isArray(dt)){var Ut=Kt.join(),J=dt.join();Ut===J&&!Ut.match(/\[object object\]/gi)&&(Kt=Ut,dt=J)}return Kt!==dt}):!1}function on(qt,Jt){if(qt===Jt||An(qt,Jt))return!0;if(!qt||!Jt||Object.keys(qt).length!==Object.keys(Jt).length)return!1;var St=!0,Ce=function(Kt,dt){var Ut=Object.keys(Kt).length>Object.keys(dt).length?Kt:dt,J=Object.keys(Kt).length>Object.keys(dt).length?dt:Kt;Object.keys(Ut).forEach(function(it){St&&(it in J||(St=!1),(0,b.Z)(Ut[it])==="object"&&(0,b.Z)(J[it])==="object"?St=on(Ut[it],J[it]):typeof Ut[it]=="function"&&typeof J[it]=="function"?Ut[it].toString().replace(/\s+/g,"")!==J[it].toString().replace(/\s+/g,"")&&(St=!1):Ut[it]!==J[it]&&(St=!1))})};return Array.isArray(qt)&&Array.isArray(Jt)?qt.forEach(function(kt,Kt){Ce(kt,Jt[Kt])}):Ce(qt,Jt),St}var Wn=["component","componentProps","animation","attr","paused","reverse","repeat","repeatDelay","yoyo","moment","onChange","onChangeTimeline","resetStyle","killPrevAnim"],Cn=L.forwardRef(function(qt,Jt){var St=qt.component,Ce=St===void 0?"div":St,kt=qt.componentProps,Kt=qt.animation,dt=qt.attr,Ut=qt.paused,J=qt.reverse,it=qt.repeat,R=qt.repeatDelay,M=qt.yoyo,O=qt.moment,X=qt.onChange,mt=qt.onChangeTimeline,Ft=qt.resetStyle,Bt=qt.killPrevAnim,re=Bt===void 0?!0:Bt,De=(0,T.Z)(qt,Wn),me=De||{},Xe=me.children,hr=me.className,Ke=me.style,Lr=Ke===void 0?{}:Ke,cn=(0,L.useRef)(),$e=(0,L.useRef)(),lr=(0,L.useRef)(),Pr=function(en,Fn){var ln=lr.current;if(ln){if(en==="moment"){typeof Fn=="number"&&ln.goto(Fn,Ut);return}ln[en]=!!Fn}};A(function(){Pr("paused",Ut)},[Ut]),A(function(){Pr("moment",O)},[O]),A(function(){Pr("reverse",J)},[J]),A(function(){if(!cn.current)return console.warn("Warning: TweenOne domRef is error.");if(!on(Kt,$e.current)){var pr=un(cn.current).map(function(ln){return ln instanceof Element||!(ln instanceof L.Component)?ln:(0,D.findDOMNode)(ln)}).filter(function(ln,ea){return ln instanceof Element?ln:(console.warn("Warning: TweenOne tag[".concat(ea,"] is not dom.")),!1)});if(lr.current&&re&&lr.current.kill(),Ft&&lr.current){var en=Ce?Lr:(0,k.Z)((0,k.Z)({},Lr),Xe.props.style),Fn=Object.keys(en).map(function(ln){return"".concat((0,U.Rs)(ln),":").concat((0,U.YJ)(ln,en[ln]))}).join(";");pr.forEach(function(ln){ln.setAttribute("style",Fn),delete ln._tweenOneVars})}lr.current=Kt&&_r(pr,{animation:Kt,attr:dt,yoyo:M,moment:O,repeat:it,reverse:J,paused:Ut,repeatDelay:R,onChange:X,onChangeTimeline:mt}),$e.current=Kt}},[Kt]),(0,L.useEffect)(function(){return function(){lr.current&&lr.current.kill&&lr.current.kill()}},[]);var Dr=function(en){cn.current=en,Jt&&"current"in Jt?Jt.current=en:typeof Jt=="function"&&Jt(en)};if(!Ce&&Xe&&typeof Xe!="string"&&typeof Xe!="boolean"&&typeof Xe!="number"){var fe=Xe.props,jt=fe||{},ve=jt.style,Ie=jt.className,ye=Ie===void 0?"":Ie,ze=(0,k.Z)((0,k.Z)({},ve),Lr),sr=hr?"".concat(hr," ").concat(ye).trim():ye;return L.cloneElement(Xe,{style:ze,ref:Dr,className:(0,E.Z)(new Set(sr.split(/\s+/))).join(" ").trim()||void 0})}return Ce?(0,L.createElement)(Ce,(0,k.Z)((0,k.Z)({ref:Dr},De),kt)):(console.warn("Warning: component is null, children must be ReactElement."),Xe)});Cn.isTweenOne=!0,Cn.displayName="TweenOne";var On=Cn,jn=["component","componentProps","leave","enter","appear","resetStyle","animatingClassName","onEnd","exclusive"],at=L.forwardRef(function(qt,Jt){var St=qt.component,Ce=St===void 0?"div":St,kt=qt.componentProps,Kt=kt===void 0?{}:kt,dt=qt.leave,Ut=dt===void 0?{x:-50,opacity:0}:dt,J=qt.enter,it=J===void 0?{x:50,opacity:0,type:"from"}:J,R=qt.appear,M=R===void 0?!0:R,O=qt.resetStyle,X=O===void 0?!0:O,mt=qt.animatingClassName,Ft=mt===void 0?["tween-one-entering","tween-one-leaving"]:mt,Bt=qt.onEnd,re=Bt===void 0?function(){}:Bt,De=qt.exclusive,me=De===void 0?!1:De,Xe=(0,T.Z)(qt,jn),hr=(0,L.useRef)([]),Ke=(0,L.useRef)([]),Lr=(0,L.useRef)({}),cn=(0,L.useRef)(!1),$e=(0,L.useRef)([]),lr=(0,L.useRef)({}),Pr=P(x(qt)),Dr=(0,L.useRef)(Pr),fe=(0,L.useState)(Pr),jt=(0,w.Z)(fe,2),ve=jt[0],Ie=jt[1],ye=function(fn){var Hn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},la=fn.key;return Lr.current[la]=L.createElement(On,(0,k.Z)((0,k.Z)({},Hn),{},{key:la,component:null}),fn),Lr.current[la]},ze=function(fn,Hn){var la=fn.replace(Ft[Hn?1:0],"").trim();return la.indexOf(Ft[Hn?0:1])===-1&&(la="".concat(la," ").concat(Ft[Hn?0:1]).trim()),la},sr=function(fn,Hn){var la=m(Hn,fn);return hr.current=[],Ke.current=[],fn.forEach(function(xa){if(xa){var ba=xa.key,Wi=p(Hn,ba);ba&&Lr.current[ba]&&(Lr.current[ba]=L.cloneElement(Lr.current[ba],{},xa)),!Wi&&ba&&hr.current.push(ba)}}),Hn.forEach(function(xa){if(xa){var ba=xa.key,Wi=p(fn,ba);!Wi&&ba&&(Ke.current.push(ba),delete Lr.current[ba])}}),la},pr=function(){if(!Object.keys(lr.current).length&&$e.current.length){var fn=sr($e.current[$e.current.length-1],Dr.current);Ie(fn),$e.current=[]}},en=function(fn,Hn,la){var xa=la.targets,ba=(0,b.Z)(xa.className)==="object"&&"baseVal"in xa.className,Wi=Hn==="enter"||Hn==="appear";if(fn&&la.mode==="onTimelineComplete"){if(delete lr.current[fn],ba?xa.className.baseVal=xa.className.baseVal.replace(Ft[Wi?0:1],"").trim():xa.className=xa.className.replace(Ft[Wi?0:1],"").trim(),Wi)hr.current.splice(hr.current.indexOf(fn),1),hr.current.length||pr();else if(Hn==="leave"&&(Ke.current.splice(Ke.current.indexOf(fn),1),Dr.current=Dr.current.filter(function(ti){return fn!==ti.key}),!Ke.current.length)){var ri=Dr.current.map(function(ti){return ti.key});Object.keys(Lr.current).forEach(function(ti){ri.indexOf(ti)===-1&&delete Lr.current[ti]}),Ie(Dr.current)}re({key:fn,type:Hn,target:la.targets})}},Fn=function(fn,Hn,la){var xa=la==="leave"?Ut:it;if(la==="appear"){var ba=S(M,fn.key,Hn);xa=ba&&it||null}var Wi=S(xa,fn.key,Hn),ri=function(io){en(fn.key,la,io)},ti=la==="appear"&&!M?fn.props.className:ze(fn.props.className||"",la==="enter"||la==="appear")||void 0,Si={key:fn.key,animation:Wi,onChangeTimeline:ri,resetStyle:X,className:ti};return(fn.key&&hr.current.concat(Ke.current).indexOf(fn.key)>=0||!cn.current&&xa)&&fn.key&&!Lr.current[fn.key]&&(lr.current[fn.key]=la),ye(fn,Si)};A(function(){if(cn.current){var ea=P(qt.children).filter(function(Hn){return Hn}),fn=P(Dr.current);Object.keys(lr.current).length&&!me?$e.current.push(ea):Ie(sr(ea,fn))}},[qt.children]),A(function(){pr()}),(0,L.useEffect)(function(){cn.current=!0},[]),Dr.current=ve;var ln=ve.map(function(ea,fn){if(!ea||!ea.key)return ea;var Hn=ea.key;return Ke.current.indexOf(Hn)>=0?Fn(ea,Ke.current.indexOf(Hn),"leave"):(hr.current.indexOf(Hn)>=0||lr.current[Hn]&&Ke.current.indexOf(Hn)===-1)&&!(lr.current[Hn]==="enter"&&Lr.current[Hn])?Fn(ea,hr.current.indexOf(Hn),"enter"):cn.current?Lr.current[Hn]:Fn(ea,fn,"appear")});return g?Ce?(0,L.createElement)(Ce,(0,k.Z)((0,k.Z)((0,k.Z)({},Xe),Kt),{},{ref:Jt}),qt.children):L.createElement(L.Fragment,null,qt.children):Ce?(0,L.createElement)(Ce,(0,k.Z)((0,k.Z)((0,k.Z)({},Xe),Kt),{},{ref:Jt}),ln):ln[0]?(0,L.cloneElement)(ln[0],{ref:Jt}):null});at.displayName="TweenOneGroup",at.isTweenOneGroup=!0;var Ze=at},217857:function(Ve,z,C){"use strict";var b;b={value:!0};var k=C(667294),w=C(308273);function T(rt,ct){var ot=rt==null?null:typeof Symbol!="undefined"&&rt[Symbol.iterator]||rt["@@iterator"];if(ot!=null){var xt,pt,Xt,Ct,At=[],Z=!0,q=!1;try{if(Xt=(ot=ot.call(rt)).next,ct===0){if(Object(ot)!==ot)return;Z=!1}else for(;!(Z=(xt=Xt.call(ot)).done)&&(At.push(xt.value),At.length!==ct);Z=!0);}catch(bt){q=!0,pt=bt}finally{try{if(!Z&&ot.return!=null&&(Ct=ot.return(),Object(Ct)!==Ct))return}finally{if(q)throw pt}}return At}}function L(rt,ct){var ot=Object.keys(rt);if(Object.getOwnPropertySymbols){var xt=Object.getOwnPropertySymbols(rt);ct&&(xt=xt.filter(function(pt){return Object.getOwnPropertyDescriptor(rt,pt).enumerable})),ot.push.apply(ot,xt)}return ot}function P(rt){for(var ct=1;ct<arguments.length;ct++){var ot=arguments[ct]!=null?arguments[ct]:{};ct%2?L(Object(ot),!0).forEach(function(xt){p(rt,xt,ot[xt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(rt,Object.getOwnPropertyDescriptors(ot)):L(Object(ot)).forEach(function(xt){Object.defineProperty(rt,xt,Object.getOwnPropertyDescriptor(ot,xt))})}return rt}function p(rt,ct,ot){return ct=h(ct),ct in rt?Object.defineProperty(rt,ct,{value:ot,enumerable:!0,configurable:!0,writable:!0}):rt[ct]=ot,rt}function m(){return m=Object.assign?Object.assign.bind():function(rt){for(var ct=1;ct<arguments.length;ct++){var ot=arguments[ct];for(var xt in ot)Object.prototype.hasOwnProperty.call(ot,xt)&&(rt[xt]=ot[xt])}return rt},m.apply(this,arguments)}function S(rt,ct){if(rt==null)return{};var ot={},xt=Object.keys(rt),pt,Xt;for(Xt=0;Xt<xt.length;Xt++)pt=xt[Xt],!(ct.indexOf(pt)>=0)&&(ot[pt]=rt[pt]);return ot}function x(rt,ct){if(rt==null)return{};var ot=S(rt,ct),xt,pt;if(Object.getOwnPropertySymbols){var Xt=Object.getOwnPropertySymbols(rt);for(pt=0;pt<Xt.length;pt++)xt=Xt[pt],!(ct.indexOf(xt)>=0)&&Object.prototype.propertyIsEnumerable.call(rt,xt)&&(ot[xt]=rt[xt])}return ot}function g(rt,ct){return A(rt)||T(rt,ct)||E(rt,ct)||F()}function A(rt){if(Array.isArray(rt))return rt}function E(rt,ct){if(rt){if(typeof rt=="string")return D(rt,ct);var ot=Object.prototype.toString.call(rt).slice(8,-1);if(ot==="Object"&&rt.constructor&&(ot=rt.constructor.name),ot==="Map"||ot==="Set")return Array.from(rt);if(ot==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ot))return D(rt,ct)}}function D(rt,ct){(ct==null||ct>rt.length)&&(ct=rt.length);for(var ot=0,xt=new Array(ct);ot<ct;ot++)xt[ot]=rt[ot];return xt}function F(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function y(rt,ct){if(typeof rt!="object"||rt===null)return rt;var ot=rt[Symbol.toPrimitive];if(ot!==void 0){var xt=ot.call(rt,ct||"default");if(typeof xt!="object")return xt;throw new TypeError("@@toPrimitive must return a primitive value.")}return(ct==="string"?String:Number)(rt)}function h(rt){var ct=y(rt,"string");return typeof ct=="symbol"?ct:String(ct)}var Y=typeof window!="undefined"&&typeof window.document!="undefined"&&typeof window.document.createElement!="undefined"?k.useLayoutEffect:k.useEffect;function $(rt){var ct=k.useRef(rt);return Y(function(){ct.current=rt}),k.useCallback(function(){for(var ot=arguments.length,xt=new Array(ot),pt=0;pt<ot;pt++)xt[pt]=arguments[pt];return ct.current.apply(void 0,xt)},[])}var U=function(ct,ot){var xt=ot.decimal,pt=ot.decimals,Xt=ot.duration,Ct=ot.easingFn,At=ot.end,Z=ot.formattingFn,q=ot.numerals,bt=ot.prefix,_t=ot.separator,nt=ot.start,vt=ot.suffix,It=ot.useEasing,Pt=ot.useGrouping,Et=ot.useIndianSeparators,Nt=ot.enableScrollSpy,$t=ot.scrollSpyDelay,ue=ot.scrollSpyOnce;return new w.CountUp(ct,At,{startVal:nt,duration:Xt,decimal:xt,decimalPlaces:pt,easingFn:Ct,formattingFn:Z,numerals:q,separator:_t,prefix:bt,suffix:vt,useEasing:It,useIndianSeparators:Et,useGrouping:Pt,enableScrollSpy:Nt,scrollSpyDelay:$t,scrollSpyOnce:ue})},W=["ref","startOnMount","enableReinitialize","delay","onEnd","onStart","onPauseResume","onReset","onUpdate"],V={decimal:".",separator:",",delay:null,prefix:"",suffix:"",duration:2,start:0,decimals:0,startOnMount:!0,enableReinitialize:!0,useEasing:!0,useGrouping:!0,useIndianSeparators:!1},H=function(ct){var ot=Object.fromEntries(Object.entries(ct).filter(function(ae){var Se=g(ae,2),be=Se[1];return be!==void 0})),xt=k.useMemo(function(){return P(P({},V),ot)},[ct]),pt=xt.ref,Xt=xt.startOnMount,Ct=xt.enableReinitialize,At=xt.delay,Z=xt.onEnd,q=xt.onStart,bt=xt.onPauseResume,_t=xt.onReset,nt=xt.onUpdate,vt=x(xt,W),It=k.useRef(),Pt=k.useRef(),Et=k.useRef(!1),Nt=$(function(){return U(typeof pt=="string"?pt:pt.current,vt)}),$t=$(function(ae){var Se=It.current;if(Se&&!ae)return Se;var be=Nt();return It.current=be,be}),ue=$(function(){var ae=function(){return $t(!0).start(function(){Z==null||Z({pauseResume:ie,reset:Dt,start:pe,update:ne})})};At&&At>0?Pt.current=setTimeout(ae,At*1e3):ae(),q==null||q({pauseResume:ie,reset:Dt,update:ne})}),ie=$(function(){$t().pauseResume(),bt==null||bt({reset:Dt,start:pe,update:ne})}),Dt=$(function(){$t().el&&(Pt.current&&clearTimeout(Pt.current),$t().reset(),_t==null||_t({pauseResume:ie,start:pe,update:ne}))}),ne=$(function(ae){$t().update(ae),nt==null||nt({pauseResume:ie,reset:Dt,start:pe})}),pe=$(function(){Dt(),ue()}),Wt=$(function(ae){Xt&&(ae&&Dt(),ue())});return k.useEffect(function(){Et.current?Ct&&Wt(!0):(Et.current=!0,Wt())},[Ct,Et,Wt,At,ct.start,ct.suffix,ct.prefix,ct.duration,ct.separator,ct.decimals,ct.decimal,ct.formattingFn]),k.useEffect(function(){return function(){Dt()}},[Dt]),{start:pe,pauseResume:ie,reset:Dt,update:ne,getCountUp:$t}},Q=["className","redraw","containerProps","children","style"],tt=function(ct){var ot=ct.className,xt=ct.redraw,pt=ct.containerProps,Xt=ct.children,Ct=ct.style,At=x(ct,Q),Z=k.useRef(null),q=k.useRef(!1),bt=H(P(P({},At),{},{ref:Z,startOnMount:typeof Xt!="function"||ct.delay===0,enableReinitialize:!1})),_t=bt.start,nt=bt.reset,vt=bt.update,It=bt.pauseResume,Pt=bt.getCountUp,Et=$(function(){_t()}),Nt=$(function(ie){ct.preserveValue||nt(),vt(ie)}),$t=$(function(){if(typeof ct.children=="function"&&!(Z.current instanceof Element)){console.error(`Couldn't find attached element to hook the CountUp instance into! Try to attach "containerRef" from the render prop to a an Element, eg. <span ref={containerRef} />.`);return}Pt()});k.useEffect(function(){$t()},[$t]),k.useEffect(function(){q.current&&Nt(ct.end)},[ct.end,Nt]);var ue=xt&&ct;return k.useEffect(function(){xt&&q.current&&Et()},[Et,xt,ue]),k.useEffect(function(){!xt&&q.current&&Et()},[Et,xt,ct.start,ct.suffix,ct.prefix,ct.duration,ct.separator,ct.decimals,ct.decimal,ct.className,ct.formattingFn]),k.useEffect(function(){q.current=!0},[]),typeof Xt=="function"?Xt({countUpRef:Z,start:_t,reset:nt,update:vt,pauseResume:It,getCountUp:Pt}):k.createElement("span",m({className:ot,ref:Z,style:Ct},pt),typeof ct.start!="undefined"?Pt().formattingFn(ct.start):"")};z.ZP=tt,b=H},175668:function(Ve,z,C){"use strict";function b(nt){"@babel/helpers - typeof";return b=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(vt){return typeof vt}:function(vt){return vt&&typeof Symbol=="function"&&vt.constructor===Symbol&&vt!==Symbol.prototype?"symbol":typeof vt},b(nt)}Object.defineProperty(z,"__esModule",{value:!0}),Object.defineProperty(z,"DraggableCore",{enumerable:!0,get:function(){return S.default}}),z.default=void 0;var k=D(C(667294)),w=A(C(45697)),T=A(C(973935)),L=A(C(386010)),P=C(381825),p=C(102849),m=C(909280),S=A(C(180783)),x=A(C(955904)),g=["axis","bounds","children","defaultPosition","defaultClassName","defaultClassNameDragging","defaultClassNameDragged","position","positionOffset","scale"];function A(nt){return nt&&nt.__esModule?nt:{default:nt}}function E(nt){if(typeof WeakMap!="function")return null;var vt=new WeakMap,It=new WeakMap;return(E=function(Et){return Et?It:vt})(nt)}function D(nt,vt){if(!vt&&nt&&nt.__esModule)return nt;if(nt===null||b(nt)!=="object"&&typeof nt!="function")return{default:nt};var It=E(vt);if(It&&It.has(nt))return It.get(nt);var Pt={},Et=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Nt in nt)if(Nt!=="default"&&Object.prototype.hasOwnProperty.call(nt,Nt)){var $t=Et?Object.getOwnPropertyDescriptor(nt,Nt):null;$t&&($t.get||$t.set)?Object.defineProperty(Pt,Nt,$t):Pt[Nt]=nt[Nt]}return Pt.default=nt,It&&It.set(nt,Pt),Pt}function F(){return F=Object.assign||function(nt){for(var vt=1;vt<arguments.length;vt++){var It=arguments[vt];for(var Pt in It)Object.prototype.hasOwnProperty.call(It,Pt)&&(nt[Pt]=It[Pt])}return nt},F.apply(this,arguments)}function y(nt,vt){if(nt==null)return{};var It=h(nt,vt),Pt,Et;if(Object.getOwnPropertySymbols){var Nt=Object.getOwnPropertySymbols(nt);for(Et=0;Et<Nt.length;Et++)Pt=Nt[Et],!(vt.indexOf(Pt)>=0)&&Object.prototype.propertyIsEnumerable.call(nt,Pt)&&(It[Pt]=nt[Pt])}return It}function h(nt,vt){if(nt==null)return{};var It={},Pt=Object.keys(nt),Et,Nt;for(Nt=0;Nt<Pt.length;Nt++)Et=Pt[Nt],!(vt.indexOf(Et)>=0)&&(It[Et]=nt[Et]);return It}function Y(nt,vt){var It=Object.keys(nt);if(Object.getOwnPropertySymbols){var Pt=Object.getOwnPropertySymbols(nt);vt&&(Pt=Pt.filter(function(Et){return Object.getOwnPropertyDescriptor(nt,Et).enumerable})),It.push.apply(It,Pt)}return It}function $(nt){for(var vt=1;vt<arguments.length;vt++){var It=arguments[vt]!=null?arguments[vt]:{};vt%2?Y(Object(It),!0).forEach(function(Pt){bt(nt,Pt,It[Pt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(nt,Object.getOwnPropertyDescriptors(It)):Y(Object(It)).forEach(function(Pt){Object.defineProperty(nt,Pt,Object.getOwnPropertyDescriptor(It,Pt))})}return nt}function U(nt,vt){return tt(nt)||Q(nt,vt)||V(nt,vt)||W()}function W(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function V(nt,vt){if(nt){if(typeof nt=="string")return H(nt,vt);var It=Object.prototype.toString.call(nt).slice(8,-1);if(It==="Object"&&nt.constructor&&(It=nt.constructor.name),It==="Map"||It==="Set")return Array.from(nt);if(It==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(It))return H(nt,vt)}}function H(nt,vt){(vt==null||vt>nt.length)&&(vt=nt.length);for(var It=0,Pt=new Array(vt);It<vt;It++)Pt[It]=nt[It];return Pt}function Q(nt,vt){var It=nt==null?null:typeof Symbol!="undefined"&&nt[Symbol.iterator]||nt["@@iterator"];if(It!=null){var Pt=[],Et=!0,Nt=!1,$t,ue;try{for(It=It.call(nt);!(Et=($t=It.next()).done)&&(Pt.push($t.value),!(vt&&Pt.length===vt));Et=!0);}catch(ie){Nt=!0,ue=ie}finally{try{!Et&&It.return!=null&&It.return()}finally{if(Nt)throw ue}}return Pt}}function tt(nt){if(Array.isArray(nt))return nt}function rt(nt,vt){if(!(nt instanceof vt))throw new TypeError("Cannot call a class as a function")}function ct(nt,vt){for(var It=0;It<vt.length;It++){var Pt=vt[It];Pt.enumerable=Pt.enumerable||!1,Pt.configurable=!0,"value"in Pt&&(Pt.writable=!0),Object.defineProperty(nt,Pt.key,Pt)}}function ot(nt,vt,It){return vt&&ct(nt.prototype,vt),It&&ct(nt,It),Object.defineProperty(nt,"prototype",{writable:!1}),nt}function xt(nt,vt){if(typeof vt!="function"&&vt!==null)throw new TypeError("Super expression must either be null or a function");nt.prototype=Object.create(vt&&vt.prototype,{constructor:{value:nt,writable:!0,configurable:!0}}),Object.defineProperty(nt,"prototype",{writable:!1}),vt&&pt(nt,vt)}function pt(nt,vt){return pt=Object.setPrototypeOf||function(Pt,Et){return Pt.__proto__=Et,Pt},pt(nt,vt)}function Xt(nt){var vt=Z();return function(){var Pt=q(nt),Et;if(vt){var Nt=q(this).constructor;Et=Reflect.construct(Pt,arguments,Nt)}else Et=Pt.apply(this,arguments);return Ct(this,Et)}}function Ct(nt,vt){if(vt&&(b(vt)==="object"||typeof vt=="function"))return vt;if(vt!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return At(nt)}function At(nt){if(nt===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return nt}function Z(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(nt){return!1}}function q(nt){return q=Object.setPrototypeOf?Object.getPrototypeOf:function(It){return It.__proto__||Object.getPrototypeOf(It)},q(nt)}function bt(nt,vt,It){return vt in nt?Object.defineProperty(nt,vt,{value:It,enumerable:!0,configurable:!0,writable:!0}):nt[vt]=It,nt}var _t=function(nt){xt(It,nt);var vt=Xt(It);function It(Pt){var Et;return rt(this,It),Et=vt.call(this,Pt),bt(At(Et),"onDragStart",function(Nt,$t){(0,x.default)("Draggable: onDragStart: %j",$t);var ue=Et.props.onStart(Nt,(0,p.createDraggableData)(At(Et),$t));if(ue===!1)return!1;Et.setState({dragging:!0,dragged:!0})}),bt(At(Et),"onDrag",function(Nt,$t){if(!Et.state.dragging)return!1;(0,x.default)("Draggable: onDrag: %j",$t);var ue=(0,p.createDraggableData)(At(Et),$t),ie={x:ue.x,y:ue.y};if(Et.props.bounds){var Dt=ie.x,ne=ie.y;ie.x+=Et.state.slackX,ie.y+=Et.state.slackY;var pe=(0,p.getBoundPosition)(At(Et),ie.x,ie.y),Wt=U(pe,2),ae=Wt[0],Se=Wt[1];ie.x=ae,ie.y=Se,ie.slackX=Et.state.slackX+(Dt-ie.x),ie.slackY=Et.state.slackY+(ne-ie.y),ue.x=ie.x,ue.y=ie.y,ue.deltaX=ie.x-Et.state.x,ue.deltaY=ie.y-Et.state.y}var be=Et.props.onDrag(Nt,ue);if(be===!1)return!1;Et.setState(ie)}),bt(At(Et),"onDragStop",function(Nt,$t){if(!Et.state.dragging)return!1;var ue=Et.props.onStop(Nt,(0,p.createDraggableData)(At(Et),$t));if(ue===!1)return!1;(0,x.default)("Draggable: onDragStop: %j",$t);var ie={dragging:!1,slackX:0,slackY:0},Dt=!!Et.props.position;if(Dt){var ne=Et.props.position,pe=ne.x,Wt=ne.y;ie.x=pe,ie.y=Wt}Et.setState(ie)}),Et.state={dragging:!1,dragged:!1,x:Pt.position?Pt.position.x:Pt.defaultPosition.x,y:Pt.position?Pt.position.y:Pt.defaultPosition.y,prevPropsPosition:$({},Pt.position),slackX:0,slackY:0,isElementSVG:!1},Pt.position&&!(Pt.onDrag||Pt.onStop)&&console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element."),Et}return ot(It,[{key:"componentDidMount",value:function(){typeof window.SVGElement!="undefined"&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}},{key:"componentWillUnmount",value:function(){this.setState({dragging:!1})}},{key:"findDOMNode",value:function(){var Et,Nt,$t;return(Et=(Nt=this.props)===null||Nt===void 0||($t=Nt.nodeRef)===null||$t===void 0?void 0:$t.current)!==null&&Et!==void 0?Et:T.default.findDOMNode(this)}},{key:"render",value:function(){var Et,Nt=this.props,$t=Nt.axis,ue=Nt.bounds,ie=Nt.children,Dt=Nt.defaultPosition,ne=Nt.defaultClassName,pe=Nt.defaultClassNameDragging,Wt=Nt.defaultClassNameDragged,ae=Nt.position,Se=Nt.positionOffset,be=Nt.scale,Qt=y(Nt,g),we={},Tt=null,Le=!!ae,Mr=!Le||this.state.dragging,Ar=ae||Dt,Ir={x:(0,p.canDragX)(this)&&Mr?this.state.x:Ar.x,y:(0,p.canDragY)(this)&&Mr?this.state.y:Ar.y};this.state.isElementSVG?Tt=(0,P.createSVGTransform)(Ir,Se):we=(0,P.createCSSTransform)(Ir,Se);var Br=(0,L.default)(ie.props.className||"",ne,(Et={},bt(Et,pe,this.state.dragging),bt(Et,Wt,this.state.dragged),Et));return k.createElement(S.default,F({},Qt,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),k.cloneElement(k.Children.only(ie),{className:Br,style:$($({},ie.props.style),we),transform:Tt}))}}],[{key:"getDerivedStateFromProps",value:function(Et,Nt){var $t=Et.position,ue=Nt.prevPropsPosition;return $t&&(!ue||$t.x!==ue.x||$t.y!==ue.y)?((0,x.default)("Draggable: getDerivedStateFromProps %j",{position:$t,prevPropsPosition:ue}),{x:$t.x,y:$t.y,prevPropsPosition:$({},$t)}):null}}]),It}(k.Component);z.default=_t,bt(_t,"displayName","Draggable"),bt(_t,"propTypes",$($({},S.default.propTypes),{},{axis:w.default.oneOf(["both","x","y","none"]),bounds:w.default.oneOfType([w.default.shape({left:w.default.number,right:w.default.number,top:w.default.number,bottom:w.default.number}),w.default.string,w.default.oneOf([!1])]),defaultClassName:w.default.string,defaultClassNameDragging:w.default.string,defaultClassNameDragged:w.default.string,defaultPosition:w.default.shape({x:w.default.number,y:w.default.number}),positionOffset:w.default.shape({x:w.default.oneOfType([w.default.number,w.default.string]),y:w.default.oneOfType([w.default.number,w.default.string])}),position:w.default.shape({x:w.default.number,y:w.default.number}),className:m.dontSetMe,style:m.dontSetMe,transform:m.dontSetMe})),bt(_t,"defaultProps",$($({},S.default.defaultProps),{},{axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1}))},180783:function(Ve,z,C){"use strict";function b(Ct){"@babel/helpers - typeof";return b=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(At){return typeof At}:function(At){return At&&typeof Symbol=="function"&&At.constructor===Symbol&&At!==Symbol.prototype?"symbol":typeof At},b(Ct)}Object.defineProperty(z,"__esModule",{value:!0}),z.default=void 0;var k=g(C(667294)),w=S(C(45697)),T=S(C(973935)),L=C(381825),P=C(102849),p=C(909280),m=S(C(955904));function S(Ct){return Ct&&Ct.__esModule?Ct:{default:Ct}}function x(Ct){if(typeof WeakMap!="function")return null;var At=new WeakMap,Z=new WeakMap;return(x=function(bt){return bt?Z:At})(Ct)}function g(Ct,At){if(!At&&Ct&&Ct.__esModule)return Ct;if(Ct===null||b(Ct)!=="object"&&typeof Ct!="function")return{default:Ct};var Z=x(At);if(Z&&Z.has(Ct))return Z.get(Ct);var q={},bt=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var _t in Ct)if(_t!=="default"&&Object.prototype.hasOwnProperty.call(Ct,_t)){var nt=bt?Object.getOwnPropertyDescriptor(Ct,_t):null;nt&&(nt.get||nt.set)?Object.defineProperty(q,_t,nt):q[_t]=Ct[_t]}return q.default=Ct,Z&&Z.set(Ct,q),q}function A(Ct,At){return h(Ct)||y(Ct,At)||D(Ct,At)||E()}function E(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function D(Ct,At){if(Ct){if(typeof Ct=="string")return F(Ct,At);var Z=Object.prototype.toString.call(Ct).slice(8,-1);if(Z==="Object"&&Ct.constructor&&(Z=Ct.constructor.name),Z==="Map"||Z==="Set")return Array.from(Ct);if(Z==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Z))return F(Ct,At)}}function F(Ct,At){(At==null||At>Ct.length)&&(At=Ct.length);for(var Z=0,q=new Array(At);Z<At;Z++)q[Z]=Ct[Z];return q}function y(Ct,At){var Z=Ct==null?null:typeof Symbol!="undefined"&&Ct[Symbol.iterator]||Ct["@@iterator"];if(Z!=null){var q=[],bt=!0,_t=!1,nt,vt;try{for(Z=Z.call(Ct);!(bt=(nt=Z.next()).done)&&(q.push(nt.value),!(At&&q.length===At));bt=!0);}catch(It){_t=!0,vt=It}finally{try{!bt&&Z.return!=null&&Z.return()}finally{if(_t)throw vt}}return q}}function h(Ct){if(Array.isArray(Ct))return Ct}function Y(Ct,At){if(!(Ct instanceof At))throw new TypeError("Cannot call a class as a function")}function $(Ct,At){for(var Z=0;Z<At.length;Z++){var q=At[Z];q.enumerable=q.enumerable||!1,q.configurable=!0,"value"in q&&(q.writable=!0),Object.defineProperty(Ct,q.key,q)}}function U(Ct,At,Z){return At&&$(Ct.prototype,At),Z&&$(Ct,Z),Object.defineProperty(Ct,"prototype",{writable:!1}),Ct}function W(Ct,At){if(typeof At!="function"&&At!==null)throw new TypeError("Super expression must either be null or a function");Ct.prototype=Object.create(At&&At.prototype,{constructor:{value:Ct,writable:!0,configurable:!0}}),Object.defineProperty(Ct,"prototype",{writable:!1}),At&&V(Ct,At)}function V(Ct,At){return V=Object.setPrototypeOf||function(q,bt){return q.__proto__=bt,q},V(Ct,At)}function H(Ct){var At=rt();return function(){var q=ct(Ct),bt;if(At){var _t=ct(this).constructor;bt=Reflect.construct(q,arguments,_t)}else bt=q.apply(this,arguments);return Q(this,bt)}}function Q(Ct,At){if(At&&(b(At)==="object"||typeof At=="function"))return At;if(At!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return tt(Ct)}function tt(Ct){if(Ct===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Ct}function rt(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(Ct){return!1}}function ct(Ct){return ct=Object.setPrototypeOf?Object.getPrototypeOf:function(Z){return Z.__proto__||Object.getPrototypeOf(Z)},ct(Ct)}function ot(Ct,At,Z){return At in Ct?Object.defineProperty(Ct,At,{value:Z,enumerable:!0,configurable:!0,writable:!0}):Ct[At]=Z,Ct}var xt={touch:{start:"touchstart",move:"touchmove",stop:"touchend"},mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"}},pt=xt.mouse,Xt=function(Ct){W(Z,Ct);var At=H(Z);function Z(){var q;Y(this,Z);for(var bt=arguments.length,_t=new Array(bt),nt=0;nt<bt;nt++)_t[nt]=arguments[nt];return q=At.call.apply(At,[this].concat(_t)),ot(tt(q),"state",{dragging:!1,lastX:NaN,lastY:NaN,touchIdentifier:null}),ot(tt(q),"mounted",!1),ot(tt(q),"handleDragStart",function(vt){if(q.props.onMouseDown(vt),!q.props.allowAnyClick&&typeof vt.button=="number"&&vt.button!==0)return!1;var It=q.findDOMNode();if(!It||!It.ownerDocument||!It.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");var Pt=It.ownerDocument;if(!(q.props.disabled||!(vt.target instanceof Pt.defaultView.Node)||q.props.handle&&!(0,L.matchesSelectorAndParentsTo)(vt.target,q.props.handle,It)||q.props.cancel&&(0,L.matchesSelectorAndParentsTo)(vt.target,q.props.cancel,It))){vt.type==="touchstart"&&vt.preventDefault();var Et=(0,L.getTouchIdentifier)(vt);q.setState({touchIdentifier:Et});var Nt=(0,P.getControlPosition)(vt,Et,tt(q));if(Nt!=null){var $t=Nt.x,ue=Nt.y,ie=(0,P.createCoreData)(tt(q),$t,ue);(0,m.default)("DraggableCore: handleDragStart: %j",ie),(0,m.default)("calling",q.props.onStart);var Dt=q.props.onStart(vt,ie);Dt===!1||q.mounted===!1||(q.props.enableUserSelectHack&&(0,L.addUserSelectStyles)(Pt),q.setState({dragging:!0,lastX:$t,lastY:ue}),(0,L.addEvent)(Pt,pt.move,q.handleDrag),(0,L.addEvent)(Pt,pt.stop,q.handleDragStop))}}}),ot(tt(q),"handleDrag",function(vt){var It=(0,P.getControlPosition)(vt,q.state.touchIdentifier,tt(q));if(It!=null){var Pt=It.x,Et=It.y;if(Array.isArray(q.props.grid)){var Nt=Pt-q.state.lastX,$t=Et-q.state.lastY,ue=(0,P.snapToGrid)(q.props.grid,Nt,$t),ie=A(ue,2);if(Nt=ie[0],$t=ie[1],!Nt&&!$t)return;Pt=q.state.lastX+Nt,Et=q.state.lastY+$t}var Dt=(0,P.createCoreData)(tt(q),Pt,Et);(0,m.default)("DraggableCore: handleDrag: %j",Dt);var ne=q.props.onDrag(vt,Dt);if(ne===!1||q.mounted===!1){try{q.handleDragStop(new MouseEvent("mouseup"))}catch(Wt){var pe=document.createEvent("MouseEvents");pe.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),q.handleDragStop(pe)}return}q.setState({lastX:Pt,lastY:Et})}}),ot(tt(q),"handleDragStop",function(vt){if(q.state.dragging){var It=(0,P.getControlPosition)(vt,q.state.touchIdentifier,tt(q));if(It!=null){var Pt=It.x,Et=It.y;if(Array.isArray(q.props.grid)){var Nt=Pt-q.state.lastX||0,$t=Et-q.state.lastY||0,ue=(0,P.snapToGrid)(q.props.grid,Nt,$t),ie=A(ue,2);Nt=ie[0],$t=ie[1],Pt=q.state.lastX+Nt,Et=q.state.lastY+$t}var Dt=(0,P.createCoreData)(tt(q),Pt,Et),ne=q.props.onStop(vt,Dt);if(ne===!1||q.mounted===!1)return!1;var pe=q.findDOMNode();pe&&q.props.enableUserSelectHack&&(0,L.removeUserSelectStyles)(pe.ownerDocument),(0,m.default)("DraggableCore: handleDragStop: %j",Dt),q.setState({dragging:!1,lastX:NaN,lastY:NaN}),pe&&((0,m.default)("DraggableCore: Removing handlers"),(0,L.removeEvent)(pe.ownerDocument,pt.move,q.handleDrag),(0,L.removeEvent)(pe.ownerDocument,pt.stop,q.handleDragStop))}}}),ot(tt(q),"onMouseDown",function(vt){return pt=xt.mouse,q.handleDragStart(vt)}),ot(tt(q),"onMouseUp",function(vt){return pt=xt.mouse,q.handleDragStop(vt)}),ot(tt(q),"onTouchStart",function(vt){return pt=xt.touch,q.handleDragStart(vt)}),ot(tt(q),"onTouchEnd",function(vt){return pt=xt.touch,q.handleDragStop(vt)}),q}return U(Z,[{key:"componentDidMount",value:function(){this.mounted=!0;var bt=this.findDOMNode();bt&&(0,L.addEvent)(bt,xt.touch.start,this.onTouchStart,{passive:!1})}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var bt=this.findDOMNode();if(bt){var _t=bt.ownerDocument;(0,L.removeEvent)(_t,xt.mouse.move,this.handleDrag),(0,L.removeEvent)(_t,xt.touch.move,this.handleDrag),(0,L.removeEvent)(_t,xt.mouse.stop,this.handleDragStop),(0,L.removeEvent)(_t,xt.touch.stop,this.handleDragStop),(0,L.removeEvent)(bt,xt.touch.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,L.removeUserSelectStyles)(_t)}}},{key:"findDOMNode",value:function(){var bt,_t,nt;return(bt=this.props)!==null&&bt!==void 0&&bt.nodeRef?(_t=this.props)===null||_t===void 0||(nt=_t.nodeRef)===null||nt===void 0?void 0:nt.current:T.default.findDOMNode(this)}},{key:"render",value:function(){return k.cloneElement(k.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}}]),Z}(k.Component);z.default=Xt,ot(Xt,"displayName","DraggableCore"),ot(Xt,"propTypes",{allowAnyClick:w.default.bool,disabled:w.default.bool,enableUserSelectHack:w.default.bool,offsetParent:function(At,Z){if(At[Z]&&At[Z].nodeType!==1)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:w.default.arrayOf(w.default.number),handle:w.default.string,cancel:w.default.string,nodeRef:w.default.object,onStart:w.default.func,onDrag:w.default.func,onStop:w.default.func,onMouseDown:w.default.func,scale:w.default.number,className:p.dontSetMe,style:p.dontSetMe,transform:p.dontSetMe}),ot(Xt,"defaultProps",{allowAnyClick:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1})},861193:function(Ve,z,C){"use strict";var b=C(175668),k=b.default,w=b.DraggableCore;Ve.exports=k,Ve.exports.default=k,Ve.exports.DraggableCore=w},381825:function(Ve,z,C){"use strict";function b(ot){"@babel/helpers - typeof";return b=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(xt){return typeof xt}:function(xt){return xt&&typeof Symbol=="function"&&xt.constructor===Symbol&&xt!==Symbol.prototype?"symbol":typeof xt},b(ot)}Object.defineProperty(z,"__esModule",{value:!0}),z.addClassName=rt,z.addEvent=A,z.addUserSelectStyles=Q,z.createCSSTransform=$,z.createSVGTransform=U,z.getTouch=V,z.getTouchIdentifier=H,z.getTranslation=W,z.innerHeight=y,z.innerWidth=h,z.matchesSelector=x,z.matchesSelectorAndParentsTo=g,z.offsetXYFromParent=Y,z.outerHeight=D,z.outerWidth=F,z.removeClassName=ct,z.removeEvent=E,z.removeUserSelectStyles=tt;var k=C(909280),w=L(C(138650));function T(ot){if(typeof WeakMap!="function")return null;var xt=new WeakMap,pt=new WeakMap;return(T=function(Ct){return Ct?pt:xt})(ot)}function L(ot,xt){if(!xt&&ot&&ot.__esModule)return ot;if(ot===null||b(ot)!=="object"&&typeof ot!="function")return{default:ot};var pt=T(xt);if(pt&&pt.has(ot))return pt.get(ot);var Xt={},Ct=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var At in ot)if(At!=="default"&&Object.prototype.hasOwnProperty.call(ot,At)){var Z=Ct?Object.getOwnPropertyDescriptor(ot,At):null;Z&&(Z.get||Z.set)?Object.defineProperty(Xt,At,Z):Xt[At]=ot[At]}return Xt.default=ot,pt&&pt.set(ot,Xt),Xt}function P(ot,xt){var pt=Object.keys(ot);if(Object.getOwnPropertySymbols){var Xt=Object.getOwnPropertySymbols(ot);xt&&(Xt=Xt.filter(function(Ct){return Object.getOwnPropertyDescriptor(ot,Ct).enumerable})),pt.push.apply(pt,Xt)}return pt}function p(ot){for(var xt=1;xt<arguments.length;xt++){var pt=arguments[xt]!=null?arguments[xt]:{};xt%2?P(Object(pt),!0).forEach(function(Xt){m(ot,Xt,pt[Xt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(ot,Object.getOwnPropertyDescriptors(pt)):P(Object(pt)).forEach(function(Xt){Object.defineProperty(ot,Xt,Object.getOwnPropertyDescriptor(pt,Xt))})}return ot}function m(ot,xt,pt){return xt in ot?Object.defineProperty(ot,xt,{value:pt,enumerable:!0,configurable:!0,writable:!0}):ot[xt]=pt,ot}var S="";function x(ot,xt){return S||(S=(0,k.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],function(pt){return(0,k.isFunction)(ot[pt])})),(0,k.isFunction)(ot[S])?ot[S](xt):!1}function g(ot,xt,pt){var Xt=ot;do{if(x(Xt,xt))return!0;if(Xt===pt)return!1;Xt=Xt.parentNode}while(Xt);return!1}function A(ot,xt,pt,Xt){if(ot){var Ct=p({capture:!0},Xt);ot.addEventListener?ot.addEventListener(xt,pt,Ct):ot.attachEvent?ot.attachEvent("on"+xt,pt):ot["on"+xt]=pt}}function E(ot,xt,pt,Xt){if(ot){var Ct=p({capture:!0},Xt);ot.removeEventListener?ot.removeEventListener(xt,pt,Ct):ot.detachEvent?ot.detachEvent("on"+xt,pt):ot["on"+xt]=null}}function D(ot){var xt=ot.clientHeight,pt=ot.ownerDocument.defaultView.getComputedStyle(ot);return xt+=(0,k.int)(pt.borderTopWidth),xt+=(0,k.int)(pt.borderBottomWidth),xt}function F(ot){var xt=ot.clientWidth,pt=ot.ownerDocument.defaultView.getComputedStyle(ot);return xt+=(0,k.int)(pt.borderLeftWidth),xt+=(0,k.int)(pt.borderRightWidth),xt}function y(ot){var xt=ot.clientHeight,pt=ot.ownerDocument.defaultView.getComputedStyle(ot);return xt-=(0,k.int)(pt.paddingTop),xt-=(0,k.int)(pt.paddingBottom),xt}function h(ot){var xt=ot.clientWidth,pt=ot.ownerDocument.defaultView.getComputedStyle(ot);return xt-=(0,k.int)(pt.paddingLeft),xt-=(0,k.int)(pt.paddingRight),xt}function Y(ot,xt,pt){var Xt=xt===xt.ownerDocument.body,Ct=Xt?{left:0,top:0}:xt.getBoundingClientRect(),At=(ot.clientX+xt.scrollLeft-Ct.left)/pt,Z=(ot.clientY+xt.scrollTop-Ct.top)/pt;return{x:At,y:Z}}function $(ot,xt){var pt=W(ot,xt,"px");return m({},(0,w.browserPrefixToKey)("transform",w.default),pt)}function U(ot,xt){var pt=W(ot,xt,"");return pt}function W(ot,xt,pt){var Xt=ot.x,Ct=ot.y,At="translate(".concat(Xt).concat(pt,",").concat(Ct).concat(pt,")");if(xt){var Z="".concat(typeof xt.x=="string"?xt.x:xt.x+pt),q="".concat(typeof xt.y=="string"?xt.y:xt.y+pt);At="translate(".concat(Z,", ").concat(q,")")+At}return At}function V(ot,xt){return ot.targetTouches&&(0,k.findInArray)(ot.targetTouches,function(pt){return xt===pt.identifier})||ot.changedTouches&&(0,k.findInArray)(ot.changedTouches,function(pt){return xt===pt.identifier})}function H(ot){if(ot.targetTouches&&ot.targetTouches[0])return ot.targetTouches[0].identifier;if(ot.changedTouches&&ot.changedTouches[0])return ot.changedTouches[0].identifier}function Q(ot){if(ot){var xt=ot.getElementById("react-draggable-style-el");xt||(xt=ot.createElement("style"),xt.type="text/css",xt.id="react-draggable-style-el",xt.innerHTML=`.react-draggable-transparent-selection *::-moz-selection {all: inherit;}
`,xt.innerHTML+=`.react-draggable-transparent-selection *::selection {all: inherit;}
`,ot.getElementsByTagName("head")[0].appendChild(xt)),ot.body&&rt(ot.body,"react-draggable-transparent-selection")}}function tt(ot){if(ot)try{if(ot.body&&ct(ot.body,"react-draggable-transparent-selection"),ot.selection)ot.selection.empty();else{var xt=(ot.defaultView||window).getSelection();xt&&xt.type!=="Caret"&&xt.removeAllRanges()}}catch(pt){}}function rt(ot,xt){ot.classList?ot.classList.add(xt):ot.className.match(new RegExp("(?:^|\\s)".concat(xt,"(?!\\S)")))||(ot.className+=" ".concat(xt))}function ct(ot,xt){ot.classList?ot.classList.remove(xt):ot.className=ot.className.replace(new RegExp("(?:^|\\s)".concat(xt,"(?!\\S)"),"g"),"")}},138650:function(Ve,z){"use strict";Object.defineProperty(z,"__esModule",{value:!0}),z.browserPrefixToKey=k,z.browserPrefixToStyle=w,z.default=void 0,z.getPrefix=b;var C=["Moz","Webkit","O","ms"];function b(){var P,p,m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"transform";if(typeof window=="undefined")return"";var S=(P=window.document)===null||P===void 0||(p=P.documentElement)===null||p===void 0?void 0:p.style;if(!S||m in S)return"";for(var x=0;x<C.length;x++)if(k(m,C[x])in S)return C[x];return""}function k(P,p){return p?"".concat(p).concat(T(P)):P}function w(P,p){return p?"-".concat(p.toLowerCase(),"-").concat(P):P}function T(P){for(var p="",m=!0,S=0;S<P.length;S++)m?(p+=P[S].toUpperCase(),m=!1):P[S]==="-"?m=!0:p+=P[S];return p}var L=b();z.default=L},955904:function(Ve,z){"use strict";Object.defineProperty(z,"__esModule",{value:!0}),z.default=C;function C(){var b}},102849:function(Ve,z,C){"use strict";Object.defineProperty(z,"__esModule",{value:!0}),z.canDragX=L,z.canDragY=P,z.createCoreData=m,z.createDraggableData=S,z.getBoundPosition=w,z.getControlPosition=p,z.snapToGrid=T;var b=C(909280),k=C(381825);function w(A,E,D){if(!A.props.bounds)return[E,D];var F=A.props.bounds;F=typeof F=="string"?F:x(F);var y=g(A);if(typeof F=="string"){var h=y.ownerDocument,Y=h.defaultView,$;if(F==="parent"?$=y.parentNode:$=h.querySelector(F),!($ instanceof Y.HTMLElement))throw new Error('Bounds selector "'+F+'" could not find an element.');var U=$,W=Y.getComputedStyle(y),V=Y.getComputedStyle(U);F={left:-y.offsetLeft+(0,b.int)(V.paddingLeft)+(0,b.int)(W.marginLeft),top:-y.offsetTop+(0,b.int)(V.paddingTop)+(0,b.int)(W.marginTop),right:(0,k.innerWidth)(U)-(0,k.outerWidth)(y)-y.offsetLeft+(0,b.int)(V.paddingRight)-(0,b.int)(W.marginRight),bottom:(0,k.innerHeight)(U)-(0,k.outerHeight)(y)-y.offsetTop+(0,b.int)(V.paddingBottom)-(0,b.int)(W.marginBottom)}}return(0,b.isNum)(F.right)&&(E=Math.min(E,F.right)),(0,b.isNum)(F.bottom)&&(D=Math.min(D,F.bottom)),(0,b.isNum)(F.left)&&(E=Math.max(E,F.left)),(0,b.isNum)(F.top)&&(D=Math.max(D,F.top)),[E,D]}function T(A,E,D){var F=Math.round(E/A[0])*A[0],y=Math.round(D/A[1])*A[1];return[F,y]}function L(A){return A.props.axis==="both"||A.props.axis==="x"}function P(A){return A.props.axis==="both"||A.props.axis==="y"}function p(A,E,D){var F=typeof E=="number"?(0,k.getTouch)(A,E):null;if(typeof E=="number"&&!F)return null;var y=g(D),h=D.props.offsetParent||y.offsetParent||y.ownerDocument.body;return(0,k.offsetXYFromParent)(F||A,h,D.props.scale)}function m(A,E,D){var F=A.state,y=!(0,b.isNum)(F.lastX),h=g(A);return y?{node:h,deltaX:0,deltaY:0,lastX:E,lastY:D,x:E,y:D}:{node:h,deltaX:E-F.lastX,deltaY:D-F.lastY,lastX:F.lastX,lastY:F.lastY,x:E,y:D}}function S(A,E){var D=A.props.scale;return{node:E.node,x:A.state.x+E.deltaX/D,y:A.state.y+E.deltaY/D,deltaX:E.deltaX/D,deltaY:E.deltaY/D,lastX:A.state.x,lastY:A.state.y}}function x(A){return{left:A.left,top:A.top,right:A.right,bottom:A.bottom}}function g(A){var E=A.findDOMNode();if(!E)throw new Error("<DraggableCore>: Unmounted during event!");return E}},909280:function(Ve,z){"use strict";Object.defineProperty(z,"__esModule",{value:!0}),z.dontSetMe=T,z.findInArray=C,z.int=w,z.isFunction=b,z.isNum=k;function C(L,P){for(var p=0,m=L.length;p<m;p++)if(P.apply(P,[L[p],p,L]))return L[p]}function b(L){return typeof L=="function"||Object.prototype.toString.call(L)==="[object Function]"}function k(L){return typeof L=="number"&&!isNaN(L)}function w(L){return parseInt(L,10)}function T(L,P,p){if(L[P])return new Error("Invalid prop ".concat(P," passed to ").concat(p," - do not set this, set it on the child."))}},797005:function(Ve,z,C){var b;function k(p){if(!p||typeof window=="undefined")return;const m=document.createElement("style");return m.setAttribute("type","text/css"),m.innerHTML=p,document.head.appendChild(m),p}b={value:!0};var w=C(667294);function T(p){return p&&typeof p=="object"&&"default"in p?p:{default:p}}var L=T(w);k(`.marquee-container {
  overflow-x: hidden !important;
  display: flex !important;
  flex-direction: row !important;
  position: relative;
  width: var(--width);
  transform: var(--transform);
}
.marquee-container:hover div {
  animation-play-state: var(--pause-on-hover);
}
.marquee-container:active div {
  animation-play-state: var(--pause-on-click);
}

.overlay {
  position: absolute;
  width: 100%;
  height: 100%;
}
.overlay::before, .overlay::after {
  background: linear-gradient(to right, var(--gradient-color));
  content: "";
  height: 100%;
  position: absolute;
  width: var(--gradient-width);
  z-index: 2;
}
.overlay::after {
  right: 0;
  top: 0;
  transform: rotateZ(180deg);
}
.overlay::before {
  left: 0;
  top: 0;
}

.marquee {
  flex: 0 0 auto;
  min-width: var(--min-width);
  z-index: 1;
  display: flex;
  flex-direction: row;
  align-items: center;
  animation: scroll var(--duration) linear var(--delay) var(--iteration-count);
  animation-play-state: var(--play);
  animation-delay: var(--delay);
  animation-direction: var(--direction);
}
@keyframes scroll {
  0% {
    transform: translateX(0%);
  }
  100% {
    transform: translateX(-100%);
  }
}

.initial-child-container {
  flex: 0 0 auto;
  display: flex;
  min-width: auto;
  flex-direction: row;
}

.child {
  transform: var(--transform);
}`);const P=w.forwardRef(function({style:m={},className:S="",autoFill:x=!1,play:g=!0,pauseOnHover:A=!1,pauseOnClick:E=!1,direction:D="left",speed:F=50,delay:y=0,loop:h=0,gradient:Y=!1,gradientColor:$=[255,255,255],gradientWidth:U=200,onFinish:W,onCycleComplete:V,onMount:H,children:Q},tt){const[rt,ct]=w.useState(0),[ot,xt]=w.useState(0),[pt,Xt]=w.useState(1),[Ct,At]=w.useState(!1),Z=w.useRef(null),q=tt||Z,bt=w.useRef(null),_t=w.useCallback(()=>{if(bt.current&&q.current){const ue=q.current.getBoundingClientRect(),ie=bt.current.getBoundingClientRect();let Dt=ue.width,ne=ie.width;(D==="up"||D==="down")&&(Dt=ue.height,ne=ie.height),Xt(x&&Dt&&ne&&ne<Dt?Math.ceil(Dt/ne):1),ct(Dt),xt(ne)}},[x,q,D]);w.useEffect(()=>{if(Ct&&(_t(),bt.current&&q.current)){const ue=new ResizeObserver(()=>_t());return ue.observe(q.current),ue.observe(bt.current),()=>{ue&&ue.disconnect()}}},[_t,q,Ct]),w.useEffect(()=>{_t()},[_t,Q]),w.useEffect(()=>{At(!0)},[]),w.useEffect(()=>{typeof H=="function"&&H()},[]);const nt=w.useMemo(()=>x?ot*pt/F:ot<rt?rt/F:ot/F,[x,rt,ot,pt,F]),vt=`rgba(${$[0]}, ${$[1]}, ${$[2]}`,It=w.useMemo(()=>Object.assign(Object.assign({},m),{["--pause-on-hover"]:!g||A?"paused":"running",["--pause-on-click"]:!g||A&&!E||E?"paused":"running",["--width"]:D==="up"||D==="down"?"100vh":"100%",["--transform"]:D==="up"?"rotate(-90deg)":D==="down"?"rotate(90deg)":"none"}),[m,g,A,E,D]),Pt=w.useMemo(()=>({["--gradient-color"]:`${vt}, 1), ${vt}, 0)`,["--gradient-width"]:typeof U=="number"?`${U}px`:U}),[vt,U]),Et=w.useMemo(()=>({["--play"]:g?"running":"paused",["--direction"]:D==="left"?"normal":"reverse",["--duration"]:`${nt}s`,["--delay"]:`${y}s`,["--iteration-count"]:h?`${h}`:"infinite",["--min-width"]:x?"auto":"100%"}),[g,D,nt,y,h,x]),Nt=w.useMemo(()=>({["--transform"]:D==="up"?"rotate(90deg)":D==="down"?"rotate(-90deg)":"none"}),[D]),$t=w.useCallback(ue=>[...Array(Number.isFinite(ue)&&ue>=0?ue:0)].map((ie,Dt)=>L.default.createElement(w.Fragment,{key:Dt},w.Children.map(Q,ne=>L.default.createElement("div",{style:Nt,className:"child"},ne)))),[Nt,Q]);return Ct?L.default.createElement("div",{ref:q,style:It,className:"marquee-container "+S},Y&&L.default.createElement("div",{style:Pt,className:"overlay"}),L.default.createElement("div",{className:"marquee",style:Et,onAnimationIteration:V,onAnimationEnd:W},L.default.createElement("div",{className:"initial-child-container",ref:bt},w.Children.map(Q,ue=>L.default.createElement("div",{style:Nt,className:"child"},ue))),$t(pt-1)),L.default.createElement("div",{className:"marquee",style:Et},$t(pt))):null});z.Z=P},537763:function(Ve,z,C){Ve.exports=function(b){var k={};function w(T){if(k[T])return k[T].exports;var L=k[T]={exports:{},id:T,loaded:!1};return b[T].call(L.exports,L,L.exports,w),L.loaded=!0,L.exports}return w.m=b,w.c=k,w.p="",w(0)}([function(b,k,w){b.exports=w(1)},function(b,k,w){"use strict";Object.defineProperty(k,"__esModule",{value:!0});function T(p){return p&&p.__esModule?p:{default:p}}var L=w(2),P=T(L);k.default=P.default,b.exports=k.default},function(b,k,w){"use strict";Object.defineProperty(k,"__esModule",{value:!0});var T=Object.assign||function(D){for(var F=1;F<arguments.length;F++){var y=arguments[F];for(var h in y)Object.prototype.hasOwnProperty.call(y,h)&&(D[h]=y[h])}return D};k.default=E;function L(D){return D&&D.__esModule?D:{default:D}}function P(D,F){var y={};for(var h in D)F.indexOf(h)>=0||Object.prototype.hasOwnProperty.call(D,h)&&(y[h]=D[h]);return y}var p=w(3),m=w(4),S=L(m),x=w(14),g=w(15),A=L(g);E.propTypes={activeClassName:S.default.string,activeIndex:S.default.number,activeStyle:S.default.object,autoEscape:S.default.bool,className:S.default.string,findChunks:S.default.func,highlightClassName:S.default.oneOfType([S.default.object,S.default.string]),highlightStyle:S.default.object,highlightTag:S.default.oneOfType([S.default.node,S.default.func,S.default.string]),sanitize:S.default.func,searchWords:S.default.arrayOf(S.default.oneOfType([S.default.string,S.default.instanceOf(RegExp)])).isRequired,textToHighlight:S.default.string.isRequired,unhighlightTag:S.default.oneOfType([S.default.node,S.default.func,S.default.string]),unhighlightClassName:S.default.string,unhighlightStyle:S.default.object};function E(D){var F=D.activeClassName,y=F===void 0?"":F,h=D.activeIndex,Y=h===void 0?-1:h,$=D.activeStyle,U=D.autoEscape,W=D.caseSensitive,V=W===void 0?!1:W,H=D.className,Q=D.findChunks,tt=D.highlightClassName,rt=tt===void 0?"":tt,ct=D.highlightStyle,ot=ct===void 0?{}:ct,xt=D.highlightTag,pt=xt===void 0?"mark":xt,Xt=D.sanitize,Ct=D.searchWords,At=D.textToHighlight,Z=D.unhighlightTag,q=Z===void 0?"span":Z,bt=D.unhighlightClassName,_t=bt===void 0?"":bt,nt=D.unhighlightStyle,vt=P(D,["activeClassName","activeIndex","activeStyle","autoEscape","caseSensitive","className","findChunks","highlightClassName","highlightStyle","highlightTag","sanitize","searchWords","textToHighlight","unhighlightTag","unhighlightClassName","unhighlightStyle"]),It=(0,p.findAll)({autoEscape:U,caseSensitive:V,findChunks:Q,sanitize:Xt,searchWords:Ct,textToHighlight:At}),Pt=pt,Et=-1,Nt="",$t=void 0,ue=function(ne){var pe={};for(var Wt in ne)pe[Wt.toLowerCase()]=ne[Wt];return pe},ie=(0,A.default)(ue);return(0,x.createElement)("span",T({className:H},vt,{children:It.map(function(Dt,ne){var pe=At.substr(Dt.start,Dt.end-Dt.start);if(Dt.highlight){Et++;var Wt=void 0;typeof rt=="object"?V?Wt=rt[pe]:(rt=ie(rt),Wt=rt[pe.toLowerCase()]):Wt=rt;var ae=Et===+Y;Nt=Wt+" "+(ae?y:""),$t=ae===!0&&$!=null?Object.assign({},ot,$):ot;var Se={children:pe,className:Nt,key:ne,style:$t};return typeof Pt!="string"&&(Se.highlightIndex=Et),(0,x.createElement)(Pt,Se)}else return(0,x.createElement)(q,{children:pe,className:_t,key:ne,style:nt})})}))}b.exports=k.default},function(b,k){b.exports=function(w){var T={};function L(P){if(T[P])return T[P].exports;var p=T[P]={exports:{},id:P,loaded:!1};return w[P].call(p.exports,p,p.exports,L),p.loaded=!0,p.exports}return L.m=w,L.c=T,L.p="",L(0)}([function(w,T,L){w.exports=L(1)},function(w,T,L){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var P=L(2);Object.defineProperty(T,"combineChunks",{enumerable:!0,get:function(){return P.combineChunks}}),Object.defineProperty(T,"fillInChunks",{enumerable:!0,get:function(){return P.fillInChunks}}),Object.defineProperty(T,"findAll",{enumerable:!0,get:function(){return P.findAll}}),Object.defineProperty(T,"findChunks",{enumerable:!0,get:function(){return P.findChunks}})},function(w,T){"use strict";Object.defineProperty(T,"__esModule",{value:!0});var L=T.findAll=function(A){var E=A.autoEscape,D=A.caseSensitive,F=D===void 0?!1:D,y=A.findChunks,h=y===void 0?p:y,Y=A.sanitize,$=A.searchWords,U=A.textToHighlight;return m({chunksToHighlight:P({chunks:h({autoEscape:E,caseSensitive:F,sanitize:Y,searchWords:$,textToHighlight:U})}),totalLength:U?U.length:0})},P=T.combineChunks=function(A){var E=A.chunks;return E=E.sort(function(D,F){return D.start-F.start}).reduce(function(D,F){if(D.length===0)return[F];var y=D.pop();if(F.start<=y.end){var h=Math.max(y.end,F.end);D.push({start:y.start,end:h})}else D.push(y,F);return D},[]),E},p=function(A){var E=A.autoEscape,D=A.caseSensitive,F=A.sanitize,y=F===void 0?S:F,h=A.searchWords,Y=A.textToHighlight;return Y=y(Y),h.filter(function($){return $}).reduce(function($,U){U=y(U),E&&(U=x(U));for(var W=new RegExp(U,D?"g":"gi"),V=void 0;V=W.exec(Y);){var H=V.index,Q=W.lastIndex;Q>H&&$.push({start:H,end:Q}),V.index==W.lastIndex&&W.lastIndex++}return $},[])};T.findChunks=p;var m=T.fillInChunks=function(A){var E=A.chunksToHighlight,D=A.totalLength,F=[],y=function($,U,W){U-$>0&&F.push({start:$,end:U,highlight:W})};if(E.length===0)y(0,D,!1);else{var h=0;E.forEach(function(Y){y(h,Y.start,!1),y(Y.start,Y.end,!0),h=Y.end}),y(h,D,!1)}return F};function S(g){return g}function x(g){return g.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}}])},function(b,k,w){(function(T){if(T.env.NODE_ENV!=="production"){var L=typeof Symbol=="function"&&Symbol.for&&Symbol.for("react.element")||60103,P=function(m){return typeof m=="object"&&m!==null&&m.$$typeof===L},p=!0;b.exports=w(6)(P,p)}else b.exports=w(13)()}).call(k,w(5))},function(b,k){var w=b.exports={},T,L;function P(){throw new Error("setTimeout has not been defined")}function p(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?T=setTimeout:T=P}catch(Y){T=P}try{typeof clearTimeout=="function"?L=clearTimeout:L=p}catch(Y){L=p}})();function m(Y){if(T===setTimeout)return setTimeout(Y,0);if((T===P||!T)&&setTimeout)return T=setTimeout,setTimeout(Y,0);try{return T(Y,0)}catch($){try{return T.call(null,Y,0)}catch(U){return T.call(this,Y,0)}}}function S(Y){if(L===clearTimeout)return clearTimeout(Y);if((L===p||!L)&&clearTimeout)return L=clearTimeout,clearTimeout(Y);try{return L(Y)}catch($){try{return L.call(null,Y)}catch(U){return L.call(this,Y)}}}var x=[],g=!1,A,E=-1;function D(){!g||!A||(g=!1,A.length?x=A.concat(x):E=-1,x.length&&F())}function F(){if(!g){var Y=m(D);g=!0;for(var $=x.length;$;){for(A=x,x=[];++E<$;)A&&A[E].run();E=-1,$=x.length}A=null,g=!1,S(Y)}}w.nextTick=function(Y){var $=new Array(arguments.length-1);if(arguments.length>1)for(var U=1;U<arguments.length;U++)$[U-1]=arguments[U];x.push(new y(Y,$)),x.length===1&&!g&&m(F)};function y(Y,$){this.fun=Y,this.array=$}y.prototype.run=function(){this.fun.apply(null,this.array)},w.title="browser",w.browser=!0,w.env={},w.argv=[],w.version="",w.versions={};function h(){}w.on=h,w.addListener=h,w.once=h,w.off=h,w.removeListener=h,w.removeAllListeners=h,w.emit=h,w.prependListener=h,w.prependOnceListener=h,w.listeners=function(Y){return[]},w.binding=function(Y){throw new Error("process.binding is not supported")},w.cwd=function(){return"/"},w.chdir=function(Y){throw new Error("process.chdir is not supported")},w.umask=function(){return 0}},function(b,k,w){(function(T){"use strict";var L=w(7),P=w(8),p=w(9),m=w(10),S=w(11),x=w(12);b.exports=function(g,A){var E=typeof Symbol=="function"&&Symbol.iterator,D="@@iterator";function F(nt){var vt=nt&&(E&&nt[E]||nt[D]);if(typeof vt=="function")return vt}var y="<<anonymous>>",h={array:W("array"),bool:W("boolean"),func:W("function"),number:W("number"),object:W("object"),string:W("string"),symbol:W("symbol"),any:V(),arrayOf:H,element:Q(),instanceOf:tt,node:xt(),objectOf:ct,oneOf:rt,oneOfType:ot,shape:pt,exact:Xt};function Y(nt,vt){return nt===vt?nt!==0||1/nt===1/vt:nt!==nt&&vt!==vt}function $(nt){this.message=nt,this.stack=""}$.prototype=Error.prototype;function U(nt){if(T.env.NODE_ENV!=="production")var vt={},It=0;function Pt(Nt,$t,ue,ie,Dt,ne,pe){if(ie=ie||y,ne=ne||ue,pe!==S){if(A)P(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use `PropTypes.checkPropTypes()` to call them. Read more at http://fb.me/use-check-prop-types");else if(T.env.NODE_ENV!=="production"&&typeof console!="undefined"){var Wt=ie+":"+ue;!vt[Wt]&&It<3&&(p(!1,"You are manually calling a React.PropTypes validation function for the `%s` prop on `%s`. This is deprecated and will throw in the standalone `prop-types` package. You may be seeing this warning due to a third-party PropTypes library. See https://fb.me/react-warning-dont-call-proptypes for details.",ne,ie),vt[Wt]=!0,It++)}}return $t[ue]==null?Nt?$t[ue]===null?new $("The "+Dt+" `"+ne+"` is marked as required "+("in `"+ie+"`, but its value is `null`.")):new $("The "+Dt+" `"+ne+"` is marked as required in "+("`"+ie+"`, but its value is `undefined`.")):null:nt($t,ue,ie,Dt,ne)}var Et=Pt.bind(null,!1);return Et.isRequired=Pt.bind(null,!0),Et}function W(nt){function vt(It,Pt,Et,Nt,$t,ue){var ie=It[Pt],Dt=Z(ie);if(Dt!==nt){var ne=q(ie);return new $("Invalid "+Nt+" `"+$t+"` of type "+("`"+ne+"` supplied to `"+Et+"`, expected ")+("`"+nt+"`."))}return null}return U(vt)}function V(){return U(L.thatReturnsNull)}function H(nt){function vt(It,Pt,Et,Nt,$t){if(typeof nt!="function")return new $("Property `"+$t+"` of component `"+Et+"` has invalid PropType notation inside arrayOf.");var ue=It[Pt];if(!Array.isArray(ue)){var ie=Z(ue);return new $("Invalid "+Nt+" `"+$t+"` of type "+("`"+ie+"` supplied to `"+Et+"`, expected an array."))}for(var Dt=0;Dt<ue.length;Dt++){var ne=nt(ue,Dt,Et,Nt,$t+"["+Dt+"]",S);if(ne instanceof Error)return ne}return null}return U(vt)}function Q(){function nt(vt,It,Pt,Et,Nt){var $t=vt[It];if(!g($t)){var ue=Z($t);return new $("Invalid "+Et+" `"+Nt+"` of type "+("`"+ue+"` supplied to `"+Pt+"`, expected a single ReactElement."))}return null}return U(nt)}function tt(nt){function vt(It,Pt,Et,Nt,$t){if(!(It[Pt]instanceof nt)){var ue=nt.name||y,ie=_t(It[Pt]);return new $("Invalid "+Nt+" `"+$t+"` of type "+("`"+ie+"` supplied to `"+Et+"`, expected ")+("instance of `"+ue+"`."))}return null}return U(vt)}function rt(nt){if(!Array.isArray(nt))return T.env.NODE_ENV!=="production"&&p(!1,"Invalid argument supplied to oneOf, expected an instance of array."),L.thatReturnsNull;function vt(It,Pt,Et,Nt,$t){for(var ue=It[Pt],ie=0;ie<nt.length;ie++)if(Y(ue,nt[ie]))return null;var Dt=JSON.stringify(nt);return new $("Invalid "+Nt+" `"+$t+"` of value `"+ue+"` "+("supplied to `"+Et+"`, expected one of "+Dt+"."))}return U(vt)}function ct(nt){function vt(It,Pt,Et,Nt,$t){if(typeof nt!="function")return new $("Property `"+$t+"` of component `"+Et+"` has invalid PropType notation inside objectOf.");var ue=It[Pt],ie=Z(ue);if(ie!=="object")return new $("Invalid "+Nt+" `"+$t+"` of type "+("`"+ie+"` supplied to `"+Et+"`, expected an object."));for(var Dt in ue)if(ue.hasOwnProperty(Dt)){var ne=nt(ue,Dt,Et,Nt,$t+"."+Dt,S);if(ne instanceof Error)return ne}return null}return U(vt)}function ot(nt){if(!Array.isArray(nt))return T.env.NODE_ENV!=="production"&&p(!1,"Invalid argument supplied to oneOfType, expected an instance of array."),L.thatReturnsNull;for(var vt=0;vt<nt.length;vt++){var It=nt[vt];if(typeof It!="function")return p(!1,"Invalid argument supplied to oneOfType. Expected an array of check functions, but received %s at index %s.",bt(It),vt),L.thatReturnsNull}function Pt(Et,Nt,$t,ue,ie){for(var Dt=0;Dt<nt.length;Dt++){var ne=nt[Dt];if(ne(Et,Nt,$t,ue,ie,S)==null)return null}return new $("Invalid "+ue+" `"+ie+"` supplied to "+("`"+$t+"`."))}return U(Pt)}function xt(){function nt(vt,It,Pt,Et,Nt){return Ct(vt[It])?null:new $("Invalid "+Et+" `"+Nt+"` supplied to "+("`"+Pt+"`, expected a ReactNode."))}return U(nt)}function pt(nt){function vt(It,Pt,Et,Nt,$t){var ue=It[Pt],ie=Z(ue);if(ie!=="object")return new $("Invalid "+Nt+" `"+$t+"` of type `"+ie+"` "+("supplied to `"+Et+"`, expected `object`."));for(var Dt in nt){var ne=nt[Dt];if(ne){var pe=ne(ue,Dt,Et,Nt,$t+"."+Dt,S);if(pe)return pe}}return null}return U(vt)}function Xt(nt){function vt(It,Pt,Et,Nt,$t){var ue=It[Pt],ie=Z(ue);if(ie!=="object")return new $("Invalid "+Nt+" `"+$t+"` of type `"+ie+"` "+("supplied to `"+Et+"`, expected `object`."));var Dt=m({},It[Pt],nt);for(var ne in Dt){var pe=nt[ne];if(!pe)return new $("Invalid "+Nt+" `"+$t+"` key `"+ne+"` supplied to `"+Et+"`.\nBad object: "+JSON.stringify(It[Pt],null,"  ")+`
Valid keys: `+JSON.stringify(Object.keys(nt),null,"  "));var Wt=pe(ue,ne,Et,Nt,$t+"."+ne,S);if(Wt)return Wt}return null}return U(vt)}function Ct(nt){switch(typeof nt){case"number":case"string":case"undefined":return!0;case"boolean":return!nt;case"object":if(Array.isArray(nt))return nt.every(Ct);if(nt===null||g(nt))return!0;var vt=F(nt);if(vt){var It=vt.call(nt),Pt;if(vt!==nt.entries){for(;!(Pt=It.next()).done;)if(!Ct(Pt.value))return!1}else for(;!(Pt=It.next()).done;){var Et=Pt.value;if(Et&&!Ct(Et[1]))return!1}}else return!1;return!0;default:return!1}}function At(nt,vt){return nt==="symbol"||vt["@@toStringTag"]==="Symbol"||typeof Symbol=="function"&&vt instanceof Symbol}function Z(nt){var vt=typeof nt;return Array.isArray(nt)?"array":nt instanceof RegExp?"object":At(vt,nt)?"symbol":vt}function q(nt){if(typeof nt=="undefined"||nt===null)return""+nt;var vt=Z(nt);if(vt==="object"){if(nt instanceof Date)return"date";if(nt instanceof RegExp)return"regexp"}return vt}function bt(nt){var vt=q(nt);switch(vt){case"array":case"object":return"an "+vt;case"boolean":case"date":case"regexp":return"a "+vt;default:return vt}}function _t(nt){return!nt.constructor||!nt.constructor.name?y:nt.constructor.name}return h.checkPropTypes=x,h.PropTypes=h,h}}).call(k,w(5))},function(b,k){"use strict";function w(L){return function(){return L}}var T=function(){};T.thatReturns=w,T.thatReturnsFalse=w(!1),T.thatReturnsTrue=w(!0),T.thatReturnsNull=w(null),T.thatReturnsThis=function(){return this},T.thatReturnsArgument=function(L){return L},b.exports=T},function(b,k,w){(function(T){"use strict";var L=function(m){};T.env.NODE_ENV!=="production"&&(L=function(m){if(m===void 0)throw new Error("invariant requires an error message argument")});function P(p,m,S,x,g,A,E,D){if(L(m),!p){var F;if(m===void 0)F=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var y=[S,x,g,A,E,D],h=0;F=new Error(m.replace(/%s/g,function(){return y[h++]})),F.name="Invariant Violation"}throw F.framesToPop=1,F}}b.exports=P}).call(k,w(5))},function(b,k,w){(function(T){"use strict";var L=w(7),P=L;if(T.env.NODE_ENV!=="production"){var p=function(S){for(var x=arguments.length,g=Array(x>1?x-1:0),A=1;A<x;A++)g[A-1]=arguments[A];var E=0,D="Warning: "+S.replace(/%s/g,function(){return g[E++]});typeof console!="undefined"&&console.error(D);try{throw new Error(D)}catch(F){}};P=function(S,x){if(x===void 0)throw new Error("`warning(condition, format, ...args)` requires a warning message argument");if(x.indexOf("Failed Composite propType: ")!==0&&!S){for(var g=arguments.length,A=Array(g>2?g-2:0),E=2;E<g;E++)A[E-2]=arguments[E];p.apply(void 0,[x].concat(A))}}}b.exports=P}).call(k,w(5))},function(b,k){"use strict";var w=Object.getOwnPropertySymbols,T=Object.prototype.hasOwnProperty,L=Object.prototype.propertyIsEnumerable;function P(m){if(m==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(m)}function p(){try{if(!Object.assign)return!1;var m=new String("abc");if(m[5]="de",Object.getOwnPropertyNames(m)[0]==="5")return!1;for(var S={},x=0;x<10;x++)S["_"+String.fromCharCode(x)]=x;var g=Object.getOwnPropertyNames(S).map(function(E){return S[E]});if(g.join("")!=="0123456789")return!1;var A={};return"abcdefghijklmnopqrst".split("").forEach(function(E){A[E]=E}),Object.keys(Object.assign({},A)).join("")==="abcdefghijklmnopqrst"}catch(E){return!1}}b.exports=p()?Object.assign:function(m,S){for(var x,g=P(m),A,E=1;E<arguments.length;E++){x=Object(arguments[E]);for(var D in x)T.call(x,D)&&(g[D]=x[D]);if(w){A=w(x);for(var F=0;F<A.length;F++)L.call(x,A[F])&&(g[A[F]]=x[A[F]])}}return g}},function(b,k){"use strict";var w="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";b.exports=w},function(b,k,w){(function(T){"use strict";if(T.env.NODE_ENV!=="production")var L=w(8),P=w(9),p=w(11),m={};function S(x,g,A,E,D){if(T.env.NODE_ENV!=="production"){for(var F in x)if(x.hasOwnProperty(F)){var y;try{L(typeof x[F]=="function","%s: %s type `%s` is invalid; it must be a function, usually from the `prop-types` package, but received `%s`.",E||"React class",A,F,typeof x[F]),y=x[F](g,F,E,A,null,p)}catch(Y){y=Y}if(P(!y||y instanceof Error,"%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",E||"React class",A,F,typeof y),y instanceof Error&&!(y.message in m)){m[y.message]=!0;var h=D?D():"";P(!1,"Failed %s type: %s%s",A,y.message,h!=null?h:"")}}}}b.exports=S}).call(k,w(5))},function(b,k,w){"use strict";var T=w(7),L=w(8),P=w(11);b.exports=function(){function p(x,g,A,E,D,F){F!==P&&L(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}p.isRequired=p;function m(){return p}var S={array:p,bool:p,func:p,number:p,object:p,string:p,symbol:p,any:p,arrayOf:m,element:p,instanceOf:m,node:p,objectOf:m,oneOf:m,oneOfType:m,shape:m,exact:m};return S.checkPropTypes=T,S.PropTypes=S,S}},function(b,k){b.exports=C(667294)},function(b,k){"use strict";var w=function(P,p){return P===p};function T(L){var P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:w,p=void 0,m=[],S=void 0,x=!1,g=function(D,F){return P(D,m[F])},A=function(){for(var D=arguments.length,F=Array(D),y=0;y<D;y++)F[y]=arguments[y];return x&&p===this&&F.length===m.length&&F.every(g)||(x=!0,p=this,m=F,S=L.apply(this,F)),S};return A}b.exports=T}])},58533:function(Ve,z,C){"use strict";var b=C(667294);var k=function(x,g){return k=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(A,E){A.__proto__=E}||function(A,E){for(var D in E)E.hasOwnProperty(D)&&(A[D]=E[D])},k(x,g)};function w(x,g){k(x,g);function A(){this.constructor=x}x.prototype=g===null?Object.create(g):(A.prototype=g.prototype,new A)}var T=function(){return T=Object.assign||function(g){for(var A,E=1,D=arguments.length;E<D;E++){A=arguments[E];for(var F in A)Object.prototype.hasOwnProperty.call(A,F)&&(g[F]=A[F])}return g},T.apply(this,arguments)};function L(x,g,A,E){var D,F=!1,y=0;function h(){D&&clearTimeout(D)}function Y(){h(),F=!0}typeof g!="boolean"&&(E=A,A=g,g=void 0);function $(){var U=this,W=Date.now()-y,V=arguments;if(F)return;function H(){y=Date.now(),A.apply(U,V)}function Q(){D=void 0}E&&!D&&H(),h(),E===void 0&&W>x?H():g!==!0&&(D=setTimeout(E?Q:H,E===void 0?x-W:x))}return $.cancel=Y,$}var P={Pixel:"Pixel",Percent:"Percent"},p={unit:P.Percent,value:.8};function m(x){return typeof x=="number"?{unit:P.Percent,value:x*100}:typeof x=="string"?x.match(/^(\d*(\.\d+)?)px$/)?{unit:P.Pixel,value:parseFloat(x)}:x.match(/^(\d*(\.\d+)?)%$/)?{unit:P.Percent,value:parseFloat(x)}:(console.warn('scrollThreshold format is invalid. Valid formats: "120px", "50%"...'),p):(console.warn("scrollThreshold should be string or number"),p)}var S=function(x){w(g,x);function g(A){var E=x.call(this,A)||this;return E.lastScrollTop=0,E.actionTriggered=!1,E.startY=0,E.currentY=0,E.dragging=!1,E.maxPullDownDistance=0,E.getScrollableTarget=function(){return E.props.scrollableTarget instanceof HTMLElement?E.props.scrollableTarget:typeof E.props.scrollableTarget=="string"?document.getElementById(E.props.scrollableTarget):(E.props.scrollableTarget===null&&console.warn(`You are trying to pass scrollableTarget but it is null. This might
        happen because the element may not have been added to DOM yet.
        See https://github.com/ankeetmaini/react-infinite-scroll-component/issues/59 for more info.
      `),null)},E.onStart=function(D){E.lastScrollTop||(E.dragging=!0,D instanceof MouseEvent?E.startY=D.pageY:D instanceof TouchEvent&&(E.startY=D.touches[0].pageY),E.currentY=E.startY,E._infScroll&&(E._infScroll.style.willChange="transform",E._infScroll.style.transition="transform 0.2s cubic-bezier(0,0,0.31,1)"))},E.onMove=function(D){E.dragging&&(D instanceof MouseEvent?E.currentY=D.pageY:D instanceof TouchEvent&&(E.currentY=D.touches[0].pageY),!(E.currentY<E.startY)&&(E.currentY-E.startY>=Number(E.props.pullDownToRefreshThreshold)&&E.setState({pullToRefreshThresholdBreached:!0}),!(E.currentY-E.startY>E.maxPullDownDistance*1.5)&&E._infScroll&&(E._infScroll.style.overflow="visible",E._infScroll.style.transform="translate3d(0px, "+(E.currentY-E.startY)+"px, 0px)")))},E.onEnd=function(){E.startY=0,E.currentY=0,E.dragging=!1,E.state.pullToRefreshThresholdBreached&&(E.props.refreshFunction&&E.props.refreshFunction(),E.setState({pullToRefreshThresholdBreached:!1})),requestAnimationFrame(function(){E._infScroll&&(E._infScroll.style.overflow="auto",E._infScroll.style.transform="none",E._infScroll.style.willChange="unset")})},E.onScrollListener=function(D){typeof E.props.onScroll=="function"&&setTimeout(function(){return E.props.onScroll&&E.props.onScroll(D)},0);var F=E.props.height||E._scrollableNode?D.target:document.documentElement.scrollTop?document.documentElement:document.body;if(!E.actionTriggered){var y=E.props.inverse?E.isElementAtTop(F,E.props.scrollThreshold):E.isElementAtBottom(F,E.props.scrollThreshold);y&&E.props.hasMore&&(E.actionTriggered=!0,E.setState({showLoader:!0}),E.props.next&&E.props.next()),E.lastScrollTop=F.scrollTop}},E.state={showLoader:!1,pullToRefreshThresholdBreached:!1,prevDataLength:A.dataLength},E.throttledOnScrollListener=L(150,E.onScrollListener).bind(E),E.onStart=E.onStart.bind(E),E.onMove=E.onMove.bind(E),E.onEnd=E.onEnd.bind(E),E}return g.prototype.componentDidMount=function(){if(typeof this.props.dataLength=="undefined")throw new Error('mandatory prop "dataLength" is missing. The prop is needed when loading more content. Check README.md for usage');if(this._scrollableNode=this.getScrollableTarget(),this.el=this.props.height?this._infScroll:this._scrollableNode||window,this.el&&this.el.addEventListener("scroll",this.throttledOnScrollListener),typeof this.props.initialScrollY=="number"&&this.el&&this.el instanceof HTMLElement&&this.el.scrollHeight>this.props.initialScrollY&&this.el.scrollTo(0,this.props.initialScrollY),this.props.pullDownToRefresh&&this.el&&(this.el.addEventListener("touchstart",this.onStart),this.el.addEventListener("touchmove",this.onMove),this.el.addEventListener("touchend",this.onEnd),this.el.addEventListener("mousedown",this.onStart),this.el.addEventListener("mousemove",this.onMove),this.el.addEventListener("mouseup",this.onEnd),this.maxPullDownDistance=this._pullDown&&this._pullDown.firstChild&&this._pullDown.firstChild.getBoundingClientRect().height||0,this.forceUpdate(),typeof this.props.refreshFunction!="function"))throw new Error(`Mandatory prop "refreshFunction" missing.
          Pull Down To Refresh functionality will not work
          as expected. Check README.md for usage'`)},g.prototype.componentWillUnmount=function(){this.el&&(this.el.removeEventListener("scroll",this.throttledOnScrollListener),this.props.pullDownToRefresh&&(this.el.removeEventListener("touchstart",this.onStart),this.el.removeEventListener("touchmove",this.onMove),this.el.removeEventListener("touchend",this.onEnd),this.el.removeEventListener("mousedown",this.onStart),this.el.removeEventListener("mousemove",this.onMove),this.el.removeEventListener("mouseup",this.onEnd)))},g.prototype.componentDidUpdate=function(A){this.props.dataLength!==A.dataLength&&(this.actionTriggered=!1,this.setState({showLoader:!1}))},g.getDerivedStateFromProps=function(A,E){var D=A.dataLength!==E.prevDataLength;return D?T(T({},E),{prevDataLength:A.dataLength}):null},g.prototype.isElementAtTop=function(A,E){E===void 0&&(E=.8);var D=A===document.body||A===document.documentElement?window.screen.availHeight:A.clientHeight,F=m(E);return F.unit===P.Pixel?A.scrollTop<=F.value+D-A.scrollHeight+1:A.scrollTop<=F.value/100+D-A.scrollHeight+1},g.prototype.isElementAtBottom=function(A,E){E===void 0&&(E=.8);var D=A===document.body||A===document.documentElement?window.screen.availHeight:A.clientHeight,F=m(E);return F.unit===P.Pixel?A.scrollTop+D>=A.scrollHeight-F.value:A.scrollTop+D>=F.value/100*A.scrollHeight},g.prototype.render=function(){var A=this,E=T({height:this.props.height||"auto",overflow:"auto",WebkitOverflowScrolling:"touch"},this.props.style),D=this.props.hasChildren||!!(this.props.children&&this.props.children instanceof Array&&this.props.children.length),F=this.props.pullDownToRefresh&&this.props.height?{overflow:"auto"}:{};return b.createElement("div",{style:F,className:"infinite-scroll-component__outerdiv"},b.createElement("div",{className:"infinite-scroll-component "+(this.props.className||""),ref:function(y){return A._infScroll=y},style:E},this.props.pullDownToRefresh&&b.createElement("div",{style:{position:"relative"},ref:function(y){return A._pullDown=y}},b.createElement("div",{style:{position:"absolute",left:0,right:0,top:-1*this.maxPullDownDistance}},this.state.pullToRefreshThresholdBreached?this.props.releaseToRefreshContent:this.props.pullDownToRefreshContent)),this.props.children,!this.state.showLoader&&!D&&this.props.hasMore&&this.props.loader,this.state.showLoader&&this.props.hasMore&&this.props.loader,!this.props.hasMore&&this.props.endMessage))},g}(b.Component);z.Z=S},122827:function(Ve,z,C){"use strict";z.__esModule=!0,z.default=void 0;var b=p(C(667294)),k=C(861193),w=C(459069),T=C(100448),L=["children","className","draggableOpts","width","height","handle","handleSize","lockAspectRatio","axis","minConstraints","maxConstraints","onResize","onResizeStop","onResizeStart","resizeHandles","transformScale"];function P(Y){if(typeof WeakMap!="function")return null;var $=new WeakMap,U=new WeakMap;return(P=function(V){return V?U:$})(Y)}function p(Y,$){if(!$&&Y&&Y.__esModule)return Y;if(Y===null||typeof Y!="object"&&typeof Y!="function")return{default:Y};var U=P($);if(U&&U.has(Y))return U.get(Y);var W={},V=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var H in Y)if(H!=="default"&&Object.prototype.hasOwnProperty.call(Y,H)){var Q=V?Object.getOwnPropertyDescriptor(Y,H):null;Q&&(Q.get||Q.set)?Object.defineProperty(W,H,Q):W[H]=Y[H]}return W.default=Y,U&&U.set(Y,W),W}function m(){return m=Object.assign?Object.assign.bind():function(Y){for(var $=1;$<arguments.length;$++){var U=arguments[$];for(var W in U)Object.prototype.hasOwnProperty.call(U,W)&&(Y[W]=U[W])}return Y},m.apply(this,arguments)}function S(Y,$){if(Y==null)return{};var U={},W=Object.keys(Y),V,H;for(H=0;H<W.length;H++)V=W[H],!($.indexOf(V)>=0)&&(U[V]=Y[V]);return U}function x(Y,$){var U=Object.keys(Y);if(Object.getOwnPropertySymbols){var W=Object.getOwnPropertySymbols(Y);$&&(W=W.filter(function(V){return Object.getOwnPropertyDescriptor(Y,V).enumerable})),U.push.apply(U,W)}return U}function g(Y){for(var $=1;$<arguments.length;$++){var U=arguments[$]!=null?arguments[$]:{};$%2?x(Object(U),!0).forEach(function(W){A(Y,W,U[W])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Y,Object.getOwnPropertyDescriptors(U)):x(Object(U)).forEach(function(W){Object.defineProperty(Y,W,Object.getOwnPropertyDescriptor(U,W))})}return Y}function A(Y,$,U){return $=E($),$ in Y?Object.defineProperty(Y,$,{value:U,enumerable:!0,configurable:!0,writable:!0}):Y[$]=U,Y}function E(Y){var $=D(Y,"string");return typeof $=="symbol"?$:String($)}function D(Y,$){if(typeof Y!="object"||Y===null)return Y;var U=Y[Symbol.toPrimitive];if(U!==void 0){var W=U.call(Y,$||"default");if(typeof W!="object")return W;throw new TypeError("@@toPrimitive must return a primitive value.")}return($==="string"?String:Number)(Y)}function F(Y,$){Y.prototype=Object.create($.prototype),Y.prototype.constructor=Y,y(Y,$)}function y(Y,$){return y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(W,V){return W.__proto__=V,W},y(Y,$)}var h=function(Y){F($,Y);function $(){for(var W,V=arguments.length,H=new Array(V),Q=0;Q<V;Q++)H[Q]=arguments[Q];return W=Y.call.apply(Y,[this].concat(H))||this,W.handleRefs={},W.lastHandleRect=null,W.slack=null,W}var U=$.prototype;return U.componentWillUnmount=function(){this.resetData()},U.resetData=function(){this.lastHandleRect=this.slack=null},U.runConstraints=function(V,H){var Q=this.props,tt=Q.minConstraints,rt=Q.maxConstraints,ct=Q.lockAspectRatio;if(!tt&&!rt&&!ct)return[V,H];if(ct){var ot=this.props.width/this.props.height,xt=V-this.props.width,pt=H-this.props.height;Math.abs(xt)>Math.abs(pt*ot)?H=V/ot:V=H*ot}var Xt=V,Ct=H,At=this.slack||[0,0],Z=At[0],q=At[1];return V+=Z,H+=q,tt&&(V=Math.max(tt[0],V),H=Math.max(tt[1],H)),rt&&(V=Math.min(rt[0],V),H=Math.min(rt[1],H)),this.slack=[Z+(Xt-V),q+(Ct-H)],[V,H]},U.resizeHandler=function(V,H){var Q=this;return function(tt,rt){var ct=rt.node,ot=rt.deltaX,xt=rt.deltaY;V==="onResizeStart"&&Q.resetData();var pt=(Q.props.axis==="both"||Q.props.axis==="x")&&H!=="n"&&H!=="s",Xt=(Q.props.axis==="both"||Q.props.axis==="y")&&H!=="e"&&H!=="w";if(!(!pt&&!Xt)){var Ct=H[0],At=H[H.length-1],Z=ct.getBoundingClientRect();if(Q.lastHandleRect!=null){if(At==="w"){var q=Z.left-Q.lastHandleRect.left;ot+=q}if(Ct==="n"){var bt=Z.top-Q.lastHandleRect.top;xt+=bt}}Q.lastHandleRect=Z,At==="w"&&(ot=-ot),Ct==="n"&&(xt=-xt);var _t=Q.props.width+(pt?ot/Q.props.transformScale:0),nt=Q.props.height+(Xt?xt/Q.props.transformScale:0),vt=Q.runConstraints(_t,nt);_t=vt[0],nt=vt[1];var It=_t!==Q.props.width||nt!==Q.props.height,Pt=typeof Q.props[V]=="function"?Q.props[V]:null,Et=V==="onResize"&&!It;Pt&&!Et&&(tt.persist==null||tt.persist(),Pt(tt,{node:ct,size:{width:_t,height:nt},handle:H})),V==="onResizeStop"&&Q.resetData()}}},U.renderResizeHandle=function(V,H){var Q=this.props.handle;if(!Q)return b.createElement("span",{className:"react-resizable-handle react-resizable-handle-"+V,ref:H});if(typeof Q=="function")return Q(V,H);var tt=typeof Q.type=="string",rt=g({ref:H},tt?{}:{handleAxis:V});return b.cloneElement(Q,rt)},U.render=function(){var V=this,H=this.props,Q=H.children,tt=H.className,rt=H.draggableOpts,ct=H.width,ot=H.height,xt=H.handle,pt=H.handleSize,Xt=H.lockAspectRatio,Ct=H.axis,At=H.minConstraints,Z=H.maxConstraints,q=H.onResize,bt=H.onResizeStop,_t=H.onResizeStart,nt=H.resizeHandles,vt=H.transformScale,It=S(H,L);return(0,w.cloneElement)(Q,g(g({},It),{},{className:(tt?tt+" ":"")+"react-resizable",children:[].concat(Q.props.children,nt.map(function(Pt){var Et,Nt=(Et=V.handleRefs[Pt])!=null?Et:V.handleRefs[Pt]=b.createRef();return b.createElement(k.DraggableCore,m({},rt,{nodeRef:Nt,key:"resizableHandle-"+Pt,onStop:V.resizeHandler("onResizeStop",Pt),onStart:V.resizeHandler("onResizeStart",Pt),onDrag:V.resizeHandler("onResize",Pt)}),V.renderResizeHandle(Pt,Nt))}))}))},$}(b.Component);z.default=h,h.propTypes=T.resizableProps,h.defaultProps={axis:"both",handleSize:[20,20],lockAspectRatio:!1,minConstraints:[20,20],maxConstraints:[1/0,1/0],resizeHandles:["se"],transformScale:1}},808735:function(Ve,z,C){"use strict";var b;b=!0,z.default=void 0;var k=S(C(667294)),w=p(C(45697)),T=p(C(122827)),L=C(100448),P=["handle","handleSize","onResize","onResizeStart","onResizeStop","draggableOpts","minConstraints","maxConstraints","lockAspectRatio","axis","width","height","resizeHandles","style","transformScale"];function p(U){return U&&U.__esModule?U:{default:U}}function m(U){if(typeof WeakMap!="function")return null;var W=new WeakMap,V=new WeakMap;return(m=function(Q){return Q?V:W})(U)}function S(U,W){if(!W&&U&&U.__esModule)return U;if(U===null||typeof U!="object"&&typeof U!="function")return{default:U};var V=m(W);if(V&&V.has(U))return V.get(U);var H={},Q=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var tt in U)if(tt!=="default"&&Object.prototype.hasOwnProperty.call(U,tt)){var rt=Q?Object.getOwnPropertyDescriptor(U,tt):null;rt&&(rt.get||rt.set)?Object.defineProperty(H,tt,rt):H[tt]=U[tt]}return H.default=U,V&&V.set(U,H),H}function x(){return x=Object.assign?Object.assign.bind():function(U){for(var W=1;W<arguments.length;W++){var V=arguments[W];for(var H in V)Object.prototype.hasOwnProperty.call(V,H)&&(U[H]=V[H])}return U},x.apply(this,arguments)}function g(U,W){var V=Object.keys(U);if(Object.getOwnPropertySymbols){var H=Object.getOwnPropertySymbols(U);W&&(H=H.filter(function(Q){return Object.getOwnPropertyDescriptor(U,Q).enumerable})),V.push.apply(V,H)}return V}function A(U){for(var W=1;W<arguments.length;W++){var V=arguments[W]!=null?arguments[W]:{};W%2?g(Object(V),!0).forEach(function(H){E(U,H,V[H])}):Object.getOwnPropertyDescriptors?Object.defineProperties(U,Object.getOwnPropertyDescriptors(V)):g(Object(V)).forEach(function(H){Object.defineProperty(U,H,Object.getOwnPropertyDescriptor(V,H))})}return U}function E(U,W,V){return W=D(W),W in U?Object.defineProperty(U,W,{value:V,enumerable:!0,configurable:!0,writable:!0}):U[W]=V,U}function D(U){var W=F(U,"string");return typeof W=="symbol"?W:String(W)}function F(U,W){if(typeof U!="object"||U===null)return U;var V=U[Symbol.toPrimitive];if(V!==void 0){var H=V.call(U,W||"default");if(typeof H!="object")return H;throw new TypeError("@@toPrimitive must return a primitive value.")}return(W==="string"?String:Number)(U)}function y(U,W){if(U==null)return{};var V={},H=Object.keys(U),Q,tt;for(tt=0;tt<H.length;tt++)Q=H[tt],!(W.indexOf(Q)>=0)&&(V[Q]=U[Q]);return V}function h(U,W){U.prototype=Object.create(W.prototype),U.prototype.constructor=U,Y(U,W)}function Y(U,W){return Y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(H,Q){return H.__proto__=Q,H},Y(U,W)}var $=function(U){h(W,U);function W(){for(var H,Q=arguments.length,tt=new Array(Q),rt=0;rt<Q;rt++)tt[rt]=arguments[rt];return H=U.call.apply(U,[this].concat(tt))||this,H.state={width:H.props.width,height:H.props.height,propsWidth:H.props.width,propsHeight:H.props.height},H.onResize=function(ct,ot){var xt=ot.size;H.props.onResize?(ct.persist==null||ct.persist(),H.setState(xt,function(){return H.props.onResize&&H.props.onResize(ct,ot)})):H.setState(xt)},H}W.getDerivedStateFromProps=function(Q,tt){return tt.propsWidth!==Q.width||tt.propsHeight!==Q.height?{width:Q.width,height:Q.height,propsWidth:Q.width,propsHeight:Q.height}:null};var V=W.prototype;return V.render=function(){var Q=this.props,tt=Q.handle,rt=Q.handleSize,ct=Q.onResize,ot=Q.onResizeStart,xt=Q.onResizeStop,pt=Q.draggableOpts,Xt=Q.minConstraints,Ct=Q.maxConstraints,At=Q.lockAspectRatio,Z=Q.axis,q=Q.width,bt=Q.height,_t=Q.resizeHandles,nt=Q.style,vt=Q.transformScale,It=y(Q,P);return k.createElement(T.default,{axis:Z,draggableOpts:pt,handle:tt,handleSize:rt,height:this.state.height,lockAspectRatio:At,maxConstraints:Ct,minConstraints:Xt,onResizeStart:ot,onResize:this.onResize,onResizeStop:xt,resizeHandles:_t,transformScale:vt,width:this.state.width},k.createElement("div",x({},It,{style:A(A({},nt),{},{width:this.state.width+"px",height:this.state.height+"px"})})))},W}(k.Component);z.default=$,$.propTypes=A(A({},L.resizableProps),{},{children:w.default.element})},100448:function(Ve,z,C){"use strict";z.__esModule=!0,z.resizableProps=void 0;var b=w(C(45697)),k=C(861193);function w(L){return L&&L.__esModule?L:{default:L}}var T={axis:b.default.oneOf(["both","x","y","none"]),className:b.default.string,children:b.default.element.isRequired,draggableOpts:b.default.shape({allowAnyClick:b.default.bool,cancel:b.default.string,children:b.default.node,disabled:b.default.bool,enableUserSelectHack:b.default.bool,offsetParent:b.default.node,grid:b.default.arrayOf(b.default.number),handle:b.default.string,nodeRef:b.default.object,onStart:b.default.func,onDrag:b.default.func,onStop:b.default.func,onMouseDown:b.default.func,scale:b.default.number}),height:function(){for(var P=arguments.length,p=new Array(P),m=0;m<P;m++)p[m]=arguments[m];var S=p[0];if(S.axis==="both"||S.axis==="y"){var x;return(x=b.default.number).isRequired.apply(x,p)}return b.default.number.apply(b.default,p)},handle:b.default.oneOfType([b.default.node,b.default.func]),handleSize:b.default.arrayOf(b.default.number),lockAspectRatio:b.default.bool,maxConstraints:b.default.arrayOf(b.default.number),minConstraints:b.default.arrayOf(b.default.number),onResizeStop:b.default.func,onResizeStart:b.default.func,onResize:b.default.func,resizeHandles:b.default.arrayOf(b.default.oneOf(["s","w","e","n","sw","nw","se","ne"])),transformScale:b.default.number,width:function(){for(var P=arguments.length,p=new Array(P),m=0;m<P;m++)p[m]=arguments[m];var S=p[0];if(S.axis==="both"||S.axis==="x"){var x;return(x=b.default.number).isRequired.apply(x,p)}return b.default.number.apply(b.default,p)}};z.resizableProps=T},459069:function(Ve,z,C){"use strict";z.__esModule=!0,z.cloneElement=m;var b=k(C(667294));function k(S){return S&&S.__esModule?S:{default:S}}function w(S,x){var g=Object.keys(S);if(Object.getOwnPropertySymbols){var A=Object.getOwnPropertySymbols(S);x&&(A=A.filter(function(E){return Object.getOwnPropertyDescriptor(S,E).enumerable})),g.push.apply(g,A)}return g}function T(S){for(var x=1;x<arguments.length;x++){var g=arguments[x]!=null?arguments[x]:{};x%2?w(Object(g),!0).forEach(function(A){L(S,A,g[A])}):Object.getOwnPropertyDescriptors?Object.defineProperties(S,Object.getOwnPropertyDescriptors(g)):w(Object(g)).forEach(function(A){Object.defineProperty(S,A,Object.getOwnPropertyDescriptor(g,A))})}return S}function L(S,x,g){return x=P(x),x in S?Object.defineProperty(S,x,{value:g,enumerable:!0,configurable:!0,writable:!0}):S[x]=g,S}function P(S){var x=p(S,"string");return typeof x=="symbol"?x:String(x)}function p(S,x){if(typeof S!="object"||S===null)return S;var g=S[Symbol.toPrimitive];if(g!==void 0){var A=g.call(S,x||"default");if(typeof A!="object")return A;throw new TypeError("@@toPrimitive must return a primitive value.")}return(x==="string"?String:Number)(S)}function m(S,x){return x.style&&S.props.style&&(x.style=T(T({},S.props.style),x.style)),x.className&&S.props.className&&(x.className=S.props.className+" "+x.className),b.default.cloneElement(S,x)}},101706:function(Ve,z,C){"use strict";Ve.exports=function(){throw new Error("Don't instantiate Resizable directly! Use require('react-resizable').Resizable")},Ve.exports.Resizable=C(122827).default,Ve.exports.ResizableBox=C(808735).default},491907:function(Ve,z,C){"use strict";C.d(z,{cd:function(){return Ct}});var b=C(487462),k=C(497326),w=C(589611);function T(be,Qt){be.prototype=Object.create(Qt.prototype),be.prototype.constructor=be,(0,w.Z)(be,Qt)}var L=function(Qt,we){return Qt===we};function P(be,Qt){Qt===void 0&&(Qt=L);var we,Tt=[],Le,Mr=!1,Ar=function(dn,an){return Qt(dn,Tt[an])},Ir=function(){for(var dn=arguments.length,an=new Array(dn),Ln=0;Ln<dn;Ln++)an[Ln]=arguments[Ln];return Mr&&we===this&&an.length===Tt.length&&an.every(Ar)||(Le=be.apply(this,an),Mr=!0,we=this,Tt=an),Le};return Ir}var p=P,m=C(667294),S=typeof performance=="object"&&typeof performance.now=="function",x=S?function(){return performance.now()}:function(){return Date.now()};function g(be){cancelAnimationFrame(be.id)}function A(be,Qt){var we=x();function Tt(){x()-we>=Qt?be.call(null):Le.id=requestAnimationFrame(Tt)}var Le={id:requestAnimationFrame(Tt)};return Le}var E=-1;function D(be){if(be===void 0&&(be=!1),E===-1||be){var Qt=document.createElement("div"),we=Qt.style;we.width="50px",we.height="50px",we.overflow="scroll",document.body.appendChild(Qt),E=Qt.offsetWidth-Qt.clientWidth,document.body.removeChild(Qt)}return E}var F=null;function y(be){if(be===void 0&&(be=!1),F===null||be){var Qt=document.createElement("div"),we=Qt.style;we.width="50px",we.height="50px",we.overflow="scroll",we.direction="rtl";var Tt=document.createElement("div"),Le=Tt.style;return Le.width="100px",Le.height="100px",Qt.appendChild(Tt),document.body.appendChild(Qt),Qt.scrollLeft>0?F="positive-descending":(Qt.scrollLeft=1,Qt.scrollLeft===0?F="negative":F="positive-ascending"),document.body.removeChild(Qt),F}return F}var h=150,Y=function(Qt){var we=Qt.columnIndex,Tt=Qt.data,Le=Qt.rowIndex;return Le+":"+we},$=null,U=null,W=null;function V(be){var Qt,we=be.getColumnOffset,Tt=be.getColumnStartIndexForOffset,Le=be.getColumnStopIndexForStartIndex,Mr=be.getColumnWidth,Ar=be.getEstimatedTotalHeight,Ir=be.getEstimatedTotalWidth,Br=be.getOffsetForColumnAndAlignment,dn=be.getOffsetForRowAndAlignment,an=be.getRowHeight,Ln=be.getRowOffset,Un=be.getRowStartIndexForOffset,Yn=be.getRowStopIndexForStartIndex,xr=be.initInstanceProps,qe=be.shouldResetStyleCacheOnItemSizeChange,Cr=be.validateProps;return Qt=function(tn){T(vn,tn);function vn(Pn){var _r;return _r=tn.call(this,Pn)||this,_r._instanceProps=xr(_r.props,(0,k.Z)(_r)),_r._resetIsScrollingTimeoutId=null,_r._outerRef=void 0,_r.state={instance:(0,k.Z)(_r),isScrolling:!1,horizontalScrollDirection:"forward",scrollLeft:typeof _r.props.initialScrollLeft=="number"?_r.props.initialScrollLeft:0,scrollTop:typeof _r.props.initialScrollTop=="number"?_r.props.initialScrollTop:0,scrollUpdateWasRequested:!1,verticalScrollDirection:"forward"},_r._callOnItemsRendered=void 0,_r._callOnItemsRendered=p(function(un,An,on,Wn,Cn,On,jn,at){return _r.props.onItemsRendered({overscanColumnStartIndex:un,overscanColumnStopIndex:An,overscanRowStartIndex:on,overscanRowStopIndex:Wn,visibleColumnStartIndex:Cn,visibleColumnStopIndex:On,visibleRowStartIndex:jn,visibleRowStopIndex:at})}),_r._callOnScroll=void 0,_r._callOnScroll=p(function(un,An,on,Wn,Cn){return _r.props.onScroll({horizontalScrollDirection:on,scrollLeft:un,scrollTop:An,verticalScrollDirection:Wn,scrollUpdateWasRequested:Cn})}),_r._getItemStyle=void 0,_r._getItemStyle=function(un,An){var on=_r.props,Wn=on.columnWidth,Cn=on.direction,On=on.rowHeight,jn=_r._getItemStyleCache(qe&&Wn,qe&&Cn,qe&&On),at=un+":"+An,Ze;if(jn.hasOwnProperty(at))Ze=jn[at];else{var qt=we(_r.props,An,_r._instanceProps),Jt=Cn==="rtl";jn[at]=Ze={position:"absolute",left:Jt?void 0:qt,right:Jt?qt:void 0,top:Ln(_r.props,un,_r._instanceProps),height:an(_r.props,un,_r._instanceProps),width:Mr(_r.props,An,_r._instanceProps)}}return Ze},_r._getItemStyleCache=void 0,_r._getItemStyleCache=p(function(un,An,on){return{}}),_r._onScroll=function(un){var An=un.currentTarget,on=An.clientHeight,Wn=An.clientWidth,Cn=An.scrollLeft,On=An.scrollTop,jn=An.scrollHeight,at=An.scrollWidth;_r.setState(function(Ze){if(Ze.scrollLeft===Cn&&Ze.scrollTop===On)return null;var qt=_r.props.direction,Jt=Cn;if(qt==="rtl")switch(y()){case"negative":Jt=-Cn;break;case"positive-descending":Jt=at-Wn-Cn;break}Jt=Math.max(0,Math.min(Jt,at-Wn));var St=Math.max(0,Math.min(On,jn-on));return{isScrolling:!0,horizontalScrollDirection:Ze.scrollLeft<Cn?"forward":"backward",scrollLeft:Jt,scrollTop:St,verticalScrollDirection:Ze.scrollTop<On?"forward":"backward",scrollUpdateWasRequested:!1}},_r._resetIsScrollingDebounced)},_r._outerRefSetter=function(un){var An=_r.props.outerRef;_r._outerRef=un,typeof An=="function"?An(un):An!=null&&typeof An=="object"&&An.hasOwnProperty("current")&&(An.current=un)},_r._resetIsScrollingDebounced=function(){_r._resetIsScrollingTimeoutId!==null&&g(_r._resetIsScrollingTimeoutId),_r._resetIsScrollingTimeoutId=A(_r._resetIsScrolling,h)},_r._resetIsScrolling=function(){_r._resetIsScrollingTimeoutId=null,_r.setState({isScrolling:!1},function(){_r._getItemStyleCache(-1)})},_r}vn.getDerivedStateFromProps=function(_r,un){return H(_r,un),Cr(_r),null};var _n=vn.prototype;return _n.scrollTo=function(_r){var un=_r.scrollLeft,An=_r.scrollTop;un!==void 0&&(un=Math.max(0,un)),An!==void 0&&(An=Math.max(0,An)),this.setState(function(on){return un===void 0&&(un=on.scrollLeft),An===void 0&&(An=on.scrollTop),on.scrollLeft===un&&on.scrollTop===An?null:{horizontalScrollDirection:on.scrollLeft<un?"forward":"backward",scrollLeft:un,scrollTop:An,scrollUpdateWasRequested:!0,verticalScrollDirection:on.scrollTop<An?"forward":"backward"}},this._resetIsScrollingDebounced)},_n.scrollToItem=function(_r){var un=_r.align,An=un===void 0?"auto":un,on=_r.columnIndex,Wn=_r.rowIndex,Cn=this.props,On=Cn.columnCount,jn=Cn.height,at=Cn.rowCount,Ze=Cn.width,qt=this.state,Jt=qt.scrollLeft,St=qt.scrollTop,Ce=D();on!==void 0&&(on=Math.max(0,Math.min(on,On-1))),Wn!==void 0&&(Wn=Math.max(0,Math.min(Wn,at-1)));var kt=Ar(this.props,this._instanceProps),Kt=Ir(this.props,this._instanceProps),dt=Kt>Ze?Ce:0,Ut=kt>jn?Ce:0;this.scrollTo({scrollLeft:on!==void 0?Br(this.props,on,An,Jt,this._instanceProps,Ut):Jt,scrollTop:Wn!==void 0?dn(this.props,Wn,An,St,this._instanceProps,dt):St})},_n.componentDidMount=function(){var _r=this.props,un=_r.initialScrollLeft,An=_r.initialScrollTop;if(this._outerRef!=null){var on=this._outerRef;typeof un=="number"&&(on.scrollLeft=un),typeof An=="number"&&(on.scrollTop=An)}this._callPropsCallbacks()},_n.componentDidUpdate=function(){var _r=this.props.direction,un=this.state,An=un.scrollLeft,on=un.scrollTop,Wn=un.scrollUpdateWasRequested;if(Wn&&this._outerRef!=null){var Cn=this._outerRef;if(_r==="rtl")switch(y()){case"negative":Cn.scrollLeft=-An;break;case"positive-ascending":Cn.scrollLeft=An;break;default:var On=Cn.clientWidth,jn=Cn.scrollWidth;Cn.scrollLeft=jn-On-An;break}else Cn.scrollLeft=Math.max(0,An);Cn.scrollTop=Math.max(0,on)}this._callPropsCallbacks()},_n.componentWillUnmount=function(){this._resetIsScrollingTimeoutId!==null&&g(this._resetIsScrollingTimeoutId)},_n.render=function(){var _r=this.props,un=_r.children,An=_r.className,on=_r.columnCount,Wn=_r.direction,Cn=_r.height,On=_r.innerRef,jn=_r.innerElementType,at=_r.innerTagName,Ze=_r.itemData,qt=_r.itemKey,Jt=qt===void 0?Y:qt,St=_r.outerElementType,Ce=_r.outerTagName,kt=_r.rowCount,Kt=_r.style,dt=_r.useIsScrolling,Ut=_r.width,J=this.state.isScrolling,it=this._getHorizontalRangeToRender(),R=it[0],M=it[1],O=this._getVerticalRangeToRender(),X=O[0],mt=O[1],Ft=[];if(on>0&&kt)for(var Bt=X;Bt<=mt;Bt++)for(var re=R;re<=M;re++)Ft.push((0,m.createElement)(un,{columnIndex:re,data:Ze,isScrolling:dt?J:void 0,key:Jt({columnIndex:re,data:Ze,rowIndex:Bt}),rowIndex:Bt,style:this._getItemStyle(Bt,re)}));var De=Ar(this.props,this._instanceProps),me=Ir(this.props,this._instanceProps);return(0,m.createElement)(St||Ce||"div",{className:An,onScroll:this._onScroll,ref:this._outerRefSetter,style:(0,b.Z)({position:"relative",height:Cn,width:Ut,overflow:"auto",WebkitOverflowScrolling:"touch",willChange:"transform",direction:Wn},Kt)},(0,m.createElement)(jn||at||"div",{children:Ft,ref:On,style:{height:De,pointerEvents:J?"none":void 0,width:me}}))},_n._callPropsCallbacks=function(){var _r=this.props,un=_r.columnCount,An=_r.onItemsRendered,on=_r.onScroll,Wn=_r.rowCount;if(typeof An=="function"&&un>0&&Wn>0){var Cn=this._getHorizontalRangeToRender(),On=Cn[0],jn=Cn[1],at=Cn[2],Ze=Cn[3],qt=this._getVerticalRangeToRender(),Jt=qt[0],St=qt[1],Ce=qt[2],kt=qt[3];this._callOnItemsRendered(On,jn,Jt,St,at,Ze,Ce,kt)}if(typeof on=="function"){var Kt=this.state,dt=Kt.horizontalScrollDirection,Ut=Kt.scrollLeft,J=Kt.scrollTop,it=Kt.scrollUpdateWasRequested,R=Kt.verticalScrollDirection;this._callOnScroll(Ut,J,dt,R,it)}},_n._getHorizontalRangeToRender=function(){var _r=this.props,un=_r.columnCount,An=_r.overscanColumnCount,on=_r.overscanColumnsCount,Wn=_r.overscanCount,Cn=_r.rowCount,On=this.state,jn=On.horizontalScrollDirection,at=On.isScrolling,Ze=On.scrollLeft,qt=An||on||Wn||1;if(un===0||Cn===0)return[0,0,0,0];var Jt=Tt(this.props,Ze,this._instanceProps),St=Le(this.props,Jt,Ze,this._instanceProps),Ce=!at||jn==="backward"?Math.max(1,qt):1,kt=!at||jn==="forward"?Math.max(1,qt):1;return[Math.max(0,Jt-Ce),Math.max(0,Math.min(un-1,St+kt)),Jt,St]},_n._getVerticalRangeToRender=function(){var _r=this.props,un=_r.columnCount,An=_r.overscanCount,on=_r.overscanRowCount,Wn=_r.overscanRowsCount,Cn=_r.rowCount,On=this.state,jn=On.isScrolling,at=On.verticalScrollDirection,Ze=On.scrollTop,qt=on||Wn||An||1;if(un===0||Cn===0)return[0,0,0,0];var Jt=Un(this.props,Ze,this._instanceProps),St=Yn(this.props,Jt,Ze,this._instanceProps),Ce=!jn||at==="backward"?Math.max(1,qt):1,kt=!jn||at==="forward"?Math.max(1,qt):1;return[Math.max(0,Jt-Ce),Math.max(0,Math.min(Cn-1,St+kt)),Jt,St]},vn}(m.PureComponent),Qt.defaultProps={direction:"ltr",itemData:void 0,useIsScrolling:!1},Qt}var H=function(Qt,we){var Tt=Qt.children,Le=Qt.direction,Mr=Qt.height,Ar=Qt.innerTagName,Ir=Qt.outerTagName,Br=Qt.overscanColumnsCount,dn=Qt.overscanCount,an=Qt.overscanRowsCount,Ln=Qt.width,Un=we.instance},Q=50,tt=function(Qt,we){var Tt=Qt.rowCount,Le=we.rowMetadataMap,Mr=we.estimatedRowHeight,Ar=we.lastMeasuredRowIndex,Ir=0;if(Ar>=Tt&&(Ar=Tt-1),Ar>=0){var Br=Le[Ar];Ir=Br.offset+Br.size}var dn=Tt-Ar-1,an=dn*Mr;return Ir+an},rt=function(Qt,we){var Tt=Qt.columnCount,Le=we.columnMetadataMap,Mr=we.estimatedColumnWidth,Ar=we.lastMeasuredColumnIndex,Ir=0;if(Ar>=Tt&&(Ar=Tt-1),Ar>=0){var Br=Le[Ar];Ir=Br.offset+Br.size}var dn=Tt-Ar-1,an=dn*Mr;return Ir+an},ct=function(Qt,we,Tt,Le){var Mr,Ar,Ir;if(Qt==="column"?(Mr=Le.columnMetadataMap,Ar=we.columnWidth,Ir=Le.lastMeasuredColumnIndex):(Mr=Le.rowMetadataMap,Ar=we.rowHeight,Ir=Le.lastMeasuredRowIndex),Tt>Ir){var Br=0;if(Ir>=0){var dn=Mr[Ir];Br=dn.offset+dn.size}for(var an=Ir+1;an<=Tt;an++){var Ln=Ar(an);Mr[an]={offset:Br,size:Ln},Br+=Ln}Qt==="column"?Le.lastMeasuredColumnIndex=Tt:Le.lastMeasuredRowIndex=Tt}return Mr[Tt]},ot=function(Qt,we,Tt,Le){var Mr,Ar;Qt==="column"?(Mr=Tt.columnMetadataMap,Ar=Tt.lastMeasuredColumnIndex):(Mr=Tt.rowMetadataMap,Ar=Tt.lastMeasuredRowIndex);var Ir=Ar>0?Mr[Ar].offset:0;return Ir>=Le?xt(Qt,we,Tt,Ar,0,Le):pt(Qt,we,Tt,Math.max(0,Ar),Le)},xt=function(Qt,we,Tt,Le,Mr,Ar){for(;Mr<=Le;){var Ir=Mr+Math.floor((Le-Mr)/2),Br=ct(Qt,we,Ir,Tt).offset;if(Br===Ar)return Ir;Br<Ar?Mr=Ir+1:Br>Ar&&(Le=Ir-1)}return Mr>0?Mr-1:0},pt=function(Qt,we,Tt,Le,Mr){for(var Ar=Qt==="column"?we.columnCount:we.rowCount,Ir=1;Le<Ar&&ct(Qt,we,Le,Tt).offset<Mr;)Le+=Ir,Ir*=2;return xt(Qt,we,Tt,Math.min(Le,Ar-1),Math.floor(Le/2),Mr)},Xt=function(Qt,we,Tt,Le,Mr,Ar,Ir){var Br=Qt==="column"?we.width:we.height,dn=ct(Qt,we,Tt,Ar),an=Qt==="column"?rt(we,Ar):tt(we,Ar),Ln=Math.max(0,Math.min(an-Br,dn.offset)),Un=Math.max(0,dn.offset-Br+Ir+dn.size);switch(Le==="smart"&&(Mr>=Un-Br&&Mr<=Ln+Br?Le="auto":Le="center"),Le){case"start":return Ln;case"end":return Un;case"center":return Math.round(Un+(Ln-Un)/2);case"auto":default:return Mr>=Un&&Mr<=Ln?Mr:Un>Ln||Mr<Un?Un:Ln}},Ct=V({getColumnOffset:function(Qt,we,Tt){return ct("column",Qt,we,Tt).offset},getColumnStartIndexForOffset:function(Qt,we,Tt){return ot("column",Qt,Tt,we)},getColumnStopIndexForStartIndex:function(Qt,we,Tt,Le){for(var Mr=Qt.columnCount,Ar=Qt.width,Ir=ct("column",Qt,we,Le),Br=Tt+Ar,dn=Ir.offset+Ir.size,an=we;an<Mr-1&&dn<Br;)an++,dn+=ct("column",Qt,an,Le).size;return an},getColumnWidth:function(Qt,we,Tt){return Tt.columnMetadataMap[we].size},getEstimatedTotalHeight:tt,getEstimatedTotalWidth:rt,getOffsetForColumnAndAlignment:function(Qt,we,Tt,Le,Mr,Ar){return Xt("column",Qt,we,Tt,Le,Mr,Ar)},getOffsetForRowAndAlignment:function(Qt,we,Tt,Le,Mr,Ar){return Xt("row",Qt,we,Tt,Le,Mr,Ar)},getRowOffset:function(Qt,we,Tt){return ct("row",Qt,we,Tt).offset},getRowHeight:function(Qt,we,Tt){return Tt.rowMetadataMap[we].size},getRowStartIndexForOffset:function(Qt,we,Tt){return ot("row",Qt,Tt,we)},getRowStopIndexForStartIndex:function(Qt,we,Tt,Le){for(var Mr=Qt.rowCount,Ar=Qt.height,Ir=ct("row",Qt,we,Le),Br=Tt+Ar,dn=Ir.offset+Ir.size,an=we;an<Mr-1&&dn<Br;)an++,dn+=ct("row",Qt,an,Le).size;return an},initInstanceProps:function(Qt,we){var Tt=Qt,Le=Tt.estimatedColumnWidth,Mr=Tt.estimatedRowHeight,Ar={columnMetadataMap:{},estimatedColumnWidth:Le||Q,estimatedRowHeight:Mr||Q,lastMeasuredColumnIndex:-1,lastMeasuredRowIndex:-1,rowMetadataMap:{}};return we.resetAfterColumnIndex=function(Ir,Br){Br===void 0&&(Br=!0),we.resetAfterIndices({columnIndex:Ir,shouldForceUpdate:Br})},we.resetAfterRowIndex=function(Ir,Br){Br===void 0&&(Br=!0),we.resetAfterIndices({rowIndex:Ir,shouldForceUpdate:Br})},we.resetAfterIndices=function(Ir){var Br=Ir.columnIndex,dn=Ir.rowIndex,an=Ir.shouldForceUpdate,Ln=an===void 0?!0:an;typeof Br=="number"&&(Ar.lastMeasuredColumnIndex=Math.min(Ar.lastMeasuredColumnIndex,Br-1)),typeof dn=="number"&&(Ar.lastMeasuredRowIndex=Math.min(Ar.lastMeasuredRowIndex,dn-1)),we._getItemStyleCache(-1),Ln&&we.forceUpdate()},Ar},shouldResetStyleCacheOnItemSizeChange:!1,validateProps:function(Qt){var we=Qt.columnWidth,Tt=Qt.rowHeight}}),At=150,Z=function(Qt,we){return Qt},q=null,bt=null;function _t(be){var Qt,we=be.getItemOffset,Tt=be.getEstimatedTotalSize,Le=be.getItemSize,Mr=be.getOffsetForIndexAndAlignment,Ar=be.getStartIndexForOffset,Ir=be.getStopIndexForStartIndex,Br=be.initInstanceProps,dn=be.shouldResetStyleCacheOnItemSizeChange,an=be.validateProps;return Qt=function(Ln){T(Un,Ln);function Un(xr){var qe;return qe=Ln.call(this,xr)||this,qe._instanceProps=Br(qe.props,(0,k.Z)(qe)),qe._outerRef=void 0,qe._resetIsScrollingTimeoutId=null,qe.state={instance:(0,k.Z)(qe),isScrolling:!1,scrollDirection:"forward",scrollOffset:typeof qe.props.initialScrollOffset=="number"?qe.props.initialScrollOffset:0,scrollUpdateWasRequested:!1},qe._callOnItemsRendered=void 0,qe._callOnItemsRendered=p(function(Cr,tn,vn,_n){return qe.props.onItemsRendered({overscanStartIndex:Cr,overscanStopIndex:tn,visibleStartIndex:vn,visibleStopIndex:_n})}),qe._callOnScroll=void 0,qe._callOnScroll=p(function(Cr,tn,vn){return qe.props.onScroll({scrollDirection:Cr,scrollOffset:tn,scrollUpdateWasRequested:vn})}),qe._getItemStyle=void 0,qe._getItemStyle=function(Cr){var tn=qe.props,vn=tn.direction,_n=tn.itemSize,Pn=tn.layout,_r=qe._getItemStyleCache(dn&&_n,dn&&Pn,dn&&vn),un;if(_r.hasOwnProperty(Cr))un=_r[Cr];else{var An=we(qe.props,Cr,qe._instanceProps),on=Le(qe.props,Cr,qe._instanceProps),Wn=vn==="horizontal"||Pn==="horizontal",Cn=vn==="rtl",On=Wn?An:0;_r[Cr]=un={position:"absolute",left:Cn?void 0:On,right:Cn?On:void 0,top:Wn?0:An,height:Wn?"100%":on,width:Wn?on:"100%"}}return un},qe._getItemStyleCache=void 0,qe._getItemStyleCache=p(function(Cr,tn,vn){return{}}),qe._onScrollHorizontal=function(Cr){var tn=Cr.currentTarget,vn=tn.clientWidth,_n=tn.scrollLeft,Pn=tn.scrollWidth;qe.setState(function(_r){if(_r.scrollOffset===_n)return null;var un=qe.props.direction,An=_n;if(un==="rtl")switch(y()){case"negative":An=-_n;break;case"positive-descending":An=Pn-vn-_n;break}return An=Math.max(0,Math.min(An,Pn-vn)),{isScrolling:!0,scrollDirection:_r.scrollOffset<_n?"forward":"backward",scrollOffset:An,scrollUpdateWasRequested:!1}},qe._resetIsScrollingDebounced)},qe._onScrollVertical=function(Cr){var tn=Cr.currentTarget,vn=tn.clientHeight,_n=tn.scrollHeight,Pn=tn.scrollTop;qe.setState(function(_r){if(_r.scrollOffset===Pn)return null;var un=Math.max(0,Math.min(Pn,_n-vn));return{isScrolling:!0,scrollDirection:_r.scrollOffset<un?"forward":"backward",scrollOffset:un,scrollUpdateWasRequested:!1}},qe._resetIsScrollingDebounced)},qe._outerRefSetter=function(Cr){var tn=qe.props.outerRef;qe._outerRef=Cr,typeof tn=="function"?tn(Cr):tn!=null&&typeof tn=="object"&&tn.hasOwnProperty("current")&&(tn.current=Cr)},qe._resetIsScrollingDebounced=function(){qe._resetIsScrollingTimeoutId!==null&&g(qe._resetIsScrollingTimeoutId),qe._resetIsScrollingTimeoutId=A(qe._resetIsScrolling,At)},qe._resetIsScrolling=function(){qe._resetIsScrollingTimeoutId=null,qe.setState({isScrolling:!1},function(){qe._getItemStyleCache(-1,null)})},qe}Un.getDerivedStateFromProps=function(qe,Cr){return nt(qe,Cr),an(qe),null};var Yn=Un.prototype;return Yn.scrollTo=function(qe){qe=Math.max(0,qe),this.setState(function(Cr){return Cr.scrollOffset===qe?null:{scrollDirection:Cr.scrollOffset<qe?"forward":"backward",scrollOffset:qe,scrollUpdateWasRequested:!0}},this._resetIsScrollingDebounced)},Yn.scrollToItem=function(qe,Cr){Cr===void 0&&(Cr="auto");var tn=this.props,vn=tn.itemCount,_n=tn.layout,Pn=this.state.scrollOffset;qe=Math.max(0,Math.min(qe,vn-1));var _r=0;if(this._outerRef){var un=this._outerRef;_n==="vertical"?_r=un.scrollWidth>un.clientWidth?D():0:_r=un.scrollHeight>un.clientHeight?D():0}this.scrollTo(Mr(this.props,qe,Cr,Pn,this._instanceProps,_r))},Yn.componentDidMount=function(){var qe=this.props,Cr=qe.direction,tn=qe.initialScrollOffset,vn=qe.layout;if(typeof tn=="number"&&this._outerRef!=null){var _n=this._outerRef;Cr==="horizontal"||vn==="horizontal"?_n.scrollLeft=tn:_n.scrollTop=tn}this._callPropsCallbacks()},Yn.componentDidUpdate=function(){var qe=this.props,Cr=qe.direction,tn=qe.layout,vn=this.state,_n=vn.scrollOffset,Pn=vn.scrollUpdateWasRequested;if(Pn&&this._outerRef!=null){var _r=this._outerRef;if(Cr==="horizontal"||tn==="horizontal")if(Cr==="rtl")switch(y()){case"negative":_r.scrollLeft=-_n;break;case"positive-ascending":_r.scrollLeft=_n;break;default:var un=_r.clientWidth,An=_r.scrollWidth;_r.scrollLeft=An-un-_n;break}else _r.scrollLeft=_n;else _r.scrollTop=_n}this._callPropsCallbacks()},Yn.componentWillUnmount=function(){this._resetIsScrollingTimeoutId!==null&&g(this._resetIsScrollingTimeoutId)},Yn.render=function(){var qe=this.props,Cr=qe.children,tn=qe.className,vn=qe.direction,_n=qe.height,Pn=qe.innerRef,_r=qe.innerElementType,un=qe.innerTagName,An=qe.itemCount,on=qe.itemData,Wn=qe.itemKey,Cn=Wn===void 0?Z:Wn,On=qe.layout,jn=qe.outerElementType,at=qe.outerTagName,Ze=qe.style,qt=qe.useIsScrolling,Jt=qe.width,St=this.state.isScrolling,Ce=vn==="horizontal"||On==="horizontal",kt=Ce?this._onScrollHorizontal:this._onScrollVertical,Kt=this._getRangeToRender(),dt=Kt[0],Ut=Kt[1],J=[];if(An>0)for(var it=dt;it<=Ut;it++)J.push((0,m.createElement)(Cr,{data:on,key:Cn(it,on),index:it,isScrolling:qt?St:void 0,style:this._getItemStyle(it)}));var R=Tt(this.props,this._instanceProps);return(0,m.createElement)(jn||at||"div",{className:tn,onScroll:kt,ref:this._outerRefSetter,style:(0,b.Z)({position:"relative",height:_n,width:Jt,overflow:"auto",WebkitOverflowScrolling:"touch",willChange:"transform",direction:vn},Ze)},(0,m.createElement)(_r||un||"div",{children:J,ref:Pn,style:{height:Ce?"100%":R,pointerEvents:St?"none":void 0,width:Ce?R:"100%"}}))},Yn._callPropsCallbacks=function(){if(typeof this.props.onItemsRendered=="function"){var qe=this.props.itemCount;if(qe>0){var Cr=this._getRangeToRender(),tn=Cr[0],vn=Cr[1],_n=Cr[2],Pn=Cr[3];this._callOnItemsRendered(tn,vn,_n,Pn)}}if(typeof this.props.onScroll=="function"){var _r=this.state,un=_r.scrollDirection,An=_r.scrollOffset,on=_r.scrollUpdateWasRequested;this._callOnScroll(un,An,on)}},Yn._getRangeToRender=function(){var qe=this.props,Cr=qe.itemCount,tn=qe.overscanCount,vn=this.state,_n=vn.isScrolling,Pn=vn.scrollDirection,_r=vn.scrollOffset;if(Cr===0)return[0,0,0,0];var un=Ar(this.props,_r,this._instanceProps),An=Ir(this.props,un,_r,this._instanceProps),on=!_n||Pn==="backward"?Math.max(1,tn):1,Wn=!_n||Pn==="forward"?Math.max(1,tn):1;return[Math.max(0,un-on),Math.max(0,Math.min(Cr-1,An+Wn)),un,An]},Un}(m.PureComponent),Qt.defaultProps={direction:"ltr",itemData:void 0,layout:"vertical",overscanCount:2,useIsScrolling:!1},Qt}var nt=function(Qt,we){var Tt=Qt.children,Le=Qt.direction,Mr=Qt.height,Ar=Qt.layout,Ir=Qt.innerTagName,Br=Qt.outerTagName,dn=Qt.width,an=we.instance;if(!1)var Ln},vt=50,It=function(Qt,we,Tt){var Le=Qt,Mr=Le.itemSize,Ar=Tt.itemMetadataMap,Ir=Tt.lastMeasuredIndex;if(we>Ir){var Br=0;if(Ir>=0){var dn=Ar[Ir];Br=dn.offset+dn.size}for(var an=Ir+1;an<=we;an++){var Ln=Mr(an);Ar[an]={offset:Br,size:Ln},Br+=Ln}Tt.lastMeasuredIndex=we}return Ar[we]},Pt=function(Qt,we,Tt){var Le=we.itemMetadataMap,Mr=we.lastMeasuredIndex,Ar=Mr>0?Le[Mr].offset:0;return Ar>=Tt?Et(Qt,we,Mr,0,Tt):Nt(Qt,we,Math.max(0,Mr),Tt)},Et=function(Qt,we,Tt,Le,Mr){for(;Le<=Tt;){var Ar=Le+Math.floor((Tt-Le)/2),Ir=It(Qt,Ar,we).offset;if(Ir===Mr)return Ar;Ir<Mr?Le=Ar+1:Ir>Mr&&(Tt=Ar-1)}return Le>0?Le-1:0},Nt=function(Qt,we,Tt,Le){for(var Mr=Qt.itemCount,Ar=1;Tt<Mr&&It(Qt,Tt,we).offset<Le;)Tt+=Ar,Ar*=2;return Et(Qt,we,Math.min(Tt,Mr-1),Math.floor(Tt/2),Le)},$t=function(Qt,we){var Tt=Qt.itemCount,Le=we.itemMetadataMap,Mr=we.estimatedItemSize,Ar=we.lastMeasuredIndex,Ir=0;if(Ar>=Tt&&(Ar=Tt-1),Ar>=0){var Br=Le[Ar];Ir=Br.offset+Br.size}var dn=Tt-Ar-1,an=dn*Mr;return Ir+an},ue=_t({getItemOffset:function(Qt,we,Tt){return It(Qt,we,Tt).offset},getItemSize:function(Qt,we,Tt){return Tt.itemMetadataMap[we].size},getEstimatedTotalSize:$t,getOffsetForIndexAndAlignment:function(Qt,we,Tt,Le,Mr,Ar){var Ir=Qt.direction,Br=Qt.height,dn=Qt.layout,an=Qt.width,Ln=Ir==="horizontal"||dn==="horizontal",Un=Ln?an:Br,Yn=It(Qt,we,Mr),xr=$t(Qt,Mr),qe=Math.max(0,Math.min(xr-Un,Yn.offset)),Cr=Math.max(0,Yn.offset-Un+Yn.size+Ar);switch(Tt==="smart"&&(Le>=Cr-Un&&Le<=qe+Un?Tt="auto":Tt="center"),Tt){case"start":return qe;case"end":return Cr;case"center":return Math.round(Cr+(qe-Cr)/2);case"auto":default:return Le>=Cr&&Le<=qe?Le:Le<Cr?Cr:qe}},getStartIndexForOffset:function(Qt,we,Tt){return Pt(Qt,Tt,we)},getStopIndexForStartIndex:function(Qt,we,Tt,Le){for(var Mr=Qt.direction,Ar=Qt.height,Ir=Qt.itemCount,Br=Qt.layout,dn=Qt.width,an=Mr==="horizontal"||Br==="horizontal",Ln=an?dn:Ar,Un=It(Qt,we,Le),Yn=Tt+Ln,xr=Un.offset+Un.size,qe=we;qe<Ir-1&&xr<Yn;)qe++,xr+=It(Qt,qe,Le).size;return qe},initInstanceProps:function(Qt,we){var Tt=Qt,Le=Tt.estimatedItemSize,Mr={itemMetadataMap:{},estimatedItemSize:Le||vt,lastMeasuredIndex:-1};return we.resetAfterIndex=function(Ar,Ir){Ir===void 0&&(Ir=!0),Mr.lastMeasuredIndex=Math.min(Mr.lastMeasuredIndex,Ar-1),we._getItemStyleCache(-1),Ir&&we.forceUpdate()},Mr},shouldResetStyleCacheOnItemSizeChange:!1,validateProps:function(Qt){var we=Qt.itemSize}}),ie=V({getColumnOffset:function(Qt,we){var Tt=Qt.columnWidth;return we*Tt},getColumnWidth:function(Qt,we){var Tt=Qt.columnWidth;return Tt},getRowOffset:function(Qt,we){var Tt=Qt.rowHeight;return we*Tt},getRowHeight:function(Qt,we){var Tt=Qt.rowHeight;return Tt},getEstimatedTotalHeight:function(Qt){var we=Qt.rowCount,Tt=Qt.rowHeight;return Tt*we},getEstimatedTotalWidth:function(Qt){var we=Qt.columnCount,Tt=Qt.columnWidth;return Tt*we},getOffsetForColumnAndAlignment:function(Qt,we,Tt,Le,Mr,Ar){var Ir=Qt.columnCount,Br=Qt.columnWidth,dn=Qt.width,an=Math.max(0,Ir*Br-dn),Ln=Math.min(an,we*Br),Un=Math.max(0,we*Br-dn+Ar+Br);switch(Tt==="smart"&&(Le>=Un-dn&&Le<=Ln+dn?Tt="auto":Tt="center"),Tt){case"start":return Ln;case"end":return Un;case"center":var Yn=Math.round(Un+(Ln-Un)/2);return Yn<Math.ceil(dn/2)?0:Yn>an+Math.floor(dn/2)?an:Yn;case"auto":default:return Le>=Un&&Le<=Ln?Le:Un>Ln||Le<Un?Un:Ln}},getOffsetForRowAndAlignment:function(Qt,we,Tt,Le,Mr,Ar){var Ir=Qt.rowHeight,Br=Qt.height,dn=Qt.rowCount,an=Math.max(0,dn*Ir-Br),Ln=Math.min(an,we*Ir),Un=Math.max(0,we*Ir-Br+Ar+Ir);switch(Tt==="smart"&&(Le>=Un-Br&&Le<=Ln+Br?Tt="auto":Tt="center"),Tt){case"start":return Ln;case"end":return Un;case"center":var Yn=Math.round(Un+(Ln-Un)/2);return Yn<Math.ceil(Br/2)?0:Yn>an+Math.floor(Br/2)?an:Yn;case"auto":default:return Le>=Un&&Le<=Ln?Le:Un>Ln||Le<Un?Un:Ln}},getColumnStartIndexForOffset:function(Qt,we){var Tt=Qt.columnWidth,Le=Qt.columnCount;return Math.max(0,Math.min(Le-1,Math.floor(we/Tt)))},getColumnStopIndexForStartIndex:function(Qt,we,Tt){var Le=Qt.columnWidth,Mr=Qt.columnCount,Ar=Qt.width,Ir=we*Le,Br=Math.ceil((Ar+Tt-Ir)/Le);return Math.max(0,Math.min(Mr-1,we+Br-1))},getRowStartIndexForOffset:function(Qt,we){var Tt=Qt.rowHeight,Le=Qt.rowCount;return Math.max(0,Math.min(Le-1,Math.floor(we/Tt)))},getRowStopIndexForStartIndex:function(Qt,we,Tt){var Le=Qt.rowHeight,Mr=Qt.rowCount,Ar=Qt.height,Ir=we*Le,Br=Math.ceil((Ar+Tt-Ir)/Le);return Math.max(0,Math.min(Mr-1,we+Br-1))},initInstanceProps:function(Qt){},shouldResetStyleCacheOnItemSizeChange:!0,validateProps:function(Qt){var we=Qt.columnWidth,Tt=Qt.rowHeight}}),Dt=_t({getItemOffset:function(Qt,we){var Tt=Qt.itemSize;return we*Tt},getItemSize:function(Qt,we){var Tt=Qt.itemSize;return Tt},getEstimatedTotalSize:function(Qt){var we=Qt.itemCount,Tt=Qt.itemSize;return Tt*we},getOffsetForIndexAndAlignment:function(Qt,we,Tt,Le,Mr,Ar){var Ir=Qt.direction,Br=Qt.height,dn=Qt.itemCount,an=Qt.itemSize,Ln=Qt.layout,Un=Qt.width,Yn=Ir==="horizontal"||Ln==="horizontal",xr=Yn?Un:Br,qe=Math.max(0,dn*an-xr),Cr=Math.min(qe,we*an),tn=Math.max(0,we*an-xr+an+Ar);switch(Tt==="smart"&&(Le>=tn-xr&&Le<=Cr+xr?Tt="auto":Tt="center"),Tt){case"start":return Cr;case"end":return tn;case"center":{var vn=Math.round(tn+(Cr-tn)/2);return vn<Math.ceil(xr/2)?0:vn>qe+Math.floor(xr/2)?qe:vn}case"auto":default:return Le>=tn&&Le<=Cr?Le:Le<tn?tn:Cr}},getStartIndexForOffset:function(Qt,we){var Tt=Qt.itemCount,Le=Qt.itemSize;return Math.max(0,Math.min(Tt-1,Math.floor(we/Le)))},getStopIndexForStartIndex:function(Qt,we,Tt){var Le=Qt.direction,Mr=Qt.height,Ar=Qt.itemCount,Ir=Qt.itemSize,Br=Qt.layout,dn=Qt.width,an=Le==="horizontal"||Br==="horizontal",Ln=we*Ir,Un=an?dn:Mr,Yn=Math.ceil((Un+Tt-Ln)/Ir);return Math.max(0,Math.min(Ar-1,we+Yn-1))},initInstanceProps:function(Qt){},shouldResetStyleCacheOnItemSizeChange:!0,validateProps:function(Qt){var we=Qt.itemSize}});function ne(be,Qt){for(var we in be)if(!(we in Qt))return!0;for(var Tt in Qt)if(be[Tt]!==Qt[Tt])return!0;return!1}var pe=null,Wt=null;function ae(be,Qt){var we=be.style,Tt=_objectWithoutPropertiesLoose(be,pe),Le=Qt.style,Mr=_objectWithoutPropertiesLoose(Qt,Wt);return!ne(we,Le)&&!ne(Tt,Mr)}function Se(be,Qt){return!ae(this.props,be)||ne(this.state,Qt)}},481550:function(Ve){(function(z,C){Ve.exports=C()})(this,function(){"use strict";var z=function(Rt){return Rt instanceof Uint8Array||Rt instanceof Uint16Array||Rt instanceof Uint32Array||Rt instanceof Int8Array||Rt instanceof Int16Array||Rt instanceof Int32Array||Rt instanceof Float32Array||Rt instanceof Float64Array||Rt instanceof Uint8ClampedArray},C=function(Rt,Te){for(var je=Object.keys(Te),zr=0;zr<je.length;++zr)Rt[je[zr]]=Te[je[zr]];return Rt},b=`
`;function k(Rt){return typeof atob!="undefined"?atob(Rt):"base64:"+Rt}function w(Rt){var Te=new Error("(regl) "+Rt);throw console.error(Te),Te}function T(Rt,Te){Rt||w(Te)}function L(Rt){return Rt?": "+Rt:""}function P(Rt,Te,je){Rt in Te||w("unknown parameter ("+Rt+")"+L(je)+". possible values: "+Object.keys(Te).join())}function p(Rt,Te){z(Rt)||w("invalid parameter type"+L(Te)+". must be a typed array")}function m(Rt,Te){switch(Te){case"number":return typeof Rt=="number";case"object":return typeof Rt=="object";case"string":return typeof Rt=="string";case"boolean":return typeof Rt=="boolean";case"function":return typeof Rt=="function";case"undefined":return typeof Rt=="undefined";case"symbol":return typeof Rt=="symbol"}}function S(Rt,Te,je){m(Rt,Te)||w("invalid parameter type"+L(je)+". expected "+Te+", got "+typeof Rt)}function x(Rt,Te){Rt>=0&&(Rt|0)===Rt||w("invalid parameter type, ("+Rt+")"+L(Te)+". must be a nonnegative integer")}function g(Rt,Te,je){Te.indexOf(Rt)<0&&w("invalid value"+L(je)+". must be one of: "+Te)}var A=["gl","canvas","container","attributes","pixelRatio","extensions","optionalExtensions","profile","onDone"];function E(Rt){Object.keys(Rt).forEach(function(Te){A.indexOf(Te)<0&&w('invalid regl constructor argument "'+Te+'". must be one of '+A)})}function D(Rt,Te){for(Rt=Rt+"";Rt.length<Te;)Rt=" "+Rt;return Rt}function F(){this.name="unknown",this.lines=[],this.index={},this.hasErrors=!1}function y(Rt,Te){this.number=Rt,this.line=Te,this.errors=[]}function h(Rt,Te,je){this.file=Rt,this.line=Te,this.message=je}function Y(){var Rt=new Error,Te=(Rt.stack||Rt).toString(),je=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(Te);if(je)return je[1];var zr=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(Te);return zr?zr[1]:"unknown"}function $(){var Rt=new Error,Te=(Rt.stack||Rt).toString(),je=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(Te);if(je)return je[1];var zr=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(Te);return zr?zr[1]:"unknown"}function U(Rt,Te){var je=Rt.split(`
`),zr=1,rn=0,Fr={unknown:new F,0:new F};Fr.unknown.name=Fr[0].name=Te||Y(),Fr.unknown.lines.push(new y(0,""));for(var Xr=0;Xr<je.length;++Xr){var bn=je[Xr],wn=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(bn);if(wn)switch(wn[1]){case"line":var Tn=/(\d+)(\s+\d+)?/.exec(wn[2]);Tn&&(zr=Tn[1]|0,Tn[2]&&(rn=Tn[2]|0,rn in Fr||(Fr[rn]=new F)));break;case"define":var Sn=/SHADER_NAME(_B64)?\s+(.*)$/.exec(wn[2]);Sn&&(Fr[rn].name=Sn[1]?k(Sn[2]):Sn[2]);break}Fr[rn].lines.push(new y(zr++,bn))}return Object.keys(Fr).forEach(function(Nn){var v=Fr[Nn];v.lines.forEach(function(N){v.index[N.number]=N})}),Fr}function W(Rt){var Te=[];return Rt.split(`
`).forEach(function(je){if(!(je.length<5)){var zr=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(je);zr?Te.push(new h(zr[1]|0,zr[2]|0,zr[3].trim())):je.length>0&&Te.push(new h("unknown",0,je))}}),Te}function V(Rt,Te){Te.forEach(function(je){var zr=Rt[je.file];if(zr){var rn=zr.index[je.line];if(rn){rn.errors.push(je),zr.hasErrors=!0;return}}Rt.unknown.hasErrors=!0,Rt.unknown.lines[0].errors.push(je)})}function H(Rt,Te,je,zr,rn){if(!Rt.getShaderParameter(Te,Rt.COMPILE_STATUS)){var Fr=Rt.getShaderInfoLog(Te),Xr=zr===Rt.FRAGMENT_SHADER?"fragment":"vertex";pt(je,"string",Xr+" shader source must be a string",rn);var bn=U(je,rn),wn=W(Fr);V(bn,wn),Object.keys(bn).forEach(function(Tn){var Sn=bn[Tn];if(!Sn.hasErrors)return;var Nn=[""],v=[""];function N(K,st){Nn.push(K),v.push(st||"")}N("file number "+Tn+": "+Sn.name+`
`,"color:red;text-decoration:underline;font-weight:bold"),Sn.lines.forEach(function(K){if(K.errors.length>0){N(D(K.number,4)+"|  ","background-color:yellow; font-weight:bold"),N(K.line+b,"color:red; background-color:yellow; font-weight:bold");var st=0;K.errors.forEach(function(ht){var yt=ht.message,Ot=/^\s*'(.*)'\s*:\s*(.*)$/.exec(yt);if(Ot){var zt=Ot[1];switch(yt=Ot[2],zt){case"assign":zt="=";break}st=Math.max(K.line.indexOf(zt,st),0)}else st=0;N(D("| ",6)),N(D("^^^",st+3)+b,"font-weight:bold"),N(D("| ",6)),N(yt+b,"font-weight:bold")}),N(D("| ",6)+b)}else N(D(K.number,4)+"|  "),N(K.line+b,"color:red")}),typeof document!="undefined"&&!window.chrome?(v[0]=Nn.join("%c"),console.log.apply(console,v)):console.log(Nn.join(""))}),T.raise("Error compiling "+Xr+" shader, "+bn[0].name)}}function Q(Rt,Te,je,zr,rn){if(!Rt.getProgramParameter(Te,Rt.LINK_STATUS)){var Fr=Rt.getProgramInfoLog(Te),Xr=U(je,rn),bn=U(zr,rn),wn='Error linking program with vertex shader, "'+bn[0].name+'", and fragment shader "'+Xr[0].name+'"';typeof document!="undefined"?console.log("%c"+wn+b+"%c"+Fr,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(wn+b+Fr),T.raise(wn)}}function tt(Rt){Rt._commandRef=Y()}function rt(Rt,Te,je,zr){tt(Rt);function rn(wn){return wn?zr.id(wn):0}Rt._fragId=rn(Rt.static.frag),Rt._vertId=rn(Rt.static.vert);function Fr(wn,Tn){Object.keys(Tn).forEach(function(Sn){wn[zr.id(Sn)]=!0})}var Xr=Rt._uniformSet={};Fr(Xr,Te.static),Fr(Xr,Te.dynamic);var bn=Rt._attributeSet={};Fr(bn,je.static),Fr(bn,je.dynamic),Rt._hasCount="count"in Rt.static||"count"in Rt.dynamic||"elements"in Rt.static||"elements"in Rt.dynamic}function ct(Rt,Te){var je=$();w(Rt+" in command "+(Te||Y())+(je==="unknown"?"":" called from "+je))}function ot(Rt,Te,je){Rt||ct(Te,je||Y())}function xt(Rt,Te,je,zr){Rt in Te||ct("unknown parameter ("+Rt+")"+L(je)+". possible values: "+Object.keys(Te).join(),zr||Y())}function pt(Rt,Te,je,zr){m(Rt,Te)||ct("invalid parameter type"+L(je)+". expected "+Te+", got "+typeof Rt,zr||Y())}function Xt(Rt){Rt()}function Ct(Rt,Te,je){Rt.texture?g(Rt.texture._texture.internalformat,Te,"unsupported texture format for attachment"):g(Rt.renderbuffer._renderbuffer.format,je,"unsupported renderbuffer format for attachment")}var At=33071,Z=9728,q=9984,bt=9985,_t=9986,nt=9987,vt=5120,It=5121,Pt=5122,Et=5123,Nt=5124,$t=5125,ue=5126,ie=32819,Dt=32820,ne=33635,pe=34042,Wt=36193,ae={};ae[vt]=ae[It]=1,ae[Pt]=ae[Et]=ae[Wt]=ae[ne]=ae[ie]=ae[Dt]=2,ae[Nt]=ae[$t]=ae[ue]=ae[pe]=4;function Se(Rt,Te){return Rt===Dt||Rt===ie||Rt===ne?2:Rt===pe?4:ae[Rt]*Te}function be(Rt){return!(Rt&Rt-1)&&!!Rt}function Qt(Rt,Te,je){var zr,rn=Te.width,Fr=Te.height,Xr=Te.channels;T(rn>0&&rn<=je.maxTextureSize&&Fr>0&&Fr<=je.maxTextureSize,"invalid texture shape"),(Rt.wrapS!==At||Rt.wrapT!==At)&&T(be(rn)&&be(Fr),"incompatible wrap mode for texture, both width and height must be power of 2"),Te.mipmask===1?rn!==1&&Fr!==1&&T(Rt.minFilter!==q&&Rt.minFilter!==_t&&Rt.minFilter!==bt&&Rt.minFilter!==nt,"min filter requires mipmap"):(T(be(rn)&&be(Fr),"texture must be a square power of 2 to support mipmapping"),T(Te.mipmask===(rn<<1)-1,"missing or incomplete mipmap data")),Te.type===ue&&(je.extensions.indexOf("oes_texture_float_linear")<0&&T(Rt.minFilter===Z&&Rt.magFilter===Z,"filter not supported, must enable oes_texture_float_linear"),T(!Rt.genMipmaps,"mipmap generation not supported with float textures"));var bn=Te.images;for(zr=0;zr<16;++zr)if(bn[zr]){var wn=rn>>zr,Tn=Fr>>zr;T(Te.mipmask&1<<zr,"missing mipmap data");var Sn=bn[zr];if(T(Sn.width===wn&&Sn.height===Tn,"invalid shape for mip images"),T(Sn.format===Te.format&&Sn.internalformat===Te.internalformat&&Sn.type===Te.type,"incompatible type for mip image"),!Sn.compressed)if(Sn.data){var Nn=Math.ceil(Se(Sn.type,Xr)*wn/Sn.unpackAlignment)*Sn.unpackAlignment;T(Sn.data.byteLength===Nn*Tn,"invalid data for image, buffer size is inconsistent with image format")}else Sn.element||Sn.copy}else Rt.genMipmaps||T((Te.mipmask&1<<zr)===0,"extra mipmap data");Te.compressed&&T(!Rt.genMipmaps,"mipmap generation for compressed images not supported")}function we(Rt,Te,je,zr){var rn=Rt.width,Fr=Rt.height,Xr=Rt.channels;T(rn>0&&rn<=zr.maxTextureSize&&Fr>0&&Fr<=zr.maxTextureSize,"invalid texture shape"),T(rn===Fr,"cube map must be square"),T(Te.wrapS===At&&Te.wrapT===At,"wrap mode not supported by cube map");for(var bn=0;bn<je.length;++bn){var wn=je[bn];T(wn.width===rn&&wn.height===Fr,"inconsistent cube map face shape"),Te.genMipmaps&&(T(!wn.compressed,"can not generate mipmap for compressed textures"),T(wn.mipmask===1,"can not specify mipmaps and generate mipmaps"));for(var Tn=wn.images,Sn=0;Sn<16;++Sn){var Nn=Tn[Sn];if(Nn){var v=rn>>Sn,N=Fr>>Sn;T(wn.mipmask&1<<Sn,"missing mipmap data"),T(Nn.width===v&&Nn.height===N,"invalid shape for mip images"),T(Nn.format===Rt.format&&Nn.internalformat===Rt.internalformat&&Nn.type===Rt.type,"incompatible type for mip image"),Nn.compressed||(Nn.data?T(Nn.data.byteLength===v*N*Math.max(Se(Nn.type,Xr),Nn.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format"):Nn.element||Nn.copy)}}}}var Tt=C(T,{optional:Xt,raise:w,commandRaise:ct,command:ot,parameter:P,commandParameter:xt,constructor:E,type:S,commandType:pt,isTypedArray:p,nni:x,oneOf:g,shaderError:H,linkError:Q,callSite:$,saveCommandRef:tt,saveDrawInfo:rt,framebufferFormat:Ct,guessCommand:Y,texture2D:Qt,textureCube:we}),Le=0,Mr=0,Ar=5,Ir=6;function Br(Rt,Te){this.id=Le++,this.type=Rt,this.data=Te}function dn(Rt){return Rt.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function an(Rt){if(Rt.length===0)return[];var Te=Rt.charAt(0),je=Rt.charAt(Rt.length-1);if(Rt.length>1&&Te===je&&(Te==='"'||Te==="'"))return['"'+dn(Rt.substr(1,Rt.length-2))+'"'];var zr=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(Rt);if(zr)return an(Rt.substr(0,zr.index)).concat(an(zr[1])).concat(an(Rt.substr(zr.index+zr[0].length)));var rn=Rt.split(".");if(rn.length===1)return['"'+dn(Rt)+'"'];for(var Fr=[],Xr=0;Xr<rn.length;++Xr)Fr=Fr.concat(an(rn[Xr]));return Fr}function Ln(Rt){return"["+an(Rt).join("][")+"]"}function Un(Rt,Te){return new Br(Rt,Ln(Te+""))}function Yn(Rt){return typeof Rt=="function"&&!Rt._reglType||Rt instanceof Br}function xr(Rt,Te){if(typeof Rt=="function")return new Br(Mr,Rt);if(typeof Rt=="number"||typeof Rt=="boolean")return new Br(Ar,Rt);if(Array.isArray(Rt))return new Br(Ir,Rt.map((je,zr)=>xr(je,Te+"["+zr+"]")));if(Rt instanceof Br)return Rt;Tt(!1,"invalid option type in uniform "+Te)}var qe={DynamicVariable:Br,define:Un,isDynamic:Yn,unbox:xr,accessor:Ln},Cr={next:typeof requestAnimationFrame=="function"?function(Rt){return requestAnimationFrame(Rt)}:function(Rt){return setTimeout(Rt,16)},cancel:typeof cancelAnimationFrame=="function"?function(Rt){return cancelAnimationFrame(Rt)}:clearTimeout},tn=typeof performance!="undefined"&&performance.now?function(){return performance.now()}:function(){return+new Date};function vn(){var Rt={"":0},Te=[""];return{id:function(je){var zr=Rt[je];return zr||(zr=Rt[je]=Te.length,Te.push(je),zr)},str:function(je){return Te[je]}}}function _n(Rt,Te,je){var zr=document.createElement("canvas");C(zr.style,{border:0,margin:0,padding:0,top:0,left:0}),Rt.appendChild(zr),Rt===document.body&&(zr.style.position="absolute",C(Rt.style,{margin:0,padding:0}));function rn(){var bn=window.innerWidth,wn=window.innerHeight;if(Rt!==document.body){var Tn=Rt.getBoundingClientRect();bn=Tn.right-Tn.left,wn=Tn.bottom-Tn.top}zr.width=je*bn,zr.height=je*wn,C(zr.style,{width:bn+"px",height:wn+"px"})}var Fr;Rt!==document.body&&typeof ResizeObserver=="function"?(Fr=new ResizeObserver(function(){setTimeout(rn)}),Fr.observe(Rt)):window.addEventListener("resize",rn,!1);function Xr(){Fr?Fr.disconnect():window.removeEventListener("resize",rn),Rt.removeChild(zr)}return rn(),{canvas:zr,onDestroy:Xr}}function Pn(Rt,Te){function je(zr){try{return Rt.getContext(zr,Te)}catch(rn){return null}}return je("webgl")||je("experimental-webgl")||je("webgl-experimental")}function _r(Rt){return typeof Rt.nodeName=="string"&&typeof Rt.appendChild=="function"&&typeof Rt.getBoundingClientRect=="function"}function un(Rt){return typeof Rt.drawArrays=="function"||typeof Rt.drawElements=="function"}function An(Rt){return typeof Rt=="string"?Rt.split():(Tt(Array.isArray(Rt),"invalid extension array"),Rt)}function on(Rt){return typeof Rt=="string"?(Tt(typeof document!="undefined","not supported outside of DOM"),document.querySelector(Rt)):Rt}function Wn(Rt){var Te=Rt||{},je,zr,rn,Fr,Xr={},bn=[],wn=[],Tn=typeof window=="undefined"?1:window.devicePixelRatio,Sn=!1,Nn=function(K){K&&Tt.raise(K)},v=function(){};if(typeof Te=="string"?(Tt(typeof document!="undefined","selector queries only supported in DOM enviroments"),je=document.querySelector(Te),Tt(je,"invalid query string for element")):typeof Te=="object"?_r(Te)?je=Te:un(Te)?(Fr=Te,rn=Fr.canvas):(Tt.constructor(Te),"gl"in Te?Fr=Te.gl:"canvas"in Te?rn=on(Te.canvas):"container"in Te&&(zr=on(Te.container)),"attributes"in Te&&(Xr=Te.attributes,Tt.type(Xr,"object","invalid context attributes")),"extensions"in Te&&(bn=An(Te.extensions)),"optionalExtensions"in Te&&(wn=An(Te.optionalExtensions)),"onDone"in Te&&(Tt.type(Te.onDone,"function","invalid or missing onDone callback"),Nn=Te.onDone),"profile"in Te&&(Sn=!!Te.profile),"pixelRatio"in Te&&(Tn=+Te.pixelRatio,Tt(Tn>0,"invalid pixel ratio"))):Tt.raise("invalid arguments to regl"),je&&(je.nodeName.toLowerCase()==="canvas"?rn=je:zr=je),!Fr){if(!rn){Tt(typeof document!="undefined","must manually specify webgl context outside of DOM environments");var N=_n(zr||document.body,Nn,Tn);if(!N)return null;rn=N.canvas,v=N.onDestroy}Xr.premultipliedAlpha===void 0&&(Xr.premultipliedAlpha=!0),Fr=Pn(rn,Xr)}return Fr?{gl:Fr,canvas:rn,container:zr,extensions:bn,optionalExtensions:wn,pixelRatio:Tn,profile:Sn,onDone:Nn,onDestroy:v}:(v(),Nn("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function Cn(Rt,Te){var je={};function zr(Xr){Tt.type(Xr,"string","extension name must be string");var bn=Xr.toLowerCase(),wn;try{wn=je[bn]=Rt.getExtension(bn)}catch(Tn){}return!!wn}for(var rn=0;rn<Te.extensions.length;++rn){var Fr=Te.extensions[rn];if(!zr(Fr))return Te.onDestroy(),Te.onDone('"'+Fr+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return Te.optionalExtensions.forEach(zr),{extensions:je,restore:function(){Object.keys(je).forEach(function(Xr){if(je[Xr]&&!zr(Xr))throw new Error("(regl): error restoring extension "+Xr)})}}}function On(Rt,Te){for(var je=Array(Rt),zr=0;zr<Rt;++zr)je[zr]=Te(zr);return je}var jn=5120,at=5121,Ze=5122,qt=5123,Jt=5124,St=5125,Ce=5126;function kt(Rt){for(var Te=16;Te<=1<<28;Te*=16)if(Rt<=Te)return Te;return 0}function Kt(Rt){var Te,je;return Te=(Rt>65535)<<4,Rt>>>=Te,je=(Rt>255)<<3,Rt>>>=je,Te|=je,je=(Rt>15)<<2,Rt>>>=je,Te|=je,je=(Rt>3)<<1,Rt>>>=je,Te|=je,Te|Rt>>1}function dt(){var Rt=On(8,function(){return[]});function Te(Fr){var Xr=kt(Fr),bn=Rt[Kt(Xr)>>2];return bn.length>0?bn.pop():new ArrayBuffer(Xr)}function je(Fr){Rt[Kt(Fr.byteLength)>>2].push(Fr)}function zr(Fr,Xr){var bn=null;switch(Fr){case jn:bn=new Int8Array(Te(Xr),0,Xr);break;case at:bn=new Uint8Array(Te(Xr),0,Xr);break;case Ze:bn=new Int16Array(Te(2*Xr),0,Xr);break;case qt:bn=new Uint16Array(Te(2*Xr),0,Xr);break;case Jt:bn=new Int32Array(Te(4*Xr),0,Xr);break;case St:bn=new Uint32Array(Te(4*Xr),0,Xr);break;case Ce:bn=new Float32Array(Te(4*Xr),0,Xr);break;default:return null}return bn.length!==Xr?bn.subarray(0,Xr):bn}function rn(Fr){je(Fr.buffer)}return{alloc:Te,free:je,allocType:zr,freeType:rn}}var Ut=dt();Ut.zero=dt();var J=3408,it=3410,R=3411,M=3412,O=3413,X=3414,mt=3415,Ft=33901,Bt=33902,re=3379,De=3386,me=34921,Xe=36347,hr=36348,Ke=35661,Lr=35660,cn=34930,$e=36349,lr=34076,Pr=34024,Dr=7936,fe=7937,jt=7938,ve=35724,Ie=34047,ye=36063,ze=34852,sr=3553,pr=34067,en=34069,Fn=33984,ln=6408,ea=5126,fn=5121,Hn=36160,la=36053,xa=36064,ba=16384,Wi=function(Rt,Te){var je=1;Te.ext_texture_filter_anisotropic&&(je=Rt.getParameter(Ie));var zr=1,rn=1;Te.webgl_draw_buffers&&(zr=Rt.getParameter(ze),rn=Rt.getParameter(ye));var Fr=!!Te.oes_texture_float;if(Fr){var Xr=Rt.createTexture();Rt.bindTexture(sr,Xr),Rt.texImage2D(sr,0,ln,1,1,0,ln,ea,null);var bn=Rt.createFramebuffer();if(Rt.bindFramebuffer(Hn,bn),Rt.framebufferTexture2D(Hn,xa,sr,Xr,0),Rt.bindTexture(sr,null),Rt.checkFramebufferStatus(Hn)!==la)Fr=!1;else{Rt.viewport(0,0,1,1),Rt.clearColor(1,0,0,1),Rt.clear(ba);var wn=Ut.allocType(ea,4);Rt.readPixels(0,0,1,1,ln,ea,wn),Rt.getError()?Fr=!1:(Rt.deleteFramebuffer(bn),Rt.deleteTexture(Xr),Fr=wn[0]===1),Ut.freeType(wn)}}var Tn=typeof navigator!="undefined"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent)),Sn=!0;if(!Tn){var Nn=Rt.createTexture(),v=Ut.allocType(fn,36);Rt.activeTexture(Fn),Rt.bindTexture(pr,Nn),Rt.texImage2D(en,0,ln,3,3,0,ln,fn,v),Ut.freeType(v),Rt.bindTexture(pr,null),Rt.deleteTexture(Nn),Sn=!Rt.getError()}return{colorBits:[Rt.getParameter(it),Rt.getParameter(R),Rt.getParameter(M),Rt.getParameter(O)],depthBits:Rt.getParameter(X),stencilBits:Rt.getParameter(mt),subpixelBits:Rt.getParameter(J),extensions:Object.keys(Te).filter(function(N){return!!Te[N]}),maxAnisotropic:je,maxDrawbuffers:zr,maxColorAttachments:rn,pointSizeDims:Rt.getParameter(Ft),lineWidthDims:Rt.getParameter(Bt),maxViewportDims:Rt.getParameter(De),maxCombinedTextureUnits:Rt.getParameter(Ke),maxCubeMapSize:Rt.getParameter(lr),maxRenderbufferSize:Rt.getParameter(Pr),maxTextureUnits:Rt.getParameter(cn),maxTextureSize:Rt.getParameter(re),maxAttributes:Rt.getParameter(me),maxVertexUniforms:Rt.getParameter(Xe),maxVertexTextureUnits:Rt.getParameter(Lr),maxVaryingVectors:Rt.getParameter(hr),maxFragmentUniforms:Rt.getParameter($e),glsl:Rt.getParameter(ve),renderer:Rt.getParameter(fe),vendor:Rt.getParameter(Dr),version:Rt.getParameter(jt),readFloat:Fr,npotTextureCube:Sn}};function ri(Rt){return!!Rt&&typeof Rt=="object"&&Array.isArray(Rt.shape)&&Array.isArray(Rt.stride)&&typeof Rt.offset=="number"&&Rt.shape.length===Rt.stride.length&&(Array.isArray(Rt.data)||z(Rt.data))}var ti=function(Rt){return Object.keys(Rt).map(function(Te){return Rt[Te]})},Si={shape:Io,flatten:so};function Xi(Rt,Te,je){for(var zr=0;zr<Te;++zr)je[zr]=Rt[zr]}function io(Rt,Te,je,zr){for(var rn=0,Fr=0;Fr<Te;++Fr)for(var Xr=Rt[Fr],bn=0;bn<je;++bn)zr[rn++]=Xr[bn]}function oo(Rt,Te,je,zr,rn,Fr){for(var Xr=Fr,bn=0;bn<Te;++bn)for(var wn=Rt[bn],Tn=0;Tn<je;++Tn)for(var Sn=wn[Tn],Nn=0;Nn<zr;++Nn)rn[Xr++]=Sn[Nn]}function Ea(Rt,Te,je,zr,rn){for(var Fr=1,Xr=je+1;Xr<Te.length;++Xr)Fr*=Te[Xr];var bn=Te[je];if(Te.length-je===4){var wn=Te[je+1],Tn=Te[je+2],Sn=Te[je+3];for(Xr=0;Xr<bn;++Xr)oo(Rt[Xr],wn,Tn,Sn,zr,rn),rn+=Fr}else for(Xr=0;Xr<bn;++Xr)Ea(Rt[Xr],Te,je+1,zr,rn),rn+=Fr}function so(Rt,Te,je,zr){var rn=1;if(Te.length)for(var Fr=0;Fr<Te.length;++Fr)rn*=Te[Fr];else rn=0;var Xr=zr||Ut.allocType(je,rn);switch(Te.length){case 0:break;case 1:Xi(Rt,Te[0],Xr);break;case 2:io(Rt,Te[0],Te[1],Xr);break;case 3:oo(Rt,Te[0],Te[1],Te[2],Xr,0);break;default:Ea(Rt,Te,0,Xr,0)}return Xr}function Io(Rt){for(var Te=[],je=Rt;je.length;je=je[0])Te.push(je.length);return Te}var ii={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},Yi=5120,uo=5122,Wo=5124,ro=5121,go=5123,Oo=5125,Yo=5126,Ai=5126,$i={int8:Yi,int16:uo,int32:Wo,uint8:ro,uint16:go,uint32:Oo,float:Yo,float32:Ai},oa=35048,ee=35040,de={dynamic:oa,stream:ee,static:35044},Be=Si.flatten,or=Si.shape,Rr=35044,Nr=35040,Sr=5121,qr=5126,hn=[];hn[5120]=1,hn[5122]=2,hn[5124]=4,hn[5121]=1,hn[5123]=2,hn[5125]=4,hn[5126]=4;function Dn(Rt){return ii[Object.prototype.toString.call(Rt)]|0}function sa(Rt,Te){for(var je=0;je<Te.length;++je)Rt[je]=Te[je]}function qn(Rt,Te,je,zr,rn,Fr,Xr){for(var bn=0,wn=0;wn<je;++wn)for(var Tn=0;Tn<zr;++Tn)Rt[bn++]=Te[rn*wn+Fr*Tn+Xr]}function ga(Rt,Te,je,zr){var rn=0,Fr={};function Xr(st){this.id=rn++,this.buffer=Rt.createBuffer(),this.type=st,this.usage=Rr,this.byteLength=0,this.dimension=1,this.dtype=Sr,this.persistentData=null,je.profile&&(this.stats={size:0})}Xr.prototype.bind=function(){Rt.bindBuffer(this.type,this.buffer)},Xr.prototype.destroy=function(){v(this)};var bn=[];function wn(st,ht){var yt=bn.pop();return yt||(yt=new Xr(st)),yt.bind(),Nn(yt,ht,Nr,0,1,!1),yt}function Tn(st){bn.push(st)}function Sn(st,ht,yt){st.byteLength=ht.byteLength,Rt.bufferData(st.type,ht,yt)}function Nn(st,ht,yt,Ot,zt,Zt){var ce;if(st.usage=yt,Array.isArray(ht)){if(st.dtype=Ot||qr,ht.length>0){var Me;if(Array.isArray(ht[0])){ce=or(ht);for(var xe=1,Ye=1;Ye<ce.length;++Ye)xe*=ce[Ye];st.dimension=xe,Me=Be(ht,ce,st.dtype),Sn(st,Me,yt),Zt?st.persistentData=Me:Ut.freeType(Me)}else if(typeof ht[0]=="number"){st.dimension=zt;var fr=Ut.allocType(st.dtype,ht.length);sa(fr,ht),Sn(st,fr,yt),Zt?st.persistentData=fr:Ut.freeType(fr)}else z(ht[0])?(st.dimension=ht[0].length,st.dtype=Ot||Dn(ht[0])||qr,Me=Be(ht,[ht.length,ht[0].length],st.dtype),Sn(st,Me,yt),Zt?st.persistentData=Me:Ut.freeType(Me)):Tt.raise("invalid buffer data")}}else if(z(ht))st.dtype=Ot||Dn(ht),st.dimension=zt,Sn(st,ht,yt),Zt&&(st.persistentData=new Uint8Array(new Uint8Array(ht.buffer)));else if(ri(ht)){ce=ht.shape;var Vr=ht.stride,mr=ht.offset,br=0,Er=0,Mn=0,Xn=0;ce.length===1?(br=ce[0],Er=1,Mn=Vr[0],Xn=0):ce.length===2?(br=ce[0],Er=ce[1],Mn=Vr[0],Xn=Vr[1]):Tt.raise("invalid shape"),st.dtype=Ot||Dn(ht.data)||qr,st.dimension=Er;var Rn=Ut.allocType(st.dtype,br*Er);qn(Rn,ht.data,br,Er,Mn,Xn,mr),Sn(st,Rn,yt),Zt?st.persistentData=Rn:Ut.freeType(Rn)}else ht instanceof ArrayBuffer?(st.dtype=Sr,st.dimension=zt,Sn(st,ht,yt),Zt&&(st.persistentData=new Uint8Array(new Uint8Array(ht)))):Tt.raise("invalid buffer data")}function v(st){Te.bufferCount--,zr(st);var ht=st.buffer;Tt(ht,"buffer must not be deleted already"),Rt.deleteBuffer(ht),st.buffer=null,delete Fr[st.id]}function N(st,ht,yt,Ot){Te.bufferCount++;var zt=new Xr(ht);Fr[zt.id]=zt;function Zt(xe){var Ye=Rr,fr=null,Vr=0,mr=0,br=1;return Array.isArray(xe)||z(xe)||ri(xe)||xe instanceof ArrayBuffer?fr=xe:typeof xe=="number"?Vr=xe|0:xe&&(Tt.type(xe,"object","buffer arguments must be an object, a number or an array"),"data"in xe&&(Tt(fr===null||Array.isArray(fr)||z(fr)||ri(fr),"invalid data for buffer"),fr=xe.data),"usage"in xe&&(Tt.parameter(xe.usage,de,"invalid buffer usage"),Ye=de[xe.usage]),"type"in xe&&(Tt.parameter(xe.type,$i,"invalid buffer type"),mr=$i[xe.type]),"dimension"in xe&&(Tt.type(xe.dimension,"number","invalid dimension"),br=xe.dimension|0),"length"in xe&&(Tt.nni(Vr,"buffer length must be a nonnegative integer"),Vr=xe.length|0)),zt.bind(),fr?Nn(zt,fr,Ye,mr,br,Ot):(Vr&&Rt.bufferData(zt.type,Vr,Ye),zt.dtype=mr||Sr,zt.usage=Ye,zt.dimension=br,zt.byteLength=Vr),je.profile&&(zt.stats.size=zt.byteLength*hn[zt.dtype]),Zt}function ce(xe,Ye){Tt(Ye+xe.byteLength<=zt.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+xe.byteLength+" starting from offset "+Ye+" to a buffer of size "+zt.byteLength),Rt.bufferSubData(zt.type,Ye,xe)}function Me(xe,Ye){var fr=(Ye||0)|0,Vr;if(zt.bind(),z(xe)||xe instanceof ArrayBuffer)ce(xe,fr);else if(Array.isArray(xe)){if(xe.length>0)if(typeof xe[0]=="number"){var mr=Ut.allocType(zt.dtype,xe.length);sa(mr,xe),ce(mr,fr),Ut.freeType(mr)}else if(Array.isArray(xe[0])||z(xe[0])){Vr=or(xe);var br=Be(xe,Vr,zt.dtype);ce(br,fr),Ut.freeType(br)}else Tt.raise("invalid buffer data")}else if(ri(xe)){Vr=xe.shape;var Er=xe.stride,Mn=0,Xn=0,Rn=0,da=0;Vr.length===1?(Mn=Vr[0],Xn=1,Rn=Er[0],da=0):Vr.length===2?(Mn=Vr[0],Xn=Vr[1],Rn=Er[0],da=Er[1]):Tt.raise("invalid shape");var fa=Array.isArray(xe.data)?zt.dtype:Dn(xe.data),wa=Ut.allocType(fa,Mn*Xn);qn(wa,xe.data,Mn,Xn,Rn,da,xe.offset),ce(wa,fr),Ut.freeType(wa)}else Tt.raise("invalid data for buffer subdata");return Zt}return yt||Zt(st),Zt._reglType="buffer",Zt._buffer=zt,Zt.subdata=Me,je.profile&&(Zt.stats=zt.stats),Zt.destroy=function(){v(zt)},Zt}function K(){ti(Fr).forEach(function(st){st.buffer=Rt.createBuffer(),Rt.bindBuffer(st.type,st.buffer),Rt.bufferData(st.type,st.persistentData||st.byteLength,st.usage)})}return je.profile&&(Te.getTotalBufferSize=function(){var st=0;return Object.keys(Fr).forEach(function(ht){st+=Fr[ht].stats.size}),st}),{create:N,createStream:wn,destroyStream:Tn,clear:function(){ti(Fr).forEach(v),bn.forEach(v)},getBuffer:function(st){return st&&st._buffer instanceof Xr?st._buffer:null},restore:K,_initBuffer:Nn}}var ya=0,di=0,Ma=1,ua=1,ci=4,ei=4,Fa={points:ya,point:di,lines:Ma,line:ua,triangles:ci,triangle:ei,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},Di=0,yi=1,ka=4,ja=5120,Oa=5121,Ni=5122,Mi=5123,Ri=5124,co=5125,qi=34963,mo=35040,ts=35044;function es(Rt,Te,je,zr){var rn={},Fr=0,Xr={uint8:Oa,uint16:Mi};Te.oes_element_index_uint&&(Xr.uint32=co);function bn(K){this.id=Fr++,rn[this.id]=this,this.buffer=K,this.primType=ka,this.vertCount=0,this.type=0}bn.prototype.bind=function(){this.buffer.bind()};var wn=[];function Tn(K){var st=wn.pop();return st||(st=new bn(je.create(null,qi,!0,!1)._buffer)),Nn(st,K,mo,-1,-1,0,0),st}function Sn(K){wn.push(K)}function Nn(K,st,ht,yt,Ot,zt,Zt){K.buffer.bind();var ce;if(st){var Me=Zt;!Zt&&(!z(st)||ri(st)&&!z(st.data))&&(Me=Te.oes_element_index_uint?co:Mi),je._initBuffer(K.buffer,st,ht,Me,3)}else Rt.bufferData(qi,zt,ht),K.buffer.dtype=ce||Oa,K.buffer.usage=ht,K.buffer.dimension=3,K.buffer.byteLength=zt;if(ce=Zt,!Zt){switch(K.buffer.dtype){case Oa:case ja:ce=Oa;break;case Mi:case Ni:ce=Mi;break;case co:case Ri:ce=co;break;default:Tt.raise("unsupported type for element array")}K.buffer.dtype=ce}K.type=ce,Tt(ce!==co||!!Te.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");var xe=Ot;xe<0&&(xe=K.buffer.byteLength,ce===Mi?xe>>=1:ce===co&&(xe>>=2)),K.vertCount=xe;var Ye=yt;if(yt<0){Ye=ka;var fr=K.buffer.dimension;fr===1&&(Ye=Di),fr===2&&(Ye=yi),fr===3&&(Ye=ka)}K.primType=Ye}function v(K){zr.elementsCount--,Tt(K.buffer!==null,"must not double destroy elements"),delete rn[K.id],K.buffer.destroy(),K.buffer=null}function N(K,st){var ht=je.create(null,qi,!0),yt=new bn(ht._buffer);zr.elementsCount++;function Ot(zt){if(!zt)ht(),yt.primType=ka,yt.vertCount=0,yt.type=Oa;else if(typeof zt=="number")ht(zt),yt.primType=ka,yt.vertCount=zt|0,yt.type=Oa;else{var Zt=null,ce=ts,Me=-1,xe=-1,Ye=0,fr=0;Array.isArray(zt)||z(zt)||ri(zt)?Zt=zt:(Tt.type(zt,"object","invalid arguments for elements"),"data"in zt&&(Zt=zt.data,Tt(Array.isArray(Zt)||z(Zt)||ri(Zt),"invalid data for element buffer")),"usage"in zt&&(Tt.parameter(zt.usage,de,"invalid element buffer usage"),ce=de[zt.usage]),"primitive"in zt&&(Tt.parameter(zt.primitive,Fa,"invalid element buffer primitive"),Me=Fa[zt.primitive]),"count"in zt&&(Tt(typeof zt.count=="number"&&zt.count>=0,"invalid vertex count for elements"),xe=zt.count|0),"type"in zt&&(Tt.parameter(zt.type,Xr,"invalid buffer type"),fr=Xr[zt.type]),"length"in zt?Ye=zt.length|0:(Ye=xe,fr===Mi||fr===Ni?Ye*=2:(fr===co||fr===Ri)&&(Ye*=4))),Nn(yt,Zt,ce,Me,xe,Ye,fr)}return Ot}return Ot(K),Ot._reglType="elements",Ot._elements=yt,Ot.subdata=function(zt,Zt){return ht.subdata(zt,Zt),Ot},Ot.destroy=function(){v(yt)},Ot}return{create:N,createStream:Tn,destroyStream:Sn,getElements:function(K){return typeof K=="function"&&K._elements instanceof bn?K._elements:null},clear:function(){ti(rn).forEach(v)}}}var no=new Float32Array(1),ni=new Uint32Array(no.buffer),Fi=5123;function fo(Rt){for(var Te=Ut.allocType(Fi,Rt.length),je=0;je<Rt.length;++je)if(isNaN(Rt[je]))Te[je]=65535;else if(Rt[je]===1/0)Te[je]=31744;else if(Rt[je]===-1/0)Te[je]=64512;else{no[0]=Rt[je];var zr=ni[0],rn=zr>>>31<<15,Fr=(zr<<1>>>24)-127,Xr=zr>>13&1024-1;if(Fr<-24)Te[je]=rn;else if(Fr<-14){var bn=-14-Fr;Te[je]=rn+(Xr+1024>>bn)}else Fr>15?Te[je]=rn+31744:Te[je]=rn+(Fr+15<<10)+Xr}return Te}function Ya(Rt){return Array.isArray(Rt)||z(Rt)}var yo=function(Rt){return!(Rt&Rt-1)&&!!Rt},ko=34467,ji=3553,is=34067,zi=34069,Bo=6408,cs=6406,Cs=6407,xo=6409,fs=6410,ls=32854,Ds=32855,Aa=36194,Yt=32819,Ge=32820,nr=33635,gr=34042,Zr=6402,pn=34041,$n=35904,qa=35906,ki=36193,Do=33776,Ho=33777,ks=33778,Qi=33779,Lo=35986,ds=35987,Bs=34798,ps=35840,Vs=35841,qs=35842,Hs=35843,fu=36196,gs=5121,Ls=5123,Fs=5125,os=5126,_u=10242,Cu=10243,bo=10497,Zo=33071,ss=33648,d=10240,G=10241,wt=9728,Gt=9729,te=9984,he=9985,ge=9986,Oe=9987,Fe=33170,He=4352,ur=4353,Ur=4354,jr=34046,Wr=3317,mn=37440,Bn=37441,Qr=37443,na=37444,Va=33984,Ha=[te,ge,he,Oe],za=[0,xo,fs,Cs,Bo],_a={};_a[xo]=_a[cs]=_a[Zr]=1,_a[pn]=_a[fs]=2,_a[Cs]=_a[$n]=3,_a[Bo]=_a[qa]=4;function Na(Rt){return"[object "+Rt+"]"}var Po=Na("HTMLCanvasElement"),Mo=Na("OffscreenCanvas"),Eo=Na("CanvasRenderingContext2D"),_o=Na("ImageBitmap"),Co=Na("HTMLImageElement"),Fo=Na("HTMLVideoElement"),zo=Object.keys(ii).concat([Po,Mo,Eo,_o,Co,Fo]),fi=[];fi[gs]=1,fi[os]=4,fi[ki]=2,fi[Ls]=2,fi[Fs]=4;var Bi=[];Bi[ls]=2,Bi[Ds]=2,Bi[Aa]=2,Bi[pn]=4,Bi[Do]=.5,Bi[Ho]=.5,Bi[ks]=1,Bi[Qi]=1,Bi[Lo]=.5,Bi[ds]=1,Bi[Bs]=1,Bi[ps]=.5,Bi[Vs]=.25,Bi[qs]=.5,Bi[Hs]=.25,Bi[fu]=.5;function Qs(Rt){return Array.isArray(Rt)&&(Rt.length===0||typeof Rt[0]=="number")}function zs(Rt){if(!Array.isArray(Rt))return!1;var Te=Rt.length;return!(Te===0||!Ya(Rt[0]))}function Ts(Rt){return Object.prototype.toString.call(Rt)}function lu(Rt){return Ts(Rt)===Po}function Rc(Rt){return Ts(Rt)===Mo}function mf(Rt){return Ts(Rt)===Eo}function yf(Rt){return Ts(Rt)===_o}function kc(Rt){return Ts(Rt)===Co}function ol(Rt){return Ts(Rt)===Fo}function Bc(Rt){if(!Rt)return!1;var Te=Ts(Rt);return zo.indexOf(Te)>=0?!0:Qs(Rt)||zs(Rt)||ri(Rt)}function Xu(Rt){return ii[Object.prototype.toString.call(Rt)]|0}function ju(Rt,Te){var je=Te.length;switch(Rt.type){case gs:case Ls:case Fs:case os:var zr=Ut.allocType(Rt.type,je);zr.set(Te),Rt.data=zr;break;case ki:Rt.data=fo(Te);break;default:Tt.raise("unsupported texture type, must specify a typed array")}}function Fc(Rt,Te){return Ut.allocType(Rt.type===ki?os:Rt.type,Te)}function xf(Rt,Te){Rt.type===ki?(Rt.data=fo(Te),Ut.freeType(Te)):Rt.data=Te}function sl(Rt,Te,je,zr,rn,Fr){for(var Xr=Rt.width,bn=Rt.height,wn=Rt.channels,Tn=Xr*bn*wn,Sn=Fc(Rt,Tn),Nn=0,v=0;v<bn;++v)for(var N=0;N<Xr;++N)for(var K=0;K<wn;++K)Sn[Nn++]=Te[je*N+zr*v+rn*K+Fr];xf(Rt,Sn)}function du(Rt,Te,je,zr,rn,Fr){var Xr;if(typeof Bi[Rt]!="undefined"?Xr=Bi[Rt]:Xr=_a[Rt]*fi[Te],Fr&&(Xr*=6),rn){for(var bn=0,wn=je;wn>=1;)bn+=Xr*wn*wn,wn/=2;return bn}else return Xr*je*zr}function bf(Rt,Te,je,zr,rn,Fr,Xr){var bn={"don't care":He,"dont care":He,nice:Ur,fast:ur},wn={repeat:bo,clamp:Zo,mirror:ss},Tn={nearest:wt,linear:Gt},Sn=C({mipmap:Oe,"nearest mipmap nearest":te,"linear mipmap nearest":he,"nearest mipmap linear":ge,"linear mipmap linear":Oe},Tn),Nn={none:0,browser:na},v={uint8:gs,rgba4:Yt,rgb565:nr,"rgb5 a1":Ge},N={alpha:cs,luminance:xo,"luminance alpha":fs,rgb:Cs,rgba:Bo,rgba4:ls,"rgb5 a1":Ds,rgb565:Aa},K={};Te.ext_srgb&&(N.srgb=$n,N.srgba=qa),Te.oes_texture_float&&(v.float32=v.float=os),Te.oes_texture_half_float&&(v.float16=v["half float"]=ki),Te.webgl_depth_texture&&(C(N,{depth:Zr,"depth stencil":pn}),C(v,{uint16:Ls,uint32:Fs,"depth stencil":gr})),Te.webgl_compressed_texture_s3tc&&C(K,{"rgb s3tc dxt1":Do,"rgba s3tc dxt1":Ho,"rgba s3tc dxt3":ks,"rgba s3tc dxt5":Qi}),Te.webgl_compressed_texture_atc&&C(K,{"rgb atc":Lo,"rgba atc explicit alpha":ds,"rgba atc interpolated alpha":Bs}),Te.webgl_compressed_texture_pvrtc&&C(K,{"rgb pvrtc 4bppv1":ps,"rgb pvrtc 2bppv1":Vs,"rgba pvrtc 4bppv1":qs,"rgba pvrtc 2bppv1":Hs}),Te.webgl_compressed_texture_etc1&&(K["rgb etc1"]=fu);var st=Array.prototype.slice.call(Rt.getParameter(ko));Object.keys(K).forEach(function(We){var Yr=K[We];st.indexOf(Yr)>=0&&(N[We]=Yr)});var ht=Object.keys(N);je.textureFormats=ht;var yt=[];Object.keys(N).forEach(function(We){var Yr=N[We];yt[Yr]=We});var Ot=[];Object.keys(v).forEach(function(We){var Yr=v[We];Ot[Yr]=We});var zt=[];Object.keys(Tn).forEach(function(We){var Yr=Tn[We];zt[Yr]=We});var Zt=[];Object.keys(Sn).forEach(function(We){var Yr=Sn[We];Zt[Yr]=We});var ce=[];Object.keys(wn).forEach(function(We){var Yr=wn[We];ce[Yr]=We});var Me=ht.reduce(function(We,Yr){var kr=N[Yr];return kr===xo||kr===cs||kr===xo||kr===fs||kr===Zr||kr===pn||Te.ext_srgb&&(kr===$n||kr===qa)?We[kr]=kr:kr===Ds||Yr.indexOf("rgba")>=0?We[kr]=Bo:We[kr]=Cs,We},{});function xe(){this.internalformat=Bo,this.format=Bo,this.type=gs,this.compressed=!1,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.colorSpace=na,this.width=0,this.height=0,this.channels=0}function Ye(We,Yr){We.internalformat=Yr.internalformat,We.format=Yr.format,We.type=Yr.type,We.compressed=Yr.compressed,We.premultiplyAlpha=Yr.premultiplyAlpha,We.flipY=Yr.flipY,We.unpackAlignment=Yr.unpackAlignment,We.colorSpace=Yr.colorSpace,We.width=Yr.width,We.height=Yr.height,We.channels=Yr.channels}function fr(We,Yr){if(!(typeof Yr!="object"||!Yr)){if("premultiplyAlpha"in Yr&&(Tt.type(Yr.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),We.premultiplyAlpha=Yr.premultiplyAlpha),"flipY"in Yr&&(Tt.type(Yr.flipY,"boolean","invalid texture flip"),We.flipY=Yr.flipY),"alignment"in Yr&&(Tt.oneOf(Yr.alignment,[1,2,4,8],"invalid texture unpack alignment"),We.unpackAlignment=Yr.alignment),"colorSpace"in Yr&&(Tt.parameter(Yr.colorSpace,Nn,"invalid colorSpace"),We.colorSpace=Nn[Yr.colorSpace]),"type"in Yr){var kr=Yr.type;Tt(Te.oes_texture_float||!(kr==="float"||kr==="float32"),"you must enable the OES_texture_float extension in order to use floating point textures."),Tt(Te.oes_texture_half_float||!(kr==="half float"||kr==="float16"),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures."),Tt(Te.webgl_depth_texture||!(kr==="uint16"||kr==="uint32"||kr==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),Tt.parameter(kr,v,"invalid texture type"),We.type=v[kr]}var ra=We.width,oi=We.height,Re=We.channels,Ee=!1;"shape"in Yr?(Tt(Array.isArray(Yr.shape)&&Yr.shape.length>=2,"shape must be an array"),ra=Yr.shape[0],oi=Yr.shape[1],Yr.shape.length===3&&(Re=Yr.shape[2],Tt(Re>0&&Re<=4,"invalid number of channels"),Ee=!0),Tt(ra>=0&&ra<=je.maxTextureSize,"invalid width"),Tt(oi>=0&&oi<=je.maxTextureSize,"invalid height")):("radius"in Yr&&(ra=oi=Yr.radius,Tt(ra>=0&&ra<=je.maxTextureSize,"invalid radius")),"width"in Yr&&(ra=Yr.width,Tt(ra>=0&&ra<=je.maxTextureSize,"invalid width")),"height"in Yr&&(oi=Yr.height,Tt(oi>=0&&oi<=je.maxTextureSize,"invalid height")),"channels"in Yr&&(Re=Yr.channels,Tt(Re>0&&Re<=4,"invalid number of channels"),Ee=!0)),We.width=ra|0,We.height=oi|0,We.channels=Re|0;var Je=!1;if("format"in Yr){var wr=Yr.format;Tt(Te.webgl_depth_texture||!(wr==="depth"||wr==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),Tt.parameter(wr,N,"invalid texture format");var Tr=We.internalformat=N[wr];We.format=Me[Tr],wr in v&&("type"in Yr||(We.type=v[wr])),wr in K&&(We.compressed=!0),Je=!0}!Ee&&Je?We.channels=_a[We.format]:Ee&&!Je?We.channels!==za[We.format]&&(We.format=We.internalformat=za[We.channels]):Je&&Ee&&Tt(We.channels===_a[We.format],"number of channels inconsistent with specified format")}}function Vr(We){Rt.pixelStorei(mn,We.flipY),Rt.pixelStorei(Bn,We.premultiplyAlpha),Rt.pixelStorei(Qr,We.colorSpace),Rt.pixelStorei(Wr,We.unpackAlignment)}function mr(){xe.call(this),this.xOffset=0,this.yOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function br(We,Yr){var kr=null;if(Bc(Yr)?kr=Yr:Yr&&(Tt.type(Yr,"object","invalid pixel data type"),fr(We,Yr),"x"in Yr&&(We.xOffset=Yr.x|0),"y"in Yr&&(We.yOffset=Yr.y|0),Bc(Yr.data)&&(kr=Yr.data)),Tt(!We.compressed||kr instanceof Uint8Array,"compressed texture data must be stored in a uint8array"),Yr.copy){Tt(!kr,"can not specify copy and data field for the same texture");var ra=rn.viewportWidth,oi=rn.viewportHeight;We.width=We.width||ra-We.xOffset,We.height=We.height||oi-We.yOffset,We.needsCopy=!0,Tt(We.xOffset>=0&&We.xOffset<ra&&We.yOffset>=0&&We.yOffset<oi&&We.width>0&&We.width<=ra&&We.height>0&&We.height<=oi,"copy texture read out of bounds")}else if(!kr)We.width=We.width||1,We.height=We.height||1,We.channels=We.channels||4;else if(z(kr))We.channels=We.channels||4,We.data=kr,!("type"in Yr)&&We.type===gs&&(We.type=Xu(kr));else if(Qs(kr))We.channels=We.channels||4,ju(We,kr),We.alignment=1,We.needsFree=!0;else if(ri(kr)){var Re=kr.data;!Array.isArray(Re)&&We.type===gs&&(We.type=Xu(Re));var Ee=kr.shape,Je=kr.stride,wr,Tr,ar,rr,vr,ke;Ee.length===3?(ar=Ee[2],ke=Je[2]):(Tt(Ee.length===2,"invalid ndarray pixel data, must be 2 or 3D"),ar=1,ke=1),wr=Ee[0],Tr=Ee[1],rr=Je[0],vr=Je[1],We.alignment=1,We.width=wr,We.height=Tr,We.channels=ar,We.format=We.internalformat=za[ar],We.needsFree=!0,sl(We,Re,rr,vr,ke,kr.offset)}else if(lu(kr)||Rc(kr)||mf(kr))lu(kr)||Rc(kr)?We.element=kr:We.element=kr.canvas,We.width=We.element.width,We.height=We.element.height,We.channels=4;else if(yf(kr))We.element=kr,We.width=kr.width,We.height=kr.height,We.channels=4;else if(kc(kr))We.element=kr,We.width=kr.naturalWidth,We.height=kr.naturalHeight,We.channels=4;else if(ol(kr))We.element=kr,We.width=kr.videoWidth,We.height=kr.videoHeight,We.channels=4;else if(zs(kr)){var tr=We.width||kr[0].length,Pe=We.height||kr.length,yr=We.channels;Ya(kr[0][0])?yr=yr||kr[0][0].length:yr=yr||1;for(var Or=Si.shape(kr),Jr=1,sn=0;sn<Or.length;++sn)Jr*=Or[sn];var Hr=Fc(We,Jr);Si.flatten(kr,Or,"",Hr),xf(We,Hr),We.alignment=1,We.width=tr,We.height=Pe,We.channels=yr,We.format=We.internalformat=za[yr],We.needsFree=!0}We.type===os?Tt(je.extensions.indexOf("oes_texture_float")>=0,"oes_texture_float extension not enabled"):We.type===ki&&Tt(je.extensions.indexOf("oes_texture_half_float")>=0,"oes_texture_half_float extension not enabled")}function Er(We,Yr,kr){var ra=We.element,oi=We.data,Re=We.internalformat,Ee=We.format,Je=We.type,wr=We.width,Tr=We.height;Vr(We),ra?Rt.texImage2D(Yr,kr,Ee,Ee,Je,ra):We.compressed?Rt.compressedTexImage2D(Yr,kr,Re,wr,Tr,0,oi):We.needsCopy?(zr(),Rt.copyTexImage2D(Yr,kr,Ee,We.xOffset,We.yOffset,wr,Tr,0)):Rt.texImage2D(Yr,kr,Ee,wr,Tr,0,Ee,Je,oi||null)}function Mn(We,Yr,kr,ra,oi){var Re=We.element,Ee=We.data,Je=We.internalformat,wr=We.format,Tr=We.type,ar=We.width,rr=We.height;Vr(We),Re?Rt.texSubImage2D(Yr,oi,kr,ra,wr,Tr,Re):We.compressed?Rt.compressedTexSubImage2D(Yr,oi,kr,ra,Je,ar,rr,Ee):We.needsCopy?(zr(),Rt.copyTexSubImage2D(Yr,oi,kr,ra,We.xOffset,We.yOffset,ar,rr)):Rt.texSubImage2D(Yr,oi,kr,ra,ar,rr,wr,Tr,Ee)}var Xn=[];function Rn(){return Xn.pop()||new mr}function da(We){We.needsFree&&Ut.freeType(We.data),mr.call(We),Xn.push(We)}function fa(){xe.call(this),this.genMipmaps=!1,this.mipmapHint=He,this.mipmask=0,this.images=Array(16)}function wa(We,Yr,kr){var ra=We.images[0]=Rn();We.mipmask=1,ra.width=We.width=Yr,ra.height=We.height=kr,ra.channels=We.channels=4}function Ba(We,Yr){var kr=null;if(Bc(Yr))kr=We.images[0]=Rn(),Ye(kr,We),br(kr,Yr),We.mipmask=1;else if(fr(We,Yr),Array.isArray(Yr.mipmap))for(var ra=Yr.mipmap,oi=0;oi<ra.length;++oi)kr=We.images[oi]=Rn(),Ye(kr,We),kr.width>>=oi,kr.height>>=oi,br(kr,ra[oi]),We.mipmask|=1<<oi;else kr=We.images[0]=Rn(),Ye(kr,We),br(kr,Yr),We.mipmask=1;Ye(We,We.images[0]),We.compressed&&(We.internalformat===Do||We.internalformat===Ho||We.internalformat===ks||We.internalformat===Qi)&&Tt(We.width%4===0&&We.height%4===0,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function Da(We,Yr){for(var kr=We.images,ra=0;ra<kr.length;++ra){if(!kr[ra])return;Er(kr[ra],Yr,ra)}}var vo=[];function Wa(){var We=vo.pop()||new fa;xe.call(We),We.mipmask=0;for(var Yr=0;Yr<16;++Yr)We.images[Yr]=null;return We}function Go(We){for(var Yr=We.images,kr=0;kr<Yr.length;++kr)Yr[kr]&&da(Yr[kr]),Yr[kr]=null;vo.push(We)}function Hi(){this.minFilter=wt,this.magFilter=wt,this.wrapS=Zo,this.wrapT=Zo,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=He}function vi(We,Yr){if("min"in Yr){var kr=Yr.min;Tt.parameter(kr,Sn),We.minFilter=Sn[kr],Ha.indexOf(We.minFilter)>=0&&!("faces"in Yr)&&(We.genMipmaps=!0)}if("mag"in Yr){var ra=Yr.mag;Tt.parameter(ra,Tn),We.magFilter=Tn[ra]}var oi=We.wrapS,Re=We.wrapT;if("wrap"in Yr){var Ee=Yr.wrap;typeof Ee=="string"?(Tt.parameter(Ee,wn),oi=Re=wn[Ee]):Array.isArray(Ee)&&(Tt.parameter(Ee[0],wn),Tt.parameter(Ee[1],wn),oi=wn[Ee[0]],Re=wn[Ee[1]])}else{if("wrapS"in Yr){var Je=Yr.wrapS;Tt.parameter(Je,wn),oi=wn[Je]}if("wrapT"in Yr){var wr=Yr.wrapT;Tt.parameter(wr,wn),Re=wn[wr]}}if(We.wrapS=oi,We.wrapT=Re,"anisotropic"in Yr){var Tr=Yr.anisotropic;Tt(typeof Tr=="number"&&Tr>=1&&Tr<=je.maxAnisotropic,"aniso samples must be between 1 and "),We.anisotropic=Yr.anisotropic}if("mipmap"in Yr){var ar=!1;switch(typeof Yr.mipmap){case"string":Tt.parameter(Yr.mipmap,bn,"invalid mipmap hint"),We.mipmapHint=bn[Yr.mipmap],We.genMipmaps=!0,ar=!0;break;case"boolean":ar=We.genMipmaps=Yr.mipmap;break;case"object":Tt(Array.isArray(Yr.mipmap),"invalid mipmap type"),We.genMipmaps=!1,ar=!0;break;default:Tt.raise("invalid mipmap type")}ar&&!("min"in Yr)&&(We.minFilter=te)}}function ao(We,Yr){Rt.texParameteri(Yr,G,We.minFilter),Rt.texParameteri(Yr,d,We.magFilter),Rt.texParameteri(Yr,_u,We.wrapS),Rt.texParameteri(Yr,Cu,We.wrapT),Te.ext_texture_filter_anisotropic&&Rt.texParameteri(Yr,jr,We.anisotropic),We.genMipmaps&&(Rt.hint(Fe,We.mipmapHint),Rt.generateMipmap(Yr))}var Uo=0,ns={},vs=je.maxTextureUnits,qo=Array(vs).map(function(){return null});function $a(We){xe.call(this),this.mipmask=0,this.internalformat=Bo,this.id=Uo++,this.refCount=1,this.target=We,this.texture=Rt.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new Hi,Xr.profile&&(this.stats={size:0})}function ys(We){Rt.activeTexture(Va),Rt.bindTexture(We.target,We.texture)}function Ei(){var We=qo[0];We?Rt.bindTexture(We.target,We.texture):Rt.bindTexture(ji,null)}function Sa(We){var Yr=We.texture;Tt(Yr,"must not double destroy texture");var kr=We.unit,ra=We.target;kr>=0&&(Rt.activeTexture(Va+kr),Rt.bindTexture(ra,null),qo[kr]=null),Rt.deleteTexture(Yr),We.texture=null,We.params=null,We.pixels=null,We.refCount=0,delete ns[We.id],Fr.textureCount--}C($a.prototype,{bind:function(){var We=this;We.bindCount+=1;var Yr=We.unit;if(Yr<0){for(var kr=0;kr<vs;++kr){var ra=qo[kr];if(ra){if(ra.bindCount>0)continue;ra.unit=-1}qo[kr]=We,Yr=kr;break}Yr>=vs&&Tt.raise("insufficient number of texture units"),Xr.profile&&Fr.maxTextureUnits<Yr+1&&(Fr.maxTextureUnits=Yr+1),We.unit=Yr,Rt.activeTexture(Va+Yr),Rt.bindTexture(We.target,We.texture)}return Yr},unbind:function(){this.bindCount-=1},decRef:function(){--this.refCount<=0&&Sa(this)}});function li(We,Yr){var kr=new $a(ji);ns[kr.id]=kr,Fr.textureCount++;function ra(Ee,Je){var wr=kr.texInfo;Hi.call(wr);var Tr=Wa();return typeof Ee=="number"?typeof Je=="number"?wa(Tr,Ee|0,Je|0):wa(Tr,Ee|0,Ee|0):Ee?(Tt.type(Ee,"object","invalid arguments to regl.texture"),vi(wr,Ee),Ba(Tr,Ee)):wa(Tr,1,1),wr.genMipmaps&&(Tr.mipmask=(Tr.width<<1)-1),kr.mipmask=Tr.mipmask,Ye(kr,Tr),Tt.texture2D(wr,Tr,je),kr.internalformat=Tr.internalformat,ra.width=Tr.width,ra.height=Tr.height,ys(kr),Da(Tr,ji),ao(wr,ji),Ei(),Go(Tr),Xr.profile&&(kr.stats.size=du(kr.internalformat,kr.type,Tr.width,Tr.height,wr.genMipmaps,!1)),ra.format=yt[kr.internalformat],ra.type=Ot[kr.type],ra.mag=zt[wr.magFilter],ra.min=Zt[wr.minFilter],ra.wrapS=ce[wr.wrapS],ra.wrapT=ce[wr.wrapT],ra}function oi(Ee,Je,wr,Tr){Tt(!!Ee,"must specify image data");var ar=Je|0,rr=wr|0,vr=Tr|0,ke=Rn();return Ye(ke,kr),ke.width=0,ke.height=0,br(ke,Ee),ke.width=ke.width||(kr.width>>vr)-ar,ke.height=ke.height||(kr.height>>vr)-rr,Tt(kr.type===ke.type&&kr.format===ke.format&&kr.internalformat===ke.internalformat,"incompatible format for texture.subimage"),Tt(ar>=0&&rr>=0&&ar+ke.width<=kr.width&&rr+ke.height<=kr.height,"texture.subimage write out of bounds"),Tt(kr.mipmask&1<<vr,"missing mipmap data"),Tt(ke.data||ke.element||ke.needsCopy,"missing image data"),ys(kr),Mn(ke,ji,ar,rr,vr),Ei(),da(ke),ra}function Re(Ee,Je){var wr=Ee|0,Tr=Je|0||wr;if(wr===kr.width&&Tr===kr.height)return ra;ra.width=kr.width=wr,ra.height=kr.height=Tr,ys(kr);for(var ar=0;kr.mipmask>>ar;++ar){var rr=wr>>ar,vr=Tr>>ar;if(!rr||!vr)break;Rt.texImage2D(ji,ar,kr.format,rr,vr,0,kr.format,kr.type,null)}return Ei(),Xr.profile&&(kr.stats.size=du(kr.internalformat,kr.type,wr,Tr,!1,!1)),ra}return ra(We,Yr),ra.subimage=oi,ra.resize=Re,ra._reglType="texture2d",ra._texture=kr,Xr.profile&&(ra.stats=kr.stats),ra.destroy=function(){kr.decRef()},ra}function bi(We,Yr,kr,ra,oi,Re){var Ee=new $a(is);ns[Ee.id]=Ee,Fr.cubeCount++;var Je=new Array(6);function wr(rr,vr,ke,tr,Pe,yr){var Or,Jr=Ee.texInfo;for(Hi.call(Jr),Or=0;Or<6;++Or)Je[Or]=Wa();if(typeof rr=="number"||!rr){var sn=rr|0||1;for(Or=0;Or<6;++Or)wa(Je[Or],sn,sn)}else if(typeof rr=="object")if(vr)Ba(Je[0],rr),Ba(Je[1],vr),Ba(Je[2],ke),Ba(Je[3],tr),Ba(Je[4],Pe),Ba(Je[5],yr);else if(vi(Jr,rr),fr(Ee,rr),"faces"in rr){var Hr=rr.faces;for(Tt(Array.isArray(Hr)&&Hr.length===6,"cube faces must be a length 6 array"),Or=0;Or<6;++Or)Tt(typeof Hr[Or]=="object"&&!!Hr[Or],"invalid input for cube map face"),Ye(Je[Or],Ee),Ba(Je[Or],Hr[Or])}else for(Or=0;Or<6;++Or)Ba(Je[Or],rr);else Tt.raise("invalid arguments to cube map");for(Ye(Ee,Je[0]),je.npotTextureCube||Tt(yo(Ee.width)&&yo(Ee.height),"your browser does not support non power or two texture dimensions"),Jr.genMipmaps?Ee.mipmask=(Je[0].width<<1)-1:Ee.mipmask=Je[0].mipmask,Tt.textureCube(Ee,Jr,Je,je),Ee.internalformat=Je[0].internalformat,wr.width=Je[0].width,wr.height=Je[0].height,ys(Ee),Or=0;Or<6;++Or)Da(Je[Or],zi+Or);for(ao(Jr,is),Ei(),Xr.profile&&(Ee.stats.size=du(Ee.internalformat,Ee.type,wr.width,wr.height,Jr.genMipmaps,!0)),wr.format=yt[Ee.internalformat],wr.type=Ot[Ee.type],wr.mag=zt[Jr.magFilter],wr.min=Zt[Jr.minFilter],wr.wrapS=ce[Jr.wrapS],wr.wrapT=ce[Jr.wrapT],Or=0;Or<6;++Or)Go(Je[Or]);return wr}function Tr(rr,vr,ke,tr,Pe){Tt(!!vr,"must specify image data"),Tt(typeof rr=="number"&&rr===(rr|0)&&rr>=0&&rr<6,"invalid face");var yr=ke|0,Or=tr|0,Jr=Pe|0,sn=Rn();return Ye(sn,Ee),sn.width=0,sn.height=0,br(sn,vr),sn.width=sn.width||(Ee.width>>Jr)-yr,sn.height=sn.height||(Ee.height>>Jr)-Or,Tt(Ee.type===sn.type&&Ee.format===sn.format&&Ee.internalformat===sn.internalformat,"incompatible format for texture.subimage"),Tt(yr>=0&&Or>=0&&yr+sn.width<=Ee.width&&Or+sn.height<=Ee.height,"texture.subimage write out of bounds"),Tt(Ee.mipmask&1<<Jr,"missing mipmap data"),Tt(sn.data||sn.element||sn.needsCopy,"missing image data"),ys(Ee),Mn(sn,zi+rr,yr,Or,Jr),Ei(),da(sn),wr}function ar(rr){var vr=rr|0;if(vr!==Ee.width){wr.width=Ee.width=vr,wr.height=Ee.height=vr,ys(Ee);for(var ke=0;ke<6;++ke)for(var tr=0;Ee.mipmask>>tr;++tr)Rt.texImage2D(zi+ke,tr,Ee.format,vr>>tr,vr>>tr,0,Ee.format,Ee.type,null);return Ei(),Xr.profile&&(Ee.stats.size=du(Ee.internalformat,Ee.type,wr.width,wr.height,!1,!0)),wr}}return wr(We,Yr,kr,ra,oi,Re),wr.subimage=Tr,wr.resize=ar,wr._reglType="textureCube",wr._texture=Ee,Xr.profile&&(wr.stats=Ee.stats),wr.destroy=function(){Ee.decRef()},wr}function Qo(){for(var We=0;We<vs;++We)Rt.activeTexture(Va+We),Rt.bindTexture(ji,null),qo[We]=null;ti(ns).forEach(Sa),Fr.cubeCount=0,Fr.textureCount=0}Xr.profile&&(Fr.getTotalTextureSize=function(){var We=0;return Object.keys(ns).forEach(function(Yr){We+=ns[Yr].stats.size}),We});function ku(){for(var We=0;We<vs;++We){var Yr=qo[We];Yr&&(Yr.bindCount=0,Yr.unit=-1,qo[We]=null)}ti(ns).forEach(function(kr){kr.texture=Rt.createTexture(),Rt.bindTexture(kr.target,kr.texture);for(var ra=0;ra<32;++ra)if(kr.mipmask&1<<ra)if(kr.target===ji)Rt.texImage2D(ji,ra,kr.internalformat,kr.width>>ra,kr.height>>ra,0,kr.internalformat,kr.type,null);else for(var oi=0;oi<6;++oi)Rt.texImage2D(zi+oi,ra,kr.internalformat,kr.width>>ra,kr.height>>ra,0,kr.internalformat,kr.type,null);ao(kr.texInfo,kr.target)})}function $f(){for(var We=0;We<vs;++We){var Yr=qo[We];Yr&&(Yr.bindCount=0,Yr.unit=-1,qo[We]=null),Rt.activeTexture(Va+We),Rt.bindTexture(ji,null),Rt.bindTexture(is,null)}}return{create2D:li,createCube:bi,clear:Qo,getTexture:function(We){return null},restore:ku,refresh:$f}}var ta=36161,Tu=32854,ui=32855,zc=36194,Au=33189,au=36168,Gc=34041,oc=35907,sc=34836,Uc=34842,Ef=34843,Gs=[];Gs[Tu]=2,Gs[ui]=2,Gs[zc]=2,Gs[Au]=2,Gs[au]=1,Gs[Gc]=4,Gs[oc]=4,Gs[sc]=16,Gs[Uc]=8,Gs[Ef]=6;function lt(Rt,Te,je){return Gs[Rt]*Te*je}var Lt=function(Rt,Te,je,zr,rn){var Fr={rgba4:Tu,rgb565:zc,"rgb5 a1":ui,depth:Au,stencil:au,"depth stencil":Gc};Te.ext_srgb&&(Fr.srgba=oc),Te.ext_color_buffer_half_float&&(Fr.rgba16f=Uc,Fr.rgb16f=Ef),Te.webgl_color_buffer_float&&(Fr.rgba32f=sc);var Xr=[];Object.keys(Fr).forEach(function(N){var K=Fr[N];Xr[K]=N});var bn=0,wn={};function Tn(N){this.id=bn++,this.refCount=1,this.renderbuffer=N,this.format=Tu,this.width=0,this.height=0,rn.profile&&(this.stats={size:0})}Tn.prototype.decRef=function(){--this.refCount<=0&&Sn(this)};function Sn(N){var K=N.renderbuffer;Tt(K,"must not double destroy renderbuffer"),Rt.bindRenderbuffer(ta,null),Rt.deleteRenderbuffer(K),N.renderbuffer=null,N.refCount=0,delete wn[N.id],zr.renderbufferCount--}function Nn(N,K){var st=new Tn(Rt.createRenderbuffer());wn[st.id]=st,zr.renderbufferCount++;function ht(Ot,zt){var Zt=0,ce=0,Me=Tu;if(typeof Ot=="object"&&Ot){var xe=Ot;if("shape"in xe){var Ye=xe.shape;Tt(Array.isArray(Ye)&&Ye.length>=2,"invalid renderbuffer shape"),Zt=Ye[0]|0,ce=Ye[1]|0}else"radius"in xe&&(Zt=ce=xe.radius|0),"width"in xe&&(Zt=xe.width|0),"height"in xe&&(ce=xe.height|0);"format"in xe&&(Tt.parameter(xe.format,Fr,"invalid renderbuffer format"),Me=Fr[xe.format])}else typeof Ot=="number"?(Zt=Ot|0,typeof zt=="number"?ce=zt|0:ce=Zt):Ot?Tt.raise("invalid arguments to renderbuffer constructor"):Zt=ce=1;if(Tt(Zt>0&&ce>0&&Zt<=je.maxRenderbufferSize&&ce<=je.maxRenderbufferSize,"invalid renderbuffer size"),!(Zt===st.width&&ce===st.height&&Me===st.format))return ht.width=st.width=Zt,ht.height=st.height=ce,st.format=Me,Rt.bindRenderbuffer(ta,st.renderbuffer),Rt.renderbufferStorage(ta,Me,Zt,ce),Tt(Rt.getError()===0,"invalid render buffer format"),rn.profile&&(st.stats.size=lt(st.format,st.width,st.height)),ht.format=Xr[st.format],ht}function yt(Ot,zt){var Zt=Ot|0,ce=zt|0||Zt;return Zt===st.width&&ce===st.height||(Tt(Zt>0&&ce>0&&Zt<=je.maxRenderbufferSize&&ce<=je.maxRenderbufferSize,"invalid renderbuffer size"),ht.width=st.width=Zt,ht.height=st.height=ce,Rt.bindRenderbuffer(ta,st.renderbuffer),Rt.renderbufferStorage(ta,st.format,Zt,ce),Tt(Rt.getError()===0,"invalid render buffer format"),rn.profile&&(st.stats.size=lt(st.format,st.width,st.height))),ht}return ht(N,K),ht.resize=yt,ht._reglType="renderbuffer",ht._renderbuffer=st,rn.profile&&(ht.stats=st.stats),ht.destroy=function(){st.decRef()},ht}rn.profile&&(zr.getTotalRenderbufferSize=function(){var N=0;return Object.keys(wn).forEach(function(K){N+=wn[K].stats.size}),N});function v(){ti(wn).forEach(function(N){N.renderbuffer=Rt.createRenderbuffer(),Rt.bindRenderbuffer(ta,N.renderbuffer),Rt.renderbufferStorage(ta,N.format,N.width,N.height)}),Rt.bindRenderbuffer(ta,null)}return{create:Nn,clear:function(){ti(wn).forEach(Sn)},restore:v}},Vt=36160,le=36161,Ae=3553,ir=34069,cr=36064,Gr=36096,gn=36128,yn=33306,Vn=36053,aa=36054,Zn=36055,La=36057,Qa=36061,Ra=36193,Ca=5121,Ga=5126,va=6407,Ka=6408,Ua=6402,ma=[va,Ka],ai=[];ai[Ka]=4,ai[va]=3;var xi=[];xi[Ca]=1,xi[Ga]=4,xi[Ra]=2;var Ji=32854,_i=32855,hi=36194,lo=33189,wo=36168,ho=34041,Us=35907,iu=34836,Ps=34842,As=34843,Vu=[Ji,_i,hi,Us,Ps,As,iu],Js={};Js[Vn]="complete",Js[aa]="incomplete attachment",Js[La]="incomplete dimensions",Js[Zn]="incomplete, missing attachment",Js[Qa]="unsupported";function Wc(Rt,Te,je,zr,rn,Fr){var Xr={cur:null,next:null,dirty:!1,setFBO:null},bn=["rgba"],wn=["rgba4","rgb565","rgb5 a1"];Te.ext_srgb&&wn.push("srgba"),Te.ext_color_buffer_half_float&&wn.push("rgba16f","rgb16f"),Te.webgl_color_buffer_float&&wn.push("rgba32f");var Tn=["uint8"];Te.oes_texture_half_float&&Tn.push("half float","float16"),Te.oes_texture_float&&Tn.push("float","float32");function Sn(mr,br,Er){this.target=mr,this.texture=br,this.renderbuffer=Er;var Mn=0,Xn=0;br?(Mn=br.width,Xn=br.height):Er&&(Mn=Er.width,Xn=Er.height),this.width=Mn,this.height=Xn}function Nn(mr){mr&&(mr.texture&&mr.texture._texture.decRef(),mr.renderbuffer&&mr.renderbuffer._renderbuffer.decRef())}function v(mr,br,Er){if(mr)if(mr.texture){var Mn=mr.texture._texture,Xn=Math.max(1,Mn.width),Rn=Math.max(1,Mn.height);Tt(Xn===br&&Rn===Er,"inconsistent width/height for supplied texture"),Mn.refCount+=1}else{var da=mr.renderbuffer._renderbuffer;Tt(da.width===br&&da.height===Er,"inconsistent width/height for renderbuffer"),da.refCount+=1}}function N(mr,br){br&&(br.texture?Rt.framebufferTexture2D(Vt,mr,br.target,br.texture._texture.texture,0):Rt.framebufferRenderbuffer(Vt,mr,le,br.renderbuffer._renderbuffer.renderbuffer))}function K(mr){var br=Ae,Er=null,Mn=null,Xn=mr;typeof mr=="object"&&(Xn=mr.data,"target"in mr&&(br=mr.target|0)),Tt.type(Xn,"function","invalid attachment data");var Rn=Xn._reglType;return Rn==="texture2d"?(Er=Xn,Tt(br===Ae)):Rn==="textureCube"?(Er=Xn,Tt(br>=ir&&br<ir+6,"invalid cube map target")):Rn==="renderbuffer"?(Mn=Xn,br=le):Tt.raise("invalid regl object for attachment"),new Sn(br,Er,Mn)}function st(mr,br,Er,Mn,Xn){if(Er){var Rn=zr.create2D({width:mr,height:br,format:Mn,type:Xn});return Rn._texture.refCount=0,new Sn(Ae,Rn,null)}else{var da=rn.create({width:mr,height:br,format:Mn});return da._renderbuffer.refCount=0,new Sn(le,null,da)}}function ht(mr){return mr&&(mr.texture||mr.renderbuffer)}function yt(mr,br,Er){mr&&(mr.texture?mr.texture.resize(br,Er):mr.renderbuffer&&mr.renderbuffer.resize(br,Er),mr.width=br,mr.height=Er)}var Ot=0,zt={};function Zt(){this.id=Ot++,zt[this.id]=this,this.framebuffer=Rt.createFramebuffer(),this.width=0,this.height=0,this.colorAttachments=[],this.depthAttachment=null,this.stencilAttachment=null,this.depthStencilAttachment=null}function ce(mr){mr.colorAttachments.forEach(Nn),Nn(mr.depthAttachment),Nn(mr.stencilAttachment),Nn(mr.depthStencilAttachment)}function Me(mr){var br=mr.framebuffer;Tt(br,"must not double destroy framebuffer"),Rt.deleteFramebuffer(br),mr.framebuffer=null,Fr.framebufferCount--,delete zt[mr.id]}function xe(mr){var br;Rt.bindFramebuffer(Vt,mr.framebuffer);var Er=mr.colorAttachments;for(br=0;br<Er.length;++br)N(cr+br,Er[br]);for(br=Er.length;br<je.maxColorAttachments;++br)Rt.framebufferTexture2D(Vt,cr+br,Ae,null,0);Rt.framebufferTexture2D(Vt,yn,Ae,null,0),Rt.framebufferTexture2D(Vt,Gr,Ae,null,0),Rt.framebufferTexture2D(Vt,gn,Ae,null,0),N(Gr,mr.depthAttachment),N(gn,mr.stencilAttachment),N(yn,mr.depthStencilAttachment);var Mn=Rt.checkFramebufferStatus(Vt);!Rt.isContextLost()&&Mn!==Vn&&Tt.raise("framebuffer configuration not supported, status = "+Js[Mn]),Rt.bindFramebuffer(Vt,Xr.next?Xr.next.framebuffer:null),Xr.cur=Xr.next,Rt.getError()}function Ye(mr,br){var Er=new Zt;Fr.framebufferCount++;function Mn(Rn,da){var fa;Tt(Xr.next!==Er,"can not update framebuffer which is currently in use");var wa=0,Ba=0,Da=!0,vo=!0,Wa=null,Go=!0,Hi="rgba",vi="uint8",ao=1,Uo=null,ns=null,vs=null,qo=!1;if(typeof Rn=="number")wa=Rn|0,Ba=da|0||wa;else if(!Rn)wa=Ba=1;else{Tt.type(Rn,"object","invalid arguments for framebuffer");var $a=Rn;if("shape"in $a){var ys=$a.shape;Tt(Array.isArray(ys)&&ys.length>=2,"invalid shape for framebuffer"),wa=ys[0],Ba=ys[1]}else"radius"in $a&&(wa=Ba=$a.radius),"width"in $a&&(wa=$a.width),"height"in $a&&(Ba=$a.height);("color"in $a||"colors"in $a)&&(Wa=$a.color||$a.colors,Array.isArray(Wa)&&Tt(Wa.length===1||Te.webgl_draw_buffers,"multiple render targets not supported")),Wa||("colorCount"in $a&&(ao=$a.colorCount|0,Tt(ao>0,"invalid color buffer count")),"colorTexture"in $a&&(Go=!!$a.colorTexture,Hi="rgba4"),"colorType"in $a&&(vi=$a.colorType,Go?(Tt(Te.oes_texture_float||!(vi==="float"||vi==="float32"),"you must enable OES_texture_float in order to use floating point framebuffer objects"),Tt(Te.oes_texture_half_float||!(vi==="half float"||vi==="float16"),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects")):vi==="half float"||vi==="float16"?(Tt(Te.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),Hi="rgba16f"):(vi==="float"||vi==="float32")&&(Tt(Te.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),Hi="rgba32f"),Tt.oneOf(vi,Tn,"invalid color type")),"colorFormat"in $a&&(Hi=$a.colorFormat,bn.indexOf(Hi)>=0?Go=!0:wn.indexOf(Hi)>=0?Go=!1:Go?Tt.oneOf($a.colorFormat,bn,"invalid color format for texture"):Tt.oneOf($a.colorFormat,wn,"invalid color format for renderbuffer"))),("depthTexture"in $a||"depthStencilTexture"in $a)&&(qo=!!($a.depthTexture||$a.depthStencilTexture),Tt(!qo||Te.webgl_depth_texture,"webgl_depth_texture extension not supported")),"depth"in $a&&(typeof $a.depth=="boolean"?Da=$a.depth:(Uo=$a.depth,vo=!1)),"stencil"in $a&&(typeof $a.stencil=="boolean"?vo=$a.stencil:(ns=$a.stencil,Da=!1)),"depthStencil"in $a&&(typeof $a.depthStencil=="boolean"?Da=vo=$a.depthStencil:(vs=$a.depthStencil,Da=!1,vo=!1))}var Ei=null,Sa=null,li=null,bi=null;if(Array.isArray(Wa))Ei=Wa.map(K);else if(Wa)Ei=[K(Wa)];else for(Ei=new Array(ao),fa=0;fa<ao;++fa)Ei[fa]=st(wa,Ba,Go,Hi,vi);Tt(Te.webgl_draw_buffers||Ei.length<=1,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers."),Tt(Ei.length<=je.maxColorAttachments,"too many color attachments, not supported"),wa=wa||Ei[0].width,Ba=Ba||Ei[0].height,Uo?Sa=K(Uo):Da&&!vo&&(Sa=st(wa,Ba,qo,"depth","uint32")),ns?li=K(ns):vo&&!Da&&(li=st(wa,Ba,!1,"stencil","uint8")),vs?bi=K(vs):!Uo&&!ns&&vo&&Da&&(bi=st(wa,Ba,qo,"depth stencil","depth stencil")),Tt(!!Uo+!!ns+!!vs<=1,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");var Qo=null;for(fa=0;fa<Ei.length;++fa)if(v(Ei[fa],wa,Ba),Tt(!Ei[fa]||Ei[fa].texture&&ma.indexOf(Ei[fa].texture._texture.format)>=0||Ei[fa].renderbuffer&&Vu.indexOf(Ei[fa].renderbuffer._renderbuffer.format)>=0,"framebuffer color attachment "+fa+" is invalid"),Ei[fa]&&Ei[fa].texture){var ku=ai[Ei[fa].texture._texture.format]*xi[Ei[fa].texture._texture.type];Qo===null?Qo=ku:Tt(Qo===ku,"all color attachments much have the same number of bits per pixel.")}return v(Sa,wa,Ba),Tt(!Sa||Sa.texture&&Sa.texture._texture.format===Ua||Sa.renderbuffer&&Sa.renderbuffer._renderbuffer.format===lo,"invalid depth attachment for framebuffer object"),v(li,wa,Ba),Tt(!li||li.renderbuffer&&li.renderbuffer._renderbuffer.format===wo,"invalid stencil attachment for framebuffer object"),v(bi,wa,Ba),Tt(!bi||bi.texture&&bi.texture._texture.format===ho||bi.renderbuffer&&bi.renderbuffer._renderbuffer.format===ho,"invalid depth-stencil attachment for framebuffer object"),ce(Er),Er.width=wa,Er.height=Ba,Er.colorAttachments=Ei,Er.depthAttachment=Sa,Er.stencilAttachment=li,Er.depthStencilAttachment=bi,Mn.color=Ei.map(ht),Mn.depth=ht(Sa),Mn.stencil=ht(li),Mn.depthStencil=ht(bi),Mn.width=Er.width,Mn.height=Er.height,xe(Er),Mn}function Xn(Rn,da){Tt(Xr.next!==Er,"can not resize a framebuffer which is currently in use");var fa=Math.max(Rn|0,1),wa=Math.max(da|0||fa,1);if(fa===Er.width&&wa===Er.height)return Mn;for(var Ba=Er.colorAttachments,Da=0;Da<Ba.length;++Da)yt(Ba[Da],fa,wa);return yt(Er.depthAttachment,fa,wa),yt(Er.stencilAttachment,fa,wa),yt(Er.depthStencilAttachment,fa,wa),Er.width=Mn.width=fa,Er.height=Mn.height=wa,xe(Er),Mn}return Mn(mr,br),C(Mn,{resize:Xn,_reglType:"framebuffer",_framebuffer:Er,destroy:function(){Me(Er),ce(Er)},use:function(Rn){Xr.setFBO({framebuffer:Mn},Rn)}})}function fr(mr){var br=Array(6);function Er(Xn){var Rn;Tt(br.indexOf(Xr.next)<0,"can not update framebuffer which is currently in use");var da={color:null},fa=0,wa=null,Ba="rgba",Da="uint8",vo=1;if(typeof Xn=="number")fa=Xn|0;else if(!Xn)fa=1;else{Tt.type(Xn,"object","invalid arguments for framebuffer");var Wa=Xn;if("shape"in Wa){var Go=Wa.shape;Tt(Array.isArray(Go)&&Go.length>=2,"invalid shape for framebuffer"),Tt(Go[0]===Go[1],"cube framebuffer must be square"),fa=Go[0]}else"radius"in Wa&&(fa=Wa.radius|0),"width"in Wa?(fa=Wa.width|0,"height"in Wa&&Tt(Wa.height===fa,"must be square")):"height"in Wa&&(fa=Wa.height|0);("color"in Wa||"colors"in Wa)&&(wa=Wa.color||Wa.colors,Array.isArray(wa)&&Tt(wa.length===1||Te.webgl_draw_buffers,"multiple render targets not supported")),wa||("colorCount"in Wa&&(vo=Wa.colorCount|0,Tt(vo>0,"invalid color buffer count")),"colorType"in Wa&&(Tt.oneOf(Wa.colorType,Tn,"invalid color type"),Da=Wa.colorType),"colorFormat"in Wa&&(Ba=Wa.colorFormat,Tt.oneOf(Wa.colorFormat,bn,"invalid color format for texture"))),"depth"in Wa&&(da.depth=Wa.depth),"stencil"in Wa&&(da.stencil=Wa.stencil),"depthStencil"in Wa&&(da.depthStencil=Wa.depthStencil)}var Hi;if(wa)if(Array.isArray(wa))for(Hi=[],Rn=0;Rn<wa.length;++Rn)Hi[Rn]=wa[Rn];else Hi=[wa];else{Hi=Array(vo);var vi={radius:fa,format:Ba,type:Da};for(Rn=0;Rn<vo;++Rn)Hi[Rn]=zr.createCube(vi)}for(da.color=Array(Hi.length),Rn=0;Rn<Hi.length;++Rn){var ao=Hi[Rn];Tt(typeof ao=="function"&&ao._reglType==="textureCube","invalid cube map"),fa=fa||ao.width,Tt(ao.width===fa&&ao.height===fa,"invalid cube map shape"),da.color[Rn]={target:ir,data:Hi[Rn]}}for(Rn=0;Rn<6;++Rn){for(var Uo=0;Uo<Hi.length;++Uo)da.color[Uo].target=ir+Rn;Rn>0&&(da.depth=br[0].depth,da.stencil=br[0].stencil,da.depthStencil=br[0].depthStencil),br[Rn]?br[Rn](da):br[Rn]=Ye(da)}return C(Er,{width:fa,height:fa,color:Hi})}function Mn(Xn){var Rn,da=Xn|0;if(Tt(da>0&&da<=je.maxCubeMapSize,"invalid radius for cube fbo"),da===Er.width)return Er;var fa=Er.color;for(Rn=0;Rn<fa.length;++Rn)fa[Rn].resize(da);for(Rn=0;Rn<6;++Rn)br[Rn].resize(da);return Er.width=Er.height=da,Er}return Er(mr),C(Er,{faces:br,resize:Mn,_reglType:"framebufferCube",destroy:function(){br.forEach(function(Xn){Xn.destroy()})}})}function Vr(){Xr.cur=null,Xr.next=null,Xr.dirty=!0,ti(zt).forEach(function(mr){mr.framebuffer=Rt.createFramebuffer(),xe(mr)})}return C(Xr,{getFramebuffer:function(mr){if(typeof mr=="function"&&mr._reglType==="framebuffer"){var br=mr._framebuffer;if(br instanceof Zt)return br}return null},create:Ye,createCube:fr,clear:function(){ti(zt).forEach(Me)},restore:Vr})}var ul=5126,Hu=34962;function uc(){this.state=0,this.x=0,this.y=0,this.z=0,this.w=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=ul,this.offset=0,this.stride=0,this.divisor=0}function wf(Rt,Te,je,zr,rn){for(var Fr=je.maxAttributes,Xr=new Array(Fr),bn=0;bn<Fr;++bn)Xr[bn]=new uc;var wn=0,Tn={},Sn={Record:uc,scope:{},state:Xr,currentVAO:null,targetVAO:null,restore:v()?zt:function(){},createVAO:Zt,getVAO:K,destroyBuffer:Nn,setVAO:v()?st:ht,clear:v()?yt:function(){}};function Nn(ce){for(var Me=0;Me<Xr.length;++Me){var xe=Xr[Me];xe.buffer===ce&&(Rt.disableVertexAttribArray(Me),xe.buffer=null)}}function v(){return Te.oes_vertex_array_object}function N(){return Te.angle_instanced_arrays}function K(ce){return typeof ce=="function"&&ce._vao?ce._vao:null}function st(ce){if(ce!==Sn.currentVAO){var Me=v();ce?Me.bindVertexArrayOES(ce.vao):Me.bindVertexArrayOES(null),Sn.currentVAO=ce}}function ht(ce){if(ce!==Sn.currentVAO){if(ce)ce.bindAttrs();else for(var Me=N(),xe=0;xe<Xr.length;++xe){var Ye=Xr[xe];Ye.buffer?(Rt.enableVertexAttribArray(xe),Rt.vertexAttribPointer(xe,Ye.size,Ye.type,Ye.normalized,Ye.stride,Ye.offfset),Me&&Ye.divisor&&Me.vertexAttribDivisorANGLE(xe,Ye.divisor)):(Rt.disableVertexAttribArray(xe),Rt.vertexAttrib4f(xe,Ye.x,Ye.y,Ye.z,Ye.w))}Sn.currentVAO=ce}}function yt(){ti(Tn).forEach(function(ce){ce.destroy()})}function Ot(){this.id=++wn,this.attributes=[];var ce=v();ce?this.vao=ce.createVertexArrayOES():this.vao=null,Tn[this.id]=this,this.buffers=[]}Ot.prototype.bindAttrs=function(){for(var ce=N(),Me=this.attributes,xe=0;xe<Me.length;++xe){var Ye=Me[xe];Ye.buffer?(Rt.enableVertexAttribArray(xe),Rt.bindBuffer(Hu,Ye.buffer.buffer),Rt.vertexAttribPointer(xe,Ye.size,Ye.type,Ye.normalized,Ye.stride,Ye.offset),ce&&Ye.divisor&&ce.vertexAttribDivisorANGLE(xe,Ye.divisor)):(Rt.disableVertexAttribArray(xe),Rt.vertexAttrib4f(xe,Ye.x,Ye.y,Ye.z,Ye.w))}for(var fr=Me.length;fr<Fr;++fr)Rt.disableVertexAttribArray(fr)},Ot.prototype.refresh=function(){var ce=v();ce&&(ce.bindVertexArrayOES(this.vao),this.bindAttrs(),Sn.currentVAO=this)},Ot.prototype.destroy=function(){if(this.vao){var ce=v();this===Sn.currentVAO&&(Sn.currentVAO=null,ce.bindVertexArrayOES(null)),ce.deleteVertexArrayOES(this.vao),this.vao=null}Tn[this.id]&&(delete Tn[this.id],zr.vaoCount-=1)};function zt(){var ce=v();ce&&ti(Tn).forEach(function(Me){Me.refresh()})}function Zt(ce){var Me=new Ot;zr.vaoCount+=1;function xe(Ye){Tt(Array.isArray(Ye),"arguments to vertex array constructor must be an array"),Tt(Ye.length<Fr,"too many attributes"),Tt(Ye.length>0,"must specify at least one attribute");var fr={},Vr=Me.attributes;Vr.length=Ye.length;for(var mr=0;mr<Ye.length;++mr){var br=Ye[mr],Er=Vr[mr]=new uc,Mn=br.data||br;if(Array.isArray(Mn)||z(Mn)||ri(Mn)){var Xn;Me.buffers[mr]&&(Xn=Me.buffers[mr],z(Mn)&&Xn._buffer.byteLength>=Mn.byteLength?Xn.subdata(Mn):(Xn.destroy(),Me.buffers[mr]=null)),Me.buffers[mr]||(Xn=Me.buffers[mr]=rn.create(br,Hu,!1,!0)),Er.buffer=rn.getBuffer(Xn),Er.size=Er.buffer.dimension|0,Er.normalized=!1,Er.type=Er.buffer.dtype,Er.offset=0,Er.stride=0,Er.divisor=0,Er.state=1,fr[mr]=1}else rn.getBuffer(br)?(Er.buffer=rn.getBuffer(br),Er.size=Er.buffer.dimension|0,Er.normalized=!1,Er.type=Er.buffer.dtype,Er.offset=0,Er.stride=0,Er.divisor=0,Er.state=1):rn.getBuffer(br.buffer)?(Er.buffer=rn.getBuffer(br.buffer),Er.size=(+br.size||Er.buffer.dimension)|0,Er.normalized=!!br.normalized||!1,"type"in br?(Tt.parameter(br.type,$i,"invalid buffer type"),Er.type=$i[br.type]):Er.type=Er.buffer.dtype,Er.offset=(br.offset||0)|0,Er.stride=(br.stride||0)|0,Er.divisor=(br.divisor||0)|0,Er.state=1,Tt(Er.size>=1&&Er.size<=4,"size must be between 1 and 4"),Tt(Er.offset>=0,"invalid offset"),Tt(Er.stride>=0&&Er.stride<=255,"stride must be between 0 and 255"),Tt(Er.divisor>=0,"divisor must be positive"),Tt(!Er.divisor||!!Te.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in br?(Tt(mr>0,"first attribute must not be a constant"),Er.x=+br.x||0,Er.y=+br.y||0,Er.z=+br.z||0,Er.w=+br.w||0,Er.state=2):Tt(!1,"invalid attribute spec for location "+mr)}for(var Rn=0;Rn<Me.buffers.length;++Rn)!fr[Rn]&&Me.buffers[Rn]&&(Me.buffers[Rn].destroy(),Me.buffers[Rn]=null);return Me.refresh(),xe}return xe.destroy=function(){for(var Ye=0;Ye<Me.buffers.length;++Ye)Me.buffers[Ye]&&Me.buffers[Ye].destroy();Me.buffers.length=0,Me.destroy()},xe._vao=Me,xe._reglType="vao",xe(ce)}return Sn}var Iu=35632,hu=35633,Sf=35718,Yc=35721;function Xc(Rt,Te,je,zr){var rn={},Fr={};function Xr(st,ht,yt,Ot){this.name=st,this.id=ht,this.location=yt,this.info=Ot}function bn(st,ht){for(var yt=0;yt<st.length;++yt)if(st[yt].id===ht.id){st[yt].location=ht.location;return}st.push(ht)}function wn(st,ht,yt){var Ot=st===Iu?rn:Fr,zt=Ot[ht];if(!zt){var Zt=Te.str(ht);zt=Rt.createShader(st),Rt.shaderSource(zt,Zt),Rt.compileShader(zt),Tt.shaderError(Rt,zt,Zt,st,yt),Ot[ht]=zt}return zt}var Tn={},Sn=[],Nn=0;function v(st,ht){this.id=Nn++,this.fragId=st,this.vertId=ht,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,zr.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function N(st,ht,yt){var Ot,zt,Zt=wn(Iu,st.fragId),ce=wn(hu,st.vertId),Me=st.program=Rt.createProgram();if(Rt.attachShader(Me,Zt),Rt.attachShader(Me,ce),yt)for(Ot=0;Ot<yt.length;++Ot){var xe=yt[Ot];Rt.bindAttribLocation(Me,xe[0],xe[1])}Rt.linkProgram(Me),Tt.linkError(Rt,Me,Te.str(st.fragId),Te.str(st.vertId),ht);var Ye=Rt.getProgramParameter(Me,Sf);zr.profile&&(st.stats.uniformsCount=Ye);var fr=st.uniforms;for(Ot=0;Ot<Ye;++Ot)if(zt=Rt.getActiveUniform(Me,Ot),zt)if(zt.size>1)for(var Vr=0;Vr<zt.size;++Vr){var mr=zt.name.replace("[0]","["+Vr+"]");bn(fr,new Xr(mr,Te.id(mr),Rt.getUniformLocation(Me,mr),zt))}else bn(fr,new Xr(zt.name,Te.id(zt.name),Rt.getUniformLocation(Me,zt.name),zt));var br=Rt.getProgramParameter(Me,Yc);zr.profile&&(st.stats.attributesCount=br);var Er=st.attributes;for(Ot=0;Ot<br;++Ot)zt=Rt.getActiveAttrib(Me,Ot),zt&&bn(Er,new Xr(zt.name,Te.id(zt.name),Rt.getAttribLocation(Me,zt.name),zt))}zr.profile&&(je.getMaxUniformsCount=function(){var st=0;return Sn.forEach(function(ht){ht.stats.uniformsCount>st&&(st=ht.stats.uniformsCount)}),st},je.getMaxAttributesCount=function(){var st=0;return Sn.forEach(function(ht){ht.stats.attributesCount>st&&(st=ht.stats.attributesCount)}),st});function K(){rn={},Fr={};for(var st=0;st<Sn.length;++st)N(Sn[st],null,Sn[st].attributes.map(function(ht){return[ht.location,ht.name]}))}return{clear:function(){var st=Rt.deleteShader.bind(Rt);ti(rn).forEach(st),rn={},ti(Fr).forEach(st),Fr={},Sn.forEach(function(ht){Rt.deleteProgram(ht.program)}),Sn.length=0,Tn={},je.shaderCount=0},program:function(st,ht,yt,Ot){Tt.command(st>=0,"missing vertex shader",yt),Tt.command(ht>=0,"missing fragment shader",yt);var zt=Tn[ht];zt||(zt=Tn[ht]={});var Zt=zt[st];if(Zt&&(Zt.refCount++,!Ot))return Zt;var ce=new v(ht,st);return je.shaderCount++,N(ce,yt,Ot),Zt||(zt[st]=ce),Sn.push(ce),C(ce,{destroy:function(){if(ce.refCount--,ce.refCount<=0){Rt.deleteProgram(ce.program);var Me=Sn.indexOf(ce);Sn.splice(Me,1),je.shaderCount--}zt[ce.vertId].refCount<=0&&(Rt.deleteShader(Fr[ce.vertId]),delete Fr[ce.vertId],delete Tn[ce.fragId][ce.vertId]),Object.keys(Tn[ce.fragId]).length||(Rt.deleteShader(rn[ce.fragId]),delete rn[ce.fragId],delete Tn[ce.fragId])}})},restore:K,shader:wn,frag:-1,vert:-1}}var Ns=6408,Ou=5121,cc=3333,Mf=5126;function _f(Rt,Te,je,zr,rn,Fr,Xr){function bn(Sn){var Nn;Te.next===null?(Tt(rn.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),Nn=Ou):(Tt(Te.next.colorAttachments[0].texture!==null,"You cannot read from a renderbuffer"),Nn=Te.next.colorAttachments[0].texture._texture.type,Fr.oes_texture_float?(Tt(Nn===Ou||Nn===Mf,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),Nn===Mf&&Tt(Xr.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):Tt(Nn===Ou,"Reading from a framebuffer is only allowed for the type 'uint8'"));var v=0,N=0,K=zr.framebufferWidth,st=zr.framebufferHeight,ht=null;z(Sn)?ht=Sn:Sn&&(Tt.type(Sn,"object","invalid arguments to regl.read()"),v=Sn.x|0,N=Sn.y|0,Tt(v>=0&&v<zr.framebufferWidth,"invalid x offset for regl.read"),Tt(N>=0&&N<zr.framebufferHeight,"invalid y offset for regl.read"),K=(Sn.width||zr.framebufferWidth-v)|0,st=(Sn.height||zr.framebufferHeight-N)|0,ht=Sn.data||null),ht&&(Nn===Ou?Tt(ht instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):Nn===Mf&&Tt(ht instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'")),Tt(K>0&&K+v<=zr.framebufferWidth,"invalid width for read pixels"),Tt(st>0&&st+N<=zr.framebufferHeight,"invalid height for read pixels"),je();var yt=K*st*4;return ht||(Nn===Ou?ht=new Uint8Array(yt):Nn===Mf&&(ht=ht||new Float32Array(yt))),Tt.isTypedArray(ht,"data buffer for regl.read() must be a typedarray"),Tt(ht.byteLength>=yt,"data buffer for regl.read() too small"),Rt.pixelStorei(cc,4),Rt.readPixels(v,N,K,st,Ns,Nn,ht),ht}function wn(Sn){var Nn;return Te.setFBO({framebuffer:Sn.framebuffer},function(){Nn=bn(Sn)}),Nn}function Tn(Sn){return!Sn||!("framebuffer"in Sn)?bn(Sn):wn(Sn)}return Tn}function us(Rt){return Array.prototype.slice.call(Rt)}function Zu(Rt){return us(Rt).join("")}function Pl(){var Rt=0,Te=[],je=[];function zr(Nn){for(var v=0;v<je.length;++v)if(je[v]===Nn)return Te[v];var N="g"+Rt++;return Te.push(N),je.push(Nn),N}function rn(){var Nn=[];function v(){Nn.push.apply(Nn,us(arguments))}var N=[];function K(){var st="v"+Rt++;return N.push(st),arguments.length>0&&(Nn.push(st,"="),Nn.push.apply(Nn,us(arguments)),Nn.push(";")),st}return C(v,{def:K,toString:function(){return Zu([N.length>0?"var "+N.join(",")+";":"",Zu(Nn)])}})}function Fr(){var Nn=rn(),v=rn(),N=Nn.toString,K=v.toString;function st(ht,yt){v(ht,yt,"=",Nn.def(ht,yt),";")}return C(function(){Nn.apply(Nn,us(arguments))},{def:Nn.def,entry:Nn,exit:v,save:st,set:function(ht,yt,Ot){st(ht,yt),Nn(ht,yt,"=",Ot,";")},toString:function(){return N()+K()}})}function Xr(){var Nn=Zu(arguments),v=Fr(),N=Fr(),K=v.toString,st=N.toString;return C(v,{then:function(){return v.apply(v,us(arguments)),this},else:function(){return N.apply(N,us(arguments)),this},toString:function(){var ht=st();return ht&&(ht="else{"+ht+"}"),Zu(["if(",Nn,"){",K(),"}",ht])}})}var bn=rn(),wn={};function Tn(Nn,v){var N=[];function K(){var zt="a"+N.length;return N.push(zt),zt}v=v||0;for(var st=0;st<v;++st)K();var ht=Fr(),yt=ht.toString,Ot=wn[Nn]=C(ht,{arg:K,toString:function(){return Zu(["function(",N.join(),"){",yt(),"}"])}});return Ot}function Sn(){var Nn=['"use strict";',bn,"return {"];Object.keys(wn).forEach(function(K){Nn.push('"',K,'":',wn[K].toString(),",")}),Nn.push("}");var v=Zu(Nn).replace(/;/g,`;
`).replace(/}/g,`}
`).replace(/{/g,`{
`),N=Function.apply(null,Te.concat(v));return N.apply(null,je)}return{global:bn,link:zr,block:rn,proc:Tn,scope:Fr,cond:Xr,compile:Sn}}var Ku="xyzw".split(""),jc=5121,Zs=1,vu=2,Cf=0,Tf=1,cl=2,Ws=3,Vc=4,Hc=5,Af=6,fl="dither",Nl="blend.enable",Rl="blend.color",Zc="blend.equation",If="blend.func",kl="depth.enable",fd="depth.func",Bl="depth.range",fc="depth.mask",Of="colorMask",er="cull.enable",ld="cull.face",Kc="frontFace",$c="lineWidth",ll="polygonOffset.enable",dl="polygonOffset.offset",hl="sample.alpha",Fl="sample.enable",$u="sample.coverage",Df="stencil.enable",qc="stencil.mask",lc="stencil.func",rs="stencil.opFront",dc="stencil.opBack",vl="scissor.enable",Du="scissor.box",ou="viewport",hc="profile",qu="framebuffer",pu="vert",vc="frag",Qu="elements",Lu="primitive",gu="count",Lf="offset",Pf="instances",pc="vao",Nf="Width",Rf="Height",gc=qu+Nf,Ks=qu+Rf,kf=ou+Nf,mu=ou+Rf,Bf="drawingBuffer",pl=Bf+Nf,Ff=Bf+Rf,zl=[If,Zc,lc,rs,dc,$u,ou,Du,dl],Ju=34962,gl=34963,zf=35632,dd=35633,Gl=3553,Ul=34067,hd=2884,Wl=3042,Yl=3024,vd=2960,Xl=2929,Qc=3089,jl=32823,mc=32926,ml=32928,tc=5126,Gf=35664,Uf=35665,Jc=35666,Pu=5124,yc=35667,xc=35668,tf=35669,Wf=35670,Yf=35671,ef=35672,Xf=35673,jf=35674,rf=35675,bc=35676,Ec=35678,wc=35680,Vl=4,nf=1028,ec=1029,Hl=2304,af=2305,pd=32775,Zl=32776,Ud=519,yu=7680,Kl=0,$l=1,ql=32774,Ql=513,yl=36160,gd=36064,ms={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},xl=["constant color, constant alpha","one minus constant color, constant alpha","constant color, one minus constant alpha","one minus constant color, one minus constant alpha","constant alpha, constant color","constant alpha, one minus constant color","one minus constant alpha, constant color","one minus constant alpha, one minus constant color"],Sc={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},xu={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},Jl={frag:zf,vert:dd},Vf={cw:Hl,ccw:af};function of(Rt){return Array.isArray(Rt)||z(Rt)||ri(Rt)}function tu(Rt){return Rt.sort(function(Te,je){return Te===ou?-1:je===ou?1:Te<je?-1:1})}function Es(Rt,Te,je,zr){this.thisDep=Rt,this.contextDep=Te,this.propDep=je,this.append=zr}function bu(Rt){return Rt&&!(Rt.thisDep||Rt.contextDep||Rt.propDep)}function Xo(Rt){return new Es(!1,!1,!1,Rt)}function Vi(Rt,Te){var je=Rt.type;if(je===Cf){var zr=Rt.data.length;return new Es(!0,zr>=1,zr>=2,Te)}else if(je===Vc){var rn=Rt.data;return new Es(rn.thisDep,rn.contextDep,rn.propDep,Te)}else{if(je===Hc)return new Es(!1,!1,!1,Te);if(je===Af){for(var Fr=!1,Xr=!1,bn=!1,wn=0;wn<Rt.data.length;++wn){var Tn=Rt.data[wn];if(Tn.type===Tf)bn=!0;else if(Tn.type===cl)Xr=!0;else if(Tn.type===Ws)Fr=!0;else if(Tn.type===Cf){Fr=!0;var Sn=Tn.data;Sn>=1&&(Xr=!0),Sn>=2&&(bn=!0)}else Tn.type===Vc&&(Fr=Fr||Tn.data.thisDep,Xr=Xr||Tn.data.contextDep,bn=bn||Tn.data.propDep)}return new Es(Fr,Xr,bn,Te)}else return new Es(je===Ws,je===cl,je===Tf,Te)}}var rc=new Es(!1,!1,!1,function(){});function Mc(Rt,Te,je,zr,rn,Fr,Xr,bn,wn,Tn,Sn,Nn,v,N,K){var st=Tn.Record,ht={add:32774,subtract:32778,"reverse subtract":32779};je.ext_blend_minmax&&(ht.min=pd,ht.max=Zl);var yt=je.angle_instanced_arrays,Ot=je.webgl_draw_buffers,zt={dirty:!0,profile:K.profile},Zt={},ce=[],Me={},xe={};function Ye(Re){return Re.replace(".","_")}function fr(Re,Ee,Je){var wr=Ye(Re);ce.push(Re),Zt[wr]=zt[wr]=!!Je,Me[wr]=Ee}function Vr(Re,Ee,Je){var wr=Ye(Re);ce.push(Re),Array.isArray(Je)?(zt[wr]=Je.slice(),Zt[wr]=Je.slice()):zt[wr]=Zt[wr]=Je,xe[wr]=Ee}fr(fl,Yl),fr(Nl,Wl),Vr(Rl,"blendColor",[0,0,0,0]),Vr(Zc,"blendEquationSeparate",[ql,ql]),Vr(If,"blendFuncSeparate",[$l,Kl,$l,Kl]),fr(kl,Xl,!0),Vr(fd,"depthFunc",Ql),Vr(Bl,"depthRange",[0,1]),Vr(fc,"depthMask",!0),Vr(Of,Of,[!0,!0,!0,!0]),fr(er,hd),Vr(ld,"cullFace",ec),Vr(Kc,Kc,af),Vr($c,$c,1),fr(ll,jl),Vr(dl,"polygonOffset",[0,0]),fr(hl,mc),fr(Fl,ml),Vr($u,"sampleCoverage",[1,!1]),fr(Df,vd),Vr(qc,"stencilMask",-1),Vr(lc,"stencilFunc",[Ud,0,-1]),Vr(rs,"stencilOpSeparate",[nf,yu,yu,yu]),Vr(dc,"stencilOpSeparate",[ec,yu,yu,yu]),fr(vl,Qc),Vr(Du,"scissor",[0,0,Rt.drawingBufferWidth,Rt.drawingBufferHeight]),Vr(ou,ou,[0,0,Rt.drawingBufferWidth,Rt.drawingBufferHeight]);var mr={gl:Rt,context:v,strings:Te,next:Zt,current:zt,draw:Nn,elements:Fr,buffer:rn,shader:Sn,attributes:Tn.state,vao:Tn,uniforms:wn,framebuffer:bn,extensions:je,timer:N,isBufferArgs:of},br={primTypes:Fa,compareFuncs:Sc,blendFuncs:ms,blendEquations:ht,stencilOps:xu,glTypes:$i,orientationType:Vf};Tt.optional(function(){mr.isArrayLike=Ya}),Ot&&(br.backBuffer=[ec],br.drawBuffer=On(zr.maxDrawbuffers,function(Re){return Re===0?[0]:On(Re,function(Ee){return gd+Ee})}));var Er=0;function Mn(){var Re=Pl(),Ee=Re.link,Je=Re.global;Re.id=Er++,Re.batchId="0";var wr=Ee(mr),Tr=Re.shared={props:"a0"};Object.keys(mr).forEach(function(tr){Tr[tr]=Je.def(wr,".",tr)}),Tt.optional(function(){Re.CHECK=Ee(Tt),Re.commandStr=Tt.guessCommand(),Re.command=Ee(Re.commandStr),Re.assert=function(tr,Pe,yr){tr("if(!(",Pe,"))",this.CHECK,".commandRaise(",Ee(yr),",",this.command,");")},br.invalidBlendCombinations=xl});var ar=Re.next={},rr=Re.current={};Object.keys(xe).forEach(function(tr){Array.isArray(zt[tr])&&(ar[tr]=Je.def(Tr.next,".",tr),rr[tr]=Je.def(Tr.current,".",tr))});var vr=Re.constants={};Object.keys(br).forEach(function(tr){vr[tr]=Je.def(JSON.stringify(br[tr]))}),Re.invoke=function(tr,Pe){switch(Pe.type){case Cf:var yr=["this",Tr.context,Tr.props,Re.batchId];return tr.def(Ee(Pe.data),".call(",yr.slice(0,Math.max(Pe.data.length+1,4)),")");case Tf:return tr.def(Tr.props,Pe.data);case cl:return tr.def(Tr.context,Pe.data);case Ws:return tr.def("this",Pe.data);case Vc:return Pe.data.append(Re,tr),Pe.data.ref;case Hc:return Pe.data.toString();case Af:return Pe.data.map(function(Or){return Re.invoke(tr,Or)})}},Re.attribCache={};var ke={};return Re.scopeAttrib=function(tr){var Pe=Te.id(tr);if(Pe in ke)return ke[Pe];var yr=Tn.scope[Pe];yr||(yr=Tn.scope[Pe]=new st);var Or=ke[Pe]=Ee(yr);return Or},Re}function Xn(Re){var Ee=Re.static,Je=Re.dynamic,wr;if(hc in Ee){var Tr=!!Ee[hc];wr=Xo(function(rr,vr){return Tr}),wr.enable=Tr}else if(hc in Je){var ar=Je[hc];wr=Vi(ar,function(rr,vr){return rr.invoke(vr,ar)})}return wr}function Rn(Re,Ee){var Je=Re.static,wr=Re.dynamic;if(qu in Je){var Tr=Je[qu];return Tr?(Tr=bn.getFramebuffer(Tr),Tt.command(Tr,"invalid framebuffer object"),Xo(function(rr,vr){var ke=rr.link(Tr),tr=rr.shared;vr.set(tr.framebuffer,".next",ke);var Pe=tr.context;return vr.set(Pe,"."+gc,ke+".width"),vr.set(Pe,"."+Ks,ke+".height"),ke})):Xo(function(rr,vr){var ke=rr.shared;vr.set(ke.framebuffer,".next","null");var tr=ke.context;return vr.set(tr,"."+gc,tr+"."+pl),vr.set(tr,"."+Ks,tr+"."+Ff),"null"})}else if(qu in wr){var ar=wr[qu];return Vi(ar,function(rr,vr){var ke=rr.invoke(vr,ar),tr=rr.shared,Pe=tr.framebuffer,yr=vr.def(Pe,".getFramebuffer(",ke,")");Tt.optional(function(){rr.assert(vr,"!"+ke+"||"+yr,"invalid framebuffer object")}),vr.set(Pe,".next",yr);var Or=tr.context;return vr.set(Or,"."+gc,yr+"?"+yr+".width:"+Or+"."+pl),vr.set(Or,"."+Ks,yr+"?"+yr+".height:"+Or+"."+Ff),yr})}else return null}function da(Re,Ee,Je){var wr=Re.static,Tr=Re.dynamic;function ar(ke){if(ke in wr){var tr=wr[ke];Tt.commandType(tr,"object","invalid "+ke,Je.commandStr);var Pe=!0,yr=tr.x|0,Or=tr.y|0,Jr,sn;return"width"in tr?(Jr=tr.width|0,Tt.command(Jr>=0,"invalid "+ke,Je.commandStr)):Pe=!1,"height"in tr?(sn=tr.height|0,Tt.command(sn>=0,"invalid "+ke,Je.commandStr)):Pe=!1,new Es(!Pe&&Ee&&Ee.thisDep,!Pe&&Ee&&Ee.contextDep,!Pe&&Ee&&Ee.propDep,function(pa,Ja){var ca=pa.shared.context,Ta=Jr;"width"in tr||(Ta=Ja.def(ca,".",gc,"-",yr));var Za=sn;return"height"in tr||(Za=Ja.def(ca,".",Ks,"-",Or)),[yr,Or,Ta,Za]})}else if(ke in Tr){var Hr=Tr[ke],In=Vi(Hr,function(pa,Ja){var ca=pa.invoke(Ja,Hr);Tt.optional(function(){pa.assert(Ja,ca+"&&typeof "+ca+'==="object"',"invalid "+ke)});var Ta=pa.shared.context,Za=Ja.def(ca,".x|0"),Ii=Ja.def(ca,".y|0"),No=Ja.def('"width" in ',ca,"?",ca,".width|0:","(",Ta,".",gc,"-",Za,")"),Ys=Ja.def('"height" in ',ca,"?",ca,".height|0:","(",Ta,".",Ks,"-",Ii,")");return Tt.optional(function(){pa.assert(Ja,No+">=0&&"+Ys+">=0","invalid "+ke)}),[Za,Ii,No,Ys]});return Ee&&(In.thisDep=In.thisDep||Ee.thisDep,In.contextDep=In.contextDep||Ee.contextDep,In.propDep=In.propDep||Ee.propDep),In}else return Ee?new Es(Ee.thisDep,Ee.contextDep,Ee.propDep,function(pa,Ja){var ca=pa.shared.context;return[0,0,Ja.def(ca,".",gc),Ja.def(ca,".",Ks)]}):null}var rr=ar(ou);if(rr){var vr=rr;rr=new Es(rr.thisDep,rr.contextDep,rr.propDep,function(ke,tr){var Pe=vr.append(ke,tr),yr=ke.shared.context;return tr.set(yr,"."+kf,Pe[2]),tr.set(yr,"."+mu,Pe[3]),Pe})}return{viewport:rr,scissor_box:ar(Du)}}function fa(Re,Ee){var Je=Re.static,wr=typeof Je[vc]=="string"&&typeof Je[pu]=="string";if(wr){if(Object.keys(Ee.dynamic).length>0)return null;var Tr=Ee.static,ar=Object.keys(Tr);if(ar.length>0&&typeof Tr[ar[0]]=="number"){for(var rr=[],vr=0;vr<ar.length;++vr)Tt(typeof Tr[ar[vr]]=="number","must specify all vertex attribute locations when using vaos"),rr.push([Tr[ar[vr]]|0,ar[vr]]);return rr}}return null}function wa(Re,Ee,Je){var wr=Re.static,Tr=Re.dynamic;function ar(Pe){if(Pe in wr){var yr=Te.id(wr[Pe]);Tt.optional(function(){Sn.shader(Jl[Pe],yr,Tt.guessCommand())});var Or=Xo(function(){return yr});return Or.id=yr,Or}else if(Pe in Tr){var Jr=Tr[Pe];return Vi(Jr,function(sn,Hr){var In=sn.invoke(Hr,Jr),pa=Hr.def(sn.shared.strings,".id(",In,")");return Tt.optional(function(){Hr(sn.shared.shader,".shader(",Jl[Pe],",",pa,",",sn.command,");")}),pa})}return null}var rr=ar(vc),vr=ar(pu),ke=null,tr;return bu(rr)&&bu(vr)?(ke=Sn.program(vr.id,rr.id,null,Je),tr=Xo(function(Pe,yr){return Pe.link(ke)})):tr=new Es(rr&&rr.thisDep||vr&&vr.thisDep,rr&&rr.contextDep||vr&&vr.contextDep,rr&&rr.propDep||vr&&vr.propDep,function(Pe,yr){var Or=Pe.shared.shader,Jr;rr?Jr=rr.append(Pe,yr):Jr=yr.def(Or,".",vc);var sn;vr?sn=vr.append(Pe,yr):sn=yr.def(Or,".",pu);var Hr=Or+".program("+sn+","+Jr;return Tt.optional(function(){Hr+=","+Pe.command}),yr.def(Hr+")")}),{frag:rr,vert:vr,progVar:tr,program:ke}}function Ba(Re,Ee){var Je=Re.static,wr=Re.dynamic;function Tr(){if(Qu in Je){var Pe=Je[Qu];of(Pe)?Pe=Fr.getElements(Fr.create(Pe,!0)):Pe&&(Pe=Fr.getElements(Pe),Tt.command(Pe,"invalid elements",Ee.commandStr));var yr=Xo(function(Jr,sn){if(Pe){var Hr=Jr.link(Pe);return Jr.ELEMENTS=Hr,Hr}return Jr.ELEMENTS=null,null});return yr.value=Pe,yr}else if(Qu in wr){var Or=wr[Qu];return Vi(Or,function(Jr,sn){var Hr=Jr.shared,In=Hr.isBufferArgs,pa=Hr.elements,Ja=Jr.invoke(sn,Or),ca=sn.def("null"),Ta=sn.def(In,"(",Ja,")"),Za=Jr.cond(Ta).then(ca,"=",pa,".createStream(",Ja,");").else(ca,"=",pa,".getElements(",Ja,");");return Tt.optional(function(){Jr.assert(Za.else,"!"+Ja+"||"+ca,"invalid elements")}),sn.entry(Za),sn.exit(Jr.cond(Ta).then(pa,".destroyStream(",ca,");")),Jr.ELEMENTS=ca,ca})}return null}var ar=Tr();function rr(){if(Lu in Je){var Pe=Je[Lu];return Tt.commandParameter(Pe,Fa,"invalid primitve",Ee.commandStr),Xo(function(Or,Jr){return Fa[Pe]})}else if(Lu in wr){var yr=wr[Lu];return Vi(yr,function(Or,Jr){var sn=Or.constants.primTypes,Hr=Or.invoke(Jr,yr);return Tt.optional(function(){Or.assert(Jr,Hr+" in "+sn,"invalid primitive, must be one of "+Object.keys(Fa))}),Jr.def(sn,"[",Hr,"]")})}else if(ar)return bu(ar)?ar.value?Xo(function(Or,Jr){return Jr.def(Or.ELEMENTS,".primType")}):Xo(function(){return Vl}):new Es(ar.thisDep,ar.contextDep,ar.propDep,function(Or,Jr){var sn=Or.ELEMENTS;return Jr.def(sn,"?",sn,".primType:",Vl)});return null}function vr(Pe,yr){if(Pe in Je){var Or=Je[Pe]|0;return Tt.command(!yr||Or>=0,"invalid "+Pe,Ee.commandStr),Xo(function(sn,Hr){return yr&&(sn.OFFSET=Or),Or})}else if(Pe in wr){var Jr=wr[Pe];return Vi(Jr,function(sn,Hr){var In=sn.invoke(Hr,Jr);return yr&&(sn.OFFSET=In,Tt.optional(function(){sn.assert(Hr,In+">=0","invalid "+Pe)})),In})}else if(yr&&ar)return Xo(function(sn,Hr){return sn.OFFSET="0",0});return null}var ke=vr(Lf,!0);function tr(){if(gu in Je){var Pe=Je[gu]|0;return Tt.command(typeof Pe=="number"&&Pe>=0,"invalid vertex count",Ee.commandStr),Xo(function(){return Pe})}else if(gu in wr){var yr=wr[gu];return Vi(yr,function(sn,Hr){var In=sn.invoke(Hr,yr);return Tt.optional(function(){sn.assert(Hr,"typeof "+In+'==="number"&&'+In+">=0&&"+In+"===("+In+"|0)","invalid vertex count")}),In})}else if(ar)if(bu(ar)){if(ar)return ke?new Es(ke.thisDep,ke.contextDep,ke.propDep,function(sn,Hr){var In=Hr.def(sn.ELEMENTS,".vertCount-",sn.OFFSET);return Tt.optional(function(){sn.assert(Hr,In+">=0","invalid vertex offset/element buffer too small")}),In}):Xo(function(sn,Hr){return Hr.def(sn.ELEMENTS,".vertCount")});var Or=Xo(function(){return-1});return Tt.optional(function(){Or.MISSING=!0}),Or}else{var Jr=new Es(ar.thisDep||ke.thisDep,ar.contextDep||ke.contextDep,ar.propDep||ke.propDep,function(sn,Hr){var In=sn.ELEMENTS;return sn.OFFSET?Hr.def(In,"?",In,".vertCount-",sn.OFFSET,":-1"):Hr.def(In,"?",In,".vertCount:-1")});return Tt.optional(function(){Jr.DYNAMIC=!0}),Jr}return null}return{elements:ar,primitive:rr(),count:tr(),instances:vr(Pf,!1),offset:ke}}function Da(Re,Ee){var Je=Re.static,wr=Re.dynamic,Tr={};return ce.forEach(function(ar){var rr=Ye(ar);function vr(ke,tr){if(ar in Je){var Pe=ke(Je[ar]);Tr[rr]=Xo(function(){return Pe})}else if(ar in wr){var yr=wr[ar];Tr[rr]=Vi(yr,function(Or,Jr){return tr(Or,Jr,Or.invoke(Jr,yr))})}}switch(ar){case er:case Nl:case fl:case Df:case kl:case vl:case ll:case hl:case Fl:case fc:return vr(function(ke){return Tt.commandType(ke,"boolean",ar,Ee.commandStr),ke},function(ke,tr,Pe){return Tt.optional(function(){ke.assert(tr,"typeof "+Pe+'==="boolean"',"invalid flag "+ar,ke.commandStr)}),Pe});case fd:return vr(function(ke){return Tt.commandParameter(ke,Sc,"invalid "+ar,Ee.commandStr),Sc[ke]},function(ke,tr,Pe){var yr=ke.constants.compareFuncs;return Tt.optional(function(){ke.assert(tr,Pe+" in "+yr,"invalid "+ar+", must be one of "+Object.keys(Sc))}),tr.def(yr,"[",Pe,"]")});case Bl:return vr(function(ke){return Tt.command(Ya(ke)&&ke.length===2&&typeof ke[0]=="number"&&typeof ke[1]=="number"&&ke[0]<=ke[1],"depth range is 2d array",Ee.commandStr),ke},function(ke,tr,Pe){Tt.optional(function(){ke.assert(tr,ke.shared.isArrayLike+"("+Pe+")&&"+Pe+".length===2&&typeof "+Pe+'[0]==="number"&&typeof '+Pe+'[1]==="number"&&'+Pe+"[0]<="+Pe+"[1]","depth range must be a 2d array")});var yr=tr.def("+",Pe,"[0]"),Or=tr.def("+",Pe,"[1]");return[yr,Or]});case If:return vr(function(ke){Tt.commandType(ke,"object","blend.func",Ee.commandStr);var tr="srcRGB"in ke?ke.srcRGB:ke.src,Pe="srcAlpha"in ke?ke.srcAlpha:ke.src,yr="dstRGB"in ke?ke.dstRGB:ke.dst,Or="dstAlpha"in ke?ke.dstAlpha:ke.dst;return Tt.commandParameter(tr,ms,rr+".srcRGB",Ee.commandStr),Tt.commandParameter(Pe,ms,rr+".srcAlpha",Ee.commandStr),Tt.commandParameter(yr,ms,rr+".dstRGB",Ee.commandStr),Tt.commandParameter(Or,ms,rr+".dstAlpha",Ee.commandStr),Tt.command(xl.indexOf(tr+", "+yr)===-1,"unallowed blending combination (srcRGB, dstRGB) = ("+tr+", "+yr+")",Ee.commandStr),[ms[tr],ms[yr],ms[Pe],ms[Or]]},function(ke,tr,Pe){var yr=ke.constants.blendFuncs;Tt.optional(function(){ke.assert(tr,Pe+"&&typeof "+Pe+'==="object"',"invalid blend func, must be an object")});function Or(ca,Ta){var Za=tr.def('"',ca,Ta,'" in ',Pe,"?",Pe,".",ca,Ta,":",Pe,".",ca);return Tt.optional(function(){ke.assert(tr,Za+" in "+yr,"invalid "+ar+"."+ca+Ta+", must be one of "+Object.keys(ms))}),Za}var Jr=Or("src","RGB"),sn=Or("dst","RGB");Tt.optional(function(){var ca=ke.constants.invalidBlendCombinations;ke.assert(tr,ca+".indexOf("+Jr+'+", "+'+sn+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var Hr=tr.def(yr,"[",Jr,"]"),In=tr.def(yr,"[",Or("src","Alpha"),"]"),pa=tr.def(yr,"[",sn,"]"),Ja=tr.def(yr,"[",Or("dst","Alpha"),"]");return[Hr,pa,In,Ja]});case Zc:return vr(function(ke){if(typeof ke=="string")return Tt.commandParameter(ke,ht,"invalid "+ar,Ee.commandStr),[ht[ke],ht[ke]];if(typeof ke=="object")return Tt.commandParameter(ke.rgb,ht,ar+".rgb",Ee.commandStr),Tt.commandParameter(ke.alpha,ht,ar+".alpha",Ee.commandStr),[ht[ke.rgb],ht[ke.alpha]];Tt.commandRaise("invalid blend.equation",Ee.commandStr)},function(ke,tr,Pe){var yr=ke.constants.blendEquations,Or=tr.def(),Jr=tr.def(),sn=ke.cond("typeof ",Pe,'==="string"');return Tt.optional(function(){function Hr(In,pa,Ja){ke.assert(In,Ja+" in "+yr,"invalid "+pa+", must be one of "+Object.keys(ht))}Hr(sn.then,ar,Pe),ke.assert(sn.else,Pe+"&&typeof "+Pe+'==="object"',"invalid "+ar),Hr(sn.else,ar+".rgb",Pe+".rgb"),Hr(sn.else,ar+".alpha",Pe+".alpha")}),sn.then(Or,"=",Jr,"=",yr,"[",Pe,"];"),sn.else(Or,"=",yr,"[",Pe,".rgb];",Jr,"=",yr,"[",Pe,".alpha];"),tr(sn),[Or,Jr]});case Rl:return vr(function(ke){return Tt.command(Ya(ke)&&ke.length===4,"blend.color must be a 4d array",Ee.commandStr),On(4,function(tr){return+ke[tr]})},function(ke,tr,Pe){return Tt.optional(function(){ke.assert(tr,ke.shared.isArrayLike+"("+Pe+")&&"+Pe+".length===4","blend.color must be a 4d array")}),On(4,function(yr){return tr.def("+",Pe,"[",yr,"]")})});case qc:return vr(function(ke){return Tt.commandType(ke,"number",rr,Ee.commandStr),ke|0},function(ke,tr,Pe){return Tt.optional(function(){ke.assert(tr,"typeof "+Pe+'==="number"',"invalid stencil.mask")}),tr.def(Pe,"|0")});case lc:return vr(function(ke){Tt.commandType(ke,"object",rr,Ee.commandStr);var tr=ke.cmp||"keep",Pe=ke.ref||0,yr="mask"in ke?ke.mask:-1;return Tt.commandParameter(tr,Sc,ar+".cmp",Ee.commandStr),Tt.commandType(Pe,"number",ar+".ref",Ee.commandStr),Tt.commandType(yr,"number",ar+".mask",Ee.commandStr),[Sc[tr],Pe,yr]},function(ke,tr,Pe){var yr=ke.constants.compareFuncs;Tt.optional(function(){function Hr(){ke.assert(tr,Array.prototype.join.call(arguments,""),"invalid stencil.func")}Hr(Pe+"&&typeof ",Pe,'==="object"'),Hr('!("cmp" in ',Pe,")||(",Pe,".cmp in ",yr,")")});var Or=tr.def('"cmp" in ',Pe,"?",yr,"[",Pe,".cmp]",":",yu),Jr=tr.def(Pe,".ref|0"),sn=tr.def('"mask" in ',Pe,"?",Pe,".mask|0:-1");return[Or,Jr,sn]});case rs:case dc:return vr(function(ke){Tt.commandType(ke,"object",rr,Ee.commandStr);var tr=ke.fail||"keep",Pe=ke.zfail||"keep",yr=ke.zpass||"keep";return Tt.commandParameter(tr,xu,ar+".fail",Ee.commandStr),Tt.commandParameter(Pe,xu,ar+".zfail",Ee.commandStr),Tt.commandParameter(yr,xu,ar+".zpass",Ee.commandStr),[ar===dc?ec:nf,xu[tr],xu[Pe],xu[yr]]},function(ke,tr,Pe){var yr=ke.constants.stencilOps;Tt.optional(function(){ke.assert(tr,Pe+"&&typeof "+Pe+'==="object"',"invalid "+ar)});function Or(Jr){return Tt.optional(function(){ke.assert(tr,'!("'+Jr+'" in '+Pe+")||("+Pe+"."+Jr+" in "+yr+")","invalid "+ar+"."+Jr+", must be one of "+Object.keys(xu))}),tr.def('"',Jr,'" in ',Pe,"?",yr,"[",Pe,".",Jr,"]:",yu)}return[ar===dc?ec:nf,Or("fail"),Or("zfail"),Or("zpass")]});case dl:return vr(function(ke){Tt.commandType(ke,"object",rr,Ee.commandStr);var tr=ke.factor|0,Pe=ke.units|0;return Tt.commandType(tr,"number",rr+".factor",Ee.commandStr),Tt.commandType(Pe,"number",rr+".units",Ee.commandStr),[tr,Pe]},function(ke,tr,Pe){Tt.optional(function(){ke.assert(tr,Pe+"&&typeof "+Pe+'==="object"',"invalid "+ar)});var yr=tr.def(Pe,".factor|0"),Or=tr.def(Pe,".units|0");return[yr,Or]});case ld:return vr(function(ke){var tr=0;return ke==="front"?tr=nf:ke==="back"&&(tr=ec),Tt.command(!!tr,rr,Ee.commandStr),tr},function(ke,tr,Pe){return Tt.optional(function(){ke.assert(tr,Pe+'==="front"||'+Pe+'==="back"',"invalid cull.face")}),tr.def(Pe,'==="front"?',nf,":",ec)});case $c:return vr(function(ke){return Tt.command(typeof ke=="number"&&ke>=zr.lineWidthDims[0]&&ke<=zr.lineWidthDims[1],"invalid line width, must be a positive number between "+zr.lineWidthDims[0]+" and "+zr.lineWidthDims[1],Ee.commandStr),ke},function(ke,tr,Pe){return Tt.optional(function(){ke.assert(tr,"typeof "+Pe+'==="number"&&'+Pe+">="+zr.lineWidthDims[0]+"&&"+Pe+"<="+zr.lineWidthDims[1],"invalid line width")}),Pe});case Kc:return vr(function(ke){return Tt.commandParameter(ke,Vf,rr,Ee.commandStr),Vf[ke]},function(ke,tr,Pe){return Tt.optional(function(){ke.assert(tr,Pe+'==="cw"||'+Pe+'==="ccw"',"invalid frontFace, must be one of cw,ccw")}),tr.def(Pe+'==="cw"?'+Hl+":"+af)});case Of:return vr(function(ke){return Tt.command(Ya(ke)&&ke.length===4,"color.mask must be length 4 array",Ee.commandStr),ke.map(function(tr){return!!tr})},function(ke,tr,Pe){return Tt.optional(function(){ke.assert(tr,ke.shared.isArrayLike+"("+Pe+")&&"+Pe+".length===4","invalid color.mask")}),On(4,function(yr){return"!!"+Pe+"["+yr+"]"})});case $u:return vr(function(ke){Tt.command(typeof ke=="object"&&ke,rr,Ee.commandStr);var tr="value"in ke?ke.value:1,Pe=!!ke.invert;return Tt.command(typeof tr=="number"&&tr>=0&&tr<=1,"sample.coverage.value must be a number between 0 and 1",Ee.commandStr),[tr,Pe]},function(ke,tr,Pe){Tt.optional(function(){ke.assert(tr,Pe+"&&typeof "+Pe+'==="object"',"invalid sample.coverage")});var yr=tr.def('"value" in ',Pe,"?+",Pe,".value:1"),Or=tr.def("!!",Pe,".invert");return[yr,Or]})}}),Tr}function vo(Re,Ee){var Je=Re.static,wr=Re.dynamic,Tr={};return Object.keys(Je).forEach(function(ar){var rr=Je[ar],vr;if(typeof rr=="number"||typeof rr=="boolean")vr=Xo(function(){return rr});else if(typeof rr=="function"){var ke=rr._reglType;ke==="texture2d"||ke==="textureCube"?vr=Xo(function(tr){return tr.link(rr)}):ke==="framebuffer"||ke==="framebufferCube"?(Tt.command(rr.color.length>0,'missing color attachment for framebuffer sent to uniform "'+ar+'"',Ee.commandStr),vr=Xo(function(tr){return tr.link(rr.color[0])})):Tt.commandRaise('invalid data for uniform "'+ar+'"',Ee.commandStr)}else Ya(rr)?vr=Xo(function(tr){var Pe=tr.global.def("[",On(rr.length,function(yr){return Tt.command(typeof rr[yr]=="number"||typeof rr[yr]=="boolean","invalid uniform "+ar,tr.commandStr),rr[yr]}),"]");return Pe}):Tt.commandRaise('invalid or missing data for uniform "'+ar+'"',Ee.commandStr);vr.value=rr,Tr[ar]=vr}),Object.keys(wr).forEach(function(ar){var rr=wr[ar];Tr[ar]=Vi(rr,function(vr,ke){return vr.invoke(ke,rr)})}),Tr}function Wa(Re,Ee){var Je=Re.static,wr=Re.dynamic,Tr={};return Object.keys(Je).forEach(function(ar){var rr=Je[ar],vr=Te.id(ar),ke=new st;if(of(rr))ke.state=Zs,ke.buffer=rn.getBuffer(rn.create(rr,Ju,!1,!0)),ke.type=0;else{var tr=rn.getBuffer(rr);if(tr)ke.state=Zs,ke.buffer=tr,ke.type=0;else if(Tt.command(typeof rr=="object"&&rr,"invalid data for attribute "+ar,Ee.commandStr),"constant"in rr){var Pe=rr.constant;ke.buffer="null",ke.state=vu,typeof Pe=="number"?ke.x=Pe:(Tt.command(Ya(Pe)&&Pe.length>0&&Pe.length<=4,"invalid constant for attribute "+ar,Ee.commandStr),Ku.forEach(function(pa,Ja){Ja<Pe.length&&(ke[pa]=Pe[Ja])}))}else{of(rr.buffer)?tr=rn.getBuffer(rn.create(rr.buffer,Ju,!1,!0)):tr=rn.getBuffer(rr.buffer),Tt.command(!!tr,'missing buffer for attribute "'+ar+'"',Ee.commandStr);var yr=rr.offset|0;Tt.command(yr>=0,'invalid offset for attribute "'+ar+'"',Ee.commandStr);var Or=rr.stride|0;Tt.command(Or>=0&&Or<256,'invalid stride for attribute "'+ar+'", must be integer betweeen [0, 255]',Ee.commandStr);var Jr=rr.size|0;Tt.command(!("size"in rr)||Jr>0&&Jr<=4,'invalid size for attribute "'+ar+'", must be 1,2,3,4',Ee.commandStr);var sn=!!rr.normalized,Hr=0;"type"in rr&&(Tt.commandParameter(rr.type,$i,"invalid type for attribute "+ar,Ee.commandStr),Hr=$i[rr.type]);var In=rr.divisor|0;"divisor"in rr&&(Tt.command(In===0||yt,'cannot specify divisor for attribute "'+ar+'", instancing not supported',Ee.commandStr),Tt.command(In>=0,'invalid divisor for attribute "'+ar+'"',Ee.commandStr)),Tt.optional(function(){var pa=Ee.commandStr,Ja=["buffer","offset","divisor","normalized","type","size","stride"];Object.keys(rr).forEach(function(ca){Tt.command(Ja.indexOf(ca)>=0,'unknown parameter "'+ca+'" for attribute pointer "'+ar+'" (valid parameters are '+Ja+")",pa)})}),ke.buffer=tr,ke.state=Zs,ke.size=Jr,ke.normalized=sn,ke.type=Hr||tr.dtype,ke.offset=yr,ke.stride=Or,ke.divisor=In}}Tr[ar]=Xo(function(pa,Ja){var ca=pa.attribCache;if(vr in ca)return ca[vr];var Ta={isStream:!1};return Object.keys(ke).forEach(function(Za){Ta[Za]=ke[Za]}),ke.buffer&&(Ta.buffer=pa.link(ke.buffer),Ta.type=Ta.type||Ta.buffer+".dtype"),ca[vr]=Ta,Ta})}),Object.keys(wr).forEach(function(ar){var rr=wr[ar];function vr(ke,tr){var Pe=ke.invoke(tr,rr),yr=ke.shared,Or=ke.constants,Jr=yr.isBufferArgs,sn=yr.buffer;Tt.optional(function(){ke.assert(tr,Pe+"&&(typeof "+Pe+'==="object"||typeof '+Pe+'==="function")&&('+Jr+"("+Pe+")||"+sn+".getBuffer("+Pe+")||"+sn+".getBuffer("+Pe+".buffer)||"+Jr+"("+Pe+'.buffer)||("constant" in '+Pe+"&&(typeof "+Pe+'.constant==="number"||'+yr.isArrayLike+"("+Pe+".constant))))",'invalid dynamic attribute "'+ar+'"')});var Hr={isStream:tr.def(!1)},In=new st;In.state=Zs,Object.keys(In).forEach(function(Ta){Hr[Ta]=tr.def(""+In[Ta])});var pa=Hr.buffer,Ja=Hr.type;tr("if(",Jr,"(",Pe,")){",Hr.isStream,"=true;",pa,"=",sn,".createStream(",Ju,",",Pe,");",Ja,"=",pa,".dtype;","}else{",pa,"=",sn,".getBuffer(",Pe,");","if(",pa,"){",Ja,"=",pa,".dtype;",'}else if("constant" in ',Pe,"){",Hr.state,"=",vu,";","if(typeof "+Pe+'.constant === "number"){',Hr[Ku[0]],"=",Pe,".constant;",Ku.slice(1).map(function(Ta){return Hr[Ta]}).join("="),"=0;","}else{",Ku.map(function(Ta,Za){return Hr[Ta]+"="+Pe+".constant.length>"+Za+"?"+Pe+".constant["+Za+"]:0;"}).join(""),"}}else{","if(",Jr,"(",Pe,".buffer)){",pa,"=",sn,".createStream(",Ju,",",Pe,".buffer);","}else{",pa,"=",sn,".getBuffer(",Pe,".buffer);","}",Ja,'="type" in ',Pe,"?",Or.glTypes,"[",Pe,".type]:",pa,".dtype;",Hr.normalized,"=!!",Pe,".normalized;");function ca(Ta){tr(Hr[Ta],"=",Pe,".",Ta,"|0;")}return ca("size"),ca("offset"),ca("stride"),ca("divisor"),tr("}}"),tr.exit("if(",Hr.isStream,"){",sn,".destroyStream(",pa,");","}"),Hr}Tr[ar]=Vi(rr,vr)}),Tr}function Go(Re,Ee){var Je=Re.static,wr=Re.dynamic;if(pc in Je){var Tr=Je[pc];return Tr!==null&&Tn.getVAO(Tr)===null&&(Tr=Tn.createVAO(Tr)),Xo(function(rr){return rr.link(Tn.getVAO(Tr))})}else if(pc in wr){var ar=wr[pc];return Vi(ar,function(rr,vr){var ke=rr.invoke(vr,ar);return vr.def(rr.shared.vao+".getVAO("+ke+")")})}return null}function Hi(Re){var Ee=Re.static,Je=Re.dynamic,wr={};return Object.keys(Ee).forEach(function(Tr){var ar=Ee[Tr];wr[Tr]=Xo(function(rr,vr){return typeof ar=="number"||typeof ar=="boolean"?""+ar:rr.link(ar)})}),Object.keys(Je).forEach(function(Tr){var ar=Je[Tr];wr[Tr]=Vi(ar,function(rr,vr){return rr.invoke(vr,ar)})}),wr}function vi(Re,Ee,Je,wr,Tr){var ar=Re.static,rr=Re.dynamic;Tt.optional(function(){var ca=[qu,pu,vc,Qu,Lu,Lf,gu,Pf,hc,pc].concat(ce);function Ta(Za){Object.keys(Za).forEach(function(Ii){Tt.command(ca.indexOf(Ii)>=0,'unknown parameter "'+Ii+'"',Tr.commandStr)})}Ta(ar),Ta(rr)});var vr=fa(Re,Ee),ke=Rn(Re,Tr),tr=da(Re,ke,Tr),Pe=Ba(Re,Tr),yr=Da(Re,Tr),Or=wa(Re,Tr,vr);function Jr(ca){var Ta=tr[ca];Ta&&(yr[ca]=Ta)}Jr(ou),Jr(Ye(Du));var sn=Object.keys(yr).length>0,Hr={framebuffer:ke,draw:Pe,shader:Or,state:yr,dirty:sn,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(Hr.profile=Xn(Re,Tr),Hr.uniforms=vo(Je,Tr),Hr.drawVAO=Hr.scopeVAO=Go(Re,Tr),!Hr.drawVAO&&Or.program&&!vr&&je.angle_instanced_arrays){var In=!0,pa=Or.program.attributes.map(function(ca){var Ta=Ee.static[ca];return In=In&&!!Ta,Ta});if(In&&pa.length>0){var Ja=Tn.getVAO(Tn.createVAO(pa));Hr.drawVAO=new Es(null,null,null,function(ca,Ta){return ca.link(Ja)}),Hr.useVAO=!0}}return vr?Hr.useVAO=!0:Hr.attributes=Wa(Ee,Tr),Hr.context=Hi(wr,Tr),Hr}function ao(Re,Ee,Je){var wr=Re.shared,Tr=wr.context,ar=Re.scope();Object.keys(Je).forEach(function(rr){Ee.save(Tr,"."+rr);var vr=Je[rr],ke=vr.append(Re,Ee);Array.isArray(ke)?ar(Tr,".",rr,"=[",ke.join(),"];"):ar(Tr,".",rr,"=",ke,";")}),Ee(ar)}function Uo(Re,Ee,Je,wr){var Tr=Re.shared,ar=Tr.gl,rr=Tr.framebuffer,vr;Ot&&(vr=Ee.def(Tr.extensions,".webgl_draw_buffers"));var ke=Re.constants,tr=ke.drawBuffer,Pe=ke.backBuffer,yr;Je?yr=Je.append(Re,Ee):yr=Ee.def(rr,".next"),wr||Ee("if(",yr,"!==",rr,".cur){"),Ee("if(",yr,"){",ar,".bindFramebuffer(",yl,",",yr,".framebuffer);"),Ot&&Ee(vr,".drawBuffersWEBGL(",tr,"[",yr,".colorAttachments.length]);"),Ee("}else{",ar,".bindFramebuffer(",yl,",null);"),Ot&&Ee(vr,".drawBuffersWEBGL(",Pe,");"),Ee("}",rr,".cur=",yr,";"),wr||Ee("}")}function ns(Re,Ee,Je){var wr=Re.shared,Tr=wr.gl,ar=Re.current,rr=Re.next,vr=wr.current,ke=wr.next,tr=Re.cond(vr,".dirty");ce.forEach(function(Pe){var yr=Ye(Pe);if(!(yr in Je.state)){var Or,Jr;if(yr in rr){Or=rr[yr],Jr=ar[yr];var sn=On(zt[yr].length,function(In){return tr.def(Or,"[",In,"]")});tr(Re.cond(sn.map(function(In,pa){return In+"!=="+Jr+"["+pa+"]"}).join("||")).then(Tr,".",xe[yr],"(",sn,");",sn.map(function(In,pa){return Jr+"["+pa+"]="+In}).join(";"),";"))}else{Or=tr.def(ke,".",yr);var Hr=Re.cond(Or,"!==",vr,".",yr);tr(Hr),yr in Me?Hr(Re.cond(Or).then(Tr,".enable(",Me[yr],");").else(Tr,".disable(",Me[yr],");"),vr,".",yr,"=",Or,";"):Hr(Tr,".",xe[yr],"(",Or,");",vr,".",yr,"=",Or,";")}}}),Object.keys(Je.state).length===0&&tr(vr,".dirty=false;"),Ee(tr)}function vs(Re,Ee,Je,wr){var Tr=Re.shared,ar=Re.current,rr=Tr.current,vr=Tr.gl;tu(Object.keys(Je)).forEach(function(ke){var tr=Je[ke];if(!(wr&&!wr(tr))){var Pe=tr.append(Re,Ee);if(Me[ke]){var yr=Me[ke];bu(tr)?Pe?Ee(vr,".enable(",yr,");"):Ee(vr,".disable(",yr,");"):Ee(Re.cond(Pe).then(vr,".enable(",yr,");").else(vr,".disable(",yr,");")),Ee(rr,".",ke,"=",Pe,";")}else if(Ya(Pe)){var Or=ar[ke];Ee(vr,".",xe[ke],"(",Pe,");",Pe.map(function(Jr,sn){return Or+"["+sn+"]="+Jr}).join(";"),";")}else Ee(vr,".",xe[ke],"(",Pe,");",rr,".",ke,"=",Pe,";")}})}function qo(Re,Ee){yt&&(Re.instancing=Ee.def(Re.shared.extensions,".angle_instanced_arrays"))}function $a(Re,Ee,Je,wr,Tr){var ar=Re.shared,rr=Re.stats,vr=ar.current,ke=ar.timer,tr=Je.profile;function Pe(){return typeof performance=="undefined"?"Date.now()":"performance.now()"}var yr,Or;function Jr(ca){yr=Ee.def(),ca(yr,"=",Pe(),";"),typeof Tr=="string"?ca(rr,".count+=",Tr,";"):ca(rr,".count++;"),N&&(wr?(Or=Ee.def(),ca(Or,"=",ke,".getNumPendingQueries();")):ca(ke,".beginQuery(",rr,");"))}function sn(ca){ca(rr,".cpuTime+=",Pe(),"-",yr,";"),N&&(wr?ca(ke,".pushScopeStats(",Or,",",ke,".getNumPendingQueries(),",rr,");"):ca(ke,".endQuery();"))}function Hr(ca){var Ta=Ee.def(vr,".profile");Ee(vr,".profile=",ca,";"),Ee.exit(vr,".profile=",Ta,";")}var In;if(tr){if(bu(tr)){tr.enable?(Jr(Ee),sn(Ee.exit),Hr("true")):Hr("false");return}In=tr.append(Re,Ee),Hr(In)}else In=Ee.def(vr,".profile");var pa=Re.block();Jr(pa),Ee("if(",In,"){",pa,"}");var Ja=Re.block();sn(Ja),Ee.exit("if(",In,"){",Ja,"}")}function ys(Re,Ee,Je,wr,Tr){var ar=Re.shared;function rr(ke){switch(ke){case Gf:case yc:case Yf:return 2;case Uf:case xc:case ef:return 3;case Jc:case tf:case Xf:return 4;default:return 1}}function vr(ke,tr,Pe){var yr=ar.gl,Or=Ee.def(ke,".location"),Jr=Ee.def(ar.attributes,"[",Or,"]"),sn=Pe.state,Hr=Pe.buffer,In=[Pe.x,Pe.y,Pe.z,Pe.w],pa=["buffer","normalized","offset","stride"];function Ja(){Ee("if(!",Jr,".buffer){",yr,".enableVertexAttribArray(",Or,");}");var Ta=Pe.type,Za;if(Pe.size?Za=Ee.def(Pe.size,"||",tr):Za=tr,Ee("if(",Jr,".type!==",Ta,"||",Jr,".size!==",Za,"||",pa.map(function(No){return Jr+"."+No+"!=="+Pe[No]}).join("||"),"){",yr,".bindBuffer(",Ju,",",Hr,".buffer);",yr,".vertexAttribPointer(",[Or,Za,Ta,Pe.normalized,Pe.stride,Pe.offset],");",Jr,".type=",Ta,";",Jr,".size=",Za,";",pa.map(function(No){return Jr+"."+No+"="+Pe[No]+";"}).join(""),"}"),yt){var Ii=Pe.divisor;Ee("if(",Jr,".divisor!==",Ii,"){",Re.instancing,".vertexAttribDivisorANGLE(",[Or,Ii],");",Jr,".divisor=",Ii,";}")}}function ca(){Ee("if(",Jr,".buffer){",yr,".disableVertexAttribArray(",Or,");",Jr,".buffer=null;","}if(",Ku.map(function(Ta,Za){return Jr+"."+Ta+"!=="+In[Za]}).join("||"),"){",yr,".vertexAttrib4f(",Or,",",In,");",Ku.map(function(Ta,Za){return Jr+"."+Ta+"="+In[Za]+";"}).join(""),"}")}sn===Zs?Ja():sn===vu?ca():(Ee("if(",sn,"===",Zs,"){"),Ja(),Ee("}else{"),ca(),Ee("}"))}wr.forEach(function(ke){var tr=ke.name,Pe=Je.attributes[tr],yr;if(Pe){if(!Tr(Pe))return;yr=Pe.append(Re,Ee)}else{if(!Tr(rc))return;var Or=Re.scopeAttrib(tr);Tt.optional(function(){Re.assert(Ee,Or+".state","missing attribute "+tr)}),yr={},Object.keys(new st).forEach(function(Jr){yr[Jr]=Ee.def(Or,".",Jr)})}vr(Re.link(ke),rr(ke.info.type),yr)})}function Ei(Re,Ee,Je,wr,Tr){for(var ar=Re.shared,rr=ar.gl,vr,ke=0;ke<wr.length;++ke){var tr=wr[ke],Pe=tr.name,yr=tr.info.type,Or=Je.uniforms[Pe],Jr=Re.link(tr),sn=Jr+".location",Hr;if(Or){if(!Tr(Or))continue;if(bu(Or)){var In=Or.value;if(Tt.command(In!==null&&typeof In!="undefined",'missing uniform "'+Pe+'"',Re.commandStr),yr===Ec||yr===wc){Tt.command(typeof In=="function"&&(yr===Ec&&(In._reglType==="texture2d"||In._reglType==="framebuffer")||yr===wc&&(In._reglType==="textureCube"||In._reglType==="framebufferCube")),"invalid texture for uniform "+Pe,Re.commandStr);var pa=Re.link(In._texture||In.color[0]._texture);Ee(rr,".uniform1i(",sn,",",pa+".bind());"),Ee.exit(pa,".unbind();")}else if(yr===jf||yr===rf||yr===bc){Tt.optional(function(){Tt.command(Ya(In),"invalid matrix for uniform "+Pe,Re.commandStr),Tt.command(yr===jf&&In.length===4||yr===rf&&In.length===9||yr===bc&&In.length===16,"invalid length for matrix uniform "+Pe,Re.commandStr)});var Ja=Re.global.def("new Float32Array(["+Array.prototype.slice.call(In)+"])"),ca=2;yr===rf?ca=3:yr===bc&&(ca=4),Ee(rr,".uniformMatrix",ca,"fv(",sn,",false,",Ja,");")}else{switch(yr){case tc:Tt.commandType(In,"number","uniform "+Pe,Re.commandStr),vr="1f";break;case Gf:Tt.command(Ya(In)&&In.length===2,"uniform "+Pe,Re.commandStr),vr="2f";break;case Uf:Tt.command(Ya(In)&&In.length===3,"uniform "+Pe,Re.commandStr),vr="3f";break;case Jc:Tt.command(Ya(In)&&In.length===4,"uniform "+Pe,Re.commandStr),vr="4f";break;case Wf:Tt.commandType(In,"boolean","uniform "+Pe,Re.commandStr),vr="1i";break;case Pu:Tt.commandType(In,"number","uniform "+Pe,Re.commandStr),vr="1i";break;case Yf:Tt.command(Ya(In)&&In.length===2,"uniform "+Pe,Re.commandStr),vr="2i";break;case yc:Tt.command(Ya(In)&&In.length===2,"uniform "+Pe,Re.commandStr),vr="2i";break;case ef:Tt.command(Ya(In)&&In.length===3,"uniform "+Pe,Re.commandStr),vr="3i";break;case xc:Tt.command(Ya(In)&&In.length===3,"uniform "+Pe,Re.commandStr),vr="3i";break;case Xf:Tt.command(Ya(In)&&In.length===4,"uniform "+Pe,Re.commandStr),vr="4i";break;case tf:Tt.command(Ya(In)&&In.length===4,"uniform "+Pe,Re.commandStr),vr="4i";break}Ee(rr,".uniform",vr,"(",sn,",",Ya(In)?Array.prototype.slice.call(In):In,");")}continue}else Hr=Or.append(Re,Ee)}else{if(!Tr(rc))continue;Hr=Ee.def(ar.uniforms,"[",Te.id(Pe),"]")}yr===Ec?(Tt(!Array.isArray(Hr),"must specify a scalar prop for textures"),Ee("if(",Hr,"&&",Hr,'._reglType==="framebuffer"){',Hr,"=",Hr,".color[0];","}")):yr===wc&&(Tt(!Array.isArray(Hr),"must specify a scalar prop for cube maps"),Ee("if(",Hr,"&&",Hr,'._reglType==="framebufferCube"){',Hr,"=",Hr,".color[0];","}")),Tt.optional(function(){function Ys(Eu,nd){Re.assert(Ee,Eu,'bad data or missing for uniform "'+Pe+'".  '+nd)}function xd(Eu){Tt(!Array.isArray(Hr),"must not specify an array type for uniform"),Ys("typeof "+Hr+'==="'+Eu+'"',"invalid type, expected "+Eu)}function su(Eu,nd){Array.isArray(Hr)?Tt(Hr.length===Eu,"must have length "+Eu):Ys(ar.isArrayLike+"("+Hr+")&&"+Hr+".length==="+Eu,"invalid vector, should have length "+Eu,Re.commandStr)}function Ch(Eu){Tt(!Array.isArray(Hr),"must not specify a value type"),Ys("typeof "+Hr+'==="function"&&'+Hr+'._reglType==="texture'+(Eu===Gl?"2d":"Cube")+'"',"invalid texture type",Re.commandStr)}switch(yr){case Pu:xd("number");break;case yc:su(2,"number");break;case xc:su(3,"number");break;case tf:su(4,"number");break;case tc:xd("number");break;case Gf:su(2,"number");break;case Uf:su(3,"number");break;case Jc:su(4,"number");break;case Wf:xd("boolean");break;case Yf:su(2,"boolean");break;case ef:su(3,"boolean");break;case Xf:su(4,"boolean");break;case jf:su(4,"number");break;case rf:su(9,"number");break;case bc:su(16,"number");break;case Ec:Ch(Gl);break;case wc:Ch(Ul);break}});var Ta=1;switch(yr){case Ec:case wc:var Za=Ee.def(Hr,"._texture");Ee(rr,".uniform1i(",sn,",",Za,".bind());"),Ee.exit(Za,".unbind();");continue;case Pu:case Wf:vr="1i";break;case yc:case Yf:vr="2i",Ta=2;break;case xc:case ef:vr="3i",Ta=3;break;case tf:case Xf:vr="4i",Ta=4;break;case tc:vr="1f";break;case Gf:vr="2f",Ta=2;break;case Uf:vr="3f",Ta=3;break;case Jc:vr="4f",Ta=4;break;case jf:vr="Matrix2fv";break;case rf:vr="Matrix3fv";break;case bc:vr="Matrix4fv";break}if(Ee(rr,".uniform",vr,"(",sn,","),vr.charAt(0)==="M"){var Ii=Math.pow(yr-jf+2,2),No=Re.global.def("new Float32Array(",Ii,")");Array.isArray(Hr)?Ee("false,(",On(Ii,function(Ys){return No+"["+Ys+"]="+Hr[Ys]}),",",No,")"):Ee("false,(Array.isArray(",Hr,")||",Hr," instanceof Float32Array)?",Hr,":(",On(Ii,function(Ys){return No+"["+Ys+"]="+Hr+"["+Ys+"]"}),",",No,")")}else Ta>1?Ee(On(Ta,function(Ys){return Array.isArray(Hr)?Hr[Ys]:Hr+"["+Ys+"]"})):(Tt(!Array.isArray(Hr),"uniform value must not be an array"),Ee(Hr));Ee(");")}}function Sa(Re,Ee,Je,wr){var Tr=Re.shared,ar=Tr.gl,rr=Tr.draw,vr=wr.draw;function ke(){var Za=vr.elements,Ii,No=Ee;return Za?((Za.contextDep&&wr.contextDynamic||Za.propDep)&&(No=Je),Ii=Za.append(Re,No)):Ii=No.def(rr,".",Qu),Ii&&No("if("+Ii+")"+ar+".bindBuffer("+gl+","+Ii+".buffer.buffer);"),Ii}function tr(){var Za=vr.count,Ii,No=Ee;return Za?((Za.contextDep&&wr.contextDynamic||Za.propDep)&&(No=Je),Ii=Za.append(Re,No),Tt.optional(function(){Za.MISSING&&Re.assert(Ee,"false","missing vertex count"),Za.DYNAMIC&&Re.assert(No,Ii+">=0","missing vertex count")})):(Ii=No.def(rr,".",gu),Tt.optional(function(){Re.assert(No,Ii+">=0","missing vertex count")})),Ii}var Pe=ke();function yr(Za){var Ii=vr[Za];return Ii?Ii.contextDep&&wr.contextDynamic||Ii.propDep?Ii.append(Re,Je):Ii.append(Re,Ee):Ee.def(rr,".",Za)}var Or=yr(Lu),Jr=yr(Lf),sn=tr();if(typeof sn=="number"){if(sn===0)return}else Je("if(",sn,"){"),Je.exit("}");var Hr,In;yt&&(Hr=yr(Pf),In=Re.instancing);var pa=Pe+".type",Ja=vr.elements&&bu(vr.elements);function ca(){function Za(){Je(In,".drawElementsInstancedANGLE(",[Or,sn,pa,Jr+"<<(("+pa+"-"+jc+")>>1)",Hr],");")}function Ii(){Je(In,".drawArraysInstancedANGLE(",[Or,Jr,sn,Hr],");")}Pe?Ja?Za():(Je("if(",Pe,"){"),Za(),Je("}else{"),Ii(),Je("}")):Ii()}function Ta(){function Za(){Je(ar+".drawElements("+[Or,sn,pa,Jr+"<<(("+pa+"-"+jc+")>>1)"]+");")}function Ii(){Je(ar+".drawArrays("+[Or,Jr,sn]+");")}Pe?Ja?Za():(Je("if(",Pe,"){"),Za(),Je("}else{"),Ii(),Je("}")):Ii()}yt&&(typeof Hr!="number"||Hr>=0)?typeof Hr=="string"?(Je("if(",Hr,">0){"),ca(),Je("}else if(",Hr,"<0){"),Ta(),Je("}")):ca():Ta()}function li(Re,Ee,Je,wr,Tr){var ar=Mn(),rr=ar.proc("body",Tr);return Tt.optional(function(){ar.commandStr=Ee.commandStr,ar.command=ar.link(Ee.commandStr)}),yt&&(ar.instancing=rr.def(ar.shared.extensions,".angle_instanced_arrays")),Re(ar,rr,Je,wr),ar.compile().body}function bi(Re,Ee,Je,wr){qo(Re,Ee),Je.useVAO?Je.drawVAO?Ee(Re.shared.vao,".setVAO(",Je.drawVAO.append(Re,Ee),");"):Ee(Re.shared.vao,".setVAO(",Re.shared.vao,".targetVAO);"):(Ee(Re.shared.vao,".setVAO(null);"),ys(Re,Ee,Je,wr.attributes,function(){return!0})),Ei(Re,Ee,Je,wr.uniforms,function(){return!0}),Sa(Re,Ee,Ee,Je)}function Qo(Re,Ee){var Je=Re.proc("draw",1);qo(Re,Je),ao(Re,Je,Ee.context),Uo(Re,Je,Ee.framebuffer),ns(Re,Je,Ee),vs(Re,Je,Ee.state),$a(Re,Je,Ee,!1,!0);var wr=Ee.shader.progVar.append(Re,Je);if(Je(Re.shared.gl,".useProgram(",wr,".program);"),Ee.shader.program)bi(Re,Je,Ee,Ee.shader.program);else{Je(Re.shared.vao,".setVAO(null);");var Tr=Re.global.def("{}"),ar=Je.def(wr,".id"),rr=Je.def(Tr,"[",ar,"]");Je(Re.cond(rr).then(rr,".call(this,a0);").else(rr,"=",Tr,"[",ar,"]=",Re.link(function(vr){return li(bi,Re,Ee,vr,1)}),"(",wr,");",rr,".call(this,a0);"))}Object.keys(Ee.state).length>0&&Je(Re.shared.current,".dirty=true;")}function ku(Re,Ee,Je,wr){Re.batchId="a1",qo(Re,Ee);function Tr(){return!0}ys(Re,Ee,Je,wr.attributes,Tr),Ei(Re,Ee,Je,wr.uniforms,Tr),Sa(Re,Ee,Ee,Je)}function $f(Re,Ee,Je,wr){qo(Re,Ee);var Tr=Je.contextDep,ar=Ee.def(),rr="a0",vr="a1",ke=Ee.def();Re.shared.props=ke,Re.batchId=ar;var tr=Re.scope(),Pe=Re.scope();Ee(tr.entry,"for(",ar,"=0;",ar,"<",vr,";++",ar,"){",ke,"=",rr,"[",ar,"];",Pe,"}",tr.exit);function yr(pa){return pa.contextDep&&Tr||pa.propDep}function Or(pa){return!yr(pa)}if(Je.needsContext&&ao(Re,Pe,Je.context),Je.needsFramebuffer&&Uo(Re,Pe,Je.framebuffer),vs(Re,Pe,Je.state,yr),Je.profile&&yr(Je.profile)&&$a(Re,Pe,Je,!1,!0),wr)Je.useVAO?Je.drawVAO?yr(Je.drawVAO)?Pe(Re.shared.vao,".setVAO(",Je.drawVAO.append(Re,Pe),");"):tr(Re.shared.vao,".setVAO(",Je.drawVAO.append(Re,tr),");"):tr(Re.shared.vao,".setVAO(",Re.shared.vao,".targetVAO);"):(tr(Re.shared.vao,".setVAO(null);"),ys(Re,tr,Je,wr.attributes,Or),ys(Re,Pe,Je,wr.attributes,yr)),Ei(Re,tr,Je,wr.uniforms,Or),Ei(Re,Pe,Je,wr.uniforms,yr),Sa(Re,tr,Pe,Je);else{var Jr=Re.global.def("{}"),sn=Je.shader.progVar.append(Re,Pe),Hr=Pe.def(sn,".id"),In=Pe.def(Jr,"[",Hr,"]");Pe(Re.shared.gl,".useProgram(",sn,".program);","if(!",In,"){",In,"=",Jr,"[",Hr,"]=",Re.link(function(pa){return li(ku,Re,Je,pa,2)}),"(",sn,");}",In,".call(this,a0[",ar,"],",ar,");")}}function We(Re,Ee){var Je=Re.proc("batch",2);Re.batchId="0",qo(Re,Je);var wr=!1,Tr=!0;Object.keys(Ee.context).forEach(function(Jr){wr=wr||Ee.context[Jr].propDep}),wr||(ao(Re,Je,Ee.context),Tr=!1);var ar=Ee.framebuffer,rr=!1;ar?(ar.propDep?wr=rr=!0:ar.contextDep&&wr&&(rr=!0),rr||Uo(Re,Je,ar)):Uo(Re,Je,null),Ee.state.viewport&&Ee.state.viewport.propDep&&(wr=!0);function vr(Jr){return Jr.contextDep&&wr||Jr.propDep}ns(Re,Je,Ee),vs(Re,Je,Ee.state,function(Jr){return!vr(Jr)}),(!Ee.profile||!vr(Ee.profile))&&$a(Re,Je,Ee,!1,"a1"),Ee.contextDep=wr,Ee.needsContext=Tr,Ee.needsFramebuffer=rr;var ke=Ee.shader.progVar;if(ke.contextDep&&wr||ke.propDep)$f(Re,Je,Ee,null);else{var tr=ke.append(Re,Je);if(Je(Re.shared.gl,".useProgram(",tr,".program);"),Ee.shader.program)$f(Re,Je,Ee,Ee.shader.program);else{Je(Re.shared.vao,".setVAO(null);");var Pe=Re.global.def("{}"),yr=Je.def(tr,".id"),Or=Je.def(Pe,"[",yr,"]");Je(Re.cond(Or).then(Or,".call(this,a0,a1);").else(Or,"=",Pe,"[",yr,"]=",Re.link(function(Jr){return li($f,Re,Ee,Jr,2)}),"(",tr,");",Or,".call(this,a0,a1);"))}}Object.keys(Ee.state).length>0&&Je(Re.shared.current,".dirty=true;")}function Yr(Re,Ee){var Je=Re.proc("scope",3);Re.batchId="a2";var wr=Re.shared,Tr=wr.current;ao(Re,Je,Ee.context),Ee.framebuffer&&Ee.framebuffer.append(Re,Je),tu(Object.keys(Ee.state)).forEach(function(rr){var vr=Ee.state[rr],ke=vr.append(Re,Je);Ya(ke)?ke.forEach(function(tr,Pe){Je.set(Re.next[rr],"["+Pe+"]",tr)}):Je.set(wr.next,"."+rr,ke)}),$a(Re,Je,Ee,!0,!0),[Qu,Lf,gu,Pf,Lu].forEach(function(rr){var vr=Ee.draw[rr];vr&&Je.set(wr.draw,"."+rr,""+vr.append(Re,Je))}),Object.keys(Ee.uniforms).forEach(function(rr){var vr=Ee.uniforms[rr].append(Re,Je);Array.isArray(vr)&&(vr="["+vr.join()+"]"),Je.set(wr.uniforms,"["+Te.id(rr)+"]",vr)}),Object.keys(Ee.attributes).forEach(function(rr){var vr=Ee.attributes[rr].append(Re,Je),ke=Re.scopeAttrib(rr);Object.keys(new st).forEach(function(tr){Je.set(ke,"."+tr,vr[tr])})}),Ee.scopeVAO&&Je.set(wr.vao,".targetVAO",Ee.scopeVAO.append(Re,Je));function ar(rr){var vr=Ee.shader[rr];vr&&Je.set(wr.shader,"."+rr,vr.append(Re,Je))}ar(pu),ar(vc),Object.keys(Ee.state).length>0&&(Je(Tr,".dirty=true;"),Je.exit(Tr,".dirty=true;")),Je("a1(",Re.shared.context,",a0,",Re.batchId,");")}function kr(Re){if(!(typeof Re!="object"||Ya(Re))){for(var Ee=Object.keys(Re),Je=0;Je<Ee.length;++Je)if(qe.isDynamic(Re[Ee[Je]]))return!0;return!1}}function ra(Re,Ee,Je){var wr=Ee.static[Je];if(!wr||!kr(wr))return;var Tr=Re.global,ar=Object.keys(wr),rr=!1,vr=!1,ke=!1,tr=Re.global.def("{}");ar.forEach(function(yr){var Or=wr[yr];if(qe.isDynamic(Or)){typeof Or=="function"&&(Or=wr[yr]=qe.unbox(Or));var Jr=Vi(Or,null);rr=rr||Jr.thisDep,ke=ke||Jr.propDep,vr=vr||Jr.contextDep}else{switch(Tr(tr,".",yr,"="),typeof Or){case"number":Tr(Or);break;case"string":Tr('"',Or,'"');break;case"object":Array.isArray(Or)&&Tr("[",Or.join(),"]");break;default:Tr(Re.link(Or));break}Tr(";")}});function Pe(yr,Or){ar.forEach(function(Jr){var sn=wr[Jr];if(qe.isDynamic(sn)){var Hr=yr.invoke(Or,sn);Or(tr,".",Jr,"=",Hr,";")}})}Ee.dynamic[Je]=new qe.DynamicVariable(Vc,{thisDep:rr,contextDep:vr,propDep:ke,ref:tr,append:Pe}),delete Ee.static[Je]}function oi(Re,Ee,Je,wr,Tr){var ar=Mn();ar.stats=ar.link(Tr),Object.keys(Ee.static).forEach(function(vr){ra(ar,Ee,vr)}),zl.forEach(function(vr){ra(ar,Re,vr)});var rr=vi(Re,Ee,Je,wr,ar);return Qo(ar,rr),Yr(ar,rr),We(ar,rr),C(ar.compile(),{destroy:function(){rr.shader.program.destroy()}})}return{next:Zt,current:zt,procs:function(){var Re=Mn(),Ee=Re.proc("poll"),Je=Re.proc("refresh"),wr=Re.block();Ee(wr),Je(wr);var Tr=Re.shared,ar=Tr.gl,rr=Tr.next,vr=Tr.current;wr(vr,".dirty=false;"),Uo(Re,Ee),Uo(Re,Je,null,!0);var ke;yt&&(ke=Re.link(yt)),je.oes_vertex_array_object&&Je(Re.link(je.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var tr=0;tr<zr.maxAttributes;++tr){var Pe=Je.def(Tr.attributes,"[",tr,"]"),yr=Re.cond(Pe,".buffer");yr.then(ar,".enableVertexAttribArray(",tr,");",ar,".bindBuffer(",Ju,",",Pe,".buffer.buffer);",ar,".vertexAttribPointer(",tr,",",Pe,".size,",Pe,".type,",Pe,".normalized,",Pe,".stride,",Pe,".offset);").else(ar,".disableVertexAttribArray(",tr,");",ar,".vertexAttrib4f(",tr,",",Pe,".x,",Pe,".y,",Pe,".z,",Pe,".w);",Pe,".buffer=null;"),Je(yr),yt&&Je(ke,".vertexAttribDivisorANGLE(",tr,",",Pe,".divisor);")}return Je(Re.shared.vao,".currentVAO=null;",Re.shared.vao,".setVAO(",Re.shared.vao,".targetVAO);"),Object.keys(Me).forEach(function(Or){var Jr=Me[Or],sn=wr.def(rr,".",Or),Hr=Re.block();Hr("if(",sn,"){",ar,".enable(",Jr,")}else{",ar,".disable(",Jr,")}",vr,".",Or,"=",sn,";"),Je(Hr),Ee("if(",sn,"!==",vr,".",Or,"){",Hr,"}")}),Object.keys(xe).forEach(function(Or){var Jr=xe[Or],sn=zt[Or],Hr,In,pa=Re.block();if(pa(ar,".",Jr,"("),Ya(sn)){var Ja=sn.length;Hr=Re.global.def(rr,".",Or),In=Re.global.def(vr,".",Or),pa(On(Ja,function(ca){return Hr+"["+ca+"]"}),");",On(Ja,function(ca){return In+"["+ca+"]="+Hr+"["+ca+"];"}).join("")),Ee("if(",On(Ja,function(ca){return Hr+"["+ca+"]!=="+In+"["+ca+"]"}).join("||"),"){",pa,"}")}else Hr=wr.def(rr,".",Or),In=wr.def(vr,".",Or),pa(Hr,");",vr,".",Or,"=",Hr,";"),Ee("if(",Hr,"!==",In,"){",pa,"}");Je(pa)}),Re.compile()}(),compile:oi}}function md(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}var Hf=34918,hs=34919,td=35007,ed=function(Rt,Te){if(!Te.ext_disjoint_timer_query)return null;var je=[];function zr(){return je.pop()||Te.ext_disjoint_timer_query.createQueryEXT()}function rn(yt){je.push(yt)}var Fr=[];function Xr(yt){var Ot=zr();Te.ext_disjoint_timer_query.beginQueryEXT(td,Ot),Fr.push(Ot),N(Fr.length-1,Fr.length,yt)}function bn(){Te.ext_disjoint_timer_query.endQueryEXT(td)}function wn(){this.startQueryIndex=-1,this.endQueryIndex=-1,this.sum=0,this.stats=null}var Tn=[];function Sn(){return Tn.pop()||new wn}function Nn(yt){Tn.push(yt)}var v=[];function N(yt,Ot,zt){var Zt=Sn();Zt.startQueryIndex=yt,Zt.endQueryIndex=Ot,Zt.sum=0,Zt.stats=zt,v.push(Zt)}var K=[],st=[];function ht(){var yt,Ot,zt=Fr.length;if(zt!==0){st.length=Math.max(st.length,zt+1),K.length=Math.max(K.length,zt+1),K[0]=0,st[0]=0;var Zt=0;for(yt=0,Ot=0;Ot<Fr.length;++Ot){var ce=Fr[Ot];Te.ext_disjoint_timer_query.getQueryObjectEXT(ce,hs)?(Zt+=Te.ext_disjoint_timer_query.getQueryObjectEXT(ce,Hf),rn(ce)):Fr[yt++]=ce,K[Ot+1]=Zt,st[Ot+1]=yt}for(Fr.length=yt,yt=0,Ot=0;Ot<v.length;++Ot){var Me=v[Ot],xe=Me.startQueryIndex,Ye=Me.endQueryIndex;Me.sum+=K[Ye]-K[xe];var fr=st[xe],Vr=st[Ye];Vr===fr?(Me.stats.gpuTime+=Me.sum/1e6,Nn(Me)):(Me.startQueryIndex=fr,Me.endQueryIndex=Vr,v[yt++]=Me)}v.length=yt}}return{beginQuery:Xr,endQuery:bn,pushScopeStats:N,update:ht,getNumPendingQueries:function(){return Fr.length},clear:function(){je.push.apply(je,Fr);for(var yt=0;yt<je.length;yt++)Te.ext_disjoint_timer_query.deleteQueryEXT(je[yt]);Fr.length=0,je.length=0},restore:function(){Fr.length=0,je.length=0}}},yd=16384,Nu=256,rd=1024,bl=34962,Zf="webglcontextlost",_c="webglcontextrestored",El=1,Ru=2,wl=3;function Kf(Rt,Te){for(var je=0;je<Rt.length;++je)if(Rt[je]===Te)return je;return-1}function sf(Rt){var Te=Wn(Rt);if(!Te)return null;var je=Te.gl,zr=je.getContextAttributes(),rn=je.isContextLost(),Fr=Cn(je,Te);if(!Fr)return null;var Xr=vn(),bn=md(),wn=Fr.extensions,Tn=ed(je,wn),Sn=tn(),Nn=je.drawingBufferWidth,v=je.drawingBufferHeight,N={tick:0,time:0,viewportWidth:Nn,viewportHeight:v,framebufferWidth:Nn,framebufferHeight:v,drawingBufferWidth:Nn,drawingBufferHeight:v,pixelRatio:Te.pixelRatio},K={},st={elements:null,primitive:4,count:-1,offset:0,instances:-1},ht=Wi(je,wn),yt=ga(je,bn,Te,zt),Ot=wf(je,wn,ht,bn,yt);function zt(Sa){return Ot.destroyBuffer(Sa)}var Zt=es(je,wn,yt,bn),ce=Xc(je,Xr,bn,Te),Me=bf(je,wn,ht,function(){fr.procs.poll()},N,bn,Te),xe=Lt(je,wn,ht,bn,Te),Ye=Wc(je,wn,ht,Me,xe,bn),fr=Mc(je,Xr,wn,ht,yt,Zt,Me,Ye,K,Ot,ce,st,N,Tn,Te),Vr=_f(je,Ye,fr.procs.poll,N,zr,wn,ht),mr=fr.next,br=je.canvas,Er=[],Mn=[],Xn=[],Rn=[Te.onDestroy],da=null;function fa(){if(Er.length===0){Tn&&Tn.update(),da=null;return}da=Cr.next(fa),vs();for(var Sa=Er.length-1;Sa>=0;--Sa){var li=Er[Sa];li&&li(N,null,0)}je.flush(),Tn&&Tn.update()}function wa(){!da&&Er.length>0&&(da=Cr.next(fa))}function Ba(){da&&(Cr.cancel(fa),da=null)}function Da(Sa){Sa.preventDefault(),rn=!0,Ba(),Mn.forEach(function(li){li()})}function vo(Sa){je.getError(),rn=!1,Fr.restore(),ce.restore(),yt.restore(),Me.restore(),xe.restore(),Ye.restore(),Ot.restore(),Tn&&Tn.restore(),fr.procs.refresh(),wa(),Xn.forEach(function(li){li()})}br&&(br.addEventListener(Zf,Da,!1),br.addEventListener(_c,vo,!1));function Wa(){Er.length=0,Ba(),br&&(br.removeEventListener(Zf,Da),br.removeEventListener(_c,vo)),ce.clear(),Ye.clear(),xe.clear(),Me.clear(),Zt.clear(),yt.clear(),Ot.clear(),Tn&&Tn.clear(),Rn.forEach(function(Sa){Sa()})}function Go(Sa){Tt(!!Sa,"invalid args to regl({...})"),Tt.type(Sa,"object","invalid args to regl({...})");function li(Tr){var ar=C({},Tr);delete ar.uniforms,delete ar.attributes,delete ar.context,delete ar.vao,"stencil"in ar&&ar.stencil.op&&(ar.stencil.opBack=ar.stencil.opFront=ar.stencil.op,delete ar.stencil.op);function rr(vr){if(vr in ar){var ke=ar[vr];delete ar[vr],Object.keys(ke).forEach(function(tr){ar[vr+"."+tr]=ke[tr]})}}return rr("blend"),rr("depth"),rr("cull"),rr("stencil"),rr("polygonOffset"),rr("scissor"),rr("sample"),"vao"in Tr&&(ar.vao=Tr.vao),ar}function bi(Tr,ar){var rr={},vr={};return Object.keys(Tr).forEach(function(ke){var tr=Tr[ke];if(qe.isDynamic(tr)){vr[ke]=qe.unbox(tr,ke);return}else if(ar&&Array.isArray(tr)){for(var Pe=0;Pe<tr.length;++Pe)if(qe.isDynamic(tr[Pe])){vr[ke]=qe.unbox(tr,ke);return}}rr[ke]=tr}),{dynamic:vr,static:rr}}var Qo=bi(Sa.context||{},!0),ku=bi(Sa.uniforms||{},!0),$f=bi(Sa.attributes||{},!1),We=bi(li(Sa),!1),Yr={gpuTime:0,cpuTime:0,count:0},kr=fr.compile(We,$f,ku,Qo,Yr),ra=kr.draw,oi=kr.batch,Re=kr.scope,Ee=[];function Je(Tr){for(;Ee.length<Tr;)Ee.push(null);return Ee}function wr(Tr,ar){var rr;if(rn&&Tt.raise("context lost"),typeof Tr=="function")return Re.call(this,null,Tr,0);if(typeof ar=="function")if(typeof Tr=="number")for(rr=0;rr<Tr;++rr)Re.call(this,null,ar,rr);else if(Array.isArray(Tr))for(rr=0;rr<Tr.length;++rr)Re.call(this,Tr[rr],ar,rr);else return Re.call(this,Tr,ar,0);else if(typeof Tr=="number"){if(Tr>0)return oi.call(this,Je(Tr|0),Tr|0)}else if(Array.isArray(Tr)){if(Tr.length)return oi.call(this,Tr,Tr.length)}else return ra.call(this,Tr)}return C(wr,{stats:Yr,destroy:function(){kr.destroy()}})}var Hi=Ye.setFBO=Go({framebuffer:qe.define.call(null,El,"framebuffer")});function vi(Sa,li){var bi=0;fr.procs.poll();var Qo=li.color;Qo&&(je.clearColor(+Qo[0]||0,+Qo[1]||0,+Qo[2]||0,+Qo[3]||0),bi|=yd),"depth"in li&&(je.clearDepth(+li.depth),bi|=Nu),"stencil"in li&&(je.clearStencil(li.stencil|0),bi|=rd),Tt(!!bi,"called regl.clear with no buffer specified"),je.clear(bi)}function ao(Sa){if(Tt(typeof Sa=="object"&&Sa,"regl.clear() takes an object as input"),"framebuffer"in Sa)if(Sa.framebuffer&&Sa.framebuffer_reglType==="framebufferCube")for(var li=0;li<6;++li)Hi(C({framebuffer:Sa.framebuffer.faces[li]},Sa),vi);else Hi(Sa,vi);else vi(null,Sa)}function Uo(Sa){Tt.type(Sa,"function","regl.frame() callback must be a function"),Er.push(Sa);function li(){var bi=Kf(Er,Sa);Tt(bi>=0,"cannot cancel a frame twice");function Qo(){var ku=Kf(Er,Qo);Er[ku]=Er[Er.length-1],Er.length-=1,Er.length<=0&&Ba()}Er[bi]=Qo}return wa(),{cancel:li}}function ns(){var Sa=mr.viewport,li=mr.scissor_box;Sa[0]=Sa[1]=li[0]=li[1]=0,N.viewportWidth=N.framebufferWidth=N.drawingBufferWidth=Sa[2]=li[2]=je.drawingBufferWidth,N.viewportHeight=N.framebufferHeight=N.drawingBufferHeight=Sa[3]=li[3]=je.drawingBufferHeight}function vs(){N.tick+=1,N.time=$a(),ns(),fr.procs.poll()}function qo(){Me.refresh(),ns(),fr.procs.refresh(),Tn&&Tn.update()}function $a(){return(tn()-Sn)/1e3}qo();function ys(Sa,li){Tt.type(li,"function","listener callback must be a function");var bi;switch(Sa){case"frame":return Uo(li);case"lost":bi=Mn;break;case"restore":bi=Xn;break;case"destroy":bi=Rn;break;default:Tt.raise("invalid event, must be one of frame,lost,restore,destroy")}return bi.push(li),{cancel:function(){for(var Qo=0;Qo<bi.length;++Qo)if(bi[Qo]===li){bi[Qo]=bi[bi.length-1],bi.pop();return}}}}var Ei=C(Go,{clear:ao,prop:qe.define.bind(null,El),context:qe.define.bind(null,Ru),this:qe.define.bind(null,wl),draw:Go({}),buffer:function(Sa){return yt.create(Sa,bl,!1,!1)},elements:function(Sa){return Zt.create(Sa,!1)},texture:Me.create2D,cube:Me.createCube,renderbuffer:xe.create,framebuffer:Ye.create,framebufferCube:Ye.createCube,vao:Ot.createVAO,attributes:zr,frame:Uo,on:ys,limits:ht,hasExtension:function(Sa){return ht.extensions.indexOf(Sa.toLowerCase())>=0},read:Vr,destroy:Wa,_gl:je,_refresh:qo,poll:function(){vs(),Tn&&Tn.update()},now:$a,stats:bn});return Te.onDone(null,Ei),Ei}return sf})},952191:function(Ve,z){"use strict";var C;C={value:!0},C=y,z.Rs=h,C=Y,C=$,z.Yf=U,z.Lo=W,z.lu=H,z.hy=Q,z.Lq=tt,C=rt,z.dt=ct,z.GX=ot,C=xt,z.Ck=Xt,z.YJ=Ct,C=At,C=Z,C=q,C=bt;var b={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridColumn:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},k=["Webkit","ms","Moz","O"];function w(_t,nt){return _t+nt.charAt(0).toUpperCase()+nt.substring(1)}Object.keys(b).forEach(function(_t){k.forEach(function(nt){b[w(nt,_t)]=b[_t]})});var T=/^(normal|none|(\b(url\([^)]*\)|chapter_counter|attr\([^)]*\)|(no-)?(open|close)-quote|inherit)((\b\s*)|$|\s+))+)$/,L=function(){return typeof document=="undefined"?!1:!!(navigator&&(navigator.userAgent.indexOf("MSIE 8.0")>0||navigator.userAgent.indexOf("MSIE 9.0")>0))}(),P=1e5,p={aqua:[0,255,255,1],lime:[0,255,0,1],silver:[192,192,192,1],black:[0,0,0,1],maroon:[128,0,0,1],teal:[0,128,128,1],blue:[0,0,255,1],navy:[0,0,128,1],white:[255,255,255,1],fuchsia:[255,0,255,1],olive:[128,128,0,1],yellow:[255,255,0,1],orange:[255,165,0,1],gray:[128,128,128,1],purple:[128,0,128,1],green:[0,128,0,1],red:[255,0,0,1],pink:[255,192,203,1],cyan:[0,255,255,1],transparent:[255,255,255,0]},m=Math.PI/180,S=180/Math.PI,x={_lists:{transformsBase:["translate","translateX","translateY","scale","scaleX","scaleY","skewX","skewY","rotateZ","rotate"],transforms3D:["translate3d","translateZ","scaleZ","rotateX","rotateY","perspective"]},transformGroup:{translate:1,translate3d:1,scale:1,scale3d:1,rotate:1,rotate3d:1,skew:1},filter:["grayScale","sepia","hueRotate","invert","brightness","contrast","blur"],filterConvert:{grayScale:"grayscale",hueRotate:"hue-rotate"}};x._lists.transformsBase=L?x._lists.transformsBase:x._lists.transformsBase.concat(x._lists.transforms3D);var g=C=/#([0-9a-f]{8}|[0-9a-f]{6}|[0-9a-f]{3})/,A=C=/((rgb|hsl)[a]?)+\((?:\d|\.\d)+(?:(deg|\%|)),[\s+]?(?:\d|\.\d)+(?:(deg|\%|)),[\s+]?(?:\d|\.\d)+(?:(deg|%|))(,[\s+]?(?:\d|\.\d)+(?:(deg|\%|)))?\)/,E=z.rV=/#([0-9a-f]{8}|[0-9a-f]{6}|[0-9a-f]{3})|((rgb|hsl)[a]?)+\((?:\d|\.\d)+(?:(deg|\%)?),[\s+]?(?:\d|\.\d)+(?:(deg|\%)?),[\s+]?(?:\d|\.\d)+(?:(deg|%)?)(,[\s+]?(?:\d|\.\d)+(?:(deg|\%)?))?\)/,D=C=/(?:\d|\.\d)+(%?)/g,F=z._T=x;function y(_t){return _t.replace(/[A-Z]/,function(nt){return"-"+nt.toLocaleLowerCase()})}function h(_t){return _t.replace(/-(.?)/g,function(nt){return nt.replace("-","").toLocaleUpperCase()})}function Y(_t,nt){var vt=nt?Math.pow(10,nt):P,It=_t|0,Pt=_t-It,Et=_t;if(Pt){var Nt=(Pt*vt+(_t<0?-.5:.5)|0)/vt,$t=Nt|0,ue=Nt.toString(),ie=ue.split(".")[1]||"";Et=(_t<0&&!(It+$t)?"-":"")+(It+$t)+"."+ie}return parseFloat(Et)}function $(_t){if(typeof document=="undefined")return null;var nt=["WebKitCSS","MozCSS","DOM","MsCSS","MSCSS","OCSS","CSS"].filter(function(vt){return vt+"Matrix"in window});return nt.length?new window[nt[0]+"Matrix"](_t):(console.warn("Browsers do not support matrix."),"")}function U(_t){if(typeof document=="undefined")return null;var nt=["O","Moz","ms","Ms","Webkit"];if(_t!=="filter"&&_t in document.body.style)return _t;var vt=_t.charAt(0).toUpperCase()+_t.substr(1),It=nt.filter(function(Pt){return""+Pt+vt in document.body.style});return It[0]?""+It[0]+vt:null}function W(_t){var nt=_t;return nt=nt==="x"?"translateX":nt,nt=nt==="y"?"translateY":nt,nt=nt==="z"?"translateZ":nt,nt}var V=function(nt,vt,It){return It<0&&(It+=6),It>=6&&(It-=6),It<1?(vt-nt)*It+nt:It<3?vt:It<4?(vt-nt)*(4-It)+nt:nt};function H(_t){var nt=p.transparent,vt=_t,It=void 0,Pt=void 0,Et=void 0;if(!vt)nt=p.transparent;else if(p[vt])nt=p[vt];else if(typeof vt=="number")nt=[vt>>16,vt>>8&255,vt&255];else if(vt.charAt(vt.length-1)===","&&(vt=vt.substr(0,vt.length-1)),vt.match(g))vt=vt.substr(1),vt.length===3&&(It=vt.charAt(0),Pt=vt.charAt(1),Et=vt.charAt(2),vt=""+It+It+Pt+Pt+Et+Et+"ff"),vt.length===6&&(vt+="ff"),vt=parseInt(vt,16),nt=[vt>>24&255,vt>>16&255,vt>>8&255,parseFloat(((vt&255)/255).toFixed(2))];else if(vt.match(/^hsl/)){nt=vt.match(D);var Nt=nt[3];Nt=typeof Nt=="string"&&Nt.match("%")?parseFloat(Nt)/100:parseFloat(""+(Nt||"1"));var $t=parseFloat(nt[0])/60,ue=parseFloat(nt[1])/100,ie=parseFloat(nt[2])/100,Dt=ie<=.5?ie*(ue+1):ie+ue-ie*ue,ne=ie*2-Dt;It=Math.round(V(ne,Dt,$t+2)*255),Pt=Math.round(V(ne,Dt,$t)*255),Et=Math.round(V(ne,Dt,$t-2)*255),nt=[It,Pt,Et,Nt]}else nt=vt.match(D)||p.transparent,nt=nt.map(function(pe){return parseFloat(pe)}),nt.length===3&&nt.push(1);return nt}function Q(_t,nt){var vt=nt&&h(nt);if(!_t)return vt==="boxShadow"?[0,0,0,0,0,0,0,0]:[0,0,0,0,0,0,0];var It=_t.replace(/,\s+/gi,",").split(/\s+/).filter(function(ue){return ue}),Pt=It.indexOf("inset");Pt>=0&&It.splice(Pt,1);var Et=It.find(function(ue){return p[ue]||ue.match(/#([0-9a-fA-F]{6}|[0-9a-fA-F]{3})|(rgb|hsl)+(?:a)?\((.*)\)/i)})||"black",Nt=It.indexOf(Et);It.splice(Nt,1);var $t=H(Et);return $t[3]=typeof $t[3]=="number"?$t[3]:1,vt==="boxShadow"&&It.length<4&&It.push(0),It.concat($t,Pt>=0?["inset"]:[])}function tt(_t){var nt=_t.length===4?"rgba":"rgb",vt=_t.map(function(It,Pt){return Pt<3?Math.round(It):It});return nt+"("+vt.join(",")+")"}function rt(_t){return F._lists.transformsBase.indexOf(_t)>=0?"transform":_t}function ct(_t){var nt=rt(_t);return F.filter.indexOf(nt)>=0?"filter":nt}function ot(_t){if(_t==="none"||!_t||_t==="")return null;var nt=_t.replace(/\s+/g,"").split(")").filter(function(It){return It}),vt={};return nt.forEach(function(It){var Pt=It.split("(");vt[Pt[0]]=Pt[1]}),vt}function xt(_t){var nt=_t.match(/(?:\-|\b)[\d\-\.e]+\b/gi),vt={};return nt.length===6?(vt.m11=parseFloat(nt[0]),vt.m12=parseFloat(nt[1]),vt.m13=0,vt.m14=0,vt.m21=parseFloat(nt[2]),vt.m22=parseFloat(nt[3]),vt.m23=0,vt.m24=0,vt.m31=0,vt.m32=0,vt.m33=1,vt.m34=0,vt.m41=parseFloat(nt[4]),vt.m42=parseFloat(nt[5]),vt.m43=0,vt.m44=0):nt.forEach(function(It,Pt){var Et=Pt%4+1,Nt=Math.floor(Pt/4)+1;vt["m"+Nt+Et]=parseFloat(It)}),vt}function pt(_t){var nt={};return nt.translateX=0,nt.translateY=0,nt.translateZ=0,nt.rotate=0,nt.rotateX=0,nt.rotateY=0,nt.scaleX=1,nt.scaleY=1,nt.scaleZ=1,nt.skewX=0,nt.skewY=0,nt.perspective=0,(_t.trim().match(/(\w+)\([^\)]+\)/ig)||[]).forEach(function(vt){var It=vt.split("("),Pt=It[0].trim(),Et=It[1].replace(")","").trim();Et.match(/%|em|rem/ig)&&console.warn("value("+Et+") must be absolute, not relative, has been converted to absolute."),Et=Et.replace(/px|deg|\)/ig,""),F.transformGroup[Pt]&&Pt!=="rotate"?(Et=Et.split(",").map(function(Nt){return parseFloat(Nt)}),Pt==="scale3d"||Pt==="translate3d"?["X","Y","Z"].forEach(function(Nt,$t){var ue=Pt.substring(0,Pt.length-2);nt[""+ue+Nt]=Et[$t]||nt[""+ue+Nt]}):Pt==="rotate3d"?(nt.rotateX=Et[0]&&Et[3]||nt.rotateX,nt.rotateY=Et[1]&&Et[3]||nt.rotateY,nt.rotate=Et[2]&&Et[3]||nt.rotate):["X","Y"].forEach(function(Nt,$t){nt[""+Pt+Nt]=Et[$t]||nt[""+Pt+Nt]})):Pt==="rotateZ"?nt.rotate=parseFloat(Et)||nt.rotate:nt[Pt]=parseFloat(Et)||nt[Pt]}),nt}function Xt(_t){var nt=!_t||_t==="none"||_t===""?"matrix(1, 0, 0, 1, 0, 0)":_t;if(!nt.match("matrix"))return pt(_t);var vt=xt(nt),It=vt.m11,Pt=vt.m12,Et=vt.m13,Nt=vt.m14,$t=vt.m21,ue=vt.m22,ie=vt.m23,Dt=vt.m24,ne=vt.m31,pe=vt.m32,Wt=vt.m33,ae=vt.m34,Se=vt.m43,be=void 0,Qt=void 0,we=void 0,Tt={},Le=Math.atan2(ie,Wt),Mr=Math.tan($t),Ar=Math.tan(Pt),Ir=void 0,Br=void 0;return Tt.rotateX=Y(Le*S)||0,Le&&(Ir=Math.cos(-Le),Br=Math.sin(-Le),be=$t*Ir+ne*Br,Qt=ue*Ir+pe*Br,we=ie*Ir+Wt*Br,ne=$t*-Br+ne*Ir,pe=ue*-Br+pe*Ir,Wt=ie*-Br+Wt*Ir,ae=Dt*-Br+ae*Ir,$t=be,ue=Qt,ie=we),Le=Math.atan2(-Et,Wt),Tt.rotateY=Y(Le*S)||0,Le&&(Ir=Math.cos(-Le),Br=Math.sin(-Le),be=It*Ir-ne*Br,Qt=Pt*Ir-pe*Br,we=Et*Ir-Wt*Br,pe=Pt*Br+pe*Ir,Wt=Et*Br+Wt*Ir,ae=Nt*Br+ae*Ir,It=be,Pt=Qt,Et=we),Le=Math.atan2(Pt,It),Tt.rotate=Y(Le*S)||0,Le&&(Ir=Math.cos(Le),Br=Math.sin(Le),be=It*Ir+Pt*Br,Qt=$t*Ir+ue*Br,we=ne*Ir+pe*Br,Pt=Pt*Ir-It*Br,ue=ue*Ir-$t*Br,pe=pe*Ir-ne*Br,It=be,$t=Qt,ne=we),Tt.rotateX&&Math.abs(Tt.rotateX)+Math.abs(Tt.rotate)>359.9&&(Tt.rotateX=Tt.rotate=0,Tt.rotateY=180-Tt.rotateY||0),Tt.scaleX=Y(Math.sqrt(It*It+Pt*Pt+Et*Et)),Tt.scaleY=Y(Math.sqrt(ue*ue+ie*ie)),Tt.scaleZ=Y(Math.sqrt(ne*ne+pe*pe+Wt*Wt)),Tt.skewX=Mr===-Ar?0:Mr,Tt.skewY=Ar===-Mr?0:Ar,Tt.perspective=ae?1/(ae<0?-ae:ae):0,Tt.translateX=vt.m41,Tt.translateY=vt.m42,Tt.translateZ=Se,Tt}function Ct(_t,nt){var vt=void 0;return!b[_t]&&typeof nt=="number"?vt=" "+nt+"px":_t==="content"&&!T.test(nt)&&(vt="'"+nt.replace(/'/g,"\\'")+"'"),vt||nt}function At(_t,nt){var vt=nt&&nt.toString().replace(/[^a-z|%]/ig,""),It="";return _t.indexOf("translate")>=0||_t.indexOf("perspective")>=0||_t.indexOf("blur")>=0?It="px":(_t.indexOf("skew")>=0||_t.indexOf("rotate")>=0)&&(It="deg"),vt||It}function Z(_t,nt,vt){return _t+"("+nt+(vt||"")+")"}function q(_t,nt){var vt=null;return _t&&_t.forEach(function(It){if(!vt){var Pt=It.split("(")[0],Et=Pt in F.transformGroup&&nt.substring(0,nt.length-1).indexOf(Pt)>=0,Nt=nt in F.transformGroup&&Pt.substring(0,Pt.length-1).indexOf(nt)>=0,$t=Pt in F.transformGroup&&nt in F.transformGroup&&(Pt.substring(0,Pt.length-2)===nt||nt.substring(0,nt.length-2)===Pt);(Pt===nt||Et||Nt||$t)&&(vt=It)}}),vt}function bt(_t,nt){if(!_t||_t==="")return nt;if(!nt||nt==="")return _t;var vt=_t.replace(/\s/g,"").split(")").filter(function(Pt){return Pt!==""&&Pt}).map(function(Pt){return Pt+")"}),It=nt.replace(/\s/g,"").split(")").filter(function(Pt){return Pt!==""&&Pt});return It.forEach(function(Pt){var Et=Pt.split("("),Nt=Et[0],$t=q(vt,Nt);if(!$t)vt.push(Pt+")");else{var ue=vt.indexOf($t);vt[ue]=Pt+")"}}),vt.forEach(function(Pt,Et){Pt.indexOf("perspective")>=0&&Et&&(vt.splice(Et,1),vt.unshift(Pt))}),vt.join(" ").trim()}},141e3:function(Ve){"use strict";var z={linear:function(C,b,k,w){var T=k-b;return T*C/w+b},easeInQuad:function(C,b,k,w){var T=k-b;return T*(C/=w)*C+b},easeOutQuad:function(C,b,k,w){var T=k-b;return-T*(C/=w)*(C-2)+b},easeInOutQuad:function(C,b,k,w){var T=k-b;return(C/=w/2)<1?T/2*C*C+b:-T/2*(--C*(C-2)-1)+b},easeInCubic:function(C,b,k,w){var T=k-b;return T*(C/=w)*C*C+b},easeOutCubic:function(C,b,k,w){var T=k-b;return T*((C=C/w-1)*C*C+1)+b},easeInOutCubic:function(C,b,k,w){var T=k-b;return(C/=w/2)<1?T/2*C*C*C+b:T/2*((C-=2)*C*C+2)+b},easeInQuart:function(C,b,k,w){var T=k-b;return T*(C/=w)*C*C*C+b},easeOutQuart:function(C,b,k,w){var T=k-b;return-T*((C=C/w-1)*C*C*C-1)+b},easeInOutQuart:function(C,b,k,w){var T=k-b;return(C/=w/2)<1?T/2*C*C*C*C+b:-T/2*((C-=2)*C*C*C-2)+b},easeInQuint:function(C,b,k,w){var T=k-b;return T*(C/=w)*C*C*C*C+b},easeOutQuint:function(C,b,k,w){var T=k-b;return T*((C=C/w-1)*C*C*C*C+1)+b},easeInOutQuint:function(C,b,k,w){var T=k-b;return(C/=w/2)<1?T/2*C*C*C*C*C+b:T/2*((C-=2)*C*C*C*C+2)+b},easeInSine:function(C,b,k,w){var T=k-b;return-T*Math.cos(C/w*(Math.PI/2))+T+b},easeOutSine:function(C,b,k,w){var T=k-b;return T*Math.sin(C/w*(Math.PI/2))+b},easeInOutSine:function(C,b,k,w){var T=k-b;return-T/2*(Math.cos(Math.PI*C/w)-1)+b},easeInExpo:function(C,b,k,w){var T=k-b;return C==0?b:T*Math.pow(2,10*(C/w-1))+b},easeOutExpo:function(C,b,k,w){var T=k-b;return C==w?b+T:T*(-Math.pow(2,-10*C/w)+1)+b},easeInOutExpo:function(C,b,k,w){var T=k-b;return C===0?b:C===w?b+T:(C/=w/2)<1?T/2*Math.pow(2,10*(C-1))+b:T/2*(-Math.pow(2,-10*--C)+2)+b},easeInCirc:function(C,b,k,w){var T=k-b;return-T*(Math.sqrt(1-(C/=w)*C)-1)+b},easeOutCirc:function(C,b,k,w){var T=k-b;return T*Math.sqrt(1-(C=C/w-1)*C)+b},easeInOutCirc:function(C,b,k,w){var T=k-b;return(C/=w/2)<1?-T/2*(Math.sqrt(1-C*C)-1)+b:T/2*(Math.sqrt(1-(C-=2)*C)+1)+b},easeInElastic:function(C,b,k,w){var T=k-b,L,P,p;return p=1.70158,P=0,L=T,C===0?b:(C/=w)===1?b+T:(P||(P=w*.3),L<Math.abs(T)?(L=T,p=P/4):p=P/(2*Math.PI)*Math.asin(T/L),-(L*Math.pow(2,10*(C-=1))*Math.sin((C*w-p)*(2*Math.PI)/P))+b)},easeOutElastic:function(C,b,k,w){var T=k-b,L,P,p;return p=1.70158,P=0,L=T,C===0?b:(C/=w)===1?b+T:(P||(P=w*.3),L<Math.abs(T)?(L=T,p=P/4):p=P/(2*Math.PI)*Math.asin(T/L),L*Math.pow(2,-10*C)*Math.sin((C*w-p)*(2*Math.PI)/P)+T+b)},easeInOutElastic:function(C,b,k,w){var T=k-b,L,P,p;return p=1.70158,P=0,L=T,C===0?b:(C/=w/2)===2?b+T:(P||(P=w*.44999999999999996),L<Math.abs(T)?(L=T,p=P/4):p=P/(2*Math.PI)*Math.asin(T/L),C<1?-.5*(L*Math.pow(2,10*(C-=1))*Math.sin((C*w-p)*(2*Math.PI)/P))+b:L*Math.pow(2,-10*(C-=1))*Math.sin((C*w-p)*(2*Math.PI)/P)*.5+T+b)},easeInBack:function(C,b,k,w,T){var L=k-b;return T===void 0&&(T=1.70158),L*(C/=w)*C*((T+1)*C-T)+b},easeOutBack:function(C,b,k,w,T){var L=k-b;return T===void 0&&(T=1.70158),L*((C=C/w-1)*C*((T+1)*C+T)+1)+b},easeInOutBack:function(C,b,k,w,T){var L=k-b;return T===void 0&&(T=1.70158),(C/=w/2)<1?L/2*(C*C*(((T*=1.525)+1)*C-T))+b:L/2*((C-=2)*C*(((T*=1.525)+1)*C+T)+2)+b},easeInBounce:function(C,b,k,w){var T=k-b,L;return L=z.easeOutBounce(w-C,0,T,w),T-L+b},easeOutBounce:function(C,b,k,w){var T=k-b;return(C/=w)<.36363636363636365?T*(7.5625*C*C)+b:C<.7272727272727273?T*(7.5625*(C-=.5454545454545454)*C+.75)+b:C<.9090909090909091?T*(7.5625*(C-=.8181818181818182)*C+.9375)+b:T*(7.5625*(C-=.9545454545454546)*C+.984375)+b},easeInOutBounce:function(C,b,k,w){var T=k-b,L;return C<w/2?(L=z.easeInBounce(C*2,0,T,w),L*.5+b):(L=z.easeOutBounce(C*2-w,0,T,w),L*.5+T*.5+b)}};Ve.exports=z},364687:function(Ve,z,C){var b=C(817061)();Ve.exports=b;try{regeneratorRuntime=b}catch(k){typeof globalThis=="object"?globalThis.regeneratorRuntime=b:Function("r","regeneratorRuntime = r")(b)}},577134:function(Ve,z,C){"use strict";C.d(z,{Z:function(){return D}});var b=C(667294),k=C(785893),w=F=>{let y=F;for(;y=y.parentElement;){const h=getComputedStyle(y,null).getPropertyValue("overflow-y");if(y===document.body)return window;if(h==="auto"||h==="scroll"||h==="overlay")return y}return window},T=F=>F.firstChild?F.firstChild.offsetParent===F:!0,L=(F,y)=>{let h=F,Y=0;T(y)||(Y+=F.offsetTop-y.offsetTop,y=F.offsetParent,Y+=-F.offsetTop);do Y+=h.offsetTop,h=h.offsetParent;while(h&&h!==y);return Y},P=F=>{let y=F.parentElement;for(;y&&getComputedStyle(y,null).getPropertyValue("display")==="contents";)y=y.parentElement;return y||window},p=null;typeof CSS!="undefined"&&CSS.supports&&(CSS.supports("position","sticky")?p="sticky":CSS.supports("position","-webkit-sticky")&&(p="-webkit-sticky"));var m=!1;try{const F=Object.defineProperty({},"passive",{get(){m={passive:!0}}}),y=()=>{};window.addEventListener("testPassive",y,F),window.removeEventListener("testPassive",y,F)}catch(F){}var S=F=>{const{el:y,onChange:h,unsubs:Y,measure:$}=F;if(y===window){const U=()=>({top:0,left:0,height:window.innerHeight,width:window.innerWidth}),W=$(U()),V=()=>{Object.assign(W,$(U())),h()};return window.addEventListener("resize",V,m),Y.push(()=>window.removeEventListener("resize",V)),W}else{const U=$(y.getBoundingClientRect()),W=()=>{Object.assign(U,$(y.getBoundingClientRect())),h()},V=new ResizeObserver(W);return V.observe(y),Y.push(()=>V.disconnect()),U}},x=F=>{const y=getComputedStyle(F,null),h=parseInt(y.getPropertyValue("padding-top"),10),Y=parseInt(y.getPropertyValue("padding-bottom"),10);return{top:h,bottom:Y}},g=(F,y,h)=>{const{bottom:Y,offsetBottom:$,offsetTop:U}=h,W=w(F);let V=!1;const H=()=>{V||requestAnimationFrame(()=>{const nt=rt();nt!==Z&&q(nt),V=!1}),V=!0};let Q=W===window?window.scrollY:W.scrollTop;const tt=nt=>{const{offsetTop:vt,height:It}=ot,{naturalTop:Pt}=Xt,{height:Et}=Ct;return nt+vt+It>=Pt+Et+At+$},rt=()=>{const{height:nt}=ot,{height:vt}=Ct;return vt+U+$<=nt?3:tt(Q)?1:2},ct=W!==window&&T(W),ot=S({el:W,onChange:H,unsubs:y,measure:({height:nt,top:vt})=>({height:nt,offsetTop:ct?vt:0})}),xt=P(F),pt=xt===window?{top:0,bottom:0}:x(xt),Xt=S({el:xt,onChange:H,unsubs:y,measure:({height:nt})=>({height:nt-pt.top-pt.bottom,naturalTop:xt===window?0:L(xt,W)+pt.top+ot.offsetTop})}),Ct=S({el:F,onChange:H,unsubs:y,measure:({height:nt})=>({height:nt})});let At=0,Z=rt();const q=nt=>{const vt=Z;if(Z=nt,vt===2&&(At=-1),nt===3){F.style.position=p,Y?F.style.bottom=`${$}px`:F.style.top=`${U}px`;return}const{height:It,offsetTop:Pt}=ot,{height:Et,naturalTop:Nt}=Xt,{height:$t}=Ct;if(nt===2)if(F.style.position="relative",At=vt===0?Math.max(0,Pt+Q-Nt+U):Math.max(0,Pt+Q+It-(Nt+$t+$)),Y){const ue=Math.max(0,Et-$t-At);F.style.bottom=`${ue}px`}else F.style.top=`${At}px`;else F.style.position=p,nt===1?Y?F.style.bottom=`${$}px`:F.style.top=`${It-$t-$}px`:Y?F.style.bottom=`${It-$t-$}px`:F.style.top=`${U}px`};q(Z);const bt=nt=>{if(nt===Q)return;const vt=nt-Q;if(Q=nt,Z===3)return;const{offsetTop:It,height:Pt}=ot,{naturalTop:Et,height:Nt}=Xt,{height:$t}=Ct;if(vt>0)if(Z===0){if(nt+It+U>Et){const ue=Math.max(0,It+Q-Et+U);nt+It+Pt<=Et+$t+ue+$?q(2):q(1)}}else Z===2&&tt(nt)&&q(1);else if(Z===1){if(It+nt+Pt<Et+Nt+$){const ue=Math.max(0,It+Q+Pt-(Et+$t+$));It+nt+U>=Et+ue?q(2):q(0)}}else Z===2&&It+nt+U<Et+At&&q(0)},_t=W===window?()=>bt(window.scrollY):()=>bt(W.scrollTop);W.addEventListener("scroll",_t,m),W.addEventListener("mousewheel",_t,m),y.push(()=>W.removeEventListener("scroll",_t),()=>W.removeEventListener("mousewheel",_t))},A=({offsetTop:F=0,offsetBottom:y=0,bottom:h=!1}={})=>{const[Y,$]=(0,b.useState)(null);return(0,b.useEffect)(()=>{if(!Y||!p)return;const U=[];return g(Y,U,{offsetBottom:y,offsetTop:F,bottom:h}),()=>{U.forEach(W=>W())}},[Y,y,F,h]),$},E=F=>{const{offsetTop:y,offsetBottom:h,bottom:Y,children:$,className:U,style:W}=F,V=A({offsetTop:y,offsetBottom:h,bottom:Y});return(0,k.jsx)("div",{className:U,style:W,ref:V,children:$})},D=E}}]);
}());